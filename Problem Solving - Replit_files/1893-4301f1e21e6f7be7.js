!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="46da6010-e148-4980-84ba-9d3b96c2054a",e._sentryDebugIdIdentifier="sentry-dbid-46da6010-e148-4980-84ba-9d3b96c2054a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"83fc2cd4"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1893],{29017:function(e,n,t){t.d(n,{I:function(){return c},N:function(){return u}});var r=t(3030),o=t(42305),i=t(96949),l=t(6038),a=(0,t(49853).cn)(!1),c=new o.j(function(e){var n=e.analyticsSurface,t=e.shouldTrack,o=e.onPaste;return r.tk.domEventHandlers({paste:function(){t&&(0,i.j)(i.U3.TEXT_PASTED,{surface:n}),null==o||o()}})});function u(e){var n=e.analyticsSurface,t=(0,l.Hg)(a),r=(0,l.$X)(a);return c.use({analyticsSurface:n,shouldTrack:!t,onPaste:function(){return r(!0)}})}},6069:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(3796),o=t(53250),i=t(75271);function l(e){var n=e.json,t=(0,i.useMemo)(function(){return JSON.stringify(n,null,2)},[n]);return(0,r.tZ)(o.Z,{language:"json",code:t})}},24936:function(e,n,t){t.d(n,{UL:function(){return i},cE:function(){return r},f5:function(){return o}});var r="Tools",o=600,i="CommandBar"},85451:function(e,n,t){t.d(n,{X:function(){return ec}});var r=t(42516),o=t(41733),i=t(3796),l=t(31252),a=t(75271),c=t(52657),u=t(37862),s=t(83059),d=t(95281),f=t(86466),h=t(35820),p=t(22893),v=t(93245),m=t(36809),g=t(10578),Z=t(63163),b=t(12e3),y=t(33323),x=t(77558),C=(0,m.X)({root:[Z.l0.reset.button,Z.l0.viewStyle,Z.l0.flex.row,Z.l0.align.center,Z.l0.borderRadius(0),Z.l0.cursor.pointer,Z.l0.color.foregroundDimmer,{gap:(0,x.fP)(4),paddingLeft:(0,x.fP)(4),paddingRight:(0,x.fP)(4),"&:hover":{color:Z.TV.foregroundDefault}}],icon:[Z.l0.position.relative,(0,x.D$)(16),{width:(0,x.fP)(16),height:(0,x.fP)(16)}],iconRight:[(0,x.D$)(12),{width:(0,x.fP)(12),height:(0,x.fP)(12)}],text:[Z.l0.truncate,Z.l0.flex.shrink(1),{fontSize:"1em"}]}),w=(0,a.memo)(function(){var e=(0,b.hp)(),n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,i.tZ)(i.HY,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var o=e.data,l=o.label,a=o.icon;return(0,i.BX)("button",{css:C.root,onClick:function(){return r(e)},children:[(0,i.tZ)(v.G,{css:C.icon,children:a}),t?null:(0,i.tZ)(v.G,{css:C.text,children:l}),(0,i.tZ)(v.G,{css:C.iconRight,children:(0,i.tZ)(y.Z,{})})]},l+n)})}):null}),S=t(62279),_=t(7935),E=(0,S.iv)([Z.l0.reset.button,Z.l0.viewStyle,Z.l0.center,Z.l0.height("100%"),Z.l0.cursor.pointer,Z.l0.color.foregroundDimmest,{paddingLeft:(0,x.fP)(4),paddingRight:(0,x.fP)(4),"&:hover":{color:Z.TV.foregroundDefault}},(0,x.D$)(16)]);function T(e){return(0,i.tZ)("button",{css:E,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,i.tZ)(g.Z,{}):(0,i.tZ)(_.Z,{})})}var k=t(30509),A=t(54455),R=t(379),I=t(14548),G=t(4573),D=t(42401),B=t(24936),P=t(6519),X=t(1869),L=function(e){return Math.round(e.value/14*e.fontSize)},N=[Z.l0.position.absolute,Z.l0.top(0),Z.l0.left(0),Z.l0.width("100%")],M=(0,m.X)({item:[N,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginRight:4,marginLeft:4},"&:hover > div":{backgroundColor:f.vb.interactiveBackground}},Z.nC.min(B.f5,B.UL),{"> div":{borderRadius:"4px"}})]}),O=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=(0,D.v)(),r=(0,b.O$)(),l=(0,b.c1)(e.index),c=l.row,u=l.active,s=l.onClick,d=l.ariaAttrs;if(!c)return null;var f={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===c.type)return(0,i.tZ)(W,{path:c.path,style:f,border:e.index>0});var h=c.item,p=h.data,m=h.match;if("group"===p.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,i.BX)(v.G,(0,k._)((0,o._)({innerRef:n,css:M.item,style:f,onClick:s,"data-index":e.index},d),{children:[(0,i.tZ)(I.Tg,{elevated:u,children:(0,a.cloneElement)(g.content,{active:u})}),t?(0,i.tZ)(j,{score:m.score}):null]}));var Z=p.label,y=p.icon,x=p.dataCy,C=g&&"ranges"in g?g.ranges:void 0;return(0,i.BX)(v.G,(0,k._)((0,o._)({innerRef:n,css:M.item,style:f,onClick:s,dataCy:x,"data-index":e.index},d),{children:[(0,i.tZ)(V,{active:u,icon:y,text:Z,highlight:C,description:p.description,shortcut:p.keyboardShortcut,hasChildren:"context"===h.data.type}),t?(0,i.tZ)(j,{score:m.score}):null]}))}));O.displayName="Row";var U=[{padding:(0,x.fP)(8)}],q=(0,m.X)({root:[U,Z.l0.align.center,Z.l0.flex.row,Z.l0.height("100%"),{gap:(0,x.fP)(8),userSelect:"none"}],iconText:[Z.l0.align.center,Z.l0.flex.row,Z.l0.maxWidth("100%"),{gap:(0,x.fP)(8)}],description:[Z.l0.truncate,Z.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[Z.l0.flex.row,Z.l0.align.center,{gap:(0,x.fP)(4),justifySelf:"end",marginLeft:"auto"}],chevron:(0,x.D$)(12)});function V(e){var n=(0,X.Hg)(b.FF);return(0,i.BX)(I.Tg,{elevated:e.active,css:q.root,children:[(0,i.BX)(v.G,{css:q.iconText,children:[(0,i.tZ)(v.G,{className:"icon",css:H.root,children:e.icon}),(0,i.tZ)(G.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,i.tZ)(v.G,{css:q.description,style:{color:e.active?Z.TV.foregroundDimmer:Z.TV.foregroundDimmest},children:e.description}):null,(0,i.BX)(v.G,{css:q.right,children:[e.shortcut?(0,i.tZ)(l.bM,{keyCombo:e.shortcut,fontSize:Math.round(.85*n)}):null,e.hasChildren?(0,i.tZ)(v.G,{css:q.chevron,children:(0,i.tZ)(y.Z,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var H=(0,m.X)({root:[Z.l0.position.relative,(0,x.D$)(16),{width:(0,x.fP)(16),height:(0,x.fP)(16)}]}),F=(0,m.X)({borderHeaderWrap:[N,Z.l0.flex.column,{userSelect:"none",padding:[4,0,0,0].map(x.fP).join(" "),gap:(0,x.fP)(10)}],borderWrap:[{userSelect:"none"},N,Z.l0.justify.center],headerWrap:[{userSelect:"none",paddingRight:(0,x.fP)(8),paddingBottom:(0,x.fP)(4)},N,Z.l0.justify.end],header:[{userSelect:"none"},Z.l0.align.center,Z.l0.flex.row,Z.l0.px(12),{gap:(0,x.fP)(4)},(0,x.D$)(12)],text:[{userSelect:"none"},Z.l0.flex.shrink(1),Z.l0.color.foregroundDimmest,Z.l0.truncate,{fontSize:"0.9em"}],border:[Z.l0.height(1),Z.l0.width("100%")]}),W=(0,a.memo)(function(e){var n=(0,b.hG)(),t=(0,P.n)(e.path,n),r=(0,i.tZ)(I.Tg,{elevated:!0,css:F.border});if(0===t.length)return e.border?(0,i.tZ)(v.G,{css:F.borderWrap,style:e.style,children:r}):null;var o=(0,i.tZ)(v.G,{css:F.header,children:t.map(function(e,n){return(0,i.BX)(a.Fragment,{children:[n>0?(0,i.tZ)(y.Z,{color:Z.TV.foregroundDimmest}):null,(0,i.tZ)(v.G,{css:F.text,children:e})]},e+n)})});return e.border?(0,i.BX)(v.G,{css:F.borderHeaderWrap,style:e.style,children:[r,o]}):(0,i.tZ)(v.G,{css:F.headerWrap,style:e.style,children:o})}),z={pill:[Z.l0.position.absolute,Z.l0.top("50%"),Z.l0.right(4),{transform:"translateY(-50%)"}]};function j(e){var n=e.score;return(0,i.tZ)(R.D,{text:"".concat(n),colorway:"red",css:z.pill})}var $=t(8701),K=(0,m.X)({root:[Z.l0.flex.growAndShrink(1),Z.l0.overflow("hidden"),{paddingTop:x.Cn.menuPaddingTop}],scrollParent:[Z.l0.height("100%"),Z.l0.overflowY("auto"),Z.l0.flex.growAndShrink(1)]}),Y=(0,a.memo)(function(e){var n,t=(0,b.H9)(),r=t.rows,l=t.isOpen,c=t.scrollRef,u=t.currentPathIndex,s=t.ariaAttrs,d=(0,X.$X)(b.sk),f=(0,X.Hg)(b.FF),h=(0,X.Hg)(b.LW),p=(0,b.O$)(),m=(0,A.MG)({count:r.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,getScrollElement:function(){return c.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:(0,$.N)(n.item.path):""},estimateSize:function(n){var t=r[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,o=e.compact,i=e.isFirst,l=e.fontSize,a=e.minItemHeight;if("section"===t.type){var c=(0,P.n)(t.path,r).length?20:0;if(i){var u=o?c+L({fontSize:l,value:10}):c;return 0===c?u:L({fontSize:l,value:c})}return c+L({fontSize:l,value:16})}var s=t.item.match.render;return s&&"content"in s?Math.max(L({fontSize:l,value:null!==(n=s.height)&&void 0!==n?n:32}),a):Math.max(L({fontSize:l,value:32}),a)}({fontSize:f,row:t,currentPathIndex:u,compact:h,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g={borderRadius:e.hasFooter?void 0:Z.TV.space8,display:l?void 0:"none"},y=m.scrollToIndex,x=m.getVirtualItems,C=(0,b.ib)();return(0,a.useEffect)(function(){var e=C;!(e<0)&&(1===e&&(e=0),x()[e]&&y(e,{behavior:"smooth"}))},[y,x,C]),(0,i.tZ)(v.G,(0,k._)((0,o._)({css:K.root},s),{style:g,children:(0,i.tZ)(v.G,{innerRef:c,css:K.scrollParent,children:(0,i.tZ)(v.G,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,i.tZ)(O,{index:e.index,y:e.start,height:e.size,ref:p?m.measureElement:void 0},e.key)}):null})})}))}),J=(0,m.X)({root:[Z.l0.flex.growAndShrink(1),Z.l0.width("100%"),Z.l0.height("100%"),Z.l0.flex.row,Z.l0.justify.center,Z.l0.borderRadius(4),{containerName:B.UL,containerType:x.Cn.containerType}],content:[Z.l0.pb(4),Z.l0.flex.growAndShrink(1),Z.l0.maxWidth("calc(".concat(B.f5,"px - ").concat(Z.TV.space16,")")),{fontSize:x.Cn.fontSize}],footer:{paddingTop:(0,x.fP)(8)},keyComboBlocks:{paddingRight:(0,x.fP)(8)},menuWrap:[Z.l0.flex.shrink(1)],row:[Z.l0.position.absolute,Z.l0.top(0),Z.l0.left(0),Z.l0.width("100%")],menu:[Z.l0.flex.shrink(1),Z.l0.overflow("auto")],running:[Z.l0.center,Z.l0.flex.growAndShrink(1)],error:{padding:(0,x.fP)(8)}}),Q=(0,m.X)({root:[Z.l0.viewStyle,Z.l0.flex.growAndShrink(1),Z.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,x.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:Z.TV.foregroundDimmest},"&:hover::placeholder":{color:Z.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:Z.TV.foregroundDimmest}}]}),ee=(0,a.memo)(function(e){var n=(0,b.Gl)();return(0,i.tZ)("input",(0,o._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:Q.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},n.ariaAttrs))}),en=[f.gU.filled,Z.l0.viewStyle,Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.growAndShrink(1),{height:(0,x.fP)(32),borderRadius:(0,x.fP)(4)}],et=(0,m.X)({container:[Z.l0.pb(0),(0,r._)({paddingTop:x.Cn.inputBarPadding,paddingInline:x.Cn.inputBarPadding,"& > div > button + input":{paddingLeft:0}},Z.nC.min(B.f5,B.UL),{paddingInline:"0px"})],surface:en,surfaceRunning:[en,h.p.foregroundPulse()]}),er=[Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.growAndShrink(1),Z.l0.mx(8),Z.l0.my(8),{border:"1px solid ".concat(f.vb.interactiveBorder),backgroundColor:f.vb.interactiveBackground,height:Z.TV.space32,borderRadius:Z.TV.space4,":hover":{border:"1px solid ".concat(f.vb.interactiveBorderHover)}}],eo=(0,m.X)({container:[{"& > div > button + input":{paddingLeft:0}},Z.l0.pb(0)],surface:er,surfaceRunning:[er,h.p.foregroundPulse()],border:[Z.l0.height(1),{display:x.Cn.minimalInputBarBorderDisplay}]});function ei(e){var n=(0,b.U6)(),t=(0,b.mU)(),o=(0,X.$X)(b.M0),l=(0,u.Z)(function(e){return o(e.height)}),c=(0,X.Hg)(b.LI),s=(0,X.Hg)(b.LW),f=c?eo:et,h=(0,a.useRef)(null);(0,d.j)(h,t,function(e){var n;return n={},(0,r._)(n,x.Dq.borderBottomRightRadius,e?(0,x.fP)(8):"0"),(0,r._)(n,x.Dq.borderBottomLeftRadius,e?(0,x.fP)(8):"0"),n});var p=(0,a.useRef)(null);return(0,d.j)(p,t,function(e){return(0,r._)({},x.Dq.minimalInputBarBorderDisplay,e?"none":"inherit")}),(0,i.tZ)(i.HY,{children:(0,i.tZ)(v.G,{css:f.container,innerRef:l,style:(0,r._)({},x.Dq.inputBarPadding,s?"0px":(0,x.fP)(8)),children:(0,i.tZ)(v.G,{innerRef:h,css:n?f.surfaceRunning:f.surface,children:e.children})})})}var el=(0,a.memo)(function(e){var n=(0,b.CM)(),t=(0,b.nR)();return n?(0,i.tZ)(T,{onClick:e.onClick,isLoading:t}):null}),ea=(0,a.memo)(function(){var e,n,t,o,d=(0,b.jj)(),f=d.isOpen,h=d.focus,m=d.clearCommands,y=d.isClearable,C=d.onKeyDown,S=d.inputValue,_=d.noResults,E=d.hasHighlightedItem,T=d.isRunning,k=d.actionError,A=(0,c.Z)({inputValue:S,noResults:_,hasHighlightedItem:E});e=(0,X.XD)(b.Uk),n=(0,X.Hg)(b.M0),t=(0,X.yL)(b.Cl),(0,a.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===o&&(o=n),t({initial:o,current:n}))};if(0!==n){var o=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var R=(0,X.Hg)(b.EQ),I=(0,X.Hg)(b._A),G=(0,X.Hg)(b.ux),D=(0,X.Hg)(b.Bw),B=(0,X.Hg)(b.l1),P=(0,X.Hg)(b.vx),L=(0,X.XD)(b.Uk),N=(0,s.Z)(function(){return function(e){var n,t=A.current,r=L();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}C(e)}}},[A,C,L]);(0,a.useEffect)(function(){B&&(B.current=h)},[h,B]);var M=(0,b.YE)(),O=(0,X.$X)(b.Tj),U=(0,u.Z)(function(e){return O(e.height)}),q=(0,X.Hg)(b.FF),V=(0,X.Hg)(b.LW),H=(0,X.Hg)(b.LI);return(0,i.tZ)(v.G,{css:J.root,style:(o={},(0,r._)(o,x.Dq.fontSize,q+"px"),(0,r._)(o,x.Dq.menuPaddingTop,H?"0px":(0,x.fP)(8)),(0,r._)(o,x.Dq.containerType,V?"normal":"inline-size"),o),children:(0,i.BX)(v.G,{css:J.content,children:[(0,i.tZ)("label",{id:M.label,htmlFor:M.input,css:Z.l0.visuallyHidden,children:"Commands"}),(0,i.BX)(ei,{children:[(0,i.tZ)(w,{}),(0,i.tZ)(ee,{autoFocus:R,onKeyDown:N}),(0,i.tZ)(el,{onClick:function(){return m({focus:!0})}}),I&&!y?(0,i.tZ)(v.G,{css:J.keyComboBlocks,children:(0,i.tZ)(l.bM,{keyCombo:I,fontSize:.85*q})}):null]}),k?(0,i.tZ)(v.G,{css:J.error,children:(0,i.tZ)(p.E,{colorway:"warning",text:k})}):null,f&&!T?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Y,{minItemHeight:P,overscan:G,hasFooter:!!D}),D?(0,i.tZ)(v.G,{innerRef:U,css:J.footer,children:D}):null]}):null,T?(0,i.tZ)(v.G,{css:J.running,children:(0,i.tZ)(g.Z,{size:24})}):null]})})});function ec(e){var n=(0,b.ns)(e);return(0,i.tZ)(X.xf.Provider,{value:n,children:(0,i.tZ)(ea,{})})}},8701:function(e,n,t){t.d(n,{N:function(){return r}});function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}},6519:function(e,n,t){t.d(n,{V:function(){return l},n:function(){return a}});var r=t(66626),o=t(63257),i=t(8701);function l(e){var n=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),r="section:"+(0,i.N)(t),o=n.get(r);if(o)o.items.push(e);else{var l=t[t.length-1],a=(null==l?void 0:l.data.type)==="group";n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:a,key:r})}});var t=(0,o._)(n.entries()).sort(function(e,n){var t=(0,r._)(e,2),o=(t[0],t[1]),i=(0,r._)(n,2);return(i[0],i[1]).score-o.score}),l={items:[],rows:[]},a=0;return t.forEach(function(e){var n=(0,r._)(e,2),t=n[0],o=n[1];l.rows.push({type:o.type,key:t,path:o.path,unlabeled:o.unlabeled}),o.items.forEach(function(e){l.items.push(e),l.rows.push({type:"item",item:e,index:a++})})}),l}function a(e,n){var t=[],r=!0,i=!1,l=void 0;try{for(var a,c=e.slice(n)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;"group"!==u.data.type&&t.push(u.data.label)}}catch(e){i=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw l}}return(0,o._)(new Set(t))}},12e3:function(e,n,t){t.d(n,{EQ:function(){return G},LW:function(){return M},Uk:function(){return R},l1:function(){return L},FF:function(){return N},Bw:function(){return X},Tj:function(){return C},M0:function(){return y},_A:function(){return D},vx:function(){return U},LI:function(){return O},ux:function(){return P},sk:function(){return x},Cl:function(){return w},hp:function(){return ew},jj:function(){return eL},hG:function(){return ev},YE:function(){return Y},ib:function(){return er},ns:function(){return eN},Gl:function(){return eD},CM:function(){return eg},nR:function(){return eh},U6:function(){return k},H9:function(){return eG},mU:function(){return $},c1:function(){return eb},O$:function(){return V}});var r,o=t(27387),i=t(41733),l=t(66626),a=t(96583),c=t(41974),u=t(49853),s=t(80951),d=t(75271),f=t(52657),h=t(83059),p=t(31089),v=t(63257);function m(e,n){for(var t=e.indexPath,r=n.indexPath,o=Math.min(t.length,r.length),i=0;i<o;i++){if(t[i]>r[i])return 1;if(t[i]<r[i])return -1}return t.length-r.length}var g=t(6519),Z=t(1869),b=function(e){return"item-"+e},y=(0,u.cn)(0),x=(0,u.cn)(0),C=(0,u.cn)(0),w=(0,u.cn)(function(e){return e(y)+e(x)+e(C)}),S=(0,u.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),_=(0,u.cn)(!0);function E(){return(0,Z.Hg)(_)}var T=(0,u.cn)(!1);function k(){return(0,Z.Hg)(T)}var A=(0,u.cn)(null),R=(0,u.cn)({}),I=(0,s.kv)(R,function(e){return!!e.openOnInput}),G=(0,s.kv)(R,function(e){return!!e.autoFocus}),D=(0,s.kv)(R,function(e){return e.keyboardShortcut}),B=(0,s.kv)(R,function(e){return e.command}),P=(0,s.kv)(R,function(e){return e.overscan}),X=(0,s.kv)(R,function(e){return e.footer}),L=(0,s.kv)(R,function(e){return e.focusRef}),N=(0,s.kv)(R,function(e){var n;return null!==(n=e.fontSize)&&void 0!==n?n:14}),M=(0,s.kv)(R,function(e){return!!e.compact}),O=(0,s.kv)(R,function(e){return!!e.minimalInputBar}),U=(0,s.kv)(R,function(e){var n;return null!==(n=e.minItemHeight)&&void 0!==n?n:35}),q=(0,s.kv)(R,function(e){var n;return null!==(n=e.showToolDescriptions)&&void 0!==n&&n});function V(){return(0,Z.Hg)(q)}var H=(0,u.cn)(function(e){return!e(I)}),F=(0,s.kv)(R,function(e){return!!e.iconBreadcrumbs}),W=(0,u.cn)(null),z=(0,u.cn)(function(e){return e(en)>-1}),j=(0,u.cn)(function(e){var n=e(S);return!n.isLoading&&0===n.rows.length});function $(){return(0,Z.yL)(j)}var K=(0,u.cn)({label:"",input:"",menu:""});function Y(){return(0,Z.Hg)(K)}var J=(0,u.cn)(""),Q=(0,u.cn)(""),ee=(0,u.cn)(""),en=(0,u.cn)(-1),et=(0,u.cn)(function(e){var n=e(en);return e(eo).findIndex(function(e){return"item"===e.type&&e.index===n})});function er(){return(0,Z.Hg)(et)}var eo=(0,u.cn)(function(e){return e(S).rows}),ei=(0,u.cn)(function(e){return e(S).items}),el=(0,u.cn)(function(e){return e(ei).length}),ea=(0,u.cn)(function(e){return e(ey).filter(function(e){return"context"===e.data.type&&!!e.match})}),ec=(0,u.cn)(function(e){return e(ea).length>0}),eu=(0,u.cn)(!1),es=(0,u.cn)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(eu,!0),n(S,function(e){return(0,c.Uy)(e,function(e){e.path=[e.path[0]]})}),e(eP).setPath(e(ey)),n(en,-1),n(J,""),n(Q,""),n(ee,""),e(I)&&n(_,!1),r.focus&&(null===(t=e(eA))||void 0===t||t.focus())}),ed=(0,u.cn)(function(e){return e(S).placeholder}),ef=(0,u.cn)(function(e){return e(S).isLoading});function eh(){return(0,Z.Hg)(ef)}var ep=(0,u.cn)(function(e){return e(S).path.length});function ev(){return(0,Z.Hg)(ep)}var em=(0,u.cn)(function(e){return e(ec)||!!e(J)});function eg(){return(0,Z.Hg)(em)}var eZ=(0,u.cn)(null,(r=(0,o._)(function(e,n,t,r){var o,i,l,c,u,s;function d(t){var r;n(eE,null!=t?t:"Something went wrong"),null===(r=e(eA))||void 0===r||r.focus()}return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("group"===t.data.type)return[2];if(n(W,t),i=e(R),"context"===t.data.type)return n(ek,c=t.path),n(en,-1),e(eP).setPath(c),null===(l=e(eA))||void 0===l||l.focus(),[2];switch(t.data.type){case"output":case"error":return n(es),null===(u=i.onSelect)||void 0===u||u.call(i,t),[2]}n(T,!0),s=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return s=a.sent(),[3,4];case 3:return a.sent(),n(T,!1),d(),[2];case 4:if(n(T,!1),(null==s?void 0:s.type)==="error")return d(s.message),[2];return n(es),null===(o=i.onAction)||void 0===o||o.call(i),[2]}})}),function(e,n,t,o){return r.apply(this,arguments)}));function eb(e){var n=(0,Z.$X)(eZ),t=(0,d.useMemo)(function(){return(0,s.kv)(eo,function(n){return n[e]})},[e]),r=(0,Z.Hg)(t),o="item"===r.type?r.index:null,i=(0,d.useMemo)(function(){return(0,u.cn)(function(e){return null!==o&&e(en)===o})},[o]),l=(0,Z.Hg)(i),a=(null==r?void 0:r.type)==="item"?function(e){return n(r.item,e)}:void 0,c="item"===r.type?{id:b(e),role:"option","aria-selected":l}:void 0;return{row:r,active:l,onClick:a,ariaAttrs:c}}var ey=(0,u.cn)(function(e){return e(S).path}),ex=(0,u.cn)(function(e){return 1===e(ey).length}),eC=(0,u.cn)(null,function(e,n,t){var r=e(ey),o=r.indexOf(t);-1!==o&&(r=r.slice(0,o+1),n(en,0),e(eP).setPath(r),n(J,""))});function ew(){return{iconOnly:(0,Z.Hg)(F),breadcrumbs:(0,Z.Hg)(ea),onClick:(0,Z.$X)(eC)}}function eS(e,n){return n.match.score-e.match.score}var e_=(0,u.cn)(null,function(e,n,t){if(e(ee)===e(ee)){var r,o=t.items.sort(eS),i=t.path.length?t.path[t.path.length-1]:null,l=(0,g.V)(o),a=l.items,c=l.rows,u=null!==(r=null==i?void 0:i.data)&&void 0!==r?r:null,s=null==u?void 0:u.description;e(F)&&(null==u?void 0:u.type)!=="group"&&(s=null==u?void 0:u.label),n(S,function(e){return{items:a,rows:c,isLoading:!!t.partial,path:t.path,placeholder:s||e.placeholder}}),c.length&&-1===e(en)&&n(en,0)}}),eE=(0,u.cn)(null,function(e,n,t){n(A,t),n(S,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eT=(0,u.cn)(null,function(e,n,t){n(J,t),n(en,t?0:-1),n(A,null),n(S,function(e){return(0,c.Uy)(e,function(e){e.isLoading=!!t})}),e(I)&&n(_,!!t)}),ek=(0,u.cn)(null,function(e,n,t){n(S,function(e){return(0,c.Uy)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(eT,""),n(Q,""),n(ee,"")}),eA=(0,u.cn)(null),eR=(0,u.cn)(null,function(e,n,t){var r=e(en);if(!(r<0)){var o=e(ei)[r];o&&n(eZ,o,t)}}),eI=(0,u.cn)(null,function(e,n,t){var r=e(_),o=e(el),i=e(en);switch(t.key){case"ArrowDown":t.preventDefault();var l=i+1;n(en,l<o?l:0),n(_,!0);return;case"ArrowUp":t.preventDefault(),n(en,Math.max(-1,i-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var a=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=a:t.currentTarget.setSelectionRange(a,a);return;case"Escape":if(!e(J)||(t.preventDefault(),n(eT,""),n(Q,""),e(H)))return;n(_,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eR,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var c="PageUp"===t.key?-10:10;n(en,function(e){return Math.max(Math.min(e+c,o-1),0)});return}});function eG(){var e=(0,Z.Hg)(eo),n=E(),t=(0,d.useRef)(null),r=ev(),o=(0,Z.Hg)(K);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:o.menu,"aria-labelledby":o.label,role:"listbox"}}}function eD(){var e,n,t,r,o=(0,Z.$X)(eA),i=(0,Z.Hg)(ed),a=(0,l._)((e=(0,Z.Hg)(J),n=(0,Z.$X)(eT),t=(0,Z.$X)(Q),r=(0,l._)((0,d.useTransition)(),2)[1],[e,(0,d.useCallback)(function(e){var o="string"==typeof e?e:e.currentTarget.value;n(o),r(function(){return t(o)})},[n,r,t])]),2),c=a[0],u=a[1],s=(0,Z.$X)(en),f=(0,Z.Hg)(en),h=(0,Z.Hg)(K),p=E();return{onBlur:function(){return s(-1)},onChange:u,placeholder:i,value:c,ref:o,disabled:k(),ariaAttrs:{id:h.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":f>-1?b(f):"","aria-controls":h.menu,"aria-expanded":p,"aria-labelledby":h.label}}}var eB=(0,u.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(eu)&&(r=[r[0]]);var o=e(Q);n(ee,o),e(eP).setPath(r,o)}),eP=(0,u.cn)({}),eX=(0,u.cn)(null,function(e,n){var t=e(ey),r=e(ea);if(r.pop()){var o=r.pop();if(!o){n(es);return}var i=t.indexOf(o);t=t.slice(0,i+1),n(en,0),n(ek,t),e(eP).setPath(t)}});function eL(){var e,n,t,r,o,i,l,a=E(),c=(0,Z.Hg)(em),u=(0,Z.Hg)(J),s=(0,Z.Hg)(j),p=k(),v=(0,Z.Hg)(A),m=(0,Z.$X)(eI),g=(0,Z.Hg)(z),b=(0,Z.$X)(es),y=(0,Z.XD)(eA);e=(0,Z.Hg)(eP),n=(0,Z.Hg)(B),t=(0,Z.yL)(ex),r=(0,Z.yL)(Q),o=(0,Z.$X)(ee),i=(0,Z.$X)(eB),l=(0,f.Z)(n),(0,d.useEffect)(function(){t.current&&i(n)},[e,t,n,r,i]),(0,d.useEffect)(function(){return t.subscribe(function(e){e&&i(l.current)})},[e,r,t,i,l]),(0,d.useEffect)(function(){var n=function(n){o(n),e.search(n)};return n(r.current),r.subscribe(n)},[e,r,t,o,l]);var x=(0,h.Z)(function(){return function(){var e;return null===(e=y())||void 0===e?void 0:e.focus()}},[y]),C=(0,Z.$X)(eX);return{focus:x,onKeyDown:(0,h.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){C();return}return m(e)}},[m,C]),inputValue:u,isOpen:a,isClearable:c,noResults:s,hasHighlightedItem:g,isRunning:p,actionError:v,clearCommands:b}}function eN(e){var n=(0,p.U)(),t={label:n("label"),input:n("input"),menu:n("menu")},r=(0,l._)((0,d.useState)(function(){var n,r,o=(0,u.MT)();o.set(K,t),o.set(R,e),o.set(_,!e.openOnInput),o.set(eP,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,o=n,i=null,l=0;function a(e){i&&clearTimeout(i);var n=++l,a=0,c=[],u=o[o.length-1];if(!u.commands){r({items:c,path:o});return}void 0!==t&&(i=setTimeout(function(){c.length&&r({items:(0,v._)(c).sort(m),partial:!0,path:o})},t)),function t(u,s,d){if(a++,!u.commands)throw Error("Expected commands");var f=(0,v._)(s).concat([u]),h=f.length===o.length;Promise.resolve(u.commands({active:h,searchQuery:e,path:f})).then(function(u){if(n!==l){i&&clearTimeout(i);return}a--,u.forEach(function(n,r){var o=(0,v._)(f).concat([n]),i=(0,v._)(d).concat([r]),l=n.match?n.match({searchQuery:e,data:n.data,path:o,active:h}):null;l&&c.push({path:o,data:n.data,match:l,indexPath:i}),n.commands&&t(n,f,i)}),a>0||(i&&clearTimeout(i),r({items:(0,v._)(c).sort(m),path:o}))})}(u,o.slice(0,o.length-1),[])}return{search:a,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o=e,a(n)},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(e_,(0,i._)({},e))}}));var l=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(r=null==l?void 0:null===(n=l.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return a&&o.set(S,function(e){return(0,c.Uy)(e,function(e){e.placeholder=a})}),o}),1)[0];return(0,d.useEffect)(function(){r.set(R,e)},[r,e]),r}},1869:function(e,n,t){t.d(n,{$X:function(){return d},Hg:function(){return u},XD:function(){return s},xf:function(){return a},yL:function(){return f}});var r=t(3702),o=t(80786),i=t(21962),l=t(75271),a=(0,l.createContext)(void 0);function c(){var e=(0,l.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(e){var n=c();return(0,o.Dv)(e,{store:n})}function s(e){return(0,i.lV)((0,l.useCallback)(function(n){return n(e)},[e]),{store:c()})}var d=function(e){var n=c();return(0,o.b9)(e,{store:n})};function f(e){return(0,r.b)(e,c())}},77558:function(e,n,t){t.d(n,{Cn:function(){return i},D$:function(){return c},Dq:function(){return o},fP:function(){return a}});var r=(0,t(22192).$)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","minimalInputBarBorderDisplay","inputBarPadding","containerType"]),o=r.cssVars,i=r.styleTokens,l=function(e){return Math.round(100*e)/100},a=function(e){return l(e/14)+"em"},c=function(e){var n=l(e/14)+"em";return{"&& svg":{minWidth:n,minHeight:n,width:n,height:n}}}},13213:function(e,n,t){t.d(n,{L:function(){return r},r:function(){return o}});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAi:.7,codeSearch:.5,myRepls:.5,settings:.5},o={files:.98,settings:.9,askAi:.7,codeSearch:.5,fileContentsSearch:.4}},28670:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(41733),o=t(30509),i=t(3796),l=t(6065),a=t(22419),c=t(93245),u=t(63163),s=(0,t(36809).X)({default:[],withOnClick:[u.l0.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:u.TV.shadow1}}]});function d(e){var n=e.user,t=e.onClick,u=e.size,d=void 0===u?24:u;return(0,i.tZ)(a.u,{placement:"bottom",tooltip:t?"Observe ".concat(n.username):n.username,children:function(e,a){return(0,i.tZ)(c.G,(0,o._)((0,r._)({},e),{innerRef:a,onClick:t,children:(0,i.tZ)(l.q,{size:d,src:n.image||null,username:n.username,ringColor:n.color,css:t?s.withOnClick:s.default})}))}})}},76399:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(3796);t(22893),t(93245),t(24766);var o=t(36809),i=t(63163),l=t(54236);function a(){return(0,l.Zb)(),(0,r.tZ)(r.HY,{children:null})}(0,o.X)({devEnvNotice:[i.l0.borderRadius(0)]})},15185:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(42965),o=/iPad|iPhone|iPod/,i=/MacIntel/;function l(){var e=(0,r.sG)(),n=!!o.test(navigator.platform)||!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&i.test(navigator.platform));return e||n}},90831:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(34495);function o(e,n,t){t&&r.Z(e,n),n&&"object"==typeof n?(n.skipOverflowHiddenElements=!0,r.Z(e,n)):r.Z(e,{skipOverflowHiddenElements:!0})}},57785:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e,n){var t=n.existing,r=n.getKey,o=new Map,i=!0,l=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;o.set(r(s),s)}}catch(e){l=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw a}}var d=new Set,f=[],h=!0,p=!1,v=void 0;try{for(var m,g=t[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){var Z=m.value,b=r(Z),y=o.get(b);y&&(f.push(y),d.add(b))}}catch(e){p=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw v}}var x=!0,C=!1,w=void 0;try{for(var S,_=e[Symbol.iterator]();!(x=(S=_.next()).done);x=!0){var E=S.value;d.has(r(E))||f.push(E)}}catch(e){C=!0,w=e}finally{try{x||null==_.return||_.return()}finally{if(C)throw w}}return f}},40703:function(e,n,t){t.d(n,{C:function(){return c}});var r=t(66626),o=t(63257),i=t(37475),l=t(727),a=t(75271);function c(e,n){var t,c,u=(0,i.r9)(),s=(0,l.G)(),d=null!==(c=null==u?void 0:u.client)&&void 0!==c?c:null,f=(0,a.useRef)(null),h=(t=(0,r._)((0,a.useState)(),2)[1],(0,a.useCallback)(function(e){try{t(function(){throw e})}catch(e){}},[]));(0,a.useEffect)(function(){if(f.current&&(f.current.abort(),f.current=null),d&&s){var n=new AbortController;f.current=n;var t=n.signal,r=[];t.addEventListener("abort",function(){var e=[],n=!0,t=!1,o=void 0;try{for(var i,l=r[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;try{a()}catch(n){e.push(n)}}}catch(e){t=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw o}}e.length&&(1===e.length?h(e[0]):"undefined"!=typeof AggregateError?h(AggregateError(e,"Multiple errors occurred during cleanup")):h(Error("Multiple errors occurred during cleanup")))});var o=function(e){if(t.aborted)try{e()}catch(e){h(e)}else r.push(e)};try{Promise.resolve(e(d,{session:s,signal:t,addCleanup:o})).then(function(e){e&&o(e)}).catch(function(e){n.abort(),h(e)})}catch(e){throw n.abort(),e}return function(){n.abort()}}},[d,s,h].concat((0,o._)(n)))}},67827:function(e,n,t){t.d(n,{U:function(){return a}});var r=t(63257),o=t(37475),i=t(727),l=t(75271);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,o.r9)(),a=(0,i.G)();return(0,l.useMemo)(function(){return t&&a?e(t.client,a):null},[t,a].concat((0,r._)(n)))}},727:function(e,n,t){t.d(n,{G:function(){return c}});var r=t(66626),o=t(37475),i=t(75558),l=t(75271),a=t(30967);function c(){var e=(0,o.r9)(),n=(0,r._)((0,l.useState)(null),2),t=n[0],c=n[1];return(0,l.useEffect)(function(){var n=function(e){"connect"===e.status?c({id:e.session.id,from:e.session.from,to:e.session.to}):(0,a.flushSync)(function(){c(null)})};if(e){var t=e.transport.sessions.get(i.o_);return t&&n({status:"connect",session:t}),e.transport.addEventListener("sessionStatus",n),function(){c(null),e.transport.removeEventListener("sessionStatus",n)}}},[e]),t}},86280:function(e,n,t){t.d(n,{Zo:function(){return T},av:function(){return C},xV:function(){return _}});var r=t(41733),o=t(30509),i=t(98924),l=t(66626),a=t(3796),c=t(75271),u=t(36809),s=t(63163),d=t(98817),f=t(93245),h=t(17857),p=t(86466),v=t(24766),m=t(67703),g=t(40299),Z=t(68333),b=t(48087),y=t(14548),x=function(){var e=(0,l._)((0,c.useState)(!1),2),n=e[0],t=e[1],r=(0,l._)((0,c.useState)({x:0,y:0}),2);return{clicked:n,setClicked:t,points:r[0],setPoints:r[1]}},C=function(){var e=x(),n=e.clicked,t=e.setClicked,i=e.points,l=e.setPoints;(0,c.useEffect)(function(){var e=function(){return t(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[t]);var a=(0,c.useCallback)(function(e){var n=e.x,r=e.y;t(!0),l({x:n,y:r})},[t,l]),u=(0,c.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),a({x:e.clientX,y:e.clientY})},[a]),s=(0,c.useCallback)(function(){t(!1)},[t]);return{triggerProps:{onContextMenu:u},menuProps:(0,o._)((0,r._)({},i),{isOpen:n}),onClose:s,open:a}},w=(0,u.X)({menu:[s.l0.position.fixed,s.l0.flex.column,s.l0.borderRadius(8),s.l0.shadow(1),{"& > :first-child":[s.l0.borderRadius(8,8,0,0)],"& > :last-child":[s.l0.borderRadius(0,0,8,8)]}],item:[s.l0.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[p.gU.listItem],'&[disabled], &[aria-disabled="true"]':[s.l0.color.foregroundDimmest]},s.l0.p(8),s.l0.rowWithGap(8),s.l0.align.center],underlay:[s.l0.position.fixed,{top:0,left:0,bottom:0,right:0}]}),S=function(e){e.preventDefault()},_=function(e){var n=e.children,t=e.isOpen,l=e.defaultOpen,u=e.onOpenChange,s=e.x,f=e.y,h=(0,i._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),p=(0,Z.d)({isOpen:t,defaultOpen:l,onOpenChange:u}),v=(0,c.useRef)(null),x=(0,m.N)({},p,v),C=x.modalProps,_=x.underlayProps;return t?(0,a.tZ)(g.aV,{portalContainer:document.body,children:(0,a.tZ)("div",(0,o._)((0,r._)({css:w.underlay},_),{onContextMenu:S,children:(0,a.tZ)(b.ZP,{children:(0,a.tZ)(y.Tg,(0,o._)((0,r._)({elevated:!0,css:w.menu},C,h),{innerRef:v,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:s,top:f},children:(0,a.tZ)(d.uP,{options:{direction:"vertical"},children:n})}))})}))}):null},E=f.K.button,T=c.forwardRef(function(e,n){var t=e.children,u=e.iconLeft,s=e.isDisabled,f=void 0!==s&&s,p=e.onClick,m=(0,i._)(e,["children","iconLeft","isDisabled","onClick"]),g=(0,c.useRef)(null),Z=(0,l._)((0,d.XZ)(g,f),4),b=Z[0],y=Z[1],x=Z[2],C=Z[3];(0,d.Ym)(y,g);var S=(0,c.useCallback)(function(e){f||(C(),null==p||p(e))},[C,f,p]);return(0,a.BX)(E,(0,o._)((0,r._)({disabled:f,css:w.item,role:"menuitem",ref:(0,h.l)(n,g),tabIndex:b,onKeyDown:x,onClick:S},m),{children:[u,(0,a.tZ)(v.xv,{multiline:!1,children:t})]}))})},23522:function(e,n,t){t.d(n,{m:function(){return b},q:function(){return Z}});var r=t(41733),o=t(30509),i=t(98924),l=t(66626),a=t(3796),c=t(54505),u=t(79904),s=t(9602),d=t(22419),f=t(27840),h=t(6674),p=t(75271),v=t(99399),m=t(97420),g=function(e){var n=e.value,t=e.onCopy,r=e.tooltipText,o=e.tooltipSuccessText,i=e.successTimeout,a=void 0===i?1e3:i,u=(0,l._)((0,p.useState)(!1),2),s=u[0],d=u[1],f=(0,p.useRef)(null),h=(0,l._)((0,p.useState)(void 0),2),v=h[0],m=h[1];return(0,p.useEffect)(function(){var e=f.current;return function(){e&&clearTimeout(e)}},[]),{isCopied:s,isTooltipOpen:v,onIsTooltipOpenChange:function(e){m(s?void 0:e)},tooltip:s?void 0===o?"Copied!":o:void 0===r?"Copy":r,copy:(0,p.useCallback)(function(){n&&((0,c.Z)(n),d(!0),m(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(function(){d(!1),m(!1)},a),null==t||t())},[t,a,n])}};function Z(e){var n=e.textToCopy,t=e.successTimeout,l=e.onCopy,c=e.tooltipDisable,s=e.tooltipText,p=e.tooltipPlacement,Z=e.tooltipSuccessText,b=e.tooltipHideWhenOutOfBounds,y=e.showIcon,x=e.successIcon,C=void 0===x?(0,a.tZ)(f.Z,{color:m.TV.accentPositiveStronger}):x,w=e.copyIcon,S=void 0===w?(0,a.tZ)(h.Z,{}):w,_=e.onClick,E=(0,i._)(e,["textToCopy","successTimeout","onCopy","tooltipDisable","tooltipText","tooltipPlacement","tooltipSuccessText","tooltipHideWhenOutOfBounds","showIcon","successIcon","copyIcon","onClick"]),T=g({value:n,successTimeout:t,onCopy:l,tooltipDisable:c,tooltipText:s,tooltipSuccessText:Z}),k=T.isTooltipOpen,A=T.onIsTooltipOpenChange,R=T.tooltip,I=T.isCopied,G=T.copy;return(0,a.tZ)(d.u,{isOpen:k,onOpenChange:A,tooltip:R,placement:void 0===p?"bottom-end":p,hideWhenOutOfBounds:b,children:(0,a.tZ)(u.zx,(0,o._)((0,r._)({disabled:!n,iconLeft:void 0!==y&&y&&I?C:S},(0,v.d)(E)),{onClick:function(e){G(),null==_||_(e)}}))})}function b(e){var n=e.textToCopy,t=e.successTimeout,l=e.children,c=void 0===l?(0,a.tZ)(h.Z,{}):l,u=e.successIcon,d=void 0===u?(0,a.tZ)(f.Z,{color:m.TV.accentPositiveStronger}):u,p=e.tooltipDisable,v=e.tooltipText,Z=e.onCopy,b=e.tooltipPlacement,y=(0,i._)(e,["textToCopy","successTimeout","children","successIcon","tooltipDisable","tooltipText","onCopy","tooltipPlacement"]),x=g({value:n,successTimeout:t,onCopy:Z,tooltipDisable:p,tooltipText:v}),C=x.isTooltipOpen,w=x.onIsTooltipOpenChange,S=x.isCopied,_=x.tooltip,E=x.copy;return(0,a.tZ)(s.hU,(0,o._)((0,r._)({disabled:!n},y),{isTooltipOpen:C,onTooltipOpenChange:w,alt:_,onClick:E,tooltipPlacement:void 0===b?"bottom":b,children:S?d:c}))}},85468:function(e,n,t){t.d(n,{X:function(){return a}});var r=t(3796),o=t(62279),i=t(63163),l=(0,o.iv)({backgroundColor:i.TV.outlineDimmest,width:1});function a(e){var n=e.className;return(0,r.tZ)("div",{className:n,css:l})}},46321:function(e,n,t){t.d(n,{J:function(){return m}});var r=t(41733),o=t(30509),i=t(98924),l=t(3796),a=t(62279),c=t(36809),u=t(86466),s=t(35820),d=t(63163),f=t(22419),h=t(93245),p=(0,a.F4)("from{opacity:0}to{opacity:1}"),v=(0,c.X)({self:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height(d.TV.space12),d.l0.borderRadius(4),d.l0.position.relative,u.gU.filledAndOutlined,d.l0.overflow("clip")],progressWrapper:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height("100%"),d.l0.width("100%"),d.l0.borderRadius(4),d.l0.position.relative],progress:[d.l0.position.relative,d.l0.width("100%"),d.l0.height("100%"),{top:0,left:0}],loading:s.p.backgroundPulse(),smoke:[d.l0.width("100%"),d.l0.height("500%"),d.l0.position.absolute,d.l0.left("50%"),d.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(p," 120ms forwards ease-out alternate")}});function m(e){var n,t=e.total,c=e.tooltip,u=e.className,s=e.disabled,d=void 0!==s&&s,p=e.loading,m=void 0!==p&&p,Z=e.tooltipHidden,b=(0,i._)(e,["total","tooltip","className","disabled","loading","tooltipHidden"]),y=null;return c?y=c:"current"in b?y="".concat(b.current||"0","/").concat(t):"data"in b&&(y=null===(n=b.data)||void 0===n?void 0:n.map(function(e){var n=e.current;return"".concat(n||"0","/").concat(t)}).join(" | ")),(0,l.tZ)(f.u,{placement:"top",tooltip:y,maxWidth:280,isDisabled:m||void 0!==Z&&Z,children:function(e,n){var i,c;return m?i=null:"current"in b&&b.current?i=(0,l.tZ)(g,{total:t,disabled:d,current:b.current,color:b.color}):"data"in b&&(i=null===(c=b.data)||void 0===c?void 0:c.map(function(e,n){return(0,a.az)(g,(0,o._)((0,r._)({},e),{key:"measure-bar-".concat(n),total:t,disabled:d}))})),(0,a.az)(h.G,(0,o._)((0,r._)({},e),{css:[v.self,v.fadeInAnim,m&&v.loading],className:u,innerRef:n,onClick:void 0,key:m?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group"}),(0,l.tZ)(h.G,{css:v.progressWrapper,children:i},"measureBarProgress"))}})}function g(e){var n=e.current,t=e.total,r=e.color,o=void 0===r?d.TV.accentPrimaryDefault:r,i=e.disabled,a={backgroundColor:void 0!==i&&i?d.TV.outlineDefault:o,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}(n,t)+"%"};return(0,l.tZ)(h.G,{css:v.progress,style:a,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}},17695:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},19453:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}},39819:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},7300:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},22436:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},64206:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{d:"M12.4 16.697a.25.25 0 0 1-.25.235h-.34a.25.25 0 0 1-.25-.236l-.434-7.688V2.956a.5.5 0 0 1 .5-.5h.736a.5.5 0 0 1 .5.5v6.052l-.462 7.689Zm-.407 5.555c-.924 0-1.344-.504-1.344-1.26v-.308c0-.756.42-1.26 1.345-1.26.896 0 1.344.504 1.344 1.26v.308c0 .756-.448 1.26-1.344 1.26Z"})}))}},5189:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},70816:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.BX)(l.ZP,(0,o._)((0,r._)({},e),{children:[(0,i.tZ)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,i.tZ)("path",{d:"m11.974 8.931 6.883-6.883a1.482 1.482 0 0 1 2.095 2.095l-6.883 6.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"}),(0,i.tZ)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,i.tZ)("path",{d:"m11.974 8.931 6.883-6.883a1.482 1.482 0 0 1 2.095 2.095l-6.883 6.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"})]}))}},71137:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},45967:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.BX)(l.ZP,(0,o._)((0,r._)({},e),{children:[(0,i.tZ)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,i.tZ)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},37729:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M3 3.25a.75.75 0 0 0-.75.75v16a.75.75 0 0 0 1.5 0V4A.75.75 0 0 0 3 3.25Zm17.25 2.042v13.416L8.512 12 20.25 5.292Zm1.5-.43a1.25 1.25 0 0 0-1.87-1.086L7.388 10.915a1.25 1.25 0 0 0 0 2.17l12.492 7.139a1.25 1.25 0 0 0 1.87-1.086V4.862Z",clipRule:"evenodd"})}))}},918:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747Z",clipRule:"evenodd"})}))}},98514:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},55649:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M23 4.25a.75.75 0 0 1 .75.75v14a.75.75 0 0 1-1.5 0v-5.19l-5.22 5.22a.75.75 0 1 1-1.06-1.06l5.22-5.22H1a.75.75 0 0 1 0-1.5h20.19l-5.22-5.22a.75.75 0 0 1 1.06-1.06l5.22 5.22V5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},98724:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(41733),o=t(30509),i=t(3796),l=t(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M17.08 2.86a5.25 5.25 0 0 0-5.867 7.3.75.75 0 0 1-.153.84l-6.91 6.91a1.371 1.371 0 0 0 1.94 1.94L13 12.94a.75.75 0 0 1 .84-.153 5.25 5.25 0 0 0 7.3-5.867l-2.915 2.916a1.75 1.75 0 0 1-2.45 0l-.005-.006-1.606-1.605a1.75 1.75 0 0 1 0-2.45l.006-.005 2.91-2.91Zm-2.294-1.504a6.75 6.75 0 0 1 3.993.49A.75.75 0 0 1 19 3.06l-3.766 3.767a.25.25 0 0 0 0 .346l1.593 1.593a.25.25 0 0 0 .346 0L20.94 5a.75.75 0 0 1 1.213.22 6.75 6.75 0 0 1-8.444 9.132L7.15 20.91a2.871 2.871 0 1 1-4.06-4.06l6.558-6.559a6.75 6.75 0 0 1 5.138-8.935Z",clipRule:"evenodd"})}))}},61663:function(e,n,t){t.d(n,{A:function(){return p},C:function(){return h}});var r=t(66626),o=t(3796),i=t(22419),l=t(24766),a=t(37488),c=t(34763),u=t(75271),s=t(36809),d=t(63163),f=t(85995),h=function(){var e=(0,c.r)(),n=e.showAiUpsell,t=e.refetch,s=(0,r._)((0,u.useState)(!1),2),d=s[0],h=s[1];return n?(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.u,{tooltip:v,children:(0,o.tZ)(a.D,{css:m.pill,text:"BASIC MODEL",onClick:function(){return h(!0)}})}),(0,o.tZ)(f.Z,{isOpen:d,onClose:function(){return h(!1)},type:"purchase",onPurchaseComplete:function(){return t()},contextualUpsell:(0,o.BX)(o.HY,{children:[(0,o.tZ)(l.xv,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,o.tZ)(l.xv,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}}})]}):null},p=function(){return(0,c.r)().showAiUpsell?(0,o.tZ)(i.u,{tooltip:v,children:(0,o.tZ)(a.D,{text:"BASIC MODEL"})}):null},v="The Starter plan uses the Basic model for AI chat. Upgrade for better responses!",m=(0,s.X)({pill:[d.l0.cursor.pointer]})},34763:function(e,n,t){t.d(n,{r:function(){return h}});var r=t(41733),o=t(21262),i=t(71440),l=t(9122);function a(){var e=(0,o._)(["\n  query UpsellExperimentProviderCurrentUser($replId: String!) {\n    currentUser {\n      id\n      isSubscribed\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}var c={},u=(0,i.Ps)(a()),s=t(85983),d=t(16155),f={showAiUpsell:!1,showPrivateUpsell:!1,showResourcesUpsell:!1,refetch:function(){}},h=function(){var e,n,t,o,i,a,h=(i={variables:{replId:(0,d.Z)()}},a=(0,r._)({},c,i),l.a(u,a)),p=h.data,v=h.refetch;if((null==p?void 0:null===(e=p.currentUser)||void 0===e?void 0:e.__typename)!=="CurrentUser"||(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)!=="Repl")return f;var m=p.currentUser.isSubscribed,g=null===(t=p.repl.org)||void 0===t?void 0:t.type,Z=(g===s.a4.Personal||null==g)&&(null===(o=p.repl.owner)||void 0===o?void 0:o.__typename)==="User"&&p.repl.owner.id===p.currentUser.id,b=!m&&Z;return{showAiUpsell:b,showPrivateUpsell:b,showResourcesUpsell:b,refetch:v}}},42401:function(e,n,t){t.d(n,{O:function(){return c},v:function(){return l}});var r=t(49853),o=t(80786),i=(0,r.cn)(!1);function l(){return(0,o.Dv)(i)}var a=(0,r.cn)(null,function(e,n){return n(i,function(e){return!e})});function c(){return(0,o.b9)(a)}},59247:function(e,n,t){t.d(n,{z:function(){return e2},S:function(){return e0}});var r,o,i,l,a=t(66626),c=t(63257),u=t(3796),s=t(54236),d=t(93245),f=t(36809),h=t(63163),p=t(75271),v=t(42516),m=t(6069),g=t(9602),Z=t(86466),b=t(35820),y=t(14548),x=t(24766),C=(t(96601),t(33323)),w=t(39031),S=t(22192),_=t(92571),E=t(82231),T=t(38775),k=t(67790),A=t(98924),R=t(20904),I=t(21460),G=t(56981),D=t(11006),B=t(89774),P=t(78272),X=t(20957),L=t(15323),N=t(98724),M=t(21751),O=t(16865),U=t(19453),q=t(39290),V=t(22436),H=t(71920),F=t(41513),W=t(70816);function z(e){var n=e.kind,t=(0,A._)(e,["kind"]),r={createFileData:(0,u.tZ)(R.Z,{}),readFileData:(0,u.tZ)(D.Z,{}),fileEditData:(0,u.tZ)(W.Z,{}),shellExecutionData:(0,u.tZ)(H.Z,{}),packagerInstallData:(0,u.tZ)(I.Z,{}),screenshotData:(0,u.tZ)(F.Z,{}),toolchainInstallData:(0,u.tZ)(N.Z,{}),searchFilesystemData:(0,u.tZ)(B.Z,{}),planProgressData:(0,u.tZ)(M.Z,{}),packagerUninstallData:(0,u.tZ)(I.Z,{}),messageData:(0,u.tZ)(U.Z,{}),workflowsStartToolData:(0,u.tZ)(P.Z,{}),workflowsRestartToolData:(0,u.tZ)(L.Z,{}),workflowsStopToolData:(0,u.tZ)(X.Z,{}),workflowsSetRunConfigToolData:(0,u.tZ)(V.Z,{}),workflowsRemoveRunConfigToolData:(0,u.tZ)(V.Z,{}),workflowsGetOutputToolData:(0,u.tZ)(O.Z,{}),presentResultsToolData:(0,u.tZ)(q.Z,{}),summarizeObjectiveData:(0,u.tZ)(D.Z,{})};return(0,p.cloneElement)(n?r[n]:(0,u.tZ)(G.Z,{}),t)}function j(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents,r=t.message,o=t.toolData;return(null==o?void 0:o.$kind)==="messageData"?{type:"message",message:r,created:e.created,sender:{id:e.sender.id,type:e.sender.type}}:(null==o?void 0:o.$kind)==="readFileData"?null:{summary:(0,_.a)(e),message:r,state:e.state,error:e.error,toolDataKind:null==o?void 0:o.$kind,created:e.created}}var $=(0,S.$)(["color","timestampDisplay","chevronOpacity","secondaryButtonsOpacity","statusIconTransform","statusIconWidth","animation"]),K=$.styleTokens,Y=$.cssVars,J=(0,f.X)({root:[h.l0.colWithGap(6),(0,v._)({},h.BC.canHover,(0,v._)({},Y.secondaryButtonsOpacity,0)),h.l0.hover((0,v._)({},Y.secondaryButtonsOpacity,1))],row:[h.l0.rowWithGap(4),h.l0.align.center,h.l0.position.relative],button:[h.l0.reset.button,h.l0.textAlign.left,h.l0.height(28),Z.gU.nofill,h.l0.hover((r={},(0,v._)(r,Y.color,h.TV.foregroundDefault),(0,v._)(r,Y.timestampDisplay,"flex"),(0,v._)(r,Y.chevronOpacity,1),r)),(i={},(0,v._)(i,h.BC.canHover,(o={},(0,v._)(o,Y.color,h.TV.foregroundDimmer),(0,v._)(o,Y.chevronOpacity,0),(0,v._)(o,Y.timestampDisplay,"none"),o)),(0,v._)(i,"color",K.color),(0,v._)(i,"transition","color 120ms"),i),h.l0.pl(6),h.l0.pr(2),h.l0.rowWithGap(6),h.l0.cursor.pointer,h.l0.flex.growAndShrink(1),h.l0.justify.spaceBetween,h.l0.align.center],timestamp:[(0,v._)({},h.BC.canHover,{display:"var(".concat(Y.timestampDisplay,", none)")})],left:[h.l0.flex.growAndShrink(1),h.l0.rowWithGap(6),h.l0.align.center],buttonText:[h.l0.flex.growAndShrink(1),{color:"inherit",'&[data-loading="true"]':[b.p.backgroundPulse(h.TV.blurpleDefault,h.TV.foregroundDimmer),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}]}],bar:[h.l0.position.absolute,h.l0.width(1),h.l0.height(8),h.l0.borderRadius(),{backgroundColor:h.TV.outlineDimmest,zIndex:-1,bottom:-6,left:14}],messageSurface:[h.l0.p(8),h.l0.borderRadius(4),h.l0.mb(8)],chevron:[{opacity:K.chevronOpacity}],secondaryButtons:[h.l0.rowWithGap(4),h.l0.align.center,{opacity:K.secondaryButtonsOpacity}],iconButton:[h.l0.width(28),h.l0.height(28)]});function Q(e){var n=e.eventId,t=e.onViewPlan,r=e.isLast,o=(0,s.yh)(),i=(0,s.Mi)(n,j),l=(0,a._)((0,p.useState)(!1),2),c=l[0],f=l[1],v=(0,a._)((0,p.useState)(!1),2),m=v[0],Z=(v[1],null==i?void 0:i.state),b=(0,p.useRef)(Z),S=(0,p.useRef)(null);return((0,p.useEffect)(function(){if(b.current===s.he.IN_PROGRESS&&Z!==s.he.IN_PROGRESS){(0,k.A)(S,Y.color,h.TV.greenStronger);var e=setTimeout(function(){(0,k.A)(S,Y.color,h.TV.foregroundDimmer)},300);return function(){clearTimeout(e)}}},[Z]),i)?(0,u.BX)(d.G,{css:J.root,children:[(0,u.BX)(d.G,{css:J.row,children:[(0,u.BX)(d.G,{tag:"button",innerRef:S,css:J.button,onClick:function(){t(),o(n)},children:[(0,u.BX)(d.G,{css:J.left,children:[(0,u.tZ)(z,{kind:i.toolDataKind,color:Z===s.he.IN_PROGRESS?h.TV.blurpleDefault:void 0}),r?null:(0,u.tZ)(d.G,{css:J.bar}),(0,u.tZ)(x.xv,{css:J.buttonText,multiline:!1,"data-loading":i.state===s.he.IN_PROGRESS,children:i.summary}),i.created?(0,u.tZ)(T.EK,{textVariant:"small",textColor:"dimmest",css:J.timestamp,date:i.created}):null]}),(0,u.tZ)(d.G,{css:J.chevron,children:(0,u.tZ)(C.Z,{})})]}),(0,u.BX)(d.G,{css:J.secondaryButtons,children:[(0,u.tZ)(g.hU,{alt:c?"Hide explanation":"Show explanation",onClick:function(){return f(function(e){return!e})},css:J.iconButton,children:(0,u.tZ)(w.Z,{})}),null]})]}),c?(0,u.tZ)(y.Tg,{elevated:!0,css:J.messageSurface,children:(0,u.tZ)(E.JG,{text:i.message,messageState:s.he.COMPLETE})}):null,m?(0,u.tZ)(y.Tg,{elevated:!0,css:J.messageSurface,children:(0,u.tZ)(en,{eventId:n})}):null]}):null}function ee(e){return e}function en(e){var n=e.eventId,t=(0,s.Mi)(n,ee);return(0,u.tZ)(m.Z,{json:t})}var et=t(79904),er=t(27387),eo=t(41733),ei=t(30509),el=t(96583),ea=t(20564),ec=t(2446),eu=t(44935),es=t(25722),ed=t(62279),ef=t(61010),eh=t(35723),ep=(0,ed.iv)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:h.TV.space8,"> *":{height:"fit-content"}}),ev=(0,f.X)({root:[ep,{input:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}}]}),em=(0,f.X)({root:[h.l0.p(8)],secrets:[h.l0.colWithGap(8)],secretHeader:[ep,h.l0.mb(4),h.l0.fontSize("small"),h.l0.color.foregroundDimmer,{lineHeight:h.TV.lineHeightSmall,"> div":[h.l0.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],saveButton:[h.l0.mt(8),{width:"fit-content"}]});function eg(e){var n=e.keyName,t=e.value,r=e.onChange,o=e.isSensitive,i=e.readOnly,l=(0,p.useMemo)(function(){return(0,eh.E)(n)},[n]);return(0,u.BX)(d.G,{css:ev.root,children:[(0,u.tZ)(d.G,{children:(0,u.tZ)(eu.II,{value:n,readOnly:!0})}),(0,u.BX)(d.G,{children:[(0,u.tZ)(eu.II,{value:t,onChange:function(e){return r(e.target.value)},"data-sensitive":o,readOnly:i}),!i&&l?(0,u.tZ)(x.xv,{variant:"small",children:(0,u.tZ)("a",{href:l,target:"_blank",children:"Where do I find this?"})}):null]})]})}function eZ(e){var n,t=e.keys,r=e.addEntries,o=e.onComplete,i=e.completed,l=void 0!==i&&i,c=(0,a._)((0,p.useState)(!1),2),s=c[0],f=c[1],h=(0,a._)((0,p.useState)(!0),2),v=h[0],m=h[1],Z=(0,a._)((0,p.useState)(t.map(function(e){return{key:e,value:""}})),2),b=Z[0],y=Z[1],x=(0,p.useMemo)(function(){return b.every(function(e){return!!e.value})},[b]),C=(n=(0,er._)(function(){var e;return(0,el.Jh)(this,function(n){switch(n.label){case 0:f(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,r(b)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),es.Tb(e),[3,4];case 4:return f(!1),null==o||o(),[2]}})}),function(){return n.apply(this,arguments)});return(0,u.tZ)(ea.Q,{icon:(0,u.tZ)(ec.Z,{}),title:"Secrets",children:(0,u.BX)(d.G,{css:em.root,children:[(0,u.BX)(d.G,{css:em.secretHeader,children:[(0,u.tZ)(d.G,{children:"Key"}),(0,u.BX)(d.G,{children:["Value",(0,u.tZ)(g.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return m(!v)},size:18,children:v?(0,u.tZ)(O.Z,{}):(0,u.tZ)(ef.Z,{})})]})]}),(0,u.tZ)(d.G,{css:em.secrets,children:b.map(function(e){var n=e.key,t=e.value;return(0,u.tZ)(eg,{keyName:n,value:t,readOnly:l,isSensitive:v,onChange:function(e){return y(function(t){return t.map(function(t){return t.key===n?(0,ei._)((0,eo._)({},t),{value:e}):t})})}},n)})}),l?null:(0,u.tZ)(et.zx,{css:em.saveButton,text:"Add secret".concat(b.length>1?"s":""),colorway:"primary",onClick:C,loading:s,disabled:!x})]})})}var eb=t(68417),ey=t(67465),ex=t(96949),eC=t(37121),ew=t(3102);function eS(e){var n=(0,s.Un)(),t=(0,s.vl)(),r=(0,ew.yL)(t.qualified).messageCharacters,o=(0,a._)((0,p.useState)(null),2),i=(o[0],o[1]),l=e_(e),c=(0,s.bD)({initialSessionId:e.sessionId}),d=c.stopMessage,f=c.loading,h=c.parentToActiveChild,v=(0,s.gn)(e.sessionId,h),m=!!(v&&v.state===s.he.IN_PROGRESS);return(0,u.tZ)(eC.x,{isConnected:n,inputRef:function(e){i(e)},lastEventInProgress:m,maxLength:r,loading:f,onStop:d,onSubmit:l,analyticsSurface:"agent_mode_response",variant:"compact",children:[null,null]})}function e_(e){var n=(0,s.Un)(),t=(0,s.bD)({initialSessionId:e.sessionId}).sendMessage;return(0,p.useCallback)(function(r){n&&((0,ex.j)(ex.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:s.$h.AGENT,message_content:r,message_source:"chat_pane",message_surface:"agent_mode_response"}),t({kind:"message",message:r,model:s.BY.MODEL_TYPE_UNKNOWN,intent:s.$h.AGENT},{parentEventId:e.parentEventId}))},[n,e.parentEventId,t])}var eE=[h.l0.rowWithGap(8),h.l0.pb(16)],eT=[h.l0.borderRadius(4),h.l0.px(8),h.l0.py(6)],ek=(0,f.X)({aiMessage:(0,c._)(eE).concat([h.l0.justify.start,h.l0.pr(32),(l={},(0,v._)(l,'+ [data-event-type*="ai"] [data-avatar]',{visibility:"hidden"}),(0,v._)(l,':has(+ [data-event-type="ai-message"])',{marginBottom:-4,"[data-timestamp]":{display:"none"}}),l)]),userMessage:(0,c._)(eE).concat([h.l0.justify.end,h.l0.pl(32)]),userMessageMain:[h.l0.flex.shrink(1),h.l0.align.end,h.l0.colWithGap(6),h.l0.maxWidth(400)],aiMessageMain:[h.l0.flex.shrink(1),h.l0.colWithGap(6)],aiMessageSurface:eT,userMessageSurface:(0,c._)(eT).concat([h.l0.colorMixBg(h.TV.accentPrimaryDefault,"transparent",.4)]),avatar:[h.l0.pt(6)],timestamp:[h.l0.px(8)]});function eA(e){var n=e.message,t=e.state,r=e.created;return(0,u.BX)(d.G,{css:ek.aiMessage,"data-event-type":"ai-message",children:[(0,u.tZ)(d.G,{css:ek.avatar,"data-avatar":!0,children:(0,u.tZ)(eb.R,{advanced:!0,size:24,showUsername:!1,showAvatarOnly:!0})}),(0,u.BX)(d.G,{css:ek.aiMessageMain,children:[(0,u.tZ)(y.Tg,{css:ek.aiMessageSurface,elevated:!0,children:(0,u.tZ)(E.JG,{text:n,messageState:t})}),(0,u.tZ)(d.G,{css:ek.timestamp,"data-timestamp":!0,children:(0,u.tZ)(T.EK,{live:!0,date:r,textVariant:"small",textColor:"dimmest"})})]})]})}function eR(e){var n=e.userId,t=e.message,r=e.created;return(0,u.BX)(d.G,{css:ek.userMessage,"data-event-type":"user-message",children:[(0,u.BX)(d.G,{css:ek.userMessageMain,children:[(0,u.tZ)(y.Tg,{css:ek.userMessageSurface,elevated:!0,children:(0,u.tZ)(E.JG,{text:t,messageState:s.he.COMPLETE})}),(0,u.tZ)(d.G,{css:ek.timestamp,children:(0,u.tZ)(T.EK,{live:!0,date:r,textVariant:"small",textColor:"dimmest"})})]}),(0,u.tZ)(d.G,{css:ek.avatar,children:(0,u.tZ)(ey.Y,{id:n,showAvatarOnly:!0})})]})}var eI=(0,f.X)({root:[h.l0.rowWithGap(8),h.l0.pt(16)]});function eG(e){return 0===e.buttonAction.buttons.length?null:(0,u.tZ)(d.G,{css:eI.root,children:e.buttonAction.buttons.map(function(n,t){return(0,u.tZ)(et.zx,{text:n.name,variant:"outlined",disabled:e.isDisabled,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e,n.responseText)}},t)})})}var eD=(0,f.X)({input:[h.l0.pt(8)]});function eB(e){var n=e.sessionId,t=e.parentEventId,r=e.sender,o=e.agentAction,i=e.isLast,l=e.addSecretEntries,a=e_({sessionId:n,parentEventId:t});switch(o.$kind){case"messageButtonAction":return(0,u.BX)(u.HY,{children:[(0,u.tZ)(eG,{buttonAction:o.messageButtonAction,isDisabled:!i,onClick:a}),i&&r===s.FW.AI?(0,u.tZ)(d.G,{css:eD.input,children:(0,u.tZ)(eS,{sessionId:n,parentEventId:t})}):null]});case"secretRequestAction":var c=o.secretRequestAction.secrets;return(0,u.tZ)(eZ,{keys:c.map(function(e){return e.key}),addEntries:l,completed:!i,onComplete:function(){return a("Continue")}});default:return null}}function eP(e){if(!e)return null;var n=e.contents.contents;if((null==n?void 0:n.$kind)==="messageEventContents"){var t=n.messageEventContents.agentAction.optionType;return e.sender.type===s.FW.AI?{type:"ai",message:n.messageEventContents.content,state:e.state,parentEventId:e.parentEventId,sessionId:e.sessionId,action:t,created:e.created}:{type:"user",message:n.messageEventContents.content,userId:Number(e.sender.id),parentEventId:e.parentEventId,sessionId:e.sessionId,action:t,created:e.created}}if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var r=n.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"messageData":var o=r.messageData.agentAction.optionType;return{type:"ai",message:r.messageData.content,parentEventId:e.parentEventId,sessionId:e.sessionId,state:e.state,action:o,created:e.created};case"planProgressData":var i=r.planProgressData.updatedPlanStep;return{type:"ai",message:n.agentTimelineEventContents.message||"Updated "+i.name,parentEventId:e.parentEventId,sessionId:e.sessionId,state:e.state,updatedPlanStep:i,created:e.created};default:return null}}function eX(e){var n=e.eventId,t=e.addSecretEntries,r=e.isLast,o=(0,s.Mi)(n,eP);return o?"ai"===o.type?(0,u.BX)(u.HY,{children:[(0,u.tZ)(eA,{message:o.message,state:o.state,created:o.created}),o.action?(0,u.tZ)(eB,{sender:s.FW.AI,sessionId:o.sessionId,parentEventId:o.parentEventId,agentAction:o.action,isLast:r,addSecretEntries:t}):null]}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(eR,{userId:o.userId,message:o.message,created:o.created}),o.action?(0,u.tZ)(eB,{sender:s.FW.USER,sessionId:o.sessionId,parentEventId:o.parentEventId,agentAction:o.action,isLast:r,addSecretEntries:t}):null]}):null}var eL=t(7122),eN=t(27840),eM=t(3710),eO=(0,f.X)({root:[h.l0.px(8),h.l0.pb(16),h.l0.align.center,h.l0.rowWithGap(4),h.l0.justify.center,h.l0.width("100%")],approvedContainer:[h.l0.align.center,h.l0.rowWithGap(4),h.l0.justify.end,h.l0.mx(32),h.l0.color.foregroundDimmer,{flex:1}],bar:[h.l0.flex.growAndShrink(1),h.l0.border({direction:"top",color:h.TV.outlineDimmest})],planContainer:[h.l0.flex.growAndShrink(1)]});function eU(e){var n;return(null==e?void 0:null===(n=e.contents.contents)||void 0===n?void 0:n.$kind)!=="agentPlanEventContents"?null:{agentPlan:e.contents.contents.agentPlanEventContents,sessionId:e.sessionId,parentEventId:e.parentEventId}}function eq(e){var n,t=e.id,r=(0,s.Mi)(t,eU);return r?(null===(n=r.agentPlan.Approver)||void 0===n?void 0:n.$kind)==="approver"?(0,u.tZ)(eV,{approverId:r.agentPlan.Approver.approver.id}):r.agentPlan.requiresApproval?(0,u.tZ)(d.G,{css:eO.root,children:(0,u.tZ)(d.G,{css:eO.planContainer,children:(0,u.tZ)(eM.Z,{})})}):null:null}function eV(e){var n=Number(e.approverId),t=(0,eL.NA)({variables:{id:n}}).data,r=null==t?void 0:t.user;return(0,u.tZ)(d.G,{css:eO.root,children:(0,u.BX)(d.G,{css:eO.approvedContainer,children:[(0,u.tZ)(eN.Z,{color:h.TV.greenStronger}),(null==r?void 0:r.username)?(0,u.BX)(x.xv,{multiline:!1,children:[r.username,(0,u.tZ)(x.xv,{children:" approved the plan"})]}):(0,u.tZ)(x.xv,{multiline:!1,children:"The plan was approved"})]})})}var eH=t(41086),eF=t(95281),eW=t(59140),ez=(0,S.$)(["scollToBottomTransform","opacity"]),ej=ez.cssVars,e$=ez.styleTokens,eK=(0,f.X)({root:[h.l0.position.relative,h.l0.flex.growAndShrink(1)],scroll:[h.l0.flex.growAndShrink(1),{overflowY:"auto"}],button:[h.l0.reset.button,Z.gU.filledAndOutlined,h.l0.position.absolute,h.l0.align.center,h.l0.bottom(8),h.l0.left("50%"),h.l0.height(28),h.l0.px(6),h.l0.rowWithGap(4),h.l0.borderRadius(16),h.l0.shadow(1),{opacity:"var(".concat(ej.opacity,", 0)"),transform:e$.scollToBottomTransform,transitionProperty:"transform, opacity",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(.4,1.60,.70,.8)"}]});function eY(e){var n=e.children,t=e.shouldAutoscrollRef,r=e.scrollCache,o=e.scrollCacheKey,i=(0,p.useRef)(null),l=(0,p.useRef)(null),a=(0,p.useRef)(new eH.vU(!1)),c=(0,p.useRef)(!1);(0,p.useEffect)(function(){var e=r.get(o),n=i.current;if(n){if(e)n.scrollTo(0,e);else{var t=n.scrollHeight;n.scrollTop=t,r.set(o,t)}return function(){r.set(o,n.scrollTop)}}},[r,o]);var s=(0,p.useRef)(null),f=(0,p.useCallback)(function(){var e,n,t,r=i.current;if(r){var o=r.scrollHeight-r.clientHeight;s.current&&cancelAnimationFrame(s.current),c.current=!0,e=r.scrollTop,n=null,t=function(i){n||(n=i);var l=Math.min((i-n)/100,1);r.scrollTop=e+(o-e)*l,l<1?s.current=requestAnimationFrame(t):c.current=!1},s.current=requestAnimationFrame(t)}},[]);return(0,p.useEffect)(function(){if(i.current){var e=new MutationObserver(function(){t.current&&f()});return e.observe(i.current,{characterData:!0,childList:!0,subtree:!0}),function(){e.disconnect()}}},[f,t]),(0,p.useEffect)(function(){if(i.current){var e=null,n=null,r=!1,o=i.current;return o.addEventListener("scroll",l),o.addEventListener("wheel",u),o.addEventListener("pointerdown",u),function(){null!==e&&cancelAnimationFrame(e),o.removeEventListener("scroll",l),o.removeEventListener("wheel",u),o.removeEventListener("pointerdown",u)}}function l(){null!==e&&cancelAnimationFrame(e),e=requestAnimationFrame(function(){if(i.current){var e=i.current,o=e.scrollTop,l=e.clientHeight;r=(n=e.scrollHeight-(o+l))<24,t.current=r,c.current||a.current.set(n>24)}})}function u(){r||(t.current=!1)}},[t]),(0,eF.j)(l,a.current,function(e){var n;return n={},(0,v._)(n,ej.scollToBottomTransform,"translate(-50%, ".concat(e?0:16,"px) scaleX(").concat(e?1:.25,")")),(0,v._)(n,ej.opacity,e?"1":"0"),n}),(0,u.BX)(d.G,{css:eK.root,children:[(0,u.tZ)(d.G,{css:eK.scroll,innerRef:i,children:n}),(0,u.BX)(y.Tg,{css:eK.button,elevated:!0,tag:"button",onClick:f,innerRef:l,children:[(0,u.tZ)(eW.Z,{size:12}),(0,u.tZ)(x.xv,{variant:"small",children:"Scroll to latest"})]})]})}var eJ=t(5189),eQ=t(7300),e0=40,e1=(0,f.X)({spacer:[h.l0.flex.grow(1),h.l0.minHeight(e0)]});function e2(e){var n=(0,s.$G)(e.sessionId).items,t=(0,p.useRef)(new Map);return(0,u.BX)(eY,{scrollCache:t.current,scrollCacheKey:e.sessionId,shouldAutoscrollRef:e.shouldAutoscrollRef,children:[(0,u.tZ)(d.G,{css:e1.spacer}),null==n?void 0:n.map(function(t,r){switch(t.type){case"message":return(0,u.tZ)(eX,{isLast:r===n.length-1,eventId:t.id,addSecretEntries:e.addSecretEntries},t.id);case"timeline":return(0,u.tZ)(e7,{eventId:t.id,onViewPlan:e.onViewPlan},t.id);case"plan":return(0,u.tZ)(eq,{id:t.id},t.id)}})]})}var e5=(0,f.X)({root:[h.l0.pb(16),h.l0.rowWithGap(8)],timeline:[h.l0.colWithGap(4),{flex:1}],button:[h.l0.color.foregroundDimmest,h.l0.px(6),h.l0.mr(32),h.l0.height(28),h.l0.hover(h.l0.color.foregroundDefault),{svg:{marginRight:-2}}],avatar:[h.l0.pt(2)]});function e7(e){var n=e.eventId,t=e.onViewPlan,r=(0,a._)((0,p.useState)(!1),2),o=r[0],i=r[1],l=(0,s.WW)(n);if(!l)return null;var f=[n].concat((0,c._)(l)),h=f.length-3>1,v=h&&!o?f.slice(-3):f;return(0,u.BX)(d.G,{css:e5.root,"data-event-type":"ai-actions",children:[(0,u.tZ)(d.G,{css:e5.avatar,"data-avatar":!0,children:(0,u.tZ)(eb.R,{advanced:!0,size:24,showUsername:!1,showAvatarOnly:!0})}),(0,u.BX)(d.G,{css:e5.timeline,children:[h?(0,u.tZ)(et.zx,{variant:"nofill",alignment:"start",onClick:function(){return i(!o)},css:e5.button,iconLeft:o?(0,u.tZ)(eQ.Z,{}):(0,u.tZ)(eJ.Z,{}),text:o?"Show less":"Show ".concat(f.length-3," more")}):null,v.map(function(e,n){return(0,u.tZ)(Q,{eventId:e,onViewPlan:t,isLast:n===v.length-1},e)})]})]})}},97574:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(41733),o=t(30509),i=t(98924),l=t(66626),a=t(3796),c=t(68220),u=t(22510),s=t(9602),d=t(44935),f=t(14548),h=t(93245),p=t(36809),v=t(60366),m=t(10578),g=t(63163),Z=t(75271),b=(0,p.X)({root:[g.l0.rowWithGap(4),g.l0.backgroundColor.backgroundDefault,g.l0.borderRadius(4),{padding:"2px 5px",border:"1px solid ".concat(g.TV.outlineDimmest),"&:focus-within, &:hover":{border:"1px solid ".concat(g.TV.outlineDimmer)},"&:active":{border:"1px solid ".concat(g.TV.accentPrimaryDefault)}}],input:[g.l0.border({width:0}),{"&:not([disabled], [aria-disabled])":{"&:hover, &:focus-within, &:active":{border:"none",outline:"0 none"}}}],sendDisabled:[(0,c.ec)("grey")],sendEnabled:[(0,c.ec)("blurple")],right:[g.l0.display.flex,g.l0.rowWithGap(8),g.l0.align.end,g.l0.py(4)]});function y(e){var n=e.initialValue,t=e.status,c=void 0===t?"composing":t,s=e.placeholder,p=e.onSubmit,v=e.inputRef,m=(0,i._)(e,["initialValue","status","placeholder","onSubmit","inputRef"]),g=(0,l._)((0,Z.useState)(void 0===n?"":n),2),y=g[0],C=g[1],w=(0,Z.useCallback)(function(e,n){null==n||n.preventDefault(),"composing"===c&&(p(e),C(""))},[p,c]);return(0,a.BX)(u.l0,{css:b.root,onSubmit:function(e){return w(y,e)},children:[(0,a.tZ)(d.B,(0,o._)((0,r._)({},m),{ref:v,css:b.input,autoFocus:!0,autoSize:!0,rows:1,value:y,placeholder:void 0===s?"Type message...":s,onChange:function(e){return C(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||w(y,e)}})),(0,a.tZ)(h.G,{css:b.right,children:(0,a.tZ)(f.Tg,{elevated:!0,children:(0,a.tZ)(x,{status:c,disabled:""===y&&"composing"===c||"loading"===c})})})]})}function x(e){var n,t,l=e.status,c=(0,i._)(e,["status"]);return"loading"===l?(n="Loading...",t=(0,a.tZ)(m.Z,{})):(n="Send",t=(0,a.tZ)(v.Z,{})),(0,a.tZ)(s.hU,(0,o._)((0,r._)({},c),{alt:n,type:"submit",css:c.disabled?b.sendDisabled:b.sendEnabled,children:t}))}},20564:function(e,n,t){t.d(n,{Q:function(){return v}});var r=t(3796),o=t(85468),i=t(9602),l=t(14548),a=t(93245),c=t(24766),u=t(36809),s=t(45967),d=t(63163),f=t(9220),h=t(75271),p=(0,u.X)({root:[d.l0.borderRadius(4),d.l0.border({color:d.TV.outlineDimmest}),d.l0.overflow("hidden")],header:[d.l0.px(6),d.l0.height(28),d.l0.rowWithGap(4),d.l0.align.center,d.l0.justify.spaceBetween,{backgroundColor:f.o}],left:[d.l0.align.center],middle:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],middleText:[d.l0.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],right:[d.l0.align.center,d.l0.rowWithGap(2)],divider:[{backgroundColor:d.TV.outlineDimmer,height:16,marginLeft:4}]});function v(e){return(0,r.BX)(a.G,{css:p.root,children:[(0,r.BX)(a.G,{css:p.header,children:[(0,r.tZ)(a.G,{css:p.left,children:(0,h.cloneElement)(e.icon,{size:16})}),(0,r.tZ)(a.G,{css:p.middle,children:(0,r.tZ)(c.xv,{css:p.middleText,children:e.title})}),(0,r.BX)(a.G,{css:p.right,children:[e.right,e.onOpenPane?(0,r.BX)(r.HY,{children:[e.right?(0,r.tZ)(o.X,{css:p.divider}):null,(0,r.tZ)(i.hU,{alt:"Open Pane",onClick:e.onOpenPane,children:(0,r.tZ)(s.Z,{})})]}):null]})]}),(0,r.tZ)(l.Tg,{elevated:!0,children:e.children})]})}},90:function(e,n,t){t.d(n,{ZP:function(){return R},ub:function(){return I}});var r=t(41733),o=t(30509),i=t(66626),l=t(3796),a=t(54236),c=t(79904),u=t(44935),s=t(86466),d=t(24766),f=t(93245),h=t(36809),p=t(27840),v=t(56981),m=t(7935),g=t(10578),Z=t(19602),b=t(63163),y=t(41974),x=t(81202),C=t.n(x),w=t(75271),S=t(92674),_=t(37729),E=t(30043),T=t(37862),k={REVERT_CHANGES:390,ADD_STEP:280,START_BUILDING:200},A=(0,h.X)({wrapper:[b.l0.colWithGap(8),b.l0.my(8),b.l0.width("100%")],editable:[b.l0.colWithGap(4)],readonly:[b.l0.colWithGap(8)],buttonContainer:[b.l0.flex.row,b.l0.justify.end,b.l0.rowWithGap(6)]});function R(e){var n,t,u,s,d=(0,i._)((0,w.useState)(e.agentPlan),2),h=d[0],v=d[1],m=(n={sessionId:e.sessionId,parentEventId:e.parentEventId},t=(0,a.Un)(),u=(0,a.bD)({initialSessionId:n.sessionId}).sendMessage,(0,w.useCallback)(function(e){t&&u({kind:"agentPlan",planId:e.planId,objective:e.objective,step:e.step,requiresApproval:!1,model:a.BY.MODEL_TYPE_UNKNOWN,approved:null==e?void 0:e.approved},{parentEventId:n.parentEventId})},[t,n.parentEventId,u])),g=(0,i._)((0,w.useState)(!1),2),Z=g[0],b=g[1],x=(0,i._)((0,w.useState)(1/0),2),R=x[0],G=x[1],B=!!(null==h?void 0:h.requiresApproval),P=B?h:e.agentPlan,X=(0,w.useMemo)(function(){return!C()(h,e.agentPlan)},[h,e.agentPlan]),L=function(){v(e.agentPlan)},N=(0,w.useCallback)(function(e){G(e.width)},[]),M=(0,T.Z)(N),O=function(e,n){return R<=n?"":e},U=function(){if(h&&h.step){var e={id:(0,S.v4)(),name:"",status:a.UL.STEP_UNKNOWN,message:"",timelineEventId:(0,S.v4)(),subSteps:[],metadata:{$kind:"codeChangeStats",codeChangeStats:{linesAdded:0,linesRemoved:0,commitId:""}},blueprints:[],mode:"editor",commitId:""};v((0,y.Uy)(h,function(n){n.step.subSteps.push(e)}))}};if(!P||!P.step||!P.step.subSteps.length)return(0,l.tZ)(I,{editable:B,addStep:U});var q=function(e){v((0,y.Uy)(function(n){var t=function(n){for(var r=0;r<n.length;r++){if(n[r].id===e)return n.splice(r,1),!0;if(n[r].subSteps.length>0&&t(n[r].subSteps))return!0}return!1};n&&n.step&&t(n.step.subSteps)}))},V=function(e,n){v((0,y.Uy)(h,function(t){var r=function(t){var o=!0,i=!1,l=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value;if(u.id===e)return u.name=n,!0;if(u.subSteps.length>0&&r(u.subSteps))return!0}}catch(e){i=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return!1};t&&t.step&&r(t.step.subSteps)}))},H=function(e){return e.filter(function(e){return""!==e.name.trim()}).map(function(e){return(0,o._)((0,r._)({},e),{subSteps:H(e.subSteps)})})},F=function(){if(h){var e=(0,y.Uy)(h,function(e){e.requiresApproval=!1,e.step.subSteps=H(e.step.subSteps)});v(e),m((0,o._)((0,r._)({},e),{approved:!0}))}};return(0,l.BX)(f.G,{css:A.wrapper,innerRef:M,children:[(0,l.tZ)(f.G,{css:B?A.editable:A.readonly,children:null===(s=P.step)||void 0===s?void 0:s.subSteps.map(function(e,n){return(0,l.tZ)(D,{editable:Z,step:e,index:"".concat(n+1,"."),onSave:V,onDelete:q},e.id)})}),(0,l.BX)(f.G,{css:A.buttonContainer,children:[B&&Z?(0,l.BX)(l.HY,{children:[X?(0,l.tZ)(c.zx,{"aria-label":"Revert changes",text:O("Revert changes",k.REVERT_CHANGES),iconLeft:(0,l.tZ)(_.Z,{}),colorway:"red",onClick:function(){return L()}}):null,(0,l.tZ)(c.zx,{"aria-label":"Add a step",text:O("Add a step",k.ADD_STEP),colorway:"grey",iconLeft:(0,l.tZ)(E.Z,{}),onClick:function(){return U()}}),(0,l.tZ)(c.zx,{"aria-label":"Start building",iconLeft:(0,l.tZ)(p.Z,{}),text:O("Start building",k.START_BUILDING),colorway:"blurple",onClick:function(){return F()}})]}):null,B&&!Z?(0,l.BX)(l.HY,{children:[(0,l.tZ)(c.zx,{text:"Approve plan & start",colorway:"blurple",iconLeft:(0,l.tZ)(p.Z,{}),onClick:function(){return F()}}),(0,l.tZ)(c.zx,{text:"Edit plan",colorway:"grey",onClick:function(){return b(!0)}})]}):null]})]},P.planId)}function I(e){var n=e.editable,t=e.addStep;return(0,l.BX)(l.HY,{children:[(0,l.tZ)(d.xv,{color:"dimmer",children:n?"Plan is currently empty":"No plan generated yet"}),n?(0,l.tZ)(c.zx,{iconLeft:(0,l.tZ)(E.Z,{}),text:"Add a step",onClick:function(){return null==t?void 0:t()}}):null]})}var G=(0,h.X)({step:[b.l0.flex.column,b.l0.colWithGap(6),b.l0.align.center,b.l0.color.foregroundDimmer,b.l0.align.stretch],iconWrapper:[b.l0.maxHeight(32),b.l0.display.flex,b.l0.flex.column,b.l0.align.center,b.l0.justify.center,{alignSelf:"stretch"}],input:[b.l0.flex.grow(1)],inputRow:[b.l0.rowWithGap(6),b.l0.align.center],buttonContainer:[b.l0.flex.row,b.l0.justify.end,b.l0.rowWithGap(6),b.l0.color.foregroundDefault]});function D(e){var n,t=e.step,r=e.level,o=void 0===r?0:r,i=e.index,c=e.editable,h=e.onSave,p=e.onDelete;return(0,l.BX)(w.Fragment,{children:[(0,l.tZ)(f.G,{css:G.step,style:{marginLeft:8*o},children:(0,l.BX)(f.G,{css:G.inputRow,children:[(0,l.tZ)(f.G,{css:G.iconWrapper,children:c?(0,l.tZ)(d.xv,{children:i}):(0,l.tZ)(B,{status:null!==(n=t.status)&&void 0!==n?n:a.UL.STEP_UNKNOWN})}),c?(0,l.tZ)(u.B,{autoSize:!0,rows:1,css:G.input,value:t.name,onChange:function(e){h(t.id,e.target.value)}}):t.name,c?(0,l.tZ)(Z.Z,{css:s.gU.nofill,onClick:function(){return p(t.id)}}):null]})}),t.subSteps.map(function(e,n){return(0,l.tZ)(D,{step:e,level:o+1,index:"".concat(n+1,"."),editable:c,onSave:h,onDelete:p},e.id)})]})}function B(e){switch(e.status){case a.UL.STEP_IN_PROGRESS:return(0,l.tZ)(g.Z,{color:b.TV.blurpleStronger,size:e.size});case a.UL.STEP_COMPLETE:return(0,l.tZ)(p.Z,{color:b.TV.accentPositiveStronger,size:e.size});case a.UL.STEP_FAILED:return(0,l.tZ)(m.Z,{color:b.TV.accentNegativeStronger,size:e.size});default:return(0,l.tZ)(v.Z,{color:b.TV.foregroundDimmer,size:e.size})}}},3710:function(e,n,t){t.d(n,{C:function(){return d},Z:function(){return f}});var r=t(3796),o=t(54236),i=t(93245),l=t(36809),a=t(63163),c=t(90),u=(0,l.X)({container:[a.l0.p(8),a.l0.overflowY("auto")],innerContainer:[a.l0.py(16),a.l0.px(8),a.l0.colWithGap(12),a.l0.align.center,a.l0.justify.center,a.l0.border({color:a.TV.outlineDimmest}),a.l0.borderRadius(),a.l0.container()]});function s(e){var n,t;return(null==e?void 0:null===(t=e.contents)||void 0===t?void 0:null===(n=t.contents)||void 0===n?void 0:n.$kind)==="agentPlanEventContents"?{sessionId:e.sessionId,parentEventId:e.parentEventId,agentPlan:e.contents.contents.agentPlanEventContents}:null}function d(){return(0,o.Mq)(s)}function f(){var e=d();return(0,r.tZ)(i.G,{css:u.container,children:(0,r.tZ)(i.G,{css:u.innerContainer,children:e?(0,r.tZ)(c.ZP,{agentPlan:e.agentPlan,sessionId:e.sessionId,parentEventId:e.parentEventId}):(0,r.tZ)(c.ub,{editable:!1})})})}},92571:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(54236);function o(e){var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=e.state===r.he.IN_PROGRESS,o=n.agentTimelineEventContents,i=o.toolName,l=o.toolData;if("screenshot_tool"===i)return"".concat(t?"Taking":"Took"," a screenshot");switch(null==l?void 0:l.$kind){case"fileEditData":return"".concat(t?"Editing":"Edited"," ").concat(l.fileEditData.filePath);case"createFileData":return"".concat(t?"Creating":"Created"," ").concat(l.createFileData.filePath);case"readFileData":case"planProgressData":return null;case"shellExecutionData":return"".concat(t?"Executing":"Executed"," ").concat(l.shellExecutionData.command);case"toolchainInstallData":return"".concat(t?"Adding":"Added"," support for ").concat(l.toolchainInstallData.modules.join(", "));case"packagerInstallData":return"".concat(t?"Installing":"Installed"," ").concat(l.packagerInstallData.inputPackages.join(", "));case"screenshotData":return"".concat(t?"Taking":"Took"," a screenshot");case"presentResultsToolData":return"Presented results to the user";case"workflowsStartToolData":return"Started ".concat(l.workflowsStartToolData.name);case"workflowsRestartToolData":return"Restarted ".concat(l.workflowsRestartToolData.name);case"workflowsStopToolData":return"Stoppped ".concat(l.workflowsStopToolData.name);case"workflowsSetRunConfigToolData":return"Configured ".concat(l.workflowsSetRunConfigToolData.name," to run ").concat(l.workflowsSetRunConfigToolData.command);case"workflowsRemoveRunConfigToolData":return"Removed configuration for ".concat(l.workflowsRemoveRunConfigToolData.name);default:return t?"Working...":"Did something..."}}},37121:function(e,n,t){t.d(n,{x:function(){return eR}});var r,o=t(42516),i=t(66626),l=t(3796),a=t(75271),c=t(3030),u=t(91166),s=t(35139),d=t(11515),f=t(79588),h=t(52657),p=t(22192),v=t(68220),m=t(9602),g=t(14548),Z=t(93245),b=t(36809),y=t(98571),x=t(20957),C=t(10578),w=t(63163),S=t(80403),_=t(42305),E=t(64988),T=t(24766),k=S.r$.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:0}}),A=new _.j(function(e){return k.of(e)}),R={marker:"cm-empty-state-dom"},I=c.tk.theme((0,o._)({},".".concat(R.marker),{backgroundColor:w.TV.redDefault,opacity:"0.2"})),G=S.QQ.define({create:function(e){return e.doc.length},update:function(e,n){return n.state.doc.length}}),D=function(e){return Math.max(e.doc.length-e.facet(k),0)},B=S.QQ.define({create:D,update:function(e,n){return(0,E.aU)(n,"doc",k)?D(n.state):e},provide:function(e){return[G,I,(0,c.EY)({above:!1,update:function(n){return(0,E.aU)(n,e)},markers:function(n){var t=n.state.field(e);if(0===t)return[];var r=n.state.doc.length;return c.dc.forRange(n,R.marker,S.jT.range(r-t,r))}})]}}),P=(0,b.X)({charLimit:[w.l0.color.redDefault]});function X(e){var n=e.view,t=(0,s.IK)(n,B);return t?(0,l.tZ)(T.xv,{variant:"small",css:P.charLimit,children:t}):null}var L=t(27387),N=t(96583),M=t(7351),O=t(19016),U=t(52927),q=t(4573),V=t(87915),H=t(27840),F=t(97420),W=t(47423),z=t(81202),j=t.n(z),$=S.r$.define({combine:function(e){var n;return null!==(n=e[0])&&void 0!==n?n:[]},compare:j()}),K=new _.j(function(e){return $.of(e)}),Y={render:function(e){var n=e.file,t=n.path,r=n.match,o=(0,U.V)((0,l.tZ)(Z.G,{css:O.z.root,style:{width:"100%"},className:"option",children:(0,l.BX)(Z.G,{css:O.z.content,children:[(0,l.BX)(Z.G,{css:O.z.left,children:[(0,l.tZ)(V.Z,{path:t,size:16}),(0,l.tZ)(q.x,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,l.tZ)(Z.G,{color:"dimmest",css:O.z.dir,children:(0,l.tZ)(q.x,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===n.inclusionStatus?(0,l.tZ)(H.Z,{}):null]})}));return o.style.display="flex",o.style.width="100%",o},position:81},J=c.tk.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:F.TV.fontFamilyDefault,fontSize:F.TV.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:F.TV.backgroundHighest}},".cm-completionLabel":{width:0}}),Q=new _.j(function(e){if(!e)return[];function n(){return(n=(0,L._)(function(n){var t,r,o,i,l;return(0,N.Jh)(this,function(a){switch(a.label){case 0:if(!e||!n.matchBefore(/@(\S*)/g)||null===(t=n.matchBefore(/\w*/)))return[2,null];return[4,e(t.text)];case 1:return o=null!==(r=a.sent().files)&&void 0!==r?r:[],i=new Map(n.state.facet($).map(function(e){return[e.path,e.inclusionStatus]})),l=o.map(function(e){var n=e.path,t=e.ranges;return{label:n,displayLabel:" ",file:{path:n,inclusionStatus:i.get(n),match:(0,W.Q1)({path:n,ranges:null!=t?t:[]})}}}),[2,{from:t.from,filter:!1,options:l}]}})})).apply(this,arguments)}return[J,(0,M.ys)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[Y],override:[function(e){return n.apply(this,arguments)}],maxRenderedOptions:100})]}),ee=new _.j(function(e){return c.tk.updateListener.of(function(n){var t=!0,r=!1,o=void 0;try{for(var i,l=n.transactions[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var a=i.value.annotation(M.Jv);a&&e(a.label)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}})}),en=t(12285),et=t(4955),er=t(41733),eo=t(30509),ei=t(9670),el=t(86466),ea=t(22419),ec=t(54300),eu=t(16689),es=t.n(eu),ed=t(35370),ef=(0,b.X)({root:[w.l0.display.inlineFlex],button:[w.l0.reset.button,w.l0.display.inlineFlex,w.l0.px(2),el.gU.outlined,w.l0.borderRadius(4),w.l0.rowWithGap(2),w.l0.align.center],warning:{color:w.TV.redDefault}}),eh=new U.J(function(e){var n=(0,ed.UO)(e.path),t=(0,ed.Il)(e.path);return(0,l.tZ)(ea.u,{isDisabled:!t&&!e.warning,tooltip:(0,l.BX)(Z.G,{children:[e.warning?(0,l.tZ)(T.xv,{variant:"small",css:ef.warning,children:e.warning}):null,t?(0,l.BX)(T.xv,{variant:"small",color:"dimmest",children:[t,"/"]}):null]}),children:function(t,r){return(0,l.tZ)(Z.G,(0,eo._)((0,er._)({css:ef.root,innerRef:r},t),{children:(0,l.BX)(Z.G,{tag:"button",css:ef.button,onClick:function(){return e.onClick()},children:[(0,l.tZ)(V.Z,{size:12,path:e.path}),(0,l.tZ)(T.xv,{variant:"small",children:n}),e.warning?(0,l.tZ)(ec.Z,{size:12}):null]})}))}})}),ep=function(e){"use strict";(0,et._)(t,e);var n=(0,ei._)(t);function t(e,r){var o;return(0,en._)(this,t),(o=n.call(this)).file=e,o.onClick=r,o}var r=t.prototype;return r.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},r.toDOM=function(){var e=this.file,n=e.path,t=e.inclusionStatus,r=null;switch(t){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var o=eh.create({path:n,onClick:this.onClick,warning:r});return o.style.display="inline",o},t}(c.l9),ev=function(e,n){return new c.Y1({regexp:RegExp("".concat(e.map(function(e){var n=e.path;return"@".concat(es()(n))}).join("|")),"g"),decoration:function(t,r){var o,i=t[0].substring(1,null===(o=t[0])||void 0===o?void 0:o.length),l=e.find(function(e){return e.path===i});return l?c.p.replace({widget:new ep(l,function(){return n(i)}),inclusive:!0}):null}})},em=new _.j(function(e){return e?c.lg.fromClass(function(){"use strict";function n(t){(0,en._)(this,n);var r=t.state.facet($);this.match=r.length&&e?ev(r,e):null,this.placeholders=this.match?this.match.createDeco(t):c.p.none}return n.prototype.update=function(n){var t=n.state.facet($);if(0===t.length){this.match=null,this.placeholders=c.p.none;return}if((0,E.aU)(n,$)){this.match=ev(t,e),this.placeholders=this.match.createDeco(n.view);return}if((0,E.aU)(n,"doc")){if(!this.match){this.match=ev(t,e),this.placeholders=this.match.createDeco(n.view);return}this.placeholders=this.match.updateDeco(n,this.placeholders)}},n}(),{decorations:function(e){return e.placeholders},provide:function(e){return c.tk.atomicRanges.of(function(n){var t;return(null===(t=n.plugin(e))||void 0===t?void 0:t.placeholders)||c.p.none})}}):[]}),eg=t(37505),eZ={layer:"cm-placeholder-layer",dom:"cm-placeholder-dom"},eb=c.tk.theme((r={},(0,o._)(r,".".concat(eZ.layer),{width:"100%",height:"100%",pointerEvents:"none"}),(0,o._)(r,".".concat(eZ.dom),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:F.TV.fontFamilyDefault,color:F.TV.foregroundDimmest}),r)),ey=function(e){return 0===e.doc.toString().trim().length};S.r$.define({combine:function(){return!0}});var ex=S.Py.define(),eC=S.QQ.define({create:ey,update:function(e,n){return ey(n.state)}}),ew=t(29017),eS=(0,p.$)(["padding"]),e_=eS.cssVars,eE=eS.styleTokens,eT=c.tk.theme((0,o._)({"&":{flexGrow:1},"& .cm-content":{fontFamily:w.TV.fontFamilyDefault}},"& .".concat(f.ll),{display:"none"})),ek=(0,b.X)({footer:[w.l0.rowWithGap(8),w.l0.align.end,w.l0.py(4)],left:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.growAndShrink(1),{cursor:"text"}],right:[w.l0.display.flex,w.l0.rowWithGap(8),w.l0.align.end],rightColumn:[w.l0.display.flex,w.l0.flex.column,w.l0.align.center],codemirror:[w.l0.display.flex,w.l0.align.center,w.l0.flex.grow(1),w.l0.minHeight(32),w.l0.maxHeight(300),w.l0.overflow("auto")],send:[w.l0.borderRadius()],sendDisabled:[(0,v.ec)("grey")],sendEnabled:[(0,v.ec)("blurple")],chatInput:[w.l0.backgroundColor.backgroundDefault,w.l0.borderRadius(4),{padding:eE.padding,border:"1px solid ".concat(w.TV.outlineDimmest),"&:focus-within, &:hover":{border:"1px solid ".concat(w.TV.outlineDimmer)},"&:active":{border:"1px solid ".concat(w.TV.accentPrimaryDefault)}}]}),eA=new _.j(function(e,n){return c.tk.domEventHandlers({keydown:function(t,r){!((0,M.SI)(r.state).length>0)&&"Enter"===t.key&&!t.shiftKey&&(t.preventDefault(),!(n||r.state.field(eC))&&(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})}),eR=(0,a.forwardRef)(function(e,n){var t,r,f,p,v,b,w,S,_,T=(0,d.Z)(),k=T.ref,R=T.view;r=(t={view:R,setPromptEditor:e.inputRef}).view,f=t.setPromptEditor,p=(0,h.Z)(f),(0,a.useEffect)(function(){if(r){var e=p.current;return e({setValue:function(e){r.state.doc.toString()!==e&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:e}})},getValue:function(){return r.state.doc.toString()},focus:function(){r.focus(),r.dispatch({selection:{anchor:r.state.doc.length}})},animatePlaceholder:function(){r.dispatch({effects:ex.of(!0)})}}),function(){e(null)}}},[r,p]);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.text,t=void 0===n?"Type message":n;return(0,a.useMemo)(function(){var e;return[eC,eb,(0,c.EY)((e=Date.now(),{above:!1,class:eZ.layer,update:function(n){var t=!1;return(0,eg.j)(n,ex,function(){t=!0,e=Date.now()}),t||(0,E.aU)(n,eC)},markers:function(n){if(!n.state.field(eC))return[];var r,o,i,l,a,c,u=n.coordsAtPos(0);if(!u)return[];var s=n.dom.getBoundingClientRect(),d=u.left-s.left;return[(o=(r={top:u.top-s.top,left:d,height:u.bottom-u.top,animateTimestamp:e,text:t}).top,i=r.left,l=r.height,a=r.animateTimestamp,c=r.text,{draw:function(){var e=document.createElement("div");e.className=eZ.dom,e.style.width="100%",e.style.paddingTop=o+"px",e.style.paddingLeft=i+"px",e.style.height=l+"px";var n=c.length;return function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){e.textContent=c.slice(0,r),r<n&&t(r+1)})}(),e},animateTimestamp:a,eq:function(e){return this.animateTimestamp===e.animateTimestamp}})]}}))]},[t])}({text:e.placeholderText}),G=(0,s.IK)(R,eC),D=A.use(e.maxLength),P=(0,h.Z)(e.onSubmit),L=eA.use((0,a.useCallback)(function(e){return P.current(e)},[P]),!e.isConnected),N=Q.use(e.findFiles),M=em.use(e.openFile),O=K.use(e.fileContextInclusions),U=ew.I.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),q=e.updateFileContext,V=ee.use((0,a.useCallback)(function(e){return null==q?void 0:q({path:e,preference:"include"})},[q]));if(e.hideInput)return null;var H=(!R||!0===G)&&!e.loading||e.loading&&!e.lastEventInProgress,F=(0,i._)(null!==(_=e.children)&&void 0!==_?_:[],2),W=F[0],z=F[1];return(0,l.BX)(Z.G,{css:ek.chatInput,innerRef:n,style:(0,o._)({flexDirection:"compact"===e.variant?"row":void 0},e_.padding,"compact"===e.variant?"2px 5px":"4px 8px"),children:[(0,l.tZ)(u.ZP,{ref:k,language:"markdown",css:ek.codemirror,hideGutter:!0,autocomplete:!1,lineWrapping:!0,fontSize:14,keyboardHandler:null,extensions:[eT,L,U,I,B,D,O,M,N,V]}),(0,l.BX)(Z.G,{css:ek.footer,children:["compact"===e.variant?null:(0,l.tZ)(Z.G,{css:ek.left,onClick:function(e){e.target===e.currentTarget&&(null==R||R.focus())},children:W}),(0,l.BX)(Z.G,{css:ek.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,l.tZ)(X,{view:R}),z,(0,l.BX)(Z.G,{css:ek.rightColumn,children:["compact"===e.variant?(0,l.tZ)(X,{view:R}):null,(0,l.tZ)(g.Tg,{elevated:!0,css:ek.send,children:e.isConnected?(0,l.tZ)(m.hU,{css:H?ek.sendDisabled:ek.sendEnabled,disabled:H,dataCy:"ai-chat-send-button",alt:(v=e.loading,b=e.lastEventInProgress,v?b?"Stop":"Loading":"Send"),onClick:function(){if(e.loading&&e.lastEventInProgress){e.onStop();return}if(R){var n=R.state.doc.toString();n&&(e.onSubmit(n),R.dispatch({changes:{from:0,to:R.state.doc.length}}))}},children:(w=e.loading,S=e.lastEventInProgress,w?S?(0,l.tZ)(x.Z,{}):(0,l.tZ)(C.Z,{}):(0,l.tZ)(y.Z,{}))}):(0,l.tZ)(m.hU,{disabled:!0,alt:"Connecting....",children:(0,l.tZ)(C.Z,{})})})]})]})]})]})})},19016:function(e,n,t){t.d(n,{p:function(){return eh},z:function(){return eo}});var r,o,i=t(27387),l=t(42516),a=t(41733),c=t(30509),u=t(66626),s=t(96583),d=t(3796),f=t(54455),h=t(4573),p=t(22192),v=t(86466),m=t(87915),g=t(22893),Z=t(14548),b=t(24766),y=t(93245),x=t(36809),C=t(27840),w=t(20904),S=t(10578),_=t(89774),E=t(54300),T=t(63163),k=t(88504),A=t(41974),R=t(75271),I=t(96751),G=t(17437),D=t(35370),B=t(52657),P=t(57785),X=t(82549),L=t(47423);t(42965);var N=(0,x.X)({popover:[T.l0.borderRadius(4),T.l0.border({color:T.TV.outlineDefault}),T.l0.overflow("hidden"),T.l0.maxWidth(260)]}),M=t(22419),O=t(64888),U=t(65958),q=t(79904),V=t(39031),H=t(99677),F=t(85995),W=t(54236),z=t(31718),j=t(16155),$=t(21262),K=t(71440),Y=t(9122);function J(){var e=(0,$._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var Q={},ee=(0,K.Ps)(J()),en=t(14118),et=t(35177),er="rag-preference",eo=(0,x.X)({root:[v.gU.listItem,T.l0.p(4),T.l0.colWithGap(2)],content:[T.l0.rowWithGap(8),T.l0.align.center],left:[T.l0.flex.growAndShrink(1),T.l0.rowWithGap(4),T.l0.align.center,{fontSize:T.TV.fontSizeSmall}],warning:[{color:T.TV.accentNegativeDefault}],dir:[{opacity:.6},T.l0.flex.shrink(100)]});function ei(e){var n=e.path,t=e.highlighted,r=e.ranges,o=e.status,i=t?{backgroundColor:v.vb.interactiveBackgroundActive}:void 0,l=o?({included:(0,d.tZ)(C.Z,{}),overflowing:(0,d.tZ)(E.Z,{}),truncated:(0,d.tZ)(E.Z,{}),unsupported:(0,d.tZ)(E.Z,{})})[o]:null,a=(0,L.Q1)({path:n,ranges:null!=r?r:[]}),c=a.directory,u=a.filename,s=c&&c.text.split("/"),f=s&&s.length>2?"".concat(s[0],"/.../").concat(s[s.length-1],"/"):c&&c.text+"/";return(0,d.tZ)(M.u,{maxWidth:600,closeDelay:"none",tooltip:n,children:(0,d.BX)(y.G,{css:eo.root,style:i,children:[(0,d.BX)(y.G,{css:eo.content,style:i,children:[(0,d.BX)(y.G,{css:eo.left,style:i,children:[(0,d.tZ)(m.Z,{path:n,size:16}),(0,d.tZ)(h.x,{text:u.text,highlight:u.ranges,dimmed:!t}),c?(0,d.tZ)(y.G,{color:"dimmest",css:eo.dir,children:(0,d.tZ)(h.x,{text:f||"",highlight:c.ranges,dimmed:!t})}):null]}),(0,d.tZ)(M.u,{tooltip:"File not supported",isDisabled:"unsupported"!==o,children:l})]}),"overflowing"===o||"truncated"===o?(0,d.tZ)(b.xv,{css:eo.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var el=(0,p.$)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),ea=el.cssVars,ec=el.styleTokens,eu=(0,x.X)({root:[T.l0.width(240),T.l0.maxHeight(200),T.l0.display.flex],inputRow:[T.l0.position.relative,(o={},(0,l._)(o,ea.iconColor,T.TV.foregroundDimmest),(0,l._)(o,ea.placeholderColor,T.TV.foregroundDimmer),(0,l._)(o,":focus-within, :hover",(r={},(0,l._)(r,ea.iconColor,T.TV.foregroundDimmer),(0,l._)(r,ea.placeholderColor,T.TV.foregroundDimmest),r)),o)],searchIcon:[T.l0.pl(6),T.l0.coverContainer,T.l0.align.start,T.l0.justify.center,{color:ec.iconColor,pointerEvents:"none"}],input:[v.gU.nofill,T.l0.p(4),T.l0.pl(24),{borderRadius:ec.inputBorderRadius,fontSize:T.TV.fontSizeSmall,margin:"-1px -1px 0",cursor:"text","::placeholder":{color:ec.placeholderColor},"@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}}}],header:[T.l0.rowWithGap(2),T.l0.px(4),T.l0.height(24),T.l0.align.center,T.l0.display.flex,T.l0.justify.spaceBetween],selectionButton:[T.l0.reset.button,v.gU.nofill,T.l0.p(2),{fontSize:T.TV.fontSizeSmall}],menu:[T.l0.flex.growAndShrink(1),{overflow:"auto"}],item:[{transform:ec.itemTransform,position:"absolute",top:0,left:0,width:"100%"}],aiContext:[T.l0.flex.row,T.l0.justify.spaceBetween,T.l0.px(6),T.l0.py(2),T.l0.align.center],aiContextCheckboxContainer:[T.l0.rowWithGap(8),T.l0.py(4),T.l0.pl(6),T.l0.align.center,T.l0.backgroundColor.blurpleDimmest,T.l0.color.blurpleStrongest],aiContextCheckbox:[{scale:"0.85"}],aiContextUpsell:[T.l0.rowWithGap(8),T.l0.py(4),T.l0.pl(6),T.l0.align.center,T.l0.backgroundColor.yellowDimmest,T.l0.color.yellowStrongest,v.gU.listItem]});function es(e,n){return n.status&&!e.status?1:e.status&&!n.status?-1:"included"===n.status&&"included"!==e.status?1:"included"===e.status&&"included"!==n.status?-1:0}function ed(e){var n,t,r,o,h,p,v,m,Z,x,C=e.fileContextInclusions,w=e.placement,I=void 0===w?"bottom":w,D=e.findFiles,X=e.overscan,L=e.onChange,N=e.unSelectAllFiles,O=e.selectAllFiles,U=e.useRag,q=e.setUseRag,$=e.updatePopperPositionRef,K=(0,R.useRef)(null),J=(0,u._)((0,R.useState)(""),2),eo=J[0],el=J[1],ec=(0,u._)((0,R.useState)(!1),2),ed=ec[0],ef=ec[1],eh=(0,W.Lw)(),ep=(r=(t=(0,u._)((0,R.useState)({loading:!0,error:null,items:null}),2))[0],o=t[1],(h=(0,R.useRef)(null)).current||(h.current=(0,G.Z)((n=(0,i._)(function(e){var n;return(0,s.Jh)(this,function(t){switch(t.label){case 0:return[4,D(e)];case 1:return n=t.sent(),(0,R.startTransition)(function(){o(null!==n.error?{error:n.error,loading:!1,items:null}:{items:n.files,total:n.total,error:null,loading:!1})}),[2]}})}),function(e){return n.apply(this,arguments)}),{wait:40})),p=(0,R.useCallback)(function(e){var n;return null===(n=h.current)||void 0===n?void 0:n.call(h,e).catch(function(){})},[]),(0,R.useEffect)(function(){return p(""),function(){try{var e;null===(e=h.current)||void 0===e||e.cancel()}catch(e){}}},[p]),{files:r.items,loading:r.loading,error:r.error,total:r.total,update:p}),ev=ep.files,em=ep.total,eg=ep.loading,eZ=ep.error,eb=ep.update,ey=et.Z.get(er,"boolean"),ex=(0,R.useRef)(null),eC=(0,B.Z)(eo),ew=(0,R.useMemo)(function(){var e=new Map(C.map(function(e){return[e.path,e.inclusionStatus]})),n=null==ev?void 0:ev.map(function(n){var t=n.path;return{path:t,ranges:n.ranges,status:e.get(t)}});if(!n)return null;if(ex.current&&!eC.current)return(0,P.Z)(n,{existing:ex.current,getKey:function(e){return e.path}});if(eC.current)return n;var t=n.sort(es);return ex.current=t,t},[ev,C,eC]),eS=(0,R.useMemo)(function(){var e;return null!==(e=null==ew?void 0:ew.filter(function(e){return e.status}))&&void 0!==e?e:[]},[ew]);(0,R.useEffect)(function(){if(!eg){var e;null===(e=$.current)||void 0===e||e.call($)}},[eg,$]);var e_=(0,k.Kb)({inputValue:eo,items:null!=ew?ew:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,n){var t=n.changes;switch(n.type){case k.Kb.stateChangeTypes.InputKeyDownEnter:case k.Kb.stateChangeTypes.ItemClick:return(0,A.Uy)(t,function(n){n.highlightedIndex=e.highlightedIndex});default:return t}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&eT.getVirtualItems()[e.highlightedIndex]&&eT.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case k.Kb.stateChangeTypes.InputKeyDownEnter:case k.Kb.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var n,t,r,o=eS.includes(e.selectedItem)?"exclude":"include";L({path:e.selectedItem.path,preference:o}),null===(r=K.current)||void 0===r||r.select();break;case k.Kb.stateChangeTypes.InputChange:el(null!==(n=e.inputValue)&&void 0!==n?n:""),eb(null!==(t=e.inputValue)&&void 0!==t?t:"")}}}),eE=(0,R.useRef)(null),eT=(0,f.MG)({count:null!==(x=null==ew?void 0:ew.length)&&void 0!==x?x:0,getScrollElement:function(){return eE.current},estimateSize:function(){return 32},getItemKey:function(e){var n,t;return null!==(t=null==ew?void 0:null===(n=ew[e])||void 0===n?void 0:n.path)&&void 0!==t?t:""},overscan:void 0===X?4:X}),ek=(0,d.BX)(y.G,{css:eu.inputRow,children:[(0,d.tZ)(y.G,{css:eu.searchIcon,children:eg?(0,d.tZ)(S.Z,{size:12}):(0,d.tZ)(_.Z,{size:12})}),(0,d.tZ)("input",(0,a._)({autoFocus:!0,placeholder:"Search files",css:eu.input},e_.getInputProps({ref:K})))]}),eA="top"===I?"0 0 ".concat(T.TV.space4," ").concat(T.TV.space4):"".concat(T.TV.space4," ").concat(T.TV.space4," 0 0");!eg||(null==ew?void 0:ew.length)||(eA=T.TV.space4);var eR=(v={variables:{replId:(0,j.Z)()}},m=(0,a._)({},Q,v),Y.a(ee,m)).data,eI=(null==eR?void 0:null===(Z=eR.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&eR.repl.authorizations.useRag.isAuthorized,eG=(0,en.P5)({controlName:"flag-richard-whittington"}),eD=eI&&eG;return(0,R.useEffect)(function(){eD&&q(null===ey||ey)},[eD,ey,q]),(0,d.BX)(y.G,{css:eu.root,style:(0,l._)({},ea.inputBorderRadius,eA),children:["bottom"===I?ek:null,eD?(0,d.BX)(y.G,{css:eu.aiContext,children:[(0,d.tZ)(b.xv,{css:T.l0.fontWeight.medium,children:"AI Context"}),(0,d.tZ)(M.u,{tooltip:"Manage what the AI can read to decide how to respond to your messages here.",children:(0,d.tZ)(V.Z,{})})]}):null,eh&&eD?(0,d.BX)(y.G,{css:eu.aiContextCheckboxContainer,children:[(0,d.tZ)(z.X,{checked:U,onChange:function(){q(function(e){return et.Z.set(er,!e),!e})},name:"AI Context",css:eu.aiContextCheckbox}),(0,d.tZ)(b.xv,{variant:"small",css:T.l0.fontWeight.normal,children:"AI codebase knowledge"})]}):null,!eh&&eD?(0,d.BX)(y.G,{onClick:function(){return ef(!0)},css:eu.aiContextUpsell,children:[(0,d.tZ)(H.Z,{}),(0,d.tZ)(b.xv,{variant:"small",css:T.l0.fontWeight.normal,children:"Activate AI codebase knowledge"})]}):null,eZ?(0,d.tZ)(g.E,{icon:(0,d.tZ)(E.Z,{}),text:eZ}):null,void 0!==em?(0,d.BX)(y.G,{css:eu.header,style:"bottom"===I?{borderTop:"1px solid "+T.TV.outlineDimmer}:void 0,children:[(0,d.tZ)(b.xv,{variant:"small",color:"dimmest",children:"".concat(C.length,"/").concat(em," selected")}),C.length?(0,d.tZ)(y.G,{tag:"button",css:eu.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var o,i=(null!=ev?ev:[])[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;e.push(l.path)}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}N({paths:e})}()},children:"Unselect All"}):(0,d.tZ)(y.G,{tag:"button",css:eu.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var o,i=(null!=ev?ev:[])[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;e.push(l.path)}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}O({paths:e})}()},children:"Select All"})]}):null,(0,d.tZ)("div",(0,c._)((0,a._)({style:"top"===I?{borderBottom:"1px solid "+T.TV.outlineDimmer}:void 0,css:eu.menu},e_.getMenuProps({ref:eE})),{children:(0,d.tZ)("div",{style:{height:"".concat(eT.getTotalSize(),"px"),width:"100%",position:"relative"},children:eT.getVirtualItems().map(function(e){var n=e.index,t=e.key,r=e.start,o=null==ew?void 0:ew[n];return o?(0,d.tZ)(y.G,(0,c._)((0,a._)({"data-index":n,css:eu.item,style:(0,l._)({},ea.itemTransform,"translateY(".concat(r,"px)"))},e_.getItemProps({item:o,index:n,refKey:"innerRef",ref:eT.measureElement})),{"aria-selected":void 0!==o.status,children:(0,d.tZ)(ei,{highlighted:n===e_.highlightedIndex,path:o.path,ranges:o.ranges,status:o.status})}),t):null})})})),"top"===I?ek:null,(0,d.tZ)(F.Z,{isOpen:ed,onClose:function(){ef(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var ef=(0,x.X)({button:[T.l0.height(24),T.l0.reset.button,T.l0.align.center,T.l0.cursor.pointer,T.l0.px(4),T.l0.py(2),T.l0.rowWithGap(4),v.gU.nofill,T.l0.color.foregroundDimmest,{"&:hover":T.l0.color.foregroundDefault}]});function eh(e){var n,t=(0,u._)((0,R.useState)(!1),2),r=t[0],o=t[1],i=(0,u._)((0,R.useState)(null),2),l=i[0],s=i[1],f=(0,u._)((0,R.useState)(null),2),h=f[0],p=f[1];(0,R.useEffect)(function(){var e=function(e){"Escape"===e.key&&o(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var v=(0,I.D)(l,h,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:e.isInMobileWorkspace?"top-start":"bottom-start"}),m=(0,R.useCallback)(function(){v.update&&v.update()},[v]),g=(0,R.useRef)(m);(0,R.useEffect)(function(){g.current=m},[m]);var b=e.fileContextInclusions,y=e.findFiles,x="Context",C=b.filter(function(e){return"included"===e.inclusionStatus});C.length&&(x=1===C.length?(0,D.UO)(C[0].path):C.length+" files");var S=(0,R.useId)();return(0,d.BX)(O.bF,{children:[(0,d.tZ)(q.zx,{css:ef.button,ref:s,onClick:function(){return o(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S,size:"small",iconLeft:(0,d.tZ)(w.Z,{}),iconRight:(0,d.tZ)(X.Z,{rotate:r?180:0,size:12}),text:x}),(0,d.tZ)(U.J,{isOpen:r,shouldCloseOnInteractOutside:function(e){var n;return n=[h,l],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(o(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,d.tZ)(Z.Tg,(0,c._)((0,a._)({id:S,elevated:!0,style:v.styles.popper,innerRef:p,css:N.popover},v.attributes.popper),{children:(0,d.tZ)(ed,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,selectAllFiles:e.selectAll,findFiles:y,fileContextInclusions:b,placement:(null===(n=v.state)||void 0===n?void 0:n.placement.startsWith("top"))?"top":"bottom",useRag:e.useRag,setUseRag:e.setUseRag,updatePopperPositionRef:g})}))})]})}},47305:function(e,n,t){t.d(n,{Dz:function(){return _},HC:function(){return w},NK:function(){return g},Pr:function(){return E},ZA:function(){return Z},gg:function(){return b}});var r=t(41733),o=t(30509),i=t(98924),l=t(3796),a=t(26996),c=t(23802),u=t(95501),s=t(63411),d=t(54236),f=t(93245),h=t(36809),p=t(63163),v=t(24766),m=new Map([[d.BY.BASIC,s.Z],[d.BY.ADVANCED,u.Z]]),g=new Map([[d.BY.BASIC,"Basic"],[d.BY.ADVANCED,"Advanced"]]);function Z(e){var n=e.model,t=(0,i._)(e,["model"]),o=m.get(n);return o?(0,l.tZ)(o,(0,r._)({},t)):null}function b(e){var n=e.model,t=e.icon,i=e.text,a=m.get("string"==typeof n?d.BY.ADVANCED:n),c="string"==typeof n?n:g.get(n);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},t)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}var y=new Map([[d.$h.GENERATE,c.Z],[d.$h.TRANSFORM,c.Z],[d.$h.EXPLAIN,a.Z],[d.$h.REPLIT_DOCS,a.Z]]),x=new Map([[d.$h.GENERATE,"Generate"],[d.$h.TRANSFORM,"Modify"],[d.$h.EXPLAIN,"Explain"],[d.$h.REPLIT_DOCS,"Ask replit.com"]]),C=new Map([[d.G_.GENERATE_CODE,c.Z],[d.G_.TRANSFORM_CODE,c.Z],[d.G_.EXPLAIN_CODE,a.Z],[d.G_.DEBUGGER,a.Z]]),w=new Map([[d.G_.GENERATE_CODE,"Generate"],[d.G_.TRANSFORM_CODE,"Modify"],[d.G_.EXPLAIN_CODE,"Explain"],[d.G_.DEBUGGER,"Debug"]]),S=(0,h.X)({iconLabel:[p.l0.rowWithGap(4),p.l0.align.center]});function _(e){var n=e.intent,t=e.icon,i=e.text,a=y.get(n),c=x.get(n);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},t)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}function E(e){var n=e.type,t=e.icon,i=e.text,a=C.get(n),c=w.get(n);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},t)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}},82231:function(e,n,t){t.d(n,{_l:function(){return ea},M4:function(){return W},JG:function(){return er},UE:function(){return z}});var r=t(27387),o=t(42516),i=t(41733),l=t(30509),a=t(66626),c=t(96583),u=t(3796),s=t(38935),d=t(75271),f=t(71253),h=t(66164),p=t(25462),v=t(13387),m=t(12623),g=t(87915),Z=t(14548),b=t(24766),y=t(93245),x=t(36809),C=t(63163),w=t(62279),S=t(96949),_=t(79904),E=t(23522),T=t(22419),k=t(78272),A=t(918),R=t(55649),I=(0,w.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),G=(0,x.X)({buttonContainer:[C.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[C.l0.flex.row],button:[C.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:C.TV.space4,paddingRight:C.TV.space8,animation:"".concat(I," 3s"),fontFamily:C.TV.fontFamilyDefault,fontSize:C.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),D=function(e){var n=e.code,t=e.language;return(0,u.tZ)("div",{css:G.buttonContainer,children:(0,u.tZ)(E.q,{text:"Copy",css:G.button,size:"small",textToCopy:n,tooltipPlacement:"bottom",onCopy:function(){(0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_copied",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane"}),(0,S.j)(S.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:t})}})})},B=function(e){var n=e.code,t=e.disabled,r=e.insertCode,o=(0,a._)((0,d.useState)(!1),2),i=o[0],l=o[1],c=(0,u.tZ)(_.zx,{css:G.button,text:"Insert",disabled:t,size:"small",iconLeft:(0,u.tZ)(R.Z,{}),onClick:function(){r&&((0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_inserted",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane"}),r(n),l(!0))}});return(0,u.BX)("div",{css:G.buttonContainer,children:[i?(0,u.tZ)("span",{css:G.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){l(!1)})},"aria-hidden":!0,children:"Inserted!"}):null,(0,u.tZ)(T.u,{placement:"bottom",tooltip:t?"Place cursor in a file to insert code":"Insert code at cursor position",children:c})]})},P=function(e){var n=e.code,t=e.revertCodeInsert,r=(0,a._)((0,d.useState)(!1),2),o=r[0],i=r[1],l=(0,u.tZ)(_.zx,{css:G.button,text:"Revert",size:"small",iconLeft:(0,u.tZ)(A.Z,{}),onClick:function(){(0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_reverted",intent_type:null,model:null,user_model_selection:null,message_content:n,message_source:"chat_pane"}),t(),i(!0)}});return(0,u.BX)("div",{css:G.buttonContainer,children:[o?(0,u.tZ)("span",{css:G.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){i(!1)})},"aria-hidden":!0,children:"Reverting..."}):null,(0,u.tZ)(T.u,{placement:"bottom",tooltip:"Revert code insertion",children:l})]})},X=function(e){var n=e.onRunClicked;return(0,u.tZ)("div",{css:G.buttonContainer,children:(0,u.tZ)(_.zx,{css:G.button,text:"Run",size:"small",disabled:!n,iconLeft:(0,u.tZ)(k.Z,{}),onClick:null!=n?n:function(){}})})},L=t(53250),N=t(14118),M=t(67827),O=t(54236),U=t(25414),q=t(42965),V=t(37475),H=t(25722),F=t(10578),W=(0,d.memo)(function(e){var n=(0,O.Ti)(e.id);return(null==n?void 0:n.content)||e.state===O.he.COMPLETE?(null==n?void 0:n.$kind)==="messageEventContents"||(null==n?void 0:n.$kind)==="inlineActionEventContents"?(0,u.tZ)(er,{text:n.content||"",codeComponent:e.markdownCodeComponent,messageState:e.state,disableAnchorTags:e.disableAnchorTags}):null:(0,u.tZ)(F.Z,{})});function z(e){var n=e.eventId,t=e.openFile,r=e.onStartLocalShellExecution;return(0,d.useMemo)(function(){if(t)return function(e){return(0,u.tZ)(ea,(0,l._)((0,i._)({},e),{eventId:n,openFile:t,onStartLocalShellExecution:r}))}},[n,t,r])}var j=[p.Z,h.Z,f.Z],$=[],K=function(e){return(0,u.tZ)(y.G,{children:(0,u.tZ)(b.xv,{children:e.children})})},Y=function(e){return(0,u.tZ)(y.G,{children:(0,u.tZ)(b.xv,{children:(0,u.tZ)(J,{children:e.children})})})},J=function(e){var n=e.children;return n?(0,u.tZ)(u.HY,{children:n.map(function(e,n){return e&&"string"==typeof e?e.split(/(\s+)/).map(function(e,t){return(0,u.tZ)("span",{css:ei.fadeInAnimation,children:e},"".concat(n,"-").concat(t))}):(0,u.tZ)("span",{children:e},"".concat(n,"-0"))})}):null},Q=function(e){return(0,u.tZ)("span",{css:ei.anchorReplacement,children:e.children})},ee=function(e){return(0,u.tZ)("input",(0,i._)({disabled:!0},e))},en={h1:K,h2:K,h3:K,h4:K,h5:K,h6:K,input:ee},et={h1:Y,h2:Y,h3:Y,h4:Y,h5:Y,h6:Y,p:function(e){return(0,u.tZ)("p",{children:(0,u.tZ)(J,{children:e.children})})},li:function(e){return(0,u.tZ)("li",{children:(0,u.tZ)(J,{children:e.children})})},strong:function(e){return(0,u.tZ)("strong",{children:(0,u.tZ)(J,{children:e.children})})},input:ee},er=(0,d.memo)(function(e){var n=e.text,t=e.codeComponent,r=e.messageState,o=e.disableAnchorTags,l=t?{code:t}:void 0,a=o?{a:Q}:void 0,c=(0,q.T3)();return(0,u.tZ)(s.ZP,{css:r===O.he.COMPLETE||c?void 0:ei.codeViewerSpanFadeIn,remarkPlugins:j,rehypePlugins:$,components:r===O.he.COMPLETE||c?(0,i._)({},en,l,a):(0,i._)({},et,l,a),lineBreaks:!0,themed:!0,children:n})}),eo=(0,x.X)({styles0:[C.l0.pl(4),C.l0.fontSize(12),C.l0.color.foregroundDimmer]}),ei=(0,x.X)({root:[C.l0.borderRadius(4),C.l0.border({color:C.TV.outlineDimmest})],header:[C.l0.rowWithGap(8),C.l0.border({color:C.TV.outlineDimmest,direction:"bottom"}),{fontFamily:C.TV.fontFamilyDefault,userSelect:"none"}],headerLeft:[C.l0.rowWithGap(0),C.l0.pl(4),C.l0.flex.growAndShrink(1),C.l0.align.center],headerRight:[C.l0.rowWithGap(0),{"& button":{borderRadius:0},"& > div:last-of-type button":{borderTopRightRadius:4}}],code:[C.l0.p(4)],fadeInAnimation:[{"@keyframes fade-in-animation":{from:{opacity:0},to:{opacity:1}},animation:"fade-in-animation 600ms linear"}],codeViewerSpanFadeIn:(0,o._)({},"& .".concat(L.w),{"@keyframes replit-ai-code-fade-in":{from:{opacity:0},to:{opacity:1}},animation:"replit-ai-code-fade-in 600ms linear"}),anchorReplacement:[C.l0.fontWeight.bold]}),el=new Set(["bash","sh","shell"]),ea=function(e){var n=(0,m.F)(e.className),t=n&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(n),o=t?v.$R.from(t):void 0,l=null==o?void 0:o.name,a=String(e.children).trimEnd(),s=(0,V.iM)(),d=(0,N.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),f=s&&d&&n&&el.has(n)&&void 0!==e.eventId&&void 0!==e.onStartLocalShellExecution,h=(0,M.U)(function(n){return function(){function t(){return(t=(0,r._)(function(){var t,r;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!e.onStartLocalShellExecution||!e.eventId)return[2];return t=a,[4,n.shellExec.spawn.rpc({cmd:"bash",args:["-ci",t]})];case 1:return(r=o.sent()).ok?e.onStartLocalShellExecution({command:t,parentEventId:e.eventId,channelName:r.payload.id}):H.$e(function(e){e.setTag("service","pid2-shell-in-ai-chat"),H.Tb(r.payload)}),[2]}})})).apply(this,arguments)}!function(){t.apply(this,arguments)}()}},[e,a]);return e.inline?(0,u.tZ)(m.Z,(0,i._)({},e)):(0,u.BX)(Z.Tg,{css:ei.root,children:[(0,u.BX)(y.G,{css:ei.header,children:[(0,u.BX)(y.G,{css:ei.headerLeft,children:[t?(0,u.tZ)(g.Z,{size:12,path:t}):null,l?(0,u.tZ)(b.xv,{multiline:!1,css:eo.styles0,children:l}):null]}),(0,u.BX)(y.G,{css:ei.headerRight,children:[(0,u.tZ)(D,{code:a,language:n}),(0,u.tZ)(ec,{code:a}),f?(0,u.tZ)(X,{onRunClicked:h}):null]})]}),(0,u.tZ)(y.G,{css:ei.code,children:(0,u.tZ)(L.Z,{code:a,language:n})})]})},ec=function(e){var n=e.code,t=(0,a._)((0,d.useState)(!1),2),r=t[0],o=t[1],i=(0,U.he)();if(!i)return null;var l=i.insert,c=i.revert;return r?r&&c?(0,u.tZ)(P,{code:n,revertCodeInsert:function(){o(!1),c()}}):null:(0,u.tZ)(B,{disabled:!1,code:n,insertCode:function(){o(!0),null==l||l(n)}})}},7122:function(e,n,t){t.d(n,{NA:function(){return f}});var r=t(41733),o=t(21262),i=t(71440),l=t(9122);function a(){var e=(0,o._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,o._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,i.Ps)(a()),d=(0,i.Ps)(c(),s);function f(e){var n=(0,r._)({},u,e);return l.a(d,n)}},67465:function(e,n,t){t.d(n,{Y:function(){return s}});var r=t(3796),o=t(6065),i=t(93245),l=t(24766),a=t(7122),c=t(63163),u=(0,t(36809).X)({root:[c.l0.rowWithGap(8),c.l0.align.center]});function s(e){var n,t,c,s,d,f,h,p=(0,a.NA)({variables:{id:e.id}}).data,v=null==p?void 0:p.user;return e.showAvatarOnly?(0,r.tZ)(o.q,{size:24,username:null!==(n=null==v?void 0:v.username)&&void 0!==n?n:"",fullName:null!==(t=null==v?void 0:v.fullName)&&void 0!==t?t:"",src:null!==(c=null==v?void 0:v.image)&&void 0!==c?c:""}):(0,r.BX)(i.G,{css:u.root,children:[(0,r.tZ)(o.q,{size:24,username:null!==(s=null==v?void 0:v.username)&&void 0!==s?s:"",fullName:null!==(d=null==v?void 0:v.fullName)&&void 0!==d?d:"",src:null!==(f=null==v?void 0:v.image)&&void 0!==f?f:""}),(0,r.tZ)(l.xv,{variant:"small",color:"dimmer",children:null!==(h=null==v?void 0:v.username)&&void 0!==h?h:""})]})}},52551:function(e,n,t){t.d(n,{LX:function(){return L},cF:function(){return A},cv:function(){return X},q2:function(){return q}});var r=t(66626),o=t(3796),i=t(54236),l=t(79904),a=t(68220),c=t(86466),u=t(46321),s=t(379),d=t(14548),f=t(24766),h=t(93245),p=t(36809),v=t(63411),m=t(27840),g=t(82549),Z=t(95501),b=t(63163),y=t(47305),x=t(75271),C=t(44794),w=t(21882),S=t(89253),_=t(65958),E=t(47483),T=t(87387),k=(0,p.X)({root:[b.l0.rowWithGap(8),b.l0.align.center],left:[b.l0.rowWithGap(2),b.l0.flex.grow(1)],right:[b.l0.width("50%")],rightInline:[b.l0.minWidth(24)],bar:[b.l0.height(6)]});function A(e){var n=e.total-e.used,t=Math.max(0,Math.min(100,Math.round(n/e.total*100)));return(0,o.BX)(h.G,{css:k.root,children:[(0,o.tZ)(h.G,{css:k.left,children:e.used===e.total?(0,o.tZ)(f.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,o.BX)(o.HY,{children:[(0,o.BX)(f.xv,{variant:"small",children:[t,"%"]}),(0,o.tZ)(f.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,o.tZ)(h.G,{css:e.inline?k.rightInline:k.right,children:(0,o.tZ)(u.J,{css:k.bar,tooltipHidden:!0,current:n,total:e.total,color:b.TV.blurpleDefault})})]})}var R=(0,p.X)({root:[b.l0.rowWithGap(4),b.l0.align.center],title:[{fontFamily:b.TV.fontWeightMedium},b.l0.color.foregroundDefault]});function I(e){return(0,o.BX)(h.G,{css:R.root,children:[e.icon,(0,o.tZ)(f.xv,{css:R.title,variant:"small",children:e.title})]})}var G=(0,p.X)({root:[b.l0.px(8),b.l0.py(6),b.l0.colWithGap(4),b.l0.height(26),b.l0.justify.center],content:[b.l0.colWithGap(0)],header:[b.l0.align.center,b.l0.rowWithGap(4),b.l0.color.foregroundDimmer],headerLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.growAndShrink(1)],proPill:[b.l0.borderRadius(4),b.l0.height(16)]}),D=(0,p.X)({root:[b.l0.px(8),b.l0.py(12),b.l0.colWithGap(4)]});function B(e){var n=e.modelName,t=e.selected;return(0,o.tZ)(h.G,{css:G.root,children:(0,o.tZ)(h.G,{css:G.content,children:(0,o.BX)(h.G,{css:G.header,children:[(0,o.tZ)(h.G,{css:G.headerLeft,children:(0,o.tZ)(I,{icon:(0,o.tZ)(v.Z,{size:12}),title:"Basic (".concat(n,")")})}),t?(0,o.tZ)(m.Z,{}):null]})})})}function P(e){var n=e.hasAccessToAdvancedModel,t=e.modelName,r=e.selected;return(0,o.tZ)(h.G,{css:G.root,children:(0,o.tZ)(h.G,{css:G.content,children:(0,o.BX)(h.G,{css:G.header,children:[(0,o.BX)(h.G,{css:G.headerLeft,children:[(0,o.tZ)(I,{icon:(0,o.tZ)(Z.Z,{size:12}),title:"Advanced (".concat(t,")")}),n?null:(0,o.tZ)(s.D,{css:G.proPill,text:T.we,color:b.TV.foregroundDimmer})]}),r?(0,o.tZ)(m.Z,{}):null]})})})}function X(e){var n=e.selected,t=e.quota,r=e.hasAccessToAdvancedModel;return(0,o.BX)(h.G,{css:D.root,children:[(0,o.BX)(h.G,{css:G.content,children:[(0,o.BX)(h.G,{css:G.header,children:[(0,o.tZ)(h.G,{css:G.headerLeft,children:(0,o.tZ)(I,{icon:(0,o.tZ)(v.Z,{size:12}),title:"Basic"})}),n?(0,o.tZ)(m.Z,{}):null]}),(0,o.tZ)(f.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,o.BX)(f.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",T.we]}):(0,o.tZ)(A,{used:t.used,total:t.total})]})}function L(e){var n=e.hasAccessToAdvancedModel,t=e.selected,r=e.quota,i=e.onUpgrade,a=(0,o.BX)(o.HY,{children:[(0,o.tZ)(h.G,{css:G.content,children:(0,o.BX)(h.G,{css:G.header,children:[(0,o.BX)(h.G,{css:G.headerLeft,children:[(0,o.tZ)(I,{icon:(0,o.tZ)(Z.Z,{size:12}),title:"Advanced"}),n?null:(0,o.tZ)(s.D,{css:G.proPill,text:T.we,color:b.TV.foregroundDimmer})]}),t?(0,o.tZ)(m.Z,{}):null]})}),(0,o.tZ)(f.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."})]});return n?(0,o.BX)(h.G,{css:D.root,children:[a,(0,o.tZ)(A,{used:r.used,total:r.total})]}):(0,o.BX)(h.G,{css:D.root,children:[a,i?(0,o.tZ)(l.zx,{size:"small",text:"Upgrade to Replit ".concat(T.we),colorway:"blurple",onClick:function(){return i()}}):(0,o.tZ)(h.G,{css:N.fakeUpgradeButton,children:(0,o.BX)(f.xv,{variant:"small",children:["Upgrade to Replit ",T.we]})})]})}var N=(0,p.X)({label:b.l0.visuallyHidden,button:[b.l0.reset.button,b.l0.rowWithGap(4),b.l0.cursor.pointer,b.l0.align.center,b.l0.px(4),b.l0.py(2),c.gU.nofill,b.l0.color.foregroundDimmest,b.l0.flex.row,{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":b.l0.color.foregroundDefault}],fakeUpgradeButton:[(0,a.ec)("blurple"),b.l0.p(4),b.l0.borderRadius(4),b.l0.center],heading:[b.l0.px(8),b.l0.py(4)],header:[b.l0.py(4),b.l0.px(8)],surface:[b.l0.borderRadius(4),b.l0.border({color:b.TV.outlineDefault}),b.l0.overflow("hidden"),b.l0.maxWidth(260),b.l0.minWidth(260)],item:[b.l0.cursor.pointer,c.gU.listItem]});function M(e){var n=(0,r._)(e.children,2),t=n[0],i=n[1];return(0,o.BX)(C.z,{css:N.button,children:[t?(0,x.cloneElement)(t,{size:12}):null,(0,o.tZ)(f.xv,{variant:"small",children:i}),(0,o.tZ)(g.Z,{className:"cevron",size:12})]})}var O=["basic","advanced"],U={basic:i.BY.BASIC,advanced:i.BY.ADVANCED};function q(e){var n=e.availableModelNames,t=n.basicModelName,r=n.advancedModelName;return(0,o.BX)(w.Ph,{selectedKey:e.selectedItem,onSelectionChange:function(n){switch(n){case"basic":case"advanced":e.onChange(n)}},children:[(0,o.tZ)(S._,{css:N.label,children:"Model type"}),(0,o.BX)(M,{children:[(0,o.tZ)(y.ZA,{model:U[e.selectedItem]}),"basic"===e.selectedItem?"Basic":"Advanced"]}),(0,o.tZ)(_.J,{children:(0,o.BX)(d.Tg,{css:N.surface,elevated:!0,children:[(0,o.tZ)(h.G,{css:N.heading,children:(0,o.tZ)(f.xv,{variant:"small",color:"dimmest",children:"Select a model"})}),(0,o.tZ)(E.wb,{"aria-label":"Model type",items:O.map(function(e){return{id:e}}),selectionMode:"single",children:function(n){var i;return(0,o.tZ)(E.m9,{css:N.item,textValue:n.id,children:"basic"===n.id?(0,o.tZ)(B,{modelName:t.readable,selected:"basic"===e.selectedItem}):(0,o.tZ)(P,{hasAccessToAdvancedModel:e.hasAccessToAdvancedModel,modelName:null!==(i=e.advancedChatEngineOverride)&&void 0!==i?i:r.readable,selected:"advanced"===e.selectedItem})})}})]})})]})}},25414:function(e,n,t){t.d(n,{Ds:function(){return d},he:function(){return s},sQ:function(){return u}});var r=t(66626),o=t(54129),i=t(19236),l=t(75271),a=t(25731),c=(0,l.createContext)((0,a.u)(null)),u=c.Provider;function s(){var e=(0,l.useContext)(c);return(0,o.Z)(e)}function d(){var e=(0,r._)((0,l.useState)(function(){return(0,a.u)(null)}),1)[0],n=(0,i.qs)();return(0,l.useEffect)(function(){var t=function(n){return e.set((null==n?void 0:n.insertGhostwriterChatCode)&&n.revertGhostwriterChatCode?{insert:n.insertGhostwriterChatCode,revert:n.revertGhostwriterChatCode}:null)};return t(n.current),n.subscribe(t)},[n,e]),e}},80902:function(e,n,t){t.d(n,{S:function(){return tU}});var r,o,i,l,a,c=t(66626),u=t(3796),s=t(29574),d=t(15185),f=t(93245),h=t(36809),p=t(63163),v=t(85995),m=t(54236),g=t(3102),Z=t(37121),b=t(22893),y=t(54300),x=(0,h.X)({errorBannerContainer:[p.l0.justify.center,p.l0.display.flex,p.l0.align.center,p.l0.flex.grow(1),p.l0.minHeight(32),p.l0.maxHeight(300),p.l0.overflow("auto")],errorBanner:[p.l0.minHeight("fit-content"),p.l0.p(8)]});function C(){return(0,u.tZ)(f.G,{css:x.errorBannerContainer,children:(0,u.tZ)(f.G,{css:x.errorBanner,children:(0,u.tZ)(b.E,{icon:(0,u.tZ)(y.Z,{}),colorway:"red",text:"Connection to AI Chat lost. Try refreshing the page."})})})}var w=t(19016),S=t(52551),_=new Map([["NONE",m.$h.MESSAGE_ACTION_UNKNOWN],["GENERATE",m.$h.GENERATE],["TRANSFORM",m.$h.TRANSFORM],["EXPLAIN",m.$h.EXPLAIN],["REPLIT_DOCS",m.$h.REPLIT_DOCS],["AGENT",m.$h.AGENT]]),E=new Map([["NONE","ask_ai"],["GENERATE","generate"],["TRANSFORM","modify"],["EXPLAIN","explain"],["REPLIT_DOCS","ask_replit"],["AGENT","agent"]]),T=new Map,k=!0,A=!1,R=void 0;try{for(var I,G=_[Symbol.iterator]();!(k=(I=G.next()).done);k=!0){var D=(0,c._)(I.value,2),B=D[0],P=D[1];T.set(P,B)}}catch(e){A=!0,R=e}finally{try{k||null==G.return||G.return()}finally{if(A)throw R}}var X=t(42965),L=t(67790),N=t(96949),M=t(52657),O=t(97687),U=t(11409),q=t(75271),V=t(66791),H=t(92674),F=t.n(H),W=t(72748),z=t(7391),j=t(79904),$=t(87387),K=(0,h.X)({surface:[p.l0.flex.growAndShrink(0),p.l0.borderRadius(8),p.l0.m(8),p.l0.position.relative,{marginTop:"auto"}],messageBoxContainer:[p.l0.p(8)],quotaLimitContainer:[p.l0.p(8),p.l0.colWithGap(8),p.l0.position.relative,{marginTop:"auto"}]});function Y(e){var n=e.text,t=e.type,r=(0,c._)((0,q.useState)(!1),2),o=r[0],i=r[1],l=(0,c._)((0,m.Ni)(),2)[1];return(0,u.BX)(f.G,{css:K.quotaLimitContainer,children:[(0,u.tZ)(b.E,{icon:(0,u.tZ)(y.Z,{}),colorway:"red",text:n}),"basic"===t?(0,u.tZ)(j.zx,{onClick:function(){return i(!0)},colorway:"blurple",text:"Upgrade to Replit ".concat($.we)}):(0,u.tZ)(j.zx,{onClick:function(){return l("basic")},colorway:"blurple",text:"Switch back to basic model"}),(0,u.tZ)(v.Z,{isOpen:o,onClose:function(){return i(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}var J=t(27387),Q=t(63257),ee=t(96583),en=t(17437);function et(e){var n,t,r,o=e.contents.contents;return(null==o?void 0:o.$kind)==="messageEventContents"&&null!==(r=null===(t=o.messageEventContents.extraActions)||void 0===t?void 0:null===(n=t.suggestedTemplates)||void 0===n?void 0:n.suggestedTemplates)&&void 0!==r?r:[]}function er(e){return e.error&&e.error.type!==m.lZ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null}var eo=t(82231),ei=t(67465),el=t(38775),ea=t(53250),ec=t(87915),eu=t(14548),es=t(77402),ed=(0,h.X)({root:[p.l0.borderRadius(4),p.l0.border({color:p.TV.outlineDimmest})],header:[p.l0.rowWithGap(4),p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function ef(e){var n=e.codeReference,t=e.onClick;return(0,u.BX)(eu.Tg,{css:ed.root,children:[(0,u.tZ)(f.G,{css:ed.header,children:(0,u.tZ)(j.zx,{css:ed.button,size:"small",variant:"nofill",iconLeft:(0,u.tZ)(ec.Z,{size:12,path:n.filePath}),iconRight:(0,u.tZ)(es.Z,{}),text:"".concat(n.filePath," ").concat(n.range.lineFrom,":").concat(n.range.lineTo),onClick:t})}),(0,u.tZ)(ea.Z,{lineNumbers:!0,lineNumbersStart:n.range.lineFrom,language:n.language,code:n.code,filePath:n.filePath})]})}function eh(e){if(!e)return null;var n=e.contents.contents,t={id:e.sender.id},r=function(e){var n;switch(null==e?void 0:null===(n=e.contents.contents)||void 0===n?void 0:n.$kind){case"messageEventContents":if(e.contents.contents.messageEventContents.intent===m.$h.DEBUG)break;return e.contents.contents.messageEventContents.codeReference;case"inlineActionEventContents":return e.contents.contents.inlineActionEventContents.codeReference;default:return null}}(e);return(null==n?void 0:n.$kind)==="messageEventContents"?{created:e.created,sender:t,contents:n.messageEventContents,codeReference:r}:(null==n?void 0:n.$kind)==="inlineActionEventContents"?{created:e.created,sender:t,contents:n.inlineActionEventContents,codeReference:r}:null}var ep=(0,h.X)({event:[p.l0.px(16),p.l0.py(8),p.l0.colWithGap(8)],header:[p.l0.rowWithGap(8),p.l0.align.center]}),ev=(0,q.memo)(function(e){var n,t=(0,m.Mi)(e.id,eh),r=(0,eo.UE)({eventId:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution});if(!t)return null;var o=t.sender;return(0,u.BX)(f.G,{css:ep.event,children:[(0,u.BX)(f.G,{css:ep.header,children:[(0,u.tZ)(ei.Y,{id:Number(o.id)}),(0,u.tZ)(el.EK,{textVariant:"small",textColor:"dimmest",date:t.created})]}),(0,u.tZ)(eo.M4,{id:e.id,markdownCodeComponent:r,state:m.he.COMPLETE}),(null===(n=t.codeReference)||void 0===n?void 0:n.code)?(0,u.tZ)(ef,{codeReference:t.codeReference,onClick:function(){var n,r,o=null===(n=t.codeReference)||void 0===n?void 0:n.filePath;e.openFile&&o&&e.openFile({path:o,line:null===(r=t.codeReference)||void 0===r?void 0:r.range.lineTo})}}):null]})}),em=t(68417),eg=t(47305),eZ=t(97420),eb=t(61663),ey=t(41733),ex=t(30509),eC=t(22510),ew=t(86466),eS=t(24766),e_=t(15323),eE=t(84042),eT=t(64888),ek=t(65958),eA=t(27840),eR=t(29737),eI=t(96751),eG=(0,Q._)(eg.HC.keys()),eD=(0,Q._)(eg.NK.keys());function eB(e){var n=(0,c._)((0,q.useState)(e.typeUsed),2),t=n[0],r=n[1],o=(0,c._)((0,q.useState)(e.modelUsed),2),i=o[0],l=o[1];return(0,u.BX)(eC.l0,{css:eX.form,onSubmit:function(n){n.preventDefault(),e.onRerun({model:i,type:t})},children:[(0,u.BX)(f.G,{css:eX.section,children:[(0,u.tZ)(f.G,{css:eX.header,children:(0,u.tZ)(eS.xv,{variant:"small",color:"dimmer",children:"Intent"})}),(0,u.tZ)(eE.Ee,{onChange:function(e){return r(Number(e))},children:eG.map(function(n){return(0,u.tZ)(eE.Y8,{value:n.toString(),children:(0,u.BX)(f.G,{css:eX.radioItemRow,children:[(0,u.BX)(f.G,{css:eX.radioItemText,children:[(0,u.tZ)(eg.Pr,{type:n,text:{variant:"small"}}),n===e.typeUsed?(0,u.tZ)(eS.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),t===n?(0,u.tZ)(eA.Z,{color:p.TV.accentPrimaryStronger}):null]})},n.toString())})})]}),(0,u.BX)(f.G,{css:eX.section,children:[(0,u.tZ)(f.G,{css:eX.header,children:(0,u.tZ)(eS.xv,{variant:"small",color:"dimmer",children:"Model"})}),(0,u.tZ)(eE.Ee,{onChange:function(e){return l(Number(e))},children:eD.map(function(n){return(0,u.tZ)(eE.Y8,{value:n.toString(),children:(0,u.BX)(f.G,{css:eX.radioItemRow,children:[(0,u.BX)(f.G,{css:eX.radioItemText,children:[(0,u.tZ)(eg.gg,{model:n,text:{variant:"small"}}),n===e.modelUsed?(0,u.tZ)(eS.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),i===n?(0,u.tZ)(eA.Z,{color:p.TV.accentPrimaryStronger}):null]})},n.toString())})})]}),(0,u.tZ)(f.G,{css:eX.formFooter,children:(0,u.tZ)(j.zx,{colorway:"primary",type:"submit",iconLeft:(0,u.tZ)(e_.Z,{}),text:"Rerun"})})]})}function eP(e){var n=(0,c._)((0,q.useState)(e.modelUsed),2),t=n[0],r=n[1],o=e.intentUsed;return(0,u.BX)(eC.l0,{css:eX.form,onSubmit:function(n){var r=e.getRerunContent(),i=T.get(o),l=t===m.BY.BASIC?"basic":"advanced";(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"message_reran",intent_type:E.get(i||"NONE"),model:l,user_model_selection:l,message_content:r,message_source:"chat_pane"}),n.preventDefault(),e.onRerun({model:t,intent:o})},children:[(0,u.BX)(f.G,{css:eX.section,children:[(0,u.tZ)(f.G,{css:eX.header,children:(0,u.tZ)(eS.xv,{id:"rerun-button-model-selector",variant:"small",color:"dimmer",children:"Model"})}),(0,u.tZ)(eE.Ee,{"aria-labelledby":"rerun-button-model-selector",onChange:function(e){return r(Number(e))},children:eD.map(function(n){return(0,u.tZ)(eE.Y8,{value:n.toString(),children:(0,u.BX)(f.G,{css:eX.radioItemRow,children:[(0,u.BX)(f.G,{css:eX.radioItemText,children:[(0,u.tZ)(eg.gg,{model:n,text:{variant:"small"}}),n===e.modelUsed?(0,u.tZ)(eS.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),t===n?(0,u.tZ)(eA.Z,{color:p.TV.accentPrimaryStronger}):null]})},n.toString())})})]}),(0,u.tZ)(f.G,{css:eX.formFooter,children:(0,u.tZ)(j.zx,{colorway:"primary",type:"submit",iconLeft:(0,u.tZ)(e_.Z,{}),text:"Rerun"})})]})}var eX=(0,h.X)({form:[p.l0.width(200)],formFooter:[p.l0.px(8),p.l0.py(8)],header:[p.l0.py(4),p.l0.px(8)],radioItemText:[p.l0.rowWithGap(4)],section:{'& [role="radiogroup"]':{"& > label":[p.l0.p(8),p.l0.py(4),ew.gU.listItem,p.l0.display.block],'& > [data-focused="true"]':{backgroundColor:ew.vb.interactiveBackgroundActive,borderColor:p.TV.accentPrimaryDefault}}},radioItemRow:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.justify.spaceBetween],rerunButton:[p.l0.color.foregroundDimmest,p.l0.backgroundColor.backgroundDefault],surface:[p.l0.borderRadius(4),p.l0.border({color:p.TV.outlineDefault}),p.l0.overflow("hidden")]}),eL=(0,q.createContext)(null),eN=eL.Provider;function eM(e){var n,t,r=(0,c._)((0,q.useState)(!1),2),o=r[0],i=r[1],l=(0,c._)((0,q.useState)(null),2),a=l[0],s=l[1],d=(0,c._)((0,q.useState)(null),2),f=d[0],h=d[1],p=(0,q.useContext)(eL),v=(0,m.Un)(),g=(0,eI.D)(a,f,{modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{padding:16}}]});return(0,u.BX)(eT.bF,{children:[(0,u.tZ)(j.zx,{size:"small",text:"Rerun",ref:s,onClick:function(){return i(function(e){return!e})},css:eX.rerunButton,iconLeft:(0,u.tZ)(e_.Z,{}),iconRight:(0,u.tZ)(eR.Z,{size:12,rotate:o?180:0}),disabled:!v}),(0,u.tZ)(ek.J,{isOpen:o,shouldCloseOnInteractOutside:function(e){var n;return n=[f,a],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,u.tZ)(eu.Tg,(0,ex._)((0,ey._)({css:eX.surface,innerRef:h,style:g.styles.popper},g.attributes.popper),{elevated:!0,children:"intentUsed"in e?(0,u.tZ)(eP,{onRerun:(n=(0,J._)(function(n){var t,r,o;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:if(i(!1),t=e.onRerun,r={intent:n.intent,model:n.model},!p)return[3,2];return[4,p()];case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return t.apply(e,[(r.fileContext=o,r)]),[2]}})}),function(e){return n.apply(this,arguments)}),modelUsed:e.modelUsed,intentUsed:e.intentUsed,getRerunContent:e.getRerunContent}):(0,u.tZ)(eB,{onRerun:(t=(0,J._)(function(n){var t,r,o;return(0,ee.Jh)(this,function(l){switch(l.label){case 0:if(i(!1),t=e.onRerun,r={type:n.type,model:n.model},!p)return[3,2];return[4,p()];case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return t.apply(e,[(r.fileContext=o,r)]),[2]}})}),function(e){return t.apply(this,arguments)}),modelUsed:e.modelUsed,typeUsed:e.typeUsed})}))})]})}var eO=t(91466),eU=t(22419),eq=t(39031),eV=t(24969),eH=(0,h.X)({containerCss:[p.l0.py(6),p.l0.px(8)],surface:[p.l0.borderRadius(4),p.l0.border({color:p.TV.outlineDefault}),p.l0.overflow("hidden"),p.l0.width(280)],headingText:[p.l0.color.foregroundDimmest,p.l0.fontWeight.normal,{fontStyle:"italic"}],modelContainer:[p.l0.justify.spaceBetween,p.l0.flex.row,p.l0.align.center,p.l0.pr(8)],modelLabel:[p.l0.py(6),p.l0.px(8),p.l0.rowWithGap(8),p.l0.align.center],button:[p.l0.color.foregroundDimmest,p.l0.backgroundColor.backgroundDefault],divider:[p.l0.backgroundColor.outlineDefault],sourceItem:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.px(8),p.l0.py(4),ew.gU.listItem],messageContextHeader:[p.l0.justify.spaceBetween,p.l0.flex.row,p.l0.align.center,p.l0.py(6),p.l0.px(8)],fileName:[p.l0.maxWidth("70%"),p.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],directory:[p.l0.color.foregroundDimmest,p.l0.flex.shrink(1),p.l0.flex.grow(0),p.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function eF(e){var n=e.model,t=e.openFile,r=e.sources,o=(0,c._)((0,q.useState)(!1),2),i=o[0],l=o[1],a=(0,c._)((0,q.useState)(null),2),s=a[0],d=a[1],h=(0,c._)((0,q.useState)(null),2),v=h[0],g=h[1],Z=r&&Array.from(new Set(r.map(function(e){return e.url}))).map(function(e){return r.find(function(n){return n.url===e})}).filter(function(e){return!!e}),b=function(e){if(e.overrideModelName)return e.overrideModelName;var n,t=eg.NK.get(e.type)+" model";return(null===(n=e.modelUsedForResponse)||void 0===n?void 0:n.readable)&&(t+=" (".concat(e.modelUsedForResponse.readable,")")),t}(n);function y(e){var n=e.replace(/^file:\/\/\//,""),t=n.match(/\/home\/runner\/[^/]+\/(.+)/);return t&&t[1]?t[1]:n}var x=(0,eI.D)(s,v,{modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{padding:16}}]});return(0,u.BX)(eT.bF,{children:[(0,u.tZ)(j.zx,{size:"small",ref:d,onClick:function(){return l(function(e){return!e})},text:"Context",css:eH.button,iconRight:(0,u.tZ)(eR.Z,{size:12,rotate:i?180:0})}),(0,u.tZ)(ek.J,{isOpen:i,shouldCloseOnInteractOutside:function(e){var n;return n=[v,s],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(l(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,u.tZ)(eu.Tg,(0,ex._)((0,ey._)({css:eH.surface,innerRef:g,style:x.styles.popper},x.attributes.popper),{elevated:!0,children:(0,u.BX)(f.G,{children:[(0,u.tZ)(f.G,{css:eH.containerCss,children:(0,u.tZ)(eS.xv,{variant:"small",children:"This message used:"})}),(0,u.tZ)(eO.R,{css:eH.divider}),(0,u.BX)(f.G,{css:eH.modelContainer,children:[(0,u.BX)(f.G,{css:eH.modelLabel,children:[(0,u.tZ)(eg.ZA,{model:n.type,size:12,color:p.TV.foregroundDimmest}),(0,u.tZ)(eS.xv,{css:eH.headingText,children:b})]}),(0,u.tZ)(eU.u,{tooltip:"This message was generated using a".concat(n.type===m.BY.ADVANCED?"n":""," ").concat(b),children:(0,u.tZ)(eq.Z,{color:p.TV.foregroundDimmest})})]}),(null==Z?void 0:Z.length)?(0,u.tZ)(eO.R,{css:eH.divider}):null,(null==Z?void 0:Z.length)?(0,u.BX)(f.G,{children:[(0,u.BX)(f.G,{css:eH.messageContextHeader,children:[(0,u.tZ)(eS.xv,{css:eH.headingText,children:"Message Context"}),(0,u.tZ)(eU.u,{tooltip:"This shows the files the AI read to get the context to respond to this message.",children:(0,u.tZ)(eq.Z,{color:p.TV.foregroundDimmest})})]}),Z.map(function(e){var n,r={fileName:(n=y(e.url).split("/")).pop(),directory:n.length>0?"".concat(n.join("/"),"/"):""},o=r.fileName,i=r.directory;return(0,u.BX)(f.G,{css:eH.sourceItem,onClick:function(){return function(e){if(e.startsWith("file:///")){var n=y(e);null==t||t({path:n})}else{var r=(0,eV.vt)(e);window.open(r,"_blank")}l(!1)}(e.url)},children:[(0,u.tZ)(ec.Z,{size:16,path:e.url}),(0,u.tZ)(eS.xv,{css:eH.fileName,children:o}),(0,u.tZ)(eS.xv,{css:eH.directory,children:i})]},e.id)})]}):null]})}))})]})}var eW=(0,h.X)({header:[p.l0.rowWithGap(8),p.l0.align.center]});function ez(e){var n=e.children,t=e.intent,r=e.showUpsell,o=e.date;return(0,u.BX)(f.G,{css:eW.header,children:[(0,u.tZ)(em.R,{advanced:!0,size:24,showUsername:!0}),r?(0,u.tZ)(eb.C,{}):null,(0,u.tZ)(el.EK,{textVariant:"small",textColor:"dimmest",date:o}),(null==t?void 0:t.kind)==="message"?(0,u.tZ)(eg.Dz,{intent:t.value,icon:{color:eZ.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==t?void 0:t.kind)==="inline"?(0,u.tZ)(eg.Pr,{type:t.value,icon:{color:eZ.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,n]})}function ej(e){var n=e.intent,t=e.model,r=e.getEvents,o=e.setActiveChild,i=e.eventId,l=e.sessionEventId,a=e.sources,c=e.openFile,s=(0,m.oV)(),d=(0,m.$q)(l);function f(e){s(i,e),d&&o({parentEventId:d.parentEventId,eventId:null})}return(0,u.BX)(u.HY,{children:[(0,u.tZ)(eF,{model:t,sources:a,openFile:c}),(null==n?void 0:n.kind)==="message"?(0,u.tZ)(eM,{modelUsed:t.type,intentUsed:null==n?void 0:n.value,getRerunContent:function(){return function(n){var t=r().filter(function(e){return e.id===n}),o=t.length>0?t[0]:null;if(o){var i,l=o.parentEventId,a=e.getEvents().filter(function(e){return e.id===l}),c=a.length>0?a[0]:null;if(c&&(null===(i=c.contents.contents)||void 0===i?void 0:i.$kind)==="messageEventContents")return c.contents.contents.messageEventContents.content}return null}(i)},onRerun:f}):null,(null==n?void 0:n.kind)==="inline"?(0,u.tZ)(eM,{modelUsed:t.type,typeUsed:n.value,onRerun:f}):null]})}function e$(e){switch(e.type){case m.lZ.MANUALLY_ABORTED:return(0,u.tZ)(b.E,{icon:(0,u.tZ)(eq.Z,{}),text:"Message was stopped"});case m.lZ.USAGE_LIMIT:return(0,u.tZ)(b.E,{icon:(0,u.tZ)(y.Z,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,u.tZ)(b.E,{icon:(0,u.tZ)(y.Z,{}),colorway:"red",text:"Something went wrong"})}}var eK=t(9602),eY=t(48155),eJ=t(30231),eQ=t(98924),e0=(0,h.X)({root:[p.l0.px(16),p.l0.py(8),p.l0.colWithGap(8)],header:[p.l0.rowWithGap(8),p.l0.align.center],footer:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween],footerRight:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.end,p.l0.flex.growAndShrink(1)],sourceButton:[p.l0.color.foregroundDimmest],eventArrows:[p.l0.rowWithGap(2),p.l0.align.center]});function e1(e){var n=e.children,t=e.headerProps,r=void 0===t?{showUpsell:!1,intent:null,date:new Date}:t,o=e.headerActions,i=e.footer,l=e.footerActions,a=(0,eQ._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,u.BX)(f.G,(0,ex._)((0,ey._)({css:e0.root},a),{children:[(0,u.tZ)(ez,(0,ex._)((0,ey._)({},r),{children:o})),n,i||l?(0,u.BX)(f.G,{css:e0.footer,children:[(0,u.tZ)(f.G,{children:i}),(0,u.tZ)(f.G,{css:e0.footerRight,children:l})]}):null]}))}var e2=(0,h.X)({event:[p.l0.px(16),p.l0.py(8),p.l0.colWithGap(8)],header:[p.l0.rowWithGap(8),p.l0.align.center],footer:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween],footerRight:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.end,p.l0.flex.growAndShrink(1)],sourceButton:[p.l0.color.foregroundDimmest],eventArrows:[p.l0.rowWithGap(2),p.l0.align.center]});function e5(e){if(!e)return null;var n=e.contents.contents,t={type:m.BY.MODEL_TYPE_UNKNOWN,overrideModelName:"",modelUsedForResponse:{readable:"",qualified:""}},r=null,o=null,i=et(e);(null==n?void 0:n.$kind)==="messageEventContents"?(r={value:n.messageEventContents.intent,kind:"message"},t=n.messageEventContents.usedModelSelector,o=n.messageEventContents.sources):(null==n?void 0:n.$kind)==="inlineActionEventContents"&&(r={value:n.inlineActionEventContents.messageType,kind:"inline"},t=n.inlineActionEventContents.usedModelSelector);var l=er(e),a=!!((null==n?void 0:n.$kind)==="messageEventContents"&&n.messageEventContents.intent===m.$h.DEBUG);return{id:e.id,created:e.created,state:e.state,intent:r,error:l,usedModelSelector:t,sources:o,isDebugMessage:a,suggestedTemplates:i}}var e7=(0,q.memo)(function(e){var n=(0,m.$q)(e.id),t=(0,eo.UE)({eventId:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution}),r=(0,m.Mi)(e.id,e5);if(!r)return null;var o=r.state===m.he.COMPLETE;return(0,u.tZ)(e1,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:r.created,intent:r.intent},headerActions:(0,u.tZ)(ej,{intent:r.intent,model:r.usedModelSelector,getEvents:e.getEvents,setActiveChild:e.setActiveChild,eventId:r.id,sessionEventId:e.id,sources:r.sources,openFile:e.openFile}),footer:o&&r.error?(0,u.tZ)(e$,{type:r.error}):null,footerActions:o&&n?(0,u.tZ)(e3,{eventIds:n.eventIds,index:n.index,onClick:function(t){return e.setActiveChild({parentEventId:n.parentEventId,eventId:t})}}):null,children:(0,u.tZ)(eo.M4,{id:e.id,markdownCodeComponent:r.isDebugMessage?void 0:t,state:r.state,disableAnchorTags:!!r.suggestedTemplates.length})})}),e3=(0,q.memo)(function(e){var n=e.eventIds,t=e.index,r=e.onClick,o=n.length;return o<2?null:(0,u.BX)(f.G,{css:e2.eventArrows,children:[(0,u.tZ)(eK.hU,{onClick:function(){r(n[t>0?t-1:o-1])},alt:"Previous",tooltipBehavior:"hidden",children:(0,u.tZ)(eY.Z,{})}),(0,u.BX)(eS.xv,{variant:"small",color:"dimmest",children:[t+1,"/",o]}),(0,u.tZ)(eK.hU,{onClick:function(){r(n[t<o-1?t+1:0])},alt:"Next",tooltipBehavior:"hidden",children:(0,u.tZ)(eJ.Z,{})})]})}),e6=t(31417),e4=t(98514),e8=t(23979),e9=t(93632),ne=t(39819),nn=t(78371),nt=t(13502),nr=t(16642),no=t(1567),ni=t(40703),nl=t(67827),na=t(24200),nc=t(28670),nu=t(6829),ns=t(91620).lW;function nd(e){if(!e)return null;var n=e.created,t=e.sender,r=e.contents.contents;return(null==r?void 0:r.$kind)!=="localShellExecutionEventContents"?null:{created:n,sender:t,contents:r.localShellExecutionEventContents}}var nf=(0,h.X)({event:[p.l0.px(16),p.l0.py(8),p.l0.colWithGap(8)],header:[p.l0.rowWithGap(8),p.l0.align.center],iconLabel:[p.l0.rowWithGap(4),p.l0.align.center]}),nh=(0,q.memo)(function(e){var n=(0,m.Mi)(e.id,nd);if(!n)return null;var t=n.sender,r=n.contents,o=n.created;return(0,u.BX)(f.G,{css:nf.event,children:[(0,u.BX)(f.G,{css:nf.header,children:[(0,u.tZ)(ei.Y,{id:Number(t.id)}),(0,u.tZ)(el.EK,{textVariant:"small",textColor:"dimmest",date:o}),(0,u.BX)(f.G,{css:nf.iconLabel,children:[(0,u.tZ)(e4.Z,{color:p.TV.foregroundDimmest,size:12}),(0,u.tZ)(eS.xv,{color:"dimmest",variant:"small",children:"Shell Execution"})]})]}),(0,u.tZ)(nZ,{channelName:r.channelName,command:r.command,result:r.result,executed:r.executed,exitCode:r.exitCode,onExecutionResult:function(n){e.onEndLocalShellExecution((0,ey._)({eventId:e.id},n))},openFile:e.openFile,openWebview:e.openWebview,listFiles:e.listFiles,isLastEvent:e.isLastEvent})]})});(r=o||(o={})).LOADING="LOADING",r.START_EXECUTING_LOCALLY="START_EXECUTING_LOCALLY",r.EXECUTING_LOCALLY="EXECUTING_LOCALLY",r.FINISHED_EXECUTING_LOCALLY="FINISHED_EXECUTING_LOCALLY",r.RECONNECTING_TO_LOCAL_EXECUTION="RECONNECTING_TO_LOCAL_EXECUTION",r.HAS_STORED_RESULT="HAS_STORED_RESULT";var np=(0,h.X)({headerWrapper:[p.l0.borderRadius(4,4,0,0),p.l0.border({direction:"top",color:p.TV.outlineDimmest}),p.l0.border({direction:"x",color:p.TV.outlineDimmest}),p.l0.p(4),p.l0.backgroundColor.backgroundDefault,p.l0.color.foregroundDimmer,p.l0.rowWithGap(4),p.l0.align.center,p.l0.justify.spaceBetween],headerLeft:[p.l0.flex.growAndShrink(1),p.l0.align.center,p.l0.rowWithGap(8)],headerRight:[p.l0.align.center,p.l0.pr(4)],headerCode:[p.l0.font.code,p.l0.display.inline,p.l0.fontSize(12),p.l0.truncate],terminalWrapper:[p.l0.position.relative,p.l0.borderRadius(0,0,4,4),p.l0.border({color:p.TV.outlineDimmest}),p.l0.overflow("hidden")],searchWrapper:[{gridRow:1,gridColumn:1,position:"sticky",right:2,height:30,margin:"2px 0 0 auto",zIndex:4}]}),nv="\x1b[?25l";function nm(e){var n=e.step,t=e.exitCode,r=0!==t;switch(n){case"LOADING":return null;case"START_EXECUTING_LOCALLY":case"EXECUTING_LOCALLY":case"RECONNECTING_TO_LOCAL_EXECUTION":return(0,u.tZ)(eU.u,{tooltip:"Running...",children:(0,u.tZ)(ne.Z,{color:p.TV.accentPositiveDefault})});case"FINISHED_EXECUTING_LOCALLY":case"HAS_STORED_RESULT":return(0,u.tZ)(eU.u,{tooltip:r?"Exit code: ".concat(t):"Finished",children:r?(0,u.tZ)(y.Z,{}):(0,u.tZ)(eA.Z,{})});default:(0,V.Z)(n)}}function ng(e){var n=e.step,t=e.exitCode,r=e.command,o=e.presence;return(0,u.BX)(f.G,{css:np.headerWrapper,children:[(0,u.BX)(f.G,{css:np.headerLeft,children:[(0,u.tZ)(nm,{step:n,exitCode:t}),(0,u.BX)("code",{css:np.headerCode,children:["$ ",r]})]}),o.length?(0,u.tZ)(f.G,{css:np.headerRight,children:o.map(function(e){return(0,u.tZ)(nc.Z,{user:e,size:16},e.id)})}):null]})}function nZ(e){var n,t,r=e.channelName,o=e.command,i=e.result,l=e.executed,a=e.exitCode,s=e.onExecutionResult,d=e.openFile,h=e.listFiles,p=e.openWebview,v=e.isLastEvent,m=(0,c._)((0,q.useState)("LOADING"),2),g=m[0],Z=m[1],b=(0,M.Z)(g),y=(0,q.useId)(),x=(0,nu.x)(),C=(0,M.Z)(x),w=(0,na.aG)(),S=(0,c._)((0,q.useState)([]),2),_=S[0],E=S[1],T=(0,M.Z)(_),k=(0,q.useRef)(null),A=(0,c._)((0,q.useState)(null),2),R=A[0],I=A[1],G=(0,c._)((0,q.useState)(!1),2),D=G[0],B=G[1],P=(0,c._)((0,q.useState)(""),2),X=P[0],L=P[1],N=(0,M.Z)(s),O=(0,q.useRef)(""),U=(0,e8.fB)({maxHeight:300,openFile:d,listFiles:h,openWebview:p}),V=U.visibleHeight,H=U.bufferHeight,F=U.wrapperResizeRef,W=U.xterm,z=U.xtermRef,j=(0,nn.av)().onContextMenu,$=(0,nt.j)({xterm:W,openShellSearch:function(e){B(!0),L(e)}}),K=(0,nl.U)(function(e){var n;return n=(0,J._)(function(n){var t,o,i,l,a,u,s,d,f;return(0,ee.Jh)(this,function(h){switch(h.label){case 0:return[4,e.shellExec.readBuffer.subscribe({id:r})];case 1:t=c._.apply(void 0,[h.sent(),1])[0],o=new Uint8Array([]),i=!1,l=!1,h.label=2;case 2:h.trys.push([2,7,8,13]),u=(0,e6._)(t),h.label=3;case 3:return[4,u.next()];case 4:if(!(i=!(s=h.sent()).done))return[3,6];if(!(d=s.value).ok)return N.current({result:"",exitCode:-1}),[3,6];"output"===d.payload.$kind&&(o=ns.concat([o,d.payload.output])),"finished"===d.payload.$kind&&(N.current({result:o.toString(),exitCode:n.exitCode}),e.shellExec.cleanStoredState.rpc({id:r})),h.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return f=h.sent(),l=!0,a=f,[3,13];case 8:if(h.trys.push([8,,11,12]),!(i&&null!=u.return))return[3,10];return[4,u.return()];case 9:h.sent(),h.label=10;case 10:return[3,12];case 11:if(l)throw a;return[7];case 12:return[7];case 13:return[2]}})}),function(e){return n.apply(this,arguments)}},[r,N]);(0,q.useEffect)(function(){if(W){if(l&&"LOADING"===b.current){Z("HAS_STORED_RESULT");return}if(!l&&"LOADING"===b.current){Z("START_EXECUTING_LOCALLY");return}}},[l,W,b]);var Y=(0,nl.U)(function(e){var n;return n=(0,J._)(function(n){return(0,ee.Jh)(this,function(t){return x&&e.shellExec.resize.rpc({id:r,userId:x.id,processViewId:y,size:n}),[2]})}),function(e){return n.apply(this,arguments)}},[r,x,y]);(0,ni.C)((n=(0,J._)(function(e,n){var t,o,i,l,a,u,s,d,f,h,p,v,m;return(0,ee.Jh)(this,function(b){switch(b.label){case 0:if(t=n.addCleanup,!("RECONNECTING_TO_LOCAL_EXECUTION"===g||"START_EXECUTING_LOCALLY"===g)||!W||!R||!x)return[2];return o="RECONNECTING_TO_LOCAL_EXECUTION"===g,Z("EXECUTING_LOCALLY"),[4,e.shellExec.connect.stream({id:r,processViewId:y,userId:x.id})];case 1:l=(i=c._.apply(void 0,[b.sent(),3]))[0],a=i[1],u=i[2],t(u),k.current=l,null==Y||Y(W.getSize()),o&&W.clear(),s=!1,d=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),h=(0,e6._)(a),b.label=3;case 3:return[4,h.next()];case 4:if(!(s=!(p=b.sent()).done))return[3,6];if(!(v=p.value).ok){if("UNEXPECTED_DISCONNECT"===v.payload.code)return Z("RECONNECTING_TO_LOCAL_EXECUTION"),[3,6];if("NO_PROCESS_MATCHING_ID"===v.payload.code||"PROCESS_IS_NOT_RUNNING"===v.payload.code)return W.clear(),W.write(nv),Z("FINISHED_EXECUTING_LOCALLY"),N.current({result:"",exitCode:-1}),[3,6];throw Error("[".concat(v.payload.code,"]: ").concat(v.payload.message))}v.ok&&"output"===v.payload.$kind&&R(v.payload.output),b.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return m=b.sent(),d=!0,f=m,[3,13];case 8:if(b.trys.push([8,,11,12]),!(s&&null!=h.return))return[3,10];return[4,h.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[W,R,g,r,x,Y,y,N]),(0,ni.C)((t=(0,J._)(function(e,n){var t,o,i,l,a,u,s,d,f,h,p,v,m;return(0,ee.Jh)(this,function(g){switch(g.label){case 0:if(t=n.addCleanup,!R||!K)return[2];return[4,e.shellExec.monitor.subscribe({id:r})];case 1:i=(o=c._.apply(void 0,[g.sent(),2]))[0],l=o[1],t(l),a=!1,u=!1,g.label=2;case 2:g.trys.push([2,9,10,15]),d=(0,e6._)(i),g.label=3;case 3:return[4,d.next()];case 4:if(!(a=!(f=g.sent()).done))return[3,8];if(!(h=f.value).ok){if("NO_PROCESS_MATCHING_ID"===h.payload.code)return[3,7];if("UNEXPECTED_DISCONNECT"===h.payload.code)return[3,8];throw Error("[".concat(h.payload.code,"]: ").concat(h.payload.message))}if("NotStarted"!==(p=h.payload).state&&E(Object.keys(null!==(v=p.userIdsToProcessViewIds)&&void 0!==v?v:{}).map(function(e){return parseInt(e,10)})),!(p.state!==O.current))return[3,7];if("Finished"!==p.state)return[3,6];return Z("FINISHED_EXECUTING_LOCALLY"),[4,K({exitCode:p.exitCode})];case 5:g.sent(),R(nv),l(),g.label=6;case 6:O.current=p.state,g.label=7;case 7:return a=!1,[3,3];case 8:return[3,15];case 9:return m=g.sent(),u=!0,s=m,[3,15];case 10:if(g.trys.push([10,,13,14]),!(a&&null!=d.return))return[3,12];return[4,d.return()];case 11:g.sent(),g.label=12;case 12:return[3,14];case 13:if(u)throw s;return[7];case 14:return[7];case 15:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[R,r,K,O]),(0,ni.C)(function(e){return function(){var n="EXECUTING_LOCALLY"===b.current,t=1===T.current.length;n&&t&&(null==K||K({exitCode:-1})),void 0!==C.current&&e.shellExec.disconnect.rpc({id:r,processViewId:y,userId:C.current.id})}},[b,K,C,r,y,T]),(0,q.useEffect)(function(){v||"EXECUTING_LOCALLY"!==b.current||(Z("FINISHED_EXECUTING_LOCALLY"),null==K||K({exitCode:-1}))},[v,b,K]),(0,q.useEffect)(function(){"HAS_STORED_RESULT"===g&&W&&(W.write(i),W.write(nv))},[W,g,i,o]);var Q=(0,q.useCallback)(function(e){return I(function(){return e}),function(){}},[]),en=(0,q.useMemo)(function(){return _.map(function(e){return w.find(function(n){return n.id===e})}).filter(Boolean)},[_,w]);return(0,u.BX)(f.G,{children:[(0,u.tZ)(ng,{step:g,exitCode:a,command:o,presence:en}),(0,u.BX)(f.G,{css:np.terminalWrapper,style:{height:V},children:["LOADING"===g?(0,u.tZ)(e9.Z,{}):null,(0,u.BX)(e8.VU,{xterm:W,wrapperResizeRef:F,bufferHeight:H,onInput:function(e){if(!k.current)return!1;var n=new Uint8Array(ns.from(e));k.current.push({$kind:"stdin",stdin:n})},onMessage:Q,onResizeTerminal:function(e){null==Y||Y(e)},onKeyDown:function(e){"f"===e.key&&(0,no.jh)(e)&&(B(!0),e.preventDefault())},children:[W&&D?(0,u.tZ)(f.G,{css:np.searchWrapper,children:(0,u.tZ)(nr.R,{searchValue:X,setSearchValue:L,findPrevious:W.findPrevious,findNext:W.findNext,exit:function(){return B(!1)}})}):null,(0,u.tZ)(e8.UB,{xtermRef:z,visibleHeight:V,maxHeight:300,onContextMenu:function(e){return j(e,{command:$})}})]})]})]})}var nb=(0,h.X)({container:[p.l0.colWithGap(12)],list:[p.l0.colWithGap(8),{"& > *":{maxWidth:"320px"}}]});function ny(e){var n=e.suggestedTemplates,t=e.suggestedTemplateCard;if(0===n.length)return null;var r=n[0];return(0,u.BX)(f.G,{css:nb.container,children:[(0,u.tZ)(eO.R,{}),(0,u.tZ)(eS.xv,{variant:"subheadDefault",children:"Here's your Repl"}),(0,u.tZ)(f.G,{css:nb.list,children:t({template:r})})]})}var nx=(0,h.X)({header:[p.l0.rowWithGap(8),p.l0.align.center]});function nC(e){var n,t;return(0,u.BX)(f.G,{css:nx.header,children:[(0,u.tZ)(em.R,{advanced:!0,size:24,showUsername:!0}),e.showUpsell?(0,u.tZ)(eb.C,{}):null,(0,u.tZ)(el.EK,{textVariant:"small",textColor:"dimmest",date:e.date}),(null===(n=e.intent)||void 0===n?void 0:n.kind)==="message"?(0,u.tZ)(eg.Dz,{intent:e.intent.value,icon:{color:eZ.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null===(t=e.intent)||void 0===t?void 0:t.kind)==="inline"?(0,u.tZ)(eg.Pr,{type:e.intent.value,icon:{color:eZ.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(0,u.tZ)(eg.gg,{model:e.model,icon:{color:eZ.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}})]})}function nw(e){if(!e)return null;var n=e.contents.contents,t={type:m.BY.MODEL_TYPE_UNKNOWN,overrideModelName:"",modelUsedForResponse:{readable:"",qualified:""}},r=null,o=et(e);(null==n?void 0:n.$kind)==="messageEventContents"&&(r={value:n.messageEventContents.intent,kind:"message"},t=n.messageEventContents.usedModelSelector);var i=er(e);return{id:e.id,created:e.created,state:e.state,intent:r,error:i,model:t,suggestedTemplates:o}}var nS=(0,h.X)({event:[p.l0.px(16),p.l0.py(8),p.l0.colWithGap(8)]}),n_=(0,q.memo)(function(e){var n,t=(0,m.Mi)(e.id,nw);return t?(0,u.BX)(f.G,{css:nS.event,dataCy:"message-from-ai",children:[(0,u.tZ)(nC,{date:t.created,intent:t.intent,model:t.model.type}),(0,u.tZ)(eo.M4,{id:e.id,disableAnchorTags:!!(null===(n=t.suggestedTemplates)||void 0===n?void 0:n.length),state:t.state}),t.state===m.he.COMPLETE?(0,u.BX)(u.HY,{children:[void 0!==t.suggestedTemplates&&e.suggestedTemplateCard?(0,u.tZ)(ny,{suggestedTemplates:t.suggestedTemplates.map(function(e){return{title:e.name,description:e.description,iconUrl:e.icon,ownerUsername:e.ownerUsername,slug:e.slug}}),suggestedTemplateCard:e.suggestedTemplateCard}):null,t.error?(0,u.tZ)(e$,{type:t.error}):null]}):null]}):null}),nE=t(27030);function nT(e){if((null==e?void 0:null===(n=e.contents.contents)||void 0===n?void 0:n.$kind)!=="benchmarkConclusion")return null;var n,t=e.contents.contents.benchmarkConclusion;return{completionReason:t.completionReason,exception:t.exception,steps:t.steps}}function nk(e){var n=(0,nE.k)(),t=(0,m.Mi)(e.id,nT);return n&&t?(0,u.BX)(f.G,{children:[(0,u.tZ)(f.G,{children:(0,u.tZ)(eS.xv,{variant:"headerDefault",children:"Benchmark Conclusion:"})}),(0,u.tZ)(f.G,{children:(0,u.BX)(eS.xv,{color:"dimmer",children:["Reason: ",t.completionReason]})}),(0,u.tZ)(f.G,{children:(0,u.BX)(eS.xv,{color:"dimmer",children:["Exception: ",t.exception]})}),(0,u.tZ)(f.G,{children:(0,u.BX)(eS.xv,{color:"dimmer",children:["Steps: ",t.steps]})})]}):null}var nA=t(10578),nR=t(42516),nI=t(22192),nG=t(95281),nD=t(75710),nB=t(59140),nP=(0,nI.$)(["transform","opacity"]),nX=nP.cssVars,nL=nP.styleTokens,nN=(0,h.X)({root:[p.l0.position.relative,{height:0}],container:[p.l0.position.absolute,p.l0.bottom(0),p.l0.left("50%"),{transitionProperty:["opacity","transform"],transitionTimingFunction:nD.H.timingFunction,transitionDuration:nD.H.duration,opacity:nL.opacity,transform:nL.transform}],button:[p.l0.reset.button,ew.gU.filledAndOutlined,p.l0.p(4),p.l0.rowWithGap(4),p.l0.align.center,p.l0.borderRadius(16),p.l0.shadow(1)]}),nM={hidden:(i={},(0,nR._)(i,nX.opacity,"0"),(0,nR._)(i,nX.transform,"translate(-50%, ".concat(p.TV.space4,")")),i),visible:(l={},(0,nR._)(l,nX.opacity,"1"),(0,nR._)(l,nX.transform,"translate(-50%, calc(-1 * ".concat(p.TV.space4,"))")),l)};function nO(e){var n=e.visible,t=e.onClick,r=(0,q.useRef)(null);return(0,nG.j)(r,n,function(e){return e?nM.visible:nM.hidden}),(0,u.tZ)(f.G,{innerRef:r,css:nN.root,children:(0,u.tZ)(f.G,{css:nN.container,children:(0,u.BX)(eu.Tg,{css:nN.button,elevated:!0,tag:"button",onClick:t,children:[(0,u.tZ)(nB.Z,{size:12}),(0,u.tZ)(eS.xv,{variant:"small",children:"Scroll to latest"})]})})})}var nU=t(25731),nq=t(62466),nV=t(90831),nH=t(64206),nF=t(34763),nW=function(){var e=(0,nF.r)(),n=e.showAiUpsell,t=e.refetch,r=(0,c._)((0,q.useState)(!1),2),o=r[0],i=r[1];return n?(0,u.BX)(u.HY,{children:[(0,u.tZ)(f.G,{tag:"button",css:nz.bannerWrapper,onClick:function(){return i(!0)},children:(0,u.tZ)(b.E,{icon:(0,u.tZ)(nH.Z,{}),colorway:"yellow",text:"Youre using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:nz.banner})}),(0,u.tZ)(v.Z,{isOpen:o,onClose:function(){return i(!1)},onPurchaseComplete:function(){return t()},type:"purchase",contextualUpsell:(0,u.BX)(u.HY,{children:[(0,u.tZ)(eS.xv,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,u.tZ)(eS.xv,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}}})]}):null},nz=(0,h.X)({bannerWrapper:[p.l0.cursor.pointer,p.l0.textAlign.left],banner:[p.l0.borderRadius(0),p.l0.minHeight(46)]}),nj=t(86763),n$=t.n(nj),nK=(0,h.X)({events:[p.l0.colWithGap(0),p.l0.overflowY("auto"),p.l0.flex.growAndShrink(1),p.l0.width("100%"),p.l0.py(8),p.l0.position.relative],upsellWrapper:[p.l0.position.sticky],loading:[p.l0.center,p.l0.height("100%")]}),nY=n$()(function(e){if(!e||!e.scrollTop)return!1;var n=e.scrollTop,t=e.scrollHeight;return n+e.clientHeight+300>=t},100);function nJ(e){var n,t,r,o,i,l,a,s,d,h,p,v=(0,m.Q4)(e.sessionId),g=(t=(n={sessionId:(null==v?void 0:v.id)||null,loading:e.loading}).sessionId,r=n.loading,o=(0,c._)((0,q.useState)(function(){return(0,nU.u)(!1)}),1)[0],l=(i=(0,c._)((0,q.useState)(null),2))[0],a=i[1],d=(s=(0,c._)((0,q.useState)(null),2))[0],h=s[1],(0,q.useEffect)(function(){if(l&&d)return(0,nq.j)(l,function(){return o.set(!1),function(){o.set(!0)}},{root:d,rootMargin:"100px"})},[o,l,d]),p=(0,q.useRef)(new Map),(0,q.useEffect)(function(){if(d&&l&&t&&!r){var e=p.current.get(t);void 0===e?(0,nV.Z)(l,{behavior:"instant",boundary:d}):d.scrollTop=e}},[d,l,t,r]),{showButton:o,anchorRef:a,scrollRef:h,scrollParent:d,onClick:function(){l&&d&&(0,nV.Z)(l,{boundary:d})},onScroll:(0,q.useCallback)(function(e){if(t){var n=e.currentTarget.scrollTop;0!==n&&p.current.set(t,n)}},[t])});return(0,u.BX)(u.HY,{children:[e.inWorkspace&&(0,u.tZ)(f.G,{css:nK.upsellWrapper,children:(0,u.tZ)(nW,{})}),(0,u.BX)(f.G,{css:nK.events,innerRef:g.scrollRef,onScroll:g.onScroll,onWheel:function(n){if(n.deltaY<0&&e.shouldAutoscrollRef.current){e.shouldAutoscrollRef.current=!1;return}n.deltaY>0&&!e.shouldAutoscrollRef.current&&nY(n.currentTarget)&&(e.shouldAutoscrollRef.current=!0)},onMouseDown:function(){e.shouldAutoscrollRef.current&&(e.shouldAutoscrollRef.current=!1)},onMouseUp:function(n){!e.shouldAutoscrollRef.current&&nY(n.currentTarget)&&(e.shouldAutoscrollRef.current=!0)},onTouchStart:function(){e.shouldAutoscrollRef.current&&(e.shouldAutoscrollRef.current=!1)},children:[e.loading?(0,u.tZ)(f.G,{css:nK.loading,children:(0,u.tZ)(nA.Z,{size:32})}):null,e.children,(0,u.tZ)(f.G,{innerRef:g.anchorRef}),e.lastEventId?(0,u.tZ)(nQ,{enabledRef:e.shouldAutoscrollRef,lastEventId:e.lastEventId,scrollParent:g.scrollParent}):null]}),(0,u.tZ)(nO,{visible:g.showButton,onClick:function(){g.onClick(),e.shouldAutoscrollRef.current=!0}})]})}function nQ(e){var n=e.lastEventId,t=e.enabledRef,r=e.scrollParent,o=(0,q.useRef)(null),i=(0,m.SH)(n);return(0,q.useEffect)(function(){var e=function(){l&&cancelAnimationFrame(l)},n=function(){t.current&&(e(),l=requestAnimationFrame(function(){return requestAnimationFrame(function(){o.current&&(0,nV.Z)(o.current,{boundary:r})})}))};if(r){var l=null;n();var a=i.subscribe(n);return function(){a(),e()}}},[i,t,n,r]),(0,u.tZ)("div",{ref:o})}var n0=t(14118),n1=t(37475),n2=t(25414);function n5(e){var n,t,r=e.workspace,o=e.sessionId,i=e.parentToActiveChild,l=e.replCreationSession,a=e.setActiveChild,c=e.onStartLocalShellExecution,s=e.onEndLocalShellExecution,d=e.getFileContext,f=e.shouldAutoscrollRef,h=(0,m.Q4)(o),p=(0,n1.iM)(),v=(0,n0.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),g=p&&v,Z=(0,m.nW)(null!==(n=null==h?void 0:h.id)&&void 0!==n?n:null,i),b=Z.chatEvents,y=Z.loading,x=Z.getEvents,C=b.length?b[b.length-1].id:void 0;return(0,u.tZ)(n2.sQ,{value:null!==(t=null==r?void 0:r.codeInsertObservable)&&void 0!==t?t:(0,nU.u)(null),children:(0,u.tZ)(nJ,{sessionId:o,lastEventId:b.length?b[b.length-1].id:void 0,loading:y&&0===b.length,shouldAutoscrollRef:f,inWorkspace:!!r,children:b.map(function(e){var n=e.id;switch(e.view){case"userMessage":return(0,u.tZ)(ev,{id:n,openFile:null==r?void 0:r.openFile,onStartLocalShellExecution:c},n);case"aiMessage":if(!r)return(0,u.tZ)(n_,{id:n,suggestedTemplateCard:null==l?void 0:l.suggestedTemplateCard,isLastEvent:n===C},n);return(0,u.tZ)(eN,{value:null!=d?d:null,children:(0,u.tZ)(e7,{id:n,getEvents:x,setActiveChild:a,openFile:r.openFile,openWebview:r.openWebview,listFiles:r.listFiles,addSecretEntries:r.addSecretEntries,onStartLocalShellExecution:c,isLastEvent:n===C})},n);case"localShellExecution":return g&&(null==r?void 0:r.openFile)&&(null==r?void 0:r.listFiles)?(0,u.tZ)(nh,{id:n,openFile:r.openFile,openWebview:r.openWebview,listFiles:r.listFiles,onEndLocalShellExecution:s,isLastEvent:n===C},n):null;case"benchmarkConclusion":return(0,u.tZ)(nk,{id:n},n);default:return null}})})})}var n7=t(41960),n3=t(63062),n6=t(17695),n4=t(82549),n8=t(71137),n9=t(30043),te=t(88504),tn=t(84238),tt=t(44935),tr=(0,nI.$)(["fontSize","padding","border"]),to=tr.cssVars,ti=tr.styleTokens,tl=(0,h.X)({root:[p.l0.rowWithGap(4),p.l0.center,p.l0.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:ti.border,fontSize:ti.fontSize,padding:ti.padding},p.l0.flex.growAndShrink(1)]});function ta(e){var n,t,r=(0,c._)((0,q.useState)(e.initialValue),2),o=r[0],i=r[1],l=(0,M.Z)(e.onCancel),a=(0,tn.Z)(function(){return l.current()},[]),s=(0,q.useRef)(null);(0,q.useEffect)(function(){var e;null===(e=s.current)||void 0===e||e.select()},[]);var d=e.compact?(n={},(0,nR._)(n,to.border,"0 none"),(0,nR._)(n,to.fontSize,p.TV.fontSizeSmall),(0,nR._)(n,to.padding,"0 ".concat(p.TV.space2)),n):(t={},(0,nR._)(t,to.padding,"".concat(p.TV.space8)),(0,nR._)(t,to.fontSize,p.TV.fontSizeDefault),t);return(0,u.tZ)(f.G,{style:d,innerRef:a,css:tl.root,tag:"form",onSubmit:function(n){n.preventDefault(),o&&e.onSubmit(o)},children:(0,u.tZ)(tt.II,{placeholder:"Name this chat",ref:s,css:tl.input,value:o,onChange:function(e){return i(e.currentTarget.value)},onKeyDown:function(n){"Escape"===n.key&&e.onCancel()}})})}function tc(e){var n=e.text,t=(0,eQ._)(e,["text"]),r=(0,q.useRef)(null),o=(0,q.useRef)(n);return(0,q.useEffect)(function(){if(o.current!==n){var e=n.length;!function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var i=r.current;i&&(i.textContent=n.slice(0,o),o!==e&&t(o+1))})}()}},[n]),(0,q.useEffect)(function(){o.current=n},[n]),(0,u.tZ)(eS.xv,(0,ex._)((0,ey._)({},t),{ref:r,children:n}))}function tu(e){var n,t=(0,c._)((0,q.useState)(!1),2),r=t[0],o=t[1];return r?(0,u.tZ)(ta,{compact:!0,initialValue:null!==(n=e.session.title)&&void 0!==n?n:"",onCancel:function(){return o(!1)},onSubmit:function(n){o(!1),e.onRename(n)}}):(0,u.tZ)(td,{session:e.session,onRename:function(){return o(!0)},onToggleArchived:e.onToggleArchived})}var ts=(0,h.X)({root:[p.l0.flex.growAndShrink(1),{maxWidth:"100%"}],button:[p.l0.px(4),p.l0.reset.button,p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.growAndShrink(1),ew.gU.nofill,{fontWeight:p.TV.fontWeightMedium,svg:[p.l0.color.foregroundDimmest],"&:hover svg":[p.l0.color.foregroundDimmer]}],popover:[p.l0.borderRadius(4),p.l0.shadow(1),p.l0.border()],item:[ew.gU.listItem,p.l0.minWidth(140),p.l0.px(4),p.l0.py(2)]});function td(e){var n=["Rename",e.session.archived?"Unarchive":"Archive"],t=(0,te.L7)({items:n,onSelectedItemChange:function(n){switch(n.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,c._)((0,q.useState)(null),2),o=r[0],i=r[1],l=(0,c._)((0,q.useState)(null),2),a=l[0],s=l[1],d=(0,eI.D)(o,a,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,u.tZ)(u.HY,{children:(0,u.BX)(f.G,{css:ts.root,children:[(0,u.BX)(f.G,(0,ex._)((0,ey._)({tag:"button",css:ts.button},t.getToggleButtonProps({refKey:"innerRef",ref:i})),{children:[(0,u.tZ)(tc,{variant:"small",color:e.session.title?"default":"dimmest",multiline:!1,text:e.session.title||"New chat"}),(0,u.tZ)(n4.Z,{rotate:t.isOpen?180:0,size:12})]})),(0,u.tZ)(f.G,(0,ex._)((0,ey._)({},t.getMenuProps({refKey:"innerRef"})),{children:t.isOpen?(0,u.tZ)(n3.h,{children:(0,u.tZ)(eu.Tg,(0,ex._)((0,ey._)({elevated:!0,style:d.styles.popper,innerRef:s,css:ts.popover},d.attributes.popper),{children:n.map(function(e,n){var r=t.highlightedIndex===n?{backgroundColor:ew.vb.interactiveBackground}:void 0;return(0,u.tZ)(f.G,(0,ex._)((0,ey._)({css:ts.item,style:r},t.getItemProps({refKey:"innerRef",item:e,index:n})),{children:(0,u.tZ)(eS.xv,{variant:"small",children:e})}),e)})}))}):null}))]})})}var tf=(0,h.X)({root:[p.l0.rowWithGap(4)],items:[p.l0.border({direction:"bottom"}),p.l0.maxWidth(280)],divider:[p.l0.border({direction:"bottom",color:p.TV.outlineDimmest})]});function th(e){var n=e.basic,t=e.advanced,r=e.isPro,o=e.onUpgrade,i="basic"===e.currentModel?n:t,l=i.usage/i.limit>.95,a=(0,c._)((0,q.useState)(!1),2),s=a[0],d=a[1];return(0,u.BX)(f.G,{css:tf.root,children:[l?(0,u.tZ)(S.cF,{used:i.usage,total:i.limit,inline:!0}):null,(0,u.BX)(n7.xo,{label:"usage",isOpen:s,onOpenChange:function(e){e&&(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"viewed_usage",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),d(e)},children:[(0,u.tZ)(eK.hU,{alt:"Usage",children:(0,u.tZ)(n6.Z,{})}),(0,u.BX)(f.G,{css:tf.items,children:[(0,u.tZ)(S.cv,{quota:{used:n.usage,total:n.limit},selected:!1,hasAccessToAdvancedModel:r}),(0,u.tZ)(f.G,{css:tf.divider}),(0,u.tZ)(S.LX,{hasAccessToAdvancedModel:r,selected:!1,quota:{used:t.usage,total:t.limit},onUpgrade:o})]})]})]})}var tp=(0,h.X)({root:[p.l0.height(36),p.l0.rowWithGap(4),p.l0.px(2),p.l0.justify.spaceBetween,p.l0.align.center,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"})],center:[p.l0.flex.growAndShrink(1),p.l0.align.center],right:[p.l0.rowWithGap(0)]});function tv(e){var n=(0,c._)(e.children,2),t=n[0],r=n[1];return(0,u.BX)(f.G,{css:tp.root,children:[(0,u.tZ)(eK.hU,{alt:"All Chats",onClick:function(){return e.onSidebarButtonClick()},children:(0,u.tZ)(n8.Z,{})}),(0,u.tZ)(f.G,{css:tp.center,children:t}),(0,u.BX)(f.G,{css:tp.right,children:[r,(0,u.tZ)(eK.hU,{alt:"New Chat",onClick:function(){return e.onAddButtonClick()},children:(0,u.tZ)(n9.Z,{})})]})]})}var tm=t(51361),tg=t(86280),tZ=t(41026),tb=(0,nI.$)(["sessionBackground","actionsButtonDisplay"]),ty=tb.cssVars,tx=tb.styleTokens,tC=(0,h.X)({loading:[p.l0.coverContainer,p.l0.center],tabList:[p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,p.l0.rowWithGap(4),p.l0.p(8),p.l0.align.center,p.l0.justify.spaceBetween],tabListLeft:[p.l0.viewStyle,p.l0.rowWithGap(2)],tabListRight:{justifySelf:"end"},tab:[p.l0.viewStyle,ew.gU.nofill,p.l0.px(8),p.l0.height(30),p.l0.justify.center,p.l0.borderRadius(4),{"&[data-selected]":{backgroundColor:ew.vb.interactiveBackgroundActive}}],sessions:[p.l0.overflowY("auto"),p.l0.flex.growAndShrink(1),p.l0.px(8)],editTimestamp:[p.l0.px(4)],session:[p.l0.p(8),p.l0.border({direction:"bottom"}),ew.gU.listItem,p.l0.borderRadius(4),(a={backgroundColor:tx.sessionBackground},(0,nR._)(a,p.BC.canHover,(0,nR._)({},ty.actionsButtonDisplay,"none")),(0,nR._)(a,"&:hover",(0,nR._)({},ty.actionsButtonDisplay,"block")),a)],emptyState:[p.l0.center,p.l0.p(16)],header:[p.l0.rowWithGap(4),p.l0.height(24)],title:[p.l0.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:tx.actionsButtonDisplay,"&:hover":{opacity:1}}]});function tw(e){var n=e.onClick;return(0,u.BX)(f.G,{style:(0,nR._)({},ty.sessionBackground,p.TV.accentPrimaryDimmest),css:tC.session,onClick:n,children:[(0,u.tZ)(f.G,{css:tC.header,children:(0,u.tZ)(f.G,{css:tC.title,children:(0,u.tZ)(eS.xv,{multiline:!1,children:"New Chat"})})}),(0,u.tZ)(eS.xv,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function tS(e){var n,t=e.selected,r=e.onClick,o=e.onRename,i=e.onToggleArchived,l=e.session,a=(0,c._)((0,q.useState)(!1),2),s=a[0],d=a[1],h=(0,tg.av)(),v=h.menuProps,m=h.triggerProps,g=h.open;return s?(0,u.BX)(f.G,{children:[(0,u.tZ)(ta,{initialValue:null!==(n=l.title)&&void 0!==n?n:"",onCancel:function(){return d(!1)},onSubmit:function(e){o(e),d(!1)}}),(0,u.tZ)(f.G,{css:tC.editTimestamp,children:(0,u.tZ)(el.EK,{textColor:"dimmest",textVariant:"small",date:l.created})})]}):(0,u.BX)(u.HY,{children:[(0,u.BX)(f.G,(0,ex._)((0,ey._)({style:t?(0,nR._)({},ty.sessionBackground,p.TV.backgroundHigher):void 0,css:tC.session,onClick:r},m),{children:[(0,u.BX)(f.G,{css:tC.header,children:[(0,u.tZ)(f.G,{css:tC.title,children:(0,u.tZ)(tc,{multiline:!1,text:l.title||"Untitled"})}),(0,u.tZ)(eK.hU,{css:tC.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var n=e.target.getBoundingClientRect();g({x:n.x,y:n.y})},children:(0,u.tZ)(tZ.Z,{})})]}),(0,u.tZ)(el.EK,{textColor:"dimmest",textVariant:"small",date:l.created})]})),(0,u.BX)(tg.xV,(0,ex._)((0,ey._)({},v),{children:[(0,u.tZ)(tg.Zo,{onClick:function(){return d(!0)},children:"Rename"}),(0,u.tZ)(tg.Zo,{onClick:i,children:l.archived?"Unarchive":"Archive"})]}))]})}function t_(){return(0,u.tZ)(f.G,{css:tC.emptyState,children:(0,u.tZ)(eS.xv,{color:"dimmest",children:"No chats"})})}function tE(e){var n=e.currentSessionId,t=e.loading,r=(0,m.u0)();return t&&!r.length?(0,u.tZ)(f.G,{css:tC.loading,children:(0,u.tZ)(nA.Z,{})}):(0,u.BX)(f.G,{css:tC.sessions,children:[t||0!==r.length?null:(0,u.tZ)(t_,{}),r.map(function(t){return(0,u.tZ)(tS,{session:t,selected:t.id===n,onClick:function(){return e.onSessionClick(t.id)},onToggleArchived:function(){return e.onToggleArchived(t,e.currentSessionId)},onRename:function(n){return e.updateSession(t.id,{title:n})}},t.id)})]})}function tT(e){var n=e.currentSessionId,t=e.loading,r=(0,m.Ik)();return t&&!r.length?(0,u.tZ)(f.G,{css:tC.loading,children:(0,u.tZ)(nA.Z,{})}):(0,u.BX)(f.G,{css:tC.sessions,children:[0===r.length?(0,u.tZ)(tw,{onClick:function(){return e.onNewSessionClick()}}):null,r.map(function(t){return(0,u.tZ)(tS,{session:t,selected:t.id===n,onClick:function(){return e.onSessionClick(t.id)},onToggleArchived:function(){return e.onToggleArchived(t,e.currentSessionId)},onRename:function(n){return e.updateSession(t.id,{title:n})}},t.id)})]})}var tk=["Chats","Archived"];function tA(e){var n=(0,c._)((0,q.useState)("Chats"),2),t=n[0],r=n[1];return(0,u.BX)(tm.mQ,{selectedKey:t,onSelectionChange:function(n){r(n),e.refetch({archivedOnly:"Archived"===n})},children:[(0,u.BX)(f.G,{css:tC.tabList,children:[(0,u.tZ)(tm.td,{"aria-label":"Chats",css:tC.tabListLeft,children:tk.map(function(e){return(0,u.tZ)(tm.OK,{id:e,css:tC.tab,children:(0,u.tZ)(eS.xv,{color:"dimmer",children:e})},e)})}),(0,u.tZ)(f.G,{css:tC.tabListRight,children:(0,u.tZ)(eK.hU,{alt:"New chat",onClick:function(){"Chats"!==t&&r("Chats"),e.onNewSessionClick()},children:(0,u.tZ)(n9.Z,{})})})]}),tk.map(function(n){return(0,u.tZ)(tm.x4,{id:n,children:"Chats"===n?(0,u.tZ)(tT,(0,ey._)({},e)):(0,u.tZ)(tE,(0,ey._)({},e))},n)})]})}var tR=t(37862),tI=t(14074),tG=t(82973),tD=(0,nI.$)(["sidebarTransform","mainPaddingLeft"]),tB=tD.cssVars,tP=tD.styleTokens,tX=(0,h.X)({main:[p.l0.position.relative,p.l0.flex.growAndShrink(1),p.l0.justify.end]}),tL=(0,h.X)({content:[p.l0.position.relative,p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.container("content")],header:[{zIndex:1}],sidebar:[p.l0.border({direction:"right",color:p.TV.outlineDimmest}),p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.height("100%"),p.l0.width("100%"),p.l0.maxWidth(200),p.l0.overflowY("auto"),(0,nR._)({zIndex:1,transform:tP.sidebarTransform,transitionProperty:"transform",transitionDuration:nD.H.duration},p.nC.min(500,"content"),[p.l0.width(200),{transitionDuration:"0s"}])],main:[tX.main],mainWithSidebar:[tX.main,(0,nR._)({},p.nC.min(500,"content"),{paddingLeft:tP.mainPaddingLeft})]});function tN(e){var n,t,r,o,i,l,a,s,d,h,p,v,g=e.sessionId,Z=e.children,b=e.backgroundColor,y=e.hideHeader,x=e.hideSidebar,C=e.setSessionId,w=e.onUpgrade,S=(0,eQ._)(e,["sessionId","children","backgroundColor","hideHeader","hideSidebar","setSessionId","onUpgrade"]),_=(0,m.ZR)().hasAccessToAdvancedModel,E=(0,m.lw)(),T=(0,m.xe)(),k=(0,c._)((0,m.Ni)(),1)[0],A=(n=(0,m.Ik)().length>1,t=(0,X.T3)(),o=(r=(0,c._)((0,q.useState)(function(){var e=tG.Z.get("chat-sidebar-open","boolean");return(null!==e?e:n)&&!t}),2))[0],i=r[1],l=(0,q.useRef)(0),a=(0,tR.Z)(function(e){return l.current=e.width}),s=(0,q.useRef)(null),d=(0,q.useRef)(null),h=(0,q.useCallback)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ifNecessary;if(!e){i(!1);return}l.current<500&&i(!1)},[]),(0,q.useEffect)(function(){s.current&&null===tG.Z.get("chat-sidebar-open","boolean")&&n&&i(s.current.clientWidth>500)},[n]),(0,q.useEffect)(function(){var e=function(e){var n;!(!d.current||e.target instanceof HTMLElement&&d.current.contains(e.target))&&e.target instanceof HTMLElement&&(null===(n=s.current)||void 0===n?void 0:n.contains(e.target))&&h({ifNecessary:!0})};if(o)return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[o,h]),p=(0,q.useCallback)(function(){i(function(e){return e||(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"chat_sidebar_opened",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),tG.Z.set("chat-sidebar-open",!e),!e})},[]),{rootRef:(0,tI.l)(s,a),sidebarRef:d,toggle:p,close:h,isOpen:o}),R=(0,m.nV)(),I=(0,m.Q4)(g);function G(){(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"new_chat",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),A.close({ifNecessary:!0}),S.onNewSessionClick()}var D=(0,m.om)(),B=(0,m._X)();function P(e,n){if((0,N.j)(N.U3.AI_CHAT_EVENT,{action:e.archived?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),e.id===n){var t=e.archived?D():B();if(t.length>1){var r=t.find(function(n){return n.id!==e.id});C(r?r.id:null)}else G()}R(e.id,{archived:!e.archived})}return(0,u.BX)(f.G,{innerRef:A.rootRef,css:tL.content,style:(v={},(0,nR._)(v,tB.sidebarTransform,"translateX(".concat(A.isOpen?"0":"-100%",")")),(0,nR._)(v,tB.mainPaddingLeft,(A.isOpen?200:0)+"px"),(0,nR._)(v,"backgroundColor",b),v),children:[y?null:(0,u.tZ)(eu.Tg,{css:tL.header,children:(0,u.BX)(tv,{onAddButtonClick:G,onSidebarButtonClick:function(){return A.toggle()},children:[I?(0,u.tZ)(tu,{session:I,onRename:function(e){(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),R(I.id,{title:e})},onToggleArchived:function(){P(I,I.id)}},I.id):null,T?(0,u.tZ)(th,{basic:T.basicModelLimits,advanced:T.advancedModelLimits,isPro:_,currentModel:k,onUpgrade:w}):null]})}),(0,u.BX)(f.G,{css:x?tL.main:tL.mainWithSidebar,children:[x?null:(0,u.tZ)(eu.Tg,{css:tL.sidebar,innerRef:A.sidebarRef,children:(0,u.tZ)(tA,{loading:E.loading,refetch:E.refetch,currentSessionId:g,onSessionClick:C,onNewSessionClick:G,updateSession:R,onToggleArchived:P})}),Z]})]})}var tM=t(59247),tO=(0,h.X)({chatLoadingWrapper:[p.l0.flex.growAndShrink(1),p.l0.justify.start,p.l0.align.center,p.l0.p(16)],chatInputWrapper:[p.l0.px(8),p.l0.pb(8),{justifySelf:"end"}],chatErrorWrapper:[p.l0.px(8),p.l0.pb(8),{justifySelf:"end"}]}),tU=(0,q.forwardRef)(function(e,n){var t,r,o,i,l,a,h,b,y,x,T,k,A,R,I,G,D,B,P,H,j,$=(0,d.Z)(),K=(0,c._)((0,q.useState)(!1),2),et=K[0],er=K[1],eo=(0,c._)((0,q.useState)("NONE"),2),ei=eo[0],el=eo[1],ea=(0,c._)((0,m.Ni)(),2),ec=ea[0],eu=ea[1],es=(0,c._)((0,q.useState)(!1),2),ed=es[0],ef=es[1],eh=e.workspace,ep=e.onSessionChange,ev=(r=(t={recentFilesObservable:e.recentFilesObservable,getFileContext:null==eh?void 0:eh.getFileContext,model:ec}).recentFilesObservable,o=t.getFileContext,i=t.model,l=(0,M.Z)(o),a=(0,m.p)(),h=(0,m.Bk)(),b=(0,m.Tt)(),x=(y=(0,c._)((0,q.useState)([]),2))[0],T=y[1],(0,q.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};if(r)return e(r.current),r.subscribe((0,en.Z)(e,{wait:2e3}));function n(){return(n=(0,J._)(function(e){var n,t;return(0,ee.Jh)(this,function(r){switch(r.label){case 0:return[4,null===(n=l.current)||void 0===n?void 0:n.call(l,{modelType:"advanced"===i&&h()?m.BY.ADVANCED:m.BY.BASIC,filePreferences:b,recentFiles:e})];case 1:if(!(t=r.sent()))return[2];return T(function(e){var n=e.filePreferences,t=e.fileContextState,r=new Map(t.fileContext.map(function(e){return[e.filePath,"included"]})),o=!0,i=!1,l=void 0;try{for(var a,u=n[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var s=(0,c._)(a.value,2),d=s[0],f=s[1];if("exclude"===f){r.delete(d);continue}if(t.unsupportedPreferredFiles.has(d)){r.set(d,"unsupported");continue}r.set(d,"included"===r.get(d)?"included":"overflowing")}}catch(e){i=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}return(0,Q._)(r.entries()).map(function(e){var n=(0,c._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:t,filePreferences:b})),[2]}})})).apply(this,arguments)}},[r,b,i,l,h]),{fileContextInclusions:x,getFileContext:(0,q.useMemo)(function(){if(o)return function(){var e;return o({modelType:"advanced"===i&&h()?m.BY.ADVANCED:m.BY.BASIC,filePreferences:a(),recentFiles:null!==(e=null==r?void 0:r.current)&&void 0!==e?e:[]})}},[o,a,h,i,r])}),em=ev.fileContextInclusions,eg=ev.getFileContext,eZ=(null===(B=e.initialSession)||void 0===B?void 0:B.type)==="session"?e.initialSession.id:void 0,eb=(0,m.bD)({initialSessionId:eZ,getFileContext:eg}),ey=eb.sendMessage,ex=eb.sendUpdateEvent,eC=eb.stopMessage,ew=eb.loading,eS=eb.setSessionId,e_=eb.sessionId,eE=eb.setActiveChild,eT=eb.parentToActiveChild;(0,q.useImperativeHandle)(n,function(){return{updateActiveSessionId:function(e){eS(null!=e?e:null)}}});var ek=!e_&&(null===(P=e.initialSession)||void 0===P?void 0:P.type)==="mostRecent";!function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skip,r=(0,M.Z)(n);(0,q.useEffect)(function(){if(!t&&e){e.current&&r.current(e.current);var n=e.subscribe(function(e){r.current(e)});return function(){n()}}},[t,r,e])}((0,m.Zc)(),function(e){!e_&&e&&eS(e)},{skip:!ek}),(0,q.useEffect)(function(){null==ep||ep(e_)},[ep,e_]);var eA=(0,m.Q4)(e_),eR=(0,m.Un)(),eI=(0,m.UK)(),eG=(0,s.Gn)("chatEngine").preferences,eD=(0,q.useRef)(!1),eB=(0,m.G9)({sendMessage:ey,sendUpdateEvent:ex}),eP=eB.onStartLocalShellExecution,eX=eB.onEndLocalShellExecution,eL=(0,m.ZR)().hasAccessToAdvancedModel,eN=(0,m.KV)(),eM=(0,m.xe)(),eO=(0,m.vl)(),eU=(0,g.yL)(eO.qualified).messageCharacters,eq=(0,c._)((0,q.useState)(null),2),eV=eq[0],eH=eq[1],eF=(0,z.useRouter)(),eW=(0,X.S7)(eF,"hideChatInput"),ez=(0,X.Gv)(eF),ej=(0,X.T3)();function e$(e){if(eS(e),!$&&(null==eV||eV.focus(),!e)){var n;null==eV||null===(n=eV.setValue)||void 0===n||n.call(eV,"")}}A=(k={enableBridge:ez,sendChatMessage:function(e){ey({kind:"message",message:e,model:"advanced"===ec?m.BY.ADVANCED:m.BY.BASIC,intent:m.$h.NONE})},abortResponse:function(){eC()}}).enableBridge,R=k.sendChatMessage,I=k.abortResponse,G=(0,M.Z)(R),D=(0,M.Z)(I),(0,q.useEffect)(function(){if(A){var e=function(e){return(0,O.I6)(e,function(e){var n=e.type;switch(n){case U.cF.GHOSTWRITER_CHAT_SEND:G.current(e.chatMessage),(0,O.gU)(e.id);break;case U.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:D.current(),(0,O.gU)(e.id);break;default:(0,V.Z)(n)}})};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[D,A,G]),(0,q.useCallback)(function(){var e={messageType:U.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,O.bG)(e,F()())},[]);var eK=(0,m.fX)(),eY=(0,m.dR)(),eJ=(0,m._i)(),eQ=(0,q.useRef)(null),e0=eM?function(e,n){var t=e.basicModelLimits,r=e.advancedModelLimits;switch(n){case m.BY.BASIC:if(t.usage<t.limit)break;return{resetTime:t.resetTime};case m.BY.ADVANCED:if(r.usage<r.limit||0===r.limit)break;return{resetTime:r.resetTime}}return null}(eM,"advanced"===ec?m.BY.ADVANCED:m.BY.BASIC):null,e1=(0,m.gn)(e_,eT),e2=!!(e1&&e1.state===m.he.IN_PROGRESS),e5=null==eh?void 0:eh.performPaneOperation,e7=(0,q.useCallback)(function(){null==e5||e5({operation:"open",pane:{type:"agentProgress"}})},[e5]);return(0,u.BX)(u.HY,{children:[(0,u.BX)(tN,{hideSidebar:e.hideSidebar,hideHeader:e.hideHeader,sessionId:e_,onUpgrade:function(){return er(!0)},onNewSessionClick:function(){e$(null),null==eV||eV.animatePlaceholder(),(0,L.A)(eQ,"border-color",p.TV.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null===(e=eQ.current)||void 0===e||e.style.removeProperty("border-color")})},60)},setSessionId:e$,backgroundColor:ez||(null==eh?void 0:eh.isInAgentMode)?void 0:"color-mix(in srgb, ".concat(p.TV.blurpleDefault," 5%, transparent)"),children:[eA&&(null==eA?void 0:eA.sessionType)!==m.FF.AGENT_SESSION?(0,u.tZ)(n5,{workspace:eh,parentToActiveChild:eT,setActiveChild:eE,replCreationSession:e.replCreationSession,sessionId:null==eA?void 0:eA.id,getFileContext:eg,onStartLocalShellExecution:eP,onEndLocalShellExecution:eX,shouldAutoscrollRef:eD}):null,(null==eA?void 0:eA.sessionType)===m.FF.AGENT_SESSION&&(null==eh?void 0:eh.addSecretEntries)?(0,u.tZ)(tM.z,{sessionId:eA.id,shouldAutoscrollRef:eD,onViewPlan:e7,addSecretEntries:null==eh?void 0:eh.addSecretEntries}):null,e_||(null===(H=e.initialSession)||void 0===H?void 0:H.type)==="mostRecent"?null:null===(j=e.renderEmptyState)||void 0===j?void 0:j.call(e,{onPromptClick:eV?function(n){var t,r;n.intent&&el(n.intent),"AGENT"===n.intent&&(null===(r=e.onEnterAgentMode)||void 0===r||r.call(e)),null==eV||null===(t=eV.setValue)||void 0===t||t.call(eV,n.value),$||null==eV||eV.focus()}:void 0}),eI?(0,u.tZ)(f.G,{css:tO.chatErrorWrapper,children:(0,u.tZ)(C,{})}):(0,u.BX)(f.G,{css:tO.chatInputWrapper,children:[e0?(0,u.tZ)(Y,{type:ec,text:"advanced"===ec?"Quota reached. Refreshes ".concat((0,W.Z)(new Date(e0.resetTime),"do MMM, hh:mm a")):"100% quota reached. Upgrade to get unlimited quota."}):null,eW?null:(0,u.BX)(Z.x,{ref:eQ,isConnected:eR,inputRef:function(n){var t;eH(n),null===(t=e.inputRef)||void 0===t||t.call(e,n)},lastEventInProgress:e2,findFiles:null==eh?void 0:eh.findFiles,fileContextInclusions:em,updateFileContext:function(e){return eJ(e.path,e.preference)},openFile:null==eh?void 0:eh.openFile,maxLength:eU,loading:ew,onStop:eC,onSubmit:function(n){var t;eR&&((0,N.j)(N.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:E.get(ei),model:ec,user_model_selection:ec,message_content:n,message_source:"chat_pane",message_surface:e.analyticsMessageSurface}),ey({kind:"message",message:n,model:"advanced"===ec?m.BY.ADVANCED:m.BY.BASIC,intent:(null==eh?void 0:eh.isInAgentMode)||(null==eA?void 0:eA.sessionType)===m.FF.AGENT_SESSION?m.$h.AGENT:null!==(t=_.get(ei))&&void 0!==t?t:m.$h.MESSAGE_ACTION_UNKNOWN,useRag:ed,extraResources:[]},{newSessionType:e.newSessionType}),eD.current=!0)},analyticsSurface:e.analyticsMessageSurface,variant:e.inputVariant,children:[eh?(0,u.tZ)(w.p,{onChange:function(e){return eJ(e.path,e.preference)},unSelectAll:function(e){return eY(e.paths)},selectAll:function(e){return eK(e.paths)},findFiles:eh.findFiles,fileContextInclusions:em,isInMobileWorkspace:ej,useRag:ed,setUseRag:ef}):null,!e.hideModelSelector&&eM?(0,u.tZ)(S.q2,{availableModelNames:eN,userLimits:eM,selectedItem:ec,hasAccessToAdvancedModel:eL,onChange:function(n){if(!eL&&"advanced"===n){er(!0);return}n!==ec&&(0,N.j)(N.U3.AI_CHAT_EVENT,{action:"model_changed",intent_type:null,model:n,user_model_selection:n,message_content:null,message_source:"chat_pane",message_surface:e.analyticsMessageSurface}),eu(n)},advancedChatEngineOverride:eG.chatEngine}):null]})]})]}),(0,u.tZ)(v.Z,{isOpen:et,onClose:function(){return er(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})})},23979:function(e,n,t){t.d(n,{Cn:function(){return x},Dq:function(){return y},J:function(){return Z},UB:function(){return S},VU:function(){return w},_5:function(){return T},fB:function(){return _}});var r=t(41733),o=t(30509),i=t(98924),l=t(66626),a=t(3796),c=t(52657),u=t(37862),s=t(22192),d=t(93245),f=t(36809),h=t(63163),p=t(75271),v=t(56738),m=t(37633);function g(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var o=t[r];if(o){for(var i=!1,l=0;l<e.cols;l++)if(0!==o.hasContent(l)){i=!0;break}if(i){n=r+1;break}}}return n}var Z=8,b=(0,s.$)(["topOffset"]),y=b.cssVars,x=b.styleTokens,C=(0,f.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:x.topOffset,"& .xterm":[h.l0.py(Z),h.l0.pl(Z),h.l0.height("100%"),h.l0.overflow("hidden")],"& .xterm-viewport":[h.l0.overflow("hidden")]},terminalForHistoricalOutputWrapper:[h.l0.overflow("hidden")]});function w(e){var n=e.autoFocus,t=e.wrapperResizeRef,l=e.xterm,c=e.bufferHeight,u=e.onInput,s=e.onMessage,f=e.onResizeTerminal,h=e.children,v=(0,i._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","onMessage","onResizeTerminal","children"]);return(0,p.useEffect)(function(){n&&l&&l.focus()},[l,n]),(0,p.useEffect)(function(){if(l){var e=l.onData(function(e){u(e)}),n=l.onResize(function(){f(l.getSize())});return function(){e.dispose(),n.dispose()}}},[l,u,f]),(0,p.useEffect)(function(){if(l)return s(function(e){return l.write(e)})},[s,l]),(0,a.tZ)(d.G,{innerRef:t,children:(0,a.tZ)(d.G,(0,o._)((0,r._)({},v),{css:C.wrapper,style:(0,r._)({height:c},v.style),children:h}))})}function S(e){var n=e.xtermRef,t=e.visibleHeight,l=e.maxHeight,c=(0,i._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,a.tZ)(d.G,(0,o._)((0,r._)({innerRef:n,css:C.terminal},c),{style:(0,o._)((0,r._)({},c.style),{height:t,maxHeight:l})}))}function _(e){var n=e.maxHeight,t=e.openFile,r=e.listFiles,o=e.openWebview,i=e.performPaneOperation,a=(0,l._)((0,v.Z)({autoFit:!1,size:{rows:10},openFile:t,listFiles:r,openWebview:o,performPaneOperation:i}),2),s=a[0],d=a[1],f=(0,p.useMemo)(function(){return null==s?void 0:s._term},[s]),h=(0,l._)((0,p.useState)(function(){var e,n,t=null==f?void 0:f._core;return null!==(n=null==t?void 0:null===(e=t._renderService)||void 0===e?void 0:e.dimensions.css.cell.height)&&void 0!==n?n:8}),2),m=h[0],b=h[1];(0,p.useEffect)(function(){if(f){var e,n=null==f?void 0:f._core,t=null==n?void 0:null===(e=n._renderService)||void 0===e?void 0:e.onDimensionsChange(function(e){b(e.css.cell.height)});return function(){null==t||t.dispose()}}},[f]);var y=(0,p.useMemo)(function(){return Math.floor((n-2*Z)/m)},[n,m]),x=(0,l._)((0,p.useState)("normal"),2),C=x[0],w=x[1],S=(0,l._)((0,p.useState)(1),2),_=S[0],E=S[1],T=(0,l._)((0,p.useState)(1),2),k=T[0],A=T[1],R=(0,l._)((0,p.useState)(!1),2),I=R[0],G=R[1],D=(0,c.Z)(_),B=(0,c.Z)(k),P=(0,c.Z)(C);(0,p.useEffect)(function(){if(f){var e=f.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(E(y),A(y),G(!1))});return function(){e.dispose()}}},[f,y]);var X=(0,p.useCallback)(function(){if(f){if("alternate"===P.current)E(y);else{var e=g(f),n=e>y;A(e),E(Math.min(e,y)),G(n)}}},[f,y,P]),L=(0,u.Z)(function(e){var n=e.widthChanged;f&&s&&n&&(s.fit(),X())},{type:"debounce",wait:200});(0,p.useEffect)(function(){var e=function(){if(f&&"alternate"!==P.current){var e=g(f),n=Math.min(e,y);e>B.current&&A(e),n>D.current&&E(n),e>y&&G(!0)}};if(f){var n=[f.onLineFeed(e),f.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[f,D,P,B,y]),(0,p.useEffect)(function(){if(f&&s){var e=s.getSize();e.rows!==y&&f.resize(e.cols,y),X()}},[f,s,y,X]);var N=(0,p.useMemo)(function(){return Math.ceil((Math.min(_,k)+1)*m+2*Z)},[_,k,m]),M=(0,p.useMemo)(function(){return Math.ceil(I?(k+1)*m+2*Z:N)},[m,I,N,k]);return(0,p.useEffect)(function(){s&&s.fit()},[s,_,k]),{visibleHeight:N,visibleLines:_,bufferHeight:M,bufferLines:k,bufferMode:C,hasScrollback:I,wrapperResizeRef:L,xterm:s,xtermRef:d}}function E(){}function T(e){var n=e.output,t=e.maxHeight,r=_({maxHeight:t,openFile:E,listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:E}),o=r.visibleHeight,i=r.bufferHeight,l=r.wrapperResizeRef,c=r.xterm,u=r.xtermRef,s=(0,p.useCallback)(function(e){return c&&(null==c||c.clear(),e(n)),E},[c,n]),f=(0,m.f)();return(0,a.tZ)(d.G,{css:C.terminalForHistoricalOutputWrapper,style:{height:o,background:null==f?void 0:f.background},children:(0,a.tZ)(w,{onInput:E,xterm:c,wrapperResizeRef:l,bufferHeight:i,onMessage:s,onResizeTerminal:E,children:(0,a.tZ)(S,{xtermRef:u,visibleHeight:o,maxHeight:t})})})}},47423:function(e,n,t){t.d(n,{Q1:function(){return x},Rz:function(){return b},xy:function(){return C}});var r=t(27387),o=t(96583),i=t(3796),l=t(4573),a=t(87915),c=t(93245),u=t(24766),s=t(36809),d=t(63163),f=t(85045),h=t(35370),p=t(80137),v=t(13213),m=(0,s.X)({root:[d.l0.rowWithGap(8),d.l0.align.center,d.l0.flex.growAndShrink(1),d.l0.px(8),{userSelect:"none"}],header:[{fontSize:d.TV.fontSizeSmall,opacity:.6},d.l0.color.foregroundDimmest,d.l0.truncate],result:[d.l0.colWithGap(0)],mainRow:[d.l0.rowWithGap(8),d.l0.align.center],fileName:[d.l0.truncate,d.l0.flex.row]});function g(e){var n=e.height,t=e.active,r=e.match,o=r.directory,s=r.filename,d=e.description;return(0,i.BX)(c.G,{css:m.root,style:{height:n},children:[(0,i.tZ)(a.Z,{path:s.text,size:16}),(0,i.BX)(c.G,{css:m.result,children:[o?(0,i.tZ)(c.G,{css:m.header,children:(0,i.tZ)(l.x,{text:o.text+"/",highlight:o.ranges,dimmed:!t})}):null,(0,i.BX)(c.G,{css:m.mainRow,children:[(0,i.tZ)(c.G,{css:m.fileName,children:(0,i.tZ)(l.x,{text:s.text,highlight:s.ranges,dimmed:!t})}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:d})]})]})]})}var Z={match:f.kN,forward:!1,tiebreakers:[function(e,n,t){var r=t(e.item),o=t(n.item),i=r.lastIndexOf("/"),l=o.lastIndexOf("/"),a=Array.from(e.positions).filter(function(e){return e>i}).length;return Array.from(n.positions).filter(function(e){return e>l}).length-a},function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function b(e,n){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e,n){var t,r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,new f.Zn(n,Z).find(e)];case 1:return t=o.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*v.r.files),ranges:(0,p.Od)(e.positions)}}),[2,(r=(0,p.b8)({queryLength:e.length}))?t.filter(function(e){return e.score>=r}):t]}})})).apply(this,arguments)}function x(e){var n=e.ranges,t=e.path,r=(0,h.UO)(t),o=(0,h.Il)(t);if(!o)return{filename:{text:r,ranges:n.length?n:void 0}};var i=o.length,l=i+1,a=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var v=f.value;if(v.from<i){a.push({from:v.from,to:Math.min(v.to,i)});var m=v.to-l;if(m<=0)continue;c.push({from:0,to:m});continue}v.from<l||c.push({from:v.from-l,to:v.to-l})}}catch(e){s=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:o,ranges:a.length?a:void 0}}}function C(e){var n=e.path,t=e.ranges,r=e.description,o=x({path:n,ranges:null!=t?t:[]}),l=o.directory?44:32;return{height:l,content:(0,i.tZ)(g,{match:o,height:l,description:r})}}},78371:function(e,n,t){t.d(n,{xV:function(){return Y},du:function(){return E},av:function(){return j}});var r=t(42516),o=t(41733),i=t(3796),l=t(85451),a=t(15185),c=t(95281),u=t(63062),s=t(14548),d=t(36809),f=t(63163),h=t(75271),p=t(11195),v=t(41974),m=t(49853),g=t(80951),Z=t(66626),b=t(3702),y=t(80786),x=(0,h.createContext)(null);function C(){var e=(0,h.useContext)(x);if(!e)throw Error("Expected store in context");return e}function w(e){return(0,y.Dv)(e,{store:C()})}function S(e){return(0,b.b)(e,C())}var _=function(e){return(0,y.b9)(e,{store:C()})};function E(e){var n=(0,Z._)((0,h.useState)(function(){return(0,m.MT)()}),1)[0];return(0,i.tZ)(x.Provider,{value:n,children:e.children})}var T=(0,t(22192).$)(["display","visibility","transform","maxHeight","width"]),k=T.cssVars,A=T.styleTokens,R=(0,m.cn)(null),I=(0,m.cn)("default"),G=(0,m.cn)({command:null,offset:{x:0,y:0},visible:!1}),D=(0,g.kv)(G,function(e){return e.offset}),B=(0,g.kv)(G,function(e){return e.command}),P=(0,g.kv)(G,function(e){return e.visible}),X=(0,g.kv)(G,function(e){return e.onKeyDownHandler}),L=(0,g.kv)(R,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),N=(0,m.cn)(function(e){var n=e(D);if(!n)return null;var t=n.y,r=window.innerHeight-t,o=e(L),i=null!==o?o-r:0;return i>0&&(t=Math.max(16,t-Math.min(200,i))),t}),M=(0,m.cn)(function(e){var n=e(D);if(!n)return null;var t=n.x,r=window.innerWidth,o=e(U),i=t+(null!=o?o:q)-r+16;return i>0&&(t=Math.max(16,t-i)),t}),O=(0,m.cn)(function(e){var n=e(M),t=e(N);return null==n||null===t?null:(0,r._)({},k.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),U=(0,m.cn)(null),q=180,V=(0,m.cn)(function(e){var n=e(U);return(0,r._)({},k.width,(null===n?q:n)+"px")}),H=(0,m.cn)(function(e){var n=e(N);return null===n?null:(0,r._)({},k.maxHeight,"calc(100vh - ".concat(f.TV.space16," - ").concat(n,"px)"))}),F=(0,m.cn)(null,function(e,n){n(R,null),n(U,null),n(W,null),n(G,function(e){return(0,v.Uy)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,m.cn)(null),z=(0,m.cn)(null,function(e,n,t){if(n(I,t.background),t.width&&n(U,t.width),t.target){var r=t.target.getBoundingClientRect(),o={x:r.x,y:r.y+r.height+8};n(W,r),n(G,function(e){return(0,v.Uy)(e,function(e){e.command=t.command,e.offset=o,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(G,function(e){return(0,v.Uy)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function j(){var e=_(z),n=_(F),t=S(P),r=(0,s.nZ)({elevated:!0});return{openContextMenu:(0,h.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler})},[e,r]),closeContextMenu:n,isVisible:t,onContextMenu:(0,h.useCallback)(function(n,t){var o=t.command,i=t.width,l=t.onKeyDownHandler;n.preventDefault(),e({command:o,offset:{x:n.clientX,y:Math.min(window.innerHeight-64,n.clientY)},target:null,width:i,background:r,onKeyDownHandler:l})},[e,r])}}var $=(0,d.X)({surface:[f.l0.shadow(3),f.l0.borderRadius(8),f.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:f.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(f.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(f.TV.space16,"))"),maxHeight:A.maxHeight,width:A.width,transform:A.transform,visibility:A.visibility,display:A.display}]});function K(){var e=w(W);return e?(0,i.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Y=(0,h.memo)(function(e){var n=e.fontSize,t=_(F),d=w(B),f=w(X),v=S(P),m=(0,h.useRef)(function(){});(0,h.useEffect)(function(){var e=function(e){if(e){var n;null===(n=m.current)||void 0===n||n.call(m);return}};return e(v.current),v.subscribe(e)},[v]);var g=_(R),Z=(0,h.useRef)(null);(0,h.useEffect)(function(){var e=function(e){var n;e.target instanceof HTMLElement&&(null===(n=Z.current)||void 0===n?void 0:n.contains(e.target))||t()},n=function(){t()},r=function(t){t?(window.addEventListener("blur",n),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",n),document.removeEventListener("pointerdown",e))},o=v.subscribe(r);return function(){o(),r(!1)}},[v,t]);var b=S(O);(0,c.j)(Z,b),(0,c.j)(Z,S(H)),(0,c.j)(Z,v,function(e){var n;return n={},(0,r._)(n,k.visibility,e?"visible":"hidden"),(0,r._)(n,k.display,e?"flex":"none"),n});var y=S(V);(0,c.j)(Z,y);var x=(0,a.Z)(),C=w(P)&&!x,E=w(I),T=(0,o._)({},b.current,y.current);return d?(0,i.BX)(u.h,{children:[(0,i.tZ)(K,{}),(0,i.tZ)(p.MT,{autoFocus:C,restoreFocus:!0,contain:!0,children:(0,i.tZ)(s.Tg,{onKeyDown:function(e){"Escape"===e.key&&t()},innerRef:Z,css:$.surface,style:T,background:E,children:(0,i.tZ)(l.X,{iconBreadcrumbs:!0,command:d,onAction:t,onSelect:t,onTotalHeightChange:g,onKeyDown:f,focusRef:m,fontSize:void 0===n?14:n,compact:!0,minimalInputBar:!0})})})]}):null})},35723:function(e,n,t){t.d(n,{E:function(){return o}});var r=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"}];function o(e){var n,t,o=r.find(function(n){return n.pattern.test(e)}),i=null==o?void 0:null===(n=o.presetSecrets)||void 0===n?void 0:n.find(function(n){return n.key===e});return null!==(t=null==i?void 0:i.link)&&void 0!==t?t:null==o?void 0:o.defaultLink}},53616:function(e,n,t){t.d(n,{s:function(){return p}});var r=t(42516),o=t(3796),i=t(36809),l=t(63163),a=t(47767),c=t(22192),u=t(93245),s=(0,c.$)(["fontSize"]),d=s.cssVars,f=s.styleTokens,h=(0,i.X)({button:[l.l0.reset.button,l.l0.flex.row,l.l0.align.center,l.l0.cursor.pointer,l.l0.hover({opacity:1}),{opacity:.6,fontFamily:l.TV.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:l.TV.foregroundDimmest,color:l.TV.foregroundDimmest},":hover *":{borderColor:l.TV.foregroundDefault,color:l.TV.foregroundDefault}}],keyCombo:[l.l0.justify.center,{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function p(e){return(0,o.BX)(u.G,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},d.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,o.tZ)(u.G,{children:e.text}),e.keyCombo?(0,o.tZ)(u.G,{css:h.keyCombo,children:(0,o.tZ)(a.bM,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},13502:function(e,n,t){t.d(n,{j:function(){return w}});var r=t(27387),o=t(96583),i=t(3796),l=t(62764),a=t(14118),c=t(54505),u=t(86201),s=t(6674),d=t(85551),f=t(26996),h=t(43447),p=t(89774),v=t(98514),m=t(71920),g=t(63163),Z=t(31252),b=t(70625),y=t(75271),x=t(6843),C=t(70108);function w(e){var n,t,w,S,_,E,T,k,A,R,I,G,D,B=e.xterm,P=e.openAIWithMessage,X=e.openShellSearch,L=e.openSearchAndReplace,N=e.openGeneratePrompt,M=e.isOutputsTerminal,O=(t=(n={xterm:B,openAIWithMessage:P,openGeneratePrompt:N}).xterm,w=n.openAIWithMessage,S=n.openGeneratePrompt,_=(0,a.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),E=(0,a.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),T=(0,Z.gf)(C.CH.id),(0,y.useMemo)(function(){if(!_){var e=[];if(E&&S&&e.push({match:x.pl,data:{type:"action",label:"Generate",icon:(0,i.tZ)(h.Z,{color:g.TV.blurpleStronger}),keyboardShortcut:T,run:function(){S()}}}),w&&e.push({match:x.pl,data:{type:"action",label:"Explain",icon:(0,i.tZ)(f.Z,{color:g.TV.blurpleStronger}),run:function(){var e,n;w((n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(n,"\n```\n")))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,i.tZ)(d.Z,{})},commands:function(){return e}}}},[E,_,w,T,S,null==t?void 0:t._term])),U=(A=(k={xterm:B,openShellSearch:X,openSearchAndReplace:L,isOutputsTerminal:void 0!==M&&M}).xterm,R=k.openShellSearch,I=k.openSearchAndReplace,G=k.isOutputsTerminal,(0,y.useMemo)(function(){var e=[];if(R){var n=G?(0,i.tZ)(m.Z,{}):(0,i.tZ)(v.Z,{});e.push({match:x.pl,data:{type:"action",label:G?"Find in Console":"Find in Shell",icon:n,run:function(){var e;R(null!==(e=null==A?void 0:A._term.getSelection())&&void 0!==e?e:"")}}})}if(I&&e.push({match:x.pl,data:{type:"action",label:"Find in Repl",icon:(0,i.tZ)(p.Z,{}),run:function(){var e;I(null!==(e=null==A?void 0:A._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,i.tZ)(p.Z,{})},commands:function(){return e}}},[A,R,I,G])),q=(D=function(){return window.navigator.userAgent.includes("Linux")},(0,y.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,i.tZ)(u.Z,{})},commands:function(){return[{match:x.pl,data:{type:"action",label:"Copy",icon:(0,i.tZ)(s.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,shift:D(),key:"c"}),run:function(){var e,n=null!==(e=null==B?void 0:B._term.getSelection())&&void 0!==e?e:"";(0,c.Z)(n)}}},{match:x.pl,data:{type:"action",label:"Paste",icon:(0,i.tZ)(u.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,shift:D(),key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),l.kg.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==B||B._term.paste(e),[2]}})})()}}}]}}},[B]));return(0,y.useMemo)(function(){var e=[];return O&&e.push(O),U&&e.push(U),q&&e.push(q),{data:{type:"context",label:"Search actions",icon:(0,i.tZ)(p.Z,{})},commands:function(){return e}}},[O,U,q])}},16642:function(e,n,t){t.d(n,{R:function(){return u}});var r=t(3796),o=t(62279),i=t(63163),l=t(7420),a=t(75271),c=(0,o.iv)(i.l0.display.flex,i.l0.align.center,i.l0.height(30),{"input, button":[i.l0.my(0),i.l0.mx(4)],input:[i.l0.py(4),i.l0.px(8),i.l0.backgroundColor.backgroundDefault,i.l0.color.foregroundDefault,i.l0.height(24),i.l0.width(85),i.l0.borderRadius(4),i.l0.focusRing,{border:"none",boxShadow:"none","&::placeholder":[i.l0.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:i.TV.accentPrimaryDefault}]}]});function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,i=e.findPrevious,u=e.exit,s=(0,a.useRef)(null);(0,a.useEffect)(function(){s.current&&s.current.focus()},[]);var d=function(e){if("Escape"===e.key){u();return}"Enter"===e.key&&(e.shiftKey?i(n):o(n))};return(0,r.BX)("div",{css:c,children:[(0,r.tZ)("input",{ref:s,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return o(n)},children:"Next"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return i(n)},children:"Previous"}),(0,r.tZ)(l.Z,{size:"small",onClick:u,children:"Exit"})]})}},70108:function(e,n,t){t.d(n,{CH:function(){return m},Ch:function(){return Z},bW:function(){return b},qj:function(){return o}});var r,o,i=t(3796),l=t(14118),a=t(42965),c=t(31252),u=t(38751),s=t(75271),d=t(70625),f=t(36809),h=t(53616),p=t(29574);(r=o||(o={})).Prompt="Prompt",r.CommandStart="CommandStart",r.CommandExecuted="CommandExecuted",r.CommandFinished="CommandFinished";var v={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},m={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,d.l2)({cmdOrCtrl:!0,key:"i"})},g=(0,f.X)({root:{marginLeft:"auto"}}),Z=133;function b(e){var n=e.onFTCSState,t=e.onOpenGeneratePrompt,r=e.onUpdateCurrentPromptLineNumber,o=(0,l.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),d=(0,l.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),f=!o&&d,Z=(0,p.Gn)("fontSize").preferences.fontSize,b=(0,s.useRef)(null),y=(0,s.useRef)(null),x=(0,a.T3)(),C=(0,c.gf)(m.id),w=(0,s.useRef)(null);return(0,s.useCallback)(function(e,o){var l=v[o.split(";")[0]];if(l&&n&&n({state:l,data:o.split(";")[1]}),"B"===o){if(!f)return;var a,c,s=e.buffer.active,d=s.cursorX,p=s.cursorY;r(p),b.current&&b.current.dispose(),y.current&&y.current.dispose(),w.current&&(w.current.unmount(),w.current=null);var m=Math.round(12.6);b.current=e.registerMarker(0),y.current=null!==(c=e.registerDecoration({marker:b.current,x:Math.max(0,e.cols-m),width:m,layer:"top"}))&&void 0!==c?c:null,null===(a=y.current)||void 0===a||a.onRender(function(n){for(var r=!1,o=e.buffer.active._buffer.lines._array[p],l=d;l<e.cols;l++)if((null==o?void 0:o.hasContent(l))!==0){r=!0;break}var a=!r;w.current||(w.current=(0,u.createRoot)(n)),w.current.render(a?(0,i.tZ)(h.s,{css:g.root,onClick:function(e){e.stopPropagation(),t()},keyCombo:x?void 0:C,text:"Generate",fontSize:Math.round(.9*Z)}):null)})}},[f,t,r,x,C,Z,n])}},6829:function(e,n,t){t.d(n,{x:function(){return s}});var r=t(41733),o=t(21262),i=t(71440),l=t(9122);function a(){var e=(0,o._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return a=function(){return e},e}var c={},u=(0,i.Ps)(a());function s(){var e,n=(e=(0,r._)({},c,void 0),l.a(u,e)).data;return(null==n?void 0:n.currentUser)||void 0}},27030:function(e,n,t){t.d(n,{k:function(){return d}});var r=t(7391),o=t(41733),i=t(21262),l=t(71440),a=t(9122);function c(){var e=(0,i._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,l.Ps)(c());function d(){var e,n,t=(e=(0,o._)({},u,void 0),a.a(s,e)).data,i=(0,r.useRouter)();return(null==t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.isAdmin)||!!i.query.debug}},9220:function(e,n,t){t.d(n,{o:function(){return o}});var r=t(86466),o="color-mix(in srgb, ".concat(r.vb.interactiveBackground," 60%, ").concat(r.vb.surfaceBackground,")")},19236:function(e,n,t){t.d(n,{L5:function(){return b},Wk:function(){return I},Xq:function(){return P},Y6:function(){return y},bS:function(){return G},c4:function(){return T},dr:function(){return x},qs:function(){return w},u1:function(){return E}});var r=t(27387),o=t(66626),i=t(63257),l=t(96583),a=t(52657),c=t(83059),u=t(15185),s=t(41974),d=t(49853),f=t(80951),h=t(75271),p=t(65559),v=t(6038),m=t(572),g=(0,d.cn)({}),Z=(0,d.cn)(null,function(e,n,t){n(g,function(e){return(0,s.Uy)(e,function(e){null===t.actions?delete e[t.paneId]:e[t.paneId]=t.actions})})});function b(e,n){var t=B(),r=(0,v.$X)(Z),o=(0,a.Z)(e);(0,h.useEffect)(function(){var e;return r({paneId:t,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:t,actions:null})}},[r,t,o].concat((0,i._)(n)))}function y(e){var n=(0,c.Z)(function(){return(0,f.kv)(g,function(n){return e?n[e]:{}})},[e]);return(0,v.Hg)(n)}function x(){var e=(0,v.XD)(g);return(0,h.useCallback)(function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:null},[e])}var C=(0,d.cn)(function(e){var n=e(m._s);if(!n||!n.isVisible)return null;var t=!0,r=!1,i=void 0;try{for(var l,a=e(p.A1)[Symbol.iterator]();!(t=(l=a.next()).done);t=!0){var c,u=(0,o._)(l.value,2),s=u[0],d=u[1];if("codeEditor"===d.type&&d.data.path===n.path){var f=null!==(c=e(g)[s])&&void 0!==c?c:null;return(null==f?void 0:f.type)==="codeEditor"?f:null}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null});function w(){return(0,v.yL)(C)}var S=(0,d.cn)(new Map),_=(0,d.cn)(null,function(e,n,t,r){n(S,function(e){var n=new Map(e);return null===r?n.delete(t):r&&n.set(t,r),n})});function E(){return(0,v.$X)(_)}function T(){var e,n,t=(e=(0,v.rF)(),(0,h.useCallback)(function(n){return e((0,f.kv)(g,function(e){return e[n]}))},[e]));return(0,h.useCallback)((n=(0,r._)(function(e){return(0,l.Jh)(this,function(n){return[2,new Promise(function(n){var r=t(e);if(r.current){n(r.current);return}var o=r.subscribe(function(e){e&&(n(e),o())})})]})}),function(e){return n.apply(this,arguments)}),[t])}var k=(0,d.cn)(new Map),A=(0,d.cn)(null,function(e,n,t){n(k,function(e){return(0,s.Uy)(e,function(e){null===t.focus?e.delete(t.paneId):e.set(t.paneId,t.focus)})})});function R(e){var n=document.activeElement;return!!e&&!!n&&e!==n&&e.contains(n)}function I(e,n){var t=(0,a.Z)(e),r=B(),l=(0,u.Z)(),c=(0,h.useRef)(!l),s=(0,v.$X)(A),d=(0,v.XD)(p.J1),f=(0,v.XD)(S),m=(0,o._)((0,h.useState)(null),2),g=m[0],Z=m[1];return(0,h.useEffect)(function(){t.current&&Z(t.current())},n?(0,i._)(n):[]),(0,h.useEffect)(function(){var e=function(e){d()===r&&e.target!==f().get(r)&&(c.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}},[d,f,r]),(0,h.useEffect)(function(){if(g){var e=function(){g.focus()};return c.current&&d()===r&&!R(f().get(r))&&e(),s({paneId:r,focus:e}),function(){s({paneId:r,focus:null})}}},[g,s,r,d,f,l]),Z}function G(){var e=(0,v.XD)(k),n=(0,v.XD)(S);return(0,c.Z)(function(){return function(t){var r=e().get(t),o=n().get(t);if(!R(o)){if(r){r();return}null==o||o.focus()}}},[e,n])}var D=(0,h.createContext)(null);function B(){var e=(0,h.useContext)(D);if(!e)throw Error("Expected pane id in context");return e}var P=D.Provider},56738:function(e,n,t){t.d(n,{F:function(){return M},Z:function(){return U}});var r,o=t(27387),i=t(66626),l=t(63257),a=t(96583),c=t(25722),u=t(29574),s=t(32622),d=t(23666),f=t(52657),h=t(54505),p=t(70657),v=t(76881),m=t(70625),g=t(10126),Z=t(75271),b=t(37862),y=t(30826),x=t.n(y)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),o=0;o<t;o++)r[o]=n.charCodeAt(o);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),C="replit-icons-font",w=t(10777),S="BESbswy";function _(e){return E.apply(this,arguments)}function E(){return(E=(0,o._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return k.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([A("serif",e),A("sans-serif",e),A("monospace",e)])]}})})).apply(this,arguments)}function T(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function k(){return(k=(0,o._)(function(e,n){var t,r,o,i,l,c;return(0,a.Jh)(this,function(a){return t=n.fontInfo,o=void 0===(r=n.characters)?S:r,l=void 0===(i=n.timeout)?3e3:i,c=T(t),[2,new Promise(function(n,r){var i=!1,a=w.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),u=setTimeout(function(){i=!0,a("xterm font loading timed out"),n()},l);e.load(c,o).then(function(){i||(clearTimeout(u),n())}).catch(function(e){i||(clearTimeout(u),r(e))})})]})})).apply(this,arguments)}function A(e,n){return R.apply(this,arguments)}function R(){return(R=(0,o._)(function(e,n){var t,r,o,i,l,c,u,s,d;return(0,a.Jh)(this,function(a){return(t=n.fontInfo,o=void 0===(r=n.characters)?S:r,l=void 0===(i=n.timeout)?3e3:i,c=T(t),(u=document.createElement("span")).innerText=o,u.style.font="normal normal 100px ".concat(e),u.style.position="absolute",u.style.left="-9999px",u.style.top="-9999px",document.body.appendChild(u),s=u.offsetWidth,u.style.font=c,(d=function(){return s!==u.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(o),document.body.removeChild(u),e())},50),o=setTimeout(function(){if(clearInterval(r),document.body.removeChild(u),d()){e();return}n(Error("Font loading timed out "+t.family))},l)})]})})).apply(this,arguments)}function I(e){c.Tb(e)}var G='"ReplitHack"',D=String.fromCharCode(61095);function B(){return(B=(0,o._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(C)){var e=document.createElement("style");e.id=C,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([_({fontInfo:{family:"replit-icons"},characters:D}).catch(I),_({fontInfo:{family:G,weight:"400"}}).catch(I),_({fontInfo:{family:G,weight:"400",style:"italic"}}).catch(I),_({fontInfo:{family:G,weight:"700"}}).catch(I),_({fontInfo:{family:G,weight:"700",style:"italic"}}).catch(I)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var P=t(37633),X=t(97432),L=t(14118),N=t(49500),M=1e4;function O(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function U(e){var n,r,y,C,w,S,_,E,T=(0,i._)((0,Z.useState)(null),2),k=T[0],A=T[1],R=(0,i._)((0,Z.useState)(null),2),I=R[0],D=R[1],U=(0,P.f)(),q=(0,u.Gn)("fontSize","accessibleTerminal","shellBellAudio").preferences,V=q.fontSize,H=q.accessibleTerminal,F=q.shellBellAudio,W=(0,v.uV)(),z=(0,d.Z)(),j=(0,X.d)(),$=null==e?void 0:e.openFile,K=(0,f.Z)(null==e?void 0:e.openWebview),Y=null==e?void 0:e.listFiles,J=(0,Z.useMemo)(function(){return $&&Y?{openFile:$,listFiles:Y}:null},[$,Y]),Q=(0,L.P5)({controlName:"flag-nudges-pane-linking",logFlagToAnalytics:!1}),ee=(0,f.Z)(null==e?void 0:e.onInBandOSCMessages),en={screenReaderMode:H,fileLinking:J,terminalTheme:U,fontSize:V,scrollback:null==e?void 0:e.scrollback,performPaneOperation:null!==(E=null==e?void 0:e.performPaneOperation)&&void 0!==E?E:null,flagNudgesPaneLinking:Q,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics},et=(0,f.Z)(en),er=(0,b.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==I||I.fit())},{type:"debounce",wait:200}),eo=(0,Z.useRef)(null),ei=(0,Z.useRef)(null),el=(0,f.Z)(null==e?void 0:e.size),ea=(0,g.Sy)();return(0,Z.useLayoutEffect)(function(){if(k){var n=[];return(function(){return r.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){c.$e(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),c.Tb(Error("Loading chunk failed"))});return}W({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}function r(){return(r=(0,o._)(function(){var r,o,u,d,f,v,Z,b,y,x,C,w,S,_,E,T,A,R,I,P,X,L,U,q,V,H;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([Promise.all([(0,p.u)(function(){return t.e(573).then(t.t.bind(t,25295,23))}),(0,p.u)(function(){return t.e(9970).then(t.t.bind(t,9970,23))}),(0,p.u)(function(){return t.e(4819).then(t.t.bind(t,14819,23))}),(0,p.u)(function(){return t.e(8650).then(t.t.bind(t,8650,23))}),(0,p.u)(function(){return t.e(7040).then(t.t.bind(t,57040,23))}),(0,p.u)(function(){return t.e(5901).then(t.bind(t,95901))}),(0,p.u)(function(){return t.e(6141).then(t.bind(t,76141))}),(0,p.u)(function(){return t.e(2527).then(t.t.bind(t,72527,23))}),(0,p.u)(function(){return t.e(783).then(t.t.bind(t,20783,23))})]),function(){return B.apply(this,arguments)}()])];case 1:var F;if(Z=i._.apply(void 0,[a.sent(),1]),y=(b=(0,i._)(Z[0],9))[0].Terminal,x=b[1].FitAddon,C=b[2].SearchAddon,w=b[3].WebLinksAddon,S=b[4].Unicode11Addon,_=b[5].FileLinkAddon,E=b[6].PaneLinkAddon,T=b[7].CanvasAddon,A=b[8].WebglAddon,!k)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(R=et.current.scrollback)&&void 0!==R?R:M,tabStopWidth:4,fontFamily:"".concat(G,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:et.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:et.current.terminalTheme,screenReaderMode:et.current.screenReaderMode,logger:{trace:function(e,n){return(r=N).trace.apply(r,["xterm: "+e].concat((0,l._)(n)))},debug:function(e,n){return(o=N).debug.apply(o,["xterm: "+e].concat((0,l._)(n)))},info:function(e,n){return(u=N).info.apply(u,["xterm: "+e].concat((0,l._)(n)))},warn:function(e,n){return(d=N).warn.apply(d,["xterm: "+e].concat((0,l._)(n)))},error:function(e,n){"string"==typeof e&&e.includes("Parsing error")||N.error("xterm: "+e,n)}}},(null===(f=el.current)||void 0===f?void 0:f.cols)!==void 0&&(I.cols=el.current.cols),(null===(v=el.current)||void 0===v?void 0:v.rows)!==void 0&&(I.rows=el.current.rows),P=new y(I),et.current.fileLinking?(eo.current=new _(et.current.fileLinking.openFile,et.current.fileLinking.listFiles),P.loadAddon(eo.current)):eo.current=null,!ei.current&&(null==e?void 0:e.performPaneOperation)&&(ei.current=new E(e.performPaneOperation,Q,e.emitPaneMetrics)),ei.current&&P.loadAddon(ei.current),X=new x,P.loadAddon(X),L=new w((F=function(e){z?s.X.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==K.current){K.current(t.pathname,parseInt(t.port,10));return}F(n)})),P.loadAddon(L),U=new C,P.loadAddon(U),q=new S,P.loadAddon(q),P.unicode.activeVersion="11",P.open(k),n.push(function(){try{P.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!O())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(O()||!j||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new T;P.loadAddon(e);return}var n=new A;P.loadAddon(n),n.onContextLoss(function(){n.dispose(),P.loadAddon(new T)})}catch(e){var t=new T;P.loadAddon(t)}}(),V=!1,H=null,P.attachCustomKeyEventHandler(function(e){var n=(0,m.IX)(e);if(n){var t=n;H&&(t=(0,m.cZ)(H,n));var r=ea(t);switch(r.kind){case g.Xp.NoMatch:H=null;break;case g.Xp.WaitingForChord:return H=r.key,!1;case g.Xp.MatchFound:return H=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&P.hasSelection()&&(0,h.Z)(P.getSelection()).catch(function(e){c.$e(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),c.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!V)&&(V="escape"===e.key.toLowerCase(),!0))}),ee.current&&Object.entries(ee.current).forEach(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];P.parser.registerOscHandler(Number(t),function(e){return r(P,e),!0})}),D({onKey:P.onKey.bind(P),onData:P.onData.bind(P),onResize:P.onResize.bind(P),write:P.write.bind(P),fit:function(){var e=k.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&X.fit()},focus:function(){return P.focus()},clear:function(){return P.clear()},findPrevious:function(e,n){return U.findPrevious(e,n)},findNext:function(e,n){return U.findNext(e,n)},getSize:function(){return{cols:P.cols,rows:P.rows}},paste:function(e){return P.paste(e)},_term:P}),er(k),[2]}})})).apply(this,arguments)}},[k,er,et,W,el,ea,z,j,K,ee,null==e?void 0:e.performPaneOperation,null==e?void 0:e.emitPaneMetrics,Q]),n=null==I?void 0:I._term,r=en.screenReaderMode,y=en.fileLinking,C=en.terminalTheme,w=en.performPaneOperation,S=en.emitPaneMetrics,_=en.flagNudgesPaneLinking,(0,Z.useEffect)(function(){n&&C&&(n.options.theme=C)},[n,C]),(0,Z.useEffect)(function(){n&&(n.options.screenReaderMode=r)},[n,r]),(0,Z.useEffect)(function(){if(n){if(y){if(!eo.current){var e=!1;return t.e(5901).then(t.bind(t,95901)).then(function(t){var r=t.FileLinkAddon;e||(eo.current=new r(y.openFile,y.listFiles),n.loadAddon(eo.current))}),function(){e=!0}}eo.current.update(y.openFile,y.listFiles),eo.current.reactivate()}else eo.current&&eo.current.deactivate();if(w){if(!ei.current){var r=!1;return t.e(6141).then(t.bind(t,76141)).then(function(e){var t=e.PaneLinkAddon;r||(ei.current=new t(w,_,S),n.loadAddon(ei.current))}),function(){r=!0}}ei.current.update(w,null!=S?S:null)}else ei.current&&ei.current.deactivate()}},[n,y,eo,ei,w,S,_]),(0,Z.useEffect)(function(){var e=null==I?void 0:I._term;e&&V&&e.options.fontSize!==V&&(e.options.fontSize=V,e.refresh(0,e.rows-1),I.fit())},[V,I]),(0,Z.useEffect)(function(){if(F){var e=null==I?void 0:I._term;if(e)return e.onBell(x).dispose}},[F,I]),[I,A]}},37633:function(e,n,t){t.d(n,{f:function(){return l}});var r=t(14861),o=t(97420),i=t(75271);function l(){var e=(0,r.F)().values;return(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},35177:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(12285),o=t(45077),i=function(){"use strict";function e(){(0,r._)(this,e)}return e.get=function(e,n){var t,r;try{t=sessionStorage.getItem(e)}catch(e){}if(null==t)return null;try{r=JSON.parse(t)}catch(e){}return null==r||"array"===n&&!Array.isArray(r)||n&&(void 0===r?"undefined":(0,o._)(r))!==n?null:r},e.set=function(e,n){try{sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()}}]);
//# sourceMappingURL=1893-4301f1e21e6f7be7.js.map