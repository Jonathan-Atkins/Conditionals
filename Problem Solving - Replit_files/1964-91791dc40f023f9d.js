!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="14a7b139-cb92-4a3a-8793-7b6a738e5e1c",e._sentryDebugIdIdentifier="sentry-dbid-14a7b139-cb92-4a3a-8793-7b6a738e5e1c")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"83fc2cd4"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1964,7631],{73307:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(3796),i=n(62279),o=n(36809),a=n(63163),l=(0,i.iv)([a.l0.display.flex,a.l0.align.center,a.l0.justify.center,a.l0.backgroundColor.accentNegativeDefault,a.l0.minWidth(16),a.l0.height(16),a.l0.color.white,a.l0.position.absolute,a.l0.fontSize(a.TV.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,o.X)({root:a.l0.display.flex,unreadIndicator:[a.l0.width(5),a.l0.height(5),a.l0.backgroundColor.redDefault,a.l0.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:l,countOverflow:[l,{transform:"translate(25%, -50%)"}]});function s(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.BX)("span",{css:c.root,children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),t?(0,r.tZ)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.tZ)("div",{css:l?c.countOverflow:c.count,children:s})]})}},87903:function(e,t,n){n.d(t,{AS:function(){return E},Hj:function(){return P},Rp:function(){return D},Tt:function(){return L},gE:function(){return B},j7:function(){return k},xT:function(){return _},yi:function(){return S}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122),l=n(82303),c=n(91476);function s(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return b=function(){return e},e}var w={},Z=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),Z,x),k=(0,o.Ps)(f(),Z,C),S=(0,o.Ps)(p(),k);function _(e){var t=(0,r._)({},w,e);return a.a(S,t)}var T=(0,o.Ps)(h(),k);function E(e){var t=(0,r._)({},w,e);return l.D(T,t)}var R=(0,o.Ps)(m(),k);function D(e){var t=(0,r._)({},w,e);return l.D(R,t)}var I=(0,o.Ps)(g(),k);function B(e){var t=(0,r._)({},w,e);return l.D(I,t)}var A=(0,o.Ps)(v());function P(e){var t=(0,r._)({},w,e);return l.D(A,t)}var G=(0,o.Ps)(y(),k);function L(e){var t=(0,r._)({},w,e);return c.m(G,t)}b()},9487:function(e,t,n){n.d(t,{Ft:function(){return d},Vy:function(){return m},kL:function(){return h}});var r=n(27387),i=n(66626),o=n(96583),a=n(80403),l=n(25722);function c(){return(c=(0,r._)(function(e,t,n){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(n===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}})})).apply(this,arguments)}var s=n(23882),u=n(75271);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,i,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,!t.path)return[2,null];return[4,function(e,t,n){return c.apply(this,arguments)}(t,r,n)];case 1:if(!(s=o.sent()))return[2,null];return d=function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=a.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(e){l.Tb(e)}}},[2,{anchor:t,newSelection:s,newPosition:u,getHighlight:d,snippet:p(i,s)}]}})})).apply(this,arguments)}var p=function(e,t){var n=a.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var l=r;l<=i;l++)o.push(n.line(l).text);return{startLineNumber:r,lines:o}};function h(e){var t=(0,s.Z)().fs,n=(0,u.useRef)(null),r=(0,u.useRef)(null),o=(0,i._)((0,u.useState)(!1),2),a=o[0],l=o[1];return(0,u.useEffect)(function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}},[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,s.Z)().fs,n=(0,i._)((0,u.useState)(null),2),r=n[0],o=n[1],a=h(null==e?void 0:e.path),c=a.contentRef,f=a.loadedFile,p=a.transformSelectionRef;return(0,u.useEffect)(function(){(null==e?void 0:e.path)&&f&&p.current&&null!==c.current&&d({anchor:e,version:t.getOTVersion(e.path),transformSelection:p.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Tb(e)})},[t,e,f,p,c]),r}},38970:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.D(s,t)}},61177:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(75271),o=n(16155),a=n(38970);function l(e){var t=(0,o.Z)(),n=(0,r._)((0,a.n)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[t,e,n])}},65894:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(16155),i=n(41733),o=n(21262),a=n(71440),l=n(9122);function c(){var e=(0,o._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e=(c={variables:{replId:(0,r.Z)()}},d=(0,i._)({},s,c),l.a(u,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var t=[];(null===(f=e.repl.owner)||void 0===f?void 0:f.username)&&"User"===e.repl.owner.__typename&&t.push(e.repl.owner);var n=!0,o=!1,a=void 0;try{for(var c,d,f,p,h=e.repl.permissions[Symbol.iterator]();!(n=(p=h.next()).done);n=!0){var m,g=p.value;(null===(m=g.user)||void 0===m?void 0:m.username)&&t.push(g.user)}}catch(e){o=!0,a=e}finally{try{n||null==h.return||h.return()}finally{if(o)throw a}}return t}},46074:function(e,t,n){n.d(t,{q:function(){return B},J:function(){return I}});var r,i,o,a=n(41733),l=n(30509),c=n(98924),s=n(66626),u=n(3796),d=n(12285),f=n(4955),p=n(9670),h=n(80403),m=n(3030),g=n(25907),v=m.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),y=m.p.line({attributes:{class:"cm-diff-inserted"}}),b=m.p.line({attributes:{class:"cm-diff-deleted"}}),w=h.Py.define({map:function(e,t){return e.map(t)}}),Z=function(e){"use strict";(0,f._)(n,e);var t=(0,p._)(n);function n(){return(0,d._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(m.l9);function x(e){var t=new h.f_,n=new Z;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)t.add(s,s,m.p.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[v,m.lg.fromClass(function e(r){"use strict";(0,d._)(this,e);var i=new h.f_,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,f=r.state.doc.line(u);i.add(f.from,f.from,n)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),h.QQ.define({create:function(){return m.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return m.tk.decorations.from(e)}})]}var k=n(91166),S=n(11515),_=n(75271),T=n(53250),E=(r=function(e,t){return m.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},i=new h.F6,o=new h.F6,{extensions:function(){return{right:i.of([]),left:o.of([])}},setup:function(e,t){e.dispatch({effects:o.reconfigure(r(e,t))}),t.dispatch({effects:i.reconfigure(r(t,e))})}}),R=E.extensions,D=E.setup;function I(e){var t=e.left,n=e.right,r=e.showDiffDecorations,i=void 0===r||r,o=t.code,u=(0,c._)(t,["code"]),d=n.code,f=(0,c._)(n,["code"]),p=(0,S.Z)(),m=p.ref,v=p.view,Z=(0,S.Z)(),k=Z.ref,T=Z.view,E=(0,_.useMemo)(function(){var e=R().left;return u.extensions?[u.extensions,e]:e},[u.extensions]),I=(0,_.useMemo)(function(){var e=R().right;return f.extensions?[f.extensions,e]:e},[f.extensions]);u=(0,l._)((0,a._)({},u),{extensions:E}),f=(0,l._)((0,a._)({},f),{extensions:I});var B=(0,s._)((0,_.useState)(!1),2),A=B[0],P=B[1],G=(0,s._)((0,_.useState)(!1),2),L=G[0],N=G[1];return(0,_.useEffect)(function(){if(v&&T&&A&&L&&i){var e=setTimeout(function(){var e;D(v,T),e=(0,g.Bz)(v.state.doc.sliceString(0),T.state.doc.sliceString(0)),v.dispatch({effects:[h.Py.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:b})),w.of(x(e.leftPadded))]}),T.dispatch({effects:[h.Py.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:y})),w.of(x(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[v,T,A,L,i]),(0,_.useEffect)(function(){v&&(v.dispatch({changes:{from:0,to:v.state.doc.length,insert:o}}),P(!0))},[o,v]),(0,_.useEffect)(function(){T&&(T.dispatch({changes:{from:0,to:T.state.doc.length,insert:d}}),N(!0))},[d,T]),{left:{view:v,ref:m,code:o,options:u,ready:A},right:{view:T,ref:k,code:d,options:f,ready:L}}}function B(e){var t=e.diffViewer,n=(0,c._)(e,["diffViewer"]),r=(0,a._)({},t.options,n);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(k.ZP,(0,a._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,u.tZ)(T.Z,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}},25907:function(e,t,n){n.d(t,{Bz:function(){return h},PO:function(){return m}});var r=n(12285),i=n(66626),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function p(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function h(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var o=d(e+(n?"":"\n"),t+(r?"":"\n")),a=0,l=0,h=[],m=[],g=[],v=[],y=0,b=0,w=0;w<o.length;w++){var Z=(0,i._)(o[w],2),x=Z[0],C=f(Z[1]);switch(x){case c:var k,S=(0,i._)(null!==(k=o[w+1])&&void 0!==k?k:[],2),_=S[0],T=S[1];a+=C;for(var E=0;E<C;E++)h.push(a-E);var R=C;_===s&&(R-=f(T));var D=p(R,l,t);D&&v.push(D);break;case s:var I,B=(0,i._)(null!==(I=o[w-1])&&void 0!==I?I:[],2),A=B[0],P=B[1];l+=C;for(var G=0;G<C;G++)m.push(l-G);var L=C;A===c&&(L-=f(P));var N=p(L,a,e);N&&g.push(N);break;case u:l>b&&(b=l),a>y&&(y=a),a+=C,l+=C}}return{leftPadded:g.filter(function(e){return e.lineNumber<b}),rightPadded:v.filter(function(e){return e.lineNumber<y}),leftColored:h,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){"use strict";function e(t,n){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,p=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=(0,i._)(h.value,2),v=g[0],y=g[1].split("\n");""===y[y.length-1]&&y.pop();var b=!0,w=!1,Z=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value;a.push([v,k])}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}catch(e){f=!0,p=e}finally{try{l||null==m.return||m.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,_=0,T=1,E=!0,R=!1,D=void 0;try{for(var I,B=a[Symbol.iterator]();!(E=(I=B.next()).done);E=!0){var A=(0,i._)(I.value,2),P=A[0],G=A[1];switch(P){case c:this.linePositions.set(S,_),this.lineLengths.set(S,G.length),this.deleted.add(S),_+=G.length+1,S++;break;case s:var L=S-1,N=this.inserted.get(L);N||(N=[],this.inserted.set(L,N)),N.push({number:T,content:G}),T++;break;case u:this.linePositions.set(S,_),this.lineLengths.set(S,G.length),_+=G.length+1,S++,T++}}}catch(e){R=!0,D=e}finally{try{E||null==B.return||B.return()}finally{if(R)throw D}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null},t.offsetFor=function(e){var t,n,r;r=0+(null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:o}},t.lines=function(){var e,t,n,r,a,l,c,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(c=this.line(l)))throw Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},e}()},76659:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(12285),i=n(96583),o=n(96442),a=function(){"use strict";function e(t,n,i,o){(0,r._)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n,r){var i=this.b,a=(0,o.U_)(t,i,{chunks:this.chunks,changesA:n},r),l=(0,o.XW)(t,i,a);return new e(t,i,a,l)},t.updateB=function(t,n,r){var i=this.a,a=(0,o.U_)(i,t,{chunks:this.chunks,changesB:n},r),l=(0,o.XW)(i,t,a);return new e(i,t,a,l)},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},t.iterRanges=function(){var e,t,n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(t,n,r){var i=(0,o.U_)(t,n,void 0,r),a=(0,o.XW)(t,n,i);return new e(t,n,i,a)},e}()},52870:function(e,t,n){n.d(t,{p:function(){return q}});var r,i=n(80403),o=n(12285),a=n(4384),l=n(4955),c=n(9670),s=n(3030),u=n(33083),d=n(99415),f=n(76659),p=n(66299),h=i.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),m=i.QQ.define({create:function(){return{diff:null,tree:d.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(h),o=null===(n=t.state.facet(u.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===d.mp.empty?e:{diff:null,tree:d.mp.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=f.z.create(i,t.newDoc),l=d.mp.empty),(null===(r=t.startState.facet(u.dK))||void 0===r?void 0:r.parser)!==o&&(l=d.mp.empty),o&&l.length!==a.a.length)?(l=(0,p.p)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),g=n(42516),v=n(63163),y="cm-inline-diff-line-deletion-base",b="cm-inline-diff-line-deletion",w="cm-inline-diff-text-deletion",Z="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",k="rgba(180, 0, 0, 0.075)",S="rgba(180, 0, 0, 0.125)",_="rgba(0, 180, 0, 0.075)",T="rgba(0, 180, 0, 0.125)",E="cm-inline-diff-marker",R="cm-inline-diff-marker-left",D="cm-inline-diff-marker-right";function I(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var B=s.tk.theme((r={},(0,g._)(r,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(v.TV.accentPrimaryDimmest," !important")}}),(0,g._)(r,".".concat(y),{background:I(k)}),(0,g._)(r,".".concat(b),{background:I(k,S)}),(0,g._)(r,".".concat(Z),{background:I(_)}),(0,g._)(r,".".concat(x),{background:I(_,T)}),(0,g._)(r,".".concat(C),{display:"inline-block",background:T,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(T),paddingLeft:"3px",marginLeft:"-6px"}}),(0,g._)(r,".".concat(w),{display:"inline-block",background:S,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(S),paddingLeft:"3px",marginLeft:"-6px"}}),(0,g._)(r,".".concat(E),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,g._)(r,".".concat(R),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,g._)(r,".".concat(D),{width:"50%",textAlign:"right"}),r)),A=n(96442),P=n(67464),G=n(81202),L=n.n(G),N=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r,i){var a;return(0,o._)(this,n),(a=t.call(this)).line=e,a.index=r,a.changed=i,a}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,p=null,h=null,m=function(t,n){if(!p)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,n-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var g=this.line[f].text;p={from:d,to:d+g.length}}if(!h){var v=!0,Z=!1,x=void 0;try{for(var C,k=this.changed[Symbol.iterator]();!(v=(C=k.next()).done);v=!0){var S=C.value;if(!(S.from>=p.to)&&!(S.to<=d)){var _=document.createElement("span");_.className=w,h={from:S.from,to:S.to,dom:_},d<h.from&&m(t,h.from),t.appendChild(_);break}}}catch(e){Z=!0,x=e}finally{try{v||null==k.return||k.return()}finally{if(Z)throw x}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(t,p.to),d>=p.to&&(p=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&L()(this.line,e.line)&&L()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,a._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(s.l9),O=s.p.line({class:Z}),U=s.p.line({class:x}),M=s.p.mark({class:C}),X=s.tk.decorations.compute([m],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,A.MF.B)===A.dQ.COVERED)o.push(U.range(e.from));else{o.push(O.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,A.Po)(e,t,A.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(M.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(m,!1);if(!n||!n.diff)return s.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromB!==f.endB)for(var p=r.b.lineAt(f.fromB),h=r.b.lineAt(f.endB),g=p.number;g<=h.number;g++)t(r.b.line(g),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var v=r.a.lineAt(f.fromA),y=(0,P.CT)(i,r.a,e,f.fromA,f.endA),b=0;b<y.length;b++){var w=y[b],Z=r.a.line(v.number+b),x=r.getLineChangeType(Z.number,A.MF.A)===A.dQ.COVERED?null:(0,A.Po)(Z,f,A.MF.A,!0),C=s.p.widget({widget:new N(w,Z.number,x),block:!0,side:-(y.length-b)});o.push(C.range(f.fromB))}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return s.p.set(o,!0)}),F=n(71215),W=(0,s.v5)({class:F.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return F.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,A.MF.B)){case A.dQ.COVERED:case A.dQ.MODIFIED:return F.vP;default:return null}},widgetMarker:function(e,t){if(!(t instanceof N))return null;var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,A.MF.A)){case A.dQ.COVERED:case A.dQ.MODIFIED:return F.We;default:return null}},initialSpacer:function(e){var t=e.state.field(m,!1);return(null==t?void 0:t.diff)?F.vP:F.Do},updateSpacer:function(e,t){var n=t.state.field(m,!1),r=(null==n?void 0:n.diff)?F.vP:F.Do;return e===r?e:r}}),V=n(68395),H=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=E,r.className=R,i.className=D,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(s.SJ),z=V.X4.of(function(e,t){if(t instanceof N)return new H(t.index,null)}),j=[V.gy.of(function(e,t){var n,r=e.state.field(m,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),o=r.diff.getCorrespondingLine(i.number,A.MF.B);return new H(null!==(n=null==o?void 0:o.number)&&void 0!==n?n:null,i.number)}}),z],q=i.r$.define({enables:function(e){return[h.computeN([e],function(t){return t.facet(e)}),F.Lw,m,B,X,j,W]}})},71215:function(e,t,n){n.d(t,{Do:function(){return I},Lw:function(){return _},Tr:function(){return d},Vt:function(){return D},We:function(){return E},vP:function(){return T},wp:function(){return R}});var r,i=n(12285),o=n(42516),a=n(4955),l=n(9670),c=n(3030),s=n(63163),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),p="".concat(f,"-insertion"),h="".concat(f,"-modified"),m="".concat(f,"-deleted"),g="".concat(f,"-file-added"),v="".concat(f,"-empty"),y=s.TV.greenDefault,b=s.TV.greenStronger,w=s.TV.blueDefault,Z=s.TV.blueStronger,x=s.TV.redDefault,C=s.TV.redStronger,k=s.TV.greenDimmer,S=s.TV.greenDefault,_=c.tk.theme((r={},(0,o._)(r,".".concat(d,":first-of-type, .").concat(f),{width:u}),(0,o._)(r,".".concat(p),{backgroundColor:y,"&.cm-activeLineGutter":{backgroundColor:b}}),(0,o._)(r,".".concat(h),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:Z}}),(0,o._)(r,".".concat(m),{backgroundColor:x,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,o._)(r,".".concat(g),{backgroundColor:k,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,o._)(r,".".concat(v),{opacity:0}),r)),T=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),E=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),D=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(g),e}return n}(c.SJ)),I=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(v),e}return n}(c.SJ))},34209:function(e,t,n){n.d(t,{el:function(){return c},er:function(){return u},iG:function(){return s}});var r=n(80403),i=n(25722),o=n(40455),a=r.Py.define(),l=r.Py.define(),c=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)})}},s=function(e){var t=e.state.field(u,!1);if(!t){i.Tb(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:t,effects:l.of(null)})},u=r.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.is(a)&&(e=t.changes.invert(t.startState.doc)),s.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}})},43086:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return u}});var r=n(7351),i=n(52130),o=n(50461),a=n(5377),l=n(40455),c=n(78127),s=n(96034),u=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);if(!(null==t?void 0:t.presented)||Date.now()-t.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var f=t.changes.closestRange(u);if(f.value instanceof c.Yf){var p=f.value.unfulfilled.toString(),h=(0,s.L)(p,e.state.tabSize);if(h>0&&h>=e.state.tabSize)return!1}}var m=t.changes.asChangeSpec(),g=e.state.changes(m),v=t.changes.extendSelection(e.state.selection);return(0,r._B)(e),e.dispatch({changes:g,selection:v,scrollIntoView:!0,effects:a.OK.of(t.dismiss(a.VJ.ACCEPTED_BY_USER)),annotations:[l.Z.of(!0),i.Iv.of("full")]}),n.onSuggestionAccepted(e,t),!0},d=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);return null!=t&&!!t.presented&&(e.dispatch({effects:a.OK.of(t.dismiss(a.VJ.DISMISSED_BY_USER))}),n.onSuggestionExplicitlyDismissed(e,t),!0)}},50461:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(80403).r$.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null===(n=t.onDismiss)||void 0===n?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestIgnoredBackendOnly)||void 0===n?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestFirstEmit)||void 0===n?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestEndedWithNoSuggestion)||void 0===n?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestCompletelyPresented)||void 0===n?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(t,e,n)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionAccepted)||void 0===r?void 0:r.call(t,e,n)})}}}})},6466:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(29574),i=n(93322),o=n(41733),a=n(21262),l=n(71440),c=n(9122);function s(){var e=(0,a._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a,l=(0,r.Gn)("completeCodeEngine").preferences,s=(e=(0,o._)({},u,void 0),c.a(d,e)).data,f=null==l?void 0:l.completeCodeEngine;if(f&&(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.hasOverride)&&i.vw.has(f))return{engine:f,settings:i.Uw[f]};var p=null!==(a=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==a?a:i.OO;return{engine:p,settings:i.Uw[p]}}},32652:function(e,t,n){n.d(t,{Yy:function(){return i},ZP:function(){return h},G_:function(){return p}});var r,i,o=n(37701),a=n(41733),l=n(21262),c=n(71440),s=n(9122);function u(){var e=(0,l._)(['\n  query CompleteCode {\n    currentUser {\n      id\n      hasAiPro\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function p(e){return"None"!==e&&"BackendOnly"!==e}function h(){var e,t=(e=(0,a._)({},d,void 0),s.a(f,e)).data,n=(0,o.v)().isTeamWithAiDisabled,r=null==t?void 0:t.currentUser;return!r||r.hasKillswitch||n?"None":r.hasAiPro?"Pro":"Basic"}(r=i||(i={})).None="None",r.Basic="Basic",r.Pro="Pro",r.BackendOnly="BackendOnly"},1076:function(e,t,n){n.d(t,{Z:function(){return e9}});var r,i,o=n(27387),a=n(96583),l=n(25722),c=n(80403),s=n(3030),u=n(43086),d=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),f=n(12285),p=n(4384),h=n(5377),m=function(){"use strict";function e(t,n){(0,f._)(this,e),this.cooldown=t,this.ignored=n}var t=e.prototype;return t.delay=function(t){return new e(Date.now()+t,this.ignored)},t.ignore=function(t){return this.ignored!==t?new e(this.cooldown,t):this},t.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},t.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},t.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},t.handle=function(e,t){switch(t.reason){case h.VJ.FULLY_TYPED_INTO:case h.VJ.ACCEPTED_BY_USER:return this.clear();case h.VJ.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case h.VJ.INCOMPATIBLE_DOCUMENT_CHANGE:case h.VJ.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},t.isIgnored=function(e){return null!==this.ignored&&function(e,t){for(var n=Math.max(e.length,t.length),r=0,i=0;i<n;i++)e[i]!==t[i]&&r++;return 1-r/n}(this.ignored,e)>=.8},(0,p._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),g=c.r$.define({combine:function(e){return!e.length||e[0]}}),v=c.QQ.define({create:function(){return new m(null,null)},update:function(e,t){if(!t.state.facet(g)||(e=e.tick()).cooling)return e;var n=t.startState.field(h.WF,!1),r=t.state.field(h.WF,!1);return n&&r&&n.presented&&r.stopped?e.handle(n,r):e}}),y=n(81722),b=n(16634),w=n(40455),Z=c.QQ.define({create:function(){return null},update:function(e,t){if(t.annotation(w.Z)||!t.state.field(h.WF).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(c.YW.remote)?null!==e&&(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,y.zV)(n,r)&&(0,y.to)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:e}}),x=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.timeout=null}var t=e.prototype;return t.update=function(e){var t=this,n=e.startState.field(Z),r=e.state.field(Z);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[b.mb.of(b.xz.NOW)]})},2500)))},t.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),C=s.lg.fromClass(x,{provide:function(){return Z}}),k=n(41733),S=n(30509),_=n(33083),T=n(6715),E=n(50461);(r=i||(i={}))[r.HIGH=1]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-1]="LOW";var R=c.r$.define({combine:function(e){var t=e.filter(Boolean);return function(e){return t.map(function(t){return"function"==typeof t?t(e):t}).filter(Boolean).flat()}}}),D=function(){"use strict";function e(t){if((0,f._)(this,e),this.priority=null!==(n=t.priority)&&void 0!==n?n:i.NORMAL,this.header=t.header,this.segments=t.segments,this.accepted=0,this.curLength=0,this.segments.length){var n,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,t){return e+t.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var t=e.prototype;return t.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var t=this.segments[this.index-1],n=0===this.accepted&&this.header?this.header.length+t.length+1:t.length;return n>e?0:(this.accepted++,this.curLength+=n,n)},t.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},t.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,t){for(var n=t;t>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.acceptSegment(t);s&&(t-=s,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)break}return n-t},(0,p._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),I=function(){"use strict";function e(t){(0,f._)(this,e),this.priority=t,this.chunks=[],this.size=0}var t=e.prototype;return t.add=function(e){this.chunks.push(e),this.size+=e.maxLength},t.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},t.accept=function(){D.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(t){var n=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=r.get(s.priority);u||(u=new e(s.priority),n.push(u),r.set(s.priority,u)),u.add(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n},(0,p._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,t){return e+t.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}();function B(e,t){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(t);case"sql":case"lua":return"-- ".concat(t);case"html":case"svelte":case"xml":case"xsl":return"<!-- ".concat(t," -->");case"css":return"/* ".concat(t," */");case"tex":case"latex":case"matlab":return"% ".concat(t);case"vb":return"' ".concat(t);case"markdown":return"[]: # ".concat(t);case"handlebars":return"{{!-- ".concat(t," --}}");case"haml":return"-# ".concat(t);case"erb":return"<%# ".concat(t," %>");default:return"// ".concat(t)}}var A=n(31417),P=n(16689),G=n.n(P),L=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],N=L.reduce(function(e,t){return Math.max(e,t.length)},0),O=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(N,"}$")),U=null,M=function(){"use strict";function e(t){var n=this;(0,f._)(this,e),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null===(e=(t=n.config).onFinished)||void 0===e||e.call(t,null)}})}var t=e.prototype;return t.start=function(){var e=this;return(0,o._)(function(){var t,n,r,i,o,l,c,s,u,d,f,p,h,m,g,v,b,w,Z,x,C,k,S,_,T,E,R,D,I,B,P,M;return(0,a.Jh)(this,function(a){switch(a.label){case 0:a.trys.push([0,13,,14]),i="",o=!0,l=!1,c=void 0;try{for(s=e.config.prefix.iter(-1)[Symbol.iterator]();!(o=(u=s.next()).done)&&(f=(d=u.value).trimEnd(),i=(d?d.slice(f.length):"\n")+i,!(f.length>0));o=!0);}catch(e){l=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}p=e.config.prefix.length-i.length,h=i?e.config.prefix.slice(0,p):e.config.prefix,g=e.config.request({prefix:h.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(m=e.config.header)&&void 0!==m?m:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),v=!0,b=!!i,w="",Z=!1,x=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),k=(0,A._)(g),a.label=2;case 2:return[4,k.next()];case 3:if(!(Z=!(S=a.sent()).done))return[3,5];if(_=S.value,b){if(w+=_,(0,y.xb)(_))return[3,4];if(b=!1,T=(0,y.O8)(w),E=(0,y.O8)(i),!T.indentation.startsWith(E.indentation)||!!E.newlines!=!!T.newlines)return e.abort(),[3,5];_=T.indentation.slice(E.indentation.length)+T.content}if(function(e,t){if(t){var n,r;"string"!=typeof t&&(t=t.sliceString(Math.max(0,t.length-2*N))),e=(null!==(r=null===(n=t.match(O))||void 0===n?void 0:n[0])&&void 0!==r?r:t)+e}if(null===U){var i=L.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return G()(e.toLowerCase().trim())}).sort(function(e,t){return t.length-e.length}).join("|"),o="\\b|\\d|_";U=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return U.test(e)}(_,v?h:e.suggestion))return e.abort(),null===(R=(D=e.config).onError)||void 0===R||R.call(D,Error("Slur detected in output")),[3,5];if(e.suggestion+=_,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,v))return e.abort(),[3,5];v=!1,a.label=4;case 4:return Z=!1,[3,2];case 5:return[3,12];case 6:return I=a.sent(),x=!0,C=I,[3,12];case 7:if(a.trys.push([7,,10,11]),!(Z&&null!=k.return))return[3,9];return[4,k.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(x)throw C;return[7];case 11:return[7];case 12:return[3,14];case 13:return B=a.sent(),e.aborted||e.abort(),B instanceof DOMException&&"AbortError"===B.name||null===(P=(M=e.config).onError)||void 0===P||P.call(M,B),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(t=(n=e.config).onFinished)||void 0===t||t.call(n,e.suggestion),[2,e.suggestion]}})})()},t.abort=function(){this.aborted||this.abortController.abort()},t.then=function(e,t){return this.promise.then(e,t)},(0,p._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),X=n(16079),F=n(66299),W=n(24986),V=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.text=t,this.pos=n,this.docA=r,this.treeA=i,this.parser=o}var t=e.prototype;return t.hasTree=function(){return null!==this.parser&&null!==this.treeA},t.update=function(t){var n=this,r=new e(t,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,W.F)(this.text,t),o=[];i.iterChanges(function(e,t,r,i,a){o.push({from:n.pos+e,to:n.pos+t,insert:a})});var a=c.as.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,p._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,y.xb)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=c.as.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,F.p)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,F.p)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,X.ib)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,X.gQ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,X.gQ)(this.treeB,this.pos):null),this._blockB}}]),e}(),H=n(63257),z=n(99415);function j(e,t,n){var r,i=null!==(r=e.prop(t<0?z.md.openedBy:z.md.closedBy))&&void 0!==r?r:null;if(null===i||n&&!i.includes(n.name)){if(!n)return null;i=i?(0,H._)(i).concat([n.name]):[n.name]}return i}function q(e,t,n){var r=j(e.type,t,n);if(null===r)return null;for(var i=e.cursor(),o=0;t<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==j(i.type,t)){o++;continue}if(null!==j(i.type,-t)){if(0===o)return null;o--}}return null}function J(e){return e.split("").reverse().join("")}function Y(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every(function(n){return n[t]===e[0][t]});)t++;return e[0].substring(0,t)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var K=function(e,t){return e.length<t.length},Q=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!(isNaN(n)||isNaN(r))&&n+1===r};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K;if(e.length<t)return{halt:!1};var o=e.slice(-1*t),a=Y(o),l=J(Y(o.map(J)));if(a.length<n||l.length<r)return{halt:!1};for(var c=null,s=0;s<t;s++){var u=o[s].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!c||i(c,d)))return{halt:!1};c=d}return{halt:!0,truncateLine:e.length-t}}var et=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<t||e[e.length-1].trim().length<n?{halt:!1}:e[e.length-1]===e[e.length-t-1]?{halt:!0,truncateLine:e.length-t}:{halt:!1}}(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return ee(e,3,6,3,K)},function(e){return ee(e,3,6,1,Q)},function(e){return $(e,12,12," ")},function(e){return $(e,8,16,"")}],en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),er=n(78127),ei=/[([{]+(?=\s*$)/,eo=/[)\]};]+\s*$/,ea=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.source=t,this.pos=n,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,y.xb)(i),this.text=this.empty?"":r+i,this.lines=(0,y.uq)(i)}var t=e.prototype;return t.with=function(t){var n=this.source,r=this.content,i=this.newlines;if("source"in t&&void 0!==t.source){n=t.source;var o=(0,y.O8)(n);r=o.indentation+o.content,i=o.newlines}if("text"in t&&void 0!==t.text){var a=(0,y.O8)(t.text);r=a.indentation+a.content,i=a.newlines}"content"in t&&void 0!==t.content&&(r=t.content),"newlines"in t&&void 0!==t.newlines&&(i=t.newlines);var l=this;if(n!==this.source||r!==this.content||i!==this.newlines){var c=this.ctx.update((0,y.xb)(r)?"":i+r);l=new e(n,this.pos,i,r,c)}return!l.empty&&t.process&&(l="boolean"==typeof t.process?l.process():l.process(t.process)),l},t.slice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.with({text:this.text.slice(e,t)}):this.with({content:this.content.slice(e,t)})},t.splice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+t);return r?this.with({text:o+n+a}):this.with({content:o+n+a})},t.clip=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return this},t.stopAtLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.newlines.length:0;if(e<0||e>this.lines.length+n)throw Error("Index out of range: "+e);if(t&&e<n)return this.with({text:this.newlines.slice(0,e)});for(var r=e-n;r<this.lines.length&&(0,y.Jz)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},t.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,y.xb)(e)||eo.test(e)?this:this.slice(0,this.content.length-e.length)},t.trimEnd=function(){return this.with({content:this.content.trimEnd()})},t.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},t.cutSuggestion=function(){if(this.empty)return this;if((0,y.Jz)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,X.zX)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var t=this.pos+this.lines[0].length,n=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=t}),r=n.length?n[n.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},t.filter=function(){var e=en(this.content).replacementSuggestion;return e?this.with({content:e}):this},t.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,y.xb)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},t.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var t=this.ctx.docA.lineAt(e.pos);if(t.number===this.ctx.docA.lines)return this;var n=e.text.slice(e.offset),r=n.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?n.slice(r+1):n;return(0,y.xb)(a)?this:(!i&&(0,y.xb)(t)&&(a=t.text+a),a===this.ctx.docA.line(t.number+1).text)?this.slice(0,o,!0):this},t.removeTrailingOpenBrackets=function(){var e=ei.exec(this.content);return e?this.splice(e.index,e.length):this},t.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,y.O8)(t),l=a.indentation+a.content,c=a.newlines,s=new V((0,y.xb)(l)?"":c+l,n,r,i,o);return new e(t,n,c,l,s)},(0,p._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,t=function(e){var t=function(e){var t,n,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;t=e.doc,n=e.tree;var s=c.as.of({from:a,to:t.length,insert:o},t.length);r=s.apply(t),i=(0,F.p)({parser:l,changes:s,text:r,base:n})}else t=e.docA,n=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:t,treeA:n,docB:r,treeB:i}}(e),n=t.insertion,r=t.pos,i=t.docA,o=t.treeA,a=t.docB,l=t.treeB,s=[],u=[],d=l.cursor();do{if(null===j(d.type,-1))continue;var f=d.node,p=q(f,-1);if(p&&p.to<=r){var h=function(e,t){for(var n=t.resolveInner(e.from,1).node;n&&n.from===e.from;){if(n.type===e.type)return n;n=n.parent}return null}(p,o);if(h){s.push({openA:h,closeB:f});var m=q(h,1,f.type);m&&m.from>=r&&u.push(m)}}}while(d.prev()&&d.to>r);if(0===s.length||0===u.length)return null;var g=[],v=!0,y=!1,b=void 0;try{for(var w,Z=s[Symbol.iterator]();!(v=(w=Z.next()).done);v=!0){var x=w.value,C=x.openA,k=x.closeB,S=a.sliceString(k.from,k.to),_=j(C.type,1,k.type);if(null===_)throw Error("Unexpected null matching types");for(var T=0;T<u.length;T++){var E=u[T];if(_.includes(E.name)&&i.sliceString(E.from,E.to)===S){u.splice(0,T+1),g.unshift({closeA:E,closeB:k});break}}}}catch(e){y=!0,b=e}finally{try{v||null==Z.return||Z.return()}finally{if(y)throw b}}if(0===g.length)return null;var R=[{text:n,pos:r,index:0,offset:0}],D=0,I=!0,B=!1,A=void 0;try{for(var P,G=g[Symbol.iterator]();!(I=(P=G.next()).done);I=!0){var L=P.value,N=L.closeA,O=L.closeB,U=R.pop();if(!U)throw Error("Unexpected empty split");var M=O.from-r,X=0;if(U.pos<N.from){for(var W=1;function(e,t,n,r){var i=e.sliceString(n,n+1);return i===t.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-W,O.from-W)&&N.from-W>=U.pos&&O.from-W>=r;)W++;X=W-1}M-=X;var V={text:n.slice(D,M),pos:U.pos,index:U.index,offset:U.offset},H={text:n.slice(M),pos:N.to,index:M,offset:N.to-N.from+X};D=M,R.push(V,H)}}catch(e){B=!0,A=e}finally{try{I||null==G.return||G.return()}finally{if(B)throw A}}return""===R[R.length-1].text&&R.pop(),R}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});t&&(this._segments=t)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new c.f_,t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=c.xv.of((0,y.uq)(a.text)),s=new er.Yf(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),el=n(41091),ec=n(64988),es=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var t=e.prototype;return t.dispatchSuggestion=function(e){this.view.dispatch({effects:h.OK.of(e)})},t.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},t.requestSuggestion=function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===b.xz.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(n=this.config.debounceTimeInsideWord)&&void 0!==n?n:0:null!==(t=this.config.debounceTimeOutsideWord)&&void 0!==t?t:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},t.requestSuggestionImmediately=function(){var e,t,n,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,y.zV)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,a=this.view.state,c=a.selection.main.head,s=a.doc,u=(0,_.qz)(a),d=null!==(t=null===(e=a.facet(_.dK))||void 0===e?void 0:e.parser)&&void 0!==t?t:null,f=this.fileTypeConfig,p={skipComplexProcessing:null!==(n=f.skipComplexProcessing)&&void 0!==n&&n},m=a.facet(R),g=function(e){var t=e.doc,n=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,c=void 0===l?T.UQ:l,s=e.reserved,u=void 0===s?T.i$:s,d=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return B(i,e)}).join("\n")+"\n";if(d.length>c)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,t){if((t-=2*e.length)<=0)return null;var n=e.map(function(e){return new D(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=t}).sort(function(e,t){return e.priority===t.priority?e.minLength-t.minLength:t.priority-e.priority});if(!n.length)return null;var r=I.fromChunkViews(n),i=r.reduce(function(e,t){return e+t.size},0);if(i>t){var o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.size>t&&(i-=u.size-t,u.resize(t))}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}for(;i>t;){var d=1,f=!0,p=!1,h=void 0;try{for(var m,g=r[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var v=m.value;if(!v.empty){var y=Math.max(0,v.size-d);i-=v.size-y,v.resize(y),d++}}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}var b=!0,w=!1,Z=void 0;try{for(var x,C=r[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value;k.empty||k.accept()}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}var S=r.reduce(function(e,t){return e+t.accepted},0);S<t&&D.acceptSegments(n,t-S)}else n.forEach(function(e){return e.acceptAll()});return n.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(u-d.length-2,c-n-d.length-2));f&&(d=f+"\n\n"+d)}var p=function(e,t,n){for(var r=e.slice(0,t);r.length>n;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-n);return r}(t,n,c-d.length),h=o?function(e,t){var n=e.slice(t);if(1===n.lines)return n;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var c,s=n.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(r++,""!==u&&u.trimStart()===u){i=n.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i?n.slice(0,i.to):n}(t,n):null;if(d.length+p.length>c)throw Error("Prompt is over the maximum length");return{prefix:p,suffix:h,header:d}}({doc:s,pos:c,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:m(this.view)}),v=g.prefix,w=g.suffix,Z=g.header,x=(0,X.ib)(s,u,c)?T.uV.EMPTY_BLOCK:T.uV.DEFAULT;this.lastPrefixLength=v.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new M({request:o.request,language:f.id,maxTokens:x,prefix:v,suffix:w,header:Z,onTextReceived:function(e,t){if(t&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!t&&i.suggestion.slotted)return!1;var n=i.suggestion.slotted?i.suggestion.upgrade(ea.create(e,c,s,u,d).process(p)):i.suggestion.with({source:e,process:p});if(n.stopped||n.suggestion.empty)return!1;i.dispatchSuggestion(n)},onFinished:function(e){var t=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var n=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:p}):i.suggestion;if(!n.stopped&&!n.suggestion.empty&&!i.regulator.isIgnored(n.suggestion.content)){i.dispatchSuggestion(n.presented?n:n.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(h.VJ.INCOMPATIBLE_SUGGESTION),t&&i.requestSuggestion(b.xz.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){l.$e(function(t){t.setExtra("prefix",v.toString()),t.setExtra("suffix",null==w?void 0:w.toString()),t.setExtra("header",Z),t.setExtra("maxTokens",x),t.setExtra("filePath",f.path),t.setExtra("language",f.id),t.setExtra("selection-head",c),t.setExtra("previous-character",s.sliceString(c-1,c)),t.setTag("ghostwriter",!0),l.Tb(e)})}})}},t.postUpdate=function(e){var t=e.startState.field(h.WF,!1),n=e.state.field(h.WF,!1);t&&n&&t.presented&&n.stopped&&n.reason===h.VJ.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,t),(0,ec.aU)(e,d,el.Yp,el.xR)&&this.dismiss(),(0,ec.aU)(e,h.WF)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,b.Io)(e.transactions);switch(r){case b.xz.STOP:this.active&&this.dismiss();break;case b.xz.ENQUEUE:case b.xz.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},t.destroy=function(){this.destroyed=!0,this.dismiss()},(0,p._)(e,[{key:"config",get:function(){return this.view.state.facet(d)}},{key:"listeners",get:function(){return this.view.state.facet(E.t)}},{key:"suggestion",get:function(){return this.view.state.field(h.WF)}},{key:"regulator",get:function(){return this.view.state.field(v)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(el.Yp),n=this.view.state.facet(el.xR),r=null==n?void 0:null===(e=n.getFeature("ai"))||void 0===e?void 0:e.complete;return t&&n&&(null==r?void 0:r.enabled)?(0,S._)((0,k._)({},r),{id:n.id,path:t}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),eu=s.lg.fromClass(es,{provide:function(e){return s.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}}),ed=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}var t=e.prototype;return t.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(h.WF,!1);return!!(null==n?void 0:n.presented)},t.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},t.touchFor=function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},t.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},t.touchmove=function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},t.touchend=function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,u.o)(this.view),e.preventDefault()),this.stop()}},t.touchcancel=function(e){this.touchFor(e)&&this.stop()},t.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},t.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ef=s.lg.fromClass(ed),ep=n(70625),eh=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null},enables:function(e){return[d.compute([e],function(t){return t.facet(e)}),h.WF,b._v,eu,ef,C,v,c.Wl.high(s.$f.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,ep.cU)(n.keyAcceptSuggestion),run:u.o}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,ep.cU)(n.keyDismissSuggestion),run:u.i}),r}))]}}),em=n(17528),eg=n(2178),ev=n(75271);function ey(){return(ey=(0,eg._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,em._)(t.read())];case 2:if(r=(n=o.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})).apply(this,arguments)}var eb=n(46780),ew=n(54236);function eZ(){return(eZ=(0,eg._)(function(e){var t,n,r,i,o,l,c,s,u,d,f,p,h,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=new TextDecoder("utf-8"),n="",r=!1,i=!1,a.label=1;case 1:a.trys.push([1,11,12,17]),l=(0,A._)(function(e){return ey.apply(this,arguments)}(e)),a.label=2;case 2:return[4,(0,em._)(l.next())];case 3:if(!(r=!(c=a.sent()).done))return[3,10];s=c.value,u=t.decode(s,{stream:!0}),n+=u,d=void 0,a.label=4;case 4:if(!(-1!==(d=n.indexOf("\n\n"))))return[3,9];if(!n.startsWith("data: ")||!("text"in(f=JSON.parse(n.slice(6,d)))))return[3,8];p=f.text.split("\n"),h=0,a.label=5;case 5:if(!(h<p.length))return[3,8];return[4,JSON.stringify({text:p[h]+"\n"})+"\n"];case 6:a.sent(),a.label=7;case 7:return h++,[3,5];case 8:return n=n.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=a.sent(),i=!0,o=m,[3,17];case 12:if(a.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,l.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(i)throw o;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var ex=n(32652),eC=n(10777),ek=n(13556),eS=new Map,e_={beforeCompletion:function(e){l.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=ek.YX.add(e),n=eC.kg.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eS.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":ek.YX.abort(r),eS.delete(r);break;case"success":l.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i,o=eS.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:n.fromCache,length:null===(i=n.partialSuggestion)||void 0===i?void 0:i.length}),eS.delete(r);break;case"finished":ek.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(ek.YX.abort(t),eS.delete(t)),eC.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},eT=n(96949),eE=n(59266),eR=n(42305),eD=n(29574),eI=n(14118),eB=n(16155),eA=n(83059),eP=n(10126);function eG(e){return JSON.stringify({text:e})+"\n"}var eL=function(){"use strict";function e(){(0,f._)(this,e),this.list=[]}var t=e.prototype;return t.add=function(e,t,n){this.list.push({prefix:e,suggestion:t,tokens:n}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,t){return t.suggestion.length-e.suggestion.length})},t.retrieve=function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=r.prefix,o=r.suggestion,a=r.tokens;if(!(2*a<t)){if(e===i)return eG(o);if(!(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<t)){var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var s=c.slice(e.length);if(s.trim().length)return eG(s)}}}}}return null},e}(),eN=n(6466),eO=n(66626),eU=n(82973),eM=n(49853),eX=n(80786),eF="ai.codecomplete.lastTooltipHintTimestamp",eW=(0,eM.cn)({tooltipOpen:!1,consecutiveRejections:0}),eV=n(23882),eH=n(65559),ez=n(45077),ej=n(13387),eq=n(22524),eJ=n(35370),eY=/\n\n(?![^\S\n])/g,e$=new(function(){"use strict";function e(){(0,f._)(this,e),this.map=new Map}var t=e.prototype;return t.removeExpired=function(){if(this.map.size){var e=Date.now(),t=!0,n=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,eO._)(i.value,2),l=a[0],c=a[1];e-c.timestamp>6e4&&this.map.delete(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.get=function(e){return this.removeExpired(),this.map.get(e)},t.add=function(e,t,n){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,c=this.map.values()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;(!r||s.timestamp<r.timestamp)&&(r=s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:t,content:n,timestamp:Date.now()})},t.clear=function(){this.map.clear()},e}()),eK=function(){"use strict";function e(t,n,r){var i=this;(0,f._)(this,e),this.view=t,this.readFile=n,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var t=e.prototype;return t.updateChunks=function(){var e=this;return(0,o._)(function(){var t,n,r,o,l,c,s,u,d,f,p,h,m,g,v,b;return(0,a.Jh)(this,function(w){switch(w.label){case 0:if(r=[],e.chunks=r,o=e.view.state.facet(el.Yp),l=e.view.state.facet(el.xR),!o||!l)return[2];"all"===(s=null!==(c=null===(n=l.features.ai)||void 0===n?void 0:null===(t=n.complete)||void 0===t?void 0:t.groups)&&void 0!==c?c:[])&&(s=[]),u=e.recentFiles.current.filter(function(e){return e!==o&&(0,eJ.Mb)(e)}),d=!0,f=!1,p=void 0,w.label=1;case 1:w.trys.push([1,6,7,8]),h=function(){var t,n,c,u,d,f,p,h,m,v,b,w,Z,x,C;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=g.value,p=null==(f=null!==(d=null==(u=e$.get(t))?void 0:u.type)&&void 0!==d?d:ej.$R.from(t))?void 0:null===(n=f.features.ai)||void 0===n?void 0:n.complete,!f||!(null==p?void 0:p.enabled))return[2,"continue"];if(!(f.id===l.id||"all"===p.groups||(null===(c=p.groups)||void 0===c?void 0:c.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(h=null==u?void 0:u.content))return[3,2];return[4,e.readFile(t)];case 1:if(m=a.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===m)return[2,"continue"];h=m,e$.add(t,f,h),a.label=2;case 2:var k;if(!(v=(k=(k=h).trim())?k.split(eY).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(b=B(l.id,"Consider this snippet from ".concat((0,eq.LA)(t,o))),w=B(l.id,""),Z=v.map(function(e){return(0,y.uq)(e).map(function(e){return B(l.id,e)}).join("\n")+"\n".concat(w,"\n")}),x=r.length,C=i.NORMAL,x<2?C=i.HIGH:x>=5&&(C=i.LOW),r.push({header:b,segments:Z,priority:C}),r.length>=10)return[2,"break"];a.label=3;case 3:return[2]}})},m=u[Symbol.iterator](),w.label=2;case 2:if(d=(g=m.next()).done)return[3,5];return[5,(0,a.XA)(h())];case 3:if(v=w.sent(),"object"===(0,ez._)(v))return[2,v.v];if("break"===v)return[3,5];w.label=4;case 4:return d=!0,[3,2];case 5:return[3,8];case 6:return b=w.sent(),f=!0,p=b,[3,8];case 7:try{d||null==m.return||m.return()}finally{if(f)throw p}return[7];case 8:return[2]}})})()},t.update=function(e){(0,ec.aU)(e,el.Yp,el.xR)&&this.updateChunks()},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eQ=new eR.j(function(e,t){return e&&t?s.lg.define(function(n){return new eK(n,e,t)},{provide:function(e){return R.of(function(t){var n,r;return null!==(r=null===(n=t.plugin(e))||void 0===n?void 0:n.chunks)&&void 0!==r?r:null})}}):null}),e0=n(78950),e1=n(13054),e2=[];function e3(e){if(!(e.length>800)){var t=e2.indexOf(e);-1!==t&&e2.splice(t,1),e2.unshift(e),e2.length>10&&e2.pop()}}var e4=!1;function e8(e,t){var n=(0,e1.I)(t.state),r=n.text,i=n.linewise;if(r&&r.trim()){if(i){var o=r.split(t.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;e3(d)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else e3(r)}}var e6=[s.lg.define(function(){return!function(){if(!e4){e4=!0;var e=function(e){var t,n=null===(t=document.getSelection())||void 0===t?void 0:t.toString();n&&n.trim()&&Promise.resolve().then(function(){e.defaultPrevented||e3(n)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),c.Wl.highest(s.tk.domEventObservers({copy:function(e,t){return e8(e,t)},cut:function(e,t){return e8(e,t)}})),R.of(function(e){if(!e2.length)return null;var t=e.state.facet(el.xR);if(!t)return null;var n=function(e){return B(t.id,e)},r=(0,e0._)(e2),o=r[0],a=r.slice(1),l=[];if(o&&o.trim()){var c=n("Consider the current clipboard:"),s=o.trimEnd().split("\n").map(function(e){return n(e)}).join("\n");l.push({header:c,segments:[s],priority:i.HIGH})}var u=a.filter(function(e){return e&&e.trim()});if(u.length){var d=n("Consider the clipboard history:"),f=u.map(function(e){return e.trimEnd().split("\n").map(function(e,t){return 0===t?n("- ".concat(e)):n("  ".concat(e))}).join("\n")}).reverse();l.push({header:d,segments:f})}return l.length?l:null})],e5=new eR.j(function(e,t,n,r,i,o,a,l,c){var s,u;return e?(t===ex.Yy.Pro?(s=T.Dz,u=T.Dz):(s=a,u=a),[eh.of({request:o,infill:i,backendOnly:t===ex.Yy.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:u,debounceAlways:t!==ex.Yy.Pro,keyAcceptSuggestion:n,keyDismissSuggestion:r}),l?e6:[],c?[]:g.of(!1)]):null}),e7=new eR.j(function(e,t,n,r){if(!e)return null;var i,o,a=(i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var t=function(){(0,eT.j)(eT.U3.CODE_SUGGESTION_USED,(0,k._)({type:"suggestionPresented"},e))};i=setTimeout(t,500),o=t}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return E.t.of({onDismiss:function(){a.cancel()},onRequestIgnoredBackendOnly:function(){l.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eT.j)(eT.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(eu);r&&(l.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),a.queue({engine:t,filePath:n,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){l.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eT.j)(eT.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(eu);o&&(a.flush(),(0,eT.j)(eT.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:t,filePath:n,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),l.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(eu);i&&(a.flush(),(0,eT.j)(eT.U3.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:t,filePath:n,prefixLength:i.lastPrefixLength}),l.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e9(e){var t,n,r,i,l,c,s,u,d,f,p,h,m,g=e.filePath,v=(0,eV.Z)().fs,y=(0,eB.Z)(),b=(0,eD.Gn)("codeSuggestion").preferences,w=(0,ex.ZP)(),Z=b.codeSuggestion&&w!==ex.Yy.None;(0,ev.useEffect)(function(){ek.YX.toggle(Z)},[Z]);var x=(0,eN.Z)(),C=x.engine,_=x.settings,E=(0,eP.gf)(eE.CN.acceptPrimaryCompletion.id),R=(0,eP.gf)(eE.CN.cancelCompletion.id),D=null!==(m=null==_?void 0:_.infill)&&void 0!==m&&m,I=(0,eA.Z)(function(){return new eL},[g,y,C]),P=(n=(t={engine:C,replId:y,provider:(0,eA.Z)(function(){var e;return e=(0,o._)(function(e,t){var n,r,i,o,l,c,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=eb.t.production,[4,(0,ew.I8)(e.replId,"completions-1")];case 1:return r=a.sent(),i={model:"replit-code-v1-5",context:e.header?e.header+e.prefix:e.prefix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(n,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:t,body:JSON.stringify(i)})];case 2:if(l=(o=a.sent()).body,!(200!==(c=o.status)))return[3,4];return s=Error.bind,d=(u="Error (".concat(c,") response from /ai/complete: ")).concat,[4,o.text()];case 3:throw new(s.apply(Error,[void 0,d.apply(u,[a.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eZ.apply(this,arguments)}(l)}]}})}),function(t,n){return e.apply(this,arguments)}},[]),cache:I,hooks:e_}).engine,r=t.replId,i=t.provider,l=t.cache,c=t.hooks,(0,ev.useCallback)((s=(0,eg._)(function(e){var t,o,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,S,_,T,E,R,D,I;return(0,a.Jh)(this,function(P){switch(P.label){case 0:if(t=e.prefix,o=e.suffix,s=e.header,u=e.language,d=e.maxTokens,f=e.signal,!t)return[2];if(p={prefix:t,suffix:o,header:s,engine:n,maxTokens:d,replId:r,stop:["\n\n","```"]},"markdown"===u&&(p.maxTokens=75,p.stop=[]),h=null==c?void 0:c.beforeCompletion(p),!(null!==(g=l.retrieve(t,d))))return[3,1];return m=(0,eg._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,g];case 1:return e.sent(),[2]}})}),[3,4];case 1:return P.trys.push([1,3,,4]),[4,(0,em._)(i(p,f))];case 2:return m=P.sent(),[3,4];case 3:if((null==(v=P.sent())?void 0:v.name)==="AbortError")return[2];return null==c||c.erroredCompletion(v instanceof Error?v:Error("Unknown error"),h),[2];case 4:y="",b="",w=!0,Z=!1,f.addEventListener("abort",function(){h&&(null==c||c.afterCompletion("aborted",p,{},h)),Z=!0}),x=!1,C=!1,P.label=5;case 5:P.trys.push([5,13,14,19]),S=(0,A._)(m()),P.label=6;case 6:return[4,(0,em._)(S.next())];case 7:if(!(x=!(_=P.sent()).done))return[3,12];T=_.value,b+=T,E=void 0,P.label=8;case 8:var G;if(!(-1!==(E=b.indexOf("\n"))))return[3,11];if(R=JSON.parse(b.substring(0,E)).text,b=b.substring(E+1),G=u,D=({replacementSuggestion:R.split("\n").filter(function(e){return!(e.startsWith(B(G,"Language: "))||e.startsWith(B(G,"Path: ")))}).join("\n")}).replacementSuggestion,y+=D,Z)return[3,10];return[4,D];case 9:P.sent(),P.label=10;case 10:return!Z&&w&&h&&(null==c||c.afterCompletion("success",p,{fromCache:!!g,partialSuggestion:D},h)),w=!1,en(y).haltAfter&&(Z=!0),[3,8];case 11:return x=!1,[3,6];case 12:return[3,19];case 13:return I=P.sent(),C=!0,k=I,[3,19];case 14:if(P.trys.push([14,,17,18]),!(x&&null!=S.return))return[3,16];return[4,S.return()];case 15:P.sent(),P.label=16;case 16:return[3,18];case 17:if(C)throw k;return[7];case 18:return[7];case 19:if(null===g&&y.trim().length&&l.add(t,y,d),!(!Z&&b))return[3,21];return[4,b];case 20:P.sent(),P.label=21;case 21:return h&&(null==c||c.afterCompletion("finished",p,{completeSuggestion:y,fromCache:!!g},h)),[2]}})}),function(e){return s.apply(this,arguments)}),[n,r,l,c,i])),G=(d=(u=(0,eO._)((0,eX.KO)(eW),2))[0],f=u[1],p=(0,eI.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,ev.useEffect)(function(){if(p&&d.tooltipOpen){var e=setTimeout(function(){return f(function(e){return(0,S._)((0,k._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[p,d.tooltipOpen,f]),(0,ev.useMemo)(function(){return p?{recordAccept:function(){f(function(e){return(0,S._)((0,k._)({},e),{consecutiveRejections:0})})},recordReject:function(){f(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=eU.Z.get(eF,"number");if(!n||Date.now()-n>=432e6)return eU.Z.set(eF,Date.now()),(0,S._)((0,k._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,S._)((0,k._)({},e),{consecutiveRejections:t})})}}:null},[p,f])),L=(0,ev.useCallback)((h=(0,o._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,v.readFile(e)];case 1:if(null!==(t=n.sent()).error)return[2,null];return[2,t.content.toString()]}})}),function(e){return h.apply(this,arguments)}),[v]),N=(0,eH._3)(),O=(0,eI.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:T.yr,type:"number"}),U=(0,eI.P5)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),M=(0,eI.P5)({controlName:"flag-completely-different-regulator"}),X=[e5.use(Z,w,E,R,D,P,O,U,M),e7.use(Z,C,g,G),eQ.use(L,N)];return(0,ev.useMemo)(function(){return X},X)}},71049:function(e,t,n){n.d(t,{$_:function(){return L},Bk:function(){return k},II:function(){return I},If:function(){return D},U1:function(){return G},Xs:function(){return A},fL:function(){return R},k4:function(){return P}});var r=n(66626),i=n(63257),o=n(3796),a=n(28949),l=n(37862),c=n(68220),s=n(86466),u=n(24766),d=n(22419),f=n(93245),p=n(36809),h=n(23802),m=n(10578),g=n(98571),v=n(45252),y=n(63163),b=n(34525),w=n(75271),Z=n(22893),x=n(54300),C=n(35177),k=350,S=[y.l0.p(4),y.l0.center,y.l0.borderRadius(4)],_=(0,p.X)({root:(0,i._)(S).concat([y.l0.cursor.pointer,(0,c.ec)("blurple")]),disabled:(0,i._)(S).concat([(0,c.ec)("grey")])});function T(e){return e.disabled||e.connecting?(0,o.tZ)(f.G,{css:_.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.tZ)(m.Z,{size:12}):(0,o.tZ)(g.Z,{size:12})}):(0,o.tZ)(f.G,{"data-cy":"ghostwriter-inline-submit",css:_.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.tZ)(v.Z,{size:12}):(0,o.tZ)(g.Z,{size:12})})}var E=(0,p.X)({root:[y.l0.py(8),y.l0.pr(8),y.l0.maxWidth(800),y.l0.colWithGap(4),{fontFamily:y.TV.fontFamilyDefault}],container:[y.l0.position.relative,y.l0.backgroundColor.backgroundDefault],input:[s.gU.outlined,y.l0.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[y.l0.p(8),y.l0.pb(0),{caretColor:"initial",fontFamily:y.TV.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:y.TV.foregroundDimmest}}],footer:[y.l0.px(8),y.l0.pr(6),y.l0.rowWithGap(8),y.l0.align.center,y.l0.position.absolute,y.l0.bottom(0),y.l0.left(0),y.l0.width("100%"),{height:36}],footerLeft:[y.l0.rowWithGap(8),y.l0.flex.growAndShrink(1),y.l0.align.center],modelLabel:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.pt(1)],iconText:[y.l0.rowWithGap(4),y.l0.align.center],footerRight:[y.l0.rowWithGap(4),y.l0.align.center,{"& button":[y.l0.height(22),y.l0.py(6),y.l0.py(4),y.l0.borderRadius(4)]}],error:[y.l0.color.accentNegativeStronger]}),R=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,l.Z)(t);return(0,o.tZ)(b.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.tZ)(f.G,{css:E.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},D=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,c=e.innerRef;return(0,o.BX)(R,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===i||i,children:[(0,o.tZ)(f.G,{css:E.container,innerRef:c,children:r}),a?(0,o.tZ)(Z.E,{icon:(0,o.tZ)(x.Z,{color:y.TV.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function I(e){var t=(0,a.Z)();return(0,o.tZ)(f.G,{css:E.input,children:(0,o.tZ)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:E.textarea,ref:function(n){e.inputRef.current=n,t.ref(n)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input"})})}var B={generateCode:"Generate new code based on this file.",transformCode:"Modify selected code based on the context of this file."};function A(e){var t=e.type;return(0,o.tZ)(d.u,{tooltip:B[t],children:(0,o.BX)(f.G,{css:E.modelLabel,children:[(0,o.tZ)(h.Z,{size:12,color:y.TV.foregroundDimmest}),(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with AI":"Generate with AI"})]})})}function P(e){var t=e.loading,n=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,c=e.codeLengthExceeded;return(0,o.BX)(o.HY,{children:[t?(0,o.BX)(f.G,{css:E.iconText,children:[(0,o.tZ)(m.Z,{size:12,color:y.TV.blurpleDefault}),r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.tZ)(o.HY,{children:r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:c?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.tZ)(T,{connecting:a,loading:t,disabled:n,onClick:i})]})}function G(e){var t=e.id,n=e.inputRef,i=e.onClose,o=e.loading,a=e.onSubmit,l=(0,r._)((0,w.useState)(""),2),c=l[0],s=l[1],u=(0,r._)((0,w.useState)(!1),2),d=u[0],f=u[1];return(0,w.useEffect)(function(){var e="inline-ai/input-state/".concat(t),r=C.Z.get(e,"string");r&&s(r);var i=n.current;return function(){if(i){var t=i.value;if(0===t.length){C.Z.remove(e);return}C.Z.set(e,t)}}},[t,n]),{value:c,setValue:s,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),c.length?d?i():f(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?s(function(e){return e+"\n"}):!e.metaKey&&c.length&&c.trim()&&a();break;default:f(!1)}},escPressed:d}}var L=function(e){var t=(0,r._)(e.children,2),n=t[0],i=t[1];return(0,o.BX)(f.G,{css:E.footer,children:[(0,o.tZ)(f.G,{css:E.footerLeft,children:n}),(0,o.tZ)(f.G,{css:E.footerRight,children:i})]})}},48096:function(e,t,n){n.d(t,{W:function(){return tC}});var r,i,o,a=n(80403),l=n(3030),c=n(24006),s=n(12285),u=n(4384),d=n(4955),f=n(9670),p=n(33083),h=n(99415),m=n(76659),g=n(66299),v=a.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),y=a.QQ.define({create:function(){return{diff:null,tree:h.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(v),o=null===(n=t.state.facet(p.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===h.mp.empty?e:{diff:null,tree:h.mp.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=m.z.create(t.newDoc,i),l=h.mp.empty),(null===(r=t.startState.facet(p.dK))||void 0===r?void 0:r.parser)!==o&&(l=h.mp.empty),o&&l.length!==a.b.length)?(l=(0,g.p)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),b=n(42516),w=n(63163),Z="cm-transform-diff-line-deletion-base",x="cm-transform-diff-line-deletion",C="cm-transform-diff-text-deletion",k="cm-transform-diff-line-insertion-base",S="cm-transform-diff-line-insertion",_="cm-transform-diff-text-insertion",T="cm-transform-diff-number-marker",E="rgba(180, 0, 0, 0.1)",R="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.1)",I="rgba(0, 180, 0, 0.125)";function B(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var A=l.tk.theme((i={},(0,b._)(i,".".concat(k,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(w.TV.accentPrimaryDimmest," !important")}}),(0,b._)(i,".".concat(Z),{background:B(E),backgroundClip:"content-box"}),(0,b._)(i,".".concat(x),{background:B(E,R),backgroundClip:"content-box"}),(0,b._)(i,".".concat(k),{background:B(D),backgroundClip:"content-box"}),(0,b._)(i,".".concat(S),{background:B(D,I),backgroundClip:"content-box"}),(0,b._)(i,".".concat(_),{display:"inline-block",background:I}),(0,b._)(i,".".concat(C),{display:"inline-block",background:R}),(0,b._)(i,".".concat(T),{opacity:.5}),i)),P=n(96442),G=n(67464),L=n(81202),N=n.n(L),O=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(k):"cm-line ".concat(S),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,p=null,h=null,m=function(t,n){if(!p)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,n-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var g=this.line[f].text;p={from:d,to:d+g.length}}if(!h){var v=!0,y=!1,b=void 0;try{for(var w,Z=this.changed[Symbol.iterator]();!(v=(w=Z.next()).done);v=!0){var x=w.value;if(!(x.from>=p.to)&&!(x.to<=d)){var C=document.createElement("span");C.className=_,h={from:x.from,to:x.to,dom:C},d<h.from&&m(t,h.from),t.appendChild(C);break}}}catch(e){y=!0,b=e}finally{try{v||null==Z.return||Z.return()}finally{if(y)throw b}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(t,p.to),d>=p.to&&(p=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&N()(this.line,e.line)&&N()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),U=l.p.line({class:Z}),M=l.p.line({class:x}),X=l.p.mark({class:C}),F=l.tk.decorations.compute([y],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,P.MF.A)===P.dQ.COVERED)o.push(M.range(e.from));else{o.push(U.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,P.Po)(e,t,P.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(X.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(y,!1);if(!n||!n.diff)return l.p.none;var r=n.diff,i=n.tree,o=[],a=!0,c=!1,s=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromA!==f.endA)for(var p=r.a.lineAt(f.fromA),h=r.a.lineAt(f.endA),m=p.number;m<=h.number;m++)t(r.a.line(m),f);else f.fromB===f.endB&&t(r.a.lineAt(f.fromA),f);if(f.fromB!==f.toB)for(var g=r.b.lineAt(f.fromB),v=(0,G.CT)(i,r.b,e,f.fromB,f.endB),b=0;b<v.length;b++){var w=v[b],Z=r.b.line(g.number+b),x=r.getLineChangeType(Z.number,P.MF.B)===P.dQ.COVERED?null:(0,P.Po)(Z,f,P.MF.B,!0),C=l.p.widget({widget:new O(w,Z.number,x),block:!0,side:b+1}),k=Math.min(f.endA,r.a.length);o.push(C.range(k))}}}catch(e){c=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return l.p.set(o,!0)}),W=n(68395),V=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r;return(0,s._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=T,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(l.SJ),H=W.X4.of(function(e,t){if(t instanceof O)return new V(t.index)}),z=a.r$.define({enables:function(e){return[v.computeN([e],function(t){return t.facet(e)}),y,A,F,H]}}),j=n(84797),q=n(24169);(r=o||(o={}))[r.Compare=0]="Compare",r[r.Original=1]="Original",r[r.Suggestion=2]="Suggestion";var J=a.Py.define(),Y=a.QQ.define({create:function(){return o.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.is(J))e=c.value;else if(c.is(q.Q))e=null;else if(c.is(q.h)){var s=t.state.field(j.$);if((null==s?void 0:s.type)==="transformCode"&&c.value){var u=t.startState.field(j.u),d=c.value;!u&&d&&(e=o.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),$=n(41091),K=n(64988),Q=a.QQ.define({create:function(){return null},update:function(e,t){if(!(0,K.aU)(t,"doc",j.$,$.Yp,Y,j.u))return e;var n,r=t.state.field(j.$),i=t.state.facet($.Yp),a=t.state.field(Y);if(!r||!i||r.codeReference.filePath!==i||a!==o.Suggestion)return null;var l=r.codeReference.range.indexFrom,c=r.codeReference.range.indexTo,s=t.state.doc.slice(l,c),u=null!==(n=t.state.field(j.u))&&void 0!==n?n:"",d=s.lines,f=u.split(t.state.lineBreak).length-d;return e&&e.after===l&&e.offset===f?e:{after:l,offset:f}}}),ee=W.gy.of(function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(Q);if(r&&!(n.from<=r.after))return new W.un(n.number+r.offset)}),et=W.X4.of(function(e,t){if(t instanceof en)return new W.un(t.index)}),en=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,G.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),er=[Q,ee,et,l.tk.decorations.compute([p.dK,j.$,j.u,Y,y,$.Yp,a.yy.lineSeparator],function(e){var t=e.field(j.$),n=e.facet($.Yp),r=e.field(Y);if(!t||"transformCode"!==t.type||!n||t.codeReference.filePath!==n||r!==o.Suggestion)return l.p.none;var i=t.codeReference.range.indexFrom,a=t.codeReference.range.indexTo,c=e.doc.lineAt(i),s=e.doc.lineAt(a),u=e.toText(null!==(x=e.field(j.u))&&void 0!==x?x:""),d=e.changes({from:i,to:a,insert:u}),f=d.apply(e.doc),h=i+u.length,m=null===(Z=e.facet(p.dK))||void 0===Z?void 0:Z.parser,v=null;if(m)v=(0,g.p)({parser:m,text:f,changes:d,base:e,upTo:h}),C=(0,G.CT)(v,f,e,i,h);else{C=[];var y=!0,b=!1,w=void 0;try{for(var Z,x,C,k,S=u.iterLines()[Symbol.iterator]();!(y=(k=S.next()).done);y=!0){var _=k.value;C.push([{text:_}])}}catch(e){b=!0,w=e}finally{try{y||null==S.return||S.return()}finally{if(b)throw w}}}var T=[];C.length>1&&i!==a&&0!==s.length&&a===s.to&&a<e.doc.length?T.push(l.p.replace({inclusive:!1,block:!0}).range(i,a)):T.push(l.p.replace({inclusiveStart:!1,block:!0}).range(i,a));for(var E=0;E<C.length;E++){var R=C[E],D=c.number+E,I=l.p.widget({widget:new en(R,E>0,D),inlineOrder:!0,side:E+1,block:E>0});T.push(I.range(i))}return l.p.set(T,!0)})],ei=n(3796),eo=n(5377),ea=n(8571),el=n(52927),ec=n(42305),es=n(42965),eu=n(96949),ed=n(93245),ef=n(36809),ep=n(42354),eh=n(53616),em=n(31252),eg=n(52589),ev=(0,ef.X)({container:[{marginRight:16},w.l0.height("100%")],hintButton:[w.l0.height("100%")]}),ey=new el.J(function(e){var t=e.onGenerateCode,n=e.height,r=(0,es.T3)(),i=(0,em.gf)(ep.x.id);return(0,ei.tZ)(ed.G,{css:ev.container,children:(0,ei.tZ)(eh.s,{keyCombo:r?void 0:i,text:"Generate",fontSize:Math.round(.6*n),css:ev.hintButton,onClick:function(){(0,eu.j)(eg.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),t()}})})}),eb=l.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),ew=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},eZ=new ec.j(function(e){return a.QQ.define({create:function(e){return ew(e)},compare:N(),update:function(e,t){return ew(t.state)},provide:function(t){return[eb,a.Wl.high((0,l.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,K.aU)(e,t,j.$,eo.WF)},markers:function(n){var r=n.state.field(t,!1);if(!r||!n.state.selection.main.empty)return[];var i=n.state.field(j.$,!1),o=0===n.state.doc.length,a=(0,ea.o)(n.state);if(r.length>0||i||a||o)return[];var l=n.dom.querySelector(".cm-minimap-gutter"),c=(null==l?void 0:l.clientWidth)||0,s=r.to,u=n.lineBlockAt(s),d=u.top,f=u.height;return[new ex({top:d+n.documentPadding.top,height:f,right:c,pocketOpen:null!==i,activeEditor:n.hasFocus,onGenerateCode:e})]}}))]}})}),ex=function(){"use strict";function e(t){(0,s._)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},t.draw=function(){var e=ey.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),eC=n(75271),ek=n(97420),eS=n(9602),e_=n(7935),eT=n(36608),eE=n(71049),eR=n(52130),eD=n(34209),eI=n(40455);function eB(e,t){e.dispatch({effects:q.Q.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function eA(e,t){(0,eD.el)({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:q.Q.of(null)}),e.hasFocus||e.focus()}function eP(e,t){e.dispatch({effects:q.h.of(t)})}function eG(e,t,n){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:q.Q.of(null),annotations:[eI.Z.of(!0),eR.Iv.of("full")]}),e.hasFocus||e.focus()}function eL(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.referenceType===t.referenceType}var eN=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),eO=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eE.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:eN.root,children:[(0,ei.tZ)(ed.G,{css:eN.text,children:(0,ei.tZ)(eT.r,{textVariant:"text"})}),(0,ei.tZ)(eS.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(e_.Z,{})})]})})}),eU=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return eO.create({onClose:function(){return eB(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),eM=n(66626),eX=n(54236),eF=n(79904),eW=n(15323),eV=n(41974),eH=n(64993),ez=n(52551),ej=n(29574),eq=n(85995),eJ=n(49853),eY=n(80786),e$=n(37862),eK=n(86283),eQ=(0,eJ.cn)(0),e0=(0,eJ.cn)(function(e){return e(eQ)<=eE.Bk?"compact":"normal"}),e1=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,c=e.source,s=function(){var e=_();(null==e?void 0:e.code)?(o(e.code),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:c})):I()},u=function(){var e,t;A.current=G,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:G,source:c}),k({message:G,type:eX.G_.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eX.MD.INLINE}})},d=(0,eX.xe)(),f=(0,eM._)((0,eX.s)(),2),p=f[0],h=f[1],m=(0,eX.ZR)().hasAccessToAdvancedModel,g=(0,eM._)((0,eC.useState)(!1),2),v=g[0],y=g[1],b=(0,ej.Gn)("chatEngine").preferences,w=(0,eX.KV)(),Z=(0,eC.useRef)(null),x=(0,eK.c)(),C=(0,eX.XW)({onCode:i,getFileContext:x}),k=C.sendMessage,S=C.stopMessage,_=C.getCode,T=C.loading,E=C.completed,R=C.error,D=C.clearError,I=(0,eC.useCallback)(function(){S(),a()},[S,a]),B=(0,eC.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:c}),I()},[I,c]),A=(0,eC.useRef)(null),P=(0,eE.U1)({id:t,inputRef:Z,loading:T,onSubmit:function(){X?s():u()},onClose:B}),G=P.value,L=P.setValue,N=P.onKeyDown,O=P.escPressed,U=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:G,source:c}),S()},M=(0,eX.Un)(),X=M&&E&&A.current===G,F=(0,eM._)((0,eC.useState)(function(){return(0,eJ.MT)()}),1)[0],W=(0,eY.b9)(eQ,{store:F}),V=(0,eY.Dv)(e0,{store:F}),H=(0,e$.Z)(function(e){return W(e.width)});return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eE.If,{requestMeasure:n,type:"generateCode",error:R,clearError:D,innerRef:H,children:[(0,ei.tZ)(eE.II,{value:G,inputRef:Z,onChange:function(e){return L(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:N,autoFocus:l}),(0,ei.BX)(eE.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eE.Xs,{type:"generateCode"}),E?(0,ei.tZ)(eS.hU,{disabled:!M,alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,ei.tZ)(eW.Z,{})}):null,d?(0,ei.tZ)(ez.q2,{availableModelNames:w,userLimits:d,selectedItem:p,hasAccessToAdvancedModel:m,onChange:function(e){if(!m&&"advanced"===e){y(!0);return}h(e)},advancedChatEngineOverride:b.chatEngine}):null]}),X?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eF.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=_();(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),B()}}),(0,ei.tZ)(eF.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:s,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eE.k4,{escPressed:O,connecting:!M,loading:T,disabled:!G||!G.trim(),promptPresentation:"normal"===V,onClick:function(){T?U():u()}})]})]}),(0,ei.tZ)(eq.Z,{isOpen:v,onClose:function(){return y(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e2=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e1.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eB(e,n)},acceptSuggestion:function(t){return eA(e,t)},updateCodeBlock:function(t){return eP(e,t)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(eH.M.floatingHeaderActive),i},r.updateDOM=function(e,t){var n=this.codeReference;return e1.update(e,function(e){return(0,eV.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eB(t,n)},e.acceptSuggestion=function(e){return eA(t,e)},e.updateCodeBlock=function(e){return eP(t,e)},e.autoFocus=!1})}),!0},r.eq=function(e){return eL(this.codeReference,e.codeReference)},n}(l.l9),e3=n(52657),e4=n(35177),e8=(0,eJ.cn)(0),e6=(0,eJ.cn)(function(e){return e(e8)<=eE.Bk?"compact":"normal"}),e5=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,c=e.autoFocus,s=e.updateDiffSelection,u=e.source,d=function(){var e=T();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(null==e?void 0:e.code)?((0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:u}),a(e.code)):U()},f=function(){var e,t;X.current=H,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:H,source:u}),S({message:H,type:eX.G_.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eX.MD.INLINE}})},p=(0,eX.xe)(),h=(0,eM._)((0,eX.s)(),2),m=h[0],g=h[1],v=(0,eX.ZR)().hasAccessToAdvancedModel,y=(0,eM._)((0,eC.useState)(!1),2),b=y[0],w=y[1],Z=(0,ej.Gn)("chatEngine").preferences,x=(0,eX.KV)(),C=(0,eK.c)(),k=(0,eX.XW)({onCode:i,getFileContext:C}),S=k.sendMessage,_=k.stopMessage,T=k.getCode,E=k.loading,R=k.completed,D=k.error,I=k.clearError,B=(0,eM._)((0,eC.useState)(!1),2),A=B[0],P=B[1],G=(0,eM._)((0,eC.useState)(null),2),L=G[0],N=G[1],O=(0,e3.Z)(s);(0,eC.useEffect)(function(){if(E){O.current(o.Suggestion);return}(R||A)&&O.current(D?o.Original:o.Compare)},[O,R,A,D,E]);var U=(0,eC.useCallback)(function(){_(),l()},[_,l]),M=(0,eC.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:u}),U()},[U,u]),X=(0,eC.useRef)(null),F=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:H,source:u}),_()},W=(0,eC.useRef)(null),V=(0,eE.U1)({id:t,inputRef:W,loading:E,onSubmit:function(){Y?d():f()},onClose:M}),H=V.value,z=V.setValue,j=V.onKeyDown,q=V.escPressed,J=(0,eX.Un)(),Y=J&&!D&&(R||A)&&X.current===H,$=(0,eM._)((0,eC.useState)(function(){return(0,eJ.MT)()}),1)[0],K=(0,eY.b9)(e8,{store:$}),Q=(0,eY.Dv)(e6,{store:$}),ee=(0,e$.Z)(function(e){return K(e.width)});(0,eC.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(t),n="inline-ai/last-completed/".concat(t),r="inline-ai/last-code-res/".concat(t),i=e4.Z.get(e,"string"),o=e4.Z.get(n,"boolean"),a=e4.Z.get(r,"object");return i&&(X.current=i),P(!!o&&o),a&&N({code:a.code,completed:a.completed,error:a.error}),function(){e4.Z.set(n,R||o);var t=T();if((null==t?void 0:t.completed)!==void 0&&e4.Z.set(r,t),X.current){var i=X.current;if(0===i.length){e4.Z.remove(e);return}e4.Z.set(e,i)}}},[R,T,t]);var et="advanced"===m?eX.GB:eX.hm,en=r.code.length>et;return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eE.If,{requestMeasure:n,type:"generateCode",error:D,clearError:I,innerRef:ee,children:[(0,ei.tZ)(eE.II,{value:H,inputRef:W,onChange:function(e){return z(e.currentTarget.value)},placeholder:"Enter a prompt to modify selection",onKeyDown:j,autoFocus:c}),(0,ei.BX)(eE.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eE.Xs,{type:"transformCode"}),R||A?(0,ei.tZ)(eS.hU,{alt:"Rerun the same prompt",onClick:function(){return f()},size:12,colorway:"grey",disabled:!J,children:(0,ei.tZ)(eW.Z,{})}):null,p?(0,ei.tZ)(ez.q2,{availableModelNames:x,userLimits:p,selectedItem:m,hasAccessToAdvancedModel:v,onChange:function(e){if(!v&&"advanced"===e){w(!0);return}g(e)},advancedChatEngineOverride:Z.chatEngine}):null]}),Y?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eF.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=T();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:u}),M()}}),(0,ei.tZ)(eF.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:d,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eE.k4,{escPressed:q,connecting:!J,loading:E,disabled:!H||!H.trim()||en,promptPresentation:"normal"===Q,onClick:function(){E?F():f()},codeLengthExceeded:en})]})]}),(0,ei.tZ)(eq.Z,{isOpen:b,onClose:function(){return w(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e7=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e5.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eB(e,n)},acceptSuggestion:function(t){return eG(e,t,n)},updateCodeBlock:function(t){eP(e,t)},updateDiffSelection:function(t){e.dispatch({effects:J.of(t)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},r.updateDOM=function(e,t){var n=this.codeReference;return e5.update(e,function(e){return(0,eV.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eB(t,n)},e.acceptSuggestion=function(e){return eG(t,e,n)},e.updateCodeBlock=function(e){return eP(t,e)},e.updateDiffSelection=function(e){t.dispatch({effects:J.of(e)})},e.autoFocus=!1})}),!0},r.eq=function(e){return eL(this.codeReference,e.codeReference)},n}(l.l9),e9=n(82231),te=n(24766),tt=n(19453),tn=n(10578),tr=n(53366),ti=n(20957),to=n(68417),ta=n(13585),tl=n(47305),tc=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:function(){}}});new ec.j(function(e){return tc.of(e)});var ts=(0,ef.X)({root:[w.l0.colWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],header:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween,w.l0.minHeight(28)],headerLeft:[w.l0.flex.growAndShrink(1),w.l0.rowWithGap(8),w.l0.align.center],footer:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.end]}),tu=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.onClose,i=e.openAiChatPane,o=e.source,a=(0,eK.c)(),l=(0,eX.gS)({getFileContext:a}),c=l.sessionId,s=l.sendMessage,u=l.stopMessage,d=l.model,f=l.loading,p=l.completed,h=l.message,m=l.retry,g=(0,eX.nV)(),v=(0,eC.useCallback)(function(){var e,t;(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:o,message_content:n.code}),s({codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:eX.MD.INLINE}})},[s,n,o]),y=(0,e3.Z)(v),b=(0,e3.Z)(u);(0,eC.useEffect)(function(){y.current();var e=b.current;return function(){e()}},[y,b]);var Z=(0,eX.Un)();return(0,ei.tZ)(eE.fL,{requestMeasure:t,type:"explainCode",children:(0,ei.BX)(ed.G,{css:ts.root,dataCy:"ghostwriter-inline-explain-content",children:[h||f?(0,ei.BX)(ed.G,{css:ts.header,children:[(0,ei.BX)(ed.G,{css:ts.headerLeft,children:[(0,ei.tZ)(to.R,{advanced:"advanced"===d}),(0,ei.tZ)(tl.Dz,{intent:eX.$h.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:w.TV.foregroundDimmest}})]}),p?(0,ei.tZ)(eS.hU,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,ei.tZ)(e_.Z,{onClick:function(){r(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:o})}})}):(0,ei.tZ)(eF.zx,{iconLeft:(0,ei.tZ)(ti.Z,{}),size:"small",text:"Stop",onClick:function(){u(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:o,message_content:n.code})}})]}):null,f&&!h?(0,ei.tZ)(tn.Z,{}):null,h?(0,ei.tZ)(e9.JG,{text:h,codeComponent:e9._l,messageState:p?eX.he.COMPLETE:void 0}):null,p?(0,ei.BX)(ed.G,{css:ts.footer,children:[(0,ei.tZ)(te.xv,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,ei.tZ)(eF.zx,{iconLeft:(0,ei.tZ)(tr.Z,{}),variant:"outlined",size:"small",text:"Retry",disabled:!Z,onClick:function(){m(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"response_regenerated",intent_type:"explain",source:o,message_content:n.code})}}),c?(0,ei.tZ)(eF.zx,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:Z?(0,ei.tZ)(tt.Z,{}):(0,ei.tZ)(tn.Z,{}),disabled:!Z,size:"small",text:"Reply in Chat",colorway:Z?"blurple":void 0,onClick:function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:o,message_content:n.code}),g(c,{sessionType:eX.FF.CHAT}),i(c)}}):null]}):null]})})}),td=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source;return tu.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eB(e,t)},openAiChatPane:function(t){return(0,ta.ZM)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:t}}})},source:n})},r.updateDOM=function(e,t){var n=this.codeReference;return tu.update(e,function(e){return(0,eV.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eB(t,n)}})}),!0},r.eq=function(e){return eL(this.codeReference,e.codeReference)},n}(l.l9),tf=n(37701),tp=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),th=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eE.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:tp.root,children:[(0,ei.tZ)(ed.G,{css:tp.text,children:(0,ei.tZ)(te.xv,{children:"Code length exceeded. Please select a smaller code block."})}),(0,ei.tZ)(eS.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(e_.Z,{})})]})})}),tm=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return th.create({onClose:function(){return eB(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),tg=ek.TV.blurpleDimmest,tv=ek.TV.accentPrimaryDimmest,ty=l.tk.theme({".cm-pocket-highlight":{backgroundColor:ek.TV.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(ek.TV.blurpleDimmest,", ").concat(tv,", ").concat(tg,", ").concat(tv,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),tb=l.tk.decorations.compute([j.$,Y,$.Yp],function(e){var t=e.field(j.$),n=e.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return l.p.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:e2,transformCode:e7,explainCode:td,ghostwriterKillswitch:eU,codeLengthExceeded:tm}[t.type],o=l.p.widget({widget:new i({id:t.id,codeReference:t.codeReference,source:t.source}),block:!0,side:0}).range(r);return l.p.set(o)}),tw=(0,l.EY)({above:!1,update:function(e){return(0,K.aU)(e,j.$)},markers:function(e){var t=e.state.field(j.$),n=e.state.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var c=a.jT.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return l.dc.forRange(e,s,c)}}),tZ=z.compute([j.$,j.u,$.Yp,Y],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp),i=e.field(Y);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===o.Compare?a.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null}),tx=c.V.compute([j.$,j.u,$.Yp],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?a.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null});function tC(e){var t=e.onGenerateCode,n=(0,tf.v)().isTeamWithAiDisabled,r=eZ.use(t);return(0,eC.useMemo)(function(){var e=[ty,j.$,j.u,tb,tw,Y,tZ,er,tx,r];return n||e.push(r),e},[r,n])}},24169:function(e,t,n){n.d(t,{Q:function(){return i},h:function(){return o}});var r=n(80403),i=r.Py.define(),o=r.Py.define()},84797:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return p}});var r=n(41733),i=n(30509),o=n(80403),a=n(3030),l=n(24169),c=n(54923),s=n(37505),u=n(96949);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:t.source}):"generateCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:t.source}):"transformCode"===n&&(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:t.source}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,function(t){e=t.value?{id:t.value.id,codeReference:t.value.codeReference,type:t.value.type,source:t.value.source,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,function(e){var t;return null!==(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null})]}}),p=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},13054:function(e,t,n){n.d(t,{I:function(){return r}});function r(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,p=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,v=e.doc.lineAt(g);v.number>u&&(t.push(v.text),n.push({from:v.from,to:Math.min(e.doc.length,v.to+1)})),u=v.number}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}},65895:function(e,t,n){n.d(t,{BB:function(){return C},AU:function(){return b},qU:function(){return x}});var r=n(27387),i=n(12285),o=n(96583),a=n(80403),l=n(3030),c=n(99842),s=n(37505),u=n(81202),d=n.n(u),f=n(17437),p=n(41091),h=n(23572),m=n(64988),g=n(23469);function v(e){var t,n;return null!==(n=null===(t=e.facet(c.N))||void 0===t?void 0:t.isDocumentSymbolSupported)&&void 0!==n&&n}var y=a.Py.define(),b=a.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,s.j)(t,y,function(e){n=e.value}),n}});function w(){return(w=(0,r._)(function(e,t,n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=o.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];a=[],l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)(f=d.value)&&"range"in f&&a.push(f)}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,a.length?a:null]}})})).apply(this,arguments)}function Z(e){if("Debounced function cancelled"!==e.message)throw e}var x=a.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,m.aU)(t,b,"selection"))return e;var n=t.state.field(b);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,h.RL)(t,r.end)>=n&&(0,h.RL)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:d()});function C(e){return[b,x,l.lg.fromClass(function(){"use strict";function t(n){(0,i._)(this,t),this.abortControllers=[];var a=this;this.getSymbolMap=(0,f.Z)((0,r._)(function(){var t,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=n.state.facet(p.Yp)))return[2];return a.abortControllers=[],[4,Promise.all(e.map(function(e){if(!(0,g.Z)(e).isDocumentSymbolSupported)return null;var n=new AbortController;return a.abortControllers.push(n),function(e,t,n){return w.apply(this,arguments)}(e,t,n.signal)}))];case 1:return r=o.sent(),n.dispatch({effects:y.of(null!==(i=r.find(Boolean))&&void 0!==i?i:null)}),[2]}})}),{wait:200}),v(n.state)&&this.getSymbolMap().catch(Z)}var n=t.prototype;return n.update=function(e){(0,m.aU)(e,"doc",c.N)&&v(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(Z))},n.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},t}())]}},92799:function(e,t,n){n.d(t,{Z:function(){return O},f:function(){return M}});var r=n(27387),i=n(41733),o=n(30509),a=n(96583),l=n(80403),c=n(3030),s=n(41091),u=n(54923),d=n(99842),f=n(3796),p=n(84238),h=n(84864),m=n(79904),g=n(9602),v=n(24766),y=n(93245),b=n(36809),w=n(27840),Z=n(7935),x=n(63163),C=n(26726),k=n(75271),S=n(48087),_=(0,b.X)({styles0:[x.l0.p(4),x.l0.pl(8)],styles1:[x.l0.maxWidth(100),x.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],styles2:[x.l0.position.absolute,x.l0.top(4),x.l0.right(4)],styles3:[x.l0.flex.rowReverse,x.l0.p(8),x.l0.pt(0)]}),T=(0,b.X)({headerContainer:[x.l0.flex.row,x.l0.align.center,x.l0.pr(4)],bodyContainer:[x.l0.justify.center,x.l0.align.center,x.l0.p(8),x.l0.pt(4)],input:[x.l0.p(4),x.l0.borderRadius(4)],wrapper:[x.l0.flex.column,x.l0.justify.center,x.l0.borderRadius(4),x.l0.shadow(2),x.l0.width(200)]});function E(e){var t=(0,p.Z)(e.onClose,[e.onClose]),n=(0,k.useRef)(null),r=(0,h.Y)(e.currentValue,function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}});return(0,f.tZ)(S.ZP,{children:(0,f.tZ)(y.G,{"data-testid":"RenameInput",innerRef:t,css:T.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,f.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,f.BX)(y.G,{css:T.headerContainer,children:[(0,f.tZ)(v.h4,{level:2,variant:"subheadDefault",css:_.styles0,children:"Rename"}),(0,f.tZ)(v.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:_.styles1,children:e.currentValue}),(0,f.tZ)(g.hU,{alt:"Close rename input",tooltipBehavior:"hidden",onClick:e.onClose,css:_.styles2,children:(0,f.tZ)(Z.Z,{})})]}),(0,f.tZ)(y.G,{css:T.bodyContainer,children:(0,f.tZ)(C.ZP,{css:T.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,f.tZ)(y.G,{css:_.styles3,children:(0,f.tZ)(m.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,f.tZ)(w.Z,{}),disabled:!!r.error||!r.value})})]})})})}var R=n(4960),D=n(52927),I=n(37505),B=n(23572),A=n(21480),P=n(23469),G=l.Py.define(),L=l.Py.define();function N(e){var t,n;return null!==(n=null===(t=e.facet(d.N))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var O=function(e){if(!N(e.state))return!1;var t=e.state.selection.main.head;return e.state.wordAt(t)?(e.dispatch({effects:G.of(t)}),!0):((0,R.J)(e,{message:"You cannot rename this element",offset:t}),!1)},U=l.QQ.define({create:function(){return null},update:function(e,t){return(null!==e&&(e=t.changes.mapPos(e,-1,l.gc.TrackDel)),(0,I.j)(t,G,function(t){e=t.value}),e&&(e>t.state.doc.length||!t.state.wordAt(e)||!N(t.state)))?null:e},provide:function(e){var t=new D.J(E),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},r=function(r){var a=r.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!r.state.wordAt(a))throw Error("Expected non-null range");var l=t.create({currentValue:n(r.state),onClose:function(){r.dispatch({effects:G.of(null)}),r.focus()},onRename:function(e){r.dispatch({effects:L.of(e)})}});return l.classList.add("replit-tooltip"),l.style.padding="0",{dom:l,update:function(e){t.update(l,function(t){var r=n(e.state);return r!==t.currentValue?(0,o._)((0,i._)({},t),{currentValue:r}):t})}}};return c.hJ.from(e,function(e){return null===e?null:{pos:e,create:r}})}});function M(e,t){return[U,c.lg.define(function(n){var i=null;return{onRename:function(t,o){return(0,r._)(function(){var r,l,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!N(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(r=n.state.facet(s.Yp)))throw Error("Expected non-null file path");if(!(l=n.state.field(U)))return[2];return i={clientId:t.clientId,requestId:t.generateId()},[4,t.request.rename(r,(0,B.sg)(n.state.doc,l),o,{id:i.requestId,tap:function(e){return(0,u.SC)(n,e)}})];case 1:if((c=a.sent()).cancelled)return[2];if("error"in c)throw Error("Something went wrong renaming ".concat(c.error.message));if(!(d=c.result))return[2];return(0,A.w)({edit:d,fs:e,client:t}),n.dispatch({effects:G.of(null)}),[2]}})}).apply(this)},cancelInflightRequest:function(){if(i){var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;if(l.clientId===i.clientId){l.notify.cancelRequest(i.requestId);break}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}i=null}},update:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;if(p.is(L)){var h=!0,m=!1,g=void 0;try{for(var v,y=t[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var b=v.value;if((0,P.Z)(b).isRenameSupported){this.onRename(b,p.value);return}}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},destroy:function(){this.cancelInflightRequest()}}})]}},70125:function(e,t,n){n.d(t,{hx:function(){return p},l:function(){return d},sy:function(){return f}});var r=n(80403),i=n(3030),o=n(41091),a=n(42305),l=n(25639),c=n(35370),s=n(32508),u=n.n(s);function d(e){var t=e.view,n=e.event,i=e.clipboardText,o=e.filePath,a=t.state.selection;if(!o||!(0,c.gK)(o)||a.ranges.length>1||a.main.from===a.main.to||!i||!u()(i)){!function(){if(!n){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else t.dispatch(t.state.replaceSelection(e))}}();return}n&&n.preventDefault();var l=t.state.sliceDoc(a.main.from,a.main.to),s="[".concat(l,"](").concat(i,")"),d=a.main.from+s.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:s},selection:r.jT.range(d,d)})}var f=i.tk.domEventHandlers({paste:function(e,t){var n;d({filePath:t.state.facet(o.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),p=new a.j(function(e){return i.tk.domEventHandlers({paste:function(t,n){var r=n.state.facet(o.Yp),i=null==t?void 0:null===(f=t.clipboardData)||void 0===f?void 0:f.files,a=function(e){var t=n.state.selection.main.head;n.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(i){var s=!0,u=!1,d=void 0;try{for(var f,p,h=i[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var m=p.value;r&&(0,c.gK)(r)&&(0,l.r)(m,e,r).then(a)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}})})},61873:function(e,t,n){n.d(t,{ZB:function(){return w},qs:function(){return x},Lo:function(){return b},xv:function(){return R},xg:function(){return D},uh:function(){return y},Do:function(){return E},$X:function(){return I},Yt:function(){return Z},Gv:function(){return B},Pz:function(){return C}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(80403),s=n(3030),u=n(16634),d=n(96949),f=n(66626),p={"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g,"Vault Token":/([sb]\.[a-zA-Z0-9]{24})/g},h={"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g},m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e,i){var o;return(0,r._)(this,n),(o=t.call(this)).id=e,o.result=i,o}return n.range=function(e,t,n){return new this(e,n).range(t.from,t.to)},n.generateId=function(){return this.secretId++},n}(c.uU);m.secretId=0;var g=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).key=e,i}return n.from=function(e){return new this(e)},n}(c.uU),v=c.Py.define({map:function(e,t){var n=c.Xs.of(e).map(t).iter(),r=n.from,i=n.to;return m.range(e.value.id,c.jT.cursor(r,i),e.value.result)}}),y=c.Py.define(),b=c.Py.define(),w=c.Py.define(),Z=c.Py.define(),x=c.Py.define(),C=function(e){var t=e.state.field(D);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,o=n.to,a=n.value;r.push({from:i,to:o,value:a}),n.next()}var l=e.state.doc.length,s=c.as.empty(l),u=[],f=[],p=!0,h=!1,m=void 0;try{for(var g,v=r[Symbol.iterator]();!(p=(g=v.next()).done);p=!0)!function(){var e=g.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,o=c.as.of({from:t,to:n,insert:i},l).map(s,!0);u=u.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(t)+i.length;u.push(c.jT.cursor(a)),f.push(y.of(r.id)),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}return e.dispatch({changes:s,effects:f,selection:c.jT.create(u)}),!0},k=function(e){return!!e.state.facet(I)&&!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return b.of(e)})}),!0)},S=function(e){return!e.state.facet(I)&&_(e)},_=function(e){return!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)};function T(e,t){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,o=[p,h][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=Object.entries(a)[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var m=(0,f._)(u.value,2),g=m[0],v=m[1],y=e.search(v);if(!(y<0)){var b=e.match(v);if(b){var w=y+b[0].length;return{start:y,end:w,secret:e.slice(y,w),provider:g}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var l=r.slice(0,i.start)+r.slice(i.end),s=m.generateId();return t.dispatch((0,a._)((0,o._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=c.jT.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:l},effects:v.of(m.range(s,r,i))}})),{scrollIntoView:!0})),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var E=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Z)){var s=l.value,u=s.from,d=s.to,f=s.secret;e=e.update({add:[g.from(f).range(u,d)],filter:function(){return!1}})}l.is(x)&&(e=c.Xs.empty)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),R=c.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.field(D,!1),r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n&&s.is(b)&&(s.value instanceof c.xm?n.between(s.value.from,s.value.to,function(t,n,r){e=r}):e=s.value),s.is(w)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),D=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)!function(){var t=o.value;t.is(v)&&(e=e.update({add:[t.value],sort:!0})),t.is(y)&&(e=t.value instanceof c.xm?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[s.tk.domEventHandlers({paste:T}),c.Wl.highest(s.$f.of([{key:"Mod-z",run:_},{key:"Enter",run:C},{key:"Tab",run:k,stopPropagation:!0},{key:"Escape",run:S}]))]}}),I=c.r$.define({combine:function(e){return e.some(Boolean)}}),B=u.RR.of(function(e){var t=e.state.field(D,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n})},66938:function(e,t,n){n.d(t,{F:function(){return g}});var r=n(3796),i=n(3030),o=n(62279),a=n(91166),l=n(11515),c=n(42305),s=n(63163),u=n(75271),d=n(23572),f=(0,o.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),p=(0,o.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),h={root:s.l0.backgroundColor.backgroundRoot,higher:s.l0.backgroundColor.backgroundHigher,highest:s.l0.backgroundColor.backgroundHighest,default:s.l0.backgroundColor.backgroundDefault},m=new c.j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,i.Eu)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i="\xa0"+i;return i}})});function g(e){var t=e.path,n=e.initialDoc,i=e.maxHeight,c=e.minHeight,s=e.extensions,g=e.allowScroll,v=e.fontSize,y=e.hideGutter,b=e.startLineNumber,w=e.style,Z=e.elevation,x=e.onNavigateToCode,C=(0,l.Z)(),k=C.ref,S=C.view,_=(0,u.useMemo)(function(){var e;return e=h[null!=Z?Z:"default"],(0,o.iv)({".cm-editor":e,".cm-gutters":e})},[Z]),T=m.use(b);return(0,r.tZ)("div",{style:w,children:(0,r.tZ)(a.ZP,{ref:k,initialDoc:n,css:[f,_,void 0===g||g?null:p],extensions:[T,void 0===s?[]:s],style:{minHeight:c,maxHeight:null!=i?i:"10em"},hideGutter:y,filePath:t,fontSize:v,readOnly:!0,onClick:function(e){if(x&&S){var t=e.clientX,n=e.clientY,r=S.posAtCoords({x:t,y:n});x(null!==r?(0,d.sg)(S.state.doc,r):null)}}})})}},38031:function(e,t,n){n.d(t,{d:function(){return d},z:function(){return u}});var r=n(12285),i=n(66626),o=n(75271),a=n(82973),l=n(86763),c=n.n(l),s=n(65037),u=function(){"use strict";function e(t){var n=this;if((0,r._)(this,e),this.saveToLocalStorage=c()(function(){a.Z.set("stateCache",{version:2,entries:Array.from(n.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new s.L(20),t){if("object"!=typeof t||null===t||!Object.prototype.hasOwnProperty.call(t,"version")||!Object.prototype.hasOwnProperty.call(t,"entries")||"number"!=typeof t.version||2!==t.version)return;var o=t.entries,l=!0,u=!1,d=void 0;try{for(var f,p=o[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var h=(0,i._)(f.value,2),m=h[0],g=h[1];this.map.set(m,g)}}catch(e){u=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}}}var t=e.prototype;return t.set=function(e,t){this.map.set(e,t),this.saveToLocalStorage()},t.get=function(e){return this.map.get(e)},e}(),d=(0,o.createContext)(null)},38158:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(80403),i=n(37505);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:o}}},21936:function(e,t,n){n.d(t,{X:function(){return w}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(96949),s=n(79904),u=n(58532),d=n(24766),f=n(93245),p=n(27840),h=n(63163),m=n(75271),g=n(36809),v=n(14118),y=n(40703),b=(0,g.X)({modal:[h.l0.colWithGap(16)],buttons:[h.l0.justify.end,h.l0.rowWithGap(16)]});function w(e){var t,n=e.openDeploymentPane,h=(0,o._)((0,m.useState)(null),2),g=h[0],w=h[1],Z=(0,v.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});return(0,y.C)((t=(0,i._)(function(e,t){var n,i,l,c,s,u,d,f,p,h,m,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.addCleanup,!Z)return[2];return[4,e.agentToolDeploy.workspace.stream({})];case 1:l=(i=o._.apply(void 0,[a.sent(),3]))[0],c=i[1],s=i[2],n(s),u=!1,d=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),p=(0,r._)(c),a.label=3;case 3:return[4,p.next()];case 4:if(!(u=!(h=a.sent()).done))return[3,6];if(!(m=h.value).ok)return[3,5];"confirmDeploy"===m.payload.$kind&&w(function(){return function(e){if(!e){w(null),l.push({$kind:"deployCanceled"});return}l.push({$kind:"deployConfirmed"}),w(null)}}),a.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return g=a.sent(),d=!0,f=g,[3,13];case 8:if(a.trys.push([8,,11,12]),!(u&&null!=p.return))return[3,10];return[4,p.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[Z]),(0,l.tZ)(u.u,{isOpen:"function"==typeof g,onRequestClose:function(){null==g||g(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"close"})},children:(0,l.BX)(f.G,{css:b.modal,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Time to deploy"}),(0,l.tZ)(d.xv,{children:"Your AI agent would like you to Deploy."}),(0,l.BX)(f.G,{css:b.buttons,children:[(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"cancel"})},text:"Cancel"}),(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!0),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"okay"}),n()},iconLeft:(0,l.tZ)(p.Z,{}),text:"Okay",colorway:"primary"})]})]})})}},13080:function(e,t,n){n.d(t,{E:function(){return E}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(96949),s=n(79904),u=n(58532),d=n(24766),f=n(93245),p=n(27840),h=n(63163),m=n(23882),g=n(75271),v=n(36809),y=n(40703),b=n(41733),w=n(21262),Z=n(71440),x=n(9122);function C(){var e=(0,w._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return C=function(){return e},e}var k={},S=(0,Z.Ps)(C()),_=n(37475),T=(0,v.X)({styles0:[h.l0.colWithGap(16)],styles1:[h.l0.justify.end,h.l0.rowWithGap(16)]});function E(){var e,t,n=(0,m.Z)().replspaceApi,h=(0,o._)((0,g.useState)(null),2),v=h[0],w=h[1],Z=(0,o._)((0,g.useState)(!1),2),C=Z[0],E=Z[1],R=(e=(0,b._)({},k,void 0),x.a(S,e)).data,D=(null==R?void 0:R.currentUser)||void 0,I=(0,_.iM)(),B=(0,_.Am)().flagPid2Shell,A=I&&B;return(0,g.useEffect)(function(){return n.onConfirmSendToken(function(e){e&&(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),w(function(){return e})})},[n]),(0,y.C)((t=(0,i._)(function(e,t){var n,i,l,s,u,d,f,p,h,m,g,v,y;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.session,i=t.addCleanup,!A)return[2];return[4,e.replspaceApi.init.stream({session:n.from})];case 1:s=(l=o._.apply(void 0,[a.sent(),3]))[0],u=l[1],d=l[2],i(d),f=!1,p=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),m=function(){var e=v.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var t,n,r=e.payload.nonce,i=null!==(n=null==D?void 0:null===(t=D.gitHubInfo)||void 0===t?void 0:t.accessToken)&&void 0!==n?n:void 0;if(!i)return s.push({$kind:"githubToken",nonce:r}),"continue";if(C)return s.push({$kind:"githubToken",token:i,nonce:r}),"continue";(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),w(function(){return function(e){if(!e){w(null),s.push({$kind:"githubToken",nonce:r});return}s.push({$kind:"githubToken",token:i,nonce:r}),w(null),E(!0)}})}},g=(0,r._)(u),a.label=3;case 3:return[4,g.next()];case 4:if(!(f=!(v=a.sent()).done))return[3,6];m(),a.label=5;case 5:return f=!1,[3,3];case 6:return[3,13];case 7:return y=a.sent(),p=!0,h=y,[3,13];case 8:if(a.trys.push([8,,11,12]),!(f&&null!=g.return))return[3,10];return[4,g.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(p)throw h;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[D,C,A]),(0,l.tZ)(u.u,{isOpen:"function"==typeof v,onRequestClose:function(){null==v||v(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),w(null)},children:(0,l.BX)(f.G,{css:T.styles0,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.tZ)(d.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.tZ)(d.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,l.BX)(f.G,{css:T.styles1,children:[(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),w(null)},text:"Deny"}),(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!0),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),w(null)},iconLeft:(0,l.tZ)(p.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},97891:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(3796),i=n(48088),o=n(63062),a=n(24766),l=n(93245),c=n(63163),s=n(36809),u=n(48087),d=(0,s.X)({overlay:[c.l0.position.fixed,c.l0.flex.row,c.l0.align.center,c.l0.justify.center,c.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:c.n0+1,cursor:"not-allowed"}],animationWrapper:[c.l0.center,c.l0.minWidth(225),c.l0.height(225),c.l0.p(16),c.l0.color.foregroundDefault,c.l0.borderRadius(8),c.l0.backgroundColor.backgroundOverlay,c.l0.zIndex(c.n0+1),{cursor:"not-allowed"}],lockText:c.l0.mt(32)});function f(e){var t=e.reason;return(0,r.tZ)(o.h,{children:(0,r.tZ)(l.G,{css:d.overlay,children:(0,r.tZ)(u.ZP,{children:(0,r.BX)(l.G,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.tZ)(i.Z,{height:80}),(0,r.tZ)(a.xv,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:t})]})})})})}},71724:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(3796),o=n(79904),a=n(44935),l=n(24766),c=n(93245),s=n(63163),u=n(75271),d=(0,n(36809).X)({styles0:[s.l0.colWithGap(24)],styles1:[s.l0.color.accentNegativeStronger],styles2:[s.l0.rowWithGap(12),s.l0.justify.end]});function f(e){var t=e.prompt,n=e.desc,s=e.type,f=e.placeholder,p=e.confirmText,h=e.loading,m=e.errorMessage,g=e.onCancel,v=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)((0,u.useState)(),2),Z=w[0],x=w[1];return(0,i.BX)(c.G,{css:d.styles0,children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:2,children:t}),(0,i.tZ)(l.xv,{children:n}),(0,i.tZ)(a.II,{type:s,value:Z,placeholder:f,autoFocus:!0,onChange:function(e){return x(e.target.value)}}),m?(0,i.tZ)(l.xv,{css:d.styles1,multiline:!1,children:m}):null,(0,i.BX)(c.G,{css:d.styles2,children:[(0,i.tZ)(o.zx,{disabled:h,onClick:g,text:"Cancel"}),(0,i.tZ)(o.zx,{colorway:y?"negative":"primary",disabled:h,onClick:function(){return Z&&v(Z)},text:p||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},46134:function(e,t,n){n.d(t,{$s:function(){return s},G$:function(){return i},fZ:function(){return o},p6:function(){return c}});var r=n(66791),i=.01,o=function(e,t){var n=t.resourceUsageType,r=t.forceGib,i=t.precision,o=t.skipUnits,a=t.additional,c=t.minimumValue,s=t.truncateToMillions,u=t.gibsDisplayAsBytes,d=l({input:e,resourceUsageType:n,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===c?null:c,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function a(e,t){var n=t.precision,r=t.minimumValue,i=t.forceGib,o=r&&0!==e;return e>=1073741824*(null!=r?r:1)||i?o&&e<1073741824*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"GiB"}:{formattedValue:s(e).toFixed(n),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"MiB"}:{formattedValue:c(e).toFixed(n),units:"MiB"}}var l=function(e){var t=e.input,n=e.resourceUsageType,i=e.forceGib,o=e.precision,l=e.minimumValue,c=e.truncateToMillions,s=e.gibsDisplayAsBytes,u=l&&0!==t&&t<l;switch(n){case"Bytes":return a(t,{precision:o,minimumValue:l,forceGib:i});case"GiB":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB"};if(s)return a(1073741824*t,{precision:o,minimumValue:l,forceGib:!1});if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB"};return{formattedValue:t.toFixed(o),units:"GiB"};case"GiB-months":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB-months"};if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB-months"};return{formattedValue:t.toFixed(o),units:"GiB-months"};case"ComputeUnits":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"compute units"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"requests"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"ScheduledDays":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};case"None":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:""};default:(0,r.Z)(n)}},c=function(e){return e/1048576},s=function(e){return e/1073741824}},80983:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(21262);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},7830:function(e,t,n){n.d(t,{e:function(){return h}});var r=n(3796),i=n(79035),o=n(24766),a=n(22419),l=n(93245),c=n(36809),s=n(42427),u=n(63163),d=n(17202),f=n(85983),p=(0,c.X)({root:[u.l0.py(4),u.l0.rowWithGap(4),u.l0.align.center]});function h(e){var t=e.deployment,n=e.small,c=t.currentBuild,u=i.V[c.status],h=u.title,m=u.color,g=(0,d.Z)(new Date(c.timeCreated),Date.now(),{addSuffix:!0}),v="Deployed ".concat(g," by ").concat(c.user.displayName),y=c.status===f.Fe.Success?"Deployed":h;return(0,r.tZ)(a.u,{tooltip:v,children:(0,r.BX)(l.G,{css:p.root,children:[(0,r.tZ)(s.Z,{size:n?12:16,color:m}),(0,r.tZ)(o.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},94988:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(66626),i=n(3796),o=n(75271),a=n(49853),l=n(27598),c=n(20394);function s(e){var t=(0,r._)((0,o.useState)(function(){var t,n,r,i,o,c,s;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=t.fs,i=t.dotReplit,o=t.ports,c=t.secrets,(s=(0,a.MT)()).set(l.CK,n),s.set(l.bA,r),s.set(l.My,i),s.set(l.l,o),s.set(l.fN,c),s}),1)[0];return(0,i.BX)(c.aT.Provider,{value:t,children:[e.children,(0,i.tZ)(l.jd,{replId:e.replId})]})}},27598:function(e,t,n){n.d(t,{jd:function(){return eM},CK:function(){return er},My:function(){return ea},bA:function(){return ei},l:function(){return el},fN:function(){return eo},_U:function(){return eL},rm:function(){return eJ},XA:function(){return eH},$y:function(){return eS},BU:function(){return ex},ev:function(){return eR},hn:function(){return ev},pn:function(){return eT},kW:function(){return em},v5:function(){return eu},XZ:function(){return ec},MV:function(){return ew},l9:function(){return eC},U:function(){return eN},t7:function(){return ed},m8:function(){return eX},Qk:function(){return es},mF:function(){return ej}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(96583),d=n(52657),f=n(16155),p=n(82419),h=n(85983),m=n(41974),g=n(49853),v=n(75271),y=n(66791),b=n(77631),w=n(99799),Z=n(96394),x=n(64172),C=n(38242),k=n(21262),S=n(71440),_=n(39537),T=n(9122),E=n(76143),R=n(91476),D=n(82303);function I(){var e=(0,k._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n  }\n"]);return I=function(){return e},e}function B(){var e=(0,k._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}function A(){var e=(0,k._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      createRvmDeployment: createDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      createScheduledDeployment: createDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      createStaticDeployment: createDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n      redeployAutoscaleDeployment: redeployDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      redeployRvmDeployment: redeployDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      redeployScheduledDeployment: redeployDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      redeployStaticDeployment: redeployDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n      useDeploymentDebugSummaries {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return A=function(){return e},e}function P(){var e=(0,k._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}function G(){var e=(0,k._)(["\n  query DeploymentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return G=function(){return e},e}function L(){var e=(0,k._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return L=function(){return e},e}function N(){var e=(0,k._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}function O(){var e=(0,k._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function U(){var e=(0,k._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var M={},X=(0,S.Ps)(I()),F=(0,S.Ps)(B(),_.uC,_.MX),W=(0,S.Ps)(A()),V=(0,S.Ps)(P(),F,W),H=(0,S.Ps)(G(),V,X);function z(e){var t=(0,l._)({},M,e);return E.t(H,t)}var j=(0,S.Ps)(L(),_.Si),q=(0,S.Ps)(N(),_.MX,_.uC),J=(0,S.Ps)(O(),F),Y=(0,S.Ps)(U(),_.MX);function $(){return($=(0,a._)(function(e){var t,n,r,i,o,a,l,c,s,d,f;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:J,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(a=(s=u.sent()).errors)||void 0===a?void 0:a.length)throw Error(s.errors.map(function(e){return e.message}).join(", "));if((null===(c=s.data)||void 0===c?void 0:null===(l=c.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(f=s.data)||void 0===f?void 0:null===(d=f.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function K(){return(K=(0,a._)(function(e){var t,n,r,i,o,a,l,c;return(0,u.Jh)(this,function(s){switch(s.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:Y,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null===(r=(a=s.sent()).errors)||void 0===r?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null===(o=a.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=a.data)||void 0===c?void 0:null===(l=c.failHostingBuild)||void 0===l?void 0:l.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var Q=n(20394),ee=n(54821),et=n(80703),en=n(14118),er=(0,g.cn)({}),ei=(0,g.cn)({}),eo=(0,g.cn)({}),ea=(0,g.cn)({}),el=(0,g.cn)({});function ec(){return(0,Q.Hg)(ei)}function es(){return(0,Q.Hg)(eo)}function eu(){return(0,Q.Hg)(ea)}function ed(){return(0,Q.Hg)(el)}var ef=(0,g.cn)(void 0),ep=(0,g.cn)(void 0),eh=(0,g.cn)(ee.z.Loading);function em(){return(0,Q.Hg)(eh)}var eg=(0,g.cn)(void 0);function ev(){return(0,Q.Hg)(eg)}var ey=(0,g.cn)(void 0),eb=(0,g.cn)(void 0);function ew(){return(0,Q.Hg)(eb)}var eZ=(0,g.cn)(void 0);function ex(){var e,t,n=(0,Q.Hg)(ef),r=(0,Q.Hg)(eZ),i=(0,Q.Hg)(ek),o=(0,Q.$X)(eI),a=(0,Q.$X)(eF),l=(0,s._)(z({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){a(e.message)}}),1)[0],c=function(e){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:h.RO.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:h.RO.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var t=r.createAutoscaleDeployment,i=r.createRvmDeployment,o=r.createScheduledDeployment,a=r.createStaticDeployment,l=r.redeployAutoscaleDeployment,c=r.redeployRvmDeployment,s=r.redeployScheduledDeployment,u=r.redeployStaticDeployment;switch(e){case h.r4.Static:return{deploy:a,redeploy:u,isIncludedInSubscription:!1};case h.r4.Cron:return{deploy:o,redeploy:s,isIncludedInSubscription:!1};case h.r4.CloudRun:return{deploy:t,redeploy:l,isIncludedInSubscription:!1};case h.r4.Gce:var d,f=i.isAuthorized,p=(null==n?void 0:n.__typename)==="Repl"&&(null===(d=n.owner)||void 0===d?void 0:d.__typename)==="Team";return{deploy:i,redeploy:c,isIncludedInSubscription:f&&p};case h.r4.Extension:case h.r4.Goval:throw Error("Found unexpected provider");default:(0,y.Z)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(n)return l({variables:{replId:n.id}})},hasDebugSummariesAuthorization:null!==(t=(0,en.P5)({controlName:b.Iw,logFlagToAnalytics:!1})&&(null==r?void 0:null===(e=r.useDeploymentDebugSummaries)||void 0===e?void 0:e.isAuthorized))&&void 0!==t&&t}}function eC(e){var t,n,r,i,o,a;return!!(i=(t=(0,l._)({},M,{variables:{replId:e}}),r=T.a(H,t)).data,o=r.refetch,{isTeamRepl:(null==(a=(null==i?void 0:i.getRepl.__typename)==="Repl"?i.getRepl:null)?void 0:null===(n=a.owner)||void 0===n?void 0:n.__typename)==="Team",refetch:o}).isTeamRepl}var ek=(0,g.cn)(void 0);function eS(){return(0,Q.Hg)(ek)}var e_=(0,g.cn)(void 0);function eT(){return(0,Q.Hg)(e_)}var eE=(0,g.cn)(void 0);function eR(){return(0,Q.Hg)(eE)}var eD=(0,g.cn)(null,function(e,t){t(eg,void 0),t(ey,void 0),t(ek,void 0),t(e_,void 0),t(eh,ee.z.Ready)}),eI=(0,g.cn)(null,function(e,t,n){var r,i="Repl"===n.getRepl.__typename?n.getRepl:null,o=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&o&&t(eZ,i.authorizations)}),eB=(0,g.cn)(null,function(e,t,n){var r,i,o,a="Repl"===n.getRepl.__typename?n.getRepl:null,l=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(a&&l){t(ef,a),t(ep,l),t(eI,n),t(eb,!!a.config.isVnc);var c=a.hostingDeployment;if(c){if("HostingDeployment"!==c.__typename)return t(eE,"Unexpected hosting deployment typename: ".concat(c.__typename));if(t(eg,c.id),t(ek,c.currentBuild),t(ey,c.replitAppSubdomain||(0,w.Jw)({replSlug:a.slug,username:null===(o=a.owner)||void 0===o?void 0:o.username})),c.inProgressBuild){t(e_,c.inProgressBuild),t(eh,ee.z.Deploying);return}return void t(eh,(0,et.Zx)(c.currentBuild.status))}t(ey,(0,w.Jw)({replSlug:a.slug,username:null===(i=a.owner)||void 0===i?void 0:i.username})),t(eh,ee.z.Ready)}});function eA(){var e=(0,Q.$X)(eB),t=(0,Q.$X)(eF);return(0,s._)(z({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eP=(0,g.cn)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(eh),i=e(e_),o=e(ek),a=n.status;if(r===ee.z.Deploying){if(!i){t(eF,"No deployment in progress found");return}t(e_,(0,m.Uy)(i,function(e){e.status=a})),a!==h.Fe.Success&&a!==h.Fe.Failed||(t(e_,void 0),a!==h.Fe.Success&&o||t(ek,(0,m.Uy)(i,function(e){e.status=a,e.hasImageTag=i.provider!==h.r4.Static&&a===h.Fe.Success})))}else if(r===ee.z.ProcessingLifecycleCommand){if(!o){t(eF,"No current build found");return}t(ek,(0,m.Uy)(o,function(e){e.status=a}))}t(eh,(0,et.Zx)(a)),n.message&&a===h.Fe.Failed&&t(eF,n.message)}}),eG=(0,g.cn)(null);function eL(){return(0,Q.Hg)(eG)}function eN(e){var t=(0,Q.yL)(eG),n=(0,d.Z)(e);(0,v.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var eO=(0,g.cn)(function(e){var t,n;switch(e(eh)){case ee.z.Deploying:return null===(t=e(e_))||void 0===t?void 0:t.id;case ee.z.ProcessingLifecycleCommand:return null===(n=e(ek))||void 0===n?void 0:n.id;default:return}}),eU=(0,g.cn)(null,(r=(0,a._)(function(e,t,n){var r;return(0,u.Jh)(this,function(e){return(r=n.data.data)&&(t(eP,r.hostingBuildDeployActionUpdates),t(eG,r.hostingBuildDeployActionUpdates)),[2]})}),function(e,t,n){return r.apply(this,arguments)}));function eM(e){var t,n,r,i,o,a,c;return t=e.replId,n=eA(),r=(0,Q.$X)(eU),i=(0,Q.$X)(eF),(0,v.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a={variables:{input:{buildId:null!=(o=(0,Q.Hg)(eO))?o:""}},skip:!o,onData:r,onError:function(e){i(e.message)}},c=(0,l._)({},M,a),R.m(j,c),null}function eX(){var e=(0,f.Z)(),t=eA(),n=(0,Q.$X)(eh);return(0,v.useCallback)(function(){return n(ee.z.Loading),t({variables:{replId:e}})},[t,n,e])}var eF=(0,g.cn)(null,function(e,t,n){t(eE,n)}),eW=(0,g.cn)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){t(eF,i.message);return}t(e_,i.build),t(eg,i.targetDeployment.id),t(ey,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),t(eh,ee.z.Deploying)}});function eV(e){var t=e.provider,n=e.ignorePorts;switch(t){case h.r4.Static:return h.Vp.Static;case h.r4.CloudRun:return h.Vp.CloudRun;case h.r4.Cron:return h.Vp.Cron;default:return n?h.Vp.Worker:h.Vp.Server}}function eH(){var e,t,n=(0,f.Z)(),r=ev(),i=eu(),o=(0,Q.Hg)(er),c=ec(),d=(0,s._)((e=(0,l._)({},M,void 0),D.D(q,e)),1)[0],m=(0,Q.$X)(eW),g=(0,Q.$X)(eF),C=(0,Q.$X)(eh),k=(0,Q.XD)(e_),S=eS();return{deployBuild:(0,v.useCallback)((t=(0,a._)(function(e){var t,a,l,s,f,v,_,T,E,R,D,I,B,A,P;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.envVars,a=e.subdomain,l=e.machineConfigurationId,s=e.maxMachineInstances,f=e.config,v=e.machineJob,_=e.isPrivate,k())return g("Deployment already in progress"),[2];u.label=1;case 1:if(u.trys.push([1,5,,6]),T=f.buildCommand,E=f.runCommand,R=f.publicDir,D=f.ignorePorts,!(I=S?eV({provider:null==S?void 0:S.provider,ignorePorts:!!D}):f.appType))throw new x.P3;if(!a)throw new x.Q5;switch(I){case h.Vp.Static:if(!(0,w.Ar)(R))throw new x.SF;break;case h.Vp.Worker:case h.Vp.Server:case h.Vp.CloudRun:case h.Vp.Cron:if(!(0,w.Ar)(E))throw new x.ZG;if(I===h.Vp.Cron){if(!(null==v?void 0:v.crontab)||""===v.crontab)throw new x.Bz("Schedule cannot be empty.");if(!(0,p.isValidCron)(v.crontab))throw new x.Bz("Invalid schedule. Must be a valid cron expression.");if(!(null==v?void 0:v.timezone)||""===v.timezone)throw new x.Iy("Timezone cannot be empty.");if(!(0,b.lb)(v.timezone))throw new x.Iy("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,y.Z)(I)}return C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:return B=u.sent(),[4,(0,Z.OD)({buildCommand:T,runCommand:E,appType:I,publicDir:R,ignorePorts:D},B,{dotReplit:i,fs:c,container:o})];case 3:return u.sent(),A=(0,et.oU)(I),[4,d({variables:{input:{replId:n,targetDeploymentId:r,targetMachineConfigurationId:l,maxMachineInstances:s,commands:{build:T,run:E||""},envVars:t,subdomain:a,provider:A,appType:I,context:"workspace",machineJob:v,isPrivate:_}},onCompleted:m})];case 4:return u.sent(),[3,6];case 5:throw P=u.sent(),C(ee.z.Ready),P;case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[d,m,g,C,k,r,n,o,c,i,S]),redeployWithNoNewOptions:(0,v.useCallback)((0,a._)(function(){var e,t,o,a,l,c,s;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(k())return g("Deployment already in progress"),[2];u.label=1;case 1:return u.trys.push([1,4,,5]),C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:if(t=(e=u.sent()).buildCommand,o=e.runCommand,a=e.publicDir,l=e.ignorePorts,!r)throw new x.wQ;if(!S)throw new x.ZH;if(!(c=eV({provider:S.provider,ignorePorts:!!l})))throw new x.P3;switch(c){case h.Vp.Static:if(!(0,w.Ar)(a))throw new x.SF;break;case h.Vp.Worker:case h.Vp.Server:case h.Vp.CloudRun:case h.Vp.Cron:if(!(0,w.Ar)(o))throw new x.ZG;break;default:(0,y.Z)(c)}return[4,d({variables:{input:{replId:n,targetDeploymentId:r,commands:{build:t,run:o||""},provider:(0,et.oU)(c),appType:c,context:"workspace",isPrivate:S.isPrivate}},onCompleted:m})];case 3:return u.sent(),[3,5];case 4:throw s=u.sent(),C(ee.z.Ready),s;case 5:return[2]}})}),[d,m,g,C,k,r,n,i,S])}}var ez=(0,g.cn)(null,(i=(0,a._)(function(e,t,n){var r,i,o,a,s,d,f,p;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(r=n.args,i=n.replId,o=void 0,(a=r.command)===h.Qc.UpdateMachineConfiguration){if(!(s=e(ek)))return t(eF,"No current build found"),[2];if(!r.machineConfigurationId)return t(eF,"No machine configuration found"),[2];(d=(0,et.Ti)(a))&&(t(ek,(0,m.Uy)(s,function(e){e.status=d})),t(eh,(0,et.Zx)(d)))}if(a===h.Qc.Resume||a===h.Qc.Suspend){if(!(f=e(ek)))return t(eF,"No current build found"),[2];o=f.id,(p=(0,et.Ti)(a))&&(t(ek,(0,m.Uy)(f,function(e){e.status=p})),t(eh,(0,et.Zx)(p)))}u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(e){return $.apply(this,arguments)}((0,c._)((0,l._)({},r),{buildId:o,replId:i}))];case 2:return u.sent(),a===h.Qc.Destroy&&t(eD),[3,4];case 3:return t(eF,u.sent().message),[3,4];case 4:return[2]}})}),function(e,t,n){return i.apply(this,arguments)}));function ej(){var e,t=(0,f.Z)(),n=(0,Q.$X)(ez);return(0,v.useCallback)((e=(0,a._)(function(e){return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,n({replId:t,args:e})];case 1:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[n,t])}var eq=(0,g.cn)(null,(o=(0,a._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:if(!(n=e(eg)))return t(eF,"No deployment found"),[2];if(!(r=e(e_)))return t(eF,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return K.apply(this,arguments)}({buildId:r.id,targetDeploymentId:n})];case 2:return o.sent(),[3,4];case 3:return t(eF,o.sent().message),[2];case 4:if(t(e_,void 0),t(eh,ee.z.Ready),(i=e(ek))&&(i.status===h.Fe.Success||i.status===h.Fe.Failed))return[2];return t(ek,(0,m.Uy)(r,function(e){e.status=h.Fe.Failed})),[2]}})}),function(e,t){return o.apply(this,arguments)}));function eJ(){return(0,Q.$X)(eq)}},20394:function(e,t,n){n.d(t,{$X:function(){return d},Hg:function(){return s},XD:function(){return f},aT:function(){return l},yL:function(){return u}});var r=n(3702),i=n(80786),o=n(21962),a=n(75271),l=(0,a.createContext)(null);function c(){var e=(0,a.useContext)(l);if(!e)throw Error("Expected store in context");return e}function s(e){return(0,i.Dv)(e,{store:c()})}function u(e){return(0,r.b)(e,c())}var d=function(e){return(0,i.b9)(e,{store:c()})};function f(e){return(0,o.lV)((0,a.useCallback)(function(t){return t(e)},[e]),{store:c()})}},14769:function(e,t,n){n.d(t,{Qm:function(){return s},fG:function(){return u},G8:function(){return h},lV:function(){return p},KU:function(){return m},Lv:function(){return d},lt:function(){return f}});var r=n(3796),i=n(62279),o=n(93245),a=n(9101),l=n(63163),c=(0,i.iv)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function s(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.tZ)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.BX)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.tZ)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.tZ)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.tZ)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.tZ)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.tZ)("clipPath",{id:"clip0_3629_246",children:(0,r.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.tZ)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.tZ)("defs",{children:(0,r.BX)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"4"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"4"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function f(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.tZ)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.tZ)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function p(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.tZ)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function h(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.BX)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.tZ)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.tZ)(o.G,{css:[l.l0.py(6),l.l0.px(12),l.l0.color.accentPrimaryStronger],children:(0,r.tZ)(a.Z,{size:32})})}},8278:function(e,t,n){var r,i,o,a;n.d(t,{a:function(){return i},k:function(){return r}}),(o=r||(r={})).Intro="intro",o.Deployment="deployment",o.DeploymentInProgress="deployment_in_progress",o.Analytics="analytics",o.Logs="logs",o.Settings="settings",o.Schedule="schedule",o.ResourceMonitoring="resource_monitoring",o.ReservedVMTierSelection="reserved_vm_tier_selection",o.AutoscaleMachineConfiguration="autoscale_machine_configuration",(a=i||(i={})).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",a.ChangeView="change_view",a.OpenPane="open_pane"},79035:function(e,t,n){n.d(t,{B:function(){return f},V:function(){return d}});var r,i=n(42516),o=n(3796),a=n(30286),l=n(98724),c=n(54300),s=n(63163),u=n(85983),d=(r={},(0,i._)(r,u.Fe.Suspended,{title:"Paused",color:s.TV.greyDefault,colorway:"grey",icon:(0,o.tZ)(a.Z,{})}),(0,i._)(r,"UBBSuspended",{title:"Suspended",color:s.TV.greyDefault,colorway:"negative",icon:(0,o.tZ)(c.Z,{})}),(0,i._)(r,u.Fe.UpdatingTier,{title:"Updating tier",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Suspending,{title:"Pausing",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Resuming,{title:"Resuming",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Pending,{title:"Provisioning",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Building,{title:"Building",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Running,{title:"Bundling",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Promoting,{title:"Promoting",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Failed,{title:"Failed",color:s.TV.accentNegativeDefault,colorway:"negative",icon:(0,o.tZ)(c.Z,{})}),(0,i._)(r,u.Fe.Success,{title:"Deployed",color:s.TV.accentPositiveDefault,colorway:"positive"}),r);function f(e){switch(e){case u.Fe.Building:case u.Fe.Promoting:case u.Fe.Running:case u.Fe.Pending:return"is deploying";case u.Fe.Resuming:return"is resuming";case u.Fe.Suspending:return"is pausing";case u.Fe.Failed:return"failed to deploy";case u.Fe.Success:return"deployed";case u.Fe.Suspended:return"paused";case u.Fe.UpdatingTier:return"is updating tier"}}},39537:function(e,t,n){n.d(t,{Si:function(){return g},MX:function(){return Z},r5:function(){return C},bN:function(){return w},uC:function(){return b}});var r=n(21262),i=n(71440),o=n(33479);function a(){var e=(0,r._)(["\n  fragment DeploymentLink on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a());function c(){var e=(0,r._)(["\n  fragment BuildDebugSummary on HostingDebugSummary {\n    id\n    sessionId\n    eventId\n    type\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,r._)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n    slug\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,r._)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    hasDeployLogs\n    suspendedReason\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    machineJob {\n      timezone\n      crontab\n    }\n    user {\n      id\n      displayName\n      username\n    }\n    isPrivate\n    rollbackSourceBuildId\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment DeploymentStatus on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      suspendedReason\n      timeCreated\n      user {\n        id\n        displayName\n      }\n      provider\n    }\n    inProgressBuild {\n      id\n    }\n    latestBuildStatus\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,r._)(["\n  fragment DeploymentItem on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n    repl {\n      id\n      title\n      iconUrl\n      ...ReplLinkRepl\n    }\n    ...DeploymentLink\n    ...DeploymentStatus\n  }\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var g=(0,i.Ps)(c()),v=(0,i.Ps)(s()),y=(0,i.Ps)(u(),v),b=(0,i.Ps)(d()),w=(0,i.Ps)(f()),Z=(0,i.Ps)(p(),g,y,b,w),x=(0,i.Ps)(h()),C=(0,i.Ps)(m(),o.Y,l,x)},77317:function(e,t,n){n.d(t,{EC:function(){return g},U4:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(l()),p=(0,o.Ps)(c(),f),h=(0,o.Ps)(s(),p),m=(0,o.Ps)(u(),h,p,f);function g(e){var t=(0,r._)({},d,e);return a.D(m,t)}},7283:function(e,t,n){var r=n(66626),i=n(25722),o=n(77317),a=n(99595),l=n(96949),c=n(85983),s=n(52589);t.Z=function(e){var t=e.isMobileApp,n=e.isTeam,u=e.handleUpgradeTriggered,d=e.replId,f=(0,a.Z)(),p=f.showConfirm,h=f.showError,m=function(e,t){i.n_({message:t}),i.Tb(Error(e.message)),h("Something unexpected happened, please try again.")},g=(0,r._)((0,o.EC)({onError:function(e){return m(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,a=e.addOrInviteReplMultiplayer;switch(a.__typename){case"NotFoundError":case"UnauthorizedError":h(a.message);return;case"UserError":if(a.message.includes("reached the limit")){if(t&&!n){h("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!t&&u){u(!0);return}}h(a.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===a.result.__typename?(r=c.ml.Email,i=a.result.email):(r=c.ml.Username,i=(null===(o=a.result.user)||void 0===o?void 0:o.username)?"@".concat(a.result.user.username):"user")}(0,l.j)(s.U3.MULTIPLAYER_INVITED,{replId:d,inviteMethod:r}),p("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:g[0],loadingAddMutation:g[1].loading}}},46956:function(e,t,n){n.d(t,{B:function(){return l}});var r=n(1053),i=n(74457),o=n(76848),a=n(75271);function l(e){var t=e.runner,n=e.onRunInitiated,l=(0,o.s2)(),c=(0,i.L7)(t),s=(0,a.useMemo)(function(){return l&&c!==r.Ah.OFFLINE?l.step:c},[c,l]),u=(0,a.useCallback)(function(){if(s===r.Ah.IDLE){null==n||n(),(null==l?void 0:l.run)?l.run():t.run();return}s===r.Ah.RUNNING&&((null==l?void 0:l.stop)?l.stop():t.stopRun())},[s,n,l,t]);return{runState:s,toggleRunState:u}}},60873:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(75271);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},45883:function(e,t,n){var r=n(75271);t.Z=function(e,t,n){(0,r.useEffect)(function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}},t)}},37701:function(e,t,n){n.d(t,{v:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(16155);function d(){var e,t,n,i,o=(n={variables:{replId:(0,u.Z)()}},i=(0,r._)({},c,n),a.a(s,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(t=o.repl.owner.organization)||void 0===t?void 0:t.isAiEnabled)===!1}}},27001:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(82973),o=n(75271);function a(e,t){var n=(0,r._)((0,o.useState)(function(){var n;return null!==(n=i.Z.get(e))&&void 0!==n?n:t}),2),a=n[0],l=n[1];return(0,o.useEffect)(function(){i.Z.set(e,a)},[e,a]),[a,l]}},53904:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(27387),i=n(96583),o=n(10777),a=n(23882),l=n(54129);function c(){var e=(0,a.Z)().toolchain;function t(){return(t=(0,r._)(function(t){return(0,i.Jh)(this,function(n){return[2,e.setModuleConfig(t)]})})).apply(this,arguments)}function n(){return(n=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.addModule(t).catch(function(e){o.kg.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.removeModule(t).catch(function(e){o.kg.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(t,n).catch(function(e){o.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,l.Z)(e.modules),configs:(0,l.Z)(e.configs),moduleConfig:(0,l.Z)(e.moduleConfig),setModuleConfig:function(e){return t.apply(this,arguments)},addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return c.apply(this,arguments)},upgradeModule:function(e,t){return s.apply(this,arguments)}}}},34820:function(e,t,n){n.d(t,{in:function(){return C},Oe:function(){return k},RC:function(){return S}});var r=n(66626),i=n(75271),o=n(41974),a=n(41733),l=n(21262),c=n(71440),s=n(33479),u=n(91476);function d(){var e=(0,l._)(["\n  fragment OrgPresenceSessionUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,l._)(["\n  fragment OrgPresenceSessionProject on Project {\n    id\n    title\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,l._)(["\n  fragment OrgPresenceSessionRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    project {\n      id\n      org {\n        id\n        slug\n      }\n      ...OrgPresenceSessionProject\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,l._)(["\n  fragment OrgPresenceSessionItem on OrgPresenceSession {\n    id\n    user {\n      ...OrgPresenceSessionUser\n    }\n    repl {\n      ...OrgPresenceSessionRepl\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,l._)(["\n  subscription OrgPresence($input: OrgReplPresenceSessionEventsInput!) {\n    orgReplPresenceSessionEvents(input: $input) {\n      __typename\n      ... on OrgPresenceSessionInitEvent {\n        sessions {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionPingEvent {\n        session {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionLeaveEvent {\n        sessionId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},v=(0,c.Ps)(d()),y=(0,c.Ps)(f()),b=(0,c.Ps)(p(),s.Y,y),w=(0,c.Ps)(h(),v,b),Z=(0,c.Ps)(m(),w);function x(e,t){var n=t.id,r=t.repl,i=t.user;if(i&&r){var o={id:n,repl:r,user:i,project:r.project||null},a=e.findIndex(function(e){return e.id===n});-1===a?e.push(o):e.splice(a,1,o)}}var C=function(e){var t,n=e.orgId,l=e.projectId,c=(0,r._)((0,i.useState)([]),2),s=c[0],d=c[1];return(0,i.useEffect)(function(){d([])},[n,l]),t=(0,a._)({},g,{variables:{input:{orgId:n,projectId:l}},onData:function(e){var t,n=null===(t=e.data.data)||void 0===t?void 0:t.orgReplPresenceSessionEvents;n&&d(function(e){return(0,o.Uy)(e,function(e){!function(e,t){switch(t.__typename){case"OrgPresenceSessionInitEvent":var n=!0,r=!1,i=void 0;try{for(var o,a=t.sessions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;x(e,l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}break;case"OrgPresenceSessionPingEvent":x(e,t.session);break;case"OrgPresenceSessionLeaveEvent":var c=e.findIndex(function(e){return e.id===t.sessionId});if(-1===c)return;e.splice(c,1)}}(e,n)})})}}),u.m(Z,t),s},k=function(e){var t=C({orgId:e});return(0,i.useMemo)(function(){return t.reduce(function(e,t){return t.project&&(e[t.project.id]||(e[t.project.id]={}),e[t.project.id][t.user.id]=t.user),e},{})},[t])},S=function(e){var t=C({orgId:e.orgId,projectId:e.projectId});return(0,i.useMemo)(function(){return t.reduce(function(e,t){return e[t.repl.id]||(e[t.repl.id]={}),e[t.repl.id][t.user.id]=t.user,e},{})},[t])}},52697:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(66626),i=n(92943),o=n(23882),a=n(75271),l=n(17437),c=n(41733),s=n(21262),u=n(71440),d=n(82303);function f(){var e=(0,s._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,u.Ps)(f());function m(){var e,t=(0,r._)((e=(0,c._)({},p,void 0),d.D(h,e)),1)[0],n=(0,o.Z)().fs,s=(0,i.Z)(),u=null==s?void 0:s.authorizations.editFileContents.isAuthorized,f=null==s?void 0:s.id;(0,a.useEffect)(function(){if(u&&f){var e=(0,l.Z)(function(){return t({variables:{replId:f}})},{wait:6e4,maxWait:6e5}),r=n.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),r()}}},[n,f,u,t])}},79685:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(50013),i=n(75271);function o(){var e=(0,i.useContext)(r.Z);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},76684:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66626),i=n(63257),o=n(46954),a=n(75271),l=n(41733),c=n(30509),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r._)((0,a.useState)(null),2),o=i[0],u=i[1],d=(0,a.useCallback)(u,[u]),f=(0,a.useRef)(t);(0,a.useEffect)(function(){f.current=t},[t]);var p=(0,r._)((0,a.useState)(null),2),h=p[0],m=p[1];return(0,a.useEffect)(function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(!t){m(null);return}var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m(function(i){if(i&&(t<i.index||0===t))return null;if(!r||!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c._)((0,l._)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i})},t=function(){m(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){m(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}},[o,m]),[h,d]}function d(e){var t=(0,a.useRef)(e);(0,a.useEffect)(function(){t.current=e},[e]);var n=(0,r._)((0,a.useState)(!1),2),l=n[0],c=n[1],s=(0,r._)((0,a.useState)(null),2),d=s[0],f=s[1],p=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),h=p[0],m=p[1],g=(0,a.useRef)(h);(0,a.useEffect)(function(){g.current=h},[h]);var v=(0,o.Z)(h,100);return(0,a.useEffect)(function(){if(!v){f(null);return}var e=v.match,n=v.text,r=t.current[e]?t.current[e]:null;if(!r){f(null);return}var i=!1;return c(!0),r(n).then(function(e){i||g.current!==v||(c(!1),f({textTrigger:v,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,v.index),i=n,o=t.slice(v.index+v.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[v,f]),[{isLoading:l,suggestions:d},m]}},97763:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(23882),i=n(54129);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},14274:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(42965),o=n(50938),a=n(75271);function l(){var e=(0,a.useRef)(0),t=(0,r._)((0,a.useState)(!1),2),n=t[0],l=t[1],c=(0,i.T3)(),s=(0,i.sG)(),u=(0,o.u)();return(0,a.useEffect)(function(){var t,n=window.visualViewport;if(n){if(s){l(null!==(t=null==u?void 0:u.isShown)&&void 0!==t&&t);return}if(c){var r=function(){l(n.height<.8*e.current)};return e.current=n.height,n.addEventListener("resize",r),function(){n.removeEventListener("resize",r)}}}},[c,s,null==u?void 0:u.isShown]),n}},16354:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(47),o=n(23882),a=n(75271),l=n(10777);function c(e,t){var n,c,s,u,d=(n=(0,o.Z)().container,s=(c=(0,r._)((0,a.useState)(null),2))[0],u=c[1],(0,a.useEffect)(function(){if(n)return n.onConnectionStateChanged(function(){u(n.getConnectionMetadata())})},[n]),(0,a.useMemo)(function(){return s?(0,i.he)(s.token):null},[s]));(0,a.useEffect)(function(){if(e&&t){var n,r,i,o=(null===(n=e.origin)||void 0===n?void 0:n.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:t.roles&&t.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==d?void 0:d.cluster};return(0,l.Fy)(a),function(){(0,l.dv)()}}},[e,t,d])}},2763:function(e,t,n){n.d(t,{Y:function(){return g},w:function(){return p}});var r=n(27387),i=n(96583),o=n(37475),a=n(23882),l=n(55992),c=n.n(l),s=n(75271),u=n(43257),d=n(73878),f=n(72106);function p(e,t,n,r){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,t,n,r){var a,l,s,u,d,f,p,h,g,v,y,b,w,Z,x,C;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return s="/home/runner/".concat(e.slug),u="/home/runner/bin/pid2",d="/home/runner/".concat(e.slug,"/.local/bin/pid2"),[4,(0,o.jy)()];case 1:if("dev"===(f=i.sent()))return r("dev is not a version we can upload to the container"),[2];return[4,function(e,t,n,r){return m.apply(this,arguments)}(f,t,n,r)];case 2:return i.sent(),p=c().join(s,".cache/replit/pid2/".concat(f)),h=c().join(p,"pid2"),[4,t.exec("stat","-c","%N",u)];case 3:return g=i.sent(),[4,t.exec("stat","-c","%N",d)];case 4:if(v=i.sent(),!g.error&&(null===(a=g.output)||void 0===a?void 0:a.includes(h))&&!v.error&&(null===(l=v.output)||void 0===l?void 0:l.includes(h)))return r("pid2  version ".concat(f," already exists in container")),[2];return y=c().dirname(u),[4,t.exec("mkdir","-p",y)];case 5:if((b=i.sent()).error)throw Error("pid2: mkdir ".concat(y,": ").concat(b.error));return[4,t.exec("ln","-sf",h,u)];case 6:if((w=i.sent()).error)throw Error("pid2: link ".concat(u,": ").concat(w.error));return Z=c().dirname(d),[4,t.exec("mkdir","-p",Z)];case 7:if(i.sent().error)throw Error("pid2: mkdir ".concat(Z,": ").concat(b.error));return[4,t.exec("ln","-sf",h,d)];case 8:if(x=i.sent(),w.error)throw Error("pid2: link ".concat(d,": ").concat(x.error));return r("pid2 version ".concat(f," installed, restarting pid2")),[4,t.exec("bash","-c","kill -9 $(pidof pid2)")];case 9:return(C=i.sent()).error&&r("pid2: couldn't kill ".concat(C.error)),r("pid2 version ".concat(f," installed")),[2]}})})).apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t,n,r){var o,a,l,s,p,h,m,g,v,y;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return o=c().join(f.Ql,".cache/replit/pid2/".concat(e)),a=c().join(o,"success"),[4,n.stat(a)];case 1:if((l=i.sent()).exists&&l.type===d.Tv.File)return[2];return r("pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(s=i.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(s.statusText));if(!s.body)throw Error("Error fetching PID2 bundle: ".concat(s));return[4,s.arrayBuffer()];case 3:return p=i.sent(),h=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,n.writeFile(h,u.Z.from(p))];case 4:if((m=i.sent()).error)throw Error("pid2: writing tarball: ".concat(m.error));return[4,t.exec("mkdir","-p",o)];case 5:if((g=i.sent()).error)throw Error("pid2: mkdir: ".concat(g.error));return[4,t.exec("tar","-C",o,"-xf",h)];case 6:if((v=i.sent()).error)throw Error("pid2: untar: ".concat(v.error));return[4,n.writeFile(c().join(o,"pid2.version"),e)];case 7:if((y=i.sent()).error)throw Error("pid2: writeVersion: ".concat(y.error));return[4,t.exec("touch",a)];case 8:return i.sent(),[4,t.exec("rm","-f",h)];case 9:return i.sent(),r("pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}n(49500);var g=function(){var e,t=(0,o.iM)(),n=((0,s.useRef)(!1),(0,a.Z)()),r=n.fs,i=n.container,l=null===(e=i.getContext())||void 0===e?void 0:e.repl;return(0,s.useEffect)(function(){},[r,t,i,l]),null}},1252:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27387),i=n(96583),o=n(35370),a=/\(copy\)( \d+)?$/,l=/\d+$/,c=n(72106);function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,t){var n,r,s,u,d,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?c.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return s=new Set(r.children.map(function(e){return e.filename})),u=function(e,t){var n=(0,o.r6)(e),r=(0,o.eb)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var c=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),s=1;s<=t.size&&t.has(c);s++){var u=(0,o.eb)(c),d=u.split(" ");l.test(u)&&d.pop(),c="".concat(d.join(" ")," ").concat(s),n.length>0&&(c+=".".concat(n))}return c}((0,o.UO)(e),s),d=n?"".concat(n,"/").concat(u):u,[4,t.copyFile(e,d)];case 2:if((f=i.sent()).error)throw f.error;return[2,d]}})})).apply(this,arguments)}},18757:function(e,t){t.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},36082:function(e,t,n){n.d(t,{Y:function(){return k},K:function(){return S}});var r,i=n(3796),o=n(63952),a=n(14118),l=n(27387),c=n(12285),s=n(96583),u=n(61374),d=n(10777),f=new(function(){"use strict";function e(){(0,c._)(this,e)}var t=e.prototype;return t.export=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=a.value,f=s.spanContext(),p={name:s.name,service:"repl.it-web",trace_id:f.traceId,span_id:f.spanId,start:s.startTime,end:s.endTime,parent_id:s.parentSpanId,attributes:s.attributes};n.has(f.traceId)||n.set(f.traceId,[]),null===(c=n.get(f.traceId))||void 0===c||c.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var h=Array.from(n.values());if(0===h.length){t({code:u.I.SUCCESS});return}var m=(0,d.Q0)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:h})}).then(function(){t({code:u.I.SUCCESS})}).catch(function(e){d.kg.error("Failed to send traces to Datadog: ".concat(e.message)),t({code:u.I.FAILED,error:e.message})})},t.shutdown=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},t.forceFlush=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},e}()),p=n(83176),h=n(25490),m=n(4955),g=n(9670),v=n(51305),y=n(2854),b=n(96125),w=function(e){"use strict";(0,m._)(n,e);var t=(0,g._)(n);function n(){var e;return(0,c._)(this,n),e=t.apply(this,arguments),e.spanSet=new Map,e}var r=n.prototype;return r.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.D.active(),i=(0,p._)((0,h._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},r.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(y.k),Z=function(e){"use strict";(0,m._)(n,e);var t=(0,g._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c._)(this,n),(e=t.call(this,r))._wsTracers=new Map,e._wsConfig=r,e}var r=n.prototype;return r.getTracer=function(e,t,n){var r="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new w({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},r.pruneSpansForTracer=function(e,t,n){var r,i="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(b.m),x=n(75271),C=n(18293);function k(){var e=(0,a.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0});return(0,x.useEffect)(function(){e&&((r=new Z).addSpanProcessor(new o.p(f)),r.register({propagator:new C.jf}))},[e]),(0,i.tZ)(i.HY,{})}function S(e){r.pruneSpansForTracer(e)}},42310:function(e,t,n){n.d(t,{Z:function(){return i},c:function(){return r}});var r="https://twitter.com/intent/tweet";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,i=e.hashtags,o=e.via,a=new URLSearchParams;t&&a.append("text",t),n&&a.append("url",n),i&&a.append("hashtags",i.join(",")),o&&a.append("via",o);var l=a.toString();return l.length>0?"".concat(r,"?").concat(l):r}},32663:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(66626),i=n(3796),o=n(99595),a=n(54505),l=n(96949),c=n(44935),s=n(24374),u=n(14548),d=n(49784),f=n(24766),p=n(93245),h=n(36809),m=n(34030),g=n(77402),v=n(10578),y=n(54300),b=n(63163),w=n(41733),Z=n(21262),x=n(71440),C=n(9122),k=n(82303);function S(){var e=(0,Z._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function _(){var e=(0,Z._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return _=function(){return e},e}function T(){var e=(0,Z._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return T=function(){return e},e}var E={},R=(0,x.Ps)(S()),D=(0,x.Ps)(_()),I=(0,x.Ps)(T()),B=n(23522),A=(0,h.X)({container:[b.l0.colWithGap(12),b.l0.px(12)],header:[b.l0.flex.row,b.l0.justify.spaceBetween],globeIconContainer:[b.l0.width(40),b.l0.height(40),b.l0.backgroundColor.accentPrimaryDimmer,b.l0.borderRadius("full"),b.l0.align.center,b.l0.justify.center],title:[b.l0.fontWeight.medium],loading:[b.l0.rowWithGap(4),b.l0.align.center],inviteUrlContainer:[b.l0.borderRadius(8),b.l0.flex.row],input:[b.l0.borderRadius(8,0,0,8),b.l0.color.foregroundDimmer],copyToClipboard:[b.l0.borderRadius(0,8,8,0)],titleGroup:[b.l0.rowWithGap(12)]}),P=function(){return(0,i.BX)(p.G,{css:A.titleGroup,children:[(0,i.tZ)(p.G,{css:A.globeIconContainer,children:(0,i.tZ)(m.Z,{color:b.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(p.G,{children:[(0,i.tZ)(f.xv,{css:A.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function G(e){var t,n,h,m,Z,x,S,_,T,G,L,N=e.replId,O=(0,o.Z)(),U=O.showConfirm,M=O.showError,X=(t=(0,w._)({},E,{variables:{replId:N}}),C.a(R,t)),F=X.data,W=X.loading,V=X.error,H=X.refetch,z=(0,r._)((n=(0,w._)({},E,{variables:{replId:N},onError:function(e){return M(e.message)},onCompleted:function(){return U("Join link created")}}),k.D(D,n)),2),j=z[0],q=z[1],J=(0,r._)((h=(0,w._)({},E,{variables:{replId:N},onError:function(e){return M(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){M(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted")}}),k.D(I,h)),2),Y=J[0],$=J[1],K=(null==F?void 0:null===(m=F.repl)||void 0===m?void 0:m.__typename)==="Repl"?F.repl:null,Q=q.loading||$.loading,ee=(null==F?void 0:null===(Z=F.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&(null==K?void 0:null===(x=K.owner)||void 0===x?void 0:x.__typename)==="Team",et=(null==F?void 0:null===(S=F.repl)||void 0===S?void 0:S.__typename)==="Repl"&&(null==K?void 0:null===(_=K.owner)||void 0===_?void 0:_.__typename)==="Team"&&(null==K?void 0:null===(T=K.owner.capabilities)||void 0===T?void 0:T.isBusinessPlan)&&(null==K?void 0:null===(G=K.owner.capabilities)||void 0===G?void 0:G.hasValidSubscription),en=(null==F?void 0:null===(L=F.repl)||void 0===L?void 0:L.__typename)==="Repl"&&(null==K?void 0:K.inviteUrl)?window.location.origin+(null==K?void 0:K.inviteUrl):null;return W||ee&&!et?null:V?(0,i.BX)(p.G,{css:A.container,children:[(0,i.BX)(p.G,{css:A.header,children:[(0,i.tZ)(P,{}),(0,i.tZ)(d.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(s.u,{css:[b.l0.textAlign.left],iconLeft:(0,i.tZ)(y.Z,{color:b.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return H({replId:N})}})]}):(0,i.BX)(p.G,{css:A.container,children:[(0,i.BX)(p.G,{css:A.header,children:[(0,i.tZ)(P,{}),W?(0,i.BX)(p.G,{css:A.loading,children:[(0,i.tZ)(v.Z,{color:b.TV.foregroundDimmer}),(0,i.tZ)(f.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(d.r,{isSelected:!!en,isDisabled:Q,onChange:function(e){Q||(e?j():Y())},"aria-labelledby":"link-switch-label"})]}),!W&&en?(0,i.BX)(i.HY,{children:[(0,i.BX)(u.Tg,{css:A.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Q?"Loading...":en,css:A.input}),(0,i.tZ)(B.q,{textToCopy:en,onClick:function(){en?((0,a.Z)(en),(0,l.j)(l.U3.JOIN_LINK_COPIED,{replId:null==K?void 0:K.id,isTeamRepl:ee,source:"replEnvironment"}),U("Link copied")):M("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(g.Z,{}),css:A.copyToClipboard,colorway:"primary",disabled:Q})]}),(0,i.tZ)(p.G,{children:(0,i.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:b.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),Q||j())},onClick:function(e){e.preventDefault(),Q||j()},children:"Generate a new link"})]})})]}):null]})}},55629:function(e,t,n){n.d(t,{_U:function(){return P},ln:function(){return G},ZP:function(){return L}});var r=n(63257),i=n(3796),o=n(7283),a=n(42965),l=n(46321),c=n(14548),s=n(24766),u=n(22419),d=n(93245),f=n(39819),p=n(39031),h=n(10578),m=n(63163),g=n(5297),v=n(24200),y=n(85983),b=n(7391),w=n(2553),Z=n(14709),x=n.n(Z),C=n(41733),k=n(21262),S=n(71440),_=n(77317),T=n(9122);function E(){var e=(0,k._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var R={},D=(0,S.Ps)(E(),_.U4),I=n(28109),B=n(26456);function A(e,t){return t.some(function(t){return t.id===e})}var P={root:[m.l0.color.foregroundDefault,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1),m.l0.px(12)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.colWithGap(16),m.l0.py(16),m.l0.justify.start,{maxHeight:220}]},G=function(e){var t=e.title,n=e.count,r=e.color,o=e.tooltip;return(0,i.BX)(d.G,{css:P.userGroup.titleContainer,children:[(0,i.tZ)(f.Z,{color:r,size:6}),(0,i.tZ)(s.xv,{variant:"small",css:P.userGroup.title,multiline:!1,children:t}),(0,i.tZ)(s.xv,{multiline:!1,variant:"small",color:"dimmest",css:P.userGroup.title,children:n}),o?(0,i.tZ)(u.u,{tooltip:o,children:(0,i.tZ)(p.Z,{})}):null]})},L=function(e){var t,n,u=e.replId,f=e.handleUpgradeTriggered,p=(0,b.useRouter)(),Z=(0,a.Gv)(p),k=(0,o.Z)({isMobileApp:Z,isTeam:!1,handleUpgradeTriggered:f,replId:u}),S=k.addOrInviteReplMultiplayer,_=k.loadingAddMutation,E=(0,v.aG)(),L=(t=(0,C._)({},R,{variables:{replId:u},pollInterval:8e3}),T.a(D,t)),N=L.data,O=L.loading,U=(null==N?void 0:N.repl.__typename)==="Repl"?N.repl:null,M=null==N?void 0:N.currentUser,X=(null!==(n=null==U?void 0:U.collaborators)&&void 0!==n?n:[]).reduce(function(e,t){var n=t.user;return(0,r._)(e).concat([n.username])},[]),F=(null==U?void 0:U.authorizations.editPermissions.isAuthorized)||!1,W=!!(U&&!X.length&&!U.multiplayerInvites.length),V=null==U?void 0:U.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==M?void 0:M.id)}),H=null==V?void 0:V.filter(function(e){return e&&A(e.id,E)}),z=null==V?void 0:V.filter(function(e){return e&&!A(e.id,E)}),j=V?V.length:null;return(0,i.BX)(c.Tg,{background:"default",css:P.root,children:[(0,i.BX)(d.G,{css:[P.header,Z&&P.header_mobile],children:[(0,i.tZ)(d.G,{css:P.titleContainer,children:(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,i.BX)(d.G,{css:P.limitsContainer,children:[O?(0,i.BX)(d.G,{css:P.loading,children:[(0,i.tZ)(h.Z,{color:m.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===j||(null==M?void 0:M.isSubscribed)?null:(0,i.BX)(i.HY,{children:[(0,i.BX)(s.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[j," / ",w.z]}),(0,i.tZ)(l.J,{css:P.measureBar,total:w.z,current:j,tooltip:"".concat(w.z-j," free editors remaining")})]}),O||(null==M?void 0:M.isSubscribed)||Z?null:(0,i.tZ)(g.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]})]}),F&&X&&U?(0,i.tZ)(d.G,{css:P.searchContainer,children:(0,i.tZ)(B.Z,{existingUsernames:X,onSubmit:function(e){(!O||(null==M?void 0:M.isSubscribed))&&(_||S({variables:{input:{replId:u,target:{method:x()(e)?y.ml.Email:y.ml.Username,value:e},level:y.gA.Rw}}}))}})}):null,W?(0,i.tZ)(d.G,{css:P.emptyContainer,children:(0,i.tZ)(d.G,{children:(0,i.tZ)(s.xv,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,i.BX)(c.Tg,{css:P.userList,children:[(null==H?void 0:H.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(G,{title:"Online",count:H.length||0,color:m.TV.greenStrongest}),H.map(function(e){return e?(0,i.tZ)(I.Z,{isPendingInvitation:!1,replId:u,canEditMultiplayers:F,user:e},e.id):null})]}):null,(null==z?void 0:z.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(G,{title:"Offline",count:z.length||0,color:m.TV.outlineStrongest}),null==z?void 0:z.map(function(e){return e?(0,i.tZ)(I.Z,{canEditMultiplayers:F,isPendingInvitation:!1,user:e,replId:u},e.id):null})]}):null,(null==U?void 0:U.multiplayerInvites.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(G,{title:"Pending Invitations",count:(null==U?void 0:U.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),U.multiplayerInvites.map(function(e){return(0,i.tZ)(I.Z,{canEditMultiplayers:F,replId:u,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},28109:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(3796),i=n(59325),o=n(66626),a=n(25722),l=n(99595),c=n(41733),s=n(21262),u=n(71440),d=n(77317),f=n(82303);function p(){var e=(0,s._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,s._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,u.Ps)(p(),d.U4),v=(0,u.Ps)(h(),d.U4),y=function(){var e,t,n=(0,l.Z)(),r=n.showConfirm,i=n.showError,s=function(e,t){a.n_({message:t}),a.Tb(Error(e.message)),i("Something unexpected happened, please try again.")},u=(0,o._)((e=(0,c._)({},m,{onError:function(e){return s(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n?r("@".concat(n," removed")):r("User removed")}}),f.D(g,e)),2),d=u[0],p=u[1].loading,h=(0,o._)((t=(0,c._)({},m,{onError:function(e){return s(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){i(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;r("Invite canceled for ".concat(t))}}}),f.D(v,t)),2);return{removeMultiplayerUser:d,loadingRemoveUser:p,deleteMultiplayerInvite:h[0],loadingDeleteInvite:h[1].loading}},b=n(9602),w=n(24766),Z=n(10539),x=n(93245),C=n(36809),k=n(56981),S=n(7935),_=n(63163),T=n(4204),E=n(9834),R=n.n(E),D=(0,C.X)({root:[_.l0.px(16),_.l0.py(4),_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,_.l0.cursor.default,_.l0.justify.spaceBetween],userContainer:_.l0.color.foregroundDefault,userContainer_pending:[_.l0.flex.grow(1),_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center]}),I=function(e){var t,n=e.isPendingInvitation,o=e.canEditMultiplayers,a=e.replId,l=y(),c=l.removeMultiplayerUser,s=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,f=!n,p=f?(0,r.tZ)(i.Z,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.tZ)(k.Z,{color:_.TV.outlineDefault,size:32}),h=f?e.user.username:e.email;return(0,r.BX)(x.G,{css:D.root,children:[f?(0,r.tZ)(T.Z,{username:e.user.username,children:(0,r.tZ)(R(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.tZ)(x.G,{tag:"a",css:D.userContainer,children:(0,r.tZ)(Z.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,r.BX)(x.G,{css:[D.userContainer_pending],children:[p,(0,r.tZ)(w.xv,{color:f?"default":"dimmest",multiline:!1,children:h})]}),(0,r.BX)(x.G,{css:D.permissionsContainer,children:[(0,r.tZ)(w.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),o?(0,r.tZ)(b.hU,{alt:f?"Remove member":"Cancel invitation",onClick:function(){!o||s||d||(f?c({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.tZ)(S.Z,{size:12})}):null]})]})}},26456:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(41733),i=n(30509),o=n(66626),a=n(3796),l=n(59325),c=n(46954),s=n(99595),u=n(79904),d=n(44935),f=n(14548),p=n(24766),h=n(93245),m=n(36809),g=n(27840),v=n(10578),y=n(63163),b=n(31089),w=n(43133),Z=n(75271),x=n(14709),C=n.n(x),k=n(73833),S=(0,m.X)({form:[y.l0.align.start,y.l0.display.flex,y.l0.rowWithGap(8),y.l0.width("100%")],searchContainer:[y.l0.position.relative,y.l0.flex.growAndShrink(1)],dropdownMenu:[y.l0.borderRadius(8),y.l0.overflow("hidden"),y.l0.mt(2),y.l0.zIndex(2),y.l0.border({color:y.TV.outlineDimmer,width:1,style:"solid"}),y.l0.maxHeight(280),y.l0.overflowY("auto"),y.l0.scrollbar.thin,{scrollbarColor:y.TV.backgroundHigher+" "+y.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:y.TV.backgroundHighest}}],result:[y.l0.p(8),y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.cursor.pointer],result_active:[y.l0.backgroundColor.accentPrimaryDimmer],userContainer:[y.l0.rowWithGap(8),y.l0.align.center],loadingContainer:[y.l0.align.center,y.l0.m(8),y.l0.rowWithGap(8),y.l0.align.center],emptyText:[y.l0.m(8)]});function _(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,_=e.placeholder,T=(0,o._)((0,Z.useState)(""),2),E=T[0],R=T[1],D=(0,b.U)(),I=(0,c.Z)(E.trim().replace(/^@/,""),250),B=(0,k.sk)({skip:!I||C()(E),variables:{query:I,limit:6}}),A=B.data,P=B.loading,G=B.error,L=(0,s.Z)().showError;(0,Z.useEffect)(function(){G&&L(G.message)},[G,L]);var N=null==A?void 0:A.usernameSearch,O=function(e){R(e.currentTarget.value),null==x||x(e.currentTarget.value)},U=function(e){"Enter"===e.key&&E.match(/.+@.+/)&&(t(E),R(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(E),R("")},css:S.form,children:[(0,a.tZ)(w.ZP,{onChange:function(e){e&&R(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(h.G,(0,i._)((0,r._)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r._)({id:D("username-search")},t({ref:null,value:E,onChange:O,placeholder:null!=_?_:"Add people by username or email",autoComplete:"off",onKeyDown:U}))),s?(0,a.BX)(h.G,{children:[N&&N.length?(0,a.tZ)(f.Tg,(0,i._)((0,r._)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:N.map(function(e,t){return(0,a.BX)(h.G,(0,i._)((0,r._)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(h.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.tZ)(p.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(h.G,{children:(0,a.tZ)(g.Z,{color:y.TV.accentPositiveStronger})}):null]}),t)})})):null,P?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.G,{css:S.loadingContainer,children:[(0,a.tZ)(v.Z,{}),(0,a.tZ)(p.xv,{color:"dimmer",multiline:!1,children:"Loading"})]})}):null,N&&0===N.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',E,'"']})}):null]}):null]}))}}),(0,a.tZ)(h.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!E,text:"Invite"})})]})}},33628:function(e,t,n){n.d(t,{m:function(){return Z}});var r=n(66626),i=n(16155),o=n(37782),a=n(65117),l=n(23882),c=n(41733),s=n(21262),u=n(71440),d=n(91476),f=n(82303);function p(){var e=(0,s._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,s._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return h=function(){return e},e}var m={},g=(0,u.Ps)(p()),v=(0,u.Ps)(h()),y=n(75271),b=n(85234),w=n.n(b);function Z(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=(0,i.Z)(),p=(0,y.useRef)(w()()),h=(0,l.Z)().container,b=(0,a.Z)(h),Z=(0,r._)((e=(0,c._)({},m,void 0),f.D(v,e)),1)[0],x=b!==o.em.CONNECTED||s;(0,y.useEffect)(function(){var e=!1;if(!x&&b===o.em.CONNECTED){var t=null;return function n(){Z({variables:{input:{sessionId:p.current}},onCompleted:function(){e||(t=setTimeout(n,1e4))}})}(),function(){e=!0,t&&clearTimeout(t)}}},[b,p,Z,x]),t={variables:{input:{replId:u,sessionId:p.current}},skip:x},n=(0,c._)({},m,t),d.m(g,n)}},34586:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(49500);function s(){var e;return(0,l.C)((e=(0,i._)(function(e,t){var n,i,l,s,u,d,f,p,h,m,g;return(0,a.Jh)(this,function(e){switch(e.label){case 0:return n=t.addCleanup,[3,13];case 1:l=(i=o._.apply(void 0,[e.sent(),2]))[0],s=i[1],n(s),u=!1,d=!1,e.label=2;case 2:e.trys.push([2,7,8,13]),p=(0,r._)(l),e.label=3;case 3:return[4,p.next()];case 4:if(!(u=!(h=e.sent()).done))return[3,6];(m=h.value).ok&&c.log("[pid2]: ".concat(m.payload.message)),e.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return g=e.sent(),d=!0,f=g,[3,13];case 8:if(e.trys.push([8,,11,12]),!(u&&null!=p.return))return[3,10];return[4,p.return()];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(t,n){return e.apply(this,arguments)}),[]),null}},1716:function(e,t,n){n.d(t,{D:function(){return i},u:function(){return o}});var r=n(96949);function i(){(0,r.j)(r.U3.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.j)(r.U3.GIT_PROJECT_FEATURE_USED,e)}},44236:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(21262);function i(){var e=(0,r._)(["\n  fragment CreateProjectForkRepl on Repl {\n    id\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},77876:function(e,t,n){n.d(t,{F:function(){return c}});var r=n(66626),i=n(80863),o=n(85983),a=n(75271),l=function(e){var t,n,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(r=null===(n=a.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.id)&&void 0!==r?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.O2.App,isTemplate:a.publishedAs===o.O2.Template}}};function c(e){var t=e.onFork,n=e.onError,o=(0,r._)((0,i.Z)({navigateAfterFork:!0,replLinkOptions:{projectPane:!0},onFork:function(){t()},onError:function(){n()}}),2),c=o[0],s=o[1].loading;return[(0,a.useCallback)(function(e){var t=e.repl;return c(l({orgId:e.orgId,repl:t,forkSource:e.forkSource}))},[c]),{loading:s}]}},89549:function(e,t,n){n.d(t,{e9:function(){return p},wd:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(48574),l=n(9122);function c(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function p(e){var t=(0,r._)({},u,e);return l.a(f,t)}},33470:function(e,t,n){n.d(t,{O:function(){return k},Z:function(){return x}});var r=n(41733),i=n(30509),o=n(63257),a=n(3796),l=n(62279),c=n(43769),s=n(48718),u=n(30851),d=n(15023),f=n(6065),p=n(14548),h=n(24766),m=n(93245),g=n(39290),v=n(63163),y=n(9834),b=n.n(y),w=m.K.a,Z=(0,l.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function x(e){var t=e.post,n=t.repl,o=t.user,l=n.isTemplate?"Template":"Repl";return(0,a.BX)(m.G,{css:v.l0.colWithGap(8),children:[(0,a.BX)(m.G,{css:[v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:[v.l0.flex.row,v.l0.align.center],children:(0,a.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,a.tZ)(f.q,{size:24,username:o.username,src:o.image}),(0,a.BX)(m.G,{css:v.l0.rowWithGap(4),children:[(0,a.tZ)(h.xv,{multiline:!1,children:o.username}),(0,a.BX)(h.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.tZ)(g.Z,{size:12})]}),(0,a.BX)(p.Tg,{css:[v.l0.borderRadius(8),v.l0.colWithGap(8),v.l0.p(8),v.l0.position.relative,{border:"1px solid "+v.TV.outlineDimmest}],children:[(0,a.tZ)(m.G,{css:[v.l0.colWithGap(16)],children:(0,a.tZ)(m.G,{css:[v.l0.rowWithGap(16),v.l0.justify.spaceBetween],children:(0,a.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.align.start,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(d.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[v.l0.backgroundColor.backgroundHigher]}),(0,a.BX)(m.G,{css:[v.l0.flex.growAndShrink(1),v.l0.colWithGap(4)],children:[(0,a.BX)(m.G,{css:[v.l0.flex.row],children:[(0,a.tZ)(b(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,c.j3)(n)),{children:(0,a.tZ)(w,{css:[{color:"inherit"},Z,v.l0.flex.growAndShrink(1),v.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.tZ)(h.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,a.tZ)(C,{}):null]}),n.description?(0,a.tZ)(h.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,a.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.minHeight(24)],children:[(0,a.tZ)(u.Z,{repl:{id:n.id,publicForkCount:0,likeCount:0}}),(0,a.tZ)(m.G,{css:[v.l0.position.relative,{zIndex:1},v.l0.flex.shrink(1)],children:(0,a.tZ)(s.fv,{tags:n.tags})})]})]})]})}var C=function(){return(0,a.tZ)("span",{css:[v.l0.display.inlineFlex,v.l0.align.center,v.l0.height(24),v.l0.px(8),v.l0.borderRadius(16),v.l0.backgroundColor.yellowDimmest,v.l0.color.yellowStrongest,v.l0.justify.center,v.l0.ml(8),{fontSize:v.TV.fontSizeSmall,lineHeight:v.TV.fontSizeSmall}],children:"Template"})},k=function(){return(0,a.BX)(m.G,{css:[v.l0.colWithGap(8),{opacity:.5}],children:[(0,a.BX)(m.G,{css:[v.l0.flex.row,v.l0.align.center,v.l0.flex.grow(1),v.l0.justify.spaceBetween],children:[(0,a.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(24),v.l0.height(24),v.l0.borderRadius(16)]}),(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(126),v.l0.height(12),v.l0.borderRadius(4)]})]}),(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(12),v.l0.height(12),v.l0.borderRadius(8)]})]}),(0,a.BX)(m.G,{css:[v.l0.backgroundColor.backgroundDefault,v.l0.width("100%"),v.l0.height(132),v.l0.borderRadius(8),v.l0.colWithGap(8),v.l0.p(8)],children:[(0,a.BX)(m.G,{css:v.l0.rowWithGap(8),children:[(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.height(84),v.l0.width(84),v.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:[v.l0.colWithGap(12),v.l0.pt(4),v.l0.flex.grow(1)],children:[(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(80),v.l0.height(16),v.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:v.l0.colWithGap(8),children:[(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width("100%"),v.l0.height(12),v.l0.borderRadius(4)]}),(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width("80%"),v.l0.height(12),v.l0.borderRadius(4)]})]})]})]}),(0,a.BX)(m.G,{css:[v.l0.flex.row,v.l0.flex.grow(1),v.l0.align.center,v.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:v.l0.rowWithGap(16),children:(0,o._)([,,,]).map(function(e,t){return(0,a.BX)(m.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(12),v.l0.height(12),v.l0.borderRadius(8)]}),(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(16),v.l0.height(8),v.l0.borderRadius(2)]})]},t)})}),(0,a.tZ)(m.G,{css:v.l0.rowWithGap(4),children:(0,o._)([,,]).map(function(e,t){return(0,a.tZ)("span",{css:[v.l0.backgroundColor.backgroundHigher,v.l0.width(48),v.l0.height(24),v.l0.borderRadius(16)]},t)})})]})]})]})}},92678:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return h}});var r=n(66626),i=n(3796),o=n(82549),a=n(63163),l=n(7420),c=n(55621),s=n(42704),u=n(75271);function d(e){var t=(0,r._)((0,u.useState)(!1),2),n=t[0],o=t[1],a=[],d=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,m=!1,g=void 0;try{for(var v,y=e.variables[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var b=v.value;b.parentVariableReference===f?a.push(b):d.push(b)}}catch(e){m=!0,g=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw g}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map(function(t){return(0,i.tZ)(h,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}),d.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Z,{filled:!1,border:!1,onClick:function(){return o(function(e){return!e})},children:["See ",n?"Less":"More"]}),n&&d.map(function(t){return(0,i.tZ)(h,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})]})]})]})}function f(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[a.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(o.Z,{})}):null}function p(e){var t=e.expanded,n=e.depth,r=e.variable;return 0!==n||"parentVariableReference"in r?(0,i.tZ)("div",{css:[a.l0.flex.grow(0),a.l0.flex.shrink(0),a.l0.width(a.TV.space16),a.l0.display.flex,a.l0.align.center,a.l0.justify.end],children:(0,i.tZ)(f,{expanded:t,variable:r})}):(0,i.tZ)(f,{expanded:t,variable:r})}function h(e){var t=e.depth,n=e.variable,o=e.client,a=(0,r._)((0,u.useState)(!1),2),l=a[0],c=a[1],d=(0,r._)((0,u.useState)([]),2),f=d[0],m=d[1];return(0,u.useEffect)(function(){l&&o.fetchVariables(n.variablesReference).then(function(e){return m(e)},function(){return c(!1)})},[l,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:"variable",onClick:function(){n.variablesReference>0&&c(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:"var(--space-32)",minHeight:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-default)",paddingLeft:"calc(".concat(t," * var(--space-16))"),fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.tZ)(p,{expanded:l,variable:n,depth:t}),(0,i.BX)("div",{className:"label",children:[n.name,n.type?(0,i.BX)("span",{className:"type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:"label value",children:(0,i.tZ)("pre",{children:n.value})})]}),l?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.tZ)(h,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},46849:function(e,t,n){n.d(t,{cp:function(){return k},UQ:function(){return C},od:function(){return S}});var r=n(21262),i=n(71440),o=n(71793);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a()),s=(0,i.Ps)(l()),u=n(56250);function d(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var p=(0,i.Ps)(d(),c),h=(0,i.Ps)(f(),u.s,s),m=n(17878),g=n(63769);function v(){var e=(0,r._)(["\n  fragment PageTitleRepl on Repl {\n    id\n    title\n    project {\n      id\n      title\n    }\n  }\n"]);return v=function(){return e},e}var y=(0,i.Ps)(v()),b=n(18282);function w(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}function Z(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return Z=function(){return e},e}function x(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    hostedUrl: hostedUrl(dotty: true)\n    isAlwaysOn\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n    ...ConvertedToProjectModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return x=function(){return e},e}var C=(0,i.Ps)(w(),o.D,p,m.f,g.z),k=(0,i.Ps)(Z()),S=(0,i.Ps)(x(),o.C,h,y,k,b.hQ)},64993:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(18557),i={overlay:r.Is+20,gutterActive:r.Is+19,maximizedTooltip:r.Is+18,maximizedPane:r.Is+17,maximizedHeader:r.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1}},17878:function(e,t,n){n.d(t,{f:function(){return l},z:function(){return c}});var r=n(21262),i=n(71440);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n    hasSeenOldSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n    hasSeenProjectsTour: tourSeen(name: "workspace-repo-projects-tour")\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(o()),c=(0,i.Ps)(a())},73581:function(e,t,n){n.d(t,{y:function(){return i},Q:function(){return d}});var r,i,o=n(3796),a=n(24766),l=n(93245),c=n(63163);function s(e){var t=e.src,n=e.autoPlay,r=e.loop,i=e.width;return(0,o.tZ)(l.G,{css:[c.l0.p(4),c.l0.borderRadius(8),c.l0.width(void 0===i?280:i),c.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(c.TV.outlineDimmest)}],children:(0,o.tZ)("video",{style:{width:"100%"},css:c.l0.borderRadius(8),src:t,autoPlay:void 0===n||n,loop:void 0===r||r,playsInline:!0,muted:!0})})}(r=i||(i={})).Welcome="Welcome",r.Editor="Editor",r.Examples="Examples",r.Run="Run",r.Output="Output",r.Sidepane="Sidepane",r.Share="Share";var u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,o.tZ)(l.G,{"data-cy":"workspace-tour-welcome",css:[c.l0.maxWidth(400)],children:(0,o.BX)(a.xv,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,o.tZ)("strong",{children:"Repls."}),(0,o.tZ)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("editor"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"Tap the Run button to run your code and see its output."})})]})}},{id:"Output",title:"Output",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("output"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youre using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,o.BX)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.p(8)],children:[(0,o.BX)(a.xv,{children:[(0,o.tZ)("strong",{children:"Files"})," is where all of your Repls code is."]}),(0,o.BX)(a.xv,{children:[(0,o.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,o.tZ)(a.xv,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]}},73781:function(e,t,n){n.d(t,{V:function(){return o},o:function(){return i}}),(r=i||(i={})).Welcome="Welcome",r.Forks="Forks",r.ProjectPane="ProjectPane";var r,i,o={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]}},89885:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(21262),i=n(71440),o=n(80983);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},24562:function(e,t,n){var r=n(66626),i=n(3796),o=n(7830),a=n(71051),l=n(15023),c=n(79904),s=n(44935),u=n(58532),d=n(22893),f=n(24766),p=n(93245),h=n(36809),m=n(19602),g=n(54300),v=n(63163),y=n(75271),b=(0,h.X)({wrapper:[v.l0.colWithGap(16)],repls:[v.l0.maxHeight("60vh"),v.l0.overflow("auto"),{"& > div":[v.l0.py(8),{borderTop:"1px solid "+v.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+v.TV.outlineDimmest}}],row:[v.l0.colWithGap(8)],replRow:[v.l0.rowWithGap(8),v.l0.align.center],additionalReplsCount:[v.l0.pl(12),v.l0.pt(8)],buttons:[v.l0.rowWithGap(12),v.l0.justify.end]}),w=function(e){var t,n=e.repl,a=e.onConfirmedChange,c=(0,r._)((0,y.useState)(""),2),u=c[0],h=c[1],m=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?n.hostingDeployment:null,v=(0,y.useRef)(!1),w=(null==m?void 0:m.replitAppSubdomain)?m.replitAppSubdomain:n.title;return(0,i.BX)(p.G,{css:b.row,children:[(0,i.BX)(p.G,{css:b.replRow,children:[(0,i.tZ)(l.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,i.tZ)(f.xv,{height:"singleLine",multiline:!1,children:n.title}),m?(0,i.tZ)(o.e,{deployment:m}):null]},n.id),m?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.E,{icon:(0,i.tZ)(g.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.tZ)(s.II,{placeholder:"Type here",value:u,onChange:function(e){var t=e.currentTarget.value;h(t);var n=t.trim()===w;n!==v.current&&a(n),v.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,o=e.onClose,l=e.onDelete,s=e.deleting,d=t.length,h=(0,a.Z)("Repl",d),g=t.filter(function(e){var t;return(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"}).length,v=(0,a.Z)("Deployment",g),Z=g>0?" & ".concat(g>1?g+" ":""," ").concat(v):"",x=(0,r._)((0,y.useState)(0),2),C=x[0],k=x[1];return(0,y.useEffect)(function(){n||k(0)},[n]),(0,i.tZ)(u.u,{isOpen:n,onRequestClose:o,children:(0,i.BX)(p.G,{css:b.wrapper,children:[(0,i.BX)(f.h4,{variant:"subheadBig",level:2,children:["Delete ",h,g>0?" & ".concat(v):"","?"]}),(0,i.tZ)(f.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,i.tZ)(p.G,{css:b.repls,children:t.map(function(e){return(0,i.tZ)(w,{css:b.row,repl:e,onConfirmedChange:function(e){return k(function(t){return t+(e?1:-1)})}},e.id)})}),(0,i.BX)(p.G,{css:b.buttons,children:[(0,i.tZ)(c.zx,{text:"Cancel",onClick:o,disabled:s}),(0,i.tZ)(c.zx,{iconLeft:(0,i.tZ)(m.Z,{}),onClick:l,disabled:s||C<g,text:"Yes, delete ".concat(d>1?d+" ":""," ").concat(h).concat(Z),colorway:"negative"})]})]})})}},56632:function(e,t,n){n.d(t,{I:function(){return b}});var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(3796),c=n(99399),s=n(14074),u=n(9602),d=n(22419),f=n(93245),p=n(9834),h=n.n(p),m=n(75271),g=n(28065),v=f.K.a,y=m.forwardRef(function(e,t){var n,s=e.alt,d=e.children,f=e.colorway,p=e.disabled,m=e.size,y=void 0===m?u.Pl:m,b=e.triggerProps,w=e.as,Z=e.href,x=e.prefetch,C=e.replace,k=e.scroll,S=e.shallow,_=e.className,T=(0,a._)(e,["alt","children","colorway","disabled","size","triggerProps","as","href","prefetch","replace","scroll","shallow","className"]),E=(0,i._)({disabled:p,style:(n={},(0,r._)(n,u.Xm.height,y+"px"),(0,r._)(n,u.Xm.width,y+"px"),n),css:f?u.t1.get(f):u.uW,ref:t},(0,c.d)(T,b)),R=(0,l.tZ)(g.jS,{alt:s,size:u.cy[y],children:d});return p?(0,l.tZ)(v,(0,o._)((0,i._)({"aria-disabled":p,className:_,role:"link"},E),{children:R})):(0,l.tZ)(h(),(0,o._)((0,i._)({legacyBehavior:!0,passHref:!0},{as:w,href:Z,prefetch:x,replace:C,scroll:k,shallow:S}),{children:(0,l.tZ)(v,(0,o._)((0,i._)({className:_,role:"link"},E),{children:R}))}))}),b=m.forwardRef(function(e,t){var n=e.alt,r=e.tooltipDelay,o=e.tooltipBehavior,c=e.tooltipPlacement,u=e.tooltipContents,f=(0,a._)(e,["alt","tooltipDelay","tooltipBehavior","tooltipPlacement","tooltipContents"]);return(0,l.tZ)(d.u,{delay:r,isDisabled:"hidden"===o,tooltip:null!=u?u:n,placement:c,children:function(e,r){return(0,l.tZ)(y,(0,i._)({alt:n,ref:(0,s.l)(t,r),triggerProps:e},f))}})});b.displayName="IconButtonLink"},48088:function(e,t,n){var r=n(41733),i=n(30509),o=n(3796),a=n(62279),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=e.slow,f=void 0!==d&&d,p={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.tZ)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:c}]},p),{x:8,y:8})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:s}]},p),{x:108,y:88})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:u}]},p),{x:8,y:168}))]})}},9164:function(e,t,n){n.d(t,{Z0:function(){return D},ZE:function(){return G},sN:function(){return P}});var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(3796),c=n(99399),s=n(79904),u=n(86466),d=n(53286),f=n(41960),p=n(24766),h=n(93245),m=n(36809),g=n(29737),v=n(28065),y=n(22192),b=n(63163),w=n(75271),Z=n(48536),x=n(64888),C=n(9305),k=n(29250),S=n(44794),_=(0,y.$)(["menuItemColor"]),T=_.cssVars,E=_.styleTokens,R=(0,m.X)({menu:[b.l0.viewStyle,b.l0.maxHeight("inherit"),b.l0.overflowY("auto")],item:[b.l0.display.flex,b.l0.borderRadius(),b.l0.px(8),b.l0.py(6),b.l0.align.center,b.l0.rowWithGap(8),b.l0.cursor.pointer,{color:E.menuItemColor},{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(b.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:u.vb.interactiveBackground},"&[data-selected]":{backgroundColor:u.vb.interactiveBackgroundActive},"&[aria-disabled]":{cursor:"not-allowed"}}],itemInner:[b.l0.colWithGap(4)],popover:[b.l0.p(4),{minWidth:"var(--trigger-width)"}],separator:[b.l0.mx(4),b.l0.my(2),b.l0.height(1),b.l0.backgroundColor.backgroundHighest]}),D=w.forwardRef(function(e,t){return(0,l.tZ)(Z.Z,(0,o._)((0,i._)({},e),{css:R.separator,ref:t}))}),I=w.forwardRef(function(e,t){var n=e.dataCy,r=(0,a._)(e,["dataCy"]);return(0,l.tZ)(x.v2,(0,i._)({ref:t,css:R.menu,"data-cy":n},r))}),B=w.forwardRef(function(e,t){var n=e.multiline,r=e.height,s=(0,a._)(e,["multiline","height"]),u=(0,C.jn)(k.j,"label");return(0,l.tZ)(p.xv,(0,o._)((0,i._)({},(0,c.d)(u,{multiline:void 0!==n&&n,height:void 0===r?"singleLine":r},s)),{ref:t}))}),A=w.forwardRef(function(e,t){var n=e.multiline,r=e.height,s=e.variant,u=(0,a._)(e,["multiline","height","variant"]),d=(0,C.jn)(k.j,"description");return(0,l.tZ)(p.xv,(0,o._)((0,i._)({},(0,c.d)(d,{multiline:void 0!==n&&n,height:void 0===r?"singleLine":r,variant:void 0===s?"small":s},u)),{ref:t}))}),P=w.forwardRef(function(e,t){var n=e.dataCy,c=e.label,s=e.description,u=e.icon,f=e.href,p=e.as,m=e.shallow,g=e.scroll,y=e.isDestructive,w=e.isDisabled,Z=(0,a._)(e,["dataCy","label","description","icon","href","as","shallow","scroll","isDestructive","isDisabled"]),C=b.TV.foregroundDefault;return C=y?w?b.TV.accentNegativeDimmer:b.TV.accentNegativeStronger:w?b.TV.foregroundDimmest:b.TV.foregroundDefault,(0,l.tZ)(x.sN,(0,o._)((0,i._)((0,o._)((0,i._)({},Z),{css:R.item,ref:t,isDisabled:w,style:(0,r._)({},T.menuItemColor,C),"data-cy":n,textValue:c}),(0,d.N)({href:f,as:p,shallow:m,scroll:g})),{children:(0,l.BX)(l.HY,{children:[(0,l.tZ)(v.jS,{size:16,children:u}),(0,l.BX)(h.G,{css:R.itemInner,children:[(0,l.tZ)(B,{children:c}),s?(0,l.tZ)(A,{children:s}):null]})]})}))}),G=w.forwardRef(function(e,t){var n=e.children,r=e.label,c=e.trigger,u=e.defaultOpen,d=e.isOpen,p=e.onOpenChange,h=e.dataCy,m=e.elevated,v=e.background,y=e.placement,b=(0,a._)(e,["children","label","trigger","defaultOpen","isOpen","onOpenChange","dataCy","elevated","background","placement"]),w=c||(0,l.tZ)(s.zx,{iconRight:(0,l.tZ)(g.Z,{}),text:null!=r?r:"",disabled:b.isDisabled});return(0,l.BX)(x.bF,(0,o._)((0,i._)({},{defaultOpen:u,isOpen:d,onOpenChange:p}),{children:[(0,l.tZ)(S.b.Provider,{value:{"data-cy":h},children:w}),(0,l.tZ)(f.Bf,(0,o._)((0,i._)({},{elevated:void 0===m||m,background:v,placement:y}),{css:R.popover,noArrow:!0,children:(0,l.tZ)(I,(0,o._)((0,i._)({ref:t},b),{children:n}))}))]}))})},23271:function(e,t,n){n.d(t,{T:function(){return u}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796);n(75271);var l=n(93245),c=n(379),s=l.K.button;function u(e){var t=e.iconLeft,n=e.iconRight,l=e.text,u=e.innerRef,d=e.colorway,f=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(s,(0,i._)((0,r._)({ref:u},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!t,iconRight:!!n}),{color:"inherit"}],children:[t,(0,a.tZ)("span",{children:l}),n]}))}},38799:function(e,t,n){n.d(t,{M:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(75271),c=n(24766),s=n(36809),u=n(63163),d=(0,s.X)({prose:[{"& ul, & ol":{marginLeft:16,paddingBlock:4},"& ul":{listStyle:"initial"},"& a":u.l0.linkStyle,"& h1, & h2, & h3":{display:"block",marginBottom:8},"& * + h1, & * + h2, & * + h3":{marginTop:8}}]}),f=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(c.xv,(0,i._)((0,r._)({multiline:!0,css:d.prose},n),{children:l.Children.map(t,function(e){return"string"==typeof e?(0,a.tZ)("span",{children:e}):e})}))}},76733:function(e,t,n){n.d(t,{O:function(){return h}});var r=n(3796),i=n(3488),o=n(33323),a=n(7935),l=n(44629),c=n(79904),s=n(68220),u=n(9602),d=n(24766),f=n(93245),p=n(63163);function h(e){var t=e.title,n=e.content,l=e.colorway,h=void 0===l?"primary":l,g=e.totalSteps,v=void 0===g?1:g,y=e.currentStepIndex,b=void 0===y?0:y,w=e.onDismiss,Z=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(f.G,{css:[p.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:s.Br[h].dimmest,border:"1px solid "+s.Br[h].dimmer,position:"relative"},p.l0.borderRadius(),p.l0.shadow(2),p.l0.colWithGap(8)],children:[(0,r.tZ)(u.hU,{alt:"Close",colorway:h,css:{position:"absolute",top:p.TV.space8,right:p.TV.space8},onClick:w,dataCy:x,children:(0,r.tZ)(a.Z,{})}),t?(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:t}):null,"function"==typeof n?(0,r.tZ)(n,{}):(0,r.tZ)(d.xv,{children:n}),v>1&&Z?(0,r.BX)(f.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(c.zx,{css:{visibility:b<=0?"hidden":void 0},colorway:h,text:"Back",iconLeft:(0,r.tZ)(i.Z,{}),onClick:function(){return Z(b-1)}}),(0,r.tZ)(m,{colorway:h,total:v,current:b}),(0,r.tZ)(c.zx,{"data-autofocus":!0,colorway:h,text:b>=v-1?"Done":"Next",iconLeft:(0,r.tZ)(o.Z,{}),onClick:function(){return b>=v-1?w():Z(b+1)}})]}):null]})}function m(e){var t=e.total,n=e.current,i=e.colorway;return(0,r.BX)(f.G,{children:[(0,r.tZ)(l.T,{children:(0,r.tZ)("progress",{value:n+1,max:t,"aria-label":"Step"})}),(0,r.tZ)(f.G,{"aria-hidden":!0,css:p.l0.rowWithGap(8),children:Array(t).fill(0).map(function(e,t){return(0,r.tZ)(f.G,{css:[p.l0.borderRadius("full"),{width:p.TV.space8,height:p.TV.space8,backgroundColor:t===n?s.Br[i].stronger:s.Br[i].dimmer}]},t)})})]})}},15179:function(e,t,n){n.d(t,{RY:function(){return m},dW:function(){return g},iz:function(){return v},lq:function(){return h}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796);n(75271);var l=n(63163),c=n(93245),s=n(14548),u=n(31718),d=n(96214);n(82922);var f=c.K.label,p=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(f,(0,i._)((0,r._)({css:[l.l0.justify.spaceBetween,l.l0.align.center,l.l0.flex.row,{fontSize:l.TV.fontSizeDefault,lineHeight:l.TV.lineHeightDefault}]},n),{children:t}))},h=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(y,(0,i._)((0,r._)({label:"Date created"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},m=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(y,(0,i._)((0,r._)({label:"Sort"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},g=function(e){return(0,a.tZ)(s.Tg,{css:[l.l0.p(8)],children:(0,a.BX)(p,{htmlFor:e.id,children:["Exact match ",(0,a.tZ)(u.X,(0,r._)({},e))]})})},v=function(){return(0,a.tZ)("div",{css:[l.l0.p(0),l.l0.m(0),{borderBottom:"1px solid",borderBottomColor:l.TV.backgroundHighest}]})},y=function(e){var t=e.children,n=e.label,r=e.className,i=(0,o._)(e,["children","label","className"]);return(0,a.BX)(c.G,{className:r,css:[l.l0.colWithGap(8),l.l0.pb(8)],children:[(0,a.tZ)(s.Tg,{css:[l.l0.p(8),l.l0.mb(0),l.l0.position.relative],children:(0,a.tZ)(p,{htmlFor:i.id,children:n})}),(0,a.tZ)(c.G,{css:[l.l0.px(8)],children:t})]},n)}},4041:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(75271),o={isConnecting:!0,channel:null,context:null};function a(e){var t=e.container,n=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,s=(0,r._)((0,i.useState)(o),2),u=s[0],d=s[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=t.openChannel({service:n,name:a,skip:function(){return c}},function(t){if(!e)return d({context:t.context,channel:t.channel,isConnecting:!1}),function(t){e||d({isConnecting:t.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[t,n,a,c]),u}},77391:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(62699),i=n(8445),o=n(75271);function a(e){var t=e.repl,n=e.currentUser,a=e.container,l=(0,i.S)(),c=(0,r.b)(t&&n?{repl:t,currentUser:n}:null);(0,o.useEffect)(function(){if(a&&c)return a.connect({context:c,getMinimumRetryDelayMs:l}),function(){a.close()}},[c,a,l])}},92943:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(37782),o=n(23882),a=n(75271);function l(){var e,t,n=(0,o.Z)().container,l=(0,r._)((0,a.useState)(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return(0,a.useEffect)(function(){return n.onConnectionStateChanged(function(e){var t,r;e===i.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)})},[s,n]),c}},22630:function(e,t,n){n.d(t,{J_:function(){return u},O2:function(){return c},hw:function(){return s}});var r=n(23666),i=n(79685),o=n(77537),a=n(12666),l=n(60357);function c(e){return 80===e||443===e}function s(e,t){var n=new URL(e);return!t||c(t)?n.hostname.endsWith(".localhost")?n.port="8081":n.port&&(n.port=""):n.port=t.toString(),n}function u(e){var t,n,c,u=e.replId,d=e.container,f=e.ports,p=(0,r.Z)(),h=!(n=(0,a.bg)(f)).length||n.some(function(e){return 80===e.configuration.externalPort})?80:null!==(t=n[0].configuration.externalPort)&&void 0!==t?t:80,m=(0,o.Z)(d),g=(0,l.I5)({variables:{id:u}}).data,v=(0,i.T)();if(!h&&!v||!((null==g?void 0:g.repl.__typename)==="Repl"?g.repl:null)||!m)return null;var y=s(m,h).toString(),b=s(m+"/__replco/devtools_wrapper.html",h).toString();return{iframeSrc:p?(c=new URL(y)).hostname.endsWith(".localhost")?y:(c.protocol="https:",c.toString()):b,presentationUrl:y}}},49160:function(e,t,n){n.d(t,{H:function(){return eq}});var r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k=n(27387),S=n(41733),_=n(30509),T=n(66626),E=n(96583),R=n(51305),D=n(96949),I=n(70145),B=n(75271),A=n(52589),P=n(95636),G=n(45250),L=n(69829),N=n(25722),O=n(96082),U=n(29043);function M(e){return X.apply(this,arguments)}function X(){return(X=(0,k._)(function(e){var t,n;return(0,E.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}(r=p||(p={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var F=n(55905);(h||(h={})).MESSAGE_RECEIVED="MESSAGE_RECEIVED";var W=n(37782),V=n(25731),H=n(63257),z=n(25357),j=n(12285),q=n(10777),J=n(91620).lW,Y=new TextEncoder,$=new TextDecoder,K=(i=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(i,"\\r\\n)*(").concat(i,")$"),"i")),Q=function(){"use strict";function e(t){(0,j._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=$.decode(e.slice(0,t)),r=n.match(K);if(!r)throw q.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.indexOf(":");if(-1===f)throw q.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var p=d.substr(0,f),h=d.substr(f+1).trim();if("Content-Length"===p){var m=parseInt(h,10);if(isNaN(m))throw q.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[p]=parseInt(h,10)}else i[p]=h}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(null==i["Content-Length"])throw q.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=Y.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,t,n){var r=$.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(c){var i=J.from(e).toString();if(c instanceof SyntaxError&&"Unexpected end of JSON input"===c.message){q.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=$.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){q.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else q.kg.error("Failed to parse LSP message",{givenError:c,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,o,this.headers),l=a.json,c=a.buffer;if(this.headers=void 0,this.buffer=c,void 0!==l)try{this.onMessage(l)}catch(e){N.Tb(e)}}},e}(),ee=n(91620).lW,et=n(38163),en=n(26151),er=n(4909);(o=m||(m={})).INSTRUCTION_RESULT="INSTRUCTION_RESULT",o.TEST_RESULT="TEST_RESULT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",(a=g||(g={}))[a.Idle=0]="Idle",a[a.Starting=1]="Starting",a[a.Ready=2]="Ready",a[a.Building=3]="Building",a[a.Running=4]="Running";var ei=n(29339),eo=n.n(ei),ea=n(13387),el=n(81202),ec=n.n(el),es=n(21480),eu=n(98924),ed=n(35554),ef=n.n(ed),ep=n(66591),eh=n(89441),em=n(80273),eg=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:eh.Z}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:em.rN,tokenModifiers:em.ho,formats:[ep.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(ep.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[ep.ResourceOperationKind.Create,ep.ResourceOperationKind.Delete,ep.ResourceOperationKind.Rename]}}}},ev=n(51638),ey=function(){"use strict";function e(){(0,j._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,_._)((0,S._)({},e),{result:t}))},e}(),eb=[new(function(){"use strict";function e(){(0,j._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("")&&(r.sortText=r.sortText.replace("",""))}return(0,_._)((0,S._)({},e),{result:t})},e}()),new ey],ew=function(){"use strict";function e(){(0,j._)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),eZ=n(19607),ex=n(23572),eC=n(91620).lW;function ek(e,t){var n,r;return null!==(r=null===(n=ea.$R.from(e))||void 0===n?void 0:n.id)&&void 0!==r?r:t}function eS(){return Math.floor(2147483647*Math.random())}function e_(e){var t=JSON.stringify((0,_._)((0,S._)({},e),{jsonrpc:"2.0"})),n=eC.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function eT(e,t){var n,r,i,o,a,l;return t&&t?!!(ec()(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&ec()(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&ec()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&ec()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson)):!!t==!!t}function eE(e,t){return eR.apply(this,arguments)}function eR(){return(eR=(0,k._)(function(e,t){var n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(n=r.sent()).error){if(!t())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,eE(e,t)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})).apply(this,arguments)}(l=v||(v={})).INITIALIZED="INITIALIZED",l.READY="READY",l.DIAGNOSTICS="DIAGNOSTICS",l.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",l.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",l.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",l.REQUEST="REQUEST",l.RESPONSE="RESPONSE",l.CANCEL_REQUEST="CANCEL_REQUEST",l.SEND_NOTIFICATION="SEND_NOTIFICATION",l.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",l.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",(c=y||(y={})).OUTPUT="OUTPUT",c.ERROR="ERROR",c.STATE_CHANGED="STATE_CHANGED",c.CHANNEL_OPENED="CHANNEL_OPENED";var eD=n(35370),eI=n(32992);(s=b||(b={})).USER_JOIN="USER_JOIN",s.USER_LEAVE="USER_LEAVE",s.USERS_UPDATE="USERS_UPDATE",s.USER_OPENED_FILE="USER_OPENED_FILE",s.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",s.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED";var eB=n(32902),eA=n(70593),eP=n(88397),eG=n(1053);function eL(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}var eN=n(41974),eO=n(92674),eU=n.n(eO);(w||(w={})).MESSAGE="MESSAGE";var eM=function(){"use strict";function e(t){(0,j._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eX(e){var t=new eM(e.maxHistorySize),n=(0,O.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}function eF(e){return 1e3*e.seconds+e.nanos/1e6}var eW=n(56738).F,eV=" \x1b[?25l";(u=Z||(Z={})).BEFORE_RUN="BEFORE_RUN",u.SERVER="SERVER",u.NONE="NONE",u.STOPPING="STOPPING";var eH=n(53995);(d=x||(x={})).DEEPLINK_CHANGED="DEEPLINK_CHANGED",d.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED";var ez=n(42516),ej=n(45077);function eq(e){var t=(0,T._)((0,B.useState)(null),2),n=t[0],r=t[1];return(0,B.useEffect)(function(){var t,n,i,o,a,l,c,s,u,d,f,v,w,Z,B,X,j,J,Y,$,K,ei,el,ed,ep,eh,em,ey,eC,eR,eO,eM,eq,eJ,eY,e$,eK,eQ,e0,e1,e2,e3,e4,e8,e6,e5,e7,e9,te,tt,tn,tr,ti,to,ta,tl=function(e){var t=R.D.active();if(e.openTelemetryTracing)return(0,P.eh)(t,"workspace.useCreateServices")}(e),tc=(ei=void 0===(K=(t=(0,_._)((0,S._)({},e),{ctx:null==tl?void 0:tl.childCtx})).runnerMode)?"outputs":K,el=t.onUnrecoverableError,ed=t.openFile,ep=t.openMultipleFiles,eh=t.openMultipleURLs,em=t.onFirewallDenied,ey=t.enableUserEvents,eC=t.enableMultipleLSPClientsPerFile,eR=t.enableReplspaceSshTokenPassthrough,eO=t.onPresenceCommand,eM=t.getColorForUser,eq=t.openTelemetryTracing,eJ=t.ctx,eY=t.shouldAutoFlushRef,eK=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,i=(0,O.ZP)();r&&i.on(C.EVENT_SENT,r);var o=null;function a(e,t){return l.apply(this,arguments)}function l(){return(l=(0,k._)(function(e,r){var o,a,l,s,u,d,f,p;return(0,E.Jh)(this,function(h){switch(h.label){case 0:if(!n)return[2];return[4,function(){return c.apply(this,arguments)}()];case 1:if(l=h.sent(),u=null==(s=t.getContext())?void 0:null===(o=s.currentUser)||void 0===o?void 0:o.id,d=null==s?void 0:null===(a=s.repl)||void 0===a?void 0:a.id,f=window.location.href,p={userEvent:{eventName:e,eventData:function e(t){if(!("object"==typeof t&&null!==t&&null!==Object.getPrototypeOf(t)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(t).reduce(function(t,n){var r=(0,T._)(n,2),i=r[0],o=r[1];return void 0===o||"object"==typeof o&&o&&0===Object.keys(o).length?t:(0,_._)((0,S._)({},t),(0,ez._)({},i,function t(n){switch(void 0===n?"undefined":(0,ej._)(n)){case"string":return{kind:"stringValue",stringValue:n};case"number":return{kind:"numberValue",numberValue:n};case"boolean":return{kind:"boolValue",boolValue:n};case"object":if(null===n)return{kind:"nullValue",nullValue:null};if(Array.isArray(n))return{kind:"listValue",listValue:{values:n.map(t)}};return{kind:"structValue",structValue:e(n)};default:throw Error("Unexpected value: ".concat(n))}}(o)))},{})}}((0,S._)({userId:u,replId:d,url:f},r))}},"open"!==l.status)return N.$e(function(e){e.setTag("service","user-events"),e.setExtra("command",p),e.setExtra("userId",u),e.setExtra("replId",d),e.setExtra("url",f),e.setExtra("channelId",l.id),N.Tb(Error("UserEvents channel is not open: ".concat(l.status)))}),[2];return i.emit(C.EVENT_SENT,e,r),l.send(p),[2]}})})).apply(this,arguments)}function c(){return(c=(0,k._)(function(){return(0,E.Jh)(this,function(e){return o?[2,o]:[2,new Promise(function(e){i.once(C.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}return a("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},function(e){var t=e.channel;return a("meta:ready",{}),o=t,i.emit(C.CHANNEL_OPENED,t),function(){o=null}}),{emit:a}}({container:e$=(0,W.ZP)({onUnrecoverableError:el,onFirewallDenied:em,ctx:eJ}),enabled:!!(void 0!==ey&&ey)}),eQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,O.ZP)();t.setMaxListeners(1e3);var n=null,r={openFiles:[],activeTab:0};function i(e){ec()(r,e)||(r=e,t.emit(x.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return t.on(x.SESSION_STATE_CHANGED,e),function(){t.removeListener(x.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return t.on(x.DEEPLINK_CHANGED,e),n&&(e(n),n=null),function(){t.removeListener(x.DEEPLINK_CHANGED,e)}},openFile:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:t,newTab:n.newTab,newPane:n.newPane,newPaneEdge:n.newPaneEdge,col:n.col,line:n.line});return}var o=n.tabIndex,a=n.newTab;if(void 0!==o){!function(e,t){var n=t||r.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}(o,r.openFiles.length+1);var l=r.openFiles.slice(),c=r.openFiles.indexOf(t);if(-1===c){l.splice(o,1,t),i({openFiles:l,activeTab:l.indexOf(t)});return}if(c===o){i((0,_._)((0,S._)({},r),{activeTab:l.indexOf(t)}));return}l.splice(c,1),l.splice(o,0,t);var s=l.indexOf(t);i({openFiles:l,activeTab:s});return}if(r.openFiles.includes(t)){i((0,_._)((0,S._)({},r),{activeTab:r.openFiles.indexOf(t)}));return}var u=r.openFiles.slice();if(a){var d=0===u.length?0:r.activeTab+1;u.splice(d,0,t),i({openFiles:u,activeTab:d});return}var f=r.activeTab;u.splice(f,1,t),i({openFiles:u,activeTab:f})},updateDeeplink:function(e){t.emit(x.DEEPLINK_CHANGED,e),n=e},getActiveFile:function(){var e=r.openFiles,t=r.activeTab;if(0!==e.length)return e[t]},getState:function(){return r}}}({openFile:ed}),e0=(0,et.Z)({container:e$}),e1=function(e){var t=e.container,n=e.onCommand,r=e.getColorForUser,i=(0,O.ZP)();i.setMaxListeners(1/0);var o=[],a=null,l=[],c={},s=null;function u(){return d.apply(this,arguments)}function d(){return(d=(0,k._)(function(){return(0,E.Jh)(this,function(e){return s?[2,s]:[2,new Promise(function(e){i.once(b.USERS_UPDATE,function(){if(!s)throw Error("Expected presenceChannel to be set");e(s)})})]})})).apply(this,arguments)}function f(e){ec()(a,e)||(a=e,i.emit(b.FOLLOWED_USER_CHANGED,e))}function p(){return(p=(0,k._)(function(e){var t,n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,h()];case 1:r.sent(),r.label=2;case 2:return[4,u()];case 3:if(t=r.sent(),!(n=o.find(function(t){return t.username===e})))return[2];return f(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=(0,k._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,f(null),[4,u()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==n||n(e);var t={cmd:e,emitter:i,activeUsers:o,userIdToFile:c,followedUser:a,setFollowedUser:f,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,c=e.getColorForUser,s=t.roster;if(s){var u=s.user,d=s.files;if(u&&d){var f=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||f.has(e.id))){var t=d.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,eI.gs)(e.timestamp)}}),n=null==c?void 0:c({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,eI.i7)(r),sessions:t}),f.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,eI.f0)(e)}),n.emit(b.USERS_UPDATE,(0,H._)(r)),a.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=a.indexOf(e);-1!==t&&(a.splice(t,1),n.emit(b.FOLLOWING_USERS_CHANGED,{followingUsers:(0,H._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var p=i[o.id];n.emit(b.USER_OPENED_FILE,{user:o,file:p})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),c=Math.floor(Date.now()/1e3),s=L.google.protobuf.Timestamp.create({seconds:c}),u=(0,eI.gs)(s);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),f={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,eI.i7)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(f),n.emit(b.USER_JOIN,f),n.emit(b.USERS_UPDATE,(0,H._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var c=t.part,s=c.id,u=c.session,d=r.findIndex(function(e){return e.id===s}),f=r[d];if(1===f.sessions.length){r.splice(d,1),delete i[f.id],n.emit(b.USER_LEAVE,f),n.emit(b.USERS_UPDATE,(0,H._)(r)),o&&l(null);var p=a.findIndex(function(e){return e.id===f.id});-1!==p&&(a.splice(p,1),n.emit(b.FOLLOWING_USERS_CHANGED,{followingUsers:(0,H._)(a),user:f,type:"unfollow"}))}else{f.sessions=f.sessions.filter(function(e){return e.id!==u});var h=(0,eI.f0)(f);i[f.id]!==h&&(i[f.id]=h,n.emit(b.USER_OPENED_FILE,{user:f,file:h}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var o=n.fileOpened,a=o.userId,l=o.file,c=o.timestamp,s=o.session,u=l||null;if(!a||!c)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var f=d.sessions.find(function(e){return e.id===s});if(!f)throw Error("Expected session with ID ".concat(f));f.activeFile=u,f.timestamp=(0,eI.gs)(c),i[a]=u,t.emit(b.USER_OPENED_FILE,{user:d,file:u})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(b.FOLLOWING_USERS_CHANGED,{followingUsers:(0,H._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r),c=i.findIndex(function(e){return e.id===l.id});-1!==c&&(i.splice(c,1),n.emit(b.FOLLOWING_USERS_CHANGED,{followingUsers:(0,H._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=t.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,eI.N5)(a,r),c=i[l.id],s=l.sessions.find(function(e){return e.id===a});if(!s)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));s.timestamp=(0,eI.gs)(o.timestamp);var u=s.activeFile;u!==c&&(i[l.id]=u,n.emit(b.USER_OPENED_FILE,{user:l,file:u}))}(t)}}),s=t,function(){s=null}}),{onUserLeave:function(e){return i.on(b.USER_LEAVE,e),function(){i.removeListener(b.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(b.USER_JOIN,e),function(){i.removeListener(b.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(b.USERS_UPDATE,e),function(){i.removeListener(b.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(b.USER_OPENED_FILE,e),function(){i.removeListener(b.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(b.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(b.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(b.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(b.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=c[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,k._)(function(){return(0,E.Jh)(this,function(t){switch(t.label){case 0:return[4,u()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return p.apply(this,arguments)},unfollowUser:h,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return c},getPathToUserIds:function(){var e=new Map;return o.forEach(function(t){var n=t.id,r=c[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,o=e.get(n);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,eD.Il)(n),r))}}(r,n)}),e}}}({container:e$,onCommand:eO,getColorForUser:eM}),e2=(0,G.Z)({container:e$,fs:e0,ctx:eJ}),e3=function(e){var t,n,r,i=e.container,o=(0,O.ZP)(),a=null;function l(){return c.apply(this,arguments)}function c(){return(c=(0,k._)(function(){return(0,E.Jh)(this,function(e){return a&&"open"===a.status?[2,a]:[2,new Promise(function(e){o.once(y.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return(u=(0,k._)(function(){return(0,E.Jh)(this,function(e){return[2,M({container:i,service:"nix"})]})})).apply(this,arguments)}return i.openChannel({service:"nix"},function(e){var t=e.channel;return a=t,o.emit(y.CHANNEL_OPENED,t),function(){a=null}}),{searchPackages:(t=(0,k._)(function(e){var t,n,r,i,o,a=arguments;return(0,E.Jh)(this,function(l){switch(l.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},[4,s()];case 1:return r=(n=T._.apply(void 0,[l.sent(),2]))[0],i=n[1],[4,r.request({nixPackageSearchRequest:(0,S._)({query:e},t)})];case 2:if((o=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(i(),o.error)return[2,{error:o.error,packages:null}];if(!o.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:o.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return t.apply(this,arguments)}),listPackages:(0,k._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=T._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,k._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=T._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,k._)(function(){var e,t,n,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=T._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(n=(0,k._)(function(e){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return n.apply(this,arguments)}),removePackages:(r=(0,k._)(function(e){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return r.apply(this,arguments)}),packageInfo:function(e){return(0,k._)(function(){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((t=n.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(t.error)return[2,{package:null,error:t.error}];if(!t.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!t.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:t.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:e$}),e4=(0,F.Z)({container:e$,dotReplit:e2}),e8=function(e){var t=e.container,n=e.forceTrace,r=e.track,i=(0,O.ZP)(),o=new Map;function a(e){var t=o.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},o.set(e,t)),t}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,k._)(function(e){var n,r,i,o,a=arguments;return(0,E.Jh)(this,function(c){switch(c.label){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,[4,M({container:t,service:"packager3"})];case 1:if(i=(r=T._.apply(void 0,[c.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:c.sent(),c.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,l(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=(0,k._)(function(e){var n;return(0,E.Jh)(this,function(r){return((n=a(e)).didCallOpenChannel||function(e){var n=a(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:L.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===L.api.State.Running;i.emit(p.STATE_CHANGED,n,e)}else null!=t.output?i.emit(p.OUTPUT,t.output,e):null!=t.error&&i.emit(p.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,i.emit(p.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,i.emit(p.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){i.once(p.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,k._)(function(){var n,i,o,a;return(0,E.Jh)(this,function(l){switch(l.label){case 0:return[4,s(t)];case 1:if("open"!==(i=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(n=a.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(A.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,k._)(function(){var n,r,i;return(0,E.Jh)(this,function(o){switch(o.label){case 0:return[4,s(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,k._)(function(){var n,r,i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=T._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return N.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,k._)(function(){var n,r,i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=T._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return N.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,k._)(function(){return(0,E.Jh)(this,function(o){var a;return[2,(0,P.nO)(e,"packager.installPackages",(a=(0,k._)(function(e){var o,a,l;return(0,E.Jh)(this,function(c){switch(c.label){case 0:return[4,s(t)];case 1:if("open"!==(o=c.sent()).status)return[2,(0,U.UG)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,P.Rg)(e),forceTrace:n})];case 2:if((a=c.sent()).error)return[2,(0,U.UG)(a.error)];if(a.channelClosed)return[2,(0,U.UG)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,U.UG)("No package install response found")];return l.installedSystemDependencies&&r&&r(A.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,U.Ok)(l)]}})}),function(e){return a.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,k._)(function(){var t,n,r,i,o,a,c;return(0,E.Jh)(this,function(s){switch(s.label){case 0:return[4,l(e)];case 1:return n=(t=T._.apply(void 0,[s.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=s.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(a=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:a,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",N.Tb(Error(c)),[2,{packages:null,error:c}]}return[2]}})})()},getPackagerIds:function(){return Array.from(o.keys())},clearPackager:function(e){var t=o.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),o.delete(e)},onOutput:function(e){return i.on(p.OUTPUT,e),function(){i.removeListener(p.OUTPUT,e)}},onError:function(e){return i.on(p.ERROR,e),function(){i.removeListener(p.ERROR,e)}},onStateChanged:function(e){return i.on(p.STATE_CHANGED,e),function(){i.removeListener(p.STATE_CHANGED,e)}}}}({container:e$,forceTrace:eq,track:D.j}),e6=(0,eP.ZP)({container:e$,fs:e0,openMultipleFiles:ep,openMultipleURLs:eh,enableReplspaceSshTokenPassthrough:eR}),e7=(o=(i={container:e$,beforeRun:e5=(n=(0,k._)(function(e,t){var n;return(0,E.Jh)(this,function(r){var i;return n=(null==t?void 0:t.ctx)||R.D.active(),[2,(0,P.nO)(n,"beforeRun",(i=(0,k._)(function(n){var r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y;return(0,E.Jh)(this,function(b){switch(b.label){case 0:return[4,(0,P.nO)(n,"toolchain.getConfigs",function(){return e4.getConfigs()})];case 1:if((r=b.sent()).disableInstallBeforeRun)return[2];return i=(0,S._)({},t),delete i.ctx,eK.emit("user:run:prerun",(0,S._)({runnerMode:ei},i)),[4,(0,P.nO)(n,"fs.flush",(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:if(!(void 0===eY||eY.current))return[3,2];return[4,e0.flush()];case 1:e.sent(),e.label=2;case 2:return[2]}})}))];case 2:if(b.sent(),e&&e("prerun flush finished"),!(null==r?void 0:r.packagers))return[3,10];o=!0,a=!1,l=void 0,b.label=3;case 3:b.trys.push([3,8,9,10]),c=r.packagers[Symbol.iterator](),b.label=4;case 4:if(o=(s=c.next()).done)return[3,7];if(!(u=s.value).guessImports)return[3,6];return d=performance.now(),f=r.disableGuessImports,[4,e8.installPackages(n,u.id,f)];case 5:p=b.sent(),h=performance.now()-d,e&&(p.error?e("prerun packager install finished",{packagerId:u.id,language:u.language,errorMessage:p.error,success:!1}):(v=(g=(null==(m=p.value)?void 0:m.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:u.id,language:u.language,guessedPkgs:g,guessedPkgsCount:v,guessedAnyPkgs:v>0,upmGuessDurationMs:null==m?void 0:m.upmGuessDurationMs,upmAddDurationMs:null==m?void 0:m.upmAddDurationMs,upmLockDurationMs:null==m?void 0:m.upmLockDurationMs,backendTotalDurationMs:null==m?void 0:m.totalDurationMs,frontendTotalDurationMs:h,success:!0}),v>0&&(0,D.j)(A.U3.PACKAGER_PACKAGES_GUESSED,{packages:g}))),b.label=6;case 6:return o=!0,[3,4];case 7:return[3,10];case 8:return y=b.sent(),a=!0,l=y,[3,10];case 9:try{o||null==c.return||c.return()}finally{if(a)throw l}return[7];case 10:return eK.emit("user:run:initiate",{}),[2]}})}),function(e){return i.apply(this,arguments)}))]})}),function(e,t){return n.apply(this,arguments)})}).container,a=i.beforeRun,{mainClient:l=(0,V.u)(null),connect:function(){return new Promise(function(e){l.current||o.openChannel({service:"debugger"},function(t){return l.current=function(e){var t,n=e.channel,r=e.beforeRun,i=(0,V.u)("terminated"),o=(0,V.u)([]),a=(0,V.u)([]),l=(0,V.u)(new Map),c=(0,V.u)(null),s=(0,O.ZP)(),u=function(e,t){var n=new Map,r=new Map,i=new Map;function o(){return(o=(0,k._)(function(t){var o,a,l,c,s,u,d;return(0,E.Jh)(this,function(f){switch(f.label){case 0:o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),c=function(){var n,o,a,l,c,s,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,_,R,D,I,B,A,P,G,L,N,O,U,M,X,F;return(0,E.Jh)(this,function(W){switch(W.label){case 0:if(o=(n=(0,T._)(u.value,2))[0],a=n[1],void 0!==t&&t!==o)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:o,path:o},breakpoints:a.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(l=W.sent()).success)return[2,"continue"];c=!0,s=!1,d=void 0;try{for(f=r[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){m=(h=(0,T._)(p.value,2))[0],g=h[1],(null===(v=g.source)||void 0===v?void 0:v.name)===o&&r.delete(m),y=!0,b=!1,w=void 0;try{for(Z=i[Symbol.iterator]();!(y=(x=Z.next()).done);y=!0)k=(C=(0,T._)(x.value,2))[0],C[1]===m&&i.delete(k)}catch(e){b=!0,w=e}finally{try{y||null==Z.return||Z.return()}finally{if(b)throw w}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}_=l,R=!0,D=!1,I=void 0;try{for(B=_.body.breakpoints[Symbol.iterator]();!(R=(A=B.next()).done);R=!0)P=A.value,null!=P.id&&r.set(P.id,(0,S._)({source:{name:o,path:o}},P))}catch(e){D=!0,I=e}finally{try{R||null==B.return||B.return()}finally{if(D)throw I}}G=!0,L=!1,N=void 0;try{for(O=(function(e,t){var n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(a,_.body.breakpoints)[Symbol.iterator]();!(G=(U=O.next()).done);G=!0)X=(M=(0,T._)(U.value,2))[0],F=M[1],X.breakpointId&&null!=F.id&&i.set(X.breakpointId,F.id)}catch(e){L=!0,N=e}finally{try{G||null==O.return||O.return()}finally{if(L)throw N}}return[2]}})},s=n.entries()[Symbol.iterator](),f.label=2;case 2:if(o=(u=s.next()).done)return[3,5];return[5,(0,E.XA)(c())];case 3:f.sent(),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return d=f.sent(),a=!0,l=d,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2]}})})).apply(this,arguments)}function a(){var e=new Map,t=new Set,o=!0,a=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,T._)(c.value,2),d=u[0],f=u[1];if(0!==f.length){var p=[],h=!0,m=!1,g=void 0;try{for(var v,y=f[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var b=v.value;if(b.breakpointId&&b.line){var w=i.get(b.breakpointId),Z=void 0===w?void 0:r.get(w);Z&&t.add(w),p.push({dapId:w,pid1Id:b.breakpointId,line:Z&&Z.line||b.line,verified:!!(null==Z?void 0:Z.verified),logMessage:b.logMessage||void 0})}}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}e.set(d,p)}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var x=!0,C=!1,k=void 0;try{for(var S,_=r.entries()[Symbol.iterator]();!(x=(S=_.next()).done);x=!0){var E=(0,T._)(S.value,2),R=E[0],D=E[1];if(!t.has(R)){var I=(0,z.IT)((null===(O=D.source)||void 0===O?void 0:O.path)||(null===(U=D.source)||void 0===U?void 0:U.name)||""),B=D.line;if(I&&B){var A=e.get(I);A||(A=[],e.set(I,A));var P=!1,G=!0,L=!1,N=void 0;try{for(var O,U,M,X=A[Symbol.iterator]();!(G=(M=X.next()).done);G=!0){var F=M.value;if(F.line===D.line){F.dapId=R,F.verified=D.verified,P=!0;break}}}catch(e){L=!0,N=e}finally{try{G||null==X.return||X.return()}finally{if(L)throw N}}P||A.push({dapId:R,line:B,verified:D.verified})}}}}catch(e){C=!0,k=e}finally{try{x||null==_.return||_.return()}finally{if(C)throw k}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,T._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null},getBreakpoints:a,flush:function(e){return o.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,o=n.breakpoint,l=o.id;if(null!=l){switch(i){case"changed":case"new":r.set(l,(0,S._)({},r.get(l),o));break;case"removed":r.delete(l);break;default:return}t(a())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,z.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(a()))},handleDebugSessionEnded:function(){r.clear(),i.clear();var e=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var u=(0,T._)(c.value,2),d=u[0],f=u[1];0===f.length&&n.delete(d)}}catch(e){o=!0,l=e}finally{try{e||null==s.return||s.return()}finally{if(o)throw l}}t(a())}}}(y,function(e){l.current=e}),d=(0,V.u)(!1),f=[],p=new Q(function(e){if(f.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":i.current="running";break;case"stopped":var t;i.current="paused",c.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,s.emit("paused",e.body.reason),function(){x.apply(this,arguments)}();break;case"breakpoint":u.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=h.get(e.request_seq);n&&(h.delete(e.request_seq),n(e))}}),h=new Map,m=100;function g(){i.current="terminated",o.current=[],a.current=[],c.current=null,u.handleDebugSessionEnded(),d.current=!1}var v=!1;function y(e){return b.apply(this,arguments)}function b(){return(b=(0,k._)(function(e){return(0,E.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=m++;h.set(i,t);var o=(0,_._)((0,S._)({},e),{type:"request",seq:i});f.push({time:Date.now(),direction:"out",data:o});var a={debugInput:{session:"main",adapterInput:(r=JSON.stringify(o),"Content-Length: ".concat(ee.byteLength(r),"\r\n\r\n").concat(r))}};f.push({time:Date.now(),direction:"out",data:a}),n.send(a)})]})})).apply(this,arguments)}function w(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,k._)(function(e){var t;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return f.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),f.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function x(){return(x=(0,k._)(function(){var e,t,n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return o.current=[],a.current=[],[4,y({command:"stackTrace",arguments:{threadId:c.current}})];case 1:if(!(e=r.sent()).success||(o.current=e.body.stackFrames,0===o.current.length))return[2];return[4,y({command:"scopes",arguments:{frameId:o.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return y({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),a.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,_._)((0,S._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function C(e){return R.apply(this,arguments)}function R(){return(R=(0,k._)(function(e){var t,a,l,c,p,h,m;return(0,E.Jh)(this,function(g){switch(g.label){case 0:if("terminated"!==i.current)throw Error("Cant start while debugger is already running");return i.current="preinitializing",o.current=[],[4,r()];case 1:if(g.sent(),"stopping"===i.current)return i.current="terminated",[2];return v=!0,i.current="initializing",l={session:"main",readOnly:!1},e&&(l.debuggerId=e.debuggerOption.id,e.filePath&&(l.filePath=e.filePath)),c={debugMain:l},f.push({time:Date.now(),direction:"out",data:c}),[4,n.request(c)];case 2:if(p=g.sent(),f.push({time:Date.now(),direction:"in",data:p}),p.error)return s.emit("output",p.error),i.current="terminated",[2];return[4,y({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(h=g.sent()).success)return i.current="terminated",[2];return d.current=!!(null===(t=h.body)||void 0===t?void 0:t.supportsStepBack),m=!(null===(a=h.body)||void 0===a?void 0:a.supportsConfigurationDoneRequest),[4,u.flush()];case 4:if(g.sent(),m)return[3,6];return[4,y({command:"configurationDone"})];case 5:g.sent(),g.label=6;case 6:return"initializing"===i.current&&(i.current="running"),s.emit("started",m),[2]}})})).apply(this,arguments)}function D(e,t){return I.apply(this,arguments)}function I(){return(I=(0,k._)(function(e,t){var n,r,o,a;return(0,E.Jh)(this,function(l){switch(l.label){case 0:return n=t.line,r=t.otIndex,o=t.otVersion,a=t.logMessage,[4,w({debugAddBreakpointRequest:{path:(0,z.om)(e)||e,line:n,otIndex:r,otVersion:o,logMessage:a}})];case 1:if(l.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(e)];case 2:l.sent(),l.label=3;case 3:return s.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function B(e){return A.apply(this,arguments)}function A(){return(A=(0,k._)(function(e){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return t=u.findPathByBreakpointId(e),[4,w({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==i.current&&t))return[3,3];return[4,u.flush(t)];case 2:n.sent(),n.label=3;case 3:return s.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function P(){return(P=(0,k._)(function(e,t){var n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:if(!(n=u.findPathByBreakpointId(e)))return[2];return[4,w({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(n)];case 2:r.sent(),r.label=3;case 3:return s.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function G(){return(G=(0,k._)(function(e,t){var n,r,i;return(0,E.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=l.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,B(i)];case 1:return o.sent(),[3,4];case 2:return[4,D(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function N(e){return s.on("started",e),function(){s.removeListener("started",e)}}return n.onCommand(function(e){f.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,o=e.debugState,a=e.debugBreakpointEvent,l=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&p.read(r.adapterOutput),r.output&&s.emit("output",r.output)}if(a&&u.handlePID1BreakpointEvent(a),o&&o.state===L.api.State.Stopped&&g(),((null==l?void 0:null===(t=l.sessions)||void 0===t?void 0:t.main)===L.api.State.Running||(null==o?void 0:o.state)===L.api.State.Running)&&"terminated"===i.current&&C(),(null==l?void 0:null===(n=l.sessions)||void 0===n?void 0:n.main)===L.api.State.Stopped||(null==o?void 0:o.state)===L.api.State.Stopped){if(v){v=!1;return}g()}}),{state:i,stackFrames:o,variables:a,breakpoints:l,supportsStepBack:d,onOutput:function(e){return s.on("output",e),function(){s.removeListener("output",e)}},onStarted:N,onPaused:function(e){return s.on("paused",e),function(){s.removeListener("paused",e)}},onBreakpoint:function(e){return s.on("breakpoint",e),function(){s.removeListener("breakpoint",e)}},sendInput:function(e){return(0,k._)(function(){var t,r;return(0,E.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},f.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),f.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,k._)(function(){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,_._)((0,S._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=o.current[0])||void 0===t?void 0:t.id:n,i=e.expression,a=e.context;return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return[4,y({command:"evaluate",arguments:{frameId:r,expression:i,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:D,removeBreakpoint:B,updateBreakpoint:function(e,t){return P.apply(this,arguments)},toggleBreakpoint:function(e,t){return G.apply(this,arguments)},start:C,continue:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"continue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"reverseContinue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepBack",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepIn",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"next",arguments:{threadId:c.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,k._)(function(){return(0,E.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepOut",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,k._)(function(){var e,t,r,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:if("terminated"===i.current)throw Error("Debugger already terminated");if(e=i.current,i.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(i.subscribe(function(){return e()}))}),new Promise(function(e){t.push(N(function(){return e()}))})])];case 1:if(a.sent(),t.forEach(function(e){return e()}),"terminated"===i.current)return[2];a.label=2;case 2:return r={debugStop:{session:"main"}},f.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(o=a.sent(),f.push({time:Date.now(),direction:"in",data:o}),o.error)throw Error("Failed to stop debugger "+o.error);return[2]}})})()},getSource:function(e){return(0,k._)(function(){var t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:i,stackFrames:o,variables:a,breakpoints:l,threadId:c}).map(function(e){var t=(0,T._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,H._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+f.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:a}),e(null),function(){l.current=null}})})}}),e9=(0,I.TE)({container:e$,dotReplit:e2}),te=function(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y=e.container,b=e.toolchain,w=e.beforeRun,Z=e.packager,x=e.debuggest,C=(0,O.ZP)(),_=null,T={runId:eU()(),runState:eG.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function R(e){T=(0,eN.Uy)(T,e)}function I(e){var t=T.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));C.emit(eG.zW.BLOCK_CHANGED,t)}function B(){C.emit(eG.zW.ALL_BLOCKS_CHANGED,T.outputBlocks)}function A(e){T.runState!==e&&(R(function(t){t.runState=e}),C.emit(eG.zW.STATE_CHANGE,e))}function G(){if(!_){A(eG.Ah.OFFLINE);return}if("BEFORE_RUN"===T.runningStage){A(eG.Ah.BEFORE_RUN);return}if("STOPPING"===T.runningStage){A(eG.Ah.STOPPING);return}if("NONE"!==T.runningStage){A(eG.Ah.RUNNING);return}A(eG.Ah.IDLE)}function N(e,t){var n=(null!=t?t:T).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function U(e,t){var n;R(function(r){var i=N(e,r);i&&(n=i.id,t(i))}),n&&I(n)}function M(){return(M=(0,k._)(function(e){return(0,E.Jh)(this,function(t){var n;return[2,(0,P.GK)("outputs.run",(n=(0,k._)(function(t){var n,r,i,o,a,l,c,s,u,d;return(0,E.Jh)(this,function(f){switch(f.label){case 0:if(T.runState!==eG.Ah.IDLE&&T.runState!==eG.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+T.runState);return i=T.outputBlocks.length>1&&T.outputBlocks[T.outputBlocks.length-1],(0,D.j)(D.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=y.getContext())||void 0===n?void 0:n.repl.id,runId:T.runId,lastBlock:i?(0,S._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===eG.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===eG.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:T.outputBlocks.length,previousBlocksAvgTimeMs:T.outputBlocks.length>1?Math.floor(T.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=eU()(),R(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),C.emit(eG.zW.LOCAL_RUN),G(),!e&&(l=function(e,t,n,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(t=t.slice(),n){var o=t.indexOf(n);-1!==o&&(t.splice(o,1),t.splice(0,0,n))}if(r){var a=t.indexOf(r);-1!==a&&t.splice(a,1),t.splice(0,0,r)}var l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;if(f.match(/(\.[a-z0-9]+)$/)){var p=!0,h=!1,m=void 0;try{for(var g,v=e.runs[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(y.fileParam||y.optionalFileParam){var b=(0,ea.rF)(y.fileTypeAttrs);null===b&&y.language&&(b=ea.$R.from(y.language)),b&&(0,ea.JW)(f,b)&&i.push({runner:y,filePath:f})}}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var w=!0,Z=!1,x=void 0;try{for(var C,k=e.runs[Symbol.iterator]();!(w=(C=k.next()).done);w=!0){var S=C.value;S.fileParam||i.push({runner:S})}}catch(e){Z=!0,x=e}finally{try{w||null==k.return||k.return()}finally{if(Z)throw x}}return function(e){e.sort(function(e,t){var n=eL(e),r=eL(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(b.configs.current,[],null,(null===(a=b.configs.current)||void 0===a?void 0:a.entrypoint)||null)).length>0&&(e=l[0]),[4,w(c=q.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=y.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==_?void 0:_.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(f.sent(),T.runId!==o||"NONE"===T.runningStage||"SERVER"===T.runningStage)return[2];if(!_)throw Error("State is RUNNING but outputs is null?");if("open"!==_.status)return[2];return(s=X()).isStopped||s.stop(),u={},e&&(u.runnerId=e.runner.id,u.filePath=e.filePath),d=_,[4,(0,P.nO)(t,"timeToRunning",(0,k._)(function(){var e,t;return(0,E.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),d.send({runMain:u}),[4,new Promise(function(e){var t=d.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,c("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return f.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function X(){var e=x.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function F(){return(F=(0,k._)(function(e){var t,n;return(0,E.Jh)(this,function(r){if(T.runState===eG.Ah.OFFLINE)return[2];if(t=X(),n=T.outputBlocks[T.outputBlocks.length-1].type===eG.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),T.runState!==eG.Ah.IDLE&&T.runState!==eG.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!_)throw Error("State is not OFFLINE but outputs is null?");return"open"!==_.status||_.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:Z,updateState:R,getRunningBlockOfType:N,updateRunningBlockOfType:U,emitBlockUpdate:I}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,a=t.emitBlockUpdate,(l=[]).push(n.onOutput(function(e){var t=i(eG.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),l.push(n.onError(function(e){o(eG.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),l.push(n.onStateChanged(function(e){if(e){var t=eU()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:eG.MZ.EXPANDED,type:eG.kH.PACKAGER,data:(0,S._)({},eX({maxHistorySize:eW}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),a(t)}else o(eG.kH.PACKAGER,function(e){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0})})),d=(c={debuggest:x,updateState:R,updateRunningBlockOfType:U,getRunningBlockOfType:N,emitRunState:A,emitBlockUpdate:I,stopCurrentRun:function(){R(function(e){e.runningStage="BEFORE_RUN"}),null==_||_.send({clear:{}})}}).debuggest,f=c.updateState,p=c.updateRunningBlockOfType,h=c.getRunningBlockOfType,m=c.emitBlockUpdate,g=c.emitRunState,v=c.stopCurrentRun,d.mainClient.subscribe(function(e){e&&(null==u||u(),null==s||s(),u=e.state.subscribe(function(e){if("initializing"===e){v();var t=eU()();f(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:eG.kH.DEBUGGER,visualState:eG.MZ.EXPANDED,data:(0,S._)({debugState:"paused"},eX({maxHistorySize:eW}))})}),m(t),g(eG.Ah.RUNNING)}"paused"===e&&p(eG.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&p(eG.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&g(eG.Ah.STOPPING),"terminated"===e&&(p(eG.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(eV),e.isDone=!0}),g(eG.Ah.IDLE))}),s=e.onOutput(function(e){var t=h(eG.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),y.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return _=t,G(),t.onCommand(function(e){if(null!=e.state){var t=e.state===L.api.State.Stopped;"STOPPING"===T.runningStage&&t&&R(function(e){e.runningStage="NONE"}),t?"SERVER"===T.runningStage&&R(function(e){e.runningStage="NONE"}):R(function(e){e.runningStage="SERVER"}),G();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==T.outputBlocks.find(function(e){return e.type===eG.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=eF(n.measureStartTime),a=eU()();R(function(e){e.outputBlocks.push({id:a,localStartTime:Date.now(),startTime:o,isDone:!1,type:eG.kH.EXECUTION,visualState:eG.MZ.EXPANDED,data:(0,S._)({cgroup:r,executionMode:i===L.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eX({maxHistorySize:eW}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),I(a)}if(null!=e.output){var l=N(eG.kH.EXECUTION);null==l||l.data.emitMessage(e.output)}if(null!=e.hint){var c=N(eG.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&U(eG.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;U(eG.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var u,d=e.outputBlockEndEvent.exitCode;(0,D.j)(D.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:d,replId:null===(u=y.getContext())||void 0===u?void 0:u.repl.id,runId:T.runId});var f=eF(e.outputBlockEndEvent.measureEndTime);U(eG.kH.EXECUTION,function(e){e.data.emitMessage(eV),e.data.exitCode=d,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){_=null,R(function(e){e.runId=eU()(),e.runState=eG.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),G(),B()}}),{mode:"outputs",run:function(e){return M.apply(this,arguments)},stopRun:function(){if(T.runState===eG.Ah.RUNNING){var e=X();if(!e.isStopped){e.stop(),R(function(e){e.runningStage="STOPPING"}),G();return}if("BEFORE_RUN"===T.runningStage){R(function(e){e.runningStage="NONE"}),G();return}R(function(e){e.runningStage="STOPPING"}),G(),null==_||_.send({clear:{}})}},sendInput:function(e){return F.apply(this,arguments)},onLocalRun:function(e){return C.on(eG.zW.LOCAL_RUN,e),function(){C.removeListener(eG.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return C.on(eG.zW.STATE_CHANGE,e),function(){return C.removeListener(eG.zW.STATE_CHANGE,e)}},getRunState:function(){return T.runState},getOutputBlocks:function(){return T.outputBlocks},clearBlockHistory:function(){R(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),B()},onBlockChanged:function(e){return C.on(eG.zW.BLOCK_CHANGED,e),function(){return C.removeListener(eG.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return C.on(eG.zW.ALL_BLOCKS_CHANGED,e),function(){return C.removeListener(eG.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(_&&"open"===_.status){var n=T.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||_.send({resizeTerm:t})}},startBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eG.MZ.EXPANDED,n=eU()();return R(function(r){r.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:t,type:e,data:(0,S._)({},eX({maxHistorySize:eW}))})}),I(n),{id:n}},endBlock:function(e){R(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(eV),n.localEndTime=Date.now(),n.isDone=!0}),I(e)},writeOutputToBlock:function(e,t){var n=T.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){R(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),I(e)},setBlockVisualState:function(e,t){R(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),I(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,O.ZP)(),i=eG.Ah.OFFLINE,o="none",a=Math.random();function l(){var e=function(e){i!==e&&(i=e,r.emit(eG.zW.STATE_CHANGE,i))};if("none"!==o){e(eG.Ah.RUNNING);return}e(eG.Ah.IDLE)}function c(){return(c=(0,k._)(function(){var e;return(0,E.Jh)(this,function(n){switch(n.label){case 0:if(i!==eG.Ah.IDLE&&i!==eG.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return a=e=Math.random(),r.emit(eG.zW.LOCAL_RUN),o="before-run",l(),[4,t(q.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),a!==e||"none"===o)return[2];return o="running",l(),o="none",l(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===W.em.CONNECTED&&(o="none",l())}),{mode:"html",run:function(){return c.apply(this,arguments)},stopRun:function(){if(i!==eG.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",l()},onStateChanged:function(e){return r.on(eG.zW.STATE_CHANGE,e),function(){r.removeListener(eG.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(eG.zW.LOCAL_RUN,e),function(){r.removeListener(eG.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}({mode:ei,container:e$,toolchain:e4,beforeRun:e5,packager:e8,debuggest:e7}),tt=(s=(0,O.ZP)(),u=new Promise(function(e){return c=e}),d=null,f=new Map,e$.openChannel({service:"chat",name:"broadcaster"},function(e){var t=e.channel,n=e.context;return n.currentUser&&(d=n.currentUser.username),t.onCommand(function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw Error("unexpected broadcast without a message");s.emit(h.MESSAGE_RECEIVED,{text:t.text,username:t.username})}}),c(t),function(){u=new Promise(function(e){return c=e})}}),{broadcastMessage:function(e,t){var n=t.text;return(0,k._)(function(){var t,r,i,o,a,l,c,s,p,h;return(0,E.Jh)(this,function(m){switch(m.label){case 0:return[4,u];case 1:if(t=m.sent(),!d)throw Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:d},i=!0,o=!1,a=void 0;try{for(l=f[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)p=(s=(0,T._)(c.value,2))[0],h=s[1],p!==e&&h(r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t.send({chatMessage:r}),[2]}})})()},onBroadcastReceived:function(e,t){return f.set(e,t),s.on(h.MESSAGE_RECEIVED,t),function(){s.removeListener(h.MESSAGE_RECEIVED,t),f.delete(e)}}}),tn=function(e){var t=e.container,n=e.toolchain,r=e.fs,i=e.enableMultipleLSPClientsPerFile,o=void 0!==i&&i,a=new Map,l=new Map,c={},s=!0;function u(e){var t=c[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,i=!1,o=void 0;try{for(var s,u=a[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=(0,T._)(s.value,2),f=d[0],p=d[1],h=l.get(f);if(h){h.delete(n),l.set(f,h);var m=!0,g=!1,v=void 0;try{for(var y,b=p[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(0,y.value)(Array.from(h))}catch(e){g=!0,v=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}t.closeChannel(),delete c[e]}function d(e,t){if(c[e])throw Error("LSPNix: addLanguage called with lspId already configured");c[e]={client:null,option:t,closeChannel:function(){}},s&&m(e)}var f=new Map;function p(e){if(!s)return!1;var t=c[e];return!!t&&!t.client}function h(e,t,n){new Date().getTime()-n.getTime()<5e3?t<3?setTimeout(function(){p(e)&&m(e,t+1)},1e3*Math.pow(2,t)):q.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){p(e)&&m(e)})}function m(e){return g.apply(this,arguments)}function g(){return(g=(0,k._)(function(e){var n,i,u,d,p,m,g,v,y=arguments;return(0,E.Jh)(this,function(b){switch(b.label){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:0,!s)throw Error("LSPNix: Called startClient while not enabled");if(!c[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!f.get(e))return[3,2];return[4,f.get(e)];case 1:if(b.sent())return[2];b.label=2;case 2:if(u=(i=c[e]).client,i.closeChannel,d=i.option,u)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return p=function(){},m=new Promise(function(e){p=e}),f.set(e,m),g=[],v=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(q.kg.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),p(null)),!n}},function(i){var u=i.channel,m=null,y=!1,b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y){y=!0,t||(p(null),f.delete(e)),g.forEach(function(e){return e()}),null==m||m.destroy(),(null===(o=c[e])||void 0===o?void 0:o.client)===m&&(c[e].client=null),t&&s||v();var n=!0,r=!1,i=void 0;try{for(var o,u,d=a[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var h=(0,T._)(u.value,2),b=h[0],w=h[1],Z=l.get(b);if(Z&&m&&Z.has(m)){Z.delete(m),Z.size?l.set(b,Z):l.delete(b);var x=!0,C=!1,k=void 0;try{for(var S,_=w[Symbol.iterator]();!(x=(S=_.next()).done);x=!0)(0,S.value)(Array.from(Z))}catch(e){C=!0,k=e}finally{try{x||null==_.return||_.return()}finally{if(C)throw k}}}}}catch(e){r=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw i}}}};if("open"!==u.status){q.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var w=new Date;return u.request({startLSP:{languageServerId:e}}).then(function(i){if(!i.ok){q.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:i.error});return}if(s&&c[e]){g.push(u.onCommand(function(t){t.state===L.api.State.Stopped&&(q.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),b(),s&&h(e,n,w))}));var v=0;eE(t,function(){return v++<5&&s&&eT(c[e].option,d)&&"open"===u.status}).then(function(t){if(!c[e]){q.kg.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!eT(c[e].option,d)){q.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==u.status){q.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(t.error){q.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(Z=t.error)||void 0===Z?void 0:Z.message});return}if(m=function(e){var t,n=e.connection,r=e.isSupportedFile,i=e.clientId,o=e.clientName,a=e.getWorkspaceConfiguration,l=e.onWorkspaceConfigurationChange,c=e.applyWorkspaceEdit,s=(0,O.ZP)();s.setMaxListeners(1/0);var u=null,d=ev.a.OFFLINE,f=ev.N.NOT_READY,p=null,h=!1,m=new Map,g=new Map,v=null;function y(e){if(!u)throw Error("Expected rootUri");var t=e.slice(u.length+1);try{return decodeURIComponent(t)}catch(e){throw N.$e(function(n){n.setExtra("fragment_to_decode",t),N.Tb(e)}),e}}function b(e){if(!u)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function w(e){d!==e&&(d!==ev.a.INITIALIZED&&Z(ev.N.NOT_READY),d=e,s.emit("SERVER_STATE_CHANGE",d))}function Z(e){f!==e&&(f=e,s.emit("SERVER_HEALTH_CHANGE",f))}function x(e){s.emit("SEND_NOTIFICATION",e),n.write(e_(e))}function C(e){return T.apply(this,arguments)}function T(){return(T=(0,k._)(function(e){var t,r,o,a,l,c,u,f;return(0,E.Jh)(this,function(p){if(a=void 0===(o=(r=void 0===(t=e.options)?{}:t).id)?eS():o,l=r.signal,c=r.tap,u=(0,eu._)(e,["options"]),!Number.isInteger(a))throw Error("Request ID must be an integer");return n.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(s.emit("REQUEST",{id:a,data:u}),null==l||l.addEventListener("abort",function(){D(a)},{once:!0}),n.write(e_((0,_._)((0,S._)({},u),{id:a}))),null===v&&(v=setTimeout(function(){Z(ev.N.STALLED)},3e4)),f=new Promise(function(e){g.set(a,e)}),c&&c(f),[2,f.then(function(e){return null!==v&&(clearTimeout(v),v=null),d!==ev.a.INITIALIZED||e.cancelled||Z(ev.N.READY),(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=eb[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new ew})(i).onResponse(u.method,e)})])})})).apply(this,arguments)}function R(e,t){n.write(e_((0,_._)((0,S._)({},t),{id:e})))}function D(e){var t=g.get(e);t&&(s.emit("CANCEL_REQUEST",e),t({result:null,cancelled:!0}),g.delete(e),x({method:"$/cancelRequest",params:{id:e}}))}var I=0,B=new Q(function(e){var t=g.get(e.id);if(e.id&&t){g.delete(e.id);var n=e.result,r=e.error;if((void 0!==n||r)&&s.emit("RESPONSE",e),void 0!==n){I=0,t({result:n,cancelled:!1});return}if(r){I++;var o=r.code,l=r.message,u=r.data;q.kg.error("LSP request failed",{code:o,lspId:i,errorMessage:l,data:JSON.stringify(u)}),t({error:r}),I>20&&(q.kg.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:i}),Z(ev.N.BROKEN),I=0);return}throw q.kg.error("LSP response message contained neither error nor result"),new eZ.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var d=e.method;if("client/registerCapability"===d){var f=e.params.registrations;if(!f||!Array.isArray(f))throw Error("Expected registrations array");f.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!p)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":p.definitionProvider=!0;break;case"textDocument/typeDefinition":p.typeDefinitionProvider=!0;break;case"textDocument/implementation":p.implementationProvider=!0;break;case"textDocument/references":p.referencesProvider=!0;break;case"textDocument/hover":p.hoverProvider=!0;break;case"textDocument/semanticTokens":p.semanticTokensProvider=n;break;case"textDocument/completion":p.completionProvider=n;break;case"textDocument/formatting":p.documentFormattingProvider=n;break;case"textDocument/rename":p.renameProvider=n;break;case"textDocument/codeAction":p.codeActionProvider=n;break;case"textDocument/signatureHelp":p.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof p.textDocumentSync)break;p.textDocumentSync=(0,_._)((0,S._)({},p.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof p.textDocumentSync)break;p.textDocumentSync=(0,_._)((0,S._)({},p.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof p.textDocumentSync)break;p.textDocumentSync=(0,_._)((0,S._)({},p.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof p.textDocumentSync)break;p.textDocumentSync=(0,_._)((0,S._)({},p.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":p.executeCommandProvider=n;break;default:q.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}s.emit("SERVER_CAPABILITIES_CHANGE",p)}),R(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===d){c(e.params).then(function(t){R(e.id,{result:t,cancelled:!1})});return}if("textDocument/publishDiagnostics"===d){var h=y(e.params.uri),v=m.get(h);if(!v)return;var b=e.params.diagnostics;if(ec()(v.diagnostics,b))return;v.diagnostics=b,s.emit("DIAGNOSTICS",{path:h,diagnostics:b});return}if("workspace/configuration"===d){var w,x=e.params,C=Array(x.items.length).fill(null),k=null!==(w=null==a?void 0:a())&&void 0!==w?w:null;k&&(C=x.items.map(function(e){return e.section?ef()(k,e.section):k})),R(e.id,{result:C,cancelled:!1})}("window/logMessage"===d||"telemetry/event"===d)&&s.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===d&&s.emit("SEMANTIC_TOKENS_REFRESH")});function A(e){if(!p)throw Error("Expected client to be initialized");if(!p[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return p[e]}function P(e){return u&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(u):e.targetUri.startsWith(u)}):e}n.read(B.read);var G=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return(0,k._)(function(){var e,i;return(0,E.Jh)(this,function(o){switch(o.label){case 0:return w(ev.a.INITIALIZING),u="file://".concat(n),[4,C({method:"initialize",params:{initializationOptions:r,capabilities:eg({configurationSupport:{serverToClient:!!a,clientToServer:!!l}}),processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return x({method:"initialized",params:{}}),p=e.result.capabilities,t=e.result.serverInfo,s.emit("SERVER_CAPABILITIES_CHANGE",p),w(ev.a.INITIALIZED),l&&(G=l(function(e){x({method:"workspace/didChangeConfiguration",params:{settings:e}})})),a&&(i=a())&&x({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:eS,notify:{didOpen:function(e,t){if(!r(e))throw Error("Path not supported");var n,o=m.get(e);if(o&&0!==o.buffers){o.buffers++,m.set(e,o);return}var a=null!==(n=null==o?void 0:o.version)&&void 0!==n?n:0;m.set(e,{version:a,buffers:1,diagnostics:[]}),x({method:"textDocument/didOpen",params:{textDocument:{uri:b(e),languageId:ek(e,i),text:t,version:a}}})},didChange:function(e,t){var n=m.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,x({method:"textDocument/didChange",params:{textDocument:{uri:b(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!m.get(e))throw Error('Document for "'.concat(e,'" is not open'));A("textDocumentSync"),x({method:"textDocument/didSave",params:{textDocument:{uri:b(e)}}})},didClose:function(e){var t=m.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(x({method:"textDocument/didClose",params:{textDocument:{uri:b(e)}}}),m.delete(e))},cancelRequest:function(e){D(e)}},request:{completion:function(e,t,n,r){return A("completionProvider"),C({options:r,method:"textDocument/completion",params:{textDocument:{uri:b(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!A("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return C({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return C({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:b(e)},position:t}})},hover:function(e,t,n){return C({options:n,method:"textDocument/hover",params:{textDocument:{uri:b(e)},position:t}})},codeActions:function(e,t,n,r){var i=m.get(e);if(!i)throw Error("Document for path ".concat(e," is not open."));var o=i.diagnostics.filter(function(e){return(0,ex.dI)(e.range,t)});return C({method:"textDocument/codeAction",params:{textDocument:{uri:b(e)},range:t,context:(0,_._)((0,S._)({},r),{diagnostics:o})},options:n})},resolveCodeAction:function(e){return C({method:"codeAction/resolve",params:e})},executeCommand:function(e,t){return C({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return A("documentFormattingProvider"),C({method:"textDocument/formatting",params:{textDocument:{uri:b(e)},options:t}})},formatRange:function(e,t,n){return A("documentRangeFormattingProvider"),C({method:"textDocument/rangeFormatting",params:{textDocument:{uri:b(e)},range:t,options:n}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,k._)(function(){var i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return A("definitionProvider"),[4,C({options:n,method:"textDocument/definition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=P(Array.isArray(o)?o:[o])),[2,(0,_._)((0,S._)({},i),{result:o})]}})})()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,k._)(function(){var i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return A("typeDefinitionProvider"),[4,C({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=P(Array.isArray(o)?o:[o])),[2,(0,_._)((0,S._)({},i),{result:o})]}})})()},findImplementations:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,k._)(function(){var i,o;return(0,E.Jh)(this,function(a){switch(a.label){case 0:return A("implementationProvider"),[4,C({options:n,method:"textDocument/implementation",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=P(Array.isArray(o)?o:[o])),[2,(0,_._)((0,S._)({},i),{result:o})]}})})()},findReferences:function(e,t,n){return A("referencesProvider"),C({method:"textDocument/references",params:{textDocument:{uri:b(e)},position:t,context:n}})},rename:function(e,t,n,r){return A("renameProvider"),C({options:r,method:"textDocument/rename",params:{textDocument:{uri:b(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=A("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return C({method:"textDocument/prepareRename",params:{textDocument:{uri:b(e)},position:t}})},documentHighlights:function(e,t,n){return(0,k._)(function(){return(0,E.Jh)(this,function(r){switch(r.label){case 0:return[4,C({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:b(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,t){return(0,k._)(function(){var n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return[4,C({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:b(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,t){if(!A("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return C({options:t,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:b(e)}}})},semanticTokensDelta:function(e,t,n){var r=A("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!=typeof r.full||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return C({options:n,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:b(e)},previousResultId:t}})},semanticTokensRange:function(e,t,n){if(!A("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return C({options:n,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:b(e)},range:t}})},onDiagnostics:(0,O.JV)(s,"DIAGNOSTICS"),onServerStateChange:(0,O.JV)(s,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,O.JV)(s,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,O.JV)(s,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,O.JV)(s,"REQUEST"),onResponse:(0,O.JV)(s,"RESPONSE"),onCancelRequest:(0,O.JV)(s,"CANCEL_REQUEST"),onSendNotification:(0,O.JV)(s,"SEND_NOTIFICATION"),onReceiveNotification:(0,O.JV)(s,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,O.JV)(s,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in w(ev.a.EXITING),m.clear(),g)D(Number(e));G(),C({method:"shutdown"}).then(function(){x({method:"exit"}),w(ev.a.EXITED),s.removeAllListeners()})},isDestroyed:function(){return h},destroy:function(){for(var e in h=!0,m.clear(),g)D(Number(e));G(),w(ev.a.EXITED),s.removeAllListeners()},getServerState:function(){return d},getServerHealth:function(){return f},getServerCapabilities:function(){return p},getServerInfo:function(){return t},getDiagnostics:function(e){var t=m.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return m.has(e)},documentUriToPath:y,pathToDocumentURI:b,isSupportedFile:r,getLanguageId:function(e){return ek(e,i)},clientId:i,clientName:o}}({connection:{read:function(e){"open"===u.status&&u.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==u.status){(null==m?void 0:m.isDestroyed())&&q.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}u.send({input:e})},didClose:function(){return"open"!==u.status}},clientId:e,clientName:c[e].option.name,isSupportedFile:function(e){return(0,ea.F7)(e,d)},applyWorkspaceEdit:(v=(0,k._)(function(e){var t;return(0,E.Jh)(this,function(n){return(t=e.edit,m)?[2,(0,es.w)({edit:t,fs:r,client:m})]:[2,{applied:!1}]})}),function(e){return v.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=d.config)||void 0===e?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(d.config.configurationJson)}catch(e){q.kg.error("Failed to parse LSP workspace configuration",{configurationJson:d.config.configurationJson})}return t}}),null===(y=d.config)||void 0===y?void 0:y.initializationOptionsJson)try{x=JSON.parse(d.config.initializationOptionsJson)}catch(e){q.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:d.config.initializationOptionsJson})}var i,v,y,Z,x,C=m.initialize({pwd:t.workingDirectory,initializationOptions:x}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw q.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});g.push(m.onServerHealthChange(function(t){if(t===ev.N.BROKEN&&(q.kg.info("LSP: Server health broken",{lspId:e}),b(),s)){q.kg.info("LSP: retrying after server health broken",{lspId:e}),h(e,n,w);return}}),m.onServerStateChange((i=(0,k._)(function(t){var n,r,i,s,h,g,v,y,w,Z,x,k,S,_,R;return(0,E.Jh)(this,function(E){switch(E.label){case 0:if("open"!==u.status)return q.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!m)return q.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!eT(c[e].option,d))return q.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(t===ev.a.EXITED)return q.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),b(),[2];if(t!==ev.a.INITIALIZED)return[2];return[4,C];case 1:if(E.sent(),"open"!==u.status)return q.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),b(),[2];p(m),f.delete(e),c[e].client=m,n=!0,r=!1,i=void 0;try{for(s=a[Symbol.iterator]();!(n=(h=s.next()).done);n=!0)if(v=(g=(0,T._)(h.value,2))[0],y=g[1],(0,ea.F7)(v,d)&&(w=l.get(v),o||!w||!w.size)){Z=w?w.add(m):new Set([m]),l.set(v,Z),x=!0,k=!1,S=void 0;try{for(_=y[Symbol.iterator]();!(x=(R=_.next()).done);x=!0)(0,R.value)(Array.from(Z))}catch(e){k=!0,S=e}finally{try{x||null==_.return||_.return()}finally{if(k)throw S}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return[2]}})}),function(e){return i.apply(this,arguments)})))})}}),function(e){b(e.willReconnect)}}),c[e].closeChannel=v,[2]}})})).apply(this,arguments)}function v(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(c)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;u(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},f=!0,p=!1,h=void 0;try{for(var m,g=t[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var v=m.value;s[v.id]=v}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}var y=!0,b=!1,w=void 0;try{for(var Z,x=Object.keys(c)[Symbol.iterator]();!(y=(Z=x.next()).done);y=!0){var C=Z.value;s[C]||u(C)}}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}var k=!0,S=!1,_=void 0;try{for(var T,E=Object.keys(s)[Symbol.iterator]();!(k=(T=E.next()).done);k=!0){var R=T.value,D=c[R],I=s[R];if(!D){d(R,I);continue}eT(D.option,I)||(u(R),d(R,I))}}catch(e){S=!0,_=e}finally{try{k||null==E.return||E.return()}finally{if(S)throw _}}}function y(){return(y=(0,k._)(function(){var e;return(0,E.Jh)(this,function(t){try{e=n.configs.current,v(e),n.configs.subscribe(v)}catch(e){q.kg.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){y.apply(this,arguments)}(),{disable:function(){if(s){s=!1;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.values(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(p=o.client)||void 0===p||p.destroy(),o.client=null;var u=!0,d=!1,f=void 0;try{for(var p,h,m=a[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=(0,T._)(h.value,2),v=g[0],y=g[1];if(l.has(v)){l.delete(v);var b=!0,w=!1,Z=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)(0,x.value)([])}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}}catch(e){d=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},enable:function(){if(!s){s=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;m(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){a.has(e)||a.set(e,[]),null===(d=a.get(e))||void 0===d||d.push(t);var n=l.get(e);if(n&&n.size)t(Array.from(n));else{var r=[],i=!0,s=!1,u=void 0;try{for(var d,f,p=Object.values(c)[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){var h=f.value;if((0,ea.F7)(e,h.option)&&h.client&&(r.push(h.client),!o))break}}catch(e){s=!0,u=e}finally{try{i||null==p.return||p.return()}finally{if(s)throw u}}r.length&&t(r)}return function(){var n,r=null!==(n=a.get(e))&&void 0!==n?n:[];a.set(e,r.filter(function(e){return e!==t}))}}}}({container:e$,toolchain:e4,fs:e0,enableMultipleLSPClientsPerFile:void 0!==eC&&eC}),tr=(w=(v={container:e$,beforeRun:e5}).container,Z=v.beforeRun,B=(0,O.ZP)(),X=g.Idle,j=new Date(0),J=!1,B.on(m.TEST_RESULT,function(e){J=J&&"passed"===e.body}),Y=function(e){B.emit(m.STATE_CHANGED,e),X=e},$=(0,k._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,E.Jh)(this,function(p){switch(p.label){case 0:if(n=er.api.Payload.fromObject(t),r=er.api.Payload.verify(n))throw r;return i=new(eo())(function(e){var t=er.api.Response.fromObject(e),r=er.api.Response.verify(t);if(r){N.Tb(TypeError("invalid payload received"),function(i){return i.setExtras({validationError:r,payload:n,message:e,response:t})});return}switch(t.body){case"error":return B.emit(m.ERROR,t.error);case"instructionResult":return B.emit(m.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return B.emit(m.TEST_RESULT,t.testResult);case"status":switch(t.status){case er.api.Status.Ready:return Y(g.Ready);case er.api.Status.Building:return Y(g.Building);case er.api.Status.Running:return Y(g.Running)}}}),o=e.onCommand(function(e){if(e.output)try{i.submit(e.output)}catch(t){N.Tb(SyntaxError("invalid response received from i/o testing binary"),function(r){return r.setExtras({err:t,payload:n,cmd:e})})}}),a=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:L.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise(function(e,t){var n,r=function(){n(),e()};B.once(m.STATE_CHANGED,r);var i=setTimeout(function(){n(),t(Error("timeout while waiting for iotester to start"))},2e4);n=function(){clearTimeout(i),B.off(m.STATE_CHANGED,r)}})];case 1:return p.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(l=p.sent()).ok)throw s=Error(null!==(c=l.error)&&void 0!==c?c:"unexpected error occurred while sending input to i/o testing binary"),N.Tb(s,function(e){return e.setExtra("status",l)}),s;return[4,a];case 3:return(u=p.sent()).ok||(f=Error(null!==(d=u.error)&&void 0!==d?d:"unexpected error occurred while executing i/o testing binary"),N.Tb(f,function(e){return e.setExtra("result",u)})),o(),[2]}})}),{run:function(e){if(X!==g.Idle)throw Error("iotester already running");return Y(g.Starting),j=new Date,J=!0,Z().then(function(){return new Promise(function(t){var n=w.openChannel({service:"exec"},function(r){var i="",o="",a=r.channel.onCommand(function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)});return t((function(e,t){return $.apply(this,arguments)})(r.channel,e).finally(function(){a(),n(),(o||i)&&N.Tb(Error("logs received from IOTester"),function(t){return t.setExtras({logs:i,stderr:o,payload:e})})})),n})})}).catch(function(e){return J=!1,Promise.reject(e)}).finally(function(){return Y(g.Idle)})},get lastRunAt(){return j},get state(){return X},get lastRunDidPass(){return J},onInstructionResult:function(e){return B.on(m.INSTRUCTION_RESULT,e),function(){B.off(m.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return B.on(m.STATE_CHANGED,e),function(){B.off(m.STATE_CHANGED,e)}},onTestResult:function(e){return B.on(m.TEST_RESULT,e),function(){B.off(m.TEST_RESULT,e)}},onError:function(e){return B.on(m.ERROR,e),function(){B.off(m.ERROR,e)}}}),ti=(0,en.Z)({container:e$,fs:e0}),to=function(e){var t,n,r=e.container,i=e.nixService;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,k._)(function(e){return(0,E.Jh)(this,function(t){switch(t.label){case 0:if(e&&(n=void 0),!n){var r;n=new Promise((r=(0,k._)(function(e){var t,n;return(0,E.Jh)(this,function(r){switch(r.label){case 0:return[4,i.listPackages()];case 1:if(null==(n=r.sent())?void 0:null===(t=n.packages)||void 0===t?void 0:t.some(function(e){return"pkgs.postgresql"===e.name}))return[3,3];return[4,i.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}))}return[4,n];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:(t=(0,k._)(function(e){var t,n,i,a,l,c,s,u,d,f,p,h,m;return(0,E.Jh)(this,function(g){switch(g.label){case 0:return t=e.query,n=e.connectionString,[4,o()];case 1:g.sent(),i=(0,eA.Z)({container:r}),a=[],l=null,c=new eB.t(function(e){return a.push(e)}),s=null,u=!1,d=new Promise(function(e){var t=i.onStateChanged(function(n){var r=n.state,i=n.stderrBuffer;if(r===L.api.State.Running){u=!0;return}u&&(s=i,t(),e())})}),i.onOutput(function(e){try{c.process(e)}catch(t){l||(l=t,N.Tb(t,function(t){return t.setExtra("chunk",e)}))}}),g.label=2;case 2:return g.trys.push([2,,5,6]),[4,i.request({args:["psql",n,"--csv","--command",t],splitStderr:!0})];case 3:return f=g.sent(),[4,d];case 4:return g.sent(),f.error&&!s&&(s=f.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(s)return[2,{columns:c.headers(),rows:a,error:s}];if(l)return p=l.message,[2,{columns:null!==(h=c.headers())&&void 0!==h?h:[],rows:a,error:p}];return[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:a,error:null}]}})}),function(e){return t.apply(this,arguments)})}}({container:e$,nixService:e3}),ta=(0,eH.Z)({container:e$}),{session:eQ,presence:e1,packager:e8,container:e$,fs:e0,runner:te,debuggest:e7,broadcast:tt,dotReplit:e2,nixService:e3,lspnix:tn,iotester:tr,git:ti,psql:to,userEvents:eK,replspaceApi:e6,toolchain:e4,ports:e9,secrets:ta});return null==tl||tl.span.end(),r(tc),function(){r(null),setTimeout(function(){tc.container.destroy()},500)}},[e]),n}(f=C||(C={})).CHANNEL_OPENED="CHANNEL_OPENED",f.EVENT_SENT="EVENT_SENT"},61891:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(75271);function o(e,t){var n=(0,r._)((0,i.useState)(null),2),o=n[0],a=n[1];return(0,i.useEffect)(function(){var n=!1;return e.readFile(t).then(function(e){n||a(e)}),function(){n=!0}},[e,t]),o}},7599:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},54108:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(25731).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},26151:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(86763),c=n.n(l),s=n(96082),u=n(84082),d=n(72106),f=n(73878),p=".git",h=n(37782),m=n(38242),g=n(7599),v=n(21262),y=n(71440);function b(){var e=(0,v._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,v._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var Z=(0,y.Ps)(b()),x=(0,y.Ps)(w(),Z);function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r._)(function(e){var t,n,r,i,o,l,c,s,d,f,p,h,v,y,b,w,Z,C,k,S,_,T;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===m.l||void 0===m.l?void 0:m.l.query({query:x,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var E,R;return p=(f=null!==(d=null==(s=(null!==(c=a.sent())&&void 0!==c?c:{data:null}).data)?void 0:s.currentUser)&&void 0!==d?d:{username:t,id:n,firstName:null,lastName:null}).id,h=f.firstName,v=f.lastName,y=f.username,p&&y&&(w=y,h&&(w=h),v&&(w=v),h&&v&&(w=h+" "+v),C={provider:u.rG.REPLIT_DEFAULT,email:"".concat(p,"-").concat(y,"@").concat(g.J),name:w,username:y,avatar:null!==(Z=null==s?void 0:null===(b=s.currentUser)||void 0===b?void 0:b.image)&&void 0!==Z?Z:null},l.set(C.provider,C)),(k=null==s?void 0:null===(o=s.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&k.email&&k.username&&(null==s?void 0:null===(R=s.currentUser)||void 0===R?void 0:null===(E=R.gitHubInfo)||void 0===E?void 0:E.isAppCurrentlyInstalled)&&(T={provider:u.rG.GITHUB,email:k.email,name:null!==(S=k.name)&&void 0!==S?S:k.username,username:k.username,avatar:null!==(_=k.avatarUrl)&&void 0!==_?_:null},l.set(T.provider,T)),r(l),[2]}})})).apply(this,arguments)}var S=n(12285),_=n(41733),T=n(25722),E=n(10777),R=function(){"use strict";function e(t,n){(0,S._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,i._)(o.value,2),c=l[0],s=l[1];s.pending?e.set(c,s):clearTimeout(s.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),D=n(54108),I=n(61932),B=n(25731);function A(){return(A=(0,r._)(function(e,t,n,r){var i,o,l,c,s,d,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:u.aq.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(c=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:n,args:t,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,c];case 2:if(void 0===(s=a.sent()))return E.kg.error("Git request timed out.",(0,_._)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:9e4},r)),[2,{output:i,error:u.aq.TIMEOUT}];if(!s.ok&&s.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:u.aq.CHANNEL_CLOSED}];if(s.error||!s.ok)return[2,{output:d="".concat(s.error,"\n").concat(i),error:(0,u.mB)(d)}];return[2,{output:i,error:null}];case 3:return f=a.sent(),T.$e(function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),T.Tb(f)}),[2,{output:"JS Error\n".concat(String(f)),error:u.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var P=function(){"use strict";function e(t){var n=t.container,i=t.getEnv,o=t.awaitPromise,l=this;(0,S._)(this,e),this.cache=new R(3e4,2e3),this.running=(0,B.u)(!1),this.queue=[],n.openChannel({service:"exec"},function(e){var t,n,c=e.channel,s=(t=(0,r._)(function(e,t){var n,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!o)return[3,2];return[4,o];case 1:a.sent(),a.label=2;case 2:return n=Date.now(),[4,function(e,t,n,r){return A.apply(this,arguments)}(c,["bash","-c",Array.isArray(e)?e.join(" && "):e],i(),t)];case 3:if(r=a.sent(),(0,D.J)(e,r,!1,n),r.error)return[2,r];return[2,{output:(null==t?void 0:t.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,n){return t.apply(this,arguments)}),u=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(l.cache.has(n)){var r=l.cache.get(n);return r.then(function(t){(0,D.J)(e,t,!0)}),r}var i=s(n,t);return l.cache.set(n,i),i},d=function(e,t){return l.cache.clear(),s(e,t)},f=(n=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(!(l.queue.length>0)||"open"!==c.status)return[3,7];if(!(e=l.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(s)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===l.queue.length&&l.running.set(!1),[2]}})}),function(){return n.apply(this,arguments)});return l.running.current&&f(),l.running.subscribe(function(e){e&&f()})})}var t=e.prototype;return t.add=function(e,t){var n,i=(0,I.Z)();return this.queue.push({type:t,fn:(n=(0,r._)(function(t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,e(t)];case 1:return n=r.sent(),i.resolve(n),[2]}})}),function(e){return n.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},t.wrap=function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.add(function(t){return e.apply(void 0,[t].concat((0,o._)(i)))},t)}},e}();function G(e){var t,n=e.container,l=e.fs,m=e.provideProfiles,g=void 0===m?C:m,v=(0,s.ZP)();v.setMaxListeners(1/0);var y=(0,u.Ch)(),b=!1,w=new Map,Z=null,x=n.getContext(),k=(t=(0,r._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,g({defaultUsername:null==x?void 0:null===(t=x.currentUser)||void 0===t?void 0:t.username,defaultUserId:null==x?void 0:null===(n=x.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],d=c[1];w.set(s,d),v.emit(u.dq.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}t.has(u.rG.GITHUB)||w.delete(u.rG.GITHUB);var f=w.get(u.rG.REPLIT_DEFAULT),p=w.get(u.rG.GITHUB);if(Z&&!e&&(e=Z.provider),e===u.rG.GITHUB&&p)Z=p;else{if(!f)return;Z=f}v.emit(u.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return t.apply(this,arguments)}),S=new P({container:n,getEnv:function(){return y},awaitPromise:k(u.rG.GITHUB)});v.on(u.dq.FS_CHANGE,function(){return S.cache.invalidate()}),v.on(u.dq.FORCED_REFRESH,function(){return S.cache.invalidate()}),v.on(u.dq.NEW_PROFILE,function(){return S.cache.invalidate()}),v.on(u.dq.CHANGED_PROFILE,function(){return S.cache.invalidate()});var _=function(){var e,t=n.getContext(),r=null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==y.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(y.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==y.GIT_AUTHOR_NAME&&(i+="name = ".concat(y.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&n.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return n.onConnectionStateChanged(function(e){e===h.em.CONNECTED&&_()}),v.on(u.dq.CHANGED_PROFILE,function(){null!=Z&&(y=(0,u.Ch)({author:{username:Z.name,email:Z.email}}),_())}),{getEnv:function(){return y},getProfiles:function(){return Array.from(w.values())},hasProfile:function(e){return w.has(e)},getProfile:function(e){var t=w.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){w.set(e.provider,e),v.emit(u.dq.NEW_PROFILE)},getCurrentProfile:function(){return Z},setCurrentProfile:function(e){var t=w.get(e);if(!t)throw Error("Can't set a non-existent profile!");Z=t,y=(0,u.Ch)({author:{username:t.name,email:t.email}}),v.emit(u.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(w.values()))};return v.on(u.dq.NEW_PROFILE,t),function(){v.off(u.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(Z)};return v.on(u.dq.CHANGED_PROFILE,t),function(){v.off(u.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return k(e)},onRefresh:function(e){b||(function(e,t,n){var i,l,s,h,m,g,v,y,b,w,Z=!1,x=!1,C=(i=function(){return n.emit(u.dq.FS_CHANGE)},h=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,m=l.cooldown,g=l.maxWait,v=null,y=!1,b=c()(function(e){return v=setTimeout(function(){return v=null},m),y=!1,s=i.apply(void 0,(0,o._)(e))},h,{maxWait:g}),(w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==v?s:(y||(y=!0),b(t))}).cancel=function(){null!==v?(clearTimeout(v),v=null):(b.cancel(),y=!1)},w.flush=function(){return null!==v?(clearTimeout(v),v=null,s):b.flush()},w.isPending=function(){return y},w.isInCooldown=function(){return null!==v},w);function k(){return(k=(0,r._)(function(){var n;return(0,a.Jh)(this,function(r){return n=!0,t.watchDir(d.Ql,{onChange:function(r){!Z&&r.find(function(e){return e.filename===p&&e.type===f.Tv.Directory})&&(function(){if(!Z){Z=!0;var n=!0;t.watchDir(p,{onChange:function(){n?n=!1:C()},onMoveOrDelete:function(){Z=!1,C()},onError:function(t,n){Z=!1,RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}}(),n||C()),n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]})})).apply(this,arguments)}(function(){k.apply(this,arguments)})(),t.onStatusChange(function(e){Z&&(e===f.kO.Syncing&&C.isInCooldown()?x=!0:e===f.kO.Clean&&(x||C(),x=!1))})}(n,l,v),b=!0);var t=function(){return e(u.dq.FS_CHANGE)},i=function(){return e(u.dq.FORCED_REFRESH)},s=function(){return e(u.dq.NEW_PROFILE)},h=function(){return e(u.dq.CHANGED_PROFILE)};return v.on(u.dq.FS_CHANGE,t),v.on(u.dq.FORCED_REFRESH,i),v.on(u.dq.NEW_PROFILE,s),v.on(u.dq.CHANGED_PROFILE,h),function(){v.off(u.dq.FS_CHANGE,t),v.off(u.dq.FORCED_REFRESH,i),v.off(u.dq.NEW_PROFILE,s),v.off(u.dq.CHANGED_PROFILE,h)}},forceRefresh:function(){v.emit(u.dq.FORCED_REFRESH)},isBusy:function(){return S.running.current},onBusyChange:function(e){var t=!1,n=c()(e,200);return S.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:S.wrap(u.It,"write"),isInitialized:S.wrap(u.xT,"read"),lsFiles:S.wrap(u.TF,"read"),status:S.wrap(u.JC,"read"),log:S.wrap(u.qu,"read"),findDefaultBranches:S.wrap(u.P,"read"),listBranches:S.wrap(u.jz,"read"),setBranchUpstream:S.wrap(u.c1,"write"),stageFiles:S.wrap(u.Ni,"write"),commit:S.wrap(u.kZ,"write"),switchBranch:S.wrap(u.wc,"write"),branchExists:S.wrap(u.eo,"read"),createBranch:S.wrap(u.ZR,"write"),getRemotes:S.wrap(u.rp,"read"),fetch:S.wrap(u.y1,"write"),canMergeBranches:S.wrap(u.QD,"read"),pull:S.wrap(u.Ly,"write"),push:S.wrap(u.nC,"write"),getRepositoryState:S.wrap(u.Vk,"read"),getFileContents:S.wrap(u.E,"read"),addRemote:S.wrap(u.JE,"write"),removeRemote:S.wrap(u.l6,"write"),setRemoteURL:S.wrap(u.AU,"write"),getBranch:S.wrap(u.Kt,"read"),restoreFiles:S.wrap(u.Vj,"write"),lastFetched:S.wrap(u.Tq,"read"),merge:S.wrap(u.nK,"write"),mergeContinue:S.wrap(u.VH,"write"),mergeAbort:S.wrap(u.Fj,"write"),getConflictingFiles:S.wrap(u.Qg,"read"),getMergingRefs:S.wrap(u.xD,"read"),getFilesForCommit:S.wrap(u.Mh,"read"),getCommit:S.wrap(u.a1,"read"),restoreCommit:S.wrap(u._D,"write"),escapeHatchGitExecRead:S.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"read"),escapeHatchGitExecWrite:S.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"write")}}},64566:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(63257),o=n(52657),a=n(83059),l=n(84082),c=n(23882),s=n(81202),u=n.n(s),d=n(75271);function f(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=(0,r._)((0,d.useState)(null),2),h=p[0],m=p[1],g=(0,o.Z)(h),v=null===(n=null!==(t=f.keepStaleResult)&&void 0!==t?t:f.refresh)||void 0===n||n,y=(0,d.useCallback)(function(e){u()(e,g.current)||m(e)},[g]),b=(0,a.Z)(function(){return e},(0,i._)(s)),w=(0,c.Z)().git,Z=(0,d.useRef)(null),x=(0,d.useCallback)(function(){Z.current?Z.current():v||y(null);var e=!1;b(w).then(function(t){e||(y(t),Z.current=null)}).catch(function(){e||(y({error:l.aq.UNKNOWN}),Z.current=null)}),Z.current=function(){e=!0,Z.current=null,v||y(null)}},[y,b,w,v]);return(0,d.useEffect)(function(){return x()},[x]),(0,d.useEffect)(function(){var e;if(null===(e=f.refresh)||void 0===e||e)return w.onRefresh(x)},[w,x,f.refresh]),h}},80273:function(e,t,n){n.d(t,{ho:function(){return o},ib:function(){return l},rN:function(){return i},uH:function(){return a}});var r=n(7225),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,t){var n=e.tokenTypes[t];return n&&i.includes(n)?n:null}function l(e,t){for(var n=[],r=0;r<e.tokenModifiers.length;r++)if(t&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&n.push(i)}return n}},89441:function(e,t,n){var r=n(7225);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},51638:function(e,t,n){var r,i,o,a;n.d(t,{N:function(){return r},a:function(){return i}}),(o=r||(r={})).NOT_READY="NOT_READY",o.READY="READY",o.STALLED="STALLED",o.BROKEN="BROKEN",(a=i||(i={})).OFFLINE="OFFLINE",a.INITIALIZING="INITIALIZING",a.INITIALIZED="INITIALIZED",a.EXITING="EXITING",a.EXITED="EXITED"},11208:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(66626),i=n(16155),o=n(23882),a=n(75271),l=n(41733),c=n(30509),s=n(10777),u=n(16783),d=n.n(u),f=n(76773),p=n(51638);function h(e){return Math.floor(performance.now()-e.startTime)}var m=new WeakSet,g=n(27030);function v(e){var t=(0,i.Z)(),n=(0,o.Z)().lspnix,u=(0,r._)((0,a.useState)([]),2),v=u[0],y=u[1],b=(0,g.k)();return(0,a.useEffect)(function(){if(e){var t=n.onClient(e,y);return function(){t(),y([])}}},[n,e]),(0,a.useEffect)(function(){return(0,f.uf)(v.map(function(n){return function(e){var t=e.client,n=e.replId,r=e.language,i=e.debug;if(!m.has(t)){m.add(t);var o=new Map,a=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===p.a.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},u=d()(function(e,t){var n=h(t);n>1e4&&s.kg.time("LSP unresponsive request",n,a(t))}),g=setInterval(function(){o.forEach(function(e){u(e.id,e)})},2e3);return(0,f.uf)([t.onRequest(function(e){var t=e.id,n=e.data;(i||.01>Math.random())&&o.set(t,{id:t,method:n.method,startTime:performance.now()})}),t.onResponse(function(e){var t=e.id,n=e.error,r=o.get(t);null!=r&&(o.delete(t),s.kg.time("LSP request",h(r),(0,c._)((0,l._)({},a(r)),{result:null==n?"ok":"error"})))}),t.onCancelRequest(function(e){var t=o.get(e);null!=t&&(o.delete(e),s.kg.time("LSP request",h(t),(0,c._)((0,l._)({},a(t)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return m.delete(t)}])}}({client:n,replId:t,language:n.getLanguageId(e),debug:b})}))},[v,t,e,b]),v}},2309:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(75271),o=n(23469),a=n(76773);function l(e){var t=(0,r._)((0,i.useState)(null),2),n=t[0],l=t[1];return(0,i.useEffect)(function(){var t=function(){l((0,o.H)(e.map(function(e){return(0,o.Z)(e)})))};return t(),(0,a.uf)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return t()})}))},[e]),n}},70145:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return Z},TE:function(){return T},UK:function(){return b},VZ:function(){return x}});var r,i,o=n(27387),a=n(41733),l=n(30509),c=n(63257),s=n(96583),u=n(25722),d=n(41974),f=n(86763),p=n.n(f),h=n(66791),m=n(25731),g=n(57997),v=n(81202),y=n.n(v),b=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function Z(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.Z)(t)}}function x(e){var t;return null!==(t=e.isLocalhost)&&void 0!==t&&t}function C(e){return e===g.Y8}function k(e){return C(e.localPort)}function S(e){return e?w(b,new Set(e.map(function(e){return Z(e.configuration)}))):b}function _(e){var t=e.localPort,n=S(e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function T(e){var t=e.container,n=e.dotReplit,r=(0,m.u)(null),i=(0,m.u)(!1),f=(0,m.u)("only-global"),g=p()((0,o._)(function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:if(!r.current)return[2];return e=r.current.filter(function(e){return!e.isTemporary}).map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,a._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},x(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort}),[4,n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return t.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function v(){i.set(!0),g()}return!function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,s=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var p=[];function h(e){try{var t=function(e){var t=e.portsState,n=e.portInfo,r=e.forwardPortsAutomatically;if(null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var i={pid:n.pid,cgroup:n.cgroup,address:n.address,cmdline:n.cmdline},o="127.0.0.1"===i.address,c=n.isVnc,s=t.current.find(function(e){return e.configuration.localPort===n.port});if(void 0!==s)return{isOpen:!0,isTemporary:!!c||s.isTemporary,processInfo:i,configuration:(0,l._)((0,a._)({},s.configuration),{isLocalhost:o})};if("none"===r.current||"only-global"===r.current&&o||c)return{isOpen:!0,isTemporary:!0,processInfo:i,configuration:{type:"INTERNAL_ONLY",localPort:n.port,isLocalhost:o,isVnc:c}};var u=_({localPort:n.port,portsState:t});return void 0===u?{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:n.port,isLocalhost:o,isVnc:c}}:{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"FORWARDED",localPort:n.port,externalPort:u,isLocalhost:o,isVnc:c}}}({portsState:r,portInfo:e,forwardPortsAutomatically:s}),n=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.Uy)(r,function(i){var o=i.findIndex(function(t){return t.configuration.localPort===e.port});return -1===o?(o=r.length,n=!0):y()(r[o].configuration,t.configuration)||(n=!0),i[o]=t,f(i)})}),n&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}function m(e){try{var t=!1;r.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.Uy)(n,function(n){var r,i=n.findIndex(function(t){return t.configuration.localPort===e.port});if(-1!==i){var o=n[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(n.splice(i,1),t=!0):o.isOpen=!1}})}),t&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?p.push({type:"portOpen",portInfo:e}):h(e)}),t.onPortClosed(function(e){null===r.current?p.push({type:"portClose",portInfo:e}):m(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=Z(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=w(t,n),s=(m=new Set((0,c._)(Array.from(t)).concat((0,c._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return m.has(e)}))),u=[],d=!0,p=!1,h=void 0;try{for(var m,g,v=s[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)!function(){var t=g.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return u.push((0,l._)((0,a._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:S(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)},u.push((0,l._)((0,a._)({},n),{configuration:o}))}()}catch(e){p=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw h}}var y=!0,b=!1,Z=void 0;try{for(var _,T=o[Symbol.iterator]();!(y=(_=T.next()).done);y=!0)!function(){var e,t=_.value,n=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var o,a=S(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:a?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!==(o=n.exposeLocalhost)&&void 0!==o&&o,isVnc:C(t)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!==(e=n.exposeLocalhost)&&void 0!==e&&e,isVnc:C(t)}})}()}catch(e){b=!0,Z=e}finally{try{y||null==T.return||T.return()}finally{if(b)throw Z}}return f(u)}),p.length>0&&(p.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?h(n):"portClose"===t&&m(n)}),p=[])})}({container:t,dotReplit:n,portsState:r,writeDotReplitPortsConfig:v,isThisServiceUpdatingDotReplit:i,forwardPortsAutomatically:f}),{tryExposingPortAutomatically:function(e){var t=_({localPort:e,portsState:r});void 0!==t&&(r.update((0,d.Uy)(function(n){if(n){var r=n.find(function(t){return t.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:r.configuration.isLocalhost,isVnc:C(e)})}})),v())},updateDotReplitPortsMapping:function(e,t,n){r.update((0,d.Uy)(function(r){var i,o=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),a=n;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:a,isVnc:C(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:C(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),v()},removeDotReplitPortsMapping:function(e,t){r.update((0,d.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),v()},portsState:r,setForwardPortsAutomatically:function(e){f.set(e)}}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},12666:function(e,t,n){n.d(t,{bg:function(){return l},dF:function(){return s},r4:function(){return u},vU:function(){return c}});var r=n(54129),i=n(23882),o=n(75271),a=n(70145);function l(e){var t=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t?t.filter(function(e){return e.isOpen&&e.configuration.type===a.DL.FORWARDED}):[]},[t])}function c(e){var t=(0,i.Z)().ports,n=(0,r.Z)(t.portsState);return(0,o.useMemo)(function(){if(n)return n.find(function(t){return t.configuration.type===a.DL.FORWARDED&&t.configuration.externalPort===e})},[n,e])}function s(e){return u((0,i.Z)().ports,e)}function u(e,t){var n=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t&&n?n.filter(function(e){var n;return null!==(n=e.isOpen&&(null==t?void 0:t.endsWith(e.processInfo.cgroup)))&&void 0!==n&&n}):[]},[n,t])}},93696:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(23882),o=n(75271);function a(){var e=(0,i.Z)().presence,t=(0,r._)((0,o.useState)(e.getFollowedUser()),2),n=t[0],a=t[1];return(0,o.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),n}},88397:function(e,t,n){n.d(t,{ZP:function(){return Z},Bi:function(){return v}});var r=n(27387),i=n(96583),o=n(10777),a=n(38242),l=n(96949),c=n(21262);function s(){var e=(0,c._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u=(0,n(71440).Ps)(s()),d=n(47892),f=n(29043),p=n(74044),h=p.Dy.Object({id:p.Dy.String(),user_id:p.Dy.Number(),ssh_hostname:p.Dy.String(),token:p.Dy.String()}),m=n(99149),g=["http:","https:","vscode:"];function v(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return t=e.replId,[4,(0,f.Zc)(function(){return(0,d.uz)("/data/repls/".concat(t,"/get_ssh_token"))})];case 1:if((n=r.sent()).error)return[2,{type:"error",message:n.error.toString()}];if(!m.B4.Check(h,n.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:n.value}]}})})).apply(this,arguments)}function b(){return(b=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!a.l)throw Error("Expected apollo");return[4,a.l.query({query:u})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function w(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function Z(e){var t=e.container,n=e.fs,a=e.openMultipleFiles,c=e.openMultipleURLs,s=e.enableReplspaceSshTokenPassthrough,u=new Set,d=!1,f=null;return t.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls.flatMap(function(e){var t;try{t=new URL(e)}catch(e){return[]}return g.includes(t.protocol)?[t]:[]});a&&n.length>0&&(w(),a({paths:n})),c&&r.length>0&&(w(),c({urls:r.map(function(e){return e.toString()})}))}})}),t.openChannel({service:"git",name:"git"},function(e){var t,l=e.channel;return l.onCommand((t=(0,r._)(function(e){var t,r,c,s,p,h,m,g,v,y,Z,x,C,k,S,_;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(t=e.replspaceApiOpenFile).file,c=t.waitForClose,s=t.nonce,a)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return c&&l.send({replspaceApiCloseFile:{file:r,nonce:s}}),window.alert("tried to open ".concat(r," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,n.writeFile(r,null!=p?p:"")];case 2:if(i.sent(),!c)return[2];return[3,5];case 3:if(w(),a({paths:[r]}),!c||!f)return[2];return[4,f(r)];case 4:i.sent(),i.label=5;case 5:return[4,n.flush()];case 6:if(i.sent(),"open"!==l.status)return[2];return l.send({replspaceApiCloseFile:{file:r,nonce:s}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var t;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:"",nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},[4,function(){return b.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return h(),[2];if(!u.size)return h(),o.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(g=function(){var t,n;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:null===(t=m.gitHubInfo)||void 0===t?void 0:t.accessToken,nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},d)return g(),[2];v=!1,y=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=u[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},Z=!0,x=!1,C=void 0;try{for(k=u[Symbol.iterator]();!(Z=(S=k.next()).done)&&(_=S.value,!v);Z=!0)_(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!v){if(v=!0,!e){h(),y();return}t&&(d=e),g(),y()}})}catch(e){x=!0,C=e}finally{try{Z||null==k.return||k.return()}finally{if(x)throw C}}i.label=9;case 9:return[2]}})}),function(e){return t.apply(this,arguments)})),function(){}}),t.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var n,r;(0,l.j)(l.U3.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(r=t.getContext())||void 0===r?void 0:null===(n=r.repl)||void 0===n?void 0:n.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==s&&s&&t.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var t,n=e.channel;n.onCommand((t=(0,r._)(function(e){var t,r,a,l,c,s;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(t=e.replspaceApiSSHTokenGetRequest).nonce,a=t.replid,l=function(e){"open"===n.status&&n.send({replspaceApiSSHTokenGetResponse:e})},c=function(){l({token:"",nonce:r})},[4,v({replId:a})];case 1:if(s=i.sent(),"open"!==n.status)return[2];if("error"===s.type)return c(),o.kg.error(s.message),[2];return l({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return t.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return u.add(t),function(){u.delete(t)}},setWaitForFileClose:function(e){f=e}}}},27069:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(62764),o=n(75271),a=n(23882);function l(){var e=(0,a.Z)().toolchain,t=(0,r._)((0,o.useState)(null),2),n=t[0],l=t[1];return(0,o.useEffect)(function(){var t=!1;return e.getRegistry().then(function(e){t||l(e)}).catch(function(e){i.kg.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){t=!0}},[e]),n}},73660:function(e,t,n){n.d(t,{K:function(){return c}});var r=n(41733),i=n(14118),o=n(75271),a=n(23882),l=n(52657);function c(e){var t=(0,a.Z)().userEvents,n=(0,i.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),c=(0,l.Z)(e);return(0,o.useCallback)(function(e,i){n&&t.emit(e,(0,r._)({},c.current,i))},[t,c,n])}},41520:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(3796),i=n(39031),o=n(27840),a=n(22893),l=n(14548),c=n(24766),s=n(93245),u=n(79904),d=n(46142),f=n(36809),p=n(63163),h=n(46867),m=(0,f.X)({connectHeader:[p.l0.colWithGap(4)],connectButtonRow:[p.l0.flex.rowReverse],sshConfigDialog:[p.l0.colWithGap(12)]});function g(e){var t=e.onConfirm,n=(0,h.Z)(),f="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(n,"/.ssh/replit");return(0,r.BX)(l.Tg,{css:m.sshConfigDialog,children:[(0,r.BX)(s.G,{css:m.connectHeader,children:[(0,r.tZ)(c.h4,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.BX)(c.xv,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",n,"/.ssh/config"]})]}),(0,r.tZ)(d.Z,{code:f,header:".ssh/config",multiline:!0}),(0,r.tZ)(a.E,{text:"You can find this information later in the SSH docs",icon:(0,r.tZ)(i.Z,{})}),(0,r.tZ)(s.G,{css:m.connectButtonRow,children:(0,r.tZ)(u.zx,{text:"I updated my config",iconLeft:(0,r.tZ)(o.Z,{}),onClick:t,colorway:"primary",stretch:!1})})]})}},30582:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(43540),o=n(75271),a=n(23882),l=n(56729);function c(){var e=(0,r._)((0,o.useState)(!1),2),t=e[0],n=e[1],c=function(){var e,t,n,i,c=(0,l.Z)(),s=(e=(0,a.Z)().container,n=(t=(0,r._)((0,o.useState)("/home/runner"),2))[0],i=t[1],(0,o.useEffect)(function(){e.exec("pwd").then(function(e){var t;e.output&&i((null===(t=e.output)||void 0===t?void 0:t.replace("\n",""))||"")})},[e]),n);if(!c)return"vscode://vscode-remote/ssh-remote";var u=c.sshUser,d=c.sshHostname,f=c.sshPort,p="vscode://vscode-remote/ssh-remote+".concat(u,"@").concat(d,":").concat(f).concat(s);try{return window.encodeURI(p)}catch(e){return p}}(),s=(0,i.Z)("ssh","workspace-ssh-connect-to-vscode-config-tour"),u=s.register;return(0,o.useEffect)(function(){u()},[u]),{openInVSCode:(0,o.useCallback)(function(){if(s.shouldDisplay){n(!0);return}window.location.href=c},[s.shouldDisplay,c]),onConfirmConfig:(0,o.useCallback)(function(){n(!1),s.dismiss(),window.location.href=c},[s,c]),isConfigModalOpen:t,closeConfigModal:(0,o.useCallback)(function(){n(!1)},[])}}},56729:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(16155),i=n(77537),o=n(23882);function a(){var e=(0,o.Z)().container,t=(0,r.Z)(),n=(0,i.Z)(e,{fallbackToReplCo:!1});if(!n)return null;var a=new URL(n).host,l=a.indexOf(":"),c="22";return -1!==l&&(a=a.substring(0,l),c="2022"),{sshUser:t,sshHostname:a,sshPort:c}}},54698:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(3796),i=n(62279);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},1711:function(e,t,n){n.d(t,{w:function(){return p}});var r=n(41733),i=n(66626),o=n(3796),a=n(62279),l=n(37862),c=n(63163),s=n(30826),u=n.n(s),d=n(75271),f=n(30967);function p(e){var t=e.targetElement,n=e.transparent,s=(0,i._)((0,d.useState)(null),2),p=s[0],m=s[1],g=(0,l.Z)(function(){t&&m({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});if((0,d.useEffect)(function(){t&&g(t)},[t,g]),(0,d.useEffect)(function(){if(t){var e=u()(function(){m({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[t]),!p||!t)return null;var v=(0,a.iv)({backgroundColor:n?"transparent":c.TV.backgroundOverlay,zIndex:c.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,f.createPortal)((0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{id:"wat",css:[h((0,r._)({side:"left-top"},p)),v]}),(0,o.tZ)("div",{css:[h((0,r._)({side:"top-right"},p)),v]}),(0,o.tZ)("div",{css:[h((0,r._)({side:"right-bottom"},p)),v]}),(0,o.tZ)("div",{css:[h((0,r._)({side:"bottom-left"},p)),v]})]}),document.body)}function h(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,a.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,a.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,a.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,a.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},33718:function(e,t,n){n.d(t,{k:function(){return g}});var r=n(41733),i=n(30509),o=n(66626),a=n(3796),l=n(84238),c=n(37862),s=n(68220),u=n(22419),d=n(76733),f=n(63163),p=n(75271),h=n(30967),m=n(96751);function g(e){var t=e.targetElement,n=e.activeStep,g=e.goto,v=e.currentStepIndex,y=e.totalSteps,b=e.done,w=e.disableAnimation,Z=e.placement,x=e.cypressCloseData,C=e.onClickOutside,k=e.innerRef,S=e.width,_=(0,o._)((0,p.useState)(null),2),T=_[0],E=_[1],R=(0,o._)((0,p.useState)(null),2),D=R[0],I=R[1],B=(0,m.D)(t,T,{placement:void 0===Z?"right":Z,modifiers:[{name:"arrow",options:{element:D,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),A=(0,c.Z)(function(){var e;null===(e=B.update)||void 0===e||e.call(B)},{type:"throttle",wait:100});(0,p.useEffect)(function(){A(t)},[t,A]),(0,p.useImperativeHandle)(k,function(){return{updateTooltip:function(){var e;null===(e=B.update)||void 0===e||e.call(B)}}});var P=(0,l.Z)(function(){C&&C()},[C]);return(0,h.createPortal)((0,a.BX)("div",(0,i._)((0,r._)({ref:function(e){P.current=e,E(e)},style:B.styles.popper,css:{transition:w?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:null!=S?S:320}},B.attributes.popper),{children:[(0,a.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){b()},currentStepIndex:v,onCurrentStepChange:g,totalSteps:y,cypressCloseData:void 0===x?"tour-tooltip-close-button":x}),(0,a.tZ)("span",{style:B.styles.arrow,css:[u.wk,{"&::after":{backgroundColor:s.Br.primary.dimmest,border:"1px solid "+s.Br.primary.dimmer}}],ref:I})]})),document.body)}},49205:function(e,t,n){n.d(t,{$2:function(){return M},Do:function(){return O},Sr:function(){return U},e$:function(){return L},rk:function(){return X}});var r=n(66626),i=n(3796),o=n(75271),a=n(49853),l=n(80786),c=n(99978),s=n(52657),u=n(1711),d=n(33718),f=n(58532),p=n(76733),h=n(49500),m=(0,o.createContext)(void 0),g=m.Provider,v=(0,a.cn)(null),y=function(e){var t=e.activeTourId,n=e.activeStepId;return"".concat(t,":").concat(n)},b=(0,a.cn)(new Map),w=(0,a.cn)(function(e){return!e(I)&&!e(R)}),Z=(0,a.cn)(function(e){var t,n,r=e(D);return r&&null!==(n=null===(t=e(v))||void 0===t?void 0:t.steps.find(function(e){return e.id===r}))&&void 0!==n?n:null}),x=(0,a.cn)(function(e){var t=e(Z);return(null==t?void 0:t.isModal)?t:null}),C=(0,a.cn)(function(e){var t,n=e(D);if(!n)return -1;var r=e(v);return null!==(t=null==r?void 0:r.steps.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),k=(0,a.cn)(function(e){var t,n=null===(t=e(v))||void 0===t?void 0:t.id,r=e(D);return r&&n?e(b).get(y({activeTourId:n,activeStepId:r})):null}),S=(0,a.cn)(function(e){var t=e(v),n=e(b);return null==t?void 0:t.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!n.get(y({activeTourId:t.id,activeStepId:e.id}))})}),_=(0,a.cn)(function(e){var t,n=e(D);if(!n)return -1;var r=e(S);return null!==(t=null==r?void 0:r.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),T=(0,a.cn)(function(e){var t,n;return null!==(n=null===(t=e(S))||void 0===t?void 0:t.length)&&void 0!==n?n:0}),E=(0,a.cn)(null,function(e,t,n,r,i){t(b,function(e){var t=new Map(e);return i?t.set(y({activeTourId:n,activeStepId:r}),i):t.delete(y({activeTourId:n,activeStepId:r})),t})}),R=(0,a.cn)(!1),D=(0,a.cn)(null),I=(0,a.cn)(!1),B=(0,a.cn)(function(e){return e(v)&&!e(R)&&!e(I)}),A=(0,a.cn)(null,function(e,t,n){var r,i=e(v);if(!(!i||(r="number"==typeof n?n:i.steps.findIndex(function(e){return n===e.id}))<0||r>=i.steps.length)){for(var o=e(C),a=e(b),l=i.steps[r],c=r<o;!a.get(y({activeTourId:i.id,activeStepId:l.id}))&&l.autoSkipIfNoTarget;){if((r=c?r-1:r+1)<0||r>=i.steps.length)return;l=i.steps[r]}t(D,l.id)}}),P=(0,a.cn)(null,function(e,t){var n=e(v);if(n){var r=e(C),i=e(b),o=n.steps[r+1];if(o&&o.autoSkipIfNoTarget)for(var a=r+1;o&&o.autoSkipIfNoTarget&&!i.get(y({activeTourId:n.id,activeStepId:o.id}));)a++,o=n.steps[a];if(!o){t(I,!0);return}t(D,o.id)}}),G=(0,a.cn)(null,function(e,t){t(A,0),t(I,!1)});function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,o.useContext)(m),i=(0,o.useMemo)(function(){return(0,a.cn)(function(e){return!(e(R)||e(I))&&t===e(D)})},[t]),c=(0,l.b9)(P,{store:r}),u=(0,l.b9)(A,{store:r}),d=O(e,t),f=(0,l.Dv)(i,{store:r}),p=(0,o.useRef)(f),h=(0,s.Z)(n.onEnter),g=(0,s.Z)(n.onExit);return(0,o.useEffect)(function(){if(f){var e;null===(e=h.current)||void 0===e||e.call(h)}},[f,h]),(0,o.useEffect)(function(){if(p.current&&!f){var e;null===(e=g.current)||void 0===e||e.call(g)}p.current=f},[f,g]),{isActive:f,tourRef:d,next:c,goto:u}}var N=function(){};function O(e,t){var n=(0,o.useContext)(m),r=(0,l.b9)(E,{store:n}),i=(0,o.useCallback)(function(n){r(e,t,n)},[e,r,t]);return n?i:N}function U(){var e=(0,o.useContext)(m),t=(0,l.Dv)(B,{store:e});return e&&t}function M(){var e=(0,o.useContext)(m),t=(0,l.Dv)(Z,{store:e});return e?t:null}function X(e){var t,n=e.children,f=e.tour,p=e.onStep,m=e.onDone,y=(0,r._)((0,o.useState)(function(){var e;return(e=(0,a.MT)()).set(v,f),e.set(D,f.steps[0].id),e}),1)[0],b=(0,l.Dv)(Z,{store:y}),x=(0,l.Dv)(C,{store:y});if(-1===x)throw Error("Current tour step is not in tour steps");var S=(0,r._)((0,c.oe)({variables:{name:f.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:f.id,seen:!0}}}),1)[0],E=(0,l.b9)(I,{store:y}),B=(0,o.useRef)();(0,o.useEffect)(function(){B.current=b},[b]);var P=(0,l.b9)(A,{store:y}),L=(0,l.Dv)(k,{store:y}),N=(0,l.Dv)(w,{store:y}),O=(0,l.b9)(G,{store:y});window.startTour=function(){h.log("starting tour:",f.id,"from",f.steps[0].id),O()};var U=(0,l.Dv)(_,{store:y}),M=(0,l.Dv)(T,{store:y}),X=(0,s.Z)(p),W=(0,s.Z)(m);(0,o.useEffect)(function(){return y.sub(D,function(){var e,t=y.get(D);t&&(null===(e=X.current)||void 0===e||e.call(X,t))})},[y,X,W]);var V=(0,o.useRef)(!1);(0,o.useEffect)(function(){var e;!V.current&&b&&b.id===f.steps[0].id&&(null===(e=X.current)||void 0===e||e.call(X,b.id),V.current=!0)},[b,X,f]),(0,o.useEffect)(function(){return y.sub(I,function(){var e,t=y.get(I),n=y.get(D);t&&(n&&(null===(e=W.current)||void 0===e||e.call(W,n)),S())})},[y,S,W]);var H=(0,c.Pp)({variables:{tours:f.id},onCompleted:function(e){var t;y.set(I,!!(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:t.toursSeen[0].seen))}}).loading,z=(0,l.b9)(R,{store:y});return((0,o.useEffect)(function(){z(H)},[z,H]),N&&b)?b.isModal?(0,i.BX)(g,{value:y,children:[(0,i.tZ)(F,{}),n]}):(0,i.BX)(g,{value:y,children:[L?(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.w,{targetElement:L,transparent:b.hideOverlay}),!b.hideTooltip&&(0,i.tZ)(d.k,{targetElement:L,activeStep:b,currentStepIndex:U,done:function(){return E(!0)},goto:function(e){P(e+x-U)},totalSteps:M,disableAnimation:0===x||!!(null===(t=B.current)||void 0===t?void 0:t.isModal)})]}):null,n]}):(0,i.tZ)(g,{value:y,children:n})}function F(){var e=function(){var e=(0,o.useContext)(m);if(!e)throw Error("useTourModal must be used within a TourRoot");var t=(0,l.Dv)(x,{store:e}),n=(0,l.b9)(A,{store:e}),r=(0,l.Dv)(C,{store:e}),i=(0,l.Dv)(T,{store:e}),a=(0,l.b9)(I,{store:e});return{activeStep:t,totalSteps:i,goto:n,currentStepIndex:r,done:(0,o.useCallback)(function(){return a(!0)},[a])}}();if(!e.activeStep)return null;var t=e.activeStep,n=e.goto,r=e.totalSteps,a=e.currentStepIndex,c=e.done;return(0,i.tZ)(f.u,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,i.tZ)(p.O,{title:t.title,content:t.content,onDismiss:function(){c()},currentStepIndex:a,onCurrentStepChange:n,totalSteps:r,cypressCloseData:"tour-tooltip-close-button"})})}},68307:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).FileNode="FILE_NODE",i.FileHeaderTab="FILE_HEADER_TAB",i.Code="CODE",i.Pane="PANE",i.NewPane="NEW_PANE"},55621:function(e,t,n){var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(3796),c=n(75333),s=n.n(c),u=n(97754),d=n.n(u),f=n(44594);n(75271),t.Z=function(e){var t,n=e.level,c=e.fontFamily,u=void 0===c?"sans-serif":c,p=e.fontWeight,h=void 0===p?"medium":p,m=e.foreground,g=void 0===m?1:m,v=e.align,y=void 0===v?"left":v,b=e.truncate,w=e.className,Z=void 0===w?"":w,x=e.children,C=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,l.BX)("h".concat(n),(0,o._)((0,i._)({},C),{className:s().dynamic([["e5be6eb40aa527b5",[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[h],f.Z.foreground[g],y]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==b&&b),t))||""),children:[x,(0,l.tZ)(s(),{id:"e5be6eb40aa527b5",dynamic:[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[h],f.Z.foreground[g],y],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(f.Z.levels[n],";font-family:").concat(f.Z.fontFamily[u],";font-weight:").concat(f.Z.fontWeight[h],";color:").concat(f.Z.foreground[g],";text-align:").concat(y,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},92234:function(e,t,n){var r=n(3796),i=n(75333),o=n.n(i),a=n(97754),l=n.n(a),c=n(31089);n(75271),t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.id,a=e.elevation,s=void 0===a?"higher":a,u=e.isOn,d=e.onIcon,f=e.offIcon,p=e.onChange,h=e.dataCy,m=(0,c.U)(),g=null!=i?i:m(n);return(0,r.BX)("label",{"data-cy":h,htmlFor:g,className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" "+(l()("toggle-label",{isOn:u})||""),children:[(0,r.tZ)("input",{name:n,checked:u,onChange:p,id:g,type:"checkbox",className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-checkbox"}),(0,r.tZ)("span",{className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-button",children:u&&d?d:f||null}),(0,r.tZ)(o(),{id:"8d56ad7b5afff72c",dynamic:[s],children:".toggle-checkbox.__jsx-style-dynamic-selector{height:0;width:0;visibility:hidden}.toggle-label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-".concat(s,');border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.__jsx-style-dynamic-selector{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.__jsx-style-dynamic-selector:checked+.toggle-button.__jsx-style-dynamic-selector{-webkit-transform:translatex(-webkit-calc(100% - 6px));-moz-transform:translatex(-moz-calc(100% - 6px));-ms-transform:translatex(calc(100% - 6px));-o-transform:translatex(calc(100% - 6px));transform:translatex(-webkit-calc(100% - 6px));transform:translatex(-moz-calc(100% - 6px));transform:translatex(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.__jsx-style-dynamic-selector:active .toggle-button.__jsx-style-dynamic-selector{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}')})]})}},24810:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(42965),i=n(97687),o=n(11409),a=n(7391),l=n(75271),c=n(66791);function s(e){var t=e.sendInput,n=e.paste,s=(0,a.useRouter)(),u=(0,r.Gv)(s);(0,l.useEffect)(function(){if(u){var e=function(e,n){t(n)?(0,i.gU)(e):(0,i.pl)(e)},r=function(e){"unknown"===e||(0,c.Z)(e)},a=function(t){(0,i.gN)(t,function(t){var a=t.type;switch(a){case o.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case o.cF.SHELL_COMMAND:r(t.command);break;case o.cF.SHELL_PASTE_TEXT:n(t.text)?(0,i.gU)(t.id):(0,i.pl)(t.id);break;default:(0,c.Z)(a)}})};return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[u,t,n])}},96432:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(27387),i=n(66626),o=n(78950),a=n(63257),l=n(96583),c=n(3796),s=n(6065),u=n(58532),d=n(63163),f=n(7420),p=n(55621),h=n(42704),m=n(71711),g=n(75271),v=n(41733),y=n(21262),b=n(71440),w=n(9122);function Z(){var e=(0,y._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),k=n(76881),S=n(62279),_=n(36809),T=(0,S.iv)({".sentry-error-embed-wrapper":{zIndex:"".concat(d.n0," !important")}}),E=(0,_.X)({errorStack:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[d.l0.font.code,d.l0.fontSize(12)],error:[d.l0.font.code]}),R=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,D=/at (https:\/\/.+\.js):(\d+):(\d+)/;function I(){return(I=(0,r._)(function(e){var t,c,s,u,d,f,p,h;function m(){return(m=(0,r._)(function(e){var n,r,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(n=t.get(e))return[2,n];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new c.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.Jh)(this,function(g){switch(g.label){case 0:t=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return c=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var v;if(!(s=e.stack))throw Error("expected error.stack to be defined");return u=s.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),f=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((v=(0,r._)(function(e){var t,n,r,o,a,c,s,u,d,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(R.test(e)){if(!(a=R.exec(e)))throw Error("expected result");n=(c=(0,i._)(a.slice(2),3))[0],r=c[1],o=c[2]}else{if(!D.test(e))return[2,e];if(!(s=D.exec(e)))throw Error("expected result");n=(u=(0,i._)(s.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(f=d.originalPositionFor({line:Number(r),column:Number(o)}),t)return[2,"    at ".concat(f.name," (").concat(f.source,":").concat(f.line,":").concat(f.column,")")];return[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]}})}),function(e){return v.apply(this,arguments)})))];case 5:return p=g.sent(),Object.assign(h=Error(),{name:e.name,stack:[f].concat((0,a._)(p)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var B=function(e){var t=e.bsod,n=(0,i._)((0,g.useState)(null),2),o=n[0],a=n[1];(0,g.useEffect)(function(){(0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return I.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var s=(0,g.useMemo)(function(){var e,n,r,i;return o?null!==(r=null===(n=o.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[o,t.error.stack]);return(0,c.tZ)("div",{css:E.errorStack,children:(0,c.tZ)(h.gC,{spacing:1,children:(0,c.BX)("div",{css:E.errorStackContent,children:[(0,c.BX)("div",{children:["Origin: ",t.origin]}),null==s?void 0:s.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,c.tZ)("div",{css:r&&d.l0.color.foregroundDimmest,children:n},t)})]})})})},A=function(){var e,t,n,r=(0,i._)((0,k.qg)(),1)[0],o=(e=(0,v._)({},x,{skip:!r}),w.a(C,e)),a=o.data,l=o.loading;if((0,k.ic)(),!r)return null;var g=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,c.BX)(u.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(h.gC,{spacing:2,align:"center",children:[(0,c.tZ)(p.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8)],children:(0,c.BX)(h.gC,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,c.BX)(h.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(s.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,c.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,c.BX)("div",{css:E.error,children:["Error: ",r.eventId]})]})}),g?(0,c.tZ)(B,{bsod:r}):null,(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(f.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(S.xB,{styles:[T]})]})}},34525:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(3796),s=n(25722),u=n(93245),d=n(63163),f=n(75271),p=n(76881),h=n(49500),m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var o=n.prototype;return o.componentDidCatch=function(e,t){this.setState({hasErrored:!0,error:e,errorInfo:t}),this.props.handleError(e,t),h.error(e)},o.render=function(){if(this.state.hasErrored){var e,t,n;return(0,c.tZ)(u.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(u.G,{children:null!==(n=null===(t=this.state)||void 0===t?void 0:null===(e=t.error)||void 0===e?void 0:e.stack)&&void 0!==n?n:"An unknown error occurred."})})}return this.props.children},n}(f.Component);function g(e){var t=e.bsod,n=void 0!==t&&t,r=e.sentry,i=void 0===r||r,l=e.handleError,u=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,h=e.tags,g=void 0===h?{}:h,v=e.extras,y=void 0===v?{}:v,b=(0,p.uV)();return(0,c.tZ)(m,{handleError:function(e,t){n?b({error:e,extras:(0,a._)((0,o._)({},y),{errorInfo:t}),tags:(0,a._)((0,o._)({},g),{errorBoundary:!0}),origin:f}):i&&s.$e(function(n){n.setTag("errorBoundary",!0),n.setTags(g),n.setExtra("errorInfo",t),n.setExtras(y),s.Tb(e)}),l&&l(e,t)},children:u})}},13556:function(e,t,n){n.d(t,{YX:function(){return w},ho:function(){return Z}});var r=n(12285),i=n(41733),o=n(30509),a=n(66626),l=n(3796),c=n(54129),s=n(24766),u=n(93245),d=n(27840),f=n(24543),p=n(10578),h=n(63163),m=n(69746),g=n(21885),v=n(75271),y=n(25731),b=n(70624),w=new(function(){"use strict";function e(){var t=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})},t.complete=function(e,t){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:t,responseTime:Date.now()})})},t.abort=function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})},e}()),Z=function(e){var t=e.isHidden,n=(0,c.Z)(w.logs);return t?null:(0,l.BX)(u.G,{css:[h.l0.flex.column],children:[(0,l.BX)(u.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.m(4),h.l0.position.sticky,h.l0.top(0),h.l0.backgroundColor.backgroundDefault,h.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:h.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(g.Z,{onClick:w.clear})]}),(0,l.BX)(u.G,{css:[h.l0.flex.grow(1),h.l0.flex.column,h.l0.overflow("auto")],children:[n.map(function(e){var t;return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())}),!n.length&&(0,l.tZ)(u.G,{css:h.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,v.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,g=(0,a._)((0,m.Z)(!0),2),v=g[0],y=g[1],w=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.BX)(u.G,{css:[h.l0.my(4),h.l0.mx(4)],children:[(0,l.BX)(u.G,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[h.l0.flex.row,h.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(u.G,{css:[h.l0.flex.grow(1),h.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.tZ)(d.Z,{}):(0,l.tZ)(f.Z,{}):(0,l.tZ)(p.Z,{})}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:w})})]}),(0,l.tZ)(u.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(s.xv,{css:h.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!v&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(b.g,{name:"request",src:o}),void 0!==c&&("CompleteCodeResult"===c.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[h.l0.overflow("scroll"),h.l0.borderRadius(4),h.l0.p(4),{border:"1px solid ".concat(h.TV.outlineDimmest)}],children:c.code})]}):(0,l.tZ)(b.g,{name:"response",src:c}))]})]})})},59855:function(e,t,n){n.d(t,{$G:function(){return Z},Ay:function(){return v},Ys:function(){return w},_k:function(){return d},_t:function(){return p},cF:function(){return a},gd:function(){return s},mN:function(){return m},qc:function(){return b}});var r=n(49853),i=n(80786),o=n(75271),a=function(e,t){var n=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!t.direction||n===t.direction)&&(!t.channels.length||!!t.channels.includes(o.channel))&&(!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service))||t.regexp.test(i))},l=(0,r.cn)([]),c=(0,r.cn)([]);function s(){return(0,o.useDeferredValue)((0,i.Dv)(c))}var u=(0,r.cn)(null,function(e,t,n){a(n,e(h))&&t(c,function(e){return e.concat(n)}),t(l,function(e){return e.concat(n)})});function d(){return(0,i.b9)(u)}var f=(0,r.cn)(null,function(e,t){t(l,[]),t(c,[])});function p(){return(0,i.b9)(f)}var h=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,i.Dv)(h)}var g=(0,r.cn)(null,function(e,t,n){var r;t(h,n),t(c,(r=e(l),(n.regexp||n.direction||n.channels.length)&&!n.highlightOnly?r.filter(function(e){return a(e,n)}):r))});function v(){return(0,i.b9)(g)}var y=(0,r.cn)(!1);function b(){return(0,i.Dv)(y)}function w(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t,n){return t(y,n)})},[]))}function Z(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t){return t(y,function(e){return!e})})},[]))}},38337:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(23882),i=n(59855),o=n(7391),a=n(75271),l=n(92674),c=n.n(l);function s(){var e=(0,o.useRouter)(),t=(0,r.Z)().container,n=(0,i.qc)(),l=(0,i.Ys)(),s=(0,i._k)();(0,a.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&l(!0)},[l,e.query.debug]),(0,a.useEffect)(function(){if(n)return t.client().onDebugLog(function(e){if("log"===e.type){var n={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}s({id:c()(),channel:n,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[n,t,s])}},70624:function(e,t,n){n.d(t,{L:function(){return P},g:function(){return L}});var r=n(42516),i=n(41733),o=n(30509),a=n(66626),l=n(63257),c=n(3796),s=n(31089),u=n(75271),d=n(6069),f=n(31718),p=n(9602),h=n(44935),m=n(24766),g=n(93245),v=n(96601),y=n(27840),b=n(7935),w=n(98127),Z=n(16865),x=n(59261),C=n(71137),k=n(39031),S=n(10578),_=n(63163),T=n(11208),E=n(92234),R=n(69746),D=n(21885),I=n(24200),B=n(76773),A=n(59489),P=function(e){var t,n,d,v,y,b,w=e.isHidden,C=(n=(t=(0,a._)((0,u.useState)(null),2))[0],d=t[1],v=(0,I.R3)(),(0,u.useEffect)(function(){v!==n&&null!=v&&d(v)},[v,n]),n),k=(0,T.Z)(C||""),S=(0,a._)((0,u.useState)(null===(y=k[0])||void 0===y?void 0:y.clientId),2),P=S[0],L=S[1];P&&!k.find(function(e){return P===e.clientId})&&L(null===(b=k[0])||void 0===b?void 0:b.clientId),!P&&k.length&&L(k[0].clientId);var O=(0,s.U)(),U=(0,a._)((0,R.Z)(!0),2),M=U[0],X=U[1],F=(0,a._)((0,u.useState)(""),2),W=F[0],V=F[1],H=(0,a._)((0,u.useState)(function(){return{}}),2),z=H[0],j=H[1],q=(0,a._)((0,R.Z)(!0),2),J=q[0],Y=q[1],$=(0,a._)((0,R.Z)(!0),2),K=$[0],Q=$[1],ee=(0,u.useCallback)(function(e,t){j(function(n){var a;return(0,o._)((0,i._)({},n),(0,r._)({},e,[t].concat((0,l._)(null!==(a=n[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),et=(0,u.useCallback)(function(e,t,n){j(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===t){r[e][o]=n(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),en=(0,u.useCallback)(function(){P&&j(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,u.useMemo)(function(){return k.find(function(e){return e.clientId===P})},[k,P]),ei=null==er?void 0:er.isOpen(C||""),eo=(0,u.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:C,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(C||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(C||"")}},requestTime:new Date,type:"probe"})},[ee,C,er,ei]),ea=(0,u.useMemo)(function(){if(!P)return[];var e,t,n=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!n.length)return null!==(e=z[P])&&void 0!==e?e:[];var r=null!==(t=z[P])&&void 0!==t?t:[];return J||(r=r.filter(function(e){return null==e.notification})),K||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return n.some(function(t){var n;return null===(n=e.request||e.notification)||void 0===n?void 0:n.method.toLowerCase().includes(t.toLowerCase())})})),r},[W,z,P,J,K]);return((0,u.useEffect)(function(){return(0,B.uf)(k.flatMap(function(e){return[e.onRequest(function(t){M&&ee(e.clientId,{id:t.id,canceled:!1,request:t.data,requestTime:new Date})}),e.onResponse(function(t){M&&et(e.clientId,t.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==t.result?{response:t.result}:{error:t.error})})}),e.onCancelRequest(function(t){M&&et(e.clientId,t,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(t){var n=t.path,r=t.diagnostics;M&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:t}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(t){M&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:t}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})}),e.onReceiveNotification(function(t){M&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})})]}))},[ee,et,M,k]),w)?null:(0,c.BX)(g.G,{css:[_.l0.flex.column],children:[(0,c.BX)(g.G,{css:[_.l0.flex.row,_.l0.align.center,_.l0.m(4),_.l0.position.sticky,_.l0.top(0),_.l0.backgroundColor.backgroundDefault,_.l0.zIndex(1)],children:[(0,c.tZ)(m.xv,{multiline:!1,children:P?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{})," logs for ",(0,c.tZ)("code",{children:C})]}):"No LSP client available"}),(0,c.tZ)(p.hU,{alt:"Probe LSP",onClick:eo,children:(0,c.tZ)(Z.Z,{})}),(0,c.tZ)(g.G,{css:_.l0.flex.grow(1)}),(0,c.tZ)(E.Z,{id:"toggleIsLogging",isOn:M,onChange:X})]}),(0,c.tZ)(g.G,{children:(0,c.tZ)(A.hE,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:k.map(function(e){return(0,c.tZ)(A.rK,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,c.BX)(g.G,{css:[_.l0.rowWithGap(8),_.l0.m(4),_.l0.mb(8)],children:[(0,c.BX)(g.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(x.Z,{}),(0,c.tZ)(m.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(g.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showNotifications",id:O("showNotifications"),checked:J,onChange:Y}),(0,c.tZ)("label",{htmlFor:O("showNotifications"),children:" Notifications"})]}),(0,c.BX)(g.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showRequests",id:O("showRequests"),checked:K,onChange:Q}),(0,c.tZ)("label",{htmlFor:O("showRequests"),children:" Requests"})]}),(0,c.tZ)(g.G,{css:_.l0.flex.growAndShrink(1)}),(0,c.tZ)(g.G,{css:_.l0.rowWithGap(4),children:(0,c.tZ)(D.Z,{onClick:en})})]}),(0,c.tZ)(g.G,{css:_.l0.rowWithGap(4),children:(0,c.tZ)(h.II,{id:O("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return V(e.target.value)},value:W})}),(0,c.BX)(g.G,{css:[_.l0.flex.grow(1),_.l0.flex.column,_.l0.overflow("auto")],children:[ea.map(function(e,t){var n;return(0,c.tZ)(G,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)}),!ea.length&&(0,c.tZ)(g.G,{css:_.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},G=u.memo(function(e){var t,n,r,i,o,l=e.log,s=l.requestTime,u=l.responseTime,d=l.request,f=l.response,p=l.notification,h=l.id,x=(0,a._)((0,R.Z)(!0),2),T=x[0],E=x[1];return(0,c.BX)(g.G,{css:[_.l0.my(4),_.l0.mx(4)],children:[(0,c.BX)(g.G,{role:"button",onClick:E,onKeyDown:E,tabIndex:0,css:[_.l0.flex.row,_.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(g.G,{css:[_.l0.flex.grow(1),_.l0.rowWithGap(2)],children:[(0,c.tZ)(m.xv,{className:"lspLog-emoji",multiline:!1,children:(t=l.type,n=l.canceled,r=l.response,i=l.notification,"state"===t?(0,c.tZ)(w.Z,{}):"diagnostics"===t?(0,c.tZ)(v.Z,{}):"capabilities"===t?(0,c.tZ)(C.Z,{}):"probe"===t?(0,c.tZ)(Z.Z,{}):n?(0,c.tZ)(b.Z,{}):i?(0,c.tZ)(k.Z,{}):void 0!==r?(0,c.tZ)(y.Z,{}):(0,c.tZ)(S.Z,{}))}),(0,c.BX)(m.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(o=d||p)||void 0===o?void 0:o.method}),null!=h&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",h]})]})]}),(0,c.tZ)(g.G,{css:{opacity:.5},children:null!=u&&(0,c.BX)(m.xv,{css:_.l0.fontSize(13),multiline:!1,children:[u.valueOf()-s.valueOf(),"ms"]})})]}),!T&&(0,c.BX)(c.HY,{children:[void 0!==d&&(0,c.tZ)(L,{name:"request.params",src:d.params}),void 0!==p&&(0,c.tZ)(L,{name:"notification.params",src:p.params}),void 0!==f&&(0,c.tZ)(L,{name:"response",src:f})]})]})}),L=(0,u.memo)(function(e){var t=e.name,n=e.src;return(0,c.tZ)(g.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(d.Z,{json:(0,r._)({},t,n)})})}),N=function(){return(0,c.tZ)(m.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(_.TV.redDimmer," 2px 2px")},children:"LSP"})}},69746:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(75271);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,i.useState)(e),2),n=t[0],o=t[1];return[n,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},67646:function(e,t,n){n.d(t,{v:function(){return g}});var r=n(66626),i=n(3796),o=n(54236),a=n(93245),l=n(36809),c=n(63163),s=n(75271),u=n(97574),d=n(10578),f=n(59247),p=n(24766),h=n(86466),m=(0,l.X)({loading:[c.l0.flex.growAndShrink(1),c.l0.center],parent:[c.l0.flex.growAndShrink(1)],events:[c.l0.flex.growAndShrink(1),c.l0.position.relative],banner:[c.l0.p(8),c.l0.backgroundColor.blurpleDimmest,c.l0.borderRadius(),c.l0.width("100%"),c.l0.bottom(8),c.l0.position.absolute],fade:[c.l0.position.absolute,c.l0.top(0),c.l0.left(0),c.l0.width("100%"),c.l0.height(f.S),c.l0.backgroundGradient(h.vb.surfaceBackground,"transparent")]});function g(e){var t=e.onViewPlan,n=e.addSecretEntries,r=e.inputRef,l=(0,o._V)(),c=l.loading,s=l.sessionId;return c?(0,i.tZ)(a.G,{css:m.loading,children:(0,i.tZ)(d.Z,{})}):(0,i.tZ)(v,{initialSessionId:s,addSecretEntries:n,onViewPlan:t,inputRef:r})}function v(e){var t=e.initialSessionId,n=e.inputRef,l=e.onViewPlan,c=e.addSecretEntries,d=(0,r._)((0,o.Ni)(),1)[0],h=(0,o.bD)({initialSessionId:t}),g=(0,s.useMemo)(function(){return h.loading?"loading":"composing"},[h.loading]),v=(0,s.useRef)(!1),y=(0,s.useCallback)(function(e){v.current=!0,h.sendMessage({model:"advanced"===d?o.BY.ADVANCED:o.BY.BASIC,message:e,intent:o.$h.AGENT,kind:"message"},{newSessionType:o.FF.AGENT_SESSION})},[d,h]);return(0,i.BX)(a.G,{css:m.parent,children:[(0,i.BX)(a.G,{css:m.events,children:[h.sessionId?(0,i.tZ)(f.z,{addSecretEntries:c,onViewPlan:l,sessionId:h.sessionId,shouldAutoscrollRef:v}):(0,i.tZ)(a.G,{css:m.banner,children:(0,i.tZ)(p.xv,{children:"Send a message to start building with the agent"})}),(0,i.tZ)(a.G,{css:m.fade})]}),(0,i.tZ)(a.G,{children:(0,i.tZ)(u.Z,{status:g,onSubmit:y,inputRef:n})})]})}},23005:function(e,t,n){n.d(t,{c:function(){return eV}});var r,i=n(41733),o=n(98924),a=n(3796),l=n(54236),c=n(6069),s=n(22893),u=n(24766),d=n(93245),f=n(36809),p=n(54300),h=n(63163),m=n(92571),g=n(75271),v=n(66626),y=n(30509),b=n(63257),w=n(79125),Z=n(42516),x=n(48453),C=n.n(x),k=(0,g.createContext)({});function S(){return(0,g.useContext)(k)}function _(e){var t=e.diff,n=e.onPathClick,r=e.onViewFullDiff,i=e.children,o=(0,g.useMemo)(function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.headers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("index"===a.type)return{a:a.hashA,b:a.hashB}}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}},[t]),l=(0,g.useMemo)(function(){return{handlePathNavigation:n?function(e,r){var i="a"===e?t.pathA:t.pathB,a="a"===e?null==o?void 0:o.a:null==o?void 0:o.b;i&&n({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=t.pathB||t.pathA,n=(null==o?void 0:o.b)||(null==o?void 0:o.a);e&&r({path:e,revision:n})}:void 0}},[t,n,r,o]);return(0,a.tZ)(k.Provider,{value:l,children:i})}var T=n(71051),E=n(79904),R=n(31940),D=n(14116),I=n(14861),B="--number-width-a",A="--number-width-b",P=(0,f.X)({content:{marginLeft:h.TV.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:h.TV.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:h.TV.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(h.TV.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(h.TV.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(h.TV.accentPrimaryDimmest)}},"&.is-skipped":{paddingTop:h.TV.space4,paddingBottom:h.TV.space4,color:h.TV.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:h.TV.accentPositiveStronger},".is-removed &":{color:h.TV.accentNegativeStronger},".is-same &":{color:h.TV.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:h.TV.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(B,")")},"&.is-side-b":{width:"var(".concat(A,")")}}});function G(e){var t=(0,I.F)().values;return(0,g.useMemo)(function(){if("same"===e)return"";var n="added"===e?t.global.accentPositiveDefault:t.global.accentNegativeDefault;return C()(n).alpha(.2).hex()},[e,t.global.accentPositiveDefault,t.global.accentNegativeDefault])}function L(e){var t=e.type,n=void 0===t?"same":t,r=e.changes,i=S().handleViewFullDiffNavigation,o=G(n);if(r<=0)return null;var l=!1,c=!1;return("removed"===n||"same"===n)&&(l=(0,a.tZ)(R.Z,{size:20})),("added"===n||"same"===n)&&(c=(0,a.tZ)(R.Z,{size:20})),(0,a.BX)("div",{className:"is-".concat(n," is-skipped"),css:P.line,style:{backgroundColor:o},children:[(0,a.tZ)(O,{side:"a",type:n,number:l}),(0,a.tZ)(O,{side:"b",type:n,number:c}),(0,a.tZ)("div",{css:P.content,children:(0,a.tZ)("span",{css:P.span,children:i?(0,a.tZ)(E.zx,{text:"view ".concat(r," more ").concat((0,T.Z)("change",r)),iconLeft:(0,a.tZ)(D.Z,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,T.Z)("change",r)," not shown")})})]})}function N(e){var t=e.type,n=e.content,r=e.numberA,i=e.numberB,o=G(t);return(0,a.BX)("div",{className:"is-".concat(t),css:P.line,style:{backgroundColor:o},children:[(0,a.tZ)(O,{side:"a",type:t,number:void 0===r?null:r}),(0,a.tZ)(O,{side:"b",type:t,number:void 0===i?null:i}),(0,a.tZ)("div",{className:"is-".concat(t),css:P.content,children:"string"==typeof n?(0,a.tZ)("span",{css:P.span,children:n||(0,a.tZ)("span",{css:P.nbsp,children:"\xa0"})}):n.map(function(e,t){var n=e.text,r=e.tags;return(0,a.tZ)("span",{className:r,css:P.span,children:n||(0,a.tZ)("span",{css:P.nbsp,children:"\xa0"})},t)})})]})}function O(e){var t=e.side,n=e.type,r=e.number,i=S().handlePathNavigation;return!1===r?null:null===r?(0,a.tZ)("div",{css:P.numberContainer,className:"is-side-".concat(t)}):(0,a.tZ)("div",{css:P.numberContainer,className:"is-side-".concat(t),children:i&&"number"==typeof r?(0,a.tZ)(E.zx,{text:(0,a.tZ)("span",{css:P.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===n?"a":"b",r)}}):(0,a.tZ)("span",{css:P.number,children:r})})}var U=n(97402),M=(0,f.X)({hunk:h.l0.flex.column,header:{display:"flex",flexDirection:"row",alignItems:"center",gap:"1ch",padding:"".concat(h.TV.space8," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(h.TV.accentPrimaryDimmest)}},countAdded:[h.l0.textAlign.right,h.l0.color.accentPositiveStronger,h.l0.width("var(".concat(A,")"))],countRemoved:[h.l0.textAlign.right,h.l0.color.accentNegativeStronger,h.l0.width("var(".concat(B,")"))],sectionHeading:[h.l0.ml(8),h.l0.font.code,h.l0.color.accentPrimaryStronger],hunks:[h.l0.flex.column,h.l0.font.code,(r={lineHeight:h.TV.lineHeightSmall},(0,Z._)(r,"> div:last-child"+U.G,h.l0.pb(2)),(0,Z._)(r,"> div:first-child"+U.G,h.l0.pt(4)),r)],hiddenLinesMessage:[h.l0.color.foregroundDimmest]});function X(e){var t=e.hunk,n=e.hideHeader,r=e.maxLines,o=(0,I.F)().values,l=(0,g.useMemo)(function(){return C()(o.global.accentPrimaryDefault).alpha(.2).hex()},[o.global.accentPrimaryDefault]),c=(0,g.useMemo)(function(){var e=0,n=0,r=!0,i=!1,o=void 0;try{for(var a,l=t.lines[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"added"===c.type?n++:"removed"===c.type&&e++}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{a:e,b:n}},[t]),s=(0,g.useMemo)(function(){return void 0!==r&&t.lines.length>r?t.lines.slice(0,r):t.lines},[t,r]);return(0,a.BX)(d.G,{css:M.hunk,children:[n?null:(0,a.BX)(d.G,{css:M.header,style:{backgroundColor:l},children:[(0,a.BX)("span",{css:M.countRemoved,children:["-",c.a]}),(0,a.BX)("span",{css:M.countAdded,children:["+",c.b]}),t.heading?(0,a.tZ)("span",{css:M.sectionHeading,children:t.heading}):null]}),(0,a.tZ)(d.G,{css:M.hunks,children:s.map(function(e,t){return(0,a.tZ)(N,(0,i._)({},e),t)})})]})}var F=n(27387),W=n(96583),V=n(22750),H=n(67464),z=n(13387),j=n(25604);function q(){return(q=(0,F._)(function(e,t,n){var r,o,a,l,c,s,u;return(0,W.Jh)(this,function(d){switch(d.label){case 0:if(0===e.hunks.length)return[2,e];if(r=e.pathA?z.$R.from(e.pathA):null,o=e.pathB?z.$R.from(e.pathB):null,a=null,l=null,!(r&&r.codeMirrorLanguage))return[3,4];if(!r.codeMirrorLanguage.support)return[3,1];return c=r.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,r.codeMirrorLanguage.load()];case 2:c=d.sent().language.parser,d.label=3;case 3:a=c,d.label=4;case 4:if(!(o&&o.codeMirrorLanguage))return[3,8];if(!o.codeMirrorLanguage.support)return[3,5];return s=o.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,o.codeMirrorLanguage.load()];case 6:s=d.sent().language.parser,d.label=7;case 7:l=s,d.label=8;case 8:if(n.aborted||!a&&!l)return[2,e];return u=e.hunks.map(function(e){var n=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),r=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(n=n?"".concat(e.heading,"\n").concat(n):"",r=r?"".concat(e.heading,"\n").concat(r):"");var o=(0,H.SJ)(n,t,a),c=(0,H.SJ)(r,t,l);return e.heading&&n&&o.shift(),e.heading&&r&&c.shift(),(0,y._)((0,i._)({},e),{lines:e.lines.map(function(t){if(null!==t.numberB)n="b",r=t.numberB;else if(null!==t.numberA)n="a",r=t.numberA;else throw Error("Invalid line, no number for either side");var n,r,a="a"===n?o[r-e.fromA]:c[r-e.fromB];if(!a)throw Error("Line not found in side ".concat(n));return(0,y._)((0,i._)({},t),{content:a})})})}),[2,(0,y._)((0,i._)({},e),{hunks:u})]}})})).apply(this,arguments)}var J=new WeakSet,Y=n(87915),$=n(14548),K=n(30231),Q=(0,f.X)({diff:[h.l0.flex.column,{"&.is-patch-with-border":h.l0.borderRadius(4)}],header:[h.l0.rowWithGap(8),h.l0.my(8),h.l0.align.center,h.l0.flex.wrap],headerFile:{lineHeight:1,"&.is-added":h.l0.color.accentPositiveStronger,"&.is-removed":h.l0.color.accentNegativeStronger},container:[h.l0.flex.column,h.l0.overflow("hidden"),{".is-patch-with-border &":[h.l0.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(h.TV.accentPrimaryDimmest),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(h.TV.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(h.TV.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(h.TV.outlineDimmer)}}],"&.is-no-changes":[h.l0.p(8),h.l0.center]}],file:[h.l0.flex.column,h.l0.font.code,{lineHeight:h.TV.lineHeightSmall,"> div:last-child":h.l0.pb(2),"> div:first-child":h.l0.pt(4)}],hiddenContentMessage:[h.l0.p(8),h.l0.align.start,h.l0.font.default]});function ee(e){var t,n,r,i,o,l,c=e.diff,s=e.maxLines,u=e.noHeader,f=e.noBorder,p=e.background,h=e.compressed,m=e.onPathClick,y=e.onViewFullDiff,b=(n=(t=(0,v._)((0,g.useState)(c),2))[0],r=t[1],i=(0,I.F)(),o=(0,g.useMemo)(function(){return(0,V.r)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,g.useEffect)(function(){!o.module||J.has(o.module)||(j.V.mount(document,o.module),J.add(o.module))},[o.module]),(0,g.useEffect)(function(){r(c);var e=new AbortController,t=e.signal;return(function(e,t,n){return q.apply(this,arguments)})(c,o,t).then(function(e){t.aborted||r(e)}),function(){e.abort()}},[c,o]),n),w=(0,g.useMemo)(function(){var e=0,t=0,n=0,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=c.hunks[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value,d=0,f=0,p=!0,m=!1,g=void 0;try{for(var v,y=u.lines[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var b=v.value;b.numberA&&(n=Math.max(n,b.numberA)),b.numberB&&(r=Math.max(r,b.numberB)),"removed"===b.type&&d++,"added"===b.type&&f++}}catch(e){m=!0,g=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw g}}e=Math.max(e,d),t=Math.max(t,f)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var w=n.toString().length,Z=r.toString().length;if((!h||c.hunks.length>1)&&c.pathA&&c.pathB){var x=e.toString().length+1,C=t.toString().length+1;w=Math.max(w,x),Z=Math.max(Z,C)}return{a:w,b:Z}},[c,h]);return(0,a.tZ)(_,{diff:c,onPathClick:m,onViewFullDiff:y,children:(0,a.BX)(d.G,{css:Q.diff,className:f?"":"is-patch-with-border",style:(l={},(0,Z._)(l,B,"".concat(w.a,"ch")),(0,Z._)(l,A,"".concat(w.b,"ch")),l),children:[!u&&(c.pathA||c.pathB)?(0,a.tZ)(et,{diff:b}):null,(0,a.tZ)(er,{diff:b,compressed:h,background:p,maxLines:s})]})})}function et(e){var t=e.diff;if(t.pathA&&t.pathB&&t.pathA===t.pathB)return(0,a.tZ)(d.G,{css:Q.header,children:(0,a.tZ)(en,{diff:t,side:"b"})});if(t.pathA&&t.pathB&&t.pathA!==t.pathB)return(0,a.BX)(d.G,{css:Q.header,children:[(0,a.tZ)(en,{diff:t,side:"a"}),(0,a.tZ)(K.Z,{color:h.TV.foregroundDimmest}),(0,a.tZ)(en,{diff:t,side:"b"})]});var n=t.pathA?"a":"b";return(0,a.tZ)(d.G,{css:Q.header,children:(0,a.tZ)(en,{diff:t,side:n})})}function en(e){var t=e.diff,n=e.side,r=S().handlePathNavigation,i="a"===n?t.pathA:t.pathB,o="a"===n?t.pathB:t.pathA;if(!i)return null;var l="";o!==i&&(l="b"===n?"is-added":"is-removed");var c=(0,a.tZ)(u.xv,{className:l,css:Q.headerFile,children:i});return r?(0,a.tZ)(E.zx,{text:c,iconLeft:(0,a.tZ)(Y.Z,{path:i}),onClick:function(){return r(n)},variant:"underlinedOnHover"}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(Y.Z,{path:i}),c]})}function er(e){var t=e.diff,n=e.background,r=e.compressed,i=e.maxLines,o=null===n?void 0:n||"root";if(!t.hunks.length)return(0,a.tZ)($.Tg,{className:"is-no-changes",css:Q.container,background:o,children:(0,a.tZ)(u.xv,{color:"dimmer",children:"No additional changes"})});if(t.pathA&&t.pathB){var l=0,c=t.hunks.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+("same"!==t.type?1:0)},0)},0),s=t.hunks.map(function(e){if(void 0!==i&&l>=i)return null;var n=void 0!==i?i-l:void 0;return c-=e.lines.slice(0,n).reduce(function(e,t){return e+("same"!==t.type?1:0)},0),l+=e.lines.length+1,(0,a.tZ)(X,{hunk:e,hideHeader:r&&1===t.hunks.length,maxLines:n},l)});return(0,a.BX)($.Tg,{className:"is-modified",css:Q.container,background:o,children:[s,(0,a.tZ)(L,{changes:c})]})}var f=t.pathB?"b":"a",p="a"===f?"removed":"added",h=t.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===f?"added":"removed")}).map(function(e){return e.content})}),m=void 0!==i?h.slice(0,i):h,g=h.length-m.length;return(0,a.tZ)($.Tg,{className:"is-".concat(p),css:Q.container,background:o,children:(0,a.BX)(d.G,{css:Q.file,children:[m.map(function(e,t){return(0,a.tZ)(N,{type:p,content:e,numberA:"a"===f&&t+1,numberB:"b"===f&&t+1},t)}),g<=0?null:(0,a.tZ)(L,{type:p,changes:g})]})})}var ei=(0,f.X)({patch:h.l0.colWithGap(12),truncatedDiffsMessage:[h.l0.rowWithGap(4),h.l0.pt(4),h.l0.color.foregroundDimmest,h.l0.align.center,h.l0.justify.start]}),eo=/^diff --git /m;function ea(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],hunks:e.hunks}}function el(e){var t=e.patch,n=e.maxLines,r=e.maxDiffs,o=e.noHeader,l=e.noBorder,c=e.background,s=e.compressed,f=e.onPathClick,p=e.onViewFullDiff,h=(0,g.useMemo)(function(){return function e(t){return Array.isArray(t)?t.flatMap(function(t){return e(t)}):"string"==typeof t?eo.test(t)?(0,w.Z6)(t):[ea((0,w.$n)(t))]:"headers"in t?[t]:[ea(t)]}(t)},[t]),m=(0,g.useMemo)(function(){var e=void 0!==r?Math.min(h.length,r):h.length;if(!s&&e===h.length)return h;for(var t=[],n=0;n<e;n++){var o=h[n];if(!s){t.push(o);continue}t.push((0,y._)((0,i._)({},o),{hunks:o.hunks.map(function(e){return function(e){for(var t,n,r,o,a=(0,b._)(e.lines),l=e.fromA,c=e.fromB,s=e.toA,u=e.toB;(null===(t=a[0])||void 0===t?void 0:t.type)==="same"&&(null===(n=a[1])||void 0===n?void 0:n.type)==="same";)a.shift(),l++,c++;for(;(null===(r=a[a.length-1])||void 0===r?void 0:r.type)==="same"&&(null===(o=a[a.length-2])||void 0===o?void 0:o.type)==="same";)a.pop(),s--,u--;return(0,y._)((0,i._)({},e),{fromA:l,fromB:c,toA:s,toB:u,lines:a})}(e)}).filter(function(e){return e.lines.length>0})}))}return t},[h,r,s]),v=h.length-m.length,Z=1===v?"file":"files";return(0,a.BX)(d.G,{css:ei.patch,children:[m.map(function(e,t){return(0,a.tZ)(ee,{diff:e,maxLines:n,noHeader:o,noBorder:l,background:c,compressed:s,onPathClick:f,onViewFullDiff:p},t)}),v<=0?null:(0,a.tZ)(d.G,{css:ei.truncatedDiffsMessage,children:p?(0,a.tZ)(E.zx,{text:"view in full (".concat(v," more changed ").concat(Z,")"),iconLeft:(0,a.tZ)(D.Z,{}),onClick:function(){return p({})},variant:"underlinedOnHover",colorway:"primary"}):(0,a.BX)(u.xv,{children:[v," other changed ",Z," not shown"]})})]})}var ec=n(20564),es=(0,f.X)({countContainer:[h.l0.rowWithGap(8),h.l0.align.center],countRemoved:[h.l0.color.accentNegativeStronger],countAdded:[h.l0.color.accentPositiveStronger]});function eu(e){var t=e.path,n=e.type,r=e.diff,i=e.performPaneOperation,o=(0,v._)((0,g.useState)(!1),2),l=o[0],c=o[1],s=(0,g.useMemo)(function(){var e=0,t=0,n=!0,i=!1,o=void 0;try{for(var a,l=r.hunks[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,p=c.lines[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;"removed"===h.type?e++:"added"===h.type&&t++}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return{added:t,removed:e}},[r]);return(0,a.tZ)(ec.Q,{icon:(0,a.tZ)(Y.Z,{path:t}),title:(0,a.tZ)(ef,{type:n,path:t}),right:(0,a.tZ)(d.G,{css:es.countContainer,children:(0,a.tZ)(ed,{type:n,removed:s.removed,added:s.added})}),onOpenPane:i?function(){i({operation:"open",pane:{type:"codeEditor",data:{path:t}},secondary:!0})}:void 0,children:(0,a.tZ)(el,{patch:r,maxLines:l?void 0:16,onViewFullDiff:function(){return c(!0)},compressed:!l,background:null,noHeader:!0,noBorder:!0})})}function ed(e){var t=e.type,n=e.removed,r=e.added;switch(t){case"modify":return(0,a.BX)(a.HY,{children:[(0,a.BX)(u.xv,{css:es.countRemoved,children:["-",n]}),(0,a.BX)(u.xv,{css:es.countAdded,children:["+",r]})]});case"create":return(0,a.BX)(u.xv,{css:es.countAdded,children:["+",r]});case"delete":return(0,a.BX)(u.xv,{css:es.countRemoved,children:["-",n]})}}function ef(e){var t,n=e.type,r=e.path;switch(n){case"create":t=h.TV.accentPositiveStronger;break;case"delete":t=h.TV.accentNegativeStronger}return(0,a.tZ)(u.xv,{style:{color:t},children:r.replace(/^\//,"")})}function ep(e){var t=e.path,n=e.code,r=e.performPaneOperation,i=(0,g.useMemo)(function(){var e=n.split("\n");return{labelA:null,labelB:t,hunks:[{fromA:1,toA:1,fromB:1,toB:e.length,heading:null,lines:e.map(function(e,t){return{type:"added",numberA:null,numberB:t+1,content:e}})}]}},[t,n]);return(0,a.tZ)(eu,{path:t,type:"create",diff:i,performPaneOperation:r})}var eh=n(29043),em=n(25722);function eg(e){var t=e.path,n=e.diff,r=e.performPaneOperation,i=(0,g.useMemo)(function(){try{return(0,eh.Ok)((0,w.$n)(n))}catch(e){return em.$e(function(t){t.setTag("agent",!0),t.setExtras({diff:n}),em.Tb(e)}),(0,eh.UG)("This diff cannot be displayed")}},[n]);return i.ok?(0,a.tZ)(eu,{path:t,type:"modify",diff:i.value,performPaneOperation:r}):(0,a.tZ)(s.E,{icon:(0,a.tZ)(p.Z,{}),colorway:"warning",text:i.error})}var ev=n(31417),ey=n(10482),eb=n(21460),ew=n(23979),eZ=n(40703),ex=n(6829),eC=n(37633),ek=(0,f.X)({container:[h.l0.colWithGap(12)],dependencies:[h.l0.borderRadius(8),h.l0.overflow("hidden"),h.l0.border({color:h.TV.outlineDimmest})],header:[h.l0.rowWithGap(4),h.l0.align.center,h.l0.px(8),h.l0.py(4),h.l0.border({direction:"bottom",color:h.TV.outlineDimmest})],content:[h.l0.colWithGap(16),h.l0.p(8)],packagesContainer:[h.l0.colWithGap(8),h.l0.maxWidth(400)],packages:[h.l0.colWithGap(4)],package:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.borderRadius(4),h.l0.px(8),h.l0.py(4)],packageName:[h.l0.rowWithGap(4),h.l0.align.center],output:[h.l0.colWithGap(4)],terminalWrapper:[{"> div":[h.l0.borderRadius(4)],"& .xterm":[h.l0.borderRadius(4)]}]});function eS(){}function e_(e){var t,n=e.processId,r=(0,ex.x)(),i=(0,eC.f)(),o=(0,ew.fB)({maxHeight:300,openFile:eS,listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:eS}),l=o.visibleHeight,c=o.bufferHeight,s=o.wrapperResizeRef,u=o.xterm,f=o.xtermRef,p=(0,v._)((0,g.useState)(null),2),h=p[0],m=p[1],y=(0,g.useCallback)(function(e){return m(function(){return e}),function(){}},[]);return(0,eZ.C)((t=(0,F._)(function(e,t){var i,o,a,l,c,s,u,d,f,p,m;return(0,W.Jh)(this,function(g){switch(g.label){case 0:if(i=t.addCleanup,!r||!h)return[2];return[4,e.agentToolPackager.connectToInstallPackages.subscribe({processId:n})];case 1:a=(o=v._.apply(void 0,[g.sent(),2]))[0],l=o[1],i(l),c=!1,s=!1,g.label=2;case 2:g.trys.push([2,7,8,13]),d=(0,ev._)(a),g.label=3;case 3:return[4,d.next()];case 4:if(!(c=!(f=g.sent()).done))return[3,6];if(!(p=f.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,6];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&h(p.payload.output),g.label=5;case 5:return c=!1,[3,3];case 6:return[3,13];case 7:return m=g.sent(),s=!0,u=m,[3,13];case 8:if(g.trys.push([8,,11,12]),!(c&&null!=d.return))return[3,10];return[4,d.return()];case 9:g.sent(),g.label=10;case 10:return[3,12];case 11:if(s)throw u;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[r,h,n]),(0,a.tZ)(d.G,{css:ek.terminalWrapper,style:{height:l,background:null==i?void 0:i.background},children:(0,a.tZ)(ew.VU,{onInput:eS,xterm:u,wrapperResizeRef:s,bufferHeight:c,onMessage:y,onResizeTerminal:eS,children:(0,a.tZ)(ew.UB,{xtermRef:f,visibleHeight:l,maxHeight:300})})})}function eT(e){var t=e.installed,n=e.output,r=e.isExecuting,i=e.processId,o=e.performPaneOperation;n=null==n?void 0:n.trim().replaceAll("\n","\r\n");var l="";return l=r?t.length>1?"".concat(t.length," packages are being installed:"):"A package is being installed:":t.length>1?"".concat(t.length," packages were installed:"):"A package was installed:",(0,a.tZ)(ec.Q,{icon:(0,a.tZ)(ey.Z,{}),title:"Dependencies",onOpenPane:o?function(){o({operation:"open",pane:{type:"dependencies"},secondary:!0})}:void 0,children:(0,a.BX)(d.G,{css:ek.content,children:[t.length?(0,a.BX)(d.G,{css:ek.packagesContainer,children:[(0,a.tZ)(u.xv,{color:"dimmest",children:l}),(0,a.tZ)(d.G,{css:ek.packages,children:t.map(function(e,t){return(0,a.tZ)($.Tg,{css:ek.package,elevated:!0,children:(0,a.BX)(d.G,{css:ek.packageName,children:[(0,a.tZ)(eb.Z,{}),(0,a.tZ)(u.xv,{children:e})]})},t)})})]}):null,(0,a.BX)(d.G,{css:ek.output,children:[(0,a.tZ)(u.xv,{color:"dimmest",children:"Command output:"}),(0,a.BX)(d.G,{css:ek.terminalWrapper,children:[r&&i?(0,a.tZ)(e_,{processId:i}):null,!r&&n?(0,a.tZ)(ew._5,{output:n,maxHeight:300}):null,r||n?null:(0,a.tZ)(u.xv,{children:"No output for this installation."})]})]})]})})}var eE=n(27840),eR=n(98514),eD=(0,f.X)({terminalWrapper:[h.l0.overflow("hidden"),{"& .xterm":[h.l0.borderRadius(0,0,4,4)]}]});function eI(){}function eB(e){var t,n=e.processId,r=(0,ex.x)(),i=(0,g.useId)(),o=(0,eC.f)(),l=(0,ew.fB)({maxHeight:300,openFile:eI,listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:eI}),c=l.visibleHeight,s=l.bufferHeight,u=l.wrapperResizeRef,f=l.xterm,p=l.xtermRef,h=(0,v._)((0,g.useState)(null),2),m=h[0],y=h[1],b=(0,g.useCallback)(function(e){return y(function(){return e}),function(){}},[]);return(0,eZ.C)((t=(0,F._)(function(e,t){var o,a,l,c,s,u,d,f,p,h,g;return(0,W.Jh)(this,function(y){switch(y.label){case 0:if(o=t.addCleanup,!r||!m)return[2];return[4,e.shellExec.connect.stream({id:n,userId:r.id,processViewId:i})];case 1:(a=v._.apply(void 0,[y.sent(),3]))[0],l=a[1],c=a[2],o(c),s=!1,u=!1,y.label=2;case 2:y.trys.push([2,7,8,13]),f=(0,ev._)(l),y.label=3;case 3:return[4,f.next()];case 4:if(!(s=!(p=y.sent()).done))return[3,6];if(!(h=p.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code||"NO_PROCESS_MATCHING_ID"===h.payload.code||"PROCESS_IS_NOT_RUNNING"===h.payload.code)return[3,6];throw Error("[".concat(h.payload.code,"]: ").concat(h.payload.message))}"output"===h.payload.$kind&&m(h.payload.output),y.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return g=y.sent(),u=!0,d=g,[3,13];case 8:if(y.trys.push([8,,11,12]),!(s&&null!=f.return))return[3,10];return[4,f.return()];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(u)throw d;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[r,m,n,i]),(0,a.tZ)(d.G,{css:eD.terminalWrapper,style:{height:c,background:null==o?void 0:o.background},children:(0,a.tZ)(ew.VU,{onInput:eI,xterm:f,wrapperResizeRef:u,bufferHeight:s,onMessage:b,onResizeTerminal:eI,children:(0,a.tZ)(ew.UB,{xtermRef:p,visibleHeight:c,maxHeight:300})})})}function eA(e){var t=e.output;return 0===t.length?null:(0,a.tZ)(d.G,{css:eD.terminalWrapper,children:(0,a.tZ)(ew._5,{maxHeight:300,output:t})})}function eP(e){var t,n=e.data,r=null;n.isExecuting||(r=0===n.exitCode?(0,a.tZ)(eE.Z,{}):(0,a.tZ)(p.Z,{}));var i=null!==(t=n.output)&&void 0!==t?t:"".concat(n.stdout).concat(n.stderr).replaceAll("\n","\r\n"),o=!0===n.isExecuting;return(0,a.tZ)(ec.Q,{icon:(0,a.tZ)(eR.Z,{}),title:"$ ".concat(n.command),right:r,children:o?(0,a.tZ)(eB,{processId:n.processId}):(0,a.tZ)(eA,{output:i})})}var eG=n(11782),eL=(0,f.X)({root:[h.l0.borderRadius(4),h.l0.border({color:h.TV.outlineDimmer}),h.l0.width(500),h.l0.height(281.25),h.l0.maxWidth("100%"),h.l0.position.relative,h.l0.overflow("hidden"),{marginLeft:"auto",marginRight:"auto"}]});function eN(e){var t=e.imageUrl;return(0,a.tZ)(d.G,{css:eL.root,children:(0,a.tZ)(eG.Z,{layout:"fill",src:t,alt:"Screenshot"})})}var eO=n(30716),eU=(0,f.X)({module:[h.l0.rowWithGap(4),h.l0.align.center]});function eM(e){var t=e.modules;return(0,a.BX)(d.G,{children:[(0,a.tZ)(u.xv,{children:"Installed:"}),t.map(function(e){return(0,a.BX)(d.G,{css:eU.module,children:[(0,a.tZ)(eO.Z,{module:{name:e}},e),(0,a.tZ)(u.xv,{children:e})]},e)})]})}var eX=(0,f.X)({loading:[h.l0.px(16),h.l0.py(48),h.l0.center],item:[h.l0.justify.center,h.l0.py(24),h.l0.px(16),h.l0.height("100%"),{scrollSnapAlign:"center"}],itemContent:[h.l0.colWithGap(4),h.l0.width("100%"),h.l0.maxWidth(680),{marginInline:"auto"}],itemHeader:[{fontSize:h.TV.fontSizeSubheadDefault,textAlign:"center"}]}),eF=(0,f.X)({item:[h.l0.justify.spaceBetween,h.l0.height("100%"),h.l0.width("65vw"),h.l0.borderRadius(4),{scrollSnapAlign:"center"}],itemContent:[h.l0.colWithGap(4),h.l0.pt(8),h.l0.pb(8),h.l0.border({width:1,color:h.TV.outlineDimmest,direction:"x"}),h.l0.border({width:1,color:h.TV.outlineDimmest,direction:"top"}),h.l0.px(8),h.l0.overflowY("scroll"),h.l0.borderRadius(4),h.l0.flex.growAndShrink(1)],summary:[{fontSize:h.TV.fontSizeSubheadDefault,textAlign:"center"},h.l0.backgroundColor.outlineDimmest,h.l0.borderRadius(0,0,8,8),h.l0.px(8),h.l0.py(4)]});function eW(e){if(!e)return null;if(e.error.type!==l.lZ.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var n=t.agentTimelineEventContents.toolData,r=t.agentTimelineEventContents,i=r.message,o={$kind:null,toolName:r.toolName,message:i,state:e.state,summary:(0,m.a)(e)};switch(null==n?void 0:n.$kind){case"fileEditData":var a=null==n?void 0:n.fileEditData,c=null==a?void 0:a.filePath,s=null==a?void 0:a.diff;if(void 0===c||void 0===s)return o;return{$kind:"fileEditData",path:c,diff:s,state:e.state,message:i,summary:(0,m.a)(e)};case"createFileData":var u=null==n?void 0:n.createFileData,d=null==u?void 0:u.filePath,f=null==u?void 0:u.content;if(void 0===d||void 0===f)return o;return{$kind:"createFileData",content:f,path:d,state:e.state,message:i,summary:(0,m.a)(e)};case"shellExecutionData":return{$kind:"shellExecutionData",data:n.shellExecutionData,state:e.state,message:i,summary:(0,m.a)(e)};case"readFileData":case"planProgressData":return null;case"packagerInstallData":var p=n.packagerInstallData,h=p.inputLanguage,g=p.inputPackages,v=p.output,y=p.isExecuting,b=p.processId;if(void 0===h||void 0===g)return o;return{$kind:"packagerInstallData",language:h,installed:g,output:void 0===v?void 0:v,isExecuting:void 0!==y&&y,processId:void 0===b?void 0:b,state:e.state,message:i,summary:(0,m.a)(e)};case"toolchainInstallData":return{$kind:"toolchainInstallData",message:i,modules:n.toolchainInstallData.modules,state:e.state,summary:(0,m.a)(e)};case"screenshotData":return{$kind:"screenshotData",imageUrl:n.screenshotData.imageUrl,state:e.state,message:i,summary:(0,m.a)(e)};default:return o}}function eV(e){var t=e.eventId,n=e.isLast,r=e.performPaneOperation,i=e.variant,o=(0,g.useRef)(null),c=(0,l.yp)(),s=c===t||n,f=(0,l.Mi)(t,eW);return((0,g.useEffect)(function(){var e=o.current;s&&e&&requestAnimationFrame(function(){e.scrollIntoView({behavior:"smooth",block:"center"})})},[s]),(0,g.useEffect)(function(){var e=o.current;e&&n&&!c&&requestAnimationFrame(function(){e.scrollIntoView({behavior:"smooth",block:"center"})})},[n,c]),(0,g.useEffect)(function(){var e=o.current;f&&f.state===l.he.IN_PROGRESS&&e&&requestAnimationFrame(function(){e.scrollIntoView({behavior:"smooth",block:"center"})})},[f]),f)?"mobile"===i?(0,a.BX)(d.G,{css:eF.item,innerRef:o,children:[(0,a.tZ)(d.G,{css:eF.itemContent,children:(0,a.tZ)(eH,{data:f,performPaneOperation:r})}),(0,a.tZ)(u.xv,{css:eF.summary,children:f.summary})]}):(0,a.tZ)(d.G,{css:eX.item,innerRef:o,children:(0,a.BX)(d.G,{css:eX.itemContent,children:[(0,a.tZ)(u.xv,{css:eX.itemHeader,color:"dimmer",children:f.summary}),(0,a.tZ)(eH,{data:f,performPaneOperation:r})]})}):null}function eH(e){var t=e.data,n=(0,o._)(e,["data"]);switch(null==t?void 0:t.$kind){case"fileEditData":return(0,a.tZ)(eg,(0,i._)({path:t.path,diff:t.diff},n));case"createFileData":return(0,a.tZ)(ep,(0,i._)({path:t.path,code:t.content},n));case"shellExecutionData":return(0,a.tZ)(eP,(0,i._)({data:t.data},n));case"packagerInstallData":return(0,a.tZ)(eT,{language:t.language,installed:t.installed,output:t.output,isExecuting:t.isExecuting,processId:t.processId});case"toolchainInstallData":return(0,a.tZ)(eM,{modules:t.modules});case"screenshotData":return(0,a.tZ)(eN,{imageUrl:t.imageUrl});default:return(0,a.BX)(d.G,{children:[(0,a.tZ)(s.E,{icon:(0,a.tZ)(p.Z,{}),text:"No renderer",colorway:"warning"}),(0,a.tZ)(c.Z,{json:t})]})}}},79484:function(e,t,n){n.d(t,{N2:function(){return U},ZP:function(){return O},yx:function(){return M}});var r=n(27387),i=n(42516),o=n(66626),a=n(96583),l=n(3796),c=n(54236),s=n(29574),u=n(14118),d=n(99595),f=n(23261),p=n(96949),h=n(79904),m=n(9602),g=n(86466),v=n(24766),y=n(93245),b=n(36809),w=n(7935),Z=n(85551),x=n(26996),C=n(10055),k=n(63163),S=n(23882),_=n(37121),T=n(86691),E=n(86283),R=n(25949),D=n(24200),I=n(75271),B=n(3102),A=n(52589),P=n(35370),G=function(e){return"color-mix(in srgb, ".concat(k.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},L=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return e={},(0,i._)(e,g.dj.interactiveBackground,G(t)),(0,i._)(e,g.dj.interactiveBackgroundActive,G(t+.1)),e},N=(0,b.X)({root:[k.l0.rowWithGap(4),k.l0.align.start,k.l0.p(4),k.l0.m(4),k.l0.border({color:k.TV.blurpleDimmer,width:1}),k.l0.borderRadius(4),{backgroundColor:"color-mix(in srgb, ".concat(k.TV.blurpleDimmest," 25%, transparent)")}],icon:[k.l0.p(4)],centerContent:[k.l0.colWithGap(4),k.l0.flex.growAndShrink(1)],suggestedPromptButton:[g.gU.filled,L()],closeButton:[g.gU.filled,L(0)],chatInputContainer:[k.l0.position.relative],promptInput:[L()],sendButton:[k.l0.position.absolute,k.l0.right(4),k.l0.top(4)]});function O(e){var t,n,i,s=e.codeEditorView,u=e.filePath,g=e.onDismiss,b=e.performPaneOperation,C=(0,d.Z)(),D=C.hideMessage,G=C.showNotice,L=(0,I.useRef)(null),O=(0,S.Z)().fs,M=(0,R.Se)().getDescription({type:"ghostwriterChat"}),X=(n=(t=(0,o._)((0,I.useState)(!0),2))[0],i=t[1],(0,I.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,O.readFile(u)];case 1:return(e=t.sent()).error||i(""===e.content.toString()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[u,O]),!n&&!(0,P.gK)(u)&&(0,c.P0)(u)),F=(0,P.t9)(u),W="Explain ".concat(F?"dependencies":"code"," in ").concat(u),V=(0,I.useCallback)(function(){b({operation:"open",secondary:!0,pane:{type:"preferences"}}),null!=L.current&&(D(L.current),L.current=null)},[b,D]),H=(0,c.Un)(),z=(0,E.c)(),j=(0,c.bD)({getFileContext:z,onSession:function(e){b({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}}),(0,p.j)(A.U3.TOOL_OPENED,{source:"AI Chat Callout",tool:"ghostwriterChat"})}}).sendMessage,q=(0,o._)((0,c.Ni)(),1)[0],J=(0,c.vl)(),Y=(0,B.yL)(J.qualified).messageCharacters,$=(0,I.useCallback)(function(e,t){var n=O.getOTVersion(u),r=null==s?void 0:(0,T.Z)(s.state,u,n);j({kind:"message",message:e,intent:t,codeReference:r,fileContext:null==r?void 0:[r],model:"advanced"===q?c.BY.ADVANCED:c.BY.BASIC},{newSessionType:c.FF.CHAT})},[u,O,q,j,s]),K=(0,o._)((0,I.useState)(null),2),Q=K[0],ee=K[1];return(0,f.D)(A.U3.AI_CALLOUT_IN_DEFAULT_EDITOR_SHOWN),(0,I.useEffect)(function(){null==Q||Q.animatePlaceholder()},[Q]),(0,l.BX)(y.G,{css:N.root,children:[(0,l.tZ)(Z.Z,{size:24,css:N.icon}),(0,l.BX)(y.G,{css:N.centerContent,children:[(0,l.tZ)(v.xv,{multiline:!0,children:M}),X?(0,l.tZ)(h.zx,{css:N.suggestedPromptButton,iconLeft:(0,l.tZ)(x.Z,{color:k.TV.blurpleDefault}),text:W,onClick:function(){$(W,c.$h.EXPLAIN),g()}}):null,(0,l.tZ)(y.G,{css:N.chatInputContainer,children:(0,l.tZ)(_.x,{inputRef:ee,isConnected:H,maxLength:Y,lastEventInProgress:!1,loading:!1,variant:"compact",placeholderText:"Type message to start AI chat",analyticsSurface:"default_editor_ai_callout",onSubmit:function(e){$(e,c.$h.NONE),g()},onStop:function(){}})})]}),(0,l.tZ)(m.hU,{css:N.closeButton,alt:"Dismiss",onClick:function(){g(),(0,p.j)(A.U3.AI_CALLOUT_IN_DEFAULT_EDITOR_DISMISSED),L.current=G((0,l.tZ)(U,{onPreferencesClick:V}),8e3)},children:(0,l.tZ)(w.Z,{})})]})}function U(e){var t=e.onPreferencesClick;return(0,l.BX)(v.xv,{multiline:!0,children:["AI chat can always be found in the workspace tools list.",(0,l.tZ)("br",{}),"Visit User Preferences to change how AI features are presented in new Repls.",(0,l.tZ)(h.zx,{iconLeft:(0,l.tZ)(C.Z,{}),text:"Open User Preferences",onClick:t,colorway:"blue"})]})}function M(){var e=(0,u.P5)({controlName:"flag-default-layout-ai-in-the-editor"}),t=(0,s.Gn)("highlightAiChatInDefaultLayout").preferences,n=(0,D.Wl)(),r=(0,D.ho)();return{isAiCalloutVisible:e&&!1!==t.highlightAiChatInDefaultLayout&&n,handleDismiss:function(){return r(!1)}}}},36608:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(3796),i=n(11782),o=n(24766),a=n(93245),l=n(63163);function c(e){var t=e.textVariant;return(0,r.BX)(o.xv,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.tZ)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(a.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(c,{textVariant:t}),n?(0,r.tZ)(i.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},83918:function(e,t,n){n.d(t,{$:function(){return eT},u:function(){return eA}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(69593),c=n(80403),s=n(65895),u=n(35139),d=n(23572),f=n(51442),p=n(66626),h=n(50575),m=n(36021),g=n(51271),v=n(22436),y=n(93949),b=n(93158),w=n(12009),Z=n(38866),x=n(51619),C=n(41639),k=n(20260),S=n(21460),_=n(98724),T=n(41464),E=n(82424),R=n(63163),D=n(89441),I=n(7225),B=function(e){var t=new Set(D.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,p._)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");n.set(s,[u,null!=d?d:R.TV.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[I.SymbolKind.Array,k.Z],[I.SymbolKind.Boolean,E.Z],[I.SymbolKind.Class,m.Z,R.TV.yellowDefault],[I.SymbolKind.Constant,g.Z,R.TV.blueStronger],[I.SymbolKind.Constructor,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Enum,y.Z,R.TV.orangeDefault],[I.SymbolKind.EnumMember,T.Z,R.TV.blueStronger],[I.SymbolKind.Event,h.Z],[I.SymbolKind.Field,_.Z],[I.SymbolKind.File,b.Z],[I.SymbolKind.Function,w.Z,R.TV.blurpleStronger],[I.SymbolKind.Interface,Z.Z,R.TV.blueStronger],[I.SymbolKind.Key,x.Z],[I.SymbolKind.Method,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Module,S.Z,R.TV.purpleDefault],[I.SymbolKind.Namespace,v.Z],[I.SymbolKind.Object,E.Z,R.TV.blueDimmer],[I.SymbolKind.Operator,E.Z],[I.SymbolKind.Package,S.Z,R.TV.purpleDefault],[I.SymbolKind.Property,_.Z],[I.SymbolKind.String,C.Z],[I.SymbolKind.Struct,v.Z],[I.SymbolKind.TypeParameter,T.Z],[I.SymbolKind.Variable,T.Z,R.TV.blueStronger]]);function A(e){var t,n=e.kind,r=(0,p._)(null!==(t=B.get(n))&&void 0!==t?t:[E.Z,R.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}var P=n(96949),G=n(17601),L=n(33323),N=n(62279),O=n(86466),U=n(93245),M=n(75271),X=n(14275),F=n(44817),W=n(99399),V=(0,N.iv)([O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),H={button:(0,N.iv)([R.l0.reset.button,R.l0.p(2),R.l0.rowWithGap(4),R.l0.align.center,V]),text:(0,N.iv)({fontSize:R.TV.fontSizeSmall})},z={opacity:1};function j(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,s=(0,X.U)(l,o).buttonProps,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.BX)(U.G,(0,i._)((0,r._)({tag:"button",css:H.button,style:f||c?z:void 0,innerRef:o},(0,W.d)(s,d)),{children:[t?(0,M.cloneElement)(t,{size:16}):null,(0,a.tZ)(U.G,{css:H.text,children:n})]}))}var q={root:(0,N.iv)([R.l0.p(4),R.l0.rowWithGap(4),R.l0.align.center]),text:(0,N.iv)([R.l0.truncate,R.l0.flex.growAndShrink(1),{fontSize:R.TV.fontSizeDefault}])};function J(e){return(0,a.BX)(U.G,{css:[q.root],children:[e.icon?(0,M.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(U.G,{css:q.text,children:e.text})]})}var Y=n(63257),$=n(95549),K=n(54971),Q=n(78584),ee=(0,N.iv)([R.l0.p(4)]);function et(e){var t=e.items,n=e.children,o=e.menuProps,l=e.selectedKeys,c=e.onAction,s=(0,$.D)({items:t,children:n,selectedKeys:l,selectionMode:"single"}),u=(0,M.useRef)(null),d=(0,K.H)((0,r._)({items:t,onAction:c},o),s,u);return(0,a.tZ)(U.G,(0,i._)((0,r._)({},d.menuProps),{innerRef:u,css:ee,children:(0,Y._)(s.collection).map(function(e){return(0,a.tZ)(ei,{item:e,state:s},e.key)})}))}var en={root:(0,N.iv)([R.l0.flex.row,R.l0.align.center,R.l0.position.relative,V]),selected:(0,N.iv)([{opacity:1,backgroundColor:O.vb.interactiveBackground}])},er={opacity:1};function ei(e){var t=e.item,n=e.state,o=(0,M.useRef)(null),l=(0,Q.i)({key:t.key},n,o),c=l.menuItemProps,s=l.isSelected,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.tZ)(U.G,(0,i._)((0,r._)({innerRef:o,css:[en.root,s&&en.selected],style:f||s?er:void 0},(0,W.d)(c,d)),{children:t.rendered}))}var eo=n(66691),ea=n(14548),el=n(82892),ec=n(40299),es=n(83988),eu={underlay:(0,N.iv)([R.l0.coverContainer,R.l0.position.fixed]),surface:(0,N.iv)([R.l0.borderRadius(8),{boxShadow:R.TV.shadow2,border:"1px solid",borderColor:R.TV.backgroundHighest}])};function ed(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,p._)((0,eo.Z)(),2),s=c[0],u=c[1],d=(0,el.S)({placement:o,triggerRef:n,popoverRef:s,offset:8},t),f=d.popoverProps,h=d.underlayProps;return(0,a.BX)(ec.aV,{children:[(0,a.tZ)(U.G,(0,i._)((0,r._)({},h),{css:eu.underlay})),(0,a.BX)(ea.Tg,(0,i._)((0,r._)({elevated:!0,css:eu.surface,innerRef:u},f),{children:[(0,a.tZ)(es.U,{onDismiss:t.close}),l,(0,a.tZ)(es.U,{onDismiss:t.close})]}))]})}var ef=n(95195);function ep(e){return CSS.escape(e.name)}function eh(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,f.W)({onOpenChange:function(e){e&&(0,P.j)(P.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=(0,M.useRef)(null),s=(0,ef.u)({},l,c),u=s.menuTriggerProps,d=s.menuProps,p=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(j,{text:o,icon:i,innerRef:c,ariaProps:u,active:l.isOpen}),l.isOpen?(0,a.tZ)(ed,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(et,{menuProps:d,items:n,selectedKeys:p,onAction:function(e){var t=n.find(function(t){return ep(t)===e});t&&(r(t.selectionRange.start),(0,P.j)(P.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(G.ck,{children:(0,a.tZ)(J,{icon:(0,a.tZ)(A,{kind:e.kind}),text:e.name})},ep(e))}})}):null]})}var em=M.memo(function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map(function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(M.Fragment,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(eh,{symbols:o,icon:(0,a.tZ)(A,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},ep(e)):null}),(null==o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(eh,{symbols:o,text:"...",moveCursor:r})]}):null]})}),eg=(0,M.memo)(function(e){var t,n=e.view,r=(0,M.useCallback)(function(e){null==n||n.dispatch({scrollIntoView:!0,selection:c.jT.cursor((0,d.RL)(n.state.doc,e))}),null==n||n.focus()},[n]),i=(0,M.useDeferredValue)({symbols:(0,u.IK)(n,s.AU),symbolsPath:(0,u.IK)(n,s.qU)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,a.tZ)(em,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),ev=n(36809),ey=n(16865),eb=n(62407),ew=n(28065),eZ=n(10578),ex=n(99319),eC=n(35370),ek=n(28365),eS=n(49424),e_=n(54236),eT=(0,M.memo)(function(e){var t=e.path,n=e.performPaneOperation,r=(0,ek.uN)(),i=(0,M.useCallback)(function(e){n({operation:"open",pane:(0,ex.$E)(e)})},[n]);return(0,a.BX)(ex.h4,{children:[(0,a.tZ)(ex.Qc,{children:(0,a.tZ)(eS.tr,{path:t,onFileClick:i,children:(0,a.tZ)(eg,{view:r})})}),(0,a.tZ)(ex.LI,{children:(0,a.tZ)(eR,{path:t,performPaneOperation:n})})]})}),eE=(0,ev.X)({button:[R.l0.reset.button,R.l0.p(2),R.l0.height(22),R.l0.rowWithGap(4),R.l0.align.center,O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],text:[{fontSize:R.TV.fontSizeSmall}]});function eR(e){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eD,(0,r._)({},e)),(0,a.tZ)(eI,(0,r._)({},e)),(0,a.tZ)(eB,(0,r._)({},e))]})}function eD(e){var t=e.path,n=(0,e_.$g)(),r=(0,ek.uN)(),i=(0,u.IK)(r,l.Gz);return(0,u.IK)(r,l.SD)&&r&&!n?(0,a.tZ)(eA,{dataCy:"ws-format-btn",altText:"Format "+(0,eC.UO)(t),buttonText:"Format",disabled:null!=i?i:void 0,"aria-disabled":!!i||void 0,icon:i?(0,a.tZ)(eZ.Z,{}):(0,a.tZ)(eb.Z,{}),onClick:function(){i||(0,l.z1)(r)}}):null}function eI(e){var t=e.path,n=e.performPaneOperation;return(0,eC.gK)(t)?(0,a.tZ)(eA,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"markdown",data:{path:t}}})}}):null}function eB(e){var t=e.path,n=e.performPaneOperation;return(0,eC.B4)(t)?(0,a.tZ)(eA,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"media",data:{path:t}}})}}):null}function eA(e){var t=e.altText,n=e.buttonText,l=e.icon,c=(0,o._)(e,["altText","buttonText","icon"]);return(0,a.BX)(U.G,(0,i._)((0,r._)({},c),{alt:t,tag:"button",css:eE.button,children:[(0,a.tZ)(ew.Pd.Provider,{value:{size:12},children:l}),(0,a.tZ)(U.G,{css:eE.text,children:n})]}))}},90333:function(e,t,n){n.d(t,{pZ:function(){return eB},aT:function(){return eI},jg:function(){return e_},fD:function(){return eT},Ls:function(){return eS}});var r=n(27387),i=n(63257),o=n(96583),a=n(3796),l=n(80403),c=n(3030),s=n(26677),u=n(69593),d=n(31682),f=n(24169),p=n(13054);function h(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return l.jT.create(r)}var m=n(54923),g=n(85188),v=n(60482),y=n(62502),b=n(92799),w=n(4960),Z=n(70125),x=n(42305),C=n(23572),k=n(14118),S=n(52657),_=n(54505),T=n(10777),E=n(96949),R=n(36809),D=n(11006),I=n(40765),B=n(96601),A=n(19453),P=n(27840),G=n(86201),L=n(72285),N=n(6674),O=n(84896),U=n(89313),M=n(27060),X=n(93158),F=n(62407),W=n(85551),V=n(26996),H=n(43447),z=n(23802),j=n(35870),q=n(77402),J=n(61984),Y=n(89774),$=n(59830),K=n(78121),Q=n(63163),ee=n(21480),et=n(11208),en=n(2309),er=n(23882),ei=n(50664),eo=n(37493),ea=n(78660),el=n(17546),ec=n(31252),es=n(70625),eu=n(77244),ed=n(75271),ef=n(6843),ep=n(42354),eh=n(23469),em=n(98841),eg=n(54236),ev=n(70793),ey=n(85234),eb=n.n(ey),ew=n(13585),eZ=n(86691),ex=(0,R.X)({ghostwriterIcon:[Q.l0.color.blurpleStronger]});function eC(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:ef.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function ek(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[f.Q.of({id:eb()(),codeReference:r,type:"ghostwriterKillswitch"}),c.tk.scrollIntoView(n.to,{y:"center"})]})}function eS(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){var o=e.state,a=o.doc,s=o.selection,u=o.lineBreak,d=a.lineAt(s.main.head);d.length&&e.dispatch({changes:{from:d.to,insert:u},selection:l.jT.cursor(d.to+1)});var p=n.getOTVersion(t),h=(0,eZ.Z)(e.state,t,p);if((0,E.j)(E.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){ek({view:e,mainSelection:e.state.selection.main,codeReference:h});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({id:eb()(),codeReference:h,type:"generateCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[t,n,r])}function e_(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:h(e.state)});var o=n.getOTVersion(t),a=(0,eZ.Z)(e.state,t,o);if(r){ek({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,E.j)(E.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({id:eb()(),type:"transformCode",codeReference:a,source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[t,n,r])}function eT(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:h(e.state)});var o,a,l,s,u=n.getOTVersion(t),d=(0,eZ.Z)(e.state,t,u);(0,E.j)(E.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var p=e.state.selection.main.to-e.state.selection.main.from>eg.hm;if(p){a=(o={view:e,mainSelection:e.state.selection.main,codeReference:d}).view,l=o.mainSelection,s=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[f.Q.of({id:eb()(),codeReference:s,type:"codeLengthExceeded"}),c.tk.scrollIntoView(l.to,{y:"center"})]});return}if(r||p){ek({view:e,mainSelection:e.state.selection.main,codeReference:d});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({id:eb()(),codeReference:d,type:"explainCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[n,t,r])}var eE=new x.j(function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,r=e.data;if(("context"===r.type||"action"===r.type)&&r.keyboardShortcut){var i=Array.isArray(r.keyboardShortcut)?r.keyboardShortcut.join(" "):r.keyboardShortcut;n.push({run:function(n){if("action"===r.type)return r.run(null),!0;var i=n.state.selection.main.head;return"context"!==r.type||r.label!==eR||n.state.wordAt(i)?t(e):(0,w.J)(n,{message:"You cannot rename this element",offset:i}),!0},key:i,preventDefault:!0})}}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return c.$f.of(n)}),eR="Rename all occurrences",eD=function(){var e=(0,ec.gf)("editor.action.saveFile");return(0,ed.useCallback)(function(t){var n=[];return n.push(eC({label:"Save file",icon:(0,a.tZ)(K.Z,{}),keyboardShortcut:e,run:function(){(0,ev.Q)(t)}})),n},[e])};function eI(e){var t,n,l,c,f,h,w,x,E,R,K,Q,em,eg,ev,ey,eb,eZ,ek,eI=e.path,eB=e.view,eA=e.onCommand,eP=(t=eS({path:eI}),n=e_({path:eI}),l=eT({path:eI}),c=(0,ec.gf)(ep.x.id),(0,ed.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return t&&!i&&r.push(eC({label:"Generate with AI",icon:(0,a.tZ)(H.Z,{css:ex.ghostwriterIcon}),keyboardShortcut:c,run:function(){t(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(eC({label:"Explain with AI",icon:(0,a.tZ)(V.Z,{css:ex.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){l(e,"action_menu")}})),r.push(eC({label:"Modify with AI",icon:(0,a.tZ)(z.Z,{css:ex.ghostwriterIcon}),keyboardShortcut:c,dataCy:"context-menu-TransformCode",run:function(){n(e,"action_menu")}}))),r},[t,n,l,c])),eG=(f=(0,ec.gf)("editor.action.startThread"),(0,ed.useCallback)(function(e){var t=[];return t.push(eC({label:"Start thread",icon:(0,a.tZ)(A.Z,{}),keyboardShortcut:f,run:function(){(0,ei.h$)(e)}})),t},[f])),eL=(0,ed.useCallback)(function(e){var t=[eC({label:"Copy link to position",icon:(0,a.tZ)(q.Z,{}),run:function(){var t=(0,C.sg)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,eu.dr)({path:eI,line:n+1,col:r});(0,_.Z)(i)}}),eC({label:"Copy",icon:(0,a.tZ)(N.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=(0,p.I)(e.state).text;(0,_.Z)(t)}}),eC({label:"Cut",icon:(0,a.tZ)(O.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=(0,p.I)(e.state),n=t.text,r=t.ranges;(0,_.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&t.push(eC({label:"Paste",icon:(0,a.tZ)(G.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),T.kg.error("CodeMirror context menu paste failed",{message:n.message}),[2];case 4:return(0,Z.l)({filePath:eI,view:e,clipboardText:t}),[2]}})})()}})),t},[eI]),eN=(h=(0,et.Z)(eI),w=(0,en.Z)(h),x=(0,ed.useRef)(null),E=(0,er.Z)().fs,R=(0,k.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),K=(0,ec.gf)("editor.action.goToDefinition"),Q=(0,ec.gf)("editor.action.goToTypeDefinition"),em=(0,ec.gf)("editor.action.goToImplementation"),eg=(0,ec.gf)("editor.action.goToReferences"),ev=(0,ec.gf)("editor.selection.allOccurrences"),ey=(0,ec.gf)("editor.action.sourceActions"),eb=(0,ec.gf)("editor.action.formatDocument"),eZ=(0,ec.gf)("editor.action.codeActions"),(0,ed.useCallback)(function(e){var t=[],n=w&&h.length;n&&w.isFindDefinitionSupported&&t.push(eC({label:"Go to definition",icon:(0,a.tZ)(M.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,v.wK)(e,t)},keyboardShortcut:K})),n&&w.isFindTypeDefinitionSupported&&t.push(eC({label:"Go to type definition",icon:(0,a.tZ)(D.Z,{}),run:function(){(0,v.OM)(e)},keyboardShortcut:Q})),n&&w.isFindImplementationSupported&&t.push(eC({label:"Go to implementation",icon:(0,a.tZ)($.Z,{}),run:function(){(0,v.Zc)(e)},keyboardShortcut:em})),n&&(w.isFindDefinitionSupported||w.isFindReferencesSupported)&&t.push(eC({label:"Show references",icon:(0,a.tZ)(I.Z,{}),keyboardShortcut:eg,run:function(){(0,y.Z)(e)}})),t.push(eC({label:"Find in Repl",icon:(0,a.tZ)(Y.Z,{}),run:function(){var t=(0,p.I)(e.state).text;(0,ew.ZM)(e.state,{pane:{type:"searchReplace",data:{initialQuery:t}}})}})),n&&w.isRenameSupported&&(R?t.push(eC({label:eR,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2",run:function(){(0,b.Z)(e)}})):t.push({match:ef.pl,data:{type:"context",label:eR,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2"},commands:function(t){var n=t.active,i=t.searchQuery;return n&&i?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,a.tZ)(P.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,r._)(function(){var t,n,r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=h.find(function(e){return(0,eh.Z)(e).isRenameSupported})))return[2,{type:"error",message:"Rename is not supported"}];if(n=e.state.selection.main.head,!e.state.wordAt(n))return[2,{type:"error",message:"You cannot rename this element"}];return x.current&&t.notify.cancelRequest(x.current),x.current=t.generateId(),[4,t.request.rename(eI,(0,C.sg)(e.state.doc,n),i,{id:x.current,tap:function(t){return(0,m.SC)(e,t)}})];case 1:if((r=o.sent()).cancelled)return[2];if("error"in r)return[2,{type:"error",message:"Something went wrong renaming ".concat(r.error.message)}];if(!(a=r.result))return[2];return(0,ee.w)({edit:a,fs:E,client:t}),[2]}})})()}}}]:[]}})),e.state.facet(u.SD)&&t.push(eC({label:"Format document",icon:(0,a.tZ)(F.Z,{}),keyboardShortcut:eb,run:function(){(0,u.z1)(e)}})),!e.state.selection.main.empty&&e.state.facet(d.R2)&&t.push(eC({label:"Format selection",icon:(0,a.tZ)(F.Z,{}),run:function(){(0,u.uy)(e)}})),t.push(eC({label:"Select all occurrences",icon:(0,a.tZ)(L.Z,{}),keyboardShortcut:ev,run:function(){(0,ei.SK)(e)}}));var i=void 0!==e.state.field(s.K0,!1);return n&&i&&t.push(eC({label:"Toggle breakpoint",icon:(0,a.tZ)(B.Z,{}),run:function(){(0,ei.QF)(e)}})),n&&w.isCodeActionsSupported&&(w.isSourceActionsSupported&&t.push(eC({label:"Source actions",icon:(0,a.tZ)(X.Z,{}),keyboardShortcut:ey,run:function(){(0,g.Z5)(e)}})),t.push(eC({label:"More actions",icon:(0,a.tZ)(j.Z,{}),keyboardShortcut:eZ,run:function(){(0,g.b7)(e,{force:!0})}}))),t},[w,h,ev,ey,K,Q,em,eg,R,eI,E,eb,eZ])),eO=(ek=(0,ea.s6)(el.Y.EditorContextMenu),(0,ed.useCallback)(function(e){var t=[];return t.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:var i;return t=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(ek.map((i=(0,r._)(function(e){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.create({path:t})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,eo.C)(n,{path:t})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),t},[ek])),eU=eD(),eM=(0,k.P5)({controlName:"flag-draft-buffers"}),eX=(0,ed.useMemo)(function(){return eB?eN(eB):[]},[eB,eN]),eF=(0,S.Z)(eA),eW=(0,ed.useCallback)(function(e){eF.current(e)},[eF]),eV=eE.use(eX,eW);return[(0,ed.useCallback)(function(){var e=eB?[{data:{type:"context",label:"AI",icon:(0,a.tZ)(W.Z,{})},commands:function(){return eP(eB)}},{data:{type:"context",label:"Code actions",icon:(0,a.tZ)(j.Z,{})},commands:function(){return eN(eB)}}].concat((0,i._)(eM?[{data:{type:"context",label:"File actions",icon:(0,a.tZ)(X.Z,{})},commands:function(){return eU(eB)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.tZ)(A.Z,{})},commands:function(){return eG(eB)}},{data:{type:"context",label:"Clipboard",icon:(0,a.tZ)(G.Z,{})},commands:function(){return eL(eB)}},{data:{type:"context",label:"Extensions",icon:(0,a.tZ)(J.Z,{})},commands:function(){return eO({view:eB,filePath:eI})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(Y.Z,{})},commands:function(){return e}}},[eB,eP,eN,eG,eL,eU,eI,eO,eM]),eV]}var eB=new x.j(function(e,t,n){return e?null:[(0,em.a)(t),c.tk.domEventHandlers({contextmenu:function(e,t){var r=e.clientX,i=e.clientY,o=t.state.selection.main,a=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===a?c:a;if(s<o.from||s>o.to){var u=l.jT.cursor(s);t.dispatch({selection:u})}return n(e),!0}})]})},69967:function(e,t,n){n.d(t,{u:function(){return ek}});var r,i=n(66626),o=n(3796),a=n(12285),l=n(42516),c=n(80403),s=n(3030),u=n(61873),d=n(42305),f=n(36809),p=n(24766),h=n(63163),m=n(93245),g=n(31252),v=n(81202),y=n.n(v),b=n(84797),w=n(52927),Z=n(64988),x=n(69284),C=(0,f.X)({root:[h.l0.p(16),h.l0.align.center,h.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[h.l0.reset.button,h.l0.rowWithGap(6),h.l0.align.center,h.l0.color.foregroundDimmest,h.l0.cursor.pointer,{fontFamily:h.TV.fontFamilyDefault,"*":{borderColor:h.TV.foregroundDimmest,color:h.TV.foregroundDimmest},":hover *":{borderColor:h.TV.foregroundDefault,color:h.TV.foregroundDefault}}],iconText:[h.l0.rowWithGap(4)]}),k={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},S=s.tk.theme((r={},(0,l._)(r,".".concat(k.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,l._)(r,".".concat(k.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),_=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,w.V)((0,o.tZ)(m.G,{css:C.root,children:t.map(function(e){return(0,o.BX)(m.G,{css:C.button,onClick:function(){return e.onClick(n)},children:[(0,o.BX)(m.G,{css:C.iconText,children:[e.icon,(0,o.tZ)(p.xv,{variant:"small",children:e.text})]}),e.shortcut?(0,o.tZ)(g.bM,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=k.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return y()(e.options,this.options)},e}(),T=new d.j(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(b.$)||(null===(t=e.field(u.xg,!1))||void 0===t?void 0:t.size)||e.field(x.PQ,!1))},n=c.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,s.EY)({above:!0,class:k.layer,update:function(e){return(0,Z.aU)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new _({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[S,n,r]}),E=n(68453),R=n(37505),D=n(13387),I=n(42965),B=n(96949),A=n(58532),P=n(43447),G=n(21460),L=n(59830),N=n(62279),O=n(53250),U=n(86466),M=n(75710),X=n(10578),F=n(75271),W=n(41733),V=n(21262),H=n(71440),z=n(9122);function j(){var e=(0,V._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}var q={},J=(0,H.Ps)(j());function Y(e){var t=(0,W._)({},q,e);return z.a(J,t)}var $=m.K.button;function K(e){var t=e.name,n=e.children,r=e.onClick;return(0,o.BX)($,{onClick:function(){return r()},css:[U.gU.nofill,h.l0.p(8),h.l0.focusRing,h.l0.textAlign.left],children:[(0,o.tZ)(p.xv,{variant:"subheadDefault",css:h.l0.pb(16),multiline:!1,children:t}),(0,o.tZ)(m.G,{css:[h.l0.backgroundColor.backgroundDefault,h.l0.p(8),h.l0.borderRadius(8)],children:n})]})}var Q="@media (min-width: ".concat(M.j.tabletMax,"px)"),ee=(0,N.iv)([h.l0.colWithGap(16),(0,l._)({},Q,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function et(e){var t=e.children;return(0,o.tZ)(m.G,{css:[(0,l._)({},Q,[h.l0.rowWithGap(16)])],children:t})}function en(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,o.BX)(m.G,{css:[h.l0.colWithGap(24)],children:[(0,o.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.tZ)(p.xv,{children:"Get started with some program examples."}),(0,o.BX)(et,{css:[h.l0.colWithGap(16)],children:[(0,o.tZ)(m.G,{css:ee,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.tZ)(m.G,{css:ee,children:n.slice((n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function er(e){var t=e.filePath,n=e.language,r=e.onSelect,i=Y({variables:{language:n}}),a=i.data,l=i.loading,c=i.error;if(l)return(0,o.tZ)(m.G,{css:[h.l0.colWithGap(0),h.l0.justify.center,h.l0.align.center,h.l0.pt(32),h.l0.pb(32)],children:(0,o.tZ)(X.Z,{})});if(c)return(0,o.tZ)(m.G,{css:[h.l0.colWithGap(0),h.l0.justify.center,h.l0.align.center,h.l0.pt(32),h.l0.pb(32)],children:c.message});var s=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,o.tZ)(en,{mainFile:t,examples:s,onSelect:r}):(0,o.tZ)(m.G,{css:[h.l0.colWithGap(0),h.l0.justify.center,h.l0.align.center,h.l0.pt(32),h.l0.pb(32)],children:(0,o.BX)(p.xv,{children:["Sorry, this language doesnt have any examples. Want to add some? Contact us at ",(0,o.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var ei=n(42354),eo=n(12379),ea={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"},el=n(85983),ec=n(18068);function es(){var e=(0,V._)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ed=(0,H.Ps)(es()),ef=n(73581),ep=n(49205),eh=n(35370),em=n(37701),eg=n(13585),ev=n(14118),ey=n(43977);function eb(e){var t=e.cta,n=e.version;(0,B.j)(B.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}var ew=c.Py.define(),eZ=c.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,R.j)(t,ew,function(e){n=e.value}),n}}),ex=E.t.from(eZ,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ew.of(null)})};return(0,o.tZ)(A.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.tZ)(eS,{onRequestClose:r,language:t,filePath:n})})}}}),eC=[eZ,ex];function ek(e){var t,n,r,i,a,l,c,s,u,d,f,p,h,m,v,y,b=e.isMobile,w=e.filePath,Z=e.generateCode,x=(0,ev.P5)({controlName:"flag-integrations-pane-experiment"}),C=(0,g.gf)(ei.x.id),k=null!==(v=null===(p=D.$R.from(w))||void 0===p?void 0:p.id)&&void 0!==v?v:null,S=(0,em.v)().isTeamWithAiDisabled,_=Y({variables:{language:k},skip:!k}).data,E=(a=(t={filePath:w,language:k}).filePath,l=t.language,c=(0,I.T3)(),u=((null==(s=(n=(0,W._)({},eu,void 0),z.a(ed,n)).data)?void 0:null===(r=s.currentUser)||void 0===r?void 0:r.userSubscriptionType)===el.HP.Hacker||(null==s?void 0:null===(i=s.currentUser)||void 0===i?void 0:i.userSubscriptionType)===el.HP.HackerPro)&&l&&["python","javascript","typescript","javascriptreact","typescriptreact"].includes(l),d=(0,eo.Z)(a),f=(0,F.useCallback)(function(e){if(l){var t="python"===l?"python":"typescript";(0,B.j)(B.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:t}),(0,eg.ZM)(e.state,{pane:{type:"docs",data:{url:(0,ec.u)(t)}}}),d&&d({code:ea[t],insertAt:0})}},[d,l]),c?null:u?f:null),R=(null!==(y=null==_?void 0:null===(m=_.languageExamples)||void 0===m?void 0:null===(h=m.examples)||void 0===h?void 0:h.length)&&void 0!==y?y:0)>=1,A=(0,F.useMemo)(function(){var e=[];return(0,eh.gK)(w)||S||e.push({icon:(0,o.tZ)(P.Z,{}),text:"Generate Code with AI",shortcut:b?void 0:C,onClick:function(e){eb({cta:"generate",version:"new"}),Z(e,"shortcut")}}),E&&e.push({icon:(0,o.tZ)(G.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(e){eb({cta:"modelFarm",version:"new"}),E(e)}}),k&&R&&e.push({icon:(0,o.tZ)(L.Z,{}),text:"Start with a code example",onClick:function(e){eb({cta:"examples",version:"new"}),e.dispatch({effects:ew.of({language:k,filePath:w})})}}),x&&e.push({icon:(0,o.tZ)(ey.Z,{}),text:"Add powerful Integrations",onClick:function(e){(0,eg.ZM)(e.state,{pane:{type:"integrations"},secondary:!0}),eb({cta:"integrations",version:"new"}),(0,B.j)(B.U3.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[w,S,E,k,R,x,b,C,Z]);return[T.use(A),eC]}function eS(e){var t=e.onRequestClose,n=e.language,r=e.filePath,a=(0,ep.e$)(ef.Q.id,ef.y.Examples),l=(0,ep.e$)(ef.Q.id,ef.y.Editor),c=(0,i._)((0,F.useState)(!1),2),s=c[0],u=c[1],d=(0,eo.Z)(r),f=(0,F.useRef)(null==a?void 0:a.isActive),p=(0,F.useRef)();p.current=null==a?void 0:a.isActive;var h=(0,F.useRef)(null==a?void 0:a.goto);return(h.current=null==a?void 0:a.goto,(0,F.useEffect)(function(){return function(){var e;p.current&&(null===(e=h.current)||void 0===e||e.call(h,ef.y.Editor))}},[]),(0,F.useEffect)(function(){if((null==l?void 0:l.isActive)&&!f.current){if(!s){u(!0);return}l.goto(ef.y.Examples)}},[l,t,s]),(0,F.useEffect)(function(){if(null==a?void 0:a.isActive){f.current=!0;return}f.current&&t(null)},[t,null==a?void 0:a.isActive]),d)?(0,o.tZ)("div",{ref:null==a?void 0:a.tourRef,children:(0,o.tZ)(er,{filePath:r,language:n,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,o.tZ)("div",{children:"Please make sure you have a file open"})}},86691:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(54236),i=n(35370);function o(e,t,n){var o=e.selection.main,a=e.sliceDoc(o.from,o.to),l=(0,i.r6)(t);return{code:a,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:o.from,indexTo:o.to,lineFrom:e.doc.lineAt(o.from).number,lineTo:e.doc.lineAt(o.to).number},language:l,referenceType:r.MD.INLINE}}},42354:function(e,t,n){n.d(t,{x:function(){return K},W:function(){return Q}});var r,i=n(3796),o=n(3030),a=n(12285),l=n(42516),c=n(41733),s=n(30509),u=n(80403),d=n(42305),f=n(22192),p=n(67790),h=n(86466),m=n(14548),g=n(24766),v=n(22419),y=n(93245),b=n(36809),w=n(31940),Z=n(63163),x=n(31252),C=n(66610),k=n(81202),S=n.n(k),_=n(75271),T=n(84797),E=n(52927),R=n(37505),D=n(64988),I=n(24281),B=(0,f.$)(["opacity","transform"]),A=B.cssVars,P=B.styleTokens,G=[Z.l0.display.flex,Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.center,h.gU.nofill,Z.l0.height("100%"),Z.l0.borderRadius(0)],L=[G,Z.l0.width(28),{"& svg":Z.l0.display.block}],N=(0,b.X)({root:[Z.l0.align.stretch,Z.l0.flex.row,Z.l0.borderRadius(6),Z.l0.border({color:Z.TV.outlineDefault}),Z.l0.position.relative,Z.l0.height(30),{opacity:P.opacity,transform:P.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:L,button:[G,Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pl(4),Z.l0.pr(6),Z.l0.flex.growAndShrink(1),Z.l0.border({direction:"right",color:Z.TV.outlineDefault}),{fontFamily:Z.TV.fontFamilyDefault,"*":{color:Z.TV.foregroundDimmer},":hover *":{color:Z.TV.foregroundDefault},".shortcut":{color:Z.TV.foregroundDimmest},":hover .shortcut":{color:Z.TV.foregroundDimmer}}],iconButton:[L,Z.l0.border({direction:"right",color:Z.TV.outlineDefault})],tooltip:[Z.l0.rowWithGap(2),Z.l0.align.center]}),O=new E.J(function(e){var t,n=e.controls,r=e.verticalPlacement,o=e.onMoreClick,a=(0,_.useRef)(null),u=(0,I.NJ)(),d=(0,C.xx)();(0,_.useEffect)(function(){var e;d(),(0,p.A)(a,(e={},(0,l._)(e,A.opacity,"1"),(0,l._)(e,A.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space4,"))")),e))},[r,d]);var f=(0,_.useRef)((0,C.qm)());return(0,i.BX)(m.Tg,{innerRef:a,elevated:!0,css:N.root,style:(t={},(0,l._)(t,A.opacity,"0"),(0,l._)(t,A.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space16,"))")),t),children:[n.map(function(e){if(f.current){var t=(0,i.BX)(y.G,{css:N.tooltip,children:[(0,i.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.tZ)(g.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,x.Ih)(e.shortcut,u)}):null]});return(0,i.tZ)(v.u,{tooltip:t,children:function(t,n){return(0,i.tZ)(y.G,(0,s._)((0,c._)({},t),{innerRef:n,css:N.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.BX)(y.G,{css:N.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.BX)(g.xv,{variant:"small",className:"shortcut",children:["(",(0,x.Ih)(e.shortcut,u),")"]}):null]},e.text)}),o?(0,i.tZ)(y.G,{"aria-label":"More",css:N.moreButton,onClick:function(e){var t=(a.current||e.currentTarget).getBoundingClientRect();o({top:t.top,right:t.right})},tag:"button",children:(0,i.tZ)(w.Z,{size:16})}):null]})}),U={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},M=o.tk.theme((r={},(0,l._)(r,".".concat(U.layer),{width:"100%"}),(0,l._)(r,".".concat(U.dom),{position:"absolute"}),r)),X=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=O.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=U.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},t.eq=function(e){return S()(e.options,this.options)},e}(),F=u.Py.define(),W=u.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,R.j)(t,F,function(t){e=t.value}),e)}}),V=u.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),H=o.lg.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,D.aU)(e,V)&&(e.state.field(V)?r():i())},destroy:i}}),z=new d.j(function(e){return[M,(0,o.EY)({above:!0,class:U.layer,update:function(e){return(0,D.aU)(e,T.$,W)},markers:function(t){if(!t.hasFocus)return[];var n=t.state.field(W)?t.state.selection.main:null;if(!n||t.state.field(T.$,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-30,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new X({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),V,W,H]}),j=n(37701),q=n(26996),J=n(23802),Y=n(70625),$=n(97420),K={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,Y.l2)({cmdOrCtrl:!0,key:"i"})};function Q(e){var t=e.editCode,n=e.explainCode,r=e.generateCode,a=e.onMoreClick,l=(0,j.v)().isTeamWithAiDisabled,c=(0,x.gf)(K.id),s=(0,_.useMemo)(function(){if(!c)return[];var e=Array.isArray(c)?c.join(" "):c;return o.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):t(e,"shortcut"),!0}}])},[c,r,t]),u=(0,_.useMemo)(function(){return{controls:function(e){return l?[]:[{text:"Modify with AI",icon:(0,i.tZ)(J.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return t(e,"highlight")},shortcut:c},{text:"Explain with AI",icon:(0,i.tZ)(q.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return n(e,"highlight")}}]},onMoreClick:a}},[t,n,a,c,l]),d=z.use(u);return(0,_.useMemo)(function(){return[d,s]},[d,s])}},25639:function(e,t,n){n.d(t,{r:function(){return f}});var r,i=n(27387),o=n(96583),a=n(49115),l=n(35370),c=n(72106),s=RegExp("_(?<num>\\d+)$");function u(){return(u=(0,i._)(function(e,t){var n,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,l.Il)(t),[4,e.readDir(n||c.Ql)];case 1:if((r=o.sent()).error)return[2,t];return a=(i=function(e){if(r.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,n=(0,l.eb)(e),o=(0,l.r6)(e),a=n.match(s);if(null==a?void 0:null===(t=a.groups)||void 0===t?void 0:t.num){var c=Number(a.groups.num);return i("".concat(n.replace(s,""),"_").concat(c+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,l.UO)(t)),[2,n?n+"/"+a:a]}})})).apply(this,arguments)}var d=n(43257),f=(r=(0,i._)(function(e,t,n){var r,i,c,s,f,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=encodeURI(e.name),[4,function(e,t){return u.apply(this,arguments)}(t,(i=(0,l.Il)(n))?i+"/"+r:r)];case 1:return c=o.sent(),[4,(0,a.pV)(e)];case 2:return s=o.sent(),[4,t.writeFile(c,d.Z.from(s))];case 3:return o.sent(),f=(0,l.eb)(e.name),p=(0,l.UO)(c),[2,"![".concat(f,"](").concat(p,")")]}})}),function(e,t,n){return r.apply(this,arguments)})},43561:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(62279),i=n(63163),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},80264:function(e,t,n){n.d(t,{i:function(){return x},w:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(3796),c=n(25722),s=n(87915),u=n(24766),d=n(93245),f=n(93158),p=n(54300),h=n(63163),m=n(6843),g=n(43257),v=n(47423),y=n(13213);function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(t=e.searchQuery,n=e.paths,r=e.run,i=e.description,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,l.tZ)(s.Z,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,v.xy)({path:e,description:i})}}}})];return[4,(0,v.Rz)(t,n)];case 1:return[2,o.sent().map(function(e){var t=e.path,n=e.score,o=e.ranges;return{data:{type:"action",label:t,icon:(0,l.tZ)(s.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,v.xy)({path:t,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function Z(){return(0,l.BX)(d.G,{css:[h.l0.rowWithGap(8)],children:[(0,l.tZ)(p.Z,{}),(0,l.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function x(e){var t;return(0,m.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,l.tZ)(f.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,m.r0)({defaultScore:y.L.findOrCreateFile}),commands:(t=(0,r._)(function(t){var n,u,d,f,h,m,v,y,w,x,C,k,S,_,T,E,R,D,I,B;return(0,a.Jh)(this,function(A){switch(A.label){case 0:if(n=e.fs,u=e.shouldHideFile,!t.searchQuery&&(!t.active||e.lazyLoad))return[2,[]];return[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=A.sent(),f=[],!(t.searchQuery||t.active))return[3,3];return[4,n.listFiles()];case 2:if((h=A.sent()).error)return c.Tb(Error("Find or create file returned an error"),{extra:{message:h.error}}),[2,[{data:{type:"error",label:h.error,icon:(0,l.tZ)(p.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(Z,{})}}}}]];if(!h.files)throw Error("Expected files");m=!0,v=!1,y=void 0;try{for(w=h.files[Symbol.iterator]();!(m=(x=w.next()).done);m=!0)C=x.value,u(C)||d.includes(C)||f.push(C)}catch(e){v=!0,y=e}finally{try{m||null==w.return||w.return()}finally{if(v)throw y}}A.label=3;case 3:return k=[],[4,Promise.all([b({searchQuery:t.searchQuery,paths:d,description:"Recently opened",run:function(t){e.openFile({path:t})}}),b({searchQuery:t.searchQuery,paths:f,run:function(t){e.openFile({path:t})}})])];case 4:if(_=(S=i._.apply(void 0,[A.sent(),2]))[0],T=S[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:t.searchQuery})];case 5:R=A.sent(),(E=k).push.apply(E,(0,o._)(R)),A.label=6;case 6:return _.length&&(D=k).push.apply(D,(0,o._)(_)),T.length&&(I=k).push.apply(I,(0,o._)(T)),0===T.length&&0===_.length&&t.active&&(B=t.searchQuery,k.push({data:{label:B,description:"Create a new file",icon:(0,l.tZ)(s.Z,{path:B}),type:"action",run:(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(B,g.Z.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+B+'"'}];return e.openFile({path:B}),[2]}})})},match:function(){return{score:1}}})),[2,k]}})}),function(e){return t.apply(this,arguments)})})}},95184:function(e,t,n){n.d(t,{F:function(){return T},q:function(){return _}});var r=n(27387),i=n(66626),o=n(96583),a=n(3796),l=n(25722),c=n(33162),s=n(87915),u=n(24766),d=n(93245),f=n(36809),p=n(89774),h=n(54300),m=n(63163),g=n(6843),v=n(70625),y=n(5438),b=n(13213),w=n(80137),Z=(0,f.X)({root:[m.l0.colWithGap(4),m.l0.align.start,m.l0.flex.growAndShrink(1),m.l0.p(8)],header:[m.l0.rowWithGap(4),m.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:m.TV.fontFamilyCode},m.l0.truncate,m.l0.color.foregroundDimmest]});function x(e){var t=e.path,n=e.line;return(0,a.BX)(d.G,{css:Z.root,children:[(0,a.BX)(d.G,{css:Z.header,children:[(0,a.tZ)(s.Z,{path:t,size:12}),(0,a.BX)(u.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(d.G,{css:Z.singleLine,children:(0,a.tZ)(c.xK,{source:n.content,matches:n.matches})})]})}function C(){return(0,a.BX)(d.G,{css:[m.l0.px(8),m.l0.rowWithGap(8),m.l0.align.center],children:[(0,a.tZ)(h.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function k(){return(0,a.BX)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:[(0,a.tZ)(h.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function S(){return(0,a.tZ)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var _=(0,v.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function T(e){var t,n,c=(0,y.e)({container:e.container});return(0,g.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(p.Z,{}),keyboardShortcut:e.keyboardShortcut?_:void 0},{match:(0,g.r0)({defaultScore:b.L.searchFileContents}),commands:(t=(0,r._)(function(t){var r,u,f,p,m,g,v,y,Z,_,T,E;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!t.searchQuery||!t.active&&e.activeOnly)return[2,[]];return n=r=Math.random(),[4,c({query:t.searchQuery})];case 1:if(f=(u=o.sent()).results,p=u.error,m=u.isPartialResult,r!==n)return[2,[]];if(null!==p){if(!t.active)return[2,[]];return l.Tb(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(h.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]]}g=[],v=!0,y=!1,Z=void 0;try{for(_=function(){var n=(0,i._)(E.value,2),r=n[0];n[1].forEach(function(n){var i=n.matches[0].column;g.push({match:function(){var e=(0,w.jy)(t.searchQuery,n.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*b.r.fileContentsSearch),render:{height:60,content:(0,a.tZ)(x,{path:r,line:n})}}},data:{type:"action",label:r,icon:(0,a.tZ)(s.Z,{path:r}),key:[r,n.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:n.lineNumber,col:i})}}})})},T=Object.entries(f)[Symbol.iterator]();!(v=(E=T.next()).done);v=!0)_()}catch(e){y=!0,Z=e}finally{try{v||null==T.return||T.return()}finally{if(y)throw Z}}if(0===g.length&&t.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];if(t.active){if(0===g.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];m&&g.push({data:{type:"error",label:"error",icon:(0,a.tZ)(h.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(k,{})}}}})}return[2,g]}})}),function(e){return t.apply(this,arguments)})})}},8368:function(e,t,n){n.d(t,{e:function(){return Z}});var r=n(41733),i=n(3796),o=n(12e3),a=n(77558),l=n(4573),c=n(80137),s=n(86466),u=n(379),d=n(24766),f=n(93245),p=n(36809),h=n(63163),m=n(41895),g=n(25949),v=n(24200),y=[{padding:(0,a.fP)(8)}],b=(0,p.X)({root:[y,h.l0.align.center,h.l0.flex.row,{gap:(0,a.fP)(8),"&:hover .icon":{backgroundColor:"var(".concat(s.dj.interactiveBackground,")")}}],iconAndIndicator:[h.l0.position.relative,h.l0.pt(2),{alignSelf:"start"}],iconContainer:[h.l0.position.relative,(0,a.D$)(16),{width:(0,a.fP)(16),height:(0,a.fP)(16)}],textContent:[h.l0.colWithGap(2),h.l0.flex.growAndShrink(1)],titleRow:[h.l0.rowWithGap(4),h.l0.justify.spaceBetween],titleWithAlias:[h.l0.rowWithGap(8)],aliasContainer:[h.l0.rowWithGap(4),h.l0.color.foregroundDimmest,h.l0.align.center],descriptionText:[{fontSize:"0.9em"}]});function w(e){var t=e.pane,n=e.active,a=e.labelHighlights,c=(0,g.Se)(),s=c.Icon({pane:t}),p=c.getTitle(t),h=(0,g.MX)(t),y=c.getTitlePill(t),w=(0,v.b2)({paneType:t.type}),Z=(0,o.O$)();return(0,i.BX)(f.G,{css:b.root,children:[(0,i.BX)(f.G,{css:b.iconAndIndicator,children:[(0,i.tZ)(f.G,{css:b.iconContainer,style:{opacity:e.active?1:.7},children:s}),w?(0,i.tZ)(m.B,{color:w}):null]}),(0,i.BX)(f.G,{css:b.textContent,children:[(0,i.BX)(f.G,{css:b.titleRow,children:[e.alias?(0,i.BX)(f.G,{css:b.titleWithAlias,children:[(0,i.tZ)(d.xv,{children:p}),(0,i.BX)(f.G,{css:b.aliasContainer,children:["(",e.aliasPrefix?(0,i.BX)(d.xv,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.tZ)(l.x,{dimmed:!0,text:e.alias,highlight:a}),")"]})]}):(0,i.tZ)(l.x,{dimmed:!n,text:p,highlight:a}),Z&&null!=y?(0,i.tZ)(u.D,(0,r._)({},y)):null]}),Z&&null!=h?(0,i.tZ)(l.x,{dimmed:!n,text:h,highlight:e.descriptionHighlights,multiline:!0,css:b.descriptionText}):null]})]})}function Z(e){var t=e.pane,n=e.aliases,r=void 0===n?[]:n;return function(e){var n=e.searchQuery,o=e.data,a=e.active;if("group"===o.type)return null;if(!n)return{score:1,render:{content:(0,i.tZ)(w,{pane:t})}};var l=(0,c.jy)(n,o.label,{filterLowMatchScores:!0}),s=null!=o.description?(0,c.jy)(n,o.description,{filterLowMatchScores:!0,fuzzy:!1}):null;if(null!=l||null!=s)return{score:null!==(h=null!==(p=null==l?void 0:l.score)&&void 0!==p?p:null==s?void 0:s.score)&&void 0!==h?h:0,render:{content:(0,i.tZ)(w,{pane:t,labelHighlights:null!==(m=null==l?void 0:l.ranges)&&void 0!==m?m:[],descriptionHighlights:null!==(g=null==s?void 0:s.ranges)&&void 0!==g?g:[],active:a})}};var u=!0,d=!1,f=void 0;try{for(var p,h,m,g,v,y=r[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var b=v.value,Z="string"==typeof b?{alias:b,prefix:void 0}:b,x=Z.alias,C=Z.prefix,k=(0,c.jy)(n,x,{filterLowMatchScores:!0});if(k)return{score:k.score,render:{content:(0,i.tZ)(w,{pane:t,active:a,alias:x,aliasPrefix:C,labelHighlights:k.ranges})}}}}catch(e){d=!0,f=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw f}}return null}}},60273:function(e,t,n){n.d(t,{P:function(){return r}});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]],["integrations",["Cloud Services","OpenAI","Slack"]]])},47846:function(e,t,n){n.d(t,{Z:function(){return er}});var r,i,o=n(27387),a=n(98924),l=n(66626),c=n(96583),s=n(3796),u=n(75271),d=n(14548),f=n(93245),p=n(63163),h=n(39713),m=n(59735),g=n(41733),v=n(30509),y=n(62279),b=n(36809),w=(0,y.F4)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),Z=(0,b.X)({one:{opacity:.1,animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}}),x=function(e){var t=(0,h._)({},(0,m._)(e));return(0,s.BX)(s.HY,{children:[(0,s.tZ)("span",(0,v._)((0,g._)({},t),{css:Z.one,children:"."})),(0,s.tZ)("span",(0,v._)((0,g._)({},t),{css:Z.two,children:"."})),(0,s.tZ)("span",(0,v._)((0,g._)({},t),{css:Z.three,children:"."}))]})},C=n(16155),k=n(23882),S=n(35370);(r=i||(i={})).Unknown="UNKNOWN",r.Npm="NPM",r.Django="DJANGO",r.Flask="FLASK",r.FastAPI="FASTAPI",r.Pyramid="PYRAMID",r.Starlette="STARLETTE",r.Streamlit="STREAMLIT",r.Rails="RAILS",r.DotNet="DOTNET",r.Cargo="CARGO",r.Make="MAKE",r.RegularRun="REGULAR_RUN";var _="package.json",T="requirements.txt",E=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),R=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function D(){return(D=(0,o._)(function(e,t){var n,r,i,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(n=e.initRunCommand,r=e.isCompiled,i=e.allFiles,!((o=new Set(i)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(_))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.r6)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(T))return[3,8];return[4,t.readFile(T)];case 7:if(!(a=c.sent()).error){if((l=a.content.toString()).includes("django"))return[2,"DJANGO"];if(l.includes("flask"))return[2,"FLASK"];if(l.includes("fastapi"))return[2,"FASTAPI"];if(l.includes("pyramid"))return[2,"PYRAMID"];else if(l.includes("starlette"))return[2,"STARLETTE"];else if(l.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(E.test(n))return[2,"REGULAR_RUN"];c.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function I(){return(I=(0,o._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return[4,e.readFile(_)];case 1:t=o.sent();try{if(!t.error&&(r=null==(n=JSON.parse(t.content.toString()))?void 0:n.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function B(){return(B=(0,o._)(function(e,t,n){var r,i,o,a;return(0,c.Jh)(this,function(l){switch(r=t.initRunCommand,o=(i=t.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return I.apply(this,arguments)}(n)];case"REGULAR_RUN":var c;if(null==(a=null!==(c=i.filter(function(e){return!R.test(e)}).find(function(e){return E.test(e)}))&&void 0!==c?c:null))return[2,null];return[2,r.replace(E,a)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}return[2]})})).apply(this,arguments)}function A(){return(A=(0,o._)(function(e,t,n,r){var i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(0===n.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,t){return D.apply(this,arguments)}(i={initRunCommand:e,isCompiled:t,allFiles:n},r)];case 1:return a={projType:o=l.sent()},[4,function(e,t,n){return B.apply(this,arguments)}(o,i,r)];case 2:return[2,(a.runCommand=l.sent(),a.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),a)]}})})).apply(this,arguments)}var P=n(61781),G=n(96949),L=n(70882),N=n(83960);function O(e,t){var n=[];return n.push((0,N.xz)("interpreter")),n.push((0,N.xz)("entrypoint")),e&&(n.push((0,N.KQ)(e)),n.push((0,N.X6)(e))),t?(n.push((0,N.D3)(t)),n.push((0,N.pi)(t))):(n.push((0,N.xz)("compile")),n.push((0,N.xz)("deployment/build"))),n}var U=n(10777),M=n(40490);function X(e){var t=e.children;return(0,s.tZ)(d.Tg,{background:"default",css:[p.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:(0,s.tZ)(f.G,{css:[p.l0.p(16),p.l0.justify.center,p.l0.align.center,{flex:"1 1 auto"}],children:t})})}function F(){return(0,s.tZ)(X,{children:(0,s.BX)(f.G,{children:[(0,s.tZ)(f.G,{children:"We couldn't read your .replit file"}),(0,s.tZ)("a",{css:[p.l0.pt(8),{fontSize:p.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function W(){return(0,s.tZ)(X,{children:(0,s.tZ)(f.G,{children:(0,s.BX)("p",{children:["Importing from GitHub",(0,s.tZ)(x,{style:{color:"var(--foreground-default)"}})]})})})}var V=n(53904),H=n(27069),z=n(84864),j=n(10578),q=n(14694),J=n(24766),Y=n(38799),$=n(5272),K=n(79904),Q=n(44935),ee=n(54300),et=f.K.a,en=(0,b.X)({root:[p.l0.maxWidth(420),p.l0.display.flex,p.l0.gap(12),p.l0.py(4),{margin:"0 auto"}],section:[p.l0.display.flex,p.l0.p(12),p.l0.gap(12)],sectionHeader:[p.l0.flex.row,p.l0.justify.spaceBetween],loading:[p.l0.center,p.l0.flex.growAndShrink(1)],multiParagraph:[p.l0.flex.column,p.l0.gap(8),{a:[p.l0.display.inline]}]}),er=function(e){var t,n,r,d,h,m,g,v,y,b,w,Z,x,S,_,T,E,R,D,I,B,N,X,er,ei,eo,ea,el,ec,es,eu,ed,ef,ep,eh,em,eg,ev=e.flow,ey=(0,a._)(e,["flow"]),eb=(t=ey.closeConfigPane,n=ey.openSidebar,r=ey.onNewPaneSelected,d=ey.openConsole,h=(0,M.Wd)("gitImport","boolean"),m=(0,C.Z)(),v=(g=(0,k.Z)()).fs,y=g.dotReplit,w=(b=(0,l._)((0,u.useState)(null),2))[0],Z=b[1],S=(x=(0,l._)((0,u.useState)(null),2))[0],_=x[1],T=(0,u.useCallback)(function(){r({type:"codeEditor",data:{path:".replit"}})},[r]),(0,u.useEffect)(function(){if(!w)return y.watch(function(e){Z(e.config),"NOT_FOUND"!==e.error&&_(e.error)})},[y,w]),R=(E=(0,l._)((0,u.useState)(!1),2))[0],D=E[1],B=(I=(0,l._)((0,u.useState)(""),2))[0],N=I[1],er=(X=(0,l._)((0,u.useState)(""),2))[0],ei=X[1],ea=(eo=(0,l._)((0,u.useState)(!1),2))[0],el=eo[1],es=(ec=(0,l._)((0,u.useState)(i.Unknown),2))[0],eu=ec[1],ef=(ed=(0,l._)((0,u.useState)(!1),2))[0],ep=ed[1],(0,u.useEffect)(function(){if(!ef)return v.watchDir(".git",{onChange:function(e){ep(e.length>0)},onMoveOrDelete:function(){ep(!0)},onError:function(){ep(!1)}})}),(0,u.useEffect)(function(){(ef||!h)&&function(){e.apply(this,arguments)}();function e(){return(e=(0,o._)(function(){var e,t,n,r,o,a,l,s,u,d,f,p,m,g,b,Z,x;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!w)return[2];return t=(0,P.Cq)(null!==(e=w.run)&&void 0!==e?e:void 0),r=(0,P.Cq)(null!==(n=w.compile)&&void 0!==n?n:void 0),o=!!w.compile,[4,v.listFiles()];case 1:return a=c.sent(),[4,v.readDir(".git")];case 2:if(l=c.sent(),a.error||null==a.files||h&&l.error)return[2];return s=a.files,[4,function(e,t,n,r){return A.apply(this,arguments)}(t,o,s,v)];case 3:if(d=(u=c.sent()).projType,f=u.runCommand,p=u.compileCommand,m=s.includes("Procfile"),g=function(e,t){return e||t},b=m?g(t,f):g(f,t),Z=p||r,N(b||""),ei(Z),el(d!==i.Unknown&&d!==i.RegularRun),eu(d),!h)return[3,6];return b||U.kg.warn("Failed to autosuggest run command"),d===i.Unknown&&U.kg.warn("Failed to detect project type"),x=O(b||"",Z),[4,y.updateDotReplit(x)];case 4:return c.sent(),[4,v.flush()];case 5:c.sent(),v.persist({skipDebounce:!0}),c.label=6;case 6:return[2]}})})).apply(this,arguments)}},[y,w,v,ef,h]),em=(0,u.useCallback)((eh=(0,o._)(function(e){var t,n,r,i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:return t=e.run,n=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,G.j)(G.U3.NIX_GH_IMPORT_USED,{action:L.D.ConfigDone,isCompiled:""!==n,runChanged:r,compileChanged:i,projType:o,replId:m}),a=O(t,n),[4,y.updateDotReplit(a)];case 1:return l.sent(),v.flush().then(function(){v.persist({skipDebounce:!0})}),[2]}})}),function(e){return eh.apply(this,arguments)}),[y,v,m]),{fs:v,applyConfig:em,closeConfigPane:t,dotReplitConfig:w,dotReplitError:S,isApplyingConfig:R,setIsApplyingConfig:D,initialBuild:er,initialRun:B,isFrameworkRecommended:ea,projType:es,openDotReplit:T,openSidebar:n,openConsole:d}),ew=(0,V._)(),eZ=ew.modules,ex=ew.configs,eC=(0,H.Z)(),ek=(0,l._)((0,u.useState)("Overview"),2),eS=ek[0],e_=ek[1],eT=(0,u.useMemo)(function(){return null==eZ?void 0:eZ.filter(function(e){return"replit"!==e.id})},[eZ]),eE=eb.dotReplitConfig,eR=eb.dotReplitError,eD=eb.initialRun,eI=eb.initialBuild,eB=void 0===eI?"":eI,eA=eb.openConsole,eP=eb.openDotReplit,eG=eb.applyConfig,eL=eb.isApplyingConfig,eN=eb.setIsApplyingConfig,eO=eb.closeConfigPane,eU=eb.openSidebar,eM=eb.projType,eX=!!eM&&eM===i.Rails,eF=(0,z.Y)(eD,function(e){if(!e)return{message:"Add a run command"}}),eW=(0,l._)((0,u.useState)(eB),2),eV=eW[0],eH=eW[1];if((0,u.useEffect)(function(){eF.setValue(eD)},[eD]),(0,u.useEffect)(function(){eH(null!=eB?eB:"")},[eB]),eR)return(0,s.tZ)(F,{});if(!eE&&"githubImport"===ev)return(0,s.tZ)(W,{});if(!eZ||!eT||!ex||!eC)return(0,s.tZ)(f.G,{css:en.loading,children:(0,s.tZ)(j.Z,{})});switch(eS){case"ModuleSearch":return(0,s.tZ)(q.z,{onBack:function(){return e_("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eA});case"Overview":return(0,s.BX)(f.G,{css:en.root,children:[(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(J.h4,{variant:"headerDefault",level:1,children:"Configure your Repl"}),(0,s.tZ)(Y.M,{color:"dimmer",css:en.multiParagraph,children:"githubImport"===ev?(0,s.BX)(s.HY,{children:[(0,s.BX)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,s.tZ)("a",{href:"",onClick:function(e){e.preventDefault(),eP()},children:".replit file"}),", which configures your Repl's behavior."," ",(0,s.tZ)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,s.BX)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})]}):(0,s.tZ)(s.HY,{children:(0,s.BX)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===ev?(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(J.h4,{variant:"subheadDefault",level:2,children:"Modules"}),(0,s.tZ)(J.xv,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,s.tZ)($.Z,{modules:eT}),(0,s.tZ)(K.zx,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){e_("ModuleSearch")}})]}):null,(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(f.G,{css:en.sectionHeader,children:(0,s.tZ)(J.h4,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,s.tZ)("form",{onSubmit:(eg=(0,o._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),eN(!0),!eF.value)return eF.validate(),[2];return[4,eG({run:eF.value,compile:null!=eV?eV:"",runChanged:eF.value!==eD,compileChanged:eV!==eB,projType:eM})];case 1:return t.sent(),"githubImport"===ev&&(eO(),null==eU||eU()),eN(!1),[2]}})}),function(e){return eg.apply(this,arguments)}),css:[{width:"100%"}],children:(0,s.tZ)(f.G,{css:[p.l0.colWithGap(8)],children:(0,s.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,s.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[eB?(0,s.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,s.tZ)(J.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,s.tZ)(Q.II,{disabled:eL,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){eH(e.currentTarget.value)},css:{"&:disabled":{color:p.TV.foregroundDimmer}}})]}):null,(0,s.tZ)("label",{htmlFor:"run-sel",css:[p.l0.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,s.tZ)(Q.II,{disabled:eL,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eF.value,placeholder:"Enter a command to run the program",onChange:function(e){eF.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:p.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eF.error||!eF.value?(0,s.BX)(f.G,{css:[p.l0.color.accentNegativeDefault,p.l0.rowWithGap(4),p.l0.align.center],children:[(0,s.tZ)(ee.Z,{size:12}),(0,s.tZ)(f.G,{children:eF.error?eF.error.message:"Add a run command"})]}):null]}),(0,s.BX)(J.xv,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,s.tZ)(et,{css:p.l0.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),eX?(0,s.tZ)(f.G,{children:(0,s.BX)(J.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,s.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replits features."]})}):null,(0,s.tZ)(f.G,{css:[p.l0.flex.column,p.l0.pt(16)],children:(0,s.tZ)(K.zx,{stretch:!0,colorway:"primary",type:"submit",text:eL?"Saving...":"githubImport"===ev?"Confirm and close":"Save",loading:eL,disabled:eL||!!eF.error||!eF.value,dataCy:"import-config-done"})})]})})})]})]})}}},26993:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(66626),i=n(63257),o=n(3796),a=n(93245),l=n(24766),c=n(36809),s=n(63163),u=n(14548),d=n(61989),f=n(9602),p=n(19602),h=n(91466),m=n(53904),g=n(75271),v=n(47874),y=n(22419),b=n(39031),w=n(30716),Z=n(10578),x=n(96949),C=(0,c.X)({module:[s.l0.borderRadius(4),s.l0.width("100%"),s.l0.overflow("hidden")],submodule:[s.l0.flex.row,s.l0.align.center,s.l0.p(4)],submoduleName:[s.l0.truncate,s.l0.mx(8),s.l0.flex.growAndShrink(1)],moduleHeader:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.flex.growAndShrink(1)],moduleActions:[s.l0.rowWithGap(4),s.l0.center],moduleHeaderMetadata:[s.l0.rowWithGap(12)],divider:[s.l0.backgroundColor.outlineDimmer]});function k(e){var t=e.isModifying,n=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(t)return(0,o.tZ)(f.hU,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.tZ)(Z.Z,{})});if(n){var l="replit"===a.id;return(0,o.tZ)(f.hU,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.tZ)(p.Z,{})})}return(0,o.tZ)(f.hU,{alt:"Add module",onClick:r,children:(0,o.tZ)(v.Z,{})})}function S(e){var t=e.module,n=e.isInstalled,i=(0,m._)(),c=i.addModule,s=i.removeModule,u=(0,r._)((0,g.useState)(!1),2),d=u[0],f=u[1];return(0,g.useEffect)(function(){f(!1)},[n]),(0,o.BX)(a.G,{css:C.moduleHeader,children:[(0,o.BX)(a.G,{css:C.moduleHeaderMetadata,children:[(0,o.tZ)(l.xv,{children:t.name}),t.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:t.displayVersion}):null]}),(0,o.BX)(a.G,{css:C.moduleActions,children:[t.description?(0,o.tZ)(y.u,{tooltip:t.description,children:(0,o.tZ)(b.Z,{})}):null,(0,o.tZ)(k,{module:t,isInstalled:n,isModifying:d,onInstallClick:function(){f(!0),c(t.id),(0,x.j)(x.U3.NIX_MODULE_ADDED,{moduleId:t.id})},onRemoveClick:function(){f(!0),s(t.id),(0,x.j)(x.U3.NIX_MODULE_REMOVED,{moduleId:t.id})}})]})]})}function _(e){var t=e.module,n=e.defaultExpanded,r=e.isInstalled,c=(0,i._)(t.runners).concat((0,i._)(t.packagers),(0,i._)(t.formatters),(0,i._)(t.languageServers));return(0,o.tZ)(u.Tg,{elevated:!0,css:C.module,children:(0,o.BX)(d.Q,{round:!1,defaultExpanded:n,headerContent:(0,o.tZ)(S,{module:t,isInstalled:r}),children:[c.length>0?(0,o.tZ)(h.R,{css:C.divider}):null,c.map(function(e){return(0,o.BX)(a.G,{css:C.submodule,children:[(0,o.tZ)(w.Z,{module:e}),(0,o.tZ)(l.xv,{css:C.submoduleName,children:e.name}),e.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},5272:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(93245),o=n(36809),a=n(63163),l=n(26993),c=n(75271),s=(0,o.X)({modules:[a.l0.colWithGap(8)]});function u(e){var t=e.modules,n=(0,c.useMemo)(function(){return t.filter(function(e){return"replit"!==e.id})},[t]);return(0,r.tZ)(i.G,{css:s.modules,children:n.map(function(e){return(0,r.tZ)(l.Z,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},14694:function(e,t,n){n.d(t,{o:function(){return ep},z:function(){return em}});var r=n(27387),i=n(41733),o=n(30509),a=n(98924),l=n(66626),c=n(96583),s=n(3796),u=n(85045),d=n(95088),f=n.n(d),p=n(54082),h=n.n(p),m=n(93245),g=n(45883),v=n(23882),y=n(75271),b=n(46261),w=n(88300),Z=n(9602),x=n(48155),C=n(82922),k=n(59978),S=n(33790),_=n(36809),T=n(63163),E=n(65034),R=n(47136),D=n(26993),I=n(52589),B=n(23261),A=n(53904),P=n(27069),G=n(16832),L=n(79904),N=n(35820),O=n(22893),U=n(14548),M=n(24766),X=n(33323),F=n(71920),W=n(54300),V=n(77049),H=/(.+)(?:\S+)?<([^>,]+)[>,]/,z=m.K.span;function j(e){var t=e.author,n=H.exec(t);if(n){var r=n[1],i=n[2];return(0,s.BX)(s.HY,{children:["By ",r,(0,s.BX)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,s.BX)(z,{children:["By ",t]})}var q=n(99743),J=n(47874),Y=n(10578),$=n(19602);function K(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,s.tZ)(Y.Z,{}):n?(0,s.tZ)(q.Z,{}):t?(0,s.tZ)($.Z,{}):(0,s.tZ)(J.Z,{})}var Q=n(34648),ee=m.K.span,et=(0,_.X)({metadata:[T.l0.colWithGap(2)],metadataSkeleton:[T.l0.colWithGap(8),T.l0.pt(4)],metadataSkeletonVersion:[N.p.foregroundPulse(),T.l0.height(16),T.l0.maxWidth(64),T.l0.borderRadius(4)],metadataSkeletonDescription:[N.p.foregroundPulse(),T.l0.height(16),T.l0.borderRadius(4),T.l0.maxWidth(425)],root:[T.l0.borderRadius(8),T.l0.p(8)],header:[T.l0.flex.row,T.l0.justify.spaceBetween],headerTitle:[T.l0.display.flex,T.l0.rowWithGap(8),T.l0.flex.growAndShrink(1)],headerTitleText:[T.l0.display.inline,T.l0.flex.growAndShrink(1),T.l0.overflow("hidden"),T.l0.truncate],headerTitlePills:[T.l0.display.inlineFlex,T.l0.rowWithGap(4),T.l0.flex.shrink(0)],headerButton:[],content:[T.l0.colWithGap(4)],error:[T.l0.mt(4)],actions:[T.l0.rowWithGap(8),T.l0.mt(8)],consoleButton:[T.l0.width("calc(50% - ".concat(T.TV.space8,")"))],cancelButton:[T.l0.width("calc(50% - ".concat(T.TV.space8,")"))],actionButton:[T.l0.flex.grow(1),T.l0.flex.shrink(0)]});function en(e){var t=e.title,n=e.content,r=e.isExpanded;return(0,s.BX)(m.G,{css:et.metadata,children:[t?(0,s.tZ)(M.xv,{color:"dimmer",children:t}):null,n?(0,s.tZ)(M.xv,{maxLines:r?void 0:1,children:n}):null]})}function er(e){var t=e.title,n=e.content;return(0,s.BX)(m.G,{css:et.metadataSkeleton,children:[void 0===t||t?(0,s.tZ)(m.G,{css:et.metadataSkeletonVersion}):null,void 0===n||n?(0,s.tZ)(m.G,{css:et.metadataSkeletonDescription}):null]})}function ei(e){var t,n=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,c=(0,w.ZR)(),u=(0,V.te)(null==c?void 0:c.id),d=(0,V.pN)(null==c?void 0:c.id),f=(0,V.B2)(),p=(0,V.cW)(),h=(0,V.wY)(),g=(0,Q.Z)(r.license),v=(0,y.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),b=(0,y.useMemo)(function(){return p.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[p]),x=p.length>1&&!!b,C=(0,y.useMemo)(function(){return!!u.find(function(e){var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===(null===(n=r.name)||void 0===n?void 0:n.toLowerCase())})},[u]),k=!!(r.homepageURL||r.license||r.author),S=(0,y.useMemo)(function(){return!!d.find(function(e){return e.name===r.name})},[d]),_=(0,l._)((0,y.useState)(!1),2),T=_[0],E=_[1],R=(0,V.jh)(),D=(0,V.Wx)(),I=(0,V.zi)();return(0,s.BX)(U.Tg,{css:et.root,elevated:!0,children:[(0,s.BX)(m.G,{css:et.header,children:[(0,s.BX)(M.h4,{css:et.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,s.BX)(ee,{css:et.headerTitleText,children:[null!=n?n:r.name,r.version?(0,s.BX)(M.xv,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,s.tZ)(m.G,{css:et.headerTitlePills,children:a}):null]}),k?(0,s.tZ)(Z.hU,{css:et.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return E(function(e){return!e})},children:(0,s.tZ)(X.Z,{rotate:T?90:0})}):null]}),(0,s.tZ)(m.G,{css:et.content,children:void 0!==i&&i?(0,s.tZ)(er,{title:!1}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(en,{content:null!==(t=r.description)&&void 0!==t?t:"This package has no description.",isExpanded:!0}),r.homepageURL&&T?(0,s.tZ)(en,{content:(0,s.tZ)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:T}):null,g&&T?(0,s.tZ)(en,{content:g,isExpanded:T}):null,r.author&&T?(0,s.tZ)(en,{content:(0,s.tZ)(j,{author:r.author}),isExpanded:T}):null]})}),S?(0,s.tZ)(O.E,{css:et.error,colorway:"negative",icon:(0,s.tZ)(W.Z,{}),text:"Couldn't ".concat(C?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,s.tZ)(m.G,{css:et.actions,children:S?(0,s.BX)(s.HY,{children:[(0,s.tZ)(L.zx,{css:et.consoleButton,text:"Console",onClick:function(){o()},disabled:v||x,colorway:"primary",iconLeft:(0,s.tZ)(F.Z,{})}),(0,s.tZ)(L.zx,{css:et.actionButton,text:"Try Again",onClick:function(){(null==c?void 0:c.id)&&(h(c.id,[r]),C?D({id:c.id,pkg:r}):R({id:c.id,pkg:r}))},loading:v||x,colorway:C?"red":void 0,variant:C?"outlined":void 0,iconLeft:(0,s.tZ)(K,{isInstalled:C,isInQueue:x,isCurrentAction:v})})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(L.zx,{css:et.actionButton,text:v?(null==f?void 0:f.kind)===V.TH.Install?"Installing":"Removing":x?(null==b?void 0:b.kind)===V.TH.Install?"Waiting to install":"Waiting to remove":C?"Remove":"Install",onClick:function(){(null==c?void 0:c.id)&&(C?D({id:c.id,pkg:r}):R({id:c.id,pkg:r}))},loading:v||x,colorway:C?"red":void 0,variant:C?"outlined":void 0,iconLeft:(0,s.tZ)(K,{isInstalled:C,isInQueue:x,isCurrentAction:v})}),x?(0,s.tZ)(L.zx,{css:et.cancelButton,text:"Cancel",onClick:function(){r.name&&I(r.name)},disabled:v,loading:v}):null]})})]})}var eo=n(379),ea=n(90399),el=n(22419),ec=(0,_.X)({root:[T.l0.flex.column,T.l0.flex.growAndShrink(1)],headerRoot:[T.l0.border({color:T.TV.outlineDimmest,width:1,direction:"bottom"})],header:[T.l0.width("100%"),T.l0.maxWidth(G.YO),T.l0.colWithGap(8),T.l0.p(8),{margin:"0 auto"},T.l0.rowWithGap(8),T.l0.p(8),T.l0.align.center],searchInput:[T.l0.flex.growAndShrink(1)],select:[T.l0.minWidth(160)],resultsRoot:[T.l0.flex.growAndShrink(1),T.l0.overflow("auto")],resultsScroller:[T.l0.width("100%"),T.l0.maxWidth(600),T.l0.flex.growAndShrink(1),T.l0.p(8),{margin:"0 auto"},T.l0.overflow("auto")],results:[T.l0.colWithGap(8)],result:[T.l0.flex.row,T.l0.align.center,T.l0.justify.spaceBetween],resultMetadata:[T.l0.rowWithGap(8)]});function es(e){var t,n,o=e.query,a=e.openConsole,u=e.computePills,d=(0,l._)((0,y.useState)([]),2),f=d[0],p=d[1],h=(0,y.useRef)(0),Z=(0,l._)((0,y.useState)(!1),2),x=Z[0],C=Z[1],k=(t=(0,v.Z)(),n=(0,w.Bm)(),(0,y.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n();return(null==o?void 0:o.id)?(0,b.C)(o.id).search((0,i._)({id:o.id,query:e,services:t},r)):[]},[]));return((0,y.useEffect)(function(){if(""===o.trim()){p([]);return}C(!0)},[o]),(0,g.Z)(function(){var e,t=++h.current;(e=(0,r._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,k(o)];case 1:return e=n.sent(),t===h.current&&(p(e),C(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),x)?(0,s.tZ)(G.Gu,{}):0===f.length?(0,s.tZ)(G.ub,{children:o?"No results were found.":"Start typing above to see results."}):(0,s.tZ)(m.G,{css:ec.results,children:f.map(function(e){var t,n=null!==(t=null==u?void 0:u(e))&&void 0!==t?t:[];return(0,s.tZ)(ei,{pkg:e,openConsole:a,pills:n},e.name)})})}function eu(e){return e.length>0&&h()(e)}function ed(e){var t,n,r,i,o,a=e.query,l=(0,P.Z)(),c=(0,A._)().modules,d=(0,y.useMemo)(function(){return new Set(null==c?void 0:c.map(function(e){return e.id}))},[c]),p=(n=(t={modules:null!==(o=null==l?void 0:l.fullModules)&&void 0!==o?o:[],query:a}).modules,r=t.query,i=(0,y.useMemo)(function(){return new u.Av(n,{selector:function(e){return e.name},tiebreakers:[function(e,t){var n=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===t.item.displayVersion.split(".").length?"".concat(t.item.displayVersion,".0"):t.item.displayVersion;return eu(n)||eu(r)?!eu(r)&&eu(n)?1:!eu(n)&&eu(r)||f()(n,r)?-1:f()(r,n)?1:0:0}]})},[n]),(0,y.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):n},[i,n,r]));return 0===(p=(0,y.useMemo)(function(){return p.sort(function(e,t){var n=e.internal||e.demoted,r=t.internal||t.demoted;return n&&!r?1:!n&&r?-1:0})},[p])).length?(0,s.tZ)(G.ub,{children:a?"No results were found.":"Start typing above to see results."}):(0,s.tZ)(m.G,{css:ec.results,children:p?p.map(function(e){var t="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),n=d.has(e.id);return(0,s.tZ)(m.G,{css:ec.result,children:(0,s.tZ)(D.Z,{module:e,isInstalled:n,defaultExpanded:!1})},t)}):null})}function ef(e){var t=e.onBack,n=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,c=e.children,u=e.disableCategorySelection,d=e.searchPlaceholder,f=(0,l._)((0,y.useState)(null!=n?n:""),2),p=f[0],h=f[1],g=(0,y.useDeferredValue)(p);return(0,y.useEffect)(function(){r(g)},[g,r]),(0,s.BX)(m.G,{css:ec.root,children:[(0,s.tZ)(m.G,{css:ec.headerRoot,children:(0,s.BX)(m.G,{css:ec.header,children:[(0,s.tZ)(Z.hU,{alt:"Back",onClick:function(){return t()},children:(0,s.tZ)(x.Z,{})}),!u&&i&&i.length>0?(0,s.tZ)(E.P,{items:i,css:ec.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var t=null==i?void 0:i.find(function(t){return t.value===e});if(!t)throw Error("Expected config");h(""),a(t.value)},children:function(e){return(0,s.tZ)(R.m9,{id:e.value,label:e.label})}}):null,(0,s.tZ)(m.G,{css:ec.searchInput,children:(0,s.tZ)(C.E,{value:p,onChange:function(e){h(e.target.value)},onClear:function(){return h("")},placeholder:void 0===d?"Search packages...":d,autoFocus:!0})})]})}),(0,s.tZ)(m.G,{css:ec.resultsRoot,children:(0,s.tZ)(m.G,{css:ec.resultsScroller,children:c})})]})}function ep(e){var t=e.onBack,n=e.initialCategory,r=e.openConsole,c=(0,a._)(e,["onBack","initialCategory","openConsole"]),u=(0,k.I)().configs,d=(0,l._)((0,y.useState)(""),2),f=d[0],p=d[1],h=(0,y.useMemo)(function(){return u.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[u]),m=(0,l._)((0,y.useState)(null!=n?n:h[0].value),2),g=m[0],v=m[1],b=(0,y.useMemo)(function(){return u.find(function(e){return e.id===g})},[g,u]);return(0,s.tZ)(ef,(0,o._)((0,i._)({categories:h,initialQuery:f,setQuery:p,onBack:t,setCategory:function(e){p(""),v(e)},category:g},c),{children:(0,s.tZ)(S.Z,{config:b,children:(0,s.tZ)(es,{query:f,openConsole:r})})}))}var eh=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function em(e){var t=e.onBack,n=e.initialCategory,r=void 0===n?eh[0].value:n,c=e.openConsole,u=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,k.I)().configs,f=(0,y.useMemo)(function(){return d.find(function(e){return"nix"===e.id})},[d]),p=(0,l._)((0,y.useState)(""),2),h=p[0],m=p[1],g=(0,l._)((0,y.useState)(r),2),v=g[0],b=g[1];return((0,B.L)(I.U3.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===v},[]),(0,B.L)(I.U3.NIX_MODULE_SEARCH_USED,{query:h},function(){return!!(h&&"Modules"===v)},[h]),f)?(0,s.tZ)(ef,(0,o._)((0,i._)({categories:eh,initialQuery:h,setQuery:m,onBack:t,setCategory:function(e){m(""),b(e)},category:v,searchPlaceholder:"Modules"===v?"Search modules...":void 0},u),{children:"Packages"===v?(0,s.tZ)(S.Z,{config:f,children:(0,s.tZ)(es,{query:h,openConsole:c,computePills:function(e){var t;return null!==(t=e.present)&&void 0!==t&&t?[(0,s.tZ)(el.u,{tooltip:"Cached packages are faster to install in your Repl",children:(0,s.tZ)(eo.D,{text:"cached",iconLeft:(0,s.tZ)(ea.Z,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,s.tZ)(ed,{query:h})})):null}},30716:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(3796),i=n(69829),o=n(22436),a=n(62407),l=n(21460),c=n(66598),s=n(8366),u=n(50719),d=n(91654),f=n(23467),p=n(27238),h=n(67502),m=n(68047),g=n(23776),v=n(84434),y=n(88035),b=n(85154),w=n(17778),Z=n(2660),x=n(27843),C=n(19788),k=n(14608),S=n(39404),_=n(25253),T=n(43849),E=n(53997),R=n(653),D=n(23553),I=n(33745),B=n(86292),A=n(9344),P=n(72984);function G(e){var t=e.module,n=t.name.toLowerCase(),G=n.split(" ");return n.includes("node")?(0,r.tZ)(C.Z,{}):n.includes("typescript")?(0,r.tZ)(A.Z,{}):n.includes("python")||n.includes("pyright")?(0,r.tZ)(T.Z,{}):n.includes("c++")||n.includes("cpp")||n.includes("clang")||n.includes("ccls")?(0,r.tZ)(f.Z,{}):n.includes("java")||n.includes("maven")?(0,r.tZ)(w.Z,{}):n.includes("rust")||n.includes("cargo")?(0,r.tZ)(D.Z,{}):G.includes("go")||n.includes("gopls")?(0,r.tZ)(v.Z,{}):n.includes("ruby")?(0,r.tZ)(R.Z,{}):n.includes("elixir")?(0,r.tZ)(g.Z,{}):n.includes("bash")?(0,r.tZ)(u.Z,{}):n.includes("clojure")?(0,r.tZ)(p.Z,{}):n.includes("php")?(0,r.tZ)(S.Z,{}):n.includes("swift")?(0,r.tZ)(B.Z,{}):n.includes("haskell")?(0,r.tZ)(y.Z,{}):n.includes("lua")?(0,r.tZ)(Z.Z,{}):n.includes("dart")?(0,r.tZ)(m.Z,{}):n.includes("css")?(0,r.tZ)(h.Z,{}):n.includes("html")?(0,r.tZ)(b.Z,{}):G.includes("r")?(0,r.tZ)(E.Z,{}):n.includes("nix")?(0,r.tZ)(x.Z,{}):n.includes("npm")?(0,r.tZ)(k.Z,{}):"bun"===n?(0,r.tZ)(d.Z,{}):n.includes("prettier")?(0,r.tZ)(_.Z,{}):n.includes("vue")?(0,r.tZ)(P.Z,{}):n.includes("svelte")?(0,r.tZ)(I.Z,{}):n.includes(".replit")?(0,r.tZ)(c.Z,{}):t instanceof i.api.PackagerOption?(0,r.tZ)(l.Z,{}):t instanceof i.api.LanguageServerOption?(0,r.tZ)(o.Z,{}):t instanceof i.api.FormatterOption?(0,r.tZ)(a.Z,{}):t instanceof i.api.RunOption?(0,r.tZ)(s.Z,{}):(0,r.tZ)(l.Z,{})}},16832:function(e,t,n){n.d(t,{Gu:function(){return u},YO:function(){return c},_:function(){return f},ub:function(){return d}});var r=n(3796),i=n(93245),o=n(36809),a=n(10578),l=n(63163),c=600,s=(0,o.X)({overviewPane:[l.l0.p(12),l.l0.flex.column,l.l0.gap(24),l.l0.width("100%"),l.l0.maxWidth(c),{margin:"0 auto"}],loading:[l.l0.center,l.l0.flex.growAndShrink(1)],emptyState:[l.l0.center,l.l0.flex.growAndShrink(1)]}),u=function(){return(0,r.tZ)(i.G,{css:s.loading,children:(0,r.tZ)(a.Z,{})})},d=function(e){var t=e.children;return(0,r.tZ)(i.G,{css:s.emptyState,children:t})},f=function(e){var t=e.children;return(0,r.tZ)(i.G,{css:s.overviewPane,children:t})}},49295:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(3796),i=n(40490),o=n(58532),a=n(24766),l=n(93245),c=n(63163),s=n(9834),u=n.n(s),d=n(7391),f=n(68140);function p(){var e=(0,d.useRouter)(),t=(0,i.Wd)("didMigrateToNix","boolean");return(0,r.tZ)(o.u,{isOpen:t,onRequestClose:function(){(0,i.pg)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.BX)(l.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{level:1,variant:"headerDefault",children:"We've upgraded your Repl!"}),(0,r.BX)(a.xv,{children:["Your Repl is now using"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.BX)(l.K.ul,{css:c.l0.colWithGap(4),children:[(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:f.TT.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:f.TT.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.BX)(a.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,r.tZ)(a.xv,{multiline:!1,children:"Thank you for your patience"})]})})}},58655:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(66626),i=n(3796),o=n(75271),a=n(79904),l=n(36809),c=n(58532),s=n(24766),u=n(63163),d=n(93245),f=n(65117),p=n(14495),h=n(487),m=n(23882),g=(0,l.X)({container:[u.l0.colWithGap(8)],splitContainer:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.mt(8)],group:[u.l0.rowWithGap(8)],text:[u.l0.mt(8)]}),v=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),t=e[0],n=e[1];return(0,o.useEffect)(function(){var e=function(){n(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),t},y=function(){var e=(0,m.Z)().container,t=(0,r._)((0,o.useState)(!1),2),n=t[0],l=t[1],u=(0,o.useRef)(!1),y=(0,f.Z)(e),b=(0,o.useMemo)(function(){return y===h.em.CONNECTED},[y]),w=(0,p.d)(),Z=v(),x=(0,o.useCallback)(function(){l(!1)},[]),C=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!u.current&&!b&&w&&Z){var e=setTimeout(function(){l(!0),u.current=!0},6e4);return function(){return clearTimeout(e)}}},[b,w,Z]),(0,i.tZ)(c.u,{isOpen:n,onRequestClose:x,maxWidth:360,centered:!0,children:(0,i.BX)(d.G,{css:g.container,children:[(0,i.tZ)(s.h4,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.tZ)(s.xv,{css:g.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.BX)(d.G,{css:g.splitContainer,children:[(0,i.tZ)(a.zx,{text:"Cancel",onClick:x}),(0,i.tZ)(d.G,{css:g.group,children:(0,i.tZ)(a.zx,{text:"Refresh",onClick:C,colorway:"blue"})})]})]})})}},64627:function(e,t,n){n.d(t,{Z:function(){return g},e:function(){return y}});var r=n(41733),i=n(98924),o=n(3796),a=n(79904),l=n(14548),c=n(24766),s=n(93245),u=n(36809),d=n(33323),f=n(63163),p=n(35370),h=n(23522),m=(0,u.X)({code:[f.l0.font.code,f.l0.flex.grow(1)],surface:[f.l0.borderRadius(8),f.l0.p(8),f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center]});function g(e){var t=y(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(s.G,{css:f.l0.colWithGap(8),children:[n?(0,o.tZ)(v,(0,r._)({code:n},e)):null,(0,o.tZ)(v,(0,r._)({code:i},e))]})}function v(e){var t=e.code,n=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.BX)(l.Tg,{elevated:r.elevated,css:m.surface,children:[(0,o.tZ)(h.m,{textToCopy:t}),(0,o.tZ)(c.xv,{variant:"small",css:m.code,multiline:!1,children:t}),n?(0,o.tZ)(a.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(d.Z,{})}):null]})}function y(e,t){if(!e)return null;switch((0,p.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},59421:function(e,t,n){n.d(t,{dU:function(){return ey},$M:function(){return ex},u_:function(){return eS},BH:function(){return eT},ZP:function(){return eB}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(63257),c=n(96583),s=n(3796),u=n(62279),d=n(36200),f=n(99595),p=n(79685),h=n(82973),m=n(96949),g=n(79904),v=n(39808),y=n(23522),b=n(91466),w=n(9602),Z=n(44935),x=n(58532),C=n(14548),k=n(24766),S=n(22419),_=n(93245),T=n(36809),E=n(11006),R=n(89313),D=n(16865),I=n(61010),B=n(39031),A=n(10578),P=n(30043),G=n(19602),L=n(63163),N=n(92943),O=n(1053),U=n(96214),M=n(14118),X=n(12394),F=n(9834),W=n.n(F),V=n(68140),H=(0,T.X)({body:[L.l0.colWithGap(4)],buttonLink:[L.l0.reset.button,L.l0.linkStyle]});function z(){return(0,s.tZ)(X.Z,{pane:{type:"envEditor"},bodyText:(0,s.BX)(_.G,{css:H.body,children:[(0,s.BX)("div",{children:[(0,s.tZ)("code",{children:"HTML/CSS/JS"})," Repls don't support secrets since they are statically hosted."]}),(0,s.tZ)("div",{children:(0,s.tZ)(W(),{href:V.TT.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}function j(e){var t=e.performPaneOperation,n=(0,M.P5)({controlName:"flag-integrations-pane-experiment"});return(0,s.tZ)(X.Z,{pane:{type:"envEditor"},bodyText:(0,s.BX)(_.G,{css:H.body,children:[(0,s.tZ)("div",{children:(0,s.tZ)(W(),{href:V.TT.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),n?(0,s.BX)("div",{children:["Not sure where to start?"," ",(0,s.tZ)("button",{onClick:function(){t({operation:"open",pane:{type:"integrations"}}),(0,m.j)(m.U3.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:H.buttonLink,children:"Explore Integrations."})]}):null]})})}var q=n(64627),J=n(12379),Y=n(24200),$=n(75271),K=n(92191),Q=n(3030),ee=n(25722),et=n(91166),en=n(11515),er=n(22893),ei=n(27840),eo=n(22436),ea=n(64206),el=n(70625),ec=m.U3.ENV_EDITOR_USED;function es(e){var t,n=e.secrets,i=e.update,o=(0,a._)((0,$.useState)(!1),2),l=o[0],u=o[1],d=(0,a._)((0,$.useState)(!1),2),f=d[0],p=d[1],h=(0,a._)((0,$.useState)(!1),2),v=h[0],y=h[1],b=(0,a._)((0,$.useState)(0),2),w=b[0],Z=b[1],S=0===w,T=(0,$.useRef)();T.current||(T.current=(0,K.ir)(function(e){var t=eu(e.state.doc.toString());return Z(t),0!==t?(0,m.j)(ec,{action:"rawEditorUpdatedError"}):(0,m.j)(ec,{action:"rawEditorUpdated"}),[]}));var E=(0,en.Z)(),R=E.ref,D=E.view,I=function(){f||u(!1)},B=function(){y(!1),u(!0),(0,m.j)(ec,{action:"rawEditorOpened"})},A=function(){if(!D)return!1;var e=eu(D.state.doc.toString());return Z(e),0===e},P=(t=(0,r._)(function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:if(!D||!A())return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i(new Map(Object.entries(JSON.parse(D.state.doc.toString())).map(function(e){var t=(0,a._)(e,2);return[t[0],t[1]]})))];case 2:return t.sent(),p(!1),y(!0),setTimeout(function(){I(),setTimeout(function(){y(!1)},500)},500),[3,4];case 3:return e=t.sent(),ee.Tb(e),(0,m.j)(ec,{action:"rawEditorUpdatedError"}),Z(3),p(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,$.useEffect)(function(){if(D){var e=JSON.stringify(Object.fromEntries(n.entries()),null,2);"{}"===e&&(e="{\n  \n}"),D.dispatch({changes:{from:0,to:D.state.doc.length,insert:e}}),D.dispatch({selection:{anchor:D.state.doc.length-2}}),D.focus()}},[D,n]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(g.zx,{onClick:function(){return B()},text:"Edit as JSON",iconLeft:(0,s.tZ)(eo.Z,{}),size:"small"}),(0,s.tZ)(x.u,{isOpen:l,onRequestClose:function(){return I()},children:(0,s.BX)(_.G,{css:[L.l0.colWithGap(24)],children:[(0,s.tZ)(k.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,s.tZ)(k.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,s.tZ)(C.Tg,{css:[L.l0.borderRadius(8),L.l0.transition.snappy,L.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,s.tZ)(et.ZP,{ref:R,readOnly:f||v,extensions:[T.current,Q.$f.of([{key:(0,el.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return P(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,s.BX)(_.G,{css:[L.l0.rowWithGap(4),L.l0.justify.end],children:[!S&&(0,s.tZ)(er.E,{icon:(0,s.tZ)(ea.Z,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}(w)}),(0,s.BX)(_.G,{css:[L.l0.rowWithGap(12)],children:[(0,s.tZ)(g.zx,{onClick:I,text:"Cancel"}),(0,s.tZ)(g.zx,{iconLeft:(0,s.tZ)(ei.Z,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!S||f||v,onClick:function(){return P()}})]})]})]})})]})}function eu(e){try{var t=JSON.parse(e);for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])return 2;return 0}catch(e){return 1}}var ed=n(89774),ef=n(35723),ep=n(23882),eh=(0,u.iv)([L.l0.center,L.l0.coverContainer]),em=(0,T.X)({root:[L.l0.flex.column,L.l0.flex.grow(1)],header:[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center,L.l0.p(8)],headerTitle:[L.l0.flex.growAndShrink(1)],addSecretContainer:[L.l0.flex.column,L.l0.colWithGap(8),L.l0.py(8)],secretItemEdit:[L.l0.colWithGap(8)],secretItemEditInputs:[L.l0.rowWithGap(8)],secretItem:[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center],accessSecrect:[L.l0.px(8),L.l0.py(16),L.l0.colWithGap(8)],accessSecrectHeader:[L.l0.rowWithGap(8),L.l0.align.center],titleContainer:[L.l0.colWithGap(4),L.l0.width("40%")],titleWithIcon:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center],valueInput:[L.l0.flex.grow(0),{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]}),eg=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"],ev=(0,T.X)({root:[L.l0.colWithGap(12)],actions:[L.l0.justify.end,L.l0.flex.row,L.l0.rowWithGap(8)]});function ey(e){var t=e.keys,n=e.isOpen,r=e.onClose,i=e.onConfirm,o=e.loading,a=t.length>1;return(0,s.tZ)(x.u,{isOpen:n,onRequestClose:r,children:(0,s.BX)(_.G,{css:ev.root,children:[(0,s.tZ)(k.xv,{variant:"subheadDefault",multiline:!1,children:a?"Delete secrets?":"Delete ".concat(t[0],"?")}),(0,s.BX)(k.xv,{color:"dimmer",children:["Are you sure you would like to delete"," ",a?"these secrets (".concat(t.join(", "),")"):"this secret","? This cannot be undone."]}),(0,s.BX)(_.G,{css:ev.actions,children:[(0,s.tZ)(g.zx,{text:"Cancel",onClick:r}),(0,s.tZ)(g.zx,{text:"Delete",colorway:"negative",onClick:i,loading:o})]})]})})}function eb(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,l=(0,a._)((0,$.useState)(!0),2),c=l[0],u=l[1],d=(0,a._)((0,$.useState)({key:"",value:""}),2),f=d[0],p=d[1],h=(0,a._)((0,$.useState)(function(){var e=Math.floor(Math.random()*eg.length);return eg[e]}),1)[0],m=f.key.length>0&&!r.includes(f.key);return(0,s.tZ)(s.HY,{children:(0,s.BX)(_.G,{css:em.addSecretContainer,children:[(0,s.BX)(_.G,{css:L.l0.rowWithGap(8),children:[(0,s.BX)(_.G,{css:em.titleContainer,children:[(0,s.BX)(_.G,{css:em.titleWithIcon,children:[(0,s.tZ)(k.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,s.tZ)(S.u,{tooltip:"Use a descriptive, unique name for your secret key.",delay:"default",children:(0,s.tZ)(B.Z,{})})]}),(0,s.tZ)(Z.II,{value:f.key,onChange:function(e){return p((0,o._)((0,i._)({},f),{key:e.target.value}))},autoFocus:!0,placeholder:h,autoComplete:"off"}),r.includes(f.key)?(0,s.BX)(k.xv,{multiline:!1,variant:"small",css:L.l0.color.accentNegativeDefault,children:['Secret "',f.key,'" already exists']}):null]}),(0,s.BX)(_.G,{css:[L.l0.colWithGap(4),L.l0.flex.growAndShrink(1)],children:[(0,s.BX)(_.G,{css:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center],children:[(0,s.tZ)(k.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,s.tZ)(w.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return u(!c)},size:18,children:c?(0,s.tZ)(D.Z,{}):(0,s.tZ)(I.Z,{})})]}),(0,s.tZ)(Z.II,{value:f.value,onChange:function(e){return p((0,o._)((0,i._)({},f),{value:e.target.value}))},"data-sensitive":c,css:em.valueInput,autoComplete:"off",placeholder:"Value"})]})]}),(0,s.BX)(_.G,{css:[L.l0.rowWithGap(8),L.l0.justify.end],children:[(0,s.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,s.tZ)(g.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:f.key.trim(),value:f.value}),p({key:"",value:""})}})]})]})})}var ew=[L.l0.flex.row,L.l0.rowWithGap(8),L.l0.align.center],eZ=(0,T.X)({root:[L.l0.height("100%"),L.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[L.l0.height(32)]}],item:ew,itemDanger:[ew,{color:L.TV.accentNegativeStronger}]});function ex(e){var t=e.onEdit,n=e.onDelete,r=e.onSearch;return(0,s.tZ)(C.Tg,{elevated:!0,css:eZ.root,children:(0,s.tZ)(d.Z,{label:"Options",items:[{label:(0,s.BX)(_.G,{css:eZ.item,children:[(0,s.tZ)(R.Z,{}),(0,s.tZ)(k.xv,{multiline:!1,children:"Edit"})]}),onClick:t},r&&{label:(0,s.BX)(_.G,{css:eZ.item,children:[(0,s.tZ)(ed.Z,{}),(0,s.tZ)(k.xv,{multiline:!1,children:"Find Usages"})]}),onClick:r},{label:(0,s.BX)(_.G,{css:eZ.itemDanger,children:[(0,s.tZ)(G.Z,{}),(0,s.tZ)(k.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}].filter(Boolean),onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var eC=[L.l0.p(4),L.l0.rowWithGap(4),L.l0.borderRadius(8)],ek=(0,T.X)({root:[eC,L.l0.width("40%"),L.l0.display.flex,L.l0.overflowX("hidden")],text:[L.l0.flex.growAndShrink(1)]});function eS(e){var t=e.value;return(0,s.BX)(C.Tg,{elevated:!0,css:ek.root,children:[(0,s.tZ)(y.m,{tooltipText:"Copy secret",textToCopy:t}),(0,s.tZ)(S.u,{tooltip:(0,s.tZ)(k.xv,{children:t}),children:function(e,n){return(0,s.tZ)(k.xv,(0,o._)((0,i._)({ref:n},e),{multiline:!1,css:ek.text,children:t}))}})]})}var e_=(0,T.X)({root:[eC,L.l0.flex.growAndShrink(1),L.l0.align.center],text:[L.l0.flex.growAndShrink(1),L.l0.truncate,{fontFamily:L.TV.fontFamilyCode}],input:[{border:"none",background:"inherit",fontFamily:L.TV.fontFamilyCode,'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function eT(e){var t=e.value,n=e.placeholder,r=void 0===n?"Enter your secret value":n,i=e.onChange,o=(0,a._)((0,$.useState)(!1),2),l=o[0],c=o[1];return(0,s.BX)(C.Tg,{elevated:!0,css:e_.root,children:[(0,s.tZ)(y.m,{tooltipText:"Copy secret",textToCopy:t}),i?(0,s.tZ)(Z.II,{value:t,onChange:function(e){return i(e.target.value)},placeholder:r,css:e_.input,"data-sensitive":t&&!l}):(0,s.tZ)(k.xv,{multiline:!1,css:e_.text,children:t?(0,s.tZ)(s.HY,{children:l?t:"".repeat(8)}):r}),(0,s.tZ)(w.hU,{alt:"Toggle Secret",tooltipBehavior:"hidden",onClick:function(){return c(!l)},children:l?(0,s.tZ)(I.Z,{}):(0,s.tZ)(D.Z,{})})]})}function eE(e){var t=(0,a._)((0,$.useState)(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],l=(0,a._)((0,$.useState)(!1),2),c=l[0],u=l[1],d=(0,a._)((0,$.useState)(!0),2),f=d[0],p=d[1],h=e.secret,m=(0,$.useMemo)(function(){var e;return(0,ef.E)(null!==(e=null==n?void 0:n.key)&&void 0!==e?e:h.key)},[null==n?void 0:n.key,h.key]);if(n&&!e.readOnly){var v,y=e.onDeleteSecret,b=e.onUpdateSecret;return(0,s.BX)(s.HY,{children:[(0,s.BX)(_.G,{css:em.secretItemEdit,children:[(0,s.BX)(_.G,{css:em.secretItemEditInputs,children:[(0,s.BX)(_.G,{css:[L.l0.colWithGap(2),L.l0.width("40%")],children:[(0,s.tZ)(k.xv,{multiline:!1,css:[L.l0.pt(2),L.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,s.tZ)(_.G,{children:(0,s.tZ)(Z.II,{value:null!==(v=null==n?void 0:n.key)&&void 0!==v?v:"",onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{key:e.target.value}):t})},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,s.BX)(_.G,{css:[L.l0.flex.growAndShrink(1),L.l0.colWithGap(2)],children:[(0,s.BX)(_.G,{css:[L.l0.flex.row,L.l0.rowWithGap(4),L.l0.align.center],children:[(0,s.tZ)(k.xv,{multiline:!1,css:[L.l0.pt(2),L.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,s.tZ)(w.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return p(!f)},children:f?(0,s.tZ)(D.Z,{}):(0,s.tZ)(I.Z,{})})]}),(0,s.BX)(_.G,{children:[(0,s.tZ)(Z.II,{value:n.value,"data-sensitive":f,css:em.valueInput,onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{value:e.target.value}):t})}}),m?(0,s.tZ)(k.xv,{variant:"small",children:(0,s.tZ)("a",{href:m,target:"_blank",children:"Where do I find this?"})}):null]})]})]}),(0,s.BX)(_.G,{css:[L.l0.flex.row,L.l0.rowWithGap(8)],children:[(0,s.tZ)(g.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return u(!0)}}),(0,s.tZ)(_.G,{css:L.l0.flex.grow(1)}),(0,s.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,s.tZ)(g.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null==n?void 0:n.key.length),onClick:function(){n&&(b(h.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,s.tZ)(ey,{keys:[h.key],isOpen:c,onClose:function(){return u(!1)},onConfirm:function(){return y(h.key)}})]})}return(0,s.BX)(_.G,{css:em.secretItem,children:[(0,s.tZ)(eS,{value:h.key}),(0,s.tZ)(eT,{value:h.value}),e.readOnly?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(_.G,{children:(0,s.tZ)(ex,{onEdit:function(){return r(h)},onDelete:function(){return u(!0)},onSearch:function(){return e.onSearchSecret(h.key)}})}),(0,s.tZ)(ey,{keys:[h.key],isOpen:c,onClose:function(){return u(!1)},onConfirm:function(){return e.onDeleteSecret(h.key)}})]})]})}var eR=(0,T.X)({container:[L.l0.colWithGap(8),L.l0.py(8)],blankSecretsContainer:[L.l0.colWithGap(8),L.l0.px(8)],nonBlankSecretsContainer:[L.l0.colWithGap(8),L.l0.px(8)],list:[L.l0.colWithGap(8)]});function eD(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,c=e.onSearch,u=e.onClose,d=(0,$.useMemo)(function(){return(0,l._)(t.entries()).filter(function(e){var t=(0,a._)(e,2);return""===(t[0],t[1])})},[t]),f=(0,$.useMemo)(function(){return(0,l._)(t.entries()).filter(function(e){var t=(0,a._)(e,2);return""!==(t[0],t[1])})},[t]);return(0,s.BX)(_.G,{css:eR.container,children:[0!==d.length&&(0,s.BX)(s.HY,{children:[(0,s.BX)(_.G,{css:eR.blankSecretsContainer,children:[(0,s.tZ)(k.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,s.tZ)(k.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,s.tZ)(_.G,{css:eR.list,children:d.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,s.tZ)(eE,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r,onSearchSecret:function(){}},i)})})]}),(0,s.tZ)(b.R,{})]}),(0,s.BX)(_.G,{css:eR.nonBlankSecretsContainer,children:[o?(0,s.tZ)(eb,{onClose:u,onAdd:i,otherKeys:Object.keys(t)}):null,f.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,s.tZ)(eE,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r,onSearchSecret:c},i)})]})]})}function eI(e){var t=e.secrets,n=e.activeFile,r=(0,a._)((0,$.useState)(t.keys().next().value),2),i=r[0],o=r[1];return(0,J.Z)(n)&&(0,q.e)(n,i)&&t.size>0?(0,s.BX)(_.G,{css:em.accessSecrect,children:[(0,s.BX)(_.G,{css:em.accessSecrectHeader,children:[(0,s.tZ)(k.xv,{multiline:!1,children:"Access secret"}),(0,s.tZ)(U.P,{css:L.l0.minWidth(48),items:(0,l._)(t.keys()).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,s.tZ)(q.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function eB(e){var t,n,i,o,l=e.getRunState,u=e.performPaneOperation,d=(0,ep.Z)().secrets,y=(0,p.T)(),w=(0,Y.R3)(),Z=(0,a._)((0,$.useState)(new Map),2),x=Z[0],C=Z[1],S=(0,a._)((0,$.useState)(!1),2),T=S[0],R=S[1],D=function(){R(!1)},I=(0,N.Z)();(0,$.useEffect)(function(){(0,m.Cn)(m.U3.ENV_EDITOR_USED,{action:"opened"}),h.Z.set("enveditortour",!0)},[]),(0,$.useEffect)(function(){var e=d.watch(function(e){C(e)});return function(){e()}},[d,C]);var B=(0,f.Z)().showConfirm,G=(t=(0,r._)(function(e){return(0,c.Jh)(this,function(t){return(0,m.j)(m.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),d.addEntries([{key:e.key,value:e.value}]),l()===O.Ah.RUNNING&&B("Re-run your Repl to use this secret"),D(),[2]})}),function(e){return t.apply(this,arguments)}),L=(n=(0,r._)(function(e,t){var n;return(0,c.Jh)(this,function(r){return(0,m.j)(m.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),(n=new Map(x)).delete(e),n.set(t.key,t.value),d.replaceAll(n),[2]})}),function(e,t){return n.apply(this,arguments)}),U=(i=(0,r._)(function(e){return(0,c.Jh)(this,function(t){return(0,m.j)(m.U3.ENV_EDITOR_USED,{action:"deleted"}),d.removeEntries(e),[2]})}),function(e){return i.apply(this,arguments)}),M=x.size>0;return y?(0,s.tZ)(z,{}):x&&I?(0,s.BX)(_.G,{css:em.root,children:[(0,s.BX)(_.G,{css:em.header,children:[(0,s.tZ)(k.xv,{css:em.headerTitle,variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,s.tZ)(es,{secrets:x,update:(o=(0,r._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,d.replaceAll(e)];case 1:return t.sent(),[2]}})}),function(e){return o.apply(this,arguments)})}),(0,s.tZ)(v.Z,{iconLeft:(0,s.tZ)(E.Z,{}),href:"https://docs.replit.com/replit-workspace/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,s.tZ)(g.zx,{iconLeft:(0,s.tZ)(P.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return R(!0)}})]}),(0,s.tZ)(b.R,{}),M||!1!==T?null:(0,s.tZ)(j,{performPaneOperation:u}),(0,s.tZ)(eD,{secrets:x,onUpdateSecret:L,onDeleteSecret:U,onAddSecret:G,showAddSecret:T,onSearch:function(e){return u({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},onClose:D}),w&&M?(0,s.tZ)(eI,{secrets:x,activeFile:w}):null]}):(0,s.tZ)(_.G,{css:eh,children:(0,s.tZ)(A.Z,{size:24})})}},97933:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(63257),o=n(23882),a=n(75271);function l(){var e=(0,o.Z)().secrets,t=(0,r._)((0,a.useState)(null),2),n=t[0],l=t[1],c=(0,a.useMemo)(function(){return!!n&&(0,i._)(n.values()).some(function(e){return!e})},[n]);return(0,a.useEffect)(function(){return e.watch(l)},[n,e]),c}},99319:function(e,t,n){n.d(t,{VY:function(){return U},HK:function(){return X},h4:function(){return B},Qc:function(){return P},LI:function(){return N},H4:function(){return F},$E:function(){return M},Mp:function(){return W}});var r=n(27387),i=n(96583),o=n(3796),a=n(62279),l=n(83059),c=n(54505),s=n(35370);function u(){return(u=(0,r._)(function(e,t){var n,r,o,a,l;return(0,i.Jh)(this,function(i){return n=(0,s.yC)(e),r=(0,s.UO)(e),o=new Blob([t.toBuffer()],{type:n}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var d=n(1252),f=n(93245),p=n(78121),h=n(86201),m=n(6674),g=n(47874),v=n(77402),y=n(19602),b=n(63163),w=n(23882),Z=n(7391),x=n.n(Z),C=n(75271),k=n(77244),S=n(25949),_=n(24200),T=n(6843),E=n(49424),R=n(14118),D=n(73878),I=(0,a.iv)([b.l0.height(28),b.l0.flex.row,b.l0.align.center,{borderBottom:"1px solid ".concat(b.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function B(e){return"/replEnvironmentDesktop"!==x().pathname?null:(0,o.tZ)(f.G,{css:I,children:e.children})}var A=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),b.l0.overflowX("auto"),b.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function P(e){return(0,o.tZ)(f.G,{css:A,children:e.children})}var G=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%")]),L=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%"),b.l0.px(2)]);function N(e){return(0,o.tZ)(f.G,{css:G,children:(0,o.tZ)(f.G,{css:L,children:e.children})})}var O=(0,a.iv)([b.l0.flex.growAndShrink(1),b.l0.position.relative,b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)]);function U(e){return(0,o.tZ)(f.G,{css:[O,e.children&&b.l0.center],children:e.children})}function M(e){return{type:(0,S.Dp)({path:e}),data:{path:e}}}function X(e){var t=e.path,n=e.performPaneOperation,r=e.children,i=(0,C.useCallback)(function(e){n({operation:"replace",pane:M(e)})},[n]);return(0,o.BX)(B,{children:[(0,o.tZ)(P,{children:(0,o.tZ)(E.tr,{path:t,onFileClick:i})}),r?(0,o.tZ)(N,{children:r}):null]})}function F(e,t){return{match:T.pl,data:{label:"Download",icon:(0,o.tZ)(g.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:if((n=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,t){return u.apply(this,arguments)}(e,n.content)];case 2:return r.sent(),[2]}})})()}}}}function W(e){var t=e.path,n=e.performPaneOperation,a=(0,w.Z)(),s=(0,_._o)(),u=(0,R.P5)({controlName:"flag-draft-buffers"});return(0,l.Z)(function(){if(!t)return null;var e,l,f,g=[{match:T.pl,data:{label:"Copy file path",icon:(0,o.tZ)(h.Z,{}),type:"action",run:function(){(0,c.Z)(t)}}},{match:T.pl,data:{label:"Copy link",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){var e=(0,k.dr)({path:t});(0,c.Z)(e)}}},(e=a.fs,l=function(e){n({operation:"replace",pane:{type:(0,S.Dp)({path:e}),data:{path:e}}})},{match:T.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,d.Z)(t,e)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return l(n),[2]}})})()}}}),F(t,a.fs),{match:T.pl,data:{label:"Delete",icon:(0,o.tZ)(y.Z,{color:b.TV.redDefault}),type:"action",run:function(){s(t)}}}];return u&&g.unshift((f=a.fs,{match:T.pl,data:{label:"Save file",icon:(0,o.tZ)(p.Z,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f.flush(new Set([t]),D.WL.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()}}})),g},[t,a.fs,n,s,u])}},8629:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(3796),i=n(62279),o=n(25688),a=n(10777),l=n(93245),c=n(63163),s=n(75271),u=n(72106),d=n(97420),f=(0,i.iv)([c.l0.justify.center,c.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function p(e){var t=e.index,n=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:n,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:n,rx:"3",ry:"3",width:"".concat(100+(t%2!=0?-10*t:10*t)),height:16})]})}function h(e){var t=e.path,n=t===u.Ql,i=n?5:1;(0,s.useEffect)(function(){var e=a.kg.timeStart({isRootPath:n});return function(){e("time to load filetree folder")}},[n,t]);var c="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(o.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:c,children:Array(i).fill(null).map(function(e,t){return(0,r.tZ)(p,{index:t},t)})})})}},83191:function(e,t,n){n.d(t,{st:function(){return y}});var r,i,o=n(41733),a=n(30509),l=n(3796),c=n(28393),s=n(14118),u=n(86466),d=n(14548),f=n(24766),p=n(93245),h=n(31940),m=n(63163),g=n(43133),v=n(75271);(r=i||(i={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},b={self:[m.l0.position.relative,m.l0.width(20),m.l0.height("100%"),m.l0.justify.center,{"& span":{height:"100%"}}],self2:[m.l0.position.relative,m.l0.width(16),m.l0.height("100%"),m.l0.justify.center,m.l0.pr(1)],button:[m.l0.display.flex,m.l0.align.center,m.l0.justify.center,m.l0.py(2),m.l0.top(0),m.l0.width("100%"),m.l0.border({width:0,color:"none"}),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.borderRadius(4),u.gU.filled,m.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[m.l0.display.flex,m.l0.align.center,m.l0.py(2),m.l0.width("100%"),m.l0.height("100%"),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.focusRing,m.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:m.TV.foregroundDefault}}],list:[m.l0.flex.column,m.l0.justify.center,m.l0.borderRadius(8),m.l0.zIndex(1),m.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,t){return[m.l0.color.foregroundDefault,m.l0.p(8),m.l0.fontWeight.normal,m.l0.cursor.pointer,{whiteSpace:"nowrap"},t&&[m.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:m.TV.accentNegativeDefault},":hover .option-label":{color:m.TV.white}}]]},optionLabel:function(e){return e?[m.l0.color.accentNegativeStronger]:[]}};function w(e){var t=e.isNegative,n=e.isHighlighted,r=e.children;return(0,l.tZ)(p.G,{css:b.option(t,n),children:(0,l.tZ)(f.xv,{className:"option-label",css:b.optionLabel(t),multiline:!1,children:r})})}var Z=p.K.ul,x=p.K.li,C=p.K.button,k=p.K.div;v.forwardRef(function(e,t){var n=e.isActive,r=e.actions,i=e.onAction,u=e.onOpenChange,S=(0,v.useRef)(!1),_=(0,g.L7)({items:r,onSelectedItemChange:function(e){var t=e.selectedItem;t&&(S.current||i(t),A())}}),T=_.isOpen,E=_.getToggleButtonProps,R=_.getMenuProps,D=_.highlightedIndex,I=_.getItemProps,B=_.openMenu,A=_.reset;(0,v.useImperativeHandle)(t,function(){return{open:B}}),(0,v.useEffect)(function(){u&&u(T)},[T,u]);var P=E(),G=(0,s.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(p.G,{css:G?b.self2:b.self,children:(0,l.BX)(c.Z,{elevated:!0,showArrow:!0,isOpen:T,placement:"right-start",padding:0,onClickOutside:A,children:[(0,l.tZ)(d.Tg,{background:n?"default":"root",css:[m.l0.height("100%"),{background:n?m.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(C,(0,a._)((0,o._)({},P),{css:G?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),P.onClick(e)},children:(0,l.tZ)(h.Z,{})}))}),(0,l.tZ)(k,(0,a._)((0,o._)({},R({},{suppressRefError:!0})),{children:T?(0,l.tZ)(Z,{css:b.list,children:r.map(function(e,t){return(0,l.tZ)(x,(0,a._)((0,o._)({"data-cy":"filetree-node-action-".concat(e.type)},I({item:e,index:t,onClick:function(t){S.current=!0,setTimeout(function(){S.current=!1}),i(e),t.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:D===t,isNegative:e.type===y.Delete.type,children:(0,l.BX)(p.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(f.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},83576:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(79904),o=n(24766),a=n(93245),l=n(53366),c=n(63163),s=n(35370);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[c.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=(t=n).map(s.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,r.tZ)(i.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(l.Z,{})})]})]})}},41844:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(70625),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},96988:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(41733),i=n(96949),o=n(52589);function a(e,t){(0,i.j)(o.U3.GIT_FEATURE_USED,(0,r._)({action:e,source:"git-pane"},t))}},52949:function(e,t,n){n.d(t,{$8:function(){return m},Lr:function(){return w},ST:function(){return h},Zr:function(){return v},kb:function(){return g},po:function(){return p},uJ:function(){return y},yx:function(){return Z}});var r=n(3796),i=n(38935),o=n(24766),a=n(22419),l=n(93245),c=n(36809),s=n(22527),u=n(63163),d=n(35370),f=(0,c.X)({revertText:[u.l0.color.orangeStronger,u.l0.fontWeight.medium],mergeText:[u.l0.color.purpleStronger,u.l0.fontWeight.medium],pullRequestId:[u.l0.fontWeight.medium],hash:[u.l0.fontWeight.medium],filePathPrefix:[u.l0.color.foregroundDimmest],commitBody:[u.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:u.TV.fontSizeSmall}],clickableName:[u.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center],path:[{fontSize:u.TV.fontSizeSmall},u.l0.font.code],currentBranchIndicator:[u.l0.height(16),u.l0.width(16),u.l0.align.center],currentBranchDot:[u.l0.height(6),u.l0.width(6),u.l0.backgroundColor.accentPrimaryStronger,u.l0.borderRadius("full")],branchNameWrapper:[u.l0.flex.row,u.l0.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center,u.l0.flex.shrink(1),u.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},u.l0.mr(4)],headingCurrent:[u.l0.px(4)],current:[u.l0.position.relative,u.l0.top("-1px"),u.l0.display.inlineFlex,u.l0.pl(2),u.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},u.l0.mr(4)],bodyContainer:[u.l0.border({color:u.TV.outlineDimmest,direction:"full"}),u.l0.borderRadius(8),u.l0.p(16)]});function p(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.revertText,children:t})}function h(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.mergeText,children:t})}function m(e){var t,n=e.id,i=e.hash,o=e.className;return t=void 0===i||i?"string"==typeof n&&n.startsWith("#")?n:"#".concat(n):"string"==typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:o,css:f.pullRequestId,children:t})}function g(e){var t=e.hash,n=e.length,i=e.className;return(0,r.tZ)("span",{className:i,css:f.hash,children:t.slice(0,(void 0===n?8:n)+1)})}function v(e){var t=e.subject,n=e.remoteName,o=e.quoted,a=void 0!==o&&o,l=e.className;return n?(0,r.tZ)(i.ZP,{className:l,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:n},children:a?'"'.concat(t,'"'):t}):(0,r.tZ)("span",{className:l,children:a?'"'.concat(t,'"'):t})}function y(e){var t=e.body,n=e.view,o=e.className;return"Source"===(void 0===n?"Source":n)?(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)("pre",{className:o,css:f.commitBody,children:t})}):(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)(i.ZP,{className:o,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:t})})}function b(){return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{tooltip:"This is your current branch",children:(0,r.tZ)(l.G,{css:f.currentBranchIndicator,children:(0,r.tZ)(l.G,{css:f.currentBranchDot})})})})}function w(e){var t=e.name,n=e.remote,i=e.current,a=void 0!==i&&i,l=e.heading,c=void 0!==l&&l,u=e.icon,d=void 0!==u&&u,p=e.onClick,h=e.className,m=null;return(!0===d?m=c?(0,r.tZ)(s.Z,{size:16}):(0,r.tZ)(s.Z,{css:f.icon,size:12}):d&&(m=d),c)?(0,r.BX)("div",{css:f.headingWrapper,children:[m,(0,r.BX)(o.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:f.headingRemote,children:n}),(0,r.tZ)("span",{css:f.headingRemote,children:"/"})]}):null,p?(0,r.tZ)(C,{label:"View branch",onClick:p,children:t}):(0,r.tZ)("span",{children:t})]}),a?(0,r.tZ)("span",{css:c?f.headingCurrent:f.current,children:(0,r.tZ)(b,{})}):null]}):(0,r.BX)("span",{className:h,css:f.branchNameWrapper,children:[m,n?(0,r.BX)("span",{children:[n,"/"]}):null,p?(0,r.tZ)(C,{label:"View branch",onClick:p,children:t}):(0,r.tZ)("span",{children:t}),a?(0,r.tZ)(b,{}):null]})}function Z(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,l=(0,d.UO)(t),c=!i&&(l===t||null!==n&&n+l===t);return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{maxWidth:"auto",tooltip:(0,r.tZ)(x,{path:t,openable:!!i}),isDisabled:c,children:i?(0,r.BX)(C,{label:"Open ".concat(l),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]})})})}function x(e){var t=e.path,n=e.openable;return(0,r.BX)("span",{css:f.tooltip,children:[void 0===n||n?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:f.path,children:t})]})}function C(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==n||n())},children:o})}},62740:function(e,t,n){n.d(t,{FH:function(){return u},PZ:function(){return d},fF:function(){return s}});var r=n(21262),i=n(71440),o=n(33479);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s=(0,i.Ps)(a()),u=(0,i.Ps)(l()),d=(0,i.Ps)(c(),o.Y)},62128:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(3796),i=n(97891),o=n(43769),a=n(40490),l=n(7391),c=n(75271),s=n(55771);function u(e,t){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!(0,a.FJ)(t.query.skipNixMigration,"boolean")&&(0,s.O)(e))}function d(e){var t=e.replResponse,n=e.replUrl,a=e.children,s=(0,l.useRouter)();if((0,c.useEffect)(function(){if(u(t,s)){if("ReplSubscriptionExpired"===t.__typename){var e=t.replId,r=t.isOwner,i=n.split("/")[1].slice(1),a=s.asPath.indexOf("#"),l=a<0?s.asPath:s.asPath.slice(0,a);s.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},l);return}if("ReplRedirect"===t.__typename){window.location.href=t.replUrl;return}if(!t.authorizations.editFileContents.isAuthorized){var c=(0,o.j3)(t),d=c.href,f=c.as;s.replace(d,f);return}window.location.reload()}},[t,n,s]),u(t,s)){var d="";return"ReplRedirect"===t.__typename?d="Repl moved, redirecting":"ReplSubscriptionExpired"===t.__typename?d="Subscription expired, redirecting":t.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"),(0,r.tZ)(i.Z,{reason:d})}return(0,r.tZ)(r.HY,{children:a})}},49719:function(e,t,n){n.d(t,{Ai:function(){return v},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return g},bA:function(){return m},ox:function(){return y}});var r=n(41733),i=n(30509),o=n(83059),a=n(80786),l=n(49853),c=n(75271),s=n(25731),u=(0,s.u)(function(){return null}),d=(0,s.u)(function(){return null});function f(e){var t=d.current();(0,c.useEffect)(function(){e!==t&&d.set(function(){return e})},[e,t])}var p=(0,l.cn)(null),h=(0,l.cn)(null,function(e,t,n){var o,a,l=e(p),c=l?(0,r._)({},l,n):(0,r._)({},n),s=null==c?void 0:c.changes,d=null==c?void 0:c.filePath;if(!d||!s)throw Error('"filePath", "changes", "users" required when initializing history state');var f=(a=(o=(0,i._)((0,r._)({},c),{changes:s,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return f});var h=f.changes.length;if(0===h){t(p,f);return}(null==l?void 0:l.changes)&&f.changes!==l.changes&&(f.count=h,f.version=Math.min(f.version,h-1),f.playing=!1,f.comparing=!1),f.version===h-1&&(f.playing=!1),t(p,f)});function m(){return(0,a.Dv)(p,{store:b()})}function g(){return(0,a.b9)(h,{store:b()})}function v(){return(0,a.b9)((0,o.Z)(function(){return(0,l.cn)(null,function(e,t){t(p,null)})},[]),{store:b()})}var y=(0,c.createContext)(null);function b(){var e=(0,c.useContext)(y);if(!e)throw Error("Expected store in context");return e}},52758:function(e,t,n){var r=n(3796),i=n(79904),o=n(58532),a=n(24766),l=n(93245),c=n(36809),s=n(26496),u=n(63163),d=n(7391),f=(0,c.X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,d.useRouter)();return(0,r.tZ)(o.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:f.root,children:[(0,r.BX)(l.G,{css:f.header,children:[(0,r.tZ)(s.Z,{size:24,css:f.icon}),(0,r.tZ)(a.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You cant join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:f.body,children:[(0,r.tZ)(a.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:f.list,children:[(0,r.tZ)(a.xv,{multiline:!1,children:" Exit Firewall Mode."}),(0,r.tZ)(a.xv,{multiline:!1,children:" Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:f.buttons,children:[(0,r.tZ)(i.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(i.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},56421:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(3796),i=n(16155),o=n(79904),a=n(58532),l=n(24766),c=n(22419),s=n(93245),u=n(36809),d=n(25),f=n(63163),p=n(9834),h=n.n(p),m=n(7391),g=n(41733),v=n(21262),y=n(71440),b=n(9122);function w(){var e=(0,v._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return w=function(){return e},e}var Z={},x=(0,y.Ps)(w()),C=(0,u.X)({root:[f.l0.colWithGap(32)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.colWithGap(16)],staffHelpers:[f.l0.colWithGap(8),f.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),f.l0.overflow("hidden")],buttons:[f.l0.rowWithGap(16),f.l0.justify.end]}),k=function(e){var t,n,u=e.isOpen,p=(0,m.useRouter)(),v=(t=(0,g._)({},Z,{skip:!u}),b.a(x,t)).data,y=(0,i.Z)(),w=null==v?void 0:null===(n=v.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(a.u,{preventClose:!0,isOpen:u,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:C.root,children:[(0,r.tZ)(s.G,{css:C.header,children:(0,r.tZ)(l.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,r.BX)(s.G,{css:C.body,children:[(0,r.BX)(l.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(h(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(l.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),w?(0,r.BX)(s.G,{css:C.staffHelpers,children:[(0,r.BX)(s.G,{css:f.l0.rowWithGap(8),children:[(0,r.tZ)(c.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(l.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{children:["Repl ID ",y," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{multiline:!1,children:[(0,r.tZ)(h(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(y),children:"All datadog logs"})," ",""," ",(0,r.tZ)(h(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(y,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(s.G,{css:C.buttons,children:[(0,r.tZ)(o.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(o.zx,{text:"Leave",onClick:function(){p.push("/home","~/")}})]})]})})}},47385:function(e,t,n){n.d(t,{h:function(){return _},w:function(){return k}});var r=n(41733),i=n(30509),o=n(3796),a=n(83059),l=n(1567),c=n(44935),s=n(75271),u=n(41974),d=n(49853),f=n(66626),p=n(80786);function h(){return(0,f._)((0,s.useState)(function(){return(0,d.MT)()}),1)[0]}var m=(0,s.createContext)(null),g=function(e){return(0,p.b9)(e,{store:function(){var e=(0,s.useContext)(m);if(!e)throw Error("Expected store in context");return e}()})},v=(0,d.cn)(-1),y=(0,d.cn)([]),b=(0,d.cn)(void 0),w=(0,d.cn)(null,function(e,t,n){var r=e(b);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(v,function(t){return Math.min(e(y).length,t+1)});break;case"backward":t(v,function(e){return Math.max(0,e-1)})}var i=e(y),o=e(v);return o>=i.length?"":i[o]}),Z=(0,d.cn)(null,function(e,t,n){clearTimeout(null===(r=e(b))||void 0===r?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(y,function(t){return(0,u.Uy)(t,function(t){if(n!==t[e(v)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(v,e(y).length-1)}t(b,void 0)};t(b,{id:setTimeout(i,2e3),cb:i})});function x(e){var t,n=g(Z),o=(t=g(w),{forward:(0,a.Z)(function(){return function(){return t("forward")}},[t]),backward:(0,a.Z)(function(){return function(){return t("backward")}},[t])}),c=o.forward,u=o.backward,d=(0,s.useRef)(e.value);return(0,s.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&n(e.value),d.current=e.value)},[n,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,a.Z)(function(){return function(t){if(t.shiftKey||(0,l.jh)(t)){null===(r=e.onKeyDown)||void 0===r||r.call(e,t);return}var n,r,i=t.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),t.preventDefault(),t.stopPropagation();return}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}},[u,c,e]),onChange:(0,a.Z)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var C=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.B,(0,r._)({ref:t},n))}),k=s.forwardRef(function(e,t){var n=h();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(C,(0,r._)({ref:t},e))})}),S=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.II,(0,r._)({ref:t},e,n))}),_=s.forwardRef(function(e,t){var n=h();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(S,(0,r._)({ref:t},e))})})},93948:function(e,t,n){n.d(t,{Z:function(){return nL},r:function(){return nG}});var r=n(3796),i=n(99595),o=n(16155),a=n(12394),l=n(27387),c=n(66626),s=n(96583),u=n(38935),d=n(79904),f=n(22893),p=n(14548),h=n(24766),m=n(93245),g=n(36809),v=n(19602),y=n(54300),b=n(63163),w=n(52202),Z=n(41733),x=n(30509),C=n(99059),k=n(57185),S=n(42965),_=n(48827),T=n(58532),E=n(24374),R=n(76711),D=n(2446),I=n(5297),B=n(21262),A=n(71440);function P(){var e=(0,B._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return P=function(){return e},e}function G(){var e=(0,B._)(["\n  query CurrentUserUsageBasedBilling {\n    currentUser {\n      id\n      username\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var L=(0,A.Ps)(P());G();var N=n(9122);function O(){var e=(0,B._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return O=function(){return e},e}var U={},M=(0,A.Ps)(O(),L),X=n(82303);function F(){var e=(0,B._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return F=function(){return e},e}function W(){var e=(0,B._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return W=function(){return e},e}function V(){var e=(0,B._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}function H(){var e=(0,B._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return H=function(){return e},e}var z={},j=(0,A.Ps)(F()),q=(0,A.Ps)(W()),J=(0,A.Ps)(V()),Y=(0,A.Ps)(H()),$=n(96949),K=function(e){(0,$.j)($.U3.DATABASE_USED,(0,Z._)({type:"PostgreSQL",provider:"neon"},e))},Q=n(85983),ee=n(75271),et=n(97420),en=(0,g.X)({self:[],title:[b.l0.rowWithGap(8),b.l0.align.center,b.l0.color.foregroundDimmest],status:[b.l0.width(8),b.l0.height(8),b.l0.backgroundColor.foregroundDimmer,b.l0.borderRadius("full")],main:[b.l0.colWithGap(8),b.l0.align.center],icon:b.l0.mt(32),subTitle:b.l0.my(16),cta:[b.l0.width("100%"),b.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[b.l0.colWithGap(8),b.l0.align.center],ctaStatusBanner:[b.l0.textAlign.left],budgetContainer:[b.l0.colWithGap(8),b.l0.border(),b.l0.borderRadius(8),b.l0.p(8)]});function er(e){var t=e.loading,n=e.ubbExplanation,i=e.hasPaymentMethod,o=e.handleOnUnpause,a=e.refetchUbbCapabilitiesQueryData,l=e.setShowPaymentMethodForm,c=e.showPaymentMethodForm,s=e.setShowSupportForm,u=(0,S.sG)();return n===Q.Fp.NeedsSubscription||n===Q.Fp.NeedsSubscriptionOrPaymentMethod?u?(0,r.tZ)(f.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:en.ctaStatusBanner}):(0,r.BX)(m.G,{css:en.ctaContainer,children:[(0,r.tZ)(I.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:en.cta,colorway:"primary",variant:"outlined",disabled:c,onPlanCheckoutComplete:a}),(0,r.tZ)(d.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:en.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(R.Z,{}),onClick:function(){return l()}})]}):n===Q.Fp.NeedsSmsVerification?(0,r.tZ)(C.Z,{context:Q.jv.Neon,onSuccess:a}):n===Q.Fp.NeedsPaymentMethod?u?(0,r.tZ)(f.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:en.ctaStatusBanner}):(0,r.tZ)(d.zx,{colorway:"primary",text:"Add a payment method",css:en.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(R.Z,{}),onClick:function(){return l()}}):n===Q.Fp.NeedsUnbanning?(0,r.tZ)(E.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,r.tZ)(y.Z,{}),css:en.ctaStatusBanner,onClick:function(){return s()}}):n===Q.Fp.InsufficientBudget?(0,r.BX)(r.HY,{children:[(0,r.tZ)(f.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:en.ctaStatusBanner}),(0,r.tZ)(m.G,{css:en.budgetContainer,children:(0,r.tZ)(_.L,{onUpdateSuccess:a})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.zx,{colorway:"primary",onClick:o,text:"Unpause database",loading:t,css:en.cta}),!1===i?(0,r.tZ)(E.u,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,r.tZ)(y.Z,{}),css:en.ctaStatusBanner,onClick:function(){return u?null:l()}}):null]})}function ei(e){var t,n,o,a=e.replId,l=e.neonProjectId,s=(0,c._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,c._)((0,ee.useState)(!1),2),p=f[0],g=f[1],v=(0,i.Z)().showError,y=(t=(0,Z._)({},U,{notifyOnNetworkStatusChange:!0,onError:function(e){v(e.message)}}),N.a(M,t)),w=y.loading,C=y.data,S=y.refetch,_=(0,c._)((n=(0,Z._)({},z,{refetchQueries:[{query:J,variables:{input:{replId:a}}}],onError:function(e){v("Error when unfreezing Neon database: ".concat(e.message)),K({action:"unfreeze",success:!1})},update:function(e,t){var n,r=t.data,i=e.readQuery({query:J,variables:{input:{replId:a}}});(null==r?void 0:r.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==i?void 0:null===(n=i.getNeonDatabases)||void 0===n?void 0:n.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:J,variables:{input:{replId:a}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:i.getNeonDatabases.databases.map(function(e){return e.projectId===l?(0,x._)((0,Z._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){v("Error: Unfreezes Neon Database failed."),K({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?K({action:"unfreeze",success:!0}):(v("Error: Unfreezes Neon Database failed."),K({action:"unfreeze",success:!1}))}}),X.D(Y,n)),2),E=_[0],R=_[1].loading,I=(null==C?void 0:null===(o=C.currentUser)||void 0===o?void 0:o.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?C.currentUser.usageBasedBilling.capabilities:null;return(0,r.BX)(m.G,{css:en.self,children:[(0,r.tZ)(T.u,{isOpen:p,onRequestClose:function(){return g(!1)},children:(0,r.tZ)(k.Z,{onRequestClose:function(){return g(!1)}})}),(0,r.BX)(m.G,{css:en.title,children:[(0,r.tZ)(m.G,{css:en.status}),(0,r.tZ)(h.xv,{css:[b.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,r.BX)(m.G,{css:en.main,children:[(0,r.tZ)(D.Z,{size:32,fill:et.TV.foregroundDimmest,css:en.icon}),(0,r.tZ)(h.xv,{variant:"subheadDefault",css:en.subTitle,multiline:!1,children:"Your Database is paused."}),(0,r.tZ)(er,{loading:w||R,ubbExplanation:null==I?void 0:I.explanation,hasPaymentMethod:null==I?void 0:I.hasPaymentMethod,handleOnUnpause:function(){E({variables:{input:{replId:a,neonProjectId:l}}})},refetchUbbCapabilitiesQueryData:S,setShowPaymentMethodForm:function(){return d(!0)},showPaymentMethodForm:u,setShowSupportForm:function(){return g(!0)}})]})]})}var eo=n(61989),ea=function(e){var t=e.title,n=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(m.G,{css:[b.l0.colWithGap(8),b.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:b.TV.outlineDefault},o],children:i?(0,r.tZ)(eo.Q,{headerContent:(0,r.tZ)(m.G,{css:[b.l0.rowWithGap(8),b.l0.align.center],children:(0,r.tZ)(h.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(m.G,{css:[b.l0.p(12),b.l0.colWithGap(8),b.l0.height("100%")],children:n})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(h.xv,{multiline:!1,css:[b.l0.fontSize(b.TV.fontSizeSubheadDefault),b.l0.fontWeight.medium],children:t}),n]})})},el=n(83059),ec=n(54505),es=n(44935),eu=n(86201),ed=n(16865),ef=n(61010),ep=n(31089),eh=n(23882),em="DATABASE_URL",eg="PGDATABASE",ev="PGHOST",ey="PGPORT",eb="5432",ew="PGUSER",eZ="PGPASSWORD",ex=function(e){var t=e.envVarKey,n=e.envVarValue,i=e.isSecret,o=(0,ep.U)()("db-env-var-".concat(t)),a=(0,c._)((0,ee.useState)(!1),2),l=a[0],s=a[1];return(0,r.BX)(m.G,{css:[b.l0.flex.row,b.l0.flex.wrap,b.l0.align.end,b.l0.pb(8),{gap:b.TV.space8}],children:[(0,r.BX)(m.G,{css:[b.l0.colWithGap(8),{flexBasis:250},b.l0.flex.grow(0),b.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:b.l0.color.foregroundDimmer,htmlFor:o,children:t}),(0,r.tZ)(es.II,{id:o,type:!i||l?"text":"password",readOnly:!0,value:n})]}),(0,r.tZ)(d.zx,{text:"Copy",iconLeft:(0,r.tZ)(eu.Z,{}),onClick:function(){(0,ec.Z)(n),K({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),i?(0,r.tZ)(d.zx,{text:l?"Hide":"View",iconLeft:l?(0,r.tZ)(ef.Z,{}):(0,r.tZ)(ed.Z,{}),onClick:function(){return s(function(e){return!e})}}):null]})},eC=function(e){var t=e.connectionString,n=e.databaseName,r=new URL(t.replace("postgres://","https://")),i=r.host,o=r.username,a=r.password;return new Map([[em,t],[eg,n],[ev,i],[ey,eb],[ew,o],[eZ,a]])},ek=function(){var e=(0,eh.Z)().secrets;return(0,ee.useCallback)(function(t){var n=eC({connectionString:t.connectionString,databaseName:t.databaseName});function r(){return(r=(0,l._)(function(){var t,r,i,o,a,l,u,d,f,p;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return[4,e.read()];case 1:t=s.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)f=(d=(0,c._)(u.value,2))[0],p=d[1],t.get(f)!==p&&r.set(f,p)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&e.addEntries(r),[2]}})})).apply(this,arguments)}!function(){r.apply(this,arguments)}()},[e])},eS=function(e){var t=e.connectionString,n=e.databaseName,i=(0,el.Z)(function(){return eC({connectionString:t,databaseName:n})},[t,n]),o=i.get(ev),a=i.get(ew),l=i.get(eZ);if("string"!=typeof o||"string"!=typeof a||"string"!=typeof l)throw Error("Expected all envVars to exist");var c=ek();return(0,ee.useEffect)(function(){c({connectionString:t,databaseName:n})},[t,n,c]),(0,r.BX)(m.G,{css:[b.l0.colWithGap(8)],children:[(0,r.tZ)(ex,{envVarKey:em,envVarValue:t,isSecret:!0}),(0,r.tZ)(ex,{envVarKey:eg,envVarValue:n}),(0,r.tZ)(ex,{envVarKey:ev,envVarValue:o}),(0,r.tZ)(ex,{envVarKey:ey,envVarValue:eb}),(0,r.tZ)(ex,{envVarKey:ew,envVarValue:a}),(0,r.tZ)(ex,{envVarKey:eZ,envVarValue:l,isSecret:!0})]})},e_=n(54994),eT=n(9602),eE=n(46321);n(39031);var eR=n(80786),eD=n(49853);function eI(e){var t=e.title,n=e.doWarnAtom,i=e.inactive,o=(0,eR.Dv)(n);return(0,r.BX)(m.G,{css:[b.l0.rowWithGap(4),b.l0.align.center],children:[(0,r.tZ)(h.xv,{variant:"small",css:b.l0.color.foregroundDimmer,multiline:!1,children:void 0!==i&&i?t+" last run":t}),o?(0,r.tZ)(y.Z,{color:b.TV.orangeStronger}):null]})}function eB(e){var t=e.title,n=e.totalAtom,i=e.currentAtom,o=e.countAtom,a=e.measure,l=e.limitText,c=e.inactive,s=void 0!==c&&c,u=(0,el.Z)(function(){return(0,eD.cn)(function(e){return eP(e(i),e(n))})},[i,n]),d=(0,el.Z)(function(){return(0,eD.cn)(function(e){var t,r,c,s;return l||(t=e(u),r=e(i),c=e(n),s=o&&e(o),"empty"===t||void 0===r?void 0:"vCPU"===a?eG(100*Math.min(1,r/c))+"% of "+s+" vCPUs":eG(r).toLocaleString()+"/"+eG(c).toLocaleString()+" "+a)})},[l,u,i,n,o,a]),f=(0,el.Z)(function(){return(0,eD.cn)(function(e){var t=e(u);return"At limit"===t||"Close to limit"===t})},[u]);return(0,r.BX)(m.G,{css:[b.l0.colWithGap(4),b.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,r.tZ)(eI,{title:t,doWarnAtom:f,inactive:s}):null,(0,r.tZ)(eA,{currentAtom:i,totalAtom:n,inactive:s,limitTextAtom:d,mini:!0})]})}function eA(e){var t=e.currentAtom,n=e.totalAtom,i=e.limitTextAtom,o=e.inactive,a=e.mini,l=(0,eR.Dv)(n),c=(0,eR.Dv)(t),s=(0,eR.Dv)(i),u=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return b.TV.accentNegativeDefault;case"Close to limit":return b.TV.orangeDefault}}(eP(c,l));return(0,r.tZ)(eE.J,{css:a&&b.l0.height(8),total:l,current:c,color:u,disabled:o,tooltip:s})}function eP(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function eG(e){return Math.round((e+Number.EPSILON)*100)/100}var eL=n(9834),eN=n.n(eL),eO=n(86333),eU=n(62279),eM=n(48155),eX=n(10578),eF=n(15323),eW=n(63257),eV=n(49673),eH=n(91394),ez=n(11092),ej=n(26464),eq=n(99399),eJ=n(6921),eY=n(11659),e$=n(11432),eK=n(33938),eQ=n(13851),e0=n(23350),e1=n(84710),e2=n(41805),e3=n(78355),e4={"td,th":{border:"1px solid "+b.TV.outlineDefault}},e8={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},e6={outline:"2px solid ".concat(b.TV.accentPrimaryDefault),outlineOffset:"-2px"},e5=(0,eU.iv)({":focus:focus-visible":e6}),e7=(0,eU.iv)(e6),e9=(0,eU.iv)([e8,e4,e5]),te=(0,eU.iv)([b.l0.fontWeight.medium,e8,e4,e5]),tt=(0,eU.iv)({"tbody > tr:hover":{backgroundColor:b.TV.backgroundHigher,cursor:"pointer"}});function tn(e){var t=e.type,n=e.style,i=e.children,o=(0,eV.LA)().rowGroupProps;return(0,r.tZ)(t,(0,x._)((0,Z._)({},o),{style:n,children:i}))}function tr(e){var t=e.item,n=e.state,i=e.children,o=(0,ee.useRef)(null),a=(0,eH.Q)({node:t},n,o).rowProps;return(0,r.tZ)("tr",(0,x._)((0,Z._)({css:te},a),{ref:o,children:i}))}function ti(e){var t,n=e.column,i=e.state,o=(0,ee.useRef)(null),a=(0,ez.W)({node:n},i,o).columnHeaderProps,l=(0,ej.F)(),c=l.isFocusVisible,s=l.focusProps;return(0,r.tZ)("th",(0,x._)((0,Z._)({},(0,eq.d)(a,s)),{css:[c&&e7,e5],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:o,children:n.rendered}))}function to(e){var t=e.item,n=e.children,i=e.state,o=(0,ee.useRef)(null),a=(0,eJ.U)({node:t},i,o).rowProps,l=(0,ej.F)(),c=l.isFocusVisible,s=l.focusProps;return(0,r.tZ)("tr",(0,x._)((0,Z._)({css:[c&&e7,e9]},(0,eq.d)(a,s)),{ref:o,children:n}))}function ta(e){var t=e.cell,n=e.state,i=(0,ee.useRef)(null),o=(0,eY.f)({node:t},n,i).gridCellProps,a=(0,ej.F)(),l=a.isFocusVisible,c=a.focusProps;return(0,r.tZ)("td",(0,x._)((0,Z._)({},(0,eq.d)(o,c)),{css:[l&&e7,e5],ref:i,children:t.rendered}))}function tl(e){var t=e.selectionMode,n=e.selectionBehavior,i=(0,eK.o)((0,x._)((0,Z._)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),o=(0,ee.useRef)(null),a=i.collection,l=(0,e$.x)(e,i,o).gridProps;return(0,r.BX)("table",(0,x._)((0,Z._)({},l),{ref:o,css:[(null==e?void 0:e.onRowAction)&&tt],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(tn,{type:"thead",children:a.headerRows.map(function(e){return(0,r.tZ)(tr,{item:e,state:i,children:(0,eW._)(e.childNodes).map(function(e){return(0,r.tZ)(ti,{column:e,state:i},e.key)})},e.key)})}),(0,r.tZ)(tn,{type:"tbody",children:(0,eW._)(a.body.childNodes).map(function(e){return(0,r.tZ)(to,{item:e,state:i,children:(0,eW._)(e.childNodes).map(function(e){return(0,r.tZ)(ta,{cell:e,state:i},e.key)})},e.key)})})]}))}var tc=function(e){var t=e.ariaTableProps,n=e.rows,i=e.columns;return(0,r.BX)(tl,(0,x._)((0,Z._)({},t),{children:[(0,r.tZ)(eQ.x,{columns:i,children:function(e){return(0,r.tZ)(e0.s,{children:e.value})}}),(0,r.tZ)(e1.R,{items:n,children:function(e){return(0,r.tZ)(e2.X,{children:function(t){return(0,r.tZ)(e3.b,{children:e[t]})}})}})]}))};function ts(e){var t=e.headerColumns,n=e.bodyData,i=e.ariaLabel,o=e.scrollRef,a=e.onRowAction,l=t.map(function(e,t){return{key:"string"==typeof e?e:"".concat(t),value:e}}),c=n.map(function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,r.tZ)(tc,{ariaTableProps:{selectionMode:"none","aria-label":void 0===i?"Database Table":i,onRowAction:a,scrollRef:o},columns:l,rows:c})}var tu=(0,eD.cn)(["databaseManager"]),td=(0,eD.cn)(null,function(e,t,n){var r=e(tu);t(tu,(0,eW._)(r).concat([n])),K({action:"pageNav",databasePage:n})}),tf=(0,eD.cn)(null,function(e,t){var n=e(tu);t(tu,n.slice(0,n.length-1))}),tp=(0,eD.cn)(function(e){var t=e(tu);return t[t.length-1]}),th=function(){return(0,eR.b9)(td)},tm=function(){return(0,eR.b9)(tf)},tg=function(e,t){var n,r=(0,eh.Z)().psql,i=(0,c._)((0,ee.useState)(),2),o=i[0],a=i[1],u=(0,c._)((0,ee.useState)(!1),2),d=u[0],f=u[1],p=(0,ee.useCallback)((n=(0,l._)(function(){return(0,s.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),f(!0),[4,r.run({query:e,connectionString:t})];case 2:return a(n.sent()),[3,4];case 3:return f(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),[t,r,e]);return(0,ee.useEffect)(function(){p()},[t,r,e,p]),{data:o,loading:d,refetch:p}},tv=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!=n?n:[],bodyData:t.map(function(e){return Object.values(e)})}},ty=function(e){return tg("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},tb=(0,eD.cn)(void 0),tw=(0,eD.cn)(function(e){var t=e(tb);return null==t?void 0:t.rows.reduce(function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e},{})}),tZ=function(e){var t=tg("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,n=(0,eR.b9)(tb);(0,ee.useEffect)(function(){n(t)},[t,n])},tx=function(e){var t=e.tableName,n=e.connectionString;return tg("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(t.replace(/"/g,'""'),"';"),n).data},tC=function(e){var t=e.tableData,n=e.scrollRef,i=t.headerColumns,o=t.bodyData,a=th(),l=(0,ee.useCallback)(function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=o[t][i.indexOf("Name")];a("table/".concat(n))}},[a,i,o]);return(0,r.tZ)(ts,{headerColumns:i,bodyData:o,onRowAction:l,scrollRef:n})},tk=function(e){var t=e.psqlQueryResult,n=e.scrollRef,i=t.data;if(t.loading)return(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(eX.Z,{})});if(null==i?void 0:i.error)return(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentNegativeDefault,b.l0.maxWidth("100%")],children:null==i?void 0:i.error})});var o=i?tv(i):null;return o?(0,r.tZ)(tC,{tableData:o,scrollRef:n}):(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentPositiveDefault,b.l0.maxWidth("100%")],children:"No tables found"})})},tS=function(e){var t=e.connectionString,n=tm(),i=(0,ee.useRef)(null),o=ty({connectionString:t}),a=o.refetch;return(0,r.BX)(m.G,{css:[b.l0.flex.column,b.l0.height("100%")],children:[(0,r.BX)(m.G,{css:[b.l0.flex.row,b.l0.py(16),b.l0.px(8),b.l0.align.center],children:[(0,r.tZ)(eT.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(eM.Z,{})}),(0,r.tZ)(m.G,{css:[b.l0.flex.growAndShrink(1)],children:(0,r.tZ)(h.xv,{css:[b.l0.fontSize(16),b.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,r.tZ)(eT.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,r.tZ)(eF.Z,{})})]}),(0,r.tZ)(m.G,{css:[b.l0.flex.growAndShrink(1),b.l0.overflow("auto"),b.l0.px(8)],innerRef:i,children:(0,r.tZ)(tk,{psqlQueryResult:o,scrollRef:i})})]})},t_="1px solid "+b.TV.outlineDefault,tT=(0,eU.iv)([b.l0.p(8),b.l0.backgroundColor.backgroundDefault,b.l0.align.center,b.l0.borderRadius(0),{borderLeft:t_,borderRight:t_,borderBottom:t_},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(b.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:b.TV.backgroundHigher}}}]),tE=function(e){var t=ty({connectionString:e.connectionString}),n=t.data,i=t.loading,o=(0,c._)((0,ee.useState)(!1),2),a=o[0],l=o[1],s=(0,ee.useCallback)(function(){l(!0)},[]),u=n?tv(n):null,f=(0,ee.useRef)(null);if(!u||i)return null;var p=u.bodyData.length,h=u.headerColumns,g=u.bodyData;return(0,r.tZ)(r.HY,{children:(0,r.BX)(m.G,{css:[b.l0.overflow("auto"),b.l0.display.grid],innerRef:f,children:[(0,r.tZ)(tC,{tableData:{headerColumns:h,bodyData:a?g:g.slice(0,5)},scrollRef:f}),p-5>0&&!a?(0,r.tZ)(d.zx,{text:"".concat(p-5," more"),css:tT,onClick:s}):null]})})},tR="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",tD="https://docs.replit.com/replit-core/about-usage-based-billing#1-postgresql-usage-metrics",tI=n(3569),tB=n(68140),tA=n(56091),tP=function(e){var t=e.dbSize,n=e.totalSize,i=(0,eO.t)(t),o=(0,eO.t)(n),a=(0,el.Z)(function(){return(0,eD.cn)(t)},[t]),l=(0,el.Z)(function(){return(0,eD.cn)(n)},[n]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(h.xv,{css:b.l0.color.foregroundDimmer,multiline:!1,children:[i,"/",o]}),(0,r.tZ)(eB,{totalAtom:l,currentAtom:a,limitText:"".concat(i," / ").concat(o),inactive:!1,measure:"MB"})]})},tG=function(e){var t,n,i=e.connectionString,o=tg("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=tg("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),s=c.data,u=c.loading,d=parseInt(null!==(n=null==a?void 0:null===(t=a.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null==s?void 0:s.rows.length;return(0,r.BX)(m.G,{css:b.l0.rowWithGap(8),children:[u?null:(0,r.BX)(h.xv,{multiline:!1,children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(tP,{dbSize:d,totalSize:10737418240})]})},tL=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,i=e.showUsageLink,o=(0,tA.$y)(window.location.pathname),a=o.id,l=o.slug,c=(0,tI._Q)({id:a,slug:l}),s=a===tB.x0?"/usage#postgres-storage":"".concat(c.usage.href,"#postgres-storage");return(0,r.BX)(m.G,{css:[b.l0.colWithGap(8)],children:[(0,r.BX)(m.G,{children:[(0,r.tZ)(tG,{connectionString:t}),i?(0,r.tZ)(eN(),{legacyBehavior:!0,href:s,passHref:!0,children:(0,r.tZ)("a",{css:b.l0.hover(b.l0.color.accentPrimaryStrongest),children:(0,r.tZ)(h.xv,{children:"See all usage"})})}):null]}),(0,r.tZ)(tE,{connectionString:t}),(0,r.tZ)(d.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(e_.Z,{}),onClick:n})]})},tN=n(379),tO=function(e){var t=e.psqlQueryResult,n=e.tableName,i=e.connectionString,o=e.scrollRef,a=t.data,l=t.loading,c=tx({tableName:n,connectionString:i});if(l)return(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(eX.Z,{})});if(null==a?void 0:a.error)return(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentNegativeDefault,b.l0.maxWidth("100%")],children:null==a?void 0:a.error})});var s=a?tv(a):null;if(!s)return(0,r.tZ)(m.G,{css:[b.l0.flex.row,b.l0.justify.center,b.l0.p(32)],children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentPositiveDefault,b.l0.maxWidth("100%")],children:"No rows"})});var u=s.headerColumns,d=s.bodyData;return(0,r.tZ)(ts,{headerColumns:u.map(function(e,t){var n,i=null==c?void 0:null===(n=c.rows)||void 0===n?void 0:n.find(function(t){return t.column_name===e}),o=null==i?void 0:i.data_type,a=o?(0,r.tZ)(tN.D,{text:o}):null;return(0,r.BX)(m.G,{css:[b.l0.rowWithGap(8),b.l0.align.center],children:[(0,r.tZ)(h.xv,{multiline:!1,children:e}),a]},t)}),bodyData:d,scrollRef:o})},tU=function(e){var t=e.tableName,n=e.connectionString,i=tm(),o=(0,ee.useRef)(null),a=tg('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),l=a.refetch;return(0,r.BX)(m.G,{css:[b.l0.flex.column,b.l0.height("100%")],children:[(0,r.BX)(m.G,{css:[b.l0.flex.row,b.l0.py(16),b.l0.px(8),b.l0.align.center],children:[(0,r.tZ)(eT.hU,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(eM.Z,{})}),(0,r.tZ)(m.G,{css:[b.l0.flex.growAndShrink(1)],children:(0,r.tZ)(h.xv,{css:[b.l0.fontSize(16),b.l0.ml(8)],multiline:!1,children:t})}),(0,r.tZ)(eT.hU,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(eF.Z,{})})]}),(0,r.tZ)(m.G,{css:[b.l0.flex.growAndShrink(1),b.l0.overflow("auto"),b.l0.px(8)],innerRef:o,children:(0,r.tZ)(tO,{psqlQueryResult:a,tableName:t,connectionString:n,scrollRef:o})})]})};n(28065);var tM=function(e){var t=e.size;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===t?16:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},tX=(0,eU.iv)([b.l0.color.foregroundDimmest,{textDecoration:"underline"}]),tF=function(){return(0,r.tZ)(m.G,{css:[b.l0.colWithGap(8),b.l0.py(8),b.l0.width("100%")],children:(0,r.BX)(m.G,{css:[b.l0.rowWithGap(8),b.l0.align.center,b.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:tR,css:tX,children:"Docs"}),(0,r.BX)(m.G,{css:[b.l0.rowWithGap(8),b.l0.align.center],children:[(0,r.tZ)(h.xv,{css:[b.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,r.tZ)(tM,{})]})]})})},tW=n(67546),tV=n(80403),tH=n(3030),tz=n(64988),tj=n(1076),tq=n(48096),tJ=n(91166),tY=n(52927),t$=n(11515),tK=n(42305),tQ=n(14118),t0=n(27840),t1=n(37968),t2=n(71484),t3=n(32230),t4=n(90333),t8=n(69967),t6=n(42354),t5=n(43561),t7=n(12467),t9=function(e){var t=e.headerTitle,n=e.onGoBack,i=e.children;return(0,r.BX)(m.G,{css:[b.l0.flex.column,b.l0.height("100%")],children:[(0,r.BX)(m.G,{css:[b.l0.flex.row,b.l0.py(16),b.l0.px(8),b.l0.align.center],children:[(0,r.tZ)(eT.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(eM.Z,{})}),(0,r.tZ)(h.xv,{css:[b.l0.fontSize(16),b.l0.ml(8)],multiline:!1,children:t})]}),(0,r.tZ)(m.G,{css:[b.l0.overflow("auto"),b.l0.height("calc(100% - 60px)")],children:i})]})},ne=(0,eD.cn)(""),nt=(0,eD.cn)(null),nn=(0,eD.cn)(null,function(e,t,n){var r=n.query;r&&t(ne,r);var i=e(nt);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),nr=n(85234),ni=n.n(nr),no=n(41974),na=n(80951),nl=n(21962),nc=(0,na.O4)("replDatabasesQueryHistory",[]),ns=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},nu=function(e,t){var n=e.findIndex(function(e){return!e.isPinned&&e.data===t.data});-1!==n?e.splice(n,1,t):e.push(t),e.sort(ns);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},nd=function(e){var t=e.id,n=e.data,i=e.isPinned,o=(0,nl.lV)((0,ee.useCallback)(function(e,n){var r=e(nc).find(function(e){return e.id===t}),i=(null==r?void 0:r.data)||"";i&&(n(nn,{query:i}),K({action:"queryHistoryItemSelected"}))},[t])),a=(0,nl.lV)((0,ee.useCallback)(function(e,n){var r=e(nc);n(nc,(0,no.Uy)(r,function(e){var n=e.find(function(e){return e.id===t});n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),e.sort(ns)})),K({action:"queryHistoryItemPinned"})},[t]));return(0,r.BX)(m.G,{css:[{borderTop:"1px solid ".concat(b.TV.outlineDefault),":hover":{background:b.TV.backgroundHigher}},b.l0.flex.row,b.l0.p(8),b.l0.color.foregroundDimmer,b.l0.align.center,b.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(h.xv,{css:[b.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,r.tZ)(eT.hU,{alt:"Pin query",onClick:a,children:i?(0,r.tZ)(t3.Z,{fill:b.TV.accentPrimaryDefault}):(0,r.tZ)(t2.Z,{})})]})},nf=function(e){var t=e.onExpand,n=(0,eR.Dv)(nc);return(0,r.tZ)(eo.Q,{onClick:t,headerContent:(0,r.BX)(m.G,{css:[b.l0.rowWithGap(8),b.l0.align.center,b.l0.p(2)],children:[(0,r.tZ)(t1.Z,{}),(0,r.tZ)(h.xv,{css:[b.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,r.tZ)(m.G,{css:[b.l0.colWithGap(8),b.l0.height("100%")],children:0===n.length?(0,r.tZ)(m.G,{css:[b.l0.p(8)],children:(0,r.tZ)(h.xv,{css:[b.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,r.tZ)(m.G,{children:n.map(function(e){return(0,r.tZ)(nd,(0,Z._)({},e),e.id)})})})})},np=new tz.Rh(function(){return(0,tH.W$)((0,tY.V)((0,r.tZ)("div",{css:[{fontFamily:b.TV.fontFamilyCode},b.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),nh=new tK.j(function(e){return tV.Wl.high((0,tW.sql)((0,Z._)({dialect:tW.PostgreSQL},e)))}),nm=function(e){var t=e.queryResult,n=e.scrollRef;if(null==t?void 0:t.error)return(0,r.tZ)(m.G,{css:b.l0.px(8),children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentNegativeDefault],children:null==t?void 0:t.error})});if(!(null==t?void 0:t.rows))return null;var i=tv(t);if(!i)return(0,r.tZ)(m.G,{css:b.l0.px(8),children:(0,r.tZ)(h.xv,{css:[b.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(m.G,{css:b.l0.px(8),children:(0,r.tZ)(ts,{headerColumns:o,bodyData:a,scrollRef:n})})},ng=(0,eU.iv)([b.l0.height("100%"),b.l0.position.relative,b.l0.overflow("auto")]),nv=(0,eU.iv)([b.l0.position.sticky,b.l0.top(0),b.l0.left(0),b.l0.zIndex(1),b.l0.backgroundColor.backgroundDefault]),ny=function(e){var t=e.connectionString,n=e.performPaneOperation,i=(0,c._)((0,eR.KO)(ne),2),o=i[0],a=i[1],u=(0,t$.Z)(),f=u.ref,p=u.view,h=(0,c._)((0,ee.useState)(!1),2),g=h[0],v=h[1];(0,ee.useEffect)(function(){return function(){var e;a(null!==(e=null==p?void 0:p.state.doc.toString())&&void 0!==e?e:"")}},[a,null==p?void 0:p.state.doc]);var y=(0,eR.b9)(nt);(0,ee.useEffect)(function(){y(p)},[y,p]),tZ({connectionString:t});var w=(0,eR.Dv)(tw),Z=t7.qG,x=(0,tj.Z)({filePath:Z}),C=(0,eh.Z)().psql,k=(0,c._)((0,ee.useState)(),2),_=k[0],T=k[1],E=(0,c._)((0,ee.useState)(!1),2),R=E[0],D=E[1],I=(0,nl.lV)((0,ee.useCallback)(function(e,t,n){if(n){var r={id:ni()(),data:n,timestamp:Date.now()},i=e(nc);t(nc,(0,no.Uy)(i,function(e){nu(e,r)}))}},[])),B=(0,ee.useCallback)(function(){function e(){return(e=(0,l._)(function(){var e;return(0,s.Jh)(this,function(n){switch(n.label){case 0:if(!p)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),D(!0),I(e=null==p?void 0:p.state.doc.toString()),[4,C.run({query:e,connectionString:t})];case 2:return T(n.sent()),K({action:"queryRan"}),[3,4];case 3:return D(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,C,I,p]),A=th(),P=(0,ee.useCallback)(function(){A("databaseManager")},[A]),G=(0,ee.useCallback)(function(){A("tableSchemas")},[A]),L=(0,ee.useRef)(null),N=nh.use({schema:w}),O=(0,tQ.P5)({controlName:"flag-postgresql-pane-inline-ai"}),U=(0,S.T3)(),M=(0,t4.Ls)({path:Z}),X=(0,t4.jg)({path:Z}),F=(0,t4.fD)({path:Z}),W=(0,t6.W)({generateCode:M,editCode:X,explainCode:F,onMoreClick:void 0}),V=(0,ee.useCallback)(function(){p&&M(p,"unknown")},[p,M]),H=(0,ee.useCallback)(function(e){return n({operation:"open",pane:e,secondary:!0})},[n]),z=(0,ee.useCallback)(function(){H({type:"ghostwriterChat"})},[H]),j=(0,tq.W)({onGenerateCode:V,onReplyInChat:z}),q=(0,t8.u)({isMobile:U,generateCode:M,filePath:Z});return(0,r.tZ)(t9,{headerTitle:"Database Contents",onGoBack:P,children:(0,r.BX)(m.G,{css:[b.l0.colWithGap(8),ng],innerRef:L,children:[(0,r.BX)(m.G,{css:[b.l0.colWithGap(8),b.l0.px(8),b.l0.pb(8),g?null:nv],children:[(0,r.BX)(m.G,{css:[{border:"1px solid ".concat(b.TV.outlineDefault)},b.l0.borderRadius(2)],children:[(0,r.tZ)(tJ.ZP,{ref:f,filePath:Z,css:[t5.Mp,b.l0.backgroundColor.backgroundDefault,b.l0.borderRadius(8),b.l0.overflow("auto"),b.l0.minHeight(100),b.l0.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:o,extensions:[O?[]:np,N,x,O&&!U?W:[],O?j:[],O?q:[]]}),(0,r.tZ)(nf,{expanded:g,onExpand:function(){v(function(e){return!e})}})]}),(0,r.tZ)(d.zx,{text:"Run Query",iconLeft:R?(0,r.tZ)(eX.Z,{}):(0,r.tZ)(t0.Z,{}),onClick:B,disabled:R})]}),(0,r.tZ)(nm,{queryResult:_,scrollRef:L}),(0,r.tZ)(m.G,{css:[b.l0.colWithGap(8),b.l0.px(8),b.l0.py(8)],children:(0,r.tZ)(d.zx,{css:b.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(e_.Z,{}),onClick:G})})]})})},nb=n(87885),nw=(0,g.X)({self:[b.l0.colWithGap(0),b.l0.height("100%"),b.l0.p(8)],main:[b.l0.colWithGap(16),b.l0.flex.grow(1),b.l0.flex.shrink(0)],header:[b.l0.rowWithGap(8),b.l0.align.center],status:[b.l0.width(8),b.l0.height(8),b.l0.backgroundColor.accentPositiveStronger,b.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(b.TV.accentPositiveStronger,")")}],title:[b.l0.color.accentPositiveStronger],docs:[w.Z,b.l0.maxWidth("100%")],footer:[b.l0.pt(16)],remove:[b.l0.py(8)],removeConfirm:[b.l0.p(8),b.l0.colWithGap(8)]}),nZ=function(e){var t,n=e.neonDatabases,a=e.performPaneOperation,g=n[0],b=(0,i.Z)().showError,w=(0,o.Z)(),x=(0,eR.Dv)(tp),C=th(),k=(0,ee.useCallback)(function(){C("queryEditor")},[C]),S=(0,c._)((t=(0,Z._)({},z,{refetchQueries:[{query:J,variables:{input:{replId:w}}}],update:function(e,t,n){var r=t.data,i=n.variables;if(null==r||!r.deleteNeonDatabase||"success"in r.deleteNeonDatabase){var o=e.readQuery({query:J,variables:{input:{replId:w}}});i&&(null==o?void 0:o.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:J,variables:{input:{replId:w}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:o.getNeonDatabases.databases.filter(function(e){return e.databaseId!==i.input.databaseId})}}})}}}),X.D(q,t)),2),_=S[0],T=S[1].loading,E=(0,ee.useCallback)(function(){B(!0)},[]),R=(0,ee.useCallback)((0,l._)(function(){var e,t,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return[4,_({variables:{input:{replId:w,databaseId:g.databaseId}}})];case 1:if(t=(e=r.sent()).data,n=e.errors,B(!1),n&&n.length>0)return b("Error when deleting Neon database: ".concat(null==n?void 0:n.join())),K({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return b("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),K({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?K({action:"removed",success:!0}):(b("Error: Delete Neon Database failed."),K({action:"removed",success:!1})),[2]}})}),[_,g.databaseId,w,b]),D=(0,c._)((0,ee.useState)(!1),2),I=D[0],B=D[1],A=(0,ee.useCallback)(function(){B(!1)},[]),P=(0,nb.K1)(),G=eC({connectionString:g.connectionString,databaseName:g.databaseName}).get(ev);if("string"!=typeof G)throw Error("Expected host to be set");var L=G.split(".")[0],N=P||"".concat(g.connectionString,"/").concat(g.databaseName,"?sslmode=require&options=project%3D").concat(L);if("queryEditor"===x)return(0,r.tZ)(ny,{connectionString:N,performPaneOperation:a});if("tableSchemas"===x)return(0,r.tZ)(tS,{connectionString:N});if(x.startsWith("table/")){var O=x.slice(x.indexOf("/")+1);return(0,r.tZ)(tU,{tableName:O,connectionString:N})}return(0,r.BX)(m.G,{css:nw.self,children:[(0,r.tZ)(m.G,{css:nw.main,children:g.isFrozen?(0,r.tZ)(ei,{replId:w,neonProjectId:g.projectId}):(0,r.BX)(r.HY,{children:[(0,r.BX)(m.G,{css:nw.header,children:[(0,r.tZ)(m.G,{css:nw.status}),(0,r.tZ)(h.xv,{css:nw.title,multiline:!1,children:"Database connected"})]}),(0,r.tZ)(ea,{title:"Database Info",children:(0,r.tZ)(tL,{connectionString:N,onOpenDatabaseViewerClick:k,showUsageLink:!0})}),(0,r.tZ)(ea,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(u.ZP,{css:nw.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,r.tZ)(ea,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(eS,{connectionString:N,databaseName:g.databaseName})})]})}),(0,r.tZ)(m.G,{css:nw.footer,children:I||T?(0,r.BX)(p.Tg,{css:nw.removeConfirm,elevated:!0,children:[(0,r.tZ)(h.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,r.tZ)(f.E,{icon:(0,r.tZ)(y.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(d.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:T,iconLeft:(0,r.tZ)(v.Z,{}),onClick:R}),(0,r.tZ)(d.zx,{text:"Cancel",disabled:T,onClick:A})]}):(0,r.tZ)(d.zx,{css:nw.remove,text:"Remove Database",disabled:T,iconLeft:(0,r.tZ)(v.Z,{}),onClick:E})}),(0,r.tZ)(tF,{})]})},nx=n(14769),nC=n(21602),nk=n(39808),nS=n(13850);function n_(){var e=(0,B._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return n_=function(){return e},e}var nT={},nE=(0,A.Ps)(n_()),nR=n(66791),nD=n(87387),nI=n(50366),nB=(0,g.X)({cta:[b.l0.width("100%"),b.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[b.l0.colWithGap(8),b.l0.align.center],ctaStatusBanner:[b.l0.textAlign.left],payment:[b.l0.p(16),b.l0.borderRadius(12),b.l0.textAlign.left,b.l0.shadow(2)],budgetContainer:[b.l0.colWithGap(8),b.l0.border(),b.l0.borderRadius(8),b.l0.p(8)],details:[b.l0.colWithGap(16)],detailsItem:[b.l0.display.grid,b.l0.gap(16),{gridTemplateColumns:"56px auto",gap:16}],detailsText:[b.l0.flex.growAndShrink(1),b.l0.textAlign.left],actionsContainer:[b.l0.colWithGap(8)]});function nA(e){var t=e.loading,n=e.createDatabaseAuthz,i=e.handleOnCreate,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,S.sG)();if(!n)return(0,r.tZ)(m.G,{css:nB.ctaContainer,children:(0,r.tZ)(eX.Z,{})});if(!n.isAuthorized&&s)return(0,r.tZ)(f.E,{text:n.message,colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:nB.ctaStatusBanner});switch(n.code){case Q.RO.RequiresPaymentMethodOrSubscription:case Q.RO.RequiresActiveSubscription:return(0,r.BX)(m.G,{css:nB.ctaContainer,children:[(0,r.tZ)(I.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:nB.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,r.tZ)(d.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:nB.cta,disabled:l,loading:t,iconLeft:(0,r.tZ)(R.Z,{}),onClick:function(){return a()}})]});case Q.RO.RequiresSmsVerification:return(0,r.tZ)(C.Z,{context:Q.jv.Neon,onSuccess:o});case Q.RO.RequiresPaymentMethod:return(0,r.tZ)(d.zx,{colorway:"primary",text:"Add a payment method",css:nB.cta,disabled:l,loading:t,iconLeft:(0,r.tZ)(R.Z,{}),onClick:function(){return a()}});case Q.RO.RequiresUnbanning:return(0,r.tZ)(E.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,r.tZ)(y.Z,{}),css:nB.ctaStatusBanner,onClick:function(){return c()}});case Q.RO.InsufficientBudget:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(f.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:nB.ctaStatusBanner}),(0,r.tZ)(m.G,{css:nB.budgetContainer,children:(0,r.tZ)(_.L,{onUpdateSuccess:o})})]});case Q.RO.FeatureDisabled:case Q.RO.FeatureUnsupportedForReplitTeams:case Q.RO.FeatureUnsupportedForTeamsEdu:case Q.RO.FeatureUnsupportedForTeamsFree:case Q.RO.FeatureUnsupportedForTeamsPro:case Q.RO.InsufficientPermissions:case Q.RO.InsufficientQuota:case Q.RO.RequiresEmailVerification:return(0,r.tZ)(f.E,{text:n.message,colorway:"warning",icon:(0,r.tZ)(y.Z,{}),css:nB.ctaStatusBanner});case Q.RO.Authorized:case Q.RO.AuthorizedQuota:return(0,r.tZ)(d.zx,{colorway:"primary",onClick:i,css:nB.cta,text:t?"":"Create a database",iconLeft:t?(0,r.tZ)(eX.Z,{}):(0,r.tZ)(r.HY,{}),loading:t});default:(0,nR.Z)(n.code)}}var nP=function(){var e,t,n=(0,c._)((0,ee.useState)(!1),2),u=n[0],d=n[1],f=(0,c._)((0,ee.useState)(!1),2),g=f[0],v=f[1],y=(0,o.Z)(),b=(0,i.Z)().showError,w=(e=(0,Z._)({},nT,{notifyOnNetworkStatusChange:!0,variables:{replId:y},onError:function(e){b(e.message)}}),N.a(nE,e)),C=w.loading,S=w.data,_=w.refetch,E=(0,eh.Z)().psql,R=ek(),D=(0,c._)((t=(0,Z._)({},z,{refetchQueries:[{query:J,variables:{input:{replId:y}}}],onError:function(e){b("Error when creating Neon database: ".concat(e.message)),K({action:"created",success:!1})},update:function(e,t){var n=t.data;(null==n?void 0:n.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"&&e.writeQuery({query:J,variables:{input:{replId:y}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:[(0,x._)((0,Z._)({},n.createNeonDatabase),{__typename:"NeonDatabase"})]}}})},onCompleted:function(e){return(0,l._)(function(){var t,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:if((null==e?void 0:e.createNeonDatabase.__typename)!=="CreateNeonDatabaseResult")return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,E.ensureNixPsqlPackageInstalled(!0)];case 2:return r.sent(),R({connectionString:(t=e.createNeonDatabase).connectionString,databaseName:t.databaseName}),K({action:"created",success:!0}),[3,4];case 3:return n=r.sent(),b("Error: ".concat(n.message)),[3,4];case 4:return[3,6];case 5:return b("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),K({action:"created",success:!1}),[2];case 6:return[2]}})})()}}),X.D(j,t)),2),I=D[0],B=D[1].loading,A=(null==S?void 0:S.repl.__typename)==="Repl"?S.repl.authorizations.createDatabase:void 0;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.u,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,r.tZ)(k.Z,{onRequestClose:function(){return v(!1)}})}),(0,r.tZ)(a.Z,{pane:{type:"neon"},maxWidth:450,body:(0,r.BX)(m.G,{css:nB.details,children:[(0,r.BX)(m.G,{css:nB.detailsItem,children:[(0,r.tZ)(nx.lt,{}),(0,r.BX)(h.xv,{css:nB.detailsText,children:["Get charged for what you use across compute time and storage (",(0,r.tZ)("a",{href:tD,target:"_blank",rel:"noopener",children:"see pricing"}),")."]})]}),(0,r.BX)(m.G,{css:nB.detailsItem,children:[(0,r.tZ)(nx.fG,{}),(0,r.BX)(h.xv,{css:nB.detailsText,children:["Replit ",nD.we," members receive $",nI.QP,"/month in credits to offset expenses (",(0,r.tZ)("a",{href:tD,target:"_blank",rel:"noopener",children:"see allocations"}),")."]})]})]}),action:(0,r.BX)(m.G,{css:nB.actionsContainer,children:[(0,r.tZ)(nk.Z,{href:tR,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,r.tZ)(nS.Z,{}),text:"Learn more"}),(0,r.tZ)(nA,{loading:C||B,createDatabaseAuthz:A,handleOnCreate:function(){I({variables:{input:{replId:y}}})},refetchUbbCapabilitiesQueryData:_,setShowPaymentMethodForm:function(){return d(!0)},showPaymentMethodForm:u,setShowSupportForm:function(){return v(!0)}}),u?(0,r.tZ)(p.Tg,{elevated:!0,css:nB.payment,children:(0,r.tZ)(nC.q,{onSuccess:(0,l._)(function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:return d(!1),[4,_()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})})]})},nG=function(){var e,t=(0,o.Z)(),n=(0,i.Z)().showError,r=(e=(0,Z._)({},z,{variables:{input:{replId:t}},fetchPolicy:"cache-and-network",ssr:!1,notifyOnNetworkStatusChange:!0,onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename&&n("Error: ".concat(e.getNeonDatabases.message))}}),N.a(J,e)),a=r.data;return{loading:r.loading,neonDatabases:(null==a?void 0:a.getNeonDatabases.__typename)==="GetNeonDatabasesResult"?a.getNeonDatabases.databases:[]}},nL=function(e){var t=e.performPaneOperation,n=nG(),i=n.loading,o=n.neonDatabases,l=(0,nb.v8)();return l?(0,r.tZ)(nZ,{neonDatabases:[l],performPaneOperation:t}):i?(0,r.tZ)(a.Z,{pane:{type:"neon"},maxWidth:450,loading:!0}):o.length>0?(0,r.tZ)(nZ,{neonDatabases:o,performPaneOperation:t}):(0,r.tZ)(nP,{})}},87885:function(e,t,n){n.d(t,{K1:function(){return s},U_:function(){return u},v8:function(){return c}});var r=n(49853),i=n(80786),o=n(75271),a=(0,r.cn)(null),l=(0,r.cn)(null),c=function(){return(0,i.Dv)(a)},s=function(){return(0,i.Dv)(l)},u=function(){var e=(0,i.b9)(a),t=(0,i.b9)(l);return(0,o.useCallback)(function(n){if(!n){e(null),t(null);return}e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)},[t,e])}},84232:function(e,t,n){n.d(t,{m:function(){return g}});var r=n(3796),i=n(62279),o=n(22419),a=n(93245),l=n(36809),c=n(39090),s=n(4733),u=n(94580),d=n(63163),f=n(53156),p=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),h=(0,l.X)({root:[d.l0.height(20),d.l0.width(20),d.l0.center]}),m=(0,l.X)({root:[h.root],pulseRoot:[h.root,{animation:"".concat(p," 2s infinite")}]});function g(){var e=(0,f.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(c.Z,{size:16,color:d.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(a.G,{css:m.pulseRoot,children:(0,r.tZ)(s.Z,{size:16,color:d.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(u.Z,{size:16,color:d.TV.foregroundDimmest})})})}},39268:function(e,t,n){n.d(t,{X2:function(){return d},iA:function(){return p},sg:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(93245),c=n(36809),s=n(63163);n(75271);var u=(0,c.X)({table:{},tableRow:[s.l0.rowWithGap(12),s.l0.align.center,s.l0.border({direction:"bottom"}),{boxSizing:"border-box"}],wrapper:[s.l0.rowWithGap(0)],column:[s.l0.display.flex,s.l0.colWithGap(0),s.l0.justify.center,s.l0.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.l0.rowWithGap(0),s.l0.align.center,s.l0.color.foregroundDimmest,s.l0.justify.spaceBetween,s.l0.fontSize("small"),s.l0.mx(4),s.l0.py(2),{overflow:"hidden",whiteSpace:"nowrap"}],responsiveWrapper:[],responsiveColumn:[]}),d=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)("tr",(0,i._)((0,r._)({css:u.tableRow},n),{children:(0,a.tZ)(l.G,{css:u.wrapper,children:t})}))},f=function(e){var t=e.header,n=e.width,r=e.last,i=e.children,o={};return(n&&(o.width=n),r&&(o.marginLeft="auto"),void 0!==t&&t)?(0,a.tZ)("th",{style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})}):(0,a.tZ)("td",{css:u.column,style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})})},p=function(e){var t=e.children;return(0,a.tZ)("table",{css:u.table,children:t})}},41895:function(e,t,n){n.d(t,{B:function(){return c}});var r=n(3796),i=n(62279),o=n(63163),a=n(93245),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var t=e.color,n=void 0===t?o.TV.redStronger:t,i=e.small,c=e.className,s=i?6:8;return(0,r.tZ)(a.G,{className:c,style:{backgroundColor:n,width:s,height:s,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.TV.backgroundDefault)},css:l})}},54328:function(e,t,n){n.d(t,{Z:function(){return nU},i:function(){return nO}});var r,i,o=n(27387),a=n(66626),l=n(63257),c=n(96583),s=n(3796),u=n(4251),d=n(14118),f=n(99595),p=n(16155),h=n(79904),m=n(91466),g=n(9164),v=n(22893),y=n(94622),b=n(24766),w=n(93245),Z=n(36809),x=n(27840),C=n(29737),k=n(90632),S=n(89774),_=n(13),T=n(30043),E=n(10055),R=n(63163),D=n(23882),I=n(12394),B=n(30446),A=n(75271),P=n(77631),G=n(83960),L=n(44935),N=n(97221),O=n(58532),U=n(14548),M=n(10578),X=n(31089),F=n(41733),W=n(21262),V=n(71440),H=n(9122);function z(){var e=(0,W._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return z=function(){return e},e}function j(){var e=(0,W._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var q={},J=(0,V.Ps)(z()),Y=(0,V.Ps)(j(),J),$=n(82303);function K(){var e=(0,W._)(["\n  mutation ObjectStoragePaneCreateBucketModal($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var Q={},ee=(0,V.Ps)(K(),J);function et(){var e=(0,W._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return et=function(){return e},e}var en={},er=(0,V.Ps)(et()),ei=(0,Z.X)({createBucketButton:[R.l0.flex.growAndShrink(1),R.l0.justify.center,R.l0.textAlign.center],form:[R.l0.px(4)],labeledInput:[R.l0.colWithGap(8),R.l0.flex.growAndShrink(1),R.l0.textAlign.left],row:[R.l0.flex.growAndShrink(1),R.l0.pt(16),R.l0.rowWithGap(16),{flexBasis:"300px"}],wrapper:[R.l0.flex.row,R.l0.flex.wrap]});function eo(e){var t,n,r,i,o,l,c,u,d,f,m,g,v,y,Z=e.isOpen,x=e.onBucketCreated,C=e.onError,k=e.onRequestClose,S=(n=(t={}).preferredName,r=t.teamId,o=(i=(0,a._)((0,A.useState)(""),2))[0],l=i[1],c=(0,A.useRef)(null),u=(0,A.useRef)(!1),m=(d=(0,F._)({},en,{variables:{name:n,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1}),f=H.a(er,d)).data,g=f.previousData,v=(null==m?void 0:m.bucketName)||(null==g?void 0:g.bucketName),(0,A.useEffect)(function(){v&&!u.current&&l(v)},[v]),{name:o,setName:(0,A.useCallback)(function(e){u.current=!0,l(e.slice(0,60))},[]),nameInputRef:c}),_=S.name,E=S.setName,R=S.nameInputRef,D=(0,p.Z)(),I=(0,a._)((y=(0,F._)({},Q,{variables:{input:{name:_,replId:D}}}),$.D(ee,y)),2),B=I[0],P=I[1].loading;return(0,s.tZ)(w.G,{children:(0,s.tZ)(O.u,{fitContent:!0,isOpen:Z,onRequestClose:k,children:(0,s.BX)(U.Tg,{children:[(0,s.tZ)(b.h4,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,s.BX)(w.G,{css:ei.wrapper,children:[(0,s.tZ)(w.G,{css:ei.row,children:(0,s.tZ)(ea,{name:_,setName:E,nameInputRef:R,disabled:P})}),(0,s.tZ)(w.G,{css:ei.row,children:(0,s.tZ)(h.zx,{css:ei.createBucketButton,text:P?"Creating bucket...":"Create bucket",onClick:function(){B({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){C(Error("Failed to create bucket"));return}x(t)},onError:C})},colorway:"primary",iconLeft:P?(0,s.tZ)(M.Z,{}):(0,s.tZ)(T.Z,{}),disabled:P})})]})]})})})}function ea(e){var t=e.name,n=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,X.U)();return(0,s.BX)(w.G,{css:ei.labeledInput,children:[(0,s.tZ)(N._,{htmlFor:o("bucketName"),children:"Name"}),(0,s.tZ)(L.II,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){n(e.currentTarget.value)},value:t,ref:r,placeholder:"Name your Bucket"})]})}var el=n(30509),ec=n(99149),es=n(49115),eu=n(43257),ed=n(74044),ef=ed.Dy.Object({id:ed.Dy.String(),name:ed.Dy.String(),contentType:ed.Dy.Optional(ed.Dy.String()),timeCreated:ed.Dy.String(),size:ed.Dy.String()}),ep=ed.Dy.Array(ef),eh={FILE:"file"},em=n(42121);function eg(e){return"".concat(e.status," - ").concat(e.statusText)}function ev(){return(ev=(0,o._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return t=e.bucketExternalId,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o"),{method:"GET",credentials:"same-origin"})];case 1:if(!(n=o.sent()).ok)throw Error("Failed to get objects: ".concat(eg(n)));return[4,n.json()];case 2:if(i=null!==(r=o.sent().items)&&void 0!==r?r:[],!ec.B4.Check(ep,i))throw(0,em.ZA)(ep,i);return[2,i]}})})).apply(this,arguments)}function ey(e){return eb.apply(this,arguments)}function eb(){return(eb=(0,o._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(t=e.bucketExternalId,n=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return ew.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return[2,function(e){return ek.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})]}return[2]})})).apply(this,arguments)}function ew(){return(ew=(0,o._)(function(e){var t,n,r,i,o;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,i=encodeURIComponent(n),[4,fetch("/object-storage/upload/storage/v1/b/".concat(t,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(eg(o)));return[2]}})})).apply(this,arguments)}function eZ(){return(eZ=(0,o._)(function(e){var t,n,r,i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=l.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(eg(i)));return[4,i.text()];case 2:if(o=l.sent(),!(a=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,a]}})})).apply(this,arguments)}function ex(){return(ex=(0,o._)(function(e){var t,n,r,i,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(a=c.sent()).ok)throw Error("Failed to upload chunk: ".concat(eg(a)));if(!(l=a.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:l}]}})})).apply(this,arguments)}function eC(){return(eC=(0,o._)(function(e){var t,n,r,i,o,a,l,s;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.uploadId,i=e.parts,a=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var t=o.createElement("Part"),n=o.createElement("PartNumber");n.textContent=e.partNumber.toString(),t.appendChild(n);var r=o.createElement("ETag");r.textContent=e.etag,t.appendChild(r),a.appendChild(t)}),o.appendChild(a),l=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":l.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:l})];case 1:if(!(s=c.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(eg(s)));return[2]}})})).apply(this,arguments)}function ek(){return(ek=(0,o._)(function(e){var t,n,r,i,o,a,l,s;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,(0,es.pV)(r)];case 1:return i=c.sent(),a=(o=eu.Z.from(i)).toBuffer(),[4,function(e){return eZ.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return l=c.sent(),[4,Promise.all(Array(Math.ceil(o.length/8388608)).fill(0).map(function(e,r){var i=a.subarray(8388608*r,(r+1)*8388608);return function(e){return ex.apply(this,arguments)}({bucketExternalId:t,objectName:n,partNumber:r+1,uploadId:l,chunk:i})}))];case 3:return s=c.sent(),[4,function(e){return eC.apply(this,arguments)}({bucketExternalId:t,objectName:n,uploadId:l,parts:s})];case 4:return c.sent(),[2]}})})).apply(this,arguments)}function eS(e){return e_.apply(this,arguments)}function e_(){return(e_=(0,o._)(function(e){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return t=e.bucketExternalId,n=e.objectName,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(n.replaceAll("/","%2F")),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(eg(r)));return[2]}})})).apply(this,arguments)}function eT(){return(eT=(0,o._)(function(e){var t,n,r,i,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=e.sourceBucketExternalId,n=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),a=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(o,"/copyTo/b/").concat(n,"/o/").concat(a),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(l=c.sent()).ok)throw Error("Failed to copy object: ".concat(eg(l)));return[2]}})})).apply(this,arguments)}(r=i||(i={}))[r.Direct=1]="Direct",r[r.Multipart=2]="Multipart";var eE=n(41974),eR=n(49853),eD=n(92674),eI=n.n(eD),eB=(0,eR.cn)(new Map),eA=(0,eR.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.objects;t(eB,function(e){return(0,eE.Uy)(e,function(e){e.set(r,i)})})}),eP=(0,eR.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.name,o=n.contentType,a=n.size,l={id:"optimistic-"+eI()(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};t(eB,function(e){return(0,eE.Uy)(e,function(e){var t=e.get(r);if(!t){e.set(r,[l]);return}var n=t.find(function(e){return e.name===i});n?Object.assign(n,l):t.push(l)})})}),eG=(0,eR.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId,o=n.isPendingDeletion,a=n.isOptimisticallyInserted;t(eB,function(e){return(0,eE.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when updating object");var n=t.findIndex(function(e){return e.name===r});if(-1===n)throw Error("Bucket not found when updating object");void 0!==o&&(t[n].isPendingDeletion=o),void 0!==a&&(t[n].optimisticallyInserted=a)})})}),eL=(0,eR.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId;t(eB,function(e){return(0,eE.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when removing object");e.set(i,t.filter(function(e){return e.name!==r}))})})}),eN=n(80786),eO=new Intl.Collator;function eU(e){return e.sort(function(e,t){return eO.compare(e.displayName,t.displayName)})}function eM(e){var t=e.bucketExternalId;return(0,eN.Dv)(eB).get(t)}function eX(){var e,t=(0,a._)((0,A.useState)(!1),2),n=t[0],r=t[1],i=(0,eN.Dv)(eB),l=(0,eN.b9)(eA);return{loading:n,fetchObjects:(0,A.useCallback)((e=(0,o._)(function(e){var t,n,o,a,s,u;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(t=e.bucketExternalId,n=e.isNewBucket,o=e.onError,a=e.skipIfLoaded,n)return l({bucketExternalId:t,objects:[]}),[2];if(a&&i.has(t))return[2];r(!0),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(e){return ev.apply(this,arguments)}({bucketExternalId:t})];case 2:return s=c.sent(),l({bucketExternalId:t,objects:s}),[3,4];case 3:return u=c.sent(),null==o||o(u),[3,4];case 4:return r(!1),[2]}})}),function(t){return e.apply(this,arguments)}),[i,l])}}function eF(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,eN.b9)(eP),l=(0,eN.b9)(eL),s=(0,eN.b9)(eG);function u(){return(u=(0,o._)(function(e){var t,a,u,d,f;return(0,c.Jh)(this,function(p){switch(p.label){case 0:t=e.bucketExternalId,a=e.files,u=e.targetFolder,d=e.onError,n(!0),p.label=1;case 1:var h;return p.trys.push([1,3,,4]),[4,Promise.all(a.map((h=(0,o._)(function(e){var n,o;return(0,c.Jh)(this,function(a){switch(a.label){case 0:n=u+(e.webkitRelativePath||e.dirPath||e.name),r({bucketExternalId:t,name:n,contentType:e.type,size:null==e?void 0:e.size.toString()}),o=e.size>31457280?i.Multipart:i.Direct,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ey({bucketExternalId:t,objectName:n,file:e,uploadMethod:o})];case 2:return a.sent(),s({bucketExternalId:t,name:n,isOptimisticallyInserted:!1}),[3,4];case 3:return a.sent(),l({bucketExternalId:t,name:n}),[3,4];case 4:return[2]}})}),function(e){return h.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return f=p.sent(),null==d||d(f),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return u.apply(this,arguments)},loading:t}}var eW=n(25722);function eV(){var e=(0,W._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eV=function(){return e},e}function eH(){var e=(0,W._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eH=function(){return e},e}function ez(){var e=(0,W._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ez=function(){return e},e}var ej={},eq=(0,V.Ps)(eV(),J),eJ=(0,V.Ps)(eH(),J),eY=(0,V.Ps)(ez(),J),e$=n(86466),eK=n(35820),eQ=n(41960),e0=n(47136),e1=n(21882),e2=n(44794),e3=n(47483),e4=(0,Z.X)({self:[R.l0.flex.growAndShrink(1)],error:[R.l0.color.accentNegativeStronger],button:[R.l0.reset.button,R.l0.viewStyle,e$.gU.nofill,R.l0.display.inlineFlex,{borderColor:e$.gU.outlined.borderColor},R.l0.flex.growAndShrink(1)],select:[R.l0.display.flex,R.l0.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:R.TV.backgroundHigher}],popover:[R.l0.width("max-content"),R.l0.overflow("auto"),R.l0.p(1),R.l0.minWidth(240)],labeledInput:[R.l0.colWithGap(8),R.l0.flex.growAndShrink(1),R.l0.minWidth(250)],listbox:[R.l0.maxHeight(300),R.l0.minWidth(300),R.l0.overflow("auto")],dropdownItemAndContainer:[R.l0.flex.row,R.l0.align.center,e$.gU.listItem,R.l0.px(8),R.l0.py(4)],selectedItemAndContainer:[R.l0.px(8),R.l0.py(4),R.l0.justify.spaceBetween,R.l0.align.center,R.l0.rowWithGap(8)],selectedBucketName:[R.l0.align.center,R.l0.textAlign.left,R.l0.rowWithGap(8)],bucketName:[R.l0.align.center,R.l0.textAlign.left,R.l0.rowWithGap(8)],selectedCheckIcon:[R.l0.align.center,R.l0.flex.row,R.l0.pl(8)],header:[R.l0.pt(8),R.l0.px(8),R.l0.pb(4),R.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(R.TV.outlineDimmest)}],loading:[R.l0.minWidth(200),R.l0.display.flex,R.l0.flex.grow(1),eK.p.backgroundPulse(R.TV.backgroundHighest,R.TV.backgroundHigher)]});function e8(e){var t=e.buckets,n=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,l=(0,A.useId)();return(0,s.BX)(w.G,{css:e4.self,children:[(0,s.tZ)(te,{buckets:t,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),n?(0,s.tZ)(w.G,{css:e4.error,"aria-live":"polite","aria-atomic":"true",id:l,children:(0,s.tZ)("span",{children:n})}):null]})}var e6=(0,Z.X)({self:[e4.dropdownItemAndContainer,R.l0.justify.spaceBetween,{backgroundColor:e$.vb.interactiveBackground}]});function e5(){return(0,s.tZ)(w.G,{css:e4.selectDisabled,children:(0,s.tZ)(w.G,{css:e4.selectedItemAndContainer,children:(0,s.tZ)(w.G,{css:e4.selectedBucketName,children:(0,s.tZ)(b.xv,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function e7(e){var t=e.title;return(0,s.BX)(w.G,{css:e4.selectedItemAndContainer,children:[(0,s.tZ)(w.G,{css:e4.selectedBucketName,children:(0,s.tZ)(b.xv,{variant:"text",children:t})}),(0,s.tZ)(C.Z,{})]})}function e9(e){var t=e.bucketName,n=e.selected;return(0,s.BX)(w.G,{css:n?e6.self:e4.dropdownItemAndContainer,children:[(0,s.tZ)(w.G,{css:e4.bucketName,children:(0,s.tZ)(b.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,s.tZ)(w.G,{css:e4.selectedCheckIcon,children:n?(0,s.tZ)(x.Z,{}):null})]})}function te(e){var t=e.buckets,n=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,X.U)(),l=(0,A.useMemo)(function(){return t.find(function(e){return e.id===r})},[t,r]);return(0,s.BX)(w.G,{css:e4.labeledInput,children:[(0,s.tZ)(N._,{htmlFor:a("bucket"),children:"Bucket"}),n?(0,s.tZ)(L.II,{css:e4.loading,disabled:!0}):(0,s.BX)(e1.Ph,{css:e4.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,s.tZ)(e2.z,{css:e4.button,isDisabled:!l,children:l?(0,s.tZ)(e7,{title:l.name}):(0,s.tZ)(e5,{})}),(0,s.tZ)(eQ.Bf,{noArrow:!0,css:e4.popover,background:"default",placement:"bottom left",children:(0,s.tZ)(e0.wb,{css:e4.listbox,onLoadMore:i,children:t.map(function(e){var t=e.id,n=e.name;return(0,s.tZ)(e3.m9,{id:t,textValue:n,children:(0,s.tZ)(e9,{bucketName:n,selected:t===r})},t)})})})]})]})}var tt=(0,Z.X)({addBucketButton:[R.l0.flex.growAndShrink(1),R.l0.justify.center,R.l0.textAlign.center],form:[R.l0.px(4)],labeledInput:[R.l0.colWithGap(8),R.l0.flex.growAndShrink(1),R.l0.textAlign.left],row:[R.l0.flex.growAndShrink(1),R.l0.pt(16),R.l0.rowWithGap(16),{flexBasis:"300px"}],wrapper:[R.l0.flex.row,R.l0.flex.wrap]});function tn(e){var t,n,r,i,o,c,u,d,f,m,g,v,y,Z,x,C,k,S,_,E,R,D,I=e.excludeBucketIds,B=e.isOpen,P=e.onBucketAdded,G=e.onError,L=e.onRequestClose,N=e.orgId,X=(0,a._)((0,A.useState)(),2),W=X[0],V=X[1],z=(0,p.Z)(),j=(u=(t={onError:G,orgId:N}).orgId,d=t.onError,m=(n=(0,F._)({},ej,{fetchPolicy:"network-only",onError:d,skip:void 0!==u,ssr:!1,variables:{input:tr}}),f=H.a(eq,n)).data,g=f.fetchMore,v=f.loading,y=(0,A.useCallback)(function(){var e,t,n;g({variables:{input:(0,el._)((0,F._)({},tr),{after:null==m?void 0:null===(n=m.currentUser)||void 0===n?void 0:null===(t=n.buckets)||void 0===t?void 0:null===(e=t.pageInfo)||void 0===e?void 0:e.nextCursor})},updateQuery:function(e,t){if(!(null===(o=t.fetchMoreResult)||void 0===o?void 0:null===(i=o.currentUser)||void 0===i?void 0:null===(r=i.buckets)||void 0===r?void 0:r.items))return e;var n=(0,F._)({},t.fetchMoreResult);if(null===(a=n.currentUser)||void 0===a?void 0:a.buckets){var r,i,o,a,c,s,u,d=null!==(u=null==e?void 0:null===(s=e.currentUser)||void 0===s?void 0:null===(c=s.buckets)||void 0===c?void 0:c.items)&&void 0!==u?u:[],f=n.currentUser.buckets.items;n.currentUser.buckets.items=(0,l._)(f).concat((0,l._)(d))}return n}})},[g,m]),x=(r=(0,F._)({},ej,{fetchPolicy:"network-only",onError:d,skip:void 0===u,ssr:!1,variables:{input:tr,orgId:u||""}}),Z=H.a(eJ,r)).data,C=Z.fetchMore,k=Z.loading,_=(null==(S=(null==x?void 0:null===(i=x.currentUser)||void 0===i?void 0:i.org.__typename)==="Org"?null==x?void 0:null===(o=x.currentUser)||void 0===o?void 0:o.org:void 0)?void 0:S.buckets.__typename)==="BucketConnection"?null==S?void 0:S.buckets:void 0,E=(0,A.useCallback)(function(){C({variables:{input:(0,el._)((0,F._)({},tr),{after:null==_?void 0:_.pageInfo.nextCursor})},updateQuery:function(e,t){var n,r,i=t.fetchMoreResult,o=null==i?void 0:i.currentUser;if((null==o?void 0:o.__typename)!=="CurrentUser")return e;var a=null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.org;if((null==a?void 0:a.__typename)!=="Org")return e;var c=a.buckets;if("BucketConnection"!==c.__typename)return e;var s=null==e?void 0:null===(r=e.currentUser)||void 0===r?void 0:r.org;if((null==s?void 0:s.__typename)!=="Org")return i;var u=s.buckets;return"BucketConnection"!==u.__typename?i:(0,el._)((0,F._)({},i),{currentUser:(0,el._)((0,F._)({},o),{__typename:"CurrentUser",org:(0,el._)((0,F._)({},a),{__typename:"Org",buckets:(0,el._)((0,F._)({},c),{__typename:"BucketConnection",items:(0,l._)(c.items).concat((0,l._)(u.items))})})})})}})},[C,_]),R=(0,A.useCallback)(function(){u?E():y()},[u,E,y]),{buckets:u?null==_?void 0:_.items:null==m?void 0:null===(c=m.currentUser)||void 0===c?void 0:c.buckets.items,fetchMore:R,loading:k||v}),q=j.buckets,J=j.fetchMore,Y=j.loading;(0,A.useEffect)(function(){!W&&q&&q.length>1&&V(q[0].id)},[W,q]);var K=(0,A.useMemo)(function(){return q?q.filter(function(e){return!(null!=I?I:[]).includes(e.id)}):[]},[q,I]);(0,A.useEffect)(function(){!W&&K&&K.length>0&&V(K[0].id)},[K,W]);var Q=(0,a._)((D=(0,F._)({},ej,{variables:{input:{bucketId:null!=W?W:"",replId:z}}}),$.D(eY,D)),2),ee=Q[0],et=Q[1].loading;return(0,s.tZ)(w.G,{children:(0,s.tZ)(O.u,{fitContent:!0,isOpen:B,onRequestClose:L,children:(0,s.BX)(U.Tg,{children:[(0,s.tZ)(b.h4,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,s.BX)(w.G,{css:tt.wrapper,children:[(0,s.tZ)(w.G,{css:tt.row,children:(0,s.tZ)(e8,{buckets:K,loading:Y,onChange:V,onLoadMore:J,selectedBucketId:W})}),(0,s.tZ)(w.G,{css:tt.row,children:(0,s.tZ)(h.zx,{css:tt.addBucketButton,text:et?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){ee({onCompleted:function(e){var t="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!t){G(Error("Failed to create bucket"));return}P(t)},onError:G})},colorway:"primary",iconLeft:et||Y?(0,s.tZ)(M.Z,{}):(0,s.tZ)(T.Z,{}),disabled:et||!W})})]})]})})})}var tr={count:10},ti=n(45077),to=n(38935),ta=n(12623),tl=n(19699),tc=n(43849),ts=n(96214),tu=n(59978),td=n(77049),tf=[{icon:(0,s.tZ)(tl.Z,{}),title:"JavaScript",value:"js"},{icon:(0,s.tZ)(tc.Z,{}),title:"Python",value:"py"},{icon:(0,s.tZ)(k.Z,{}),title:"All other languages",value:"other"}],tp={js:{packagerConfigLanguage:"nodejs",description:(0,s.tZ)(to.ZP,{components:{code:function(e){return(0,s.tZ)(ta.Z,(0,F._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,s.tZ)(to.ZP,{components:{code:function(e){return(0,s.tZ)(ta.Z,(0,F._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,s.tZ)(to.ZP,{components:{code:function(e){return(0,s.tZ)(ta.Z,(0,F._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your Repl or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},th=(0,Z.X)({wrapper:[R.l0.colWithGap(16)],section:[R.l0.colWithGap(6)],selectWrapper:[R.l0.rowWithGap(0)],statusBanner:[R.l0.maxWidth("fit-content")]});function tm(e){var t=e.onError,n=(0,a._)((0,A.useState)("js"),2),r=n[0],i=n[1],l=(0,f.Z)().showConfirm,u=(0,D.Z)().packager,d=(0,tu.I)().configs,p=(0,td.z9)(),m=(0,a._)((0,A.useState)(!1),2),g=m[0],y=m[1],Z=d.find(function(e){return e.language===tp[r].packagerConfigLanguage}),x=!!(tp[r].packagerConfigLanguage&&tp[r].packageName&&Z),C=!!(Z&&p(Z.id).some(function(e){return e.name===tp[r].packageName})),k=(0,a._)((0,A.useState)(!1),2),S=k[0],_=k[1];function T(){return(T=(0,o._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:if(!x)return t(Error("Package not available for selected language")),[2];return y(!0),[4,u.addPackages([{name:tp[r].packageName}])];case 1:return e.sent()?(l("Installed ".concat(tp[r].packageName," package")),_(!0)):t(Error("Failed to install ".concat(tp[r].packageName," package"))),[2]}})})).apply(this,arguments)}var E=tf.find(function(e){return e.value===r}),R=S||C;return(0,A.useLayoutEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var r,o=tf[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=function(){var e=r.value;if(tp[e.value].packagerConfigLanguage&&d.find(function(t){return t.language===tp[e.value].packagerConfigLanguage}))return i(e.value),{v:void 0}}();if("object"===(0,ti._)(a))return a.v}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i("other")},[]),(0,s.BX)(w.G,{css:th.wrapper,children:[(0,s.tZ)(w.G,{css:th.selectWrapper,children:(0,s.tZ)(ts.P,{items:tf,selectedItem:E,initialSelectedItem:tf[0],onChange:function(e){_(!1),i(e.value)}})}),tp[r].description?tp[r].description:null,!R&&x?(0,s.tZ)(h.zx,{onClick:function(){return T.apply(this,arguments)},text:"Install ".concat(tp[r].packageName," package"),colorway:"primary",loading:g}):null,E&&R?(0,s.tZ)(v.E,{text:"Package installed",colorway:"positive",css:th.statusBanner}):null,tp[r].commands.map(function(e){return(0,s.BX)(w.G,{css:th.section,children:[(0,s.tZ)(b.xv,{children:e.label}),(0,s.tZ)(to.ZP,{components:{code:function(e){return(0,s.tZ)(ta.Z,(0,F._)({language:r},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}var tg=n(11782),tv=n(22419),ty=n(99059),tb=n(57185),tw=n(42965),tZ=n(48827),tx=n(21602),tC=n(24374),tk=n(76711),tS=n(54300),t_=n(5297),tT=n(85983),tE=n(66791),tR=(0,Z.X)({wrapper:[R.l0.colWithGap(8)],ctaStatusBanner:[R.l0.textAlign.left],ctaContainer:[R.l0.colWithGap(8),R.l0.align.center],cta:[R.l0.width("100%"),R.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],budgetContainer:[R.l0.colWithGap(8),R.l0.border(),R.l0.borderRadius(8),R.l0.p(8)],payment:[R.l0.p(16),R.l0.borderRadius(12),R.l0.textAlign.left,R.l0.shadow(2)]});function tD(e){var t=e.children,n=e.createBucketAuthz,r=e.actionDescription,i=e.refetchAuthzQueryData,l=e.loading,u=(0,a._)((0,A.useState)(!1),2),d=u[0],f=u[1],p=(0,a._)((0,A.useState)(!1),2),h=p[0],m=p[1];return(0,s.BX)(s.HY,{children:[(0,s.BX)(w.G,{css:tR.wrapper,children:[(0,s.tZ)(tI,{mainActionCTA:t,showPaymentMethodForm:d,setShowPaymentMethodForm:function(){return f(!0)},setShowSupportForm:function(){return m(!0)},createBucketAuthz:n,actionDescription:r,refetchAuthzQueryData:i,loading:l}),d?(0,s.tZ)(U.Tg,{elevated:!0,css:tR.payment,children:(0,s.tZ)(tx.q,{onSuccess:(0,o._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return f(!1),[4,i()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]}),(0,s.tZ)(O.u,{isOpen:h,onRequestClose:function(){return m(!1)},children:(0,s.tZ)(tb.Z,{onRequestClose:function(){return m(!1)}})})]})}function tI(e){var t=e.mainActionCTA,n=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,l=e.refetchAuthzQueryData,c=e.loading,u=(0,tw.sG)();if(!o)return null;if(!o.isAuthorized&&u)return(0,s.tZ)(v.E,{text:o.message,colorway:"warning",icon:(0,s.tZ)(tS.Z,{}),css:tR.ctaStatusBanner});switch(o.code){case tT.RO.RequiresActiveSubscription:case tT.RO.RequiresPaymentMethodOrSubscription:return(0,s.BX)(w.G,{css:tR.ctaContainer,children:[(0,s.tZ)(t_.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to ".concat(a,"."),css:tR.cta,colorway:"primary",variant:"default",disabled:n,onPlanCheckoutComplete:l}),(0,s.tZ)(h.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:tR.cta,disabled:n,loading:c,iconLeft:(0,s.tZ)(tk.Z,{}),onClick:function(){return r()}})]});case tT.RO.RequiresSmsVerification:return(0,s.tZ)(ty.Z,{context:tT.jv.ObjectStorage,onSuccess:l});case tT.RO.RequiresPaymentMethod:return(0,s.tZ)(h.zx,{colorway:"primary",text:"Add a payment method",css:tR.cta,disabled:n,loading:c,iconLeft:(0,s.tZ)(tk.Z,{}),onClick:function(){return r()}});case tT.RO.RequiresUnbanning:return(0,s.tZ)(tC.u,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,s.tZ)(tS.Z,{}),css:tR.ctaStatusBanner,onClick:function(){return i()}});case tT.RO.InsufficientBudget:return(0,s.BX)(s.HY,{children:[(0,s.tZ)(v.E,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,s.tZ)(tS.Z,{}),css:tR.ctaStatusBanner}),(0,s.tZ)(w.G,{css:tR.budgetContainer,children:(0,s.tZ)(tZ.L,{onUpdateSuccess:l})})]});case tT.RO.FeatureDisabled:case tT.RO.FeatureUnsupportedForReplitTeams:case tT.RO.FeatureUnsupportedForTeamsEdu:case tT.RO.FeatureUnsupportedForTeamsFree:case tT.RO.FeatureUnsupportedForTeamsPro:case tT.RO.InsufficientPermissions:case tT.RO.InsufficientQuota:case tT.RO.RequiresEmailVerification:return(0,s.tZ)(v.E,{text:o.message,colorway:"warning",icon:(0,s.tZ)(tS.Z,{}),css:tR.ctaStatusBanner});case tT.RO.Authorized:case tT.RO.AuthorizedQuota:return(0,s.tZ)(s.HY,{children:t});default:(0,tE.Z)(o.code)}}function tB(){var e=(0,W._)(["\n  mutation ObjectStoragePaneIntroCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tB=function(){return e},e}var tA={},tP=(0,V.Ps)(tB(),J),tG=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],tL=(0,Z.X)({action:[R.l0.width("100%"),R.l0.maxWidth(320),R.l0.px(32),{marginLeft:"auto",marginRight:"auto"}],row:[R.l0.rowWithGap(16)],rowText:[R.l0.flex.growAndShrink(1),R.l0.textAlign.left]});function tN(e){var t,n,r=e.createBucketAuthz,i=e.editBucketAuthz,o=e.refetchAuthzQueryData,l=e.onBucketAdded,c=e.onError,u=(0,d.P5)({controlName:P.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),f=(0,a._)((0,A.useState)(!1),2),m=f[0],g=f[1],v=(0,A.useCallback)(function(){return g(!1)},[]),y=(0,A.useCallback)(function(){return g(!0)},[]),Z=(0,a._)((0,A.useState)(!1),2),x=Z[0],C=Z[1],k=(0,A.useCallback)(function(){return C(!1)},[]),_=(0,A.useCallback)(function(){return C(!0)},[]),E=(0,p.Z)(),R=(0,a._)((t=(0,F._)({},tA,{variables:{input:{replId:E}}}),$.D(tP,t)),2),D=R[0],B=R[1].loading;return(0,s.BX)(s.HY,{children:[(0,s.tZ)(tn,{isOpen:m,onBucketAdded:l,onError:c,onRequestClose:v}),u?(0,s.tZ)(eo,{isOpen:x,onBucketCreated:l,onError:c,onRequestClose:k}):null,(0,s.tZ)(I.Z,{pane:{type:"objectStorage"},maxWidth:450,body:tG.map(function(e,t){return(0,s.BX)(w.G,{css:tL.row,children:[(0,s.tZ)(w.G,{children:(0,s.tZ)(tg.Z,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,s.tZ)(b.xv,{css:tL.rowText,children:e.text})]},t)}),action:(0,s.BX)(tD,{createBucketAuthz:r,actionDescription:"create a bucket",refetchAuthzQueryData:o,loading:B,children:[(0,s.tZ)(h.zx,{css:tL.action,text:B?"Creating bucket...":"Create new bucket",onClick:u?_:function(){D({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){c(Error("Failed to create bucket"));return}l(t)},onError:c})},colorway:"primary",iconLeft:B?(0,s.tZ)(M.Z,{}):(0,s.tZ)(T.Z,{}),disabled:B}),u?(0,s.tZ)(w.G,{children:(0,s.tZ)(tv.u,{isDisabled:null==i?void 0:i.isAuthorized,tooltip:null!==(n=null==i?void 0:i.message)&&void 0!==n?n:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,s.tZ)(h.zx,{css:tL.action,text:"Use an existing bucket",onClick:y,iconLeft:(0,s.tZ)(S.Z,{}),disabled:B||!(null==i?void 0:i.isAuthorized)})})}):null]})})]})}var tO=n(42516),tU=n(65697),tM=n(84238),tX=n(22192),tF=n(9602),tW=n(38775),tV=n(41513),tH=n(47874),tz=n(93158),tj=n(35680),tq=n(82383),tJ=n(26978),tY=n(79718),t$=n(89882),tK=n(78649),tQ=n(15323),t0=n(19602),t1=n(97676),t2=n(47495),t3=n(6191),t4=function(e){var t=e.folderPath,n=e.onDropNativeFiles,r=(0,a._)((0,t2.L)(function(){return{accept:[eh.FILE,t3.FILE],drop:function(e){return"files"in e&&n(e.files),{name:t}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},t8=function(e){var t=e.currentFolder,n=e.onDropNativeFiles,r=(0,a._)((0,t2.L)(function(){return{accept:[t3.FILE],drop:function(e,t){t.didDrop()||e.dirContent.then(function(e){n(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[t]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},t6=n(36670),t5=n(86333),t7="1px dashed ".concat(R.TV.accentPrimaryDefault),t9=R.nC.min(500),ne=(0,tX.$)(["bodyOutline"]),nt=ne.cssVars,nn=ne.styleTokens,nr=(0,Z.X)({wrapper:[R.l0.flex.grow(1)],buttons:[R.l0.colWithGap(8),(0,tO._)({},t9,[R.l0.rowWithGap(8)])],primaryButtons:[R.l0.rowWithGap(8)],secondaryButtons:[R.l0.rowWithGap(8),R.l0.justify.spaceBetween,R.l0.flex.grow(1)],tableWrapper:[R.l0.flex.growAndShrink(1),R.l0.borderRadius(4),{outline:nn.bodyOutline}],tableHeaderMainColumn:[R.l0.textAlign.left,R.l0.p(4),R.l0.width("50%")],tableHeader:[R.l0.textAlign.left,R.l0.p(4),R.l0.width("25%")]});function ni(e){var t=e.bucketExternalId,n=e.onOpenCommandsTab,r=e.onError,i=eM({bucketExternalId:t}),u=(0,a._)((0,A.useState)(""),2),d=u[0],f=u[1],p=function(e){var t=e.objects,n=e.currentFolder,r=[],i=new Map,o=!0,a=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;if(d.name.startsWith(n)&&d.name!==n){var f=d.name.slice(n.length);if(!f.includes("/")){r.push((0,el._)((0,F._)({},d),{isFolder:!1,displayName:f}));continue}var p=f.split("/")[0];if(i.get(p)||i.set(p,{isFolder:!0,name:n+p+"/",displayName:p}),d.name===n+p+"/"){var h=i.get(p);if(!h)throw Error("Folder should have been added to map");h.optimisticallyInserted=d.optimisticallyInserted,h.isPendingDeletion=d.isPendingDeletion}}}}catch(e){a=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw c}}var m=eU(Array.from(i.values())),g=eU(r);return(0,l._)(m).concat((0,l._)(g))}({currentFolder:d,objects:null!=i?i:[]}),m=eX(),g=m.fetchObjects,v=m.loading,y=function(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,eN.b9)(eP),i=(0,eN.b9)(eG),l=(0,eN.b9)(eL);function s(){return(s=(0,o._)(function(e){var t,o,a,s,u,d,f;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(t=e.bucketExternalId,o=e.folderName,a=e.currentFolder,s=e.onError,o.includes("/"))return null==s||s(Error("Folder name cannot contain a forward slash")),[2];n(!0),r({bucketExternalId:t,name:u=a+o+"/",contentType:"text/plain",size:"0"}),d=new File([""],o,{type:"text/plain"}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,ey({bucketExternalId:t,objectName:u,file:d})];case 2:return c.sent(),i({bucketExternalId:t,name:u,isOptimisticallyInserted:!1}),[3,4];case 3:return f=c.sent(),null==s||s(f),l({bucketExternalId:t,name:u}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return s.apply(this,arguments)},loading:t}}().createFolder,b=eF().uploadFiles,Z=(0,A.useRef)(null),x=(0,A.useRef)(null),C=(0,a._)((0,A.useState)(!1),2),k=C[0],S=C[1],_=(0,a._)((0,A.useState)(null),2),T=_[0],E=_[1],R=t8({currentFolder:d,onDropNativeFiles:function(e){b({bucketExternalId:t,files:e,targetFolder:d,onError:r})}}),D=R.isOverCurrent,I=R.drop;return(0,s.BX)(s.HY,{children:[(0,s.BX)(w.G,{css:nr.wrapper,children:[(0,s.BX)(w.G,{css:nr.buttons,children:[(0,s.BX)(w.G,{css:nr.primaryButtons,children:[(0,s.tZ)(h.zx,{onClick:function(){Z.current&&Z.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,s.tZ)(tj.Z,{})}),(0,s.tZ)(h.zx,{onClick:function(){x.current&&x.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,s.tZ)(tY.Z,{})})]}),(0,s.BX)(w.G,{css:nr.secondaryButtons,children:[(0,s.tZ)(h.zx,{onClick:function(){return S(!0)},text:"Create folder",iconLeft:(0,s.tZ)(tJ.Z,{})}),(0,s.tZ)(h.zx,{onClick:function(){return g({bucketExternalId:t})},text:"Refresh",loading:v,iconLeft:(0,s.tZ)(tQ.Z,{})})]})]}),(0,s.tZ)(nb,{currentFolder:d,bucketExternalId:t,setCurrentFolder:f,onError:r}),(0,s.tZ)(w.G,{innerRef:I,css:nr.tableWrapper,style:(0,tO._)({},nt.bodyOutline,D?t7:void 0),children:i&&i.length||k?(0,s.BX)("table",{children:[(0,s.tZ)("thead",{children:(0,s.BX)("tr",{children:[(0,s.tZ)("th",{css:nr.tableHeaderMainColumn,children:"Name"}),(0,s.tZ)("th",{css:nr.tableHeader,children:"Added"}),(0,s.tZ)("th",{css:nr.tableHeader,children:"Size"})]})}),(0,s.BX)("tbody",{children:[k?(0,s.tZ)(nx,{onCreateFolder:function(e){S(!1),y({bucketExternalId:t,folderName:e,currentFolder:d,onError:r})},onCanceled:function(){return S(!1)}}):null,p.map(function(e){return e.isFolder?(0,s.tZ)(nc,{item:e,setCurrentFolder:f,onDeleteClick:E,bucketExternalId:t,onError:r},e.name):(0,s.tZ)(ns,{item:e,bucketExternalId:t,onDeleteClick:E,onError:r},e.name)})]})]}):(0,s.tZ)(n_,{onOpenCommandsTab:n})}),(0,s.tZ)(t6.Q,{fileUploadInputRef:Z,dirUploadInputRef:x,uploadFiles:function(e){return b({bucketExternalId:t,files:e.files,targetFolder:d,onError:r})}})]}),(0,s.tZ)(nk,{bucketExternalId:t,requestedDeleteItem:T,onRequestClose:function(){return E(null)},onError:r})]})}var no=(0,tX.$)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),na=no.cssVars,nl=no.styleTokens;function nc(e){var t,n=e.item,r=e.bucketExternalId,i=e.setCurrentFolder,o=e.onDeleteClick,a=e.onError,l=eF().uploadFiles,c=(0,f.Z)().showConfirm,u=t4({folderPath:n.name,onDropNativeFiles:function(e){c('Uploading files to "'.concat(n.name,'"')),l({bucketExternalId:r,files:e,targetFolder:n.name,onError:a})}}),d=u.isDraggedOver,p=u.drop;return(0,s.tZ)(np,{item:n,ref:p,onDeleteClick:function(){return o(n)},icon:(0,s.tZ)(tq.Z,{}),timeCreatedCell:"-",sizeCell:"-",style:(t={},(0,tO._)(t,na.rowOutline,d?t7:void 0),(0,tO._)(t,na.rowCursor,"pointer"),t),onClick:function(){return i(n.name)},onKeyDown:function(e){"Enter"===e.key&&i(n.name)}})}function ns(e){var t,n,r,i,l,u=e.item,d=e.bucketExternalId,p=e.onDeleteClick,h=e.onError,m="/object-storage/storage/v1/b/".concat(d,"/o/").concat(u.name.replace("/","%2F"),"?alt=media"),g=!!(u.optimisticallyInserted||u.isPendingDeletion),v=function(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,eN.b9)(eG),i=(0,eN.b9)(eP),l=(0,eN.b9)(eL);function s(){return(s=(0,o._)(function(e){var t,o,a,s,u,d,f;return(0,c.Jh)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.object,a=e.destinationFolder,s=e.onError,u=e.onSuccess,n(!0),d=a+o.name.split("/").pop(),r({bucketExternalId:t,name:o.name,isPendingDeletion:!0}),i({bucketExternalId:t,name:d,contentType:o.contentType,size:o.size}),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,function(e){return eT.apply(this,arguments)}({destinationBucketExternalId:t,sourceBucketExternalId:t,sourceObjectName:o.name,destinationObjectName:d})];case 2:return c.sent(),[4,eS({bucketExternalId:t,objectName:o.name})];case 3:return c.sent(),l({bucketExternalId:t,name:o.name}),r({bucketExternalId:t,name:d,isOptimisticallyInserted:!1}),null==u||u(),[3,5];case 4:return f=c.sent(),null==s||s(f),r({bucketExternalId:t,name:o.name,isPendingDeletion:!1}),l({bucketExternalId:t,name:d}),[3,5];case 5:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,moveObject:function(e){return s.apply(this,arguments)}}}().moveObject,y=(0,f.Z)().showConfirm,b=(n=(t={item:u,disableDrag:g,onDropOverFolder:function(e){return v({bucketExternalId:d,object:u,destinationFolder:e,onSuccess:function(){y('Moved "'.concat(u.name,'" to "').concat(e,'"'))},onError:h})}}).item,r=t.disableDrag,i=t.onDropOverFolder,{isDragging:(l=(0,a._)((0,t1.c)(function(){return{type:eh.FILE,canDrag:!r,item:function(){return{name:n.name,type:eh.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n&&i(n.name)}}},[r]),2))[0].isDragging,drag:l[1]}),w=b.isDragging,Z=b.drag;return(0,s.tZ)(np,{item:u,ref:Z,onDeleteClick:function(){return p(u)},icon:(0,s.tZ)(nC,{contentType:u.contentType}),timeCreatedCell:(0,s.tZ)(tW.EK,{date:u.timeCreated}),sizeCell:(0,t5.t)(Number(u.size),{isKib:!0,isKibNotation:!0}),style:(0,tO._)({},na.rowOpacity,w?.5:void 0),additionalActionButtons:(0,s.tZ)(s.HY,{children:(0,s.tZ)(tF.hU,{alt:"Download",css:nd.rowActionButton,children:(0,s.tZ)("a",{download:u.displayName,href:m,css:R.l0.color.foregroundDefault,children:(0,s.tZ)(tH.Z,{})})})})})}var nu=(0,Z.X)({row:[R.l0.position.relative,R.l0.borderRadius(4),{outline:nl.rowOutline,outlineOffset:-1,opacity:nl.rowOpacity,cursor:nl.rowCursor,":nth-of-type(even)":{background:"color-mix(in srgb, ".concat(R.TV.backgroundDefault," 60%, ").concat(R.TV.backgroundRoot,")")},":hover":{background:R.TV.backgroundHigher},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(R.TV.accentPrimaryDefault)}}],text:[R.l0.flex.shrink(1)]}),nd=(0,Z.X)({row:[nu.row],pendingRow:[nu.row,R.l0.color.foregroundDimmest],tableData:[R.l0.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],objectIconAndName:[R.l0.rowWithGap(8),R.l0.align.center],text:nu.text,strikeThroughText:[nu.text,{textDecoration:"line-through"}],actionButtonTableData:[R.l0.position.relative],rowActionButtonGroup:[R.l0.px(4),R.l0.position.absolute,R.l0.right(0),R.l0.top(0),R.l0.bottom(0),R.l0.rowWithGap(4),R.l0.align.center,R.l0.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[e$.gU.filled],loadingTableData:[R.l0.position.relative],loadingIconWrapper:[R.l0.position.absolute,R.l0.right(4),R.l0.top(0),R.l0.bottom(0),R.l0.justify.center],loadingIcon:[{borderRadius:"50%"},R.l0.backgroundColor.backgroundDefault]}),nf=function(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,a._)((0,A.useState)(null),2),i=r[0],o=r[1];return(0,A.useEffect)(function(){if(null!==i){var e=function(){n(i.offsetWidth<i.scrollWidth||i.offsetHeight<i.scrollHeight)};e();var t=new ResizeObserver(e);return t.observe(i),function(){return t.disconnect()}}},[i]),{attachObserver:o,isOverflowing:t}},np=A.forwardRef(function(e,t){var n=e.item,r=e.onDeleteClick,i=e.icon,o=e.timeCreatedCell,a=e.sizeCell,l=e.style,c=e.onClick,u=e.onKeyDown,d=e.additionalActionButtons,f=n.isPendingDeletion?nd.strikeThroughText:nd.text,p=n.optimisticallyInserted||n.isPendingDeletion,h=nf(),m=h.attachObserver,g=h.isOverflowing;return(0,s.BX)("tr",{ref:t,tabIndex:0,css:p?nd.pendingRow:nd.row,style:l,onClick:c,onKeyDown:u,children:[(0,s.tZ)("td",{css:nd.tableData,children:(0,s.tZ)(tv.u,{isDisabled:!g,tooltip:n.displayName,children:(0,s.BX)(w.G,{css:nd.objectIconAndName,children:[i,(0,s.tZ)(b.xv,{multiline:!0,maxLines:1,css:f,ref:m,children:n.displayName})]})})}),(0,s.tZ)("td",{css:nd.tableData,children:(0,s.tZ)(b.xv,{multiline:!0,maxLines:1,css:f,children:o})}),(0,s.tZ)("td",{css:nd.tableData,children:(0,s.tZ)(b.xv,{multiline:!0,maxLines:1,css:f,children:a})}),p?null:(0,s.tZ)("td",{css:nd.actionButtonTableData,children:(0,s.BX)(w.G,{css:nd.rowActionButtonGroup,id:"action-buttons",children:[d,(0,s.tZ)(tF.hU,{onClick:r,alt:"Delete",css:nd.rowActionButton,children:(0,s.tZ)(t0.Z,{color:R.TV.accentNegativeDefault})})]})}),p?(0,s.tZ)("td",{css:nd.loadingTableData,children:(0,s.tZ)(w.G,{css:nd.loadingIconWrapper,children:(0,s.tZ)(M.Z,{size:24,css:nd.loadingIcon})})}):null]})}),nh=(0,tX.$)(["breadcrumbOutline","breadcrumbTextColor"]),nm=nh.cssVars,ng=nh.styleTokens,nv=(0,Z.X)({wrapper:[R.l0.rowWithGap(2),R.l0.align.center,R.l0.pt(12),R.l0.pb(4)],breadcrumb:[{color:ng.breadcrumbTextColor,outline:ng.breadcrumbOutline}]}),ny=function(e){var t=e.split("/").filter(function(e){return""!==e}),n=t.map(function(e,n){return{folderName:e,path:t.slice(0,n+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,l._)(n))};function nb(e){var t=e.currentFolder,n=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=ny(t);return(0,s.tZ)(w.G,{css:nv.wrapper,children:o.map(function(e,t){var a=e.folderName,l=e.path,c=t===o.length-1;return(0,s.BX)(A.Fragment,{children:[(0,s.tZ)(nw,{folderPath:l,folderName:a,bucketExternalId:n,onClick:function(){return r(l)},isLastBreadcrumb:c,onError:i}),c?null:(0,s.tZ)(b.xv,{color:"dimmest",children:"/"})]},l)})})}function nw(e){var t,n=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,l=e.onError,c=eF().uploadFiles,u=t4({folderPath:n,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:n,onError:l})}}),d=u.isDraggedOver,f=u.drop;return(0,s.tZ)(h.zx,{ref:f,text:r,variant:"nofill",onClick:o,iconLeft:(0,s.tZ)(tq.Z,{}),size:"small",disabled:a,style:(t={},(0,tO._)(t,nm.breadcrumbTextColor,a?R.TV.foregroundDefault:void 0),(0,tO._)(t,nm.breadcrumbOutline,d?t7:void 0),t),css:nv.breadcrumb})}var nZ=(0,Z.X)({row:[R.l0.rowWithGap(8),R.l0.align.center],icon:[R.l0.height(24),R.l0.width(24),R.l0.center]});function nx(e){var t=e.onCreateFolder,n=e.onCanceled,r=(0,a._)((0,A.useState)(""),2),i=r[0],o=r[1],l=(0,tM.Z)(n,[]);return(0,s.tZ)("tr",{children:(0,s.tZ)("td",{colSpan:3,children:(0,s.BX)(w.G,{innerRef:l,css:nZ.row,children:[(0,s.tZ)(w.G,{css:nZ.icon,children:(0,s.tZ)(tq.Z,{})}),(0,s.tZ)(L.II,{value:i,autoFocus:!0,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(t(i),o("")),"Escape"===e.key&&n()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function nC(e){var t=e.contentType;return t?t.startsWith("image/")?(0,s.tZ)(t$.Z,{}):t.startsWith("video/")?(0,s.tZ)(tV.Z,{}):t.startsWith("audio/")?(0,s.tZ)(tK.Z,{}):(0,s.tZ)(tz.Z,{}):(0,s.tZ)(tz.Z,{})}function nk(e){var t,n=e.bucketExternalId,r=e.requestedDeleteItem,i=e.onRequestClose,l=e.onError,u=function(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,eN.b9)(eG),i=(0,eN.b9)(eL);function l(){return(l=(0,o._)(function(e){var t,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.objectName,a=e.onError,n(!0),r({bucketExternalId:t,name:o,isPendingDeletion:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,eS({bucketExternalId:t,objectName:o})];case 2:return c.sent(),i({bucketExternalId:t,name:o}),[3,4];case 3:return l=c.sent(),null==a||a(l),r({bucketExternalId:t,name:o,isPendingDeletion:!1}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteObject:function(e){return l.apply(this,arguments)}}}().deleteObject,d=function(){var e=(0,a._)((0,A.useState)(!1),2),t=e[0],n=e[1],r=(0,eN.b9)(eG),i=(0,eN.b9)(eL),l=(0,eN.Dv)(eB);function s(){return(s=(0,o._)(function(e){var t,a,s,u,d,f;return(0,c.Jh)(this,function(p){switch(p.label){case 0:t=e.bucketExternalId,a=e.folderPath,s=e.onError,n(!0),d=(null!==(u=l.get(t))&&void 0!==u?u:[]).filter(function(e){return e.name.startsWith(a)}),p.label=1;case 1:var h;return p.trys.push([1,3,,4]),[4,Promise.all(d.map((h=(0,o._)(function(e){return(0,c.Jh)(this,function(n){switch(n.label){case 0:r({bucketExternalId:t,name:e.name,isPendingDeletion:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eS({bucketExternalId:t,objectName:e.name})];case 2:return n.sent(),i({bucketExternalId:t,name:e.name}),[3,4];case 3:return n.sent(),r({bucketExternalId:t,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return h.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return f=p.sent(),null==s||s(f),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteFolder:function(e){return s.apply(this,arguments)}}}().deleteFolder,f=(t=(0,o._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:if(!(null==r?void 0:r.isFolder))return[3,2];return[4,d({bucketExternalId:n,folderPath:r.name,onError:l})];case 1:return e.sent(),i(),[2];case 2:if(!r)return[3,4];return[4,u({bucketExternalId:n,objectName:r.name,onError:l})];case 3:e.sent(),i(),e.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,s.tZ)(O.u,{isOpen:!!r,onRequestClose:i,children:r?(0,s.tZ)(tU.Z,{name:r.displayName,description:'"'.concat(r.displayName,'" ').concat(r.isFolder?" and all its contents":""),entityType:r.isFolder?"folder":"file",hideModal:i,delete:f}):null})}var nS=(0,Z.X)({wrapper:[R.l0.center,R.l0.colWithGap(16),R.l0.flex.grow(1),R.l0.justify.center,R.l0.borderRadius(4),{outline:nn.bodyOutline}],textWrapper:[R.l0.center,R.l0.colWithGap(4)],text:[R.l0.center],textRow:[R.l0.rowWithGap(4),R.l0.align.center],textButton:[R.l0.color.accentPrimaryStronger]});function n_(e){var t=e.onOpenCommandsTab;return(0,s.tZ)(w.G,{css:nS.wrapper,style:(0,tO._)({},nt.bodyOutline,"1px dashed ".concat(R.TV.outlineDefault)),children:(0,s.BX)(w.G,{css:nS.textWrapper,children:[(0,s.tZ)(b.xv,{variant:"subheadBig",children:"No objects"}),(0,s.BX)(w.G,{css:nS.text,children:[(0,s.tZ)(b.xv,{children:"Drag and drop or click to upload,"}),(0,s.BX)(w.G,{css:nS.textRow,children:[(0,s.tZ)(b.xv,{children:"or"}),(0,s.tZ)(h.zx,{variant:"underlinedOnHover",colorway:"primary",onClick:t,text:"upload using commands",css:nS.textButton})]})]})]})})}var nT=n(35040),nE=n(7935);function nR(){var e=(0,W._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return nR=function(){return e},e}function nD(){var e=(0,W._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return nD=function(){return e},e}var nI={},nB=(0,V.Ps)(nR()),nA=(0,V.Ps)(nD(),J),nP=(0,Z.X)({wrapper:[R.l0.colWithGap(32)],section:[R.l0.colWithGap(12)],subsection:[R.l0.colWithGap(6)]});function nG(e){var t,n,r=e.bucketId,i=e.bucketExternalId,o=e.onSettingsUpdate,l=e.onError,c=(0,p.Z)(),u=(0,d.P5)({controlName:P.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),f=(0,a._)((0,A.useState)(!1),2),m=f[0],g=f[1],v=function(){return g(!1)},y=(0,a._)((0,A.useState)(!1),2),Z=y[0],x=y[1],C=function(){return x(!1)},k=(0,a._)((t=(0,F._)({},nI,void 0),$.D(nB,t)),2),S=k[0],_=k[1].loading,T=(0,a._)((n=(0,F._)({},nI,void 0),$.D(nA,n)),2),E=T[0],D=T[1].loading;return(0,s.BX)(s.HY,{children:[(0,s.BX)(w.G,{css:nP.wrapper,children:[(0,s.tZ)(w.G,{css:nP.section,children:(0,s.BX)(w.G,{css:nP.subsection,children:[(0,s.tZ)(b.xv,{variant:"subheadDefault",children:"Bucket ID"}),(0,s.tZ)(to.ZP,{children:"```\n".concat(i)})]})}),(0,s.BX)(w.G,{css:nP.section,children:[u?(0,s.BX)(w.G,{css:nP.subsection,children:[(0,s.tZ)(h.zx,{text:D?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:D,css:R.l0.color.accentNegativeStronger,onClick:function(){return x(!0)}}),(0,s.tZ)(b.xv,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}):null,(0,s.BX)(w.G,{css:nP.subsection,children:[(0,s.tZ)(h.zx,{text:_?"Deleting":"Delete Bucket",loading:_,iconLeft:(0,s.tZ)(t0.Z,{color:R.TV.accentNegativeStronger}),css:R.l0.color.accentNegativeStronger,onClick:function(){return g(!0)}}),(0,s.tZ)(b.xv,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,s.tZ)(O.u,{isOpen:Z,onRequestClose:C,children:(0,s.tZ)(nT.Z,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:C,confirmText:"Remove Bucket",icon:(0,s.tZ)(nE.Z,{}),onConfirm:function(){E({variables:{input:{bucketId:r,replId:c}},onError:l,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?o({type:"removeBucket",data:{bucketId:r}}):l(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),C()}})}),(0,s.tZ)(O.u,{isOpen:m,onRequestClose:v,children:(0,s.tZ)(tU.Z,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:v,delete:function(){return S({variables:{input:{bucketId:r}},onError:l,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?o({type:"deleteBucket",data:{bucketId:r}}):l(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var nL=[{icon:(0,s.tZ)(_.Z,{}),title:"Objects",value:"objects"},{icon:(0,s.tZ)(k.Z,{}),title:"Commands",value:"commands"},{icon:(0,s.tZ)(E.Z,{}),title:"Settings",value:"settings"}],nN=(0,Z.X)({bucketSelector:[R.l0.flex.row,R.l0.flex.shrink(1),R.l0.p(16)],controls:[R.l0.align.center,R.l0.flex.row,R.l0.px(8),R.l0.py(4)],controlSeparator:[R.l0.color.outlineDefault,R.l0.px(8)],errorWrapper:[R.l0.p(16)],wrapper:[R.l0.flex.column,R.l0.flex.grow(1)],tabList:[R.l0.px(12),R.l0.py(4),R.l0.flex.grow(0)],tabPanels:[R.l0.flex.column,R.l0.px(8),R.l0.py(12),R.l0.flex.grow(1)],objectTabPanel:[R.l0.flex.column,R.l0.flex.grow(1)],panels:[R.l0.flex.column,R.l0.px(8),R.l0.py(12),R.l0.flex.grow(1)]}),nO=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onError,r=t.onCompleted,i=(0,p.Z)(),o=(0,A.useCallback)(function(e){if((null==e?void 0:e.repl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var t,n=e.buckets;if(n&&"BucketConnection"!==n.__typename)throw Error(n.message);var r=null!==(t=null==n?void 0:n.items)&&void 0!==t?t:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i){if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};throw Error(i.message)}return{initialBucket:r[0],buckets:r}}(e.repl)}catch(e){null==n||n(e)}},[]),l=(e=(0,F._)({},q,{variables:{replId:i,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==c?void 0:c.repl.__typename)==="Repl"){var t=o(e);t&&(null==r||r(t))}}}),H.a(Y,e)),c=l.data,s=l.loading,u=l.error,d=l.refetch,f=(0,a._)((0,A.useState)(c?o(c):void 0),2),h=f[0],m=f[1];return(0,A.useEffect)(function(){c&&m(o(c))},[o,c]),{buckets:null==h?void 0:h.buckets,initialBucket:null==h?void 0:h.initialBucket,data:c,loading:s,error:u,refetch:d}};function nU(){var e,t,n,r=(0,d.P5)({controlName:P.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),i=(0,a._)((0,A.useState)(),2),p=i[0],h=i[1],g=(0,A.useMemo)(function(){return null==p?void 0:p.map(function(e){return e.id})},[p]),Z=(0,a._)((0,A.useState)(),2),x=Z[0],C=Z[1],k=(0,a._)((0,A.useState)("objects"),2),S=k[0],_=k[1],T=(0,a._)((0,A.useState)(0),2),E=T[0],R=T[1],L=(0,a._)((0,A.useState)(!1),2),N=L[0],O=L[1],U=(0,A.useCallback)(function(){return O(!1)},[]),M=(0,A.useCallback)(function(){return O(!0)},[]),X=(0,a._)((0,A.useState)(!1),2),F=X[0],W=X[1],V=(0,A.useCallback)(function(){return W(!1)},[]),H=(0,A.useCallback)(function(){return W(!0)},[]),z=eM({bucketExternalId:null!==(t=null==x?void 0:x.externalId)&&void 0!==t?t:""}),j=eX(),q=j.fetchObjects,J=j.loading,Y=(0,A.useCallback)(function(e){C(e),_("objects"),q({bucketExternalId:e.externalId,skipIfLoaded:!0})},[q]),$=(0,D.Z)().dotReplit,K=(0,f.Z)(),Q=K.showConfirm,ee=K.showError,et=function(e){var t;ee(e.message),eW.$e(function(n){n.setTag("object-storage-pane",!0),t&&n.setExtras(t),eW.Tb(e)})},en=nO({onError:et,onCompleted:function(e){var t=e.buckets,n=e.initialBucket;h(t),!x&&n&&(C(n),q({bucketExternalId:null==n?void 0:n.externalId,skipIfLoaded:!0}))}}),er=en.data,ei=en.loading,ea=en.error,el=en.refetch,ec=(0,A.useCallback)(function(e){h(function(t){return t?[e].concat((0,l._)(t)):[e]}),C(e),el(),q({bucketExternalId:e.externalId,isNewBucket:!0})},[q,el]),es=(0,A.useCallback)(function(e){h((null!=p?p:[]).filter(function(t){return t.id!==e})),C(void 0),_("objects"),el()},[el,p]),eu=(null==er?void 0:er.repl.__typename)==="Repl"?er.repl.authorizations.createObjectBucket:void 0,ed=(null==er?void 0:er.repl.__typename)==="Repl"?er.repl.authorizations.editObjectBucket:void 0;if(ea)return(0,s.tZ)(w.G,{css:nN.errorWrapper,children:(0,s.tZ)(v.E,{text:'Error: "'.concat(ea.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(ei&&!p)return(0,s.tZ)(I.Z,{pane:{type:"objectStorage"},maxWidth:450,loading:!0});if(!x)return(0,s.tZ)(tN,{createBucketAuthz:eu,editBucketAuthz:ed,refetchAuthzQueryData:el,onBucketAdded:(e=(0,o._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return ec(e),[4,$.updateDotReplit([(0,G.pp)(e.externalId)])];case 1:return t.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),onError:et});if(r){switch(S){case"objects":n=J&&void 0===z?(0,s.tZ)(B.Z,{}):(0,s.tZ)(w.G,{css:nN.objectTabPanel,children:(0,s.tZ)(u.Z,{children:(0,s.tZ)(ni,{bucketExternalId:x.externalId,onOpenCommandsTab:function(){R(nL.findIndex(function(e){return"commands"===e.value}))},onError:et})})});break;case"commands":n=(0,s.tZ)(w.G,{children:(0,s.tZ)(tm,{onError:et})});break;case"settings":n=(0,s.tZ)(w.G,{children:(0,s.tZ)(nG,{bucketId:x.id,bucketExternalId:x.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&es(e.data.bucketId),"deleteBucket"===e.type&&Q("Bucket deleted successfully"),"removeBucket"===e.type&&Q("Bucket removed from Repl successfully")},onError:et})})}return(0,s.BX)(s.HY,{children:[(0,s.tZ)(tn,{excludeBucketIds:null!=g?g:[],isOpen:N,onBucketAdded:function(e){U(),ec(e),Q("Bucket added to Repl successfully")},onError:et,onRequestClose:U}),(0,s.tZ)(eo,{isOpen:F,onBucketCreated:function(e){V(),ec(e),Q("Bucket created successfully")},onError:et,onRequestClose:V}),(0,s.BX)(w.G,{css:nN.controls,children:[(0,s.tZ)(nM,{buckets:p,onRequestAddBucket:M,onRequestCreateBucket:H,onSelect:Y,selectedBucketId:null==x?void 0:x.id}),(0,s.tZ)(b.xv,{css:nN.controlSeparator,variant:"small",children:"/"}),(0,s.tZ)(nX,{onSelect:_,selectedView:S})]}),(0,s.tZ)(m.R,{}),(0,s.tZ)(w.G,{css:nN.panels,children:n})]})}return(0,s.BX)(y.mQ,{css:nN.wrapper,selectedIndex:E,onSelectionChange:function(e){return R(e)},children:[(0,s.tZ)(y.td,{withDividers:!1,css:nN.tabList,children:nL.map(function(e){return(0,s.tZ)(y.OK,{iconLeft:e.icon,children:e.title},e.value)})}),(0,s.BX)(y.nP,{css:nN.tabPanels,children:[(0,s.tZ)(y.x4,{css:nN.objectTabPanel,children:J&&void 0===z?(0,s.tZ)(B.Z,{}):(0,s.tZ)(u.Z,{children:(0,s.tZ)(ni,{bucketExternalId:x.externalId,onOpenCommandsTab:function(){R(nL.findIndex(function(e){return"commands"===e.value}))},onError:et})})}),(0,s.tZ)(y.x4,{children:(0,s.tZ)(tm,{onError:et})}),(0,s.tZ)(y.x4,{children:(0,s.tZ)(nG,{bucketId:x.id,bucketExternalId:x.externalId,onSettingsUpdate:function(e){"deleteBucket"===e.type&&es(e.data.bucketId)},onError:et})})]})]})}function nM(e){var t=e.buckets,n=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,A.useMemo)(function(){if(t&&o)return t.find(function(e){return e.id===o})},[t,o]);return a&&t?(0,s.tZ)(w.G,{children:(0,s.BX)(g.ZE,{label:a.name,items:t,trigger:(0,s.tZ)(h.zx,{size:"default",variant:"nofill",text:a.name,iconRight:(0,s.tZ)(C.Z,{size:12})}),children:[t.map(function(e){return(0,s.tZ)(g.sN,{icon:(0,s.tZ)(x.Z,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,s.tZ)(g.Z0,{}),(0,s.tZ)(g.sN,{icon:(0,s.tZ)(T.Z,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,s.tZ)(g.sN,{icon:(0,s.tZ)(S.Z,{}),id:"add-existing",label:"Add an existing bucket",onAction:n},"add-existing")]})}):(0,s.tZ)(w.G,{children:(0,s.tZ)(h.zx,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,s.tZ)(C.Z,{size:12})})})}function nX(e){var t=e.onSelect,n=e.selectedView,r=(0,A.useMemo)(function(){return nL.find(function(e){return e.value===n})},[n]);return r?(0,s.tZ)(w.G,{children:(0,s.tZ)(g.ZE,{onAction:function(e){var n=nL.find(function(t){return t.value===e});n&&t(n.value)},label:r.title,items:nL,trigger:(0,s.tZ)(h.zx,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,s.tZ)(C.Z,{size:12})}),children:function(e){return(0,s.tZ)(g.sN,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}},34648:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(75271),i=n(41331),o=n.n(i);function a(e){return(0,r.useMemo)(function(){return!e||e.length>40?"Unknown License":o()(e,{upgrade:!1})||"Unknown License"},[e])}},59978:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(41733),i=n(30509),o=n(14118),a=n(79685),l=n(97763),c=n(75271),s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,l.T)(),t=(0,a.T)(),n=(0,o.P5)({controlName:"flag-system-dependencies-search"});return{configs:(0,c.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var t,n;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=s[e.language])&&void 0!==n?n:[]})}))||[];return t&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:n,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,t,n]),loading:!e}}},46261:function(e,t,n){n.d(t,{C:function(){return p}});var r,i,o=n(27387),a=n(42516),l=n(96583),c="index.html",s=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,u=(r={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(c)];case 1:var n;if(!e.sent().exists)return[2,[]];return[2,new Promise((n=(0,o._)(function(e){var n;return(0,l.Jh)(this,function(r){return n=t.watchTextFile(c,{onReady:function(t){var r=t.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(s);d&&i.push({name:d[1],version:d[2]})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}n(),e(i)},onError:function(){n(),e([])}}),[2]})}),function(e){return n.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var t=e.name;return(0,o._)(function(){var e,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(n=r.sent())return[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var t=e.query;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=n.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,n.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()}},(0,a._)(r,"install",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,s,u,d;return(0,l.Jh)(this,function(f){switch(f.label){case 0:return[4,n.stat(c)];case 1:if(!f.sent().exists)return[2];e=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=u.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"></script>\n'),-1===(o=a.indexOf("<script"))&&(o=a.indexOf("</body>")),-1===o&&(o=a.length),c({from:o,insert:i}),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},s=t[Symbol.iterator](),f.label=3;case 3:if(e=(u=s.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),r=!0,i=d,[3,9];case 8:try{e||null==s.return||s.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),(0,a._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,u,d,f;return(0,l.Jh)(this,function(p){switch(p.label){case 0:return[4,n.stat(c)];case 1:if(!p.sent().exists)return[2];e=!0,r=!1,i=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=d.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o,u,d,f,p,h,m,g;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i=0,o=!0,u=!1,d=void 0;try{for(f=a.split("\n")[Symbol.iterator]();!(o=(p=f.next()).done);o=!0)(m=(h=p.value).match(s))&&(g=m[1],e.name===g&&c({from:i,to:i+h.length+1})),i+=h.length+1}catch(e){u=!0,d=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw d}}l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},u=t[Symbol.iterator](),p.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:p.sent(),p.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=p.sent(),r=!0,i=f,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),r),d=(i={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()}},(0,a._)(i,"getPackageInfo",function(e){var t=e.id,n=e.name,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.fetchPackageInfo(n,t)]})})()}),(0,a._)(i,"search",function(e){var t=e.id,n=e.query,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.searchPackages(n,t)]})})()}),(0,a._)(i,"install",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(n,t)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()}),(0,a._)(i,"uninstall",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return e=n.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,t)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}),i),f=n(70466);function p(e){switch(e){case"html":return u;case"nix":return f.Z;default:return d}}},70466:function(e,t,n){n.d(t,{C:function(){return l}});var r,i=n(27387),o=n(42516),a=n(96583);function l(e){return null==e?void 0:e.replace(/^pkgs\./,"")}var c=(r={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:if(null!==(e=n.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()}},(0,o._)(r,"getPackageInfo",function(e){var t=e.name,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,n.packageInfo(t)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()}),(0,o._)(r,"search",function(e){var t=e.query,n=e.services.nixService,r=e.nixOpts;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return[4,n.searchPackages(t,r)];case 1:if(null!==(e=i.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var t,n;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(t=e.homepageURL[0])&&void 0!==t?t:null,license:null!==(n=e.licenses[0])&&void 0!==n?n:null}})]}})})()}),(0,o._)(r,"install",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.addPackages(e)];case 1:return r.sent(),[2]}})})()}),(0,o._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.removePackages(e)];case 1:return r.sent(),[2]}})})()}),r);t.Z=c},60166:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(27387),i=n(96583),o=n(3796),a=n(99595),l=n(96949),c=n(23882),s=n(86763),u=n.n(s),d=n(75271),f=n(59978),p=n(46261),h=n(77049);function m(){var e=(0,c.Z)(),t=(0,h.Hg)(h.NC),n=(0,h.Hg)(h.w$),o=(0,h.XD)(h.w$),s=(0,h.$X)(h.w$),m=(0,h.Hg)(h.vO),g=(0,h.Mi)(),v=(0,h.Zq)(),y=(0,h.OO)(),b=(0,h.np)(),w=(0,a.Z)(),Z=(0,f.I)().configs,x=(0,h.T9)();return(0,d.useEffect)(function(){if(0!==Z.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=Z[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=v(r.id),c=u()(function(){var t=v(r.id),a=o();if(t===h.C0.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,p.C)(r.id);i=i.then(function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(y(r.id,e),g(r.id,h.C0.Idle))})})}},500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==a&&a!==h.C0.Initializing&&a!==h.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}c()}});t.push(i)}}()}catch(e){d=!0,f=e}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[Z,e.fs]),(0,d.useEffect)(function(){var t,n=!1;return(t=(0,r._)(function(){var t,r,o,a,l,c;return(0,i.Jh)(this,function(i){t=!0,r=!1,o=void 0;try{for(a=function(){var t=c.value,r=v(t.id);if(r&&r!==h.C0.Uninitialized&&r!==h.C0.Initializing)return"continue";g(t.id,h.C0.Initializing),(0,p.C)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){n||(y(t.id,e),g(t.id,h.C0.Idle))})},l=Z[Symbol.iterator]();!(t=(c=l.next()).done);t=!0)a()}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return t.apply(this,arguments)})(),function(){n=!0}},[Z]),(0,d.useEffect)(function(){if(null===n&&0!==t.length){var e=t[0];v(e.id)===h.C0.Idle&&b(e)}},[m,n,t]),(0,d.useEffect)(function(){if(null!==n){var t,o=!1;return(t=(0,r._)(function(){var t,r,a,c,u,d,f,m,v,b,Z,C,k,S,_,T,E,R;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(t=(0,p.C)(n.id),n.kind){case h.TH.Install:return[3,1];case h.TH.Uninstall:return[3,6]}return[3,11];case 1:g(n.id,h.C0.Installing),r=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(r=(d=u.next()).done);r=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?w.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):w.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?w.showError("Failed to install ".concat(null!==(v=n.pkgs[0].name)&&void 0!==v?v:"package")):w.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:g(n.id,h.C0.Uninstalling),b=!0,Z=!1,C=void 0;try{for(k=n.pkgs[Symbol.iterator]();!(b=(S=k.next()).done);b=!0)_=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:_.name})}catch(e){Z=!0,C=e}finally{try{b||null==k.return||k.return()}finally{if(Z)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,t.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?w.showNotice("Removed ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):w.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?w.showError("Failed to remove ".concat(null!==(E=n.pkgs[0].name)&&void 0!==E?E:"package")):w.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,t.getInstalledPackages({id:n.id,services:e})];case 12:if(R=i.sent(),o)return[2];return y(n.id,R),g(n.id,h.C0.Idle),s(null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){o=!0}}},[n]),null}function g(e){var t=e.children,n=(0,h.ns)();return(0,o.BX)(h.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},33790:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3796),i=n(88300);function o(e){var t=e.children,n=e.config,o=(0,i.$X)(i.Uk);return n.id&&o(n),(0,r.tZ)(r.HY,{children:t})}function a(e){var t=e.children,n=e.config,a=(0,i.ns)();return(0,r.tZ)(i.fj.Provider,{value:a,children:n?(0,r.tZ)(o,{config:n,children:t}):t})}},77049:function(e,t,n){n.d(t,{$X:function(){return Z},B2:function(){return B},C0:function(){return o},Hg:function(){return C},Mi:function(){return D},NC:function(){return A},OO:function(){return O},T9:function(){return _},TH:function(){return a},Wx:function(){return F},XD:function(){return x},Zq:function(){return R},cW:function(){return P},jh:function(){return M},np:function(){return V},ns:function(){return y},pN:function(){return S},te:function(){return L},vN:function(){return b},vO:function(){return E},w$:function(){return I},wY:function(){return T},z9:function(){return N},zi:function(){return z}});var r,i,o,a,l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(78950),f=n(41974),p=n(49853),h=n(80786),m=n(21962),g=n(75271),v=n(70466);function y(){return(0,u._)((0,g.useState)(function(){return(0,p.MT)()}),1)[0]}(0,p.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Uninitialized="Uninitialized",r.Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var b=(0,g.createContext)(null);function w(){var e=(0,g.useContext)(b);if(!e)throw Error("Expected store in context");return e}var Z=function(e){return(0,h.b9)(e,{store:w()})};function x(e){return(0,m.lV)((0,g.useCallback)(function(t){return t(e)},[e]),{store:w()})}function C(e){return(0,h.Dv)(e,{store:w()})}(0,p.cn)(null),(0,p.cn)(null);var k=(0,p.cn)({});function S(e){var t,n=C(k);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function _(){var e=Z(k);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}}function T(){var e=Z(k);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})})}}var E=(0,p.cn)({});function R(){var e=x(E);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function D(){var e=Z(E);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var I=(0,p.cn)(null);function B(){return C(I)}var A=(0,p.cn)([]);function P(){return C(A)}var G=(0,p.cn)({});function L(e){var t,n=C(G);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function N(){var e=x(G);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:[]}}function O(){var e=Z(G);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n.map(function(e){return"nix"===t?(0,s._)((0,c._)({},e),{name:(0,v.C)(e.name)}):e})))})}}var U=(0,p.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(A,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function M(){return Z(U)}var X=(0,p.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(A,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function F(){return Z(X)}(0,p.cn)(null);var W=(0,p.cn)(null,function(e,t,n){var r=(0,d._)(e(A)),i=r[0],o=r.slice(1);n===i&&(t(A,o),t(I,n))});function V(){return Z(W)}var H=(0,p.cn)(null,function(e,t,n){t(A,function(e){return(0,f.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex(function(e){return e.name===n});-1!==c&&l.pkgs.splice(c,1)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})});function z(){return Z(H)}},88300:function(e,t,n){n.d(t,{$X:function(){return m},Bm:function(){return y},Uk:function(){return g},ZR:function(){return v},fj:function(){return p},ns:function(){return f}});var r,i,o,a,l=n(66626),c=n(49853),s=n(80786),u=n(21962),d=n(75271);function f(){return(0,l._)((0,d.useState)(function(){return(0,c.MT)()}),1)[0]}(0,c.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var p=(0,d.createContext)(null);function h(){var e=(0,d.useContext)(p);if(!e)throw Error("Expected store in context");return e}var m=function(e){return(0,s.b9)(e,{store:h()})},g=(0,c.cn)(null);function v(){return(0,s.Dv)(g,{store:h()})}function y(){return(0,u.lV)((0,d.useCallback)(function(e){return e(g)},[g]),{store:h()})}(0,c.cn)(null)},21097:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(63257),i=n(3796),o=n(1373),a=n.n(o),l=n(65559);function c(e){var t,n=e.repl,o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),null==n?void 0:null===(t=n.project)||void 0===t?void 0:t.title,n.title);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:o},"title")})}},12394:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(42516),i=n(3796),o=n(71357),a=n(22192),l=n(24766),c=n(93245),s=n(36809),u=n(63163),d=n(10578),f=n(25949),p=(0,a.$)(["maxWidth"]),h=p.cssVars,m=p.styleTokens,g=(0,s.X)({container:[u.l0.width("100%"),u.l0.minHeight("100%"),u.l0.center],centeredContent:[u.l0.width("100%"),u.l0.maxWidth(m.maxWidth),u.l0.colWithGap(16),u.l0.p(16),u.l0.center],imageWithHeader:[u.l0.colWithGap(16),u.l0.center,u.l0.flex.shrink(1),u.l0.textAlign.center],bodyText:[u.l0.textAlign.center]});function v(e){var t=e.pane,n=e.asciiArt,a=e.headerText,s=e.bodyText,u=e.body,p=e.action,m=e.icon,v=e.loading,y=e.maxWidth,b=(0,f.Se)(),w=b.getDescription(t),Z=(0,i.tZ)(b.Icon,{pane:t,size:48}),x=null!=u?u:w;void 0!==v&&v?x=(0,i.tZ)(c.G,{children:(0,i.BX)(l.xv,{css:g.bodyText,children:["Loading ",(0,i.tZ)(d.Z,{size:16})]})}):void 0!==s&&(x=(0,i.tZ)(c.G,{children:(0,i.tZ)(l.xv,{css:g.bodyText,multiline:!0,children:s})}));var C=Z;return void 0!==m?C=m:void 0!==n&&(C=(0,i.tZ)(o.Z,{art:n})),(0,i.tZ)(c.G,{css:g.container,style:(0,r._)({},h.maxWidth,"".concat(void 0===y?600:y,"px")),children:(0,i.BX)(c.G,{css:g.centeredContent,children:[(0,i.BX)(c.G,{css:g.imageWithHeader,children:[C,(0,i.tZ)(l.h4,{level:1,variant:"subheadDefault",multiline:!0,children:null!=a?a:w})]}),x,p]})})}},30446:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(3796),i=n(93245),o=n(36809),a=n(10578),l=n(63163),c=(0,o.X)({root:[l.l0.coverContainer,l.l0.center]});function s(){return(0,r.tZ)(i.G,{css:c.root,children:(0,r.tZ)(a.Z,{size:32})})}},45151:function(e,t,n){n.d(t,{g:function(){return f}});var r=n(3796),i=n(79904),o=n(86466),a=n(14548),l=n(93245),c=n(36809),s=n(63163),u=n(379);n(75271);var d=(0,c.X)({root:[{borderBottom:"1px solid ".concat(s.TV.outlineDimmest)}],inner:[s.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[s.l0.flex.row,s.l0.align.center,s.l0.overflowX("auto"),s.l0.pl(8)],tab:[o.gU.nofill,s.l0.borderRadius(0),s.l0.px(12),s.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:s.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[s.l0.position.absolute,s.l0.borderRadius(16),s.l0.width(8),s.l0.height(8),s.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var t=e.tabs,n=e.value,o=e.onClick;return(0,r.tZ)(a.Tg,{css:d.root,children:(0,r.tZ)(l.G,{css:d.inner,children:(0,r.tZ)(l.G,{css:d.tabs,children:t.map(function(e){return(0,r.BX)(l.G,{css:s.l0.position.relative,children:[(0,r.tZ)(i.zx,{style:{borderBottom:"1px solid "+(n===e.value?s.TV.foregroundDefault:"transparent")},css:d.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.tZ)(u.D,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.tZ)(l.G,{css:d.dot}):null]},e.value)})})})})}},75982:function(e,t,n){n.d(t,{ms:function(){return D}});var r=n(66626),i=n(3796),o=n(71051),a=n(79904),l=n(9602),c=n(24766),s=n(93245),u=n(36809),d=n(7935),f=n(10055),p=n(63163),h=n(70145),m=n(19349),g=n(75271),v=n(66791),y=n(22630),b=n(68597),w=n(34030),Z=(0,u.X)({wrapper:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.backgroundHigher],wrapperWarning:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.orangeDimmest],body:[p.l0.flex.growAndShrink(1)],firstLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden")],secondLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.foregroundDimmest],secondLineWarning:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.orangeStrongest],buttons:[p.l0.flex.row,p.l0.pr(6)],verticalDivider:[p.l0.ml(6),p.l0.mr(6),p.l0.height("1em"),p.l0.width(1),p.l0.backgroundColor.foregroundDefault]});function x(e){var t=e.openNetworkingTool,n=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,c=e.secondLine,u=e.renderSecondLine,p=e.renderDontExposeButton,h=e.renderDoExposeButton,m=e.isWarning,g=void 0!==m&&m;return(0,i.BX)(s.G,{css:g?Z.wrapperWarning:Z.wrapper,children:[(0,i.BX)(s.G,{css:Z.body,children:[(0,i.tZ)(s.G,{css:Z.firstLine,children:a}),u?(0,i.tZ)(s.G,{css:g?Z.secondLineWarning:Z.secondLine,children:c}):null]}),(0,i.BX)(s.G,{css:Z.buttons,children:[(0,i.tZ)(l.hU,{alt:"Networking tool",onClick:t,children:(0,i.tZ)(f.Z,{})}),void 0!==p&&p?(0,i.tZ)(l.hU,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.tZ)(b.Z,{})}):null,void 0!==h&&h?(0,i.tZ)(l.hU,{alt:"Expose this port to the web",onClick:o,children:(0,i.tZ)(w.Z,{})}):null,(0,i.tZ)(l.hU,{alt:"Close",onClick:n,children:(0,i.tZ)(d.Z,{})})]})]})}function C(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.renderSecondLine,u=(0,y.O2)(t.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(t.externalPort);return(0,i.tZ)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:["Port :",t.localPort," opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:u,onClick:n})]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s,renderDontExposeButton:!0,onDontExposePort:l})}function k(e){var t=e.configuration,n=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,l=e.onDoExposePort;return(0,i.tZ)(x,{openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but not exposed to the web."),secondLine:(0,i.tZ)(a.zx,{variant:"underlined",text:"Expose this port?",onClick:n}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:l})}function S(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"Remove an external port in"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"port configuration",onClick:t}),(0,i.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:o})}function _(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but is not configured properly."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function T(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but has missing configuration."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function E(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.onDoExposePort,c=e.renderSecondLine,s=t.type;switch(s){case h.DL.FORWARDED:return(0,i.tZ)(C,{configuration:t,openWebview:n,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDontExposePort:a});case h.DL.INTERNAL_ONLY:return(0,i.tZ)(k,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDoExposePort:l});case h.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.tZ)(S,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case h.DL.MISCONFIGURED:return(0,i.tZ)(_,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case h.DL.CONFIG_MISSING:return(0,i.tZ)(T,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});default:(0,v.Z)(s)}}function R(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,l=e.onClose,u=e.renderSecondLine,d=t.filter(function(e){return e.type===h.DL.FORWARDED}),f=t.filter(function(e){return e.type!==h.DL.FORWARDED});return(0,i.tZ)(x,{isWarning:!1,openNetworkingTool:r,onClose:l,firstLine:(0,i.BX)(i.HY,{children:[d.length>0?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:[d.length," ",(0,o.Z)("port",d.length)," ","opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:"{...}.replit.dev",onClick:n})]}):null,d.length>0&&f.length>0?(0,i.tZ)(s.G,{css:Z.verticalDivider}):null,f.length>0?(0,i.BX)(c.xv,{children:[f.length," ",(0,o.Z)("port",f.length)," ","did not open"]}):null]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:u})}function D(e){var t=e.configurations,n=e.openWebview,o=e.openNetworkingTool,a=e.onClose,l=e.onDontExposePort,c=e.onDoExposePort,s=(0,m.e)("port-nudges"),u=(0,r._)((0,g.useState)(!1),2),d=u[0],f=u[1],p=!s.isDone,h=(0,r._)((0,g.useState)(!0),2),v=h[0],y=h[1];function b(){y(!1),null==a||a()}return((0,g.useEffect)(function(){0===t.length&&y(!0)},[t]),(0,g.useEffect)(function(){if(!s.isDone){if(t.length>0&&!d){f(!0);return}0===t.length&&d&&s.setAsDone()}},[t,s,d]),v&&0!==t.length)?1===t.length?(0,i.tZ)(E,{configuration:t[0],openNetworkingTool:o,openWebview:n,renderSecondLine:p,onClose:b,onDontExposePort:l,onDoExposePort:c}):(0,i.tZ)(R,{configurations:t,openNetworkingTool:o,openWebview:n,renderSecondLine:p,onClose:b}):null}},42935:function(e,t,n){n.d(t,{L:function(){return h}});var r=n(42516),i=n(3796),o=n(65034),a=n(49784),l=n(24766),c=n(69460),s=n(47136),u=n(36809),d=n(63163),f=n(93245),p=(0,u.X)({select:d.l0.minWidth(200),wrapper:[d.l0.rowWithGap(8),d.l0.align.center,{"@container (max-width: 400px)":[d.l0.flex.rowReverse]}],rightComponentWrapper:{"@container (max-width: 400px)":[d.l0.ml(8)]}});function h(e){var t,n=e.setting,u=e.currentValue,d=e.update,h=e.rightComponent,m=e.title,g=m;if(m||(g=n.description?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:n.name}),(0,i.tZ)(l.xv,{variant:"small",color:"dimmest",children:n.description})]}):(0,i.tZ)(l.xv,{multiline:!1,children:n.name})),"select"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:g,children:(0,i.BX)(f.G,{css:p.wrapper,children:[h?(0,i.tZ)(f.G,{css:p.rightComponentWrapper,children:h}):null,(0,i.tZ)(o.P,{"aria-label":n.name,style:{marginRight:0},items:n.options,defaultSelectedKey:null===(t=n.options.find(function(e){return u===e.editorPreferencesValue}))||void 0===t?void 0:t.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,null===(t=n.options.find(function(t){return t.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:p.select,dataCy:n.id,children:function(e){return(0,i.tZ)(s.m9,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})]})});if("boolean"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:g,children:(0,i.BX)(i.HY,{children:[h,(0,i.tZ)(a.r,{"aria-label":n.name,isSelected:u,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})]})});throw Error("Unsupported setting type")}},40652:function(e,t,n){n.d(t,{Ly:function(){return m},ZP:function(){return v},qm:function(){return b}});var r=n(66626),i=n(3796),o=n(29574),a=n(98433),l=n(91466),c=n(44935),s=n(24766),u=n(36809),d=n(63163),f=n(42935),p=n(69460),h=n(75271),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,u.X)({sizeInput:[d.l0.py(6),d.l0.flex.growAndShrink(0),{border:"none"}]});function v(){var e=(0,o.Gn)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,n=e.update;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(f.L,{setting:a.z2.indentationDetection,currentValue:t.indentDetection,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentFormatPastes,currentValue:t.indentFormatPastes,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentIsSpaces,currentValue:t.indentIsSpaces,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(p.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.xv,{multiline:!1,children:"Indentation Size"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(b,{css:g.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function y(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function b(e){var t=e.size,n=e.onChange,o=e.className,a=(0,r._)((0,h.useState)(null),2),l=a[0],s=a[1],u=null!==l?l:t.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.tZ)(c.II,{type:"number",style:{width:d},className:o,min:1,max:16,value:u,onBlur:function(){return s(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;if(""===t||isNaN(r)){s(t);return}e.target.validity.valid?(s(null),n(y(r))):(s(t),""===t||isNaN(parseInt(t,10))||n(y(t)))}})}},69460:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(3796),i=n(24766),o=n(93245),a=n(36809),l=n(63163),c=n(31089),s=n(75271),u=(0,a.X)({wrapper:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center,{"@container (max-width: 400px)":[l.l0.colWithGap(8),l.l0.align.start]}],inner:[l.l0.flex.growAndShrink(1)]});function d(e){var t=e.id,n=e.title,a=e.children,l=(0,c.U)()(t);return(0,r.BX)(o.G,{css:u.wrapper,children:[(0,r.tZ)(o.G,{css:u.inner,tag:"label",htmlFor:l,children:"string"==typeof n?(0,r.tZ)(i.xv,{multiline:!1,children:n}):n}),s.cloneElement(a,{id:l})]})}},1696:function(e,t,n){n.d(t,{Z:function(){return tk}});var r=n(3796),i=n(42965),o=n(94622),a=n(24766),l=n(93245),c=n(63163),s=n(36809),u=n(41733),d=n(30509),f=n(29574),p=n(14118),h=n(1567),m=n(96949),g=n(24281),v=n(91466),y=n(9602),b=n(22893),w=n(14548),Z=n(49784),x=n(10578),C=n(15323),k=n(98924),S=n(66626),_=n(99595),T=n(35820),E=n(81215),R=n(21262),D=n(71440),I=n(9122),B=n(76143);function A(){var e=(0,R._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return A=function(){return e},e}function P(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function G(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var L={},N=(0,D.Ps)(A()),O=(0,D.Ps)(P(),N),U=(0,D.Ps)(G(),N),M=n(62477),X=n(75271),F=n(43544),W=function(e){var t=(0,S._)((0,X.useState)(0),2),n=t[0],r=t[1];return(0,F.Z)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),n},V=n(52657),H=n(66177),z=n(86466),j=n(82549),q=n(1056),J=n(43133),Y=n(44629),$=n(30043),K=n(71145),Q=n(9834),ee=n.n(Q),et=(0,s.X)({self:[{border:"1px solid",borderColor:c.TV.outlineDimmest},c.l0.zIndex(5),c.l0.maxHeight(300),c.l0.position.absolute,c.l0.overflowY("auto"),c.l0.width("100%"),c.l0.left(0),c.l0.borderRadius(8),c.l0.flex.column],apron:[c.l0.flex.grow(1),{borderTop:"1px solid",borderTopColor:c.TV.outlineDimmest}],menuItems:[c.l0.flex.growAndShrink(1),c.l0.overflowY("auto"),{listStyle:"none"}],menuApronItem:[c.l0.p(8),c.l0.rowWithGap(12),c.l0.justify.start,c.l0.align.center,z.gU.listItem],menuApronWrapper:[c.l0.flex.column]}),en=(0,K.oM)(),er=function(e){var t=e.children,n=e.className,i=e.bottomOffset;return(0,r.BX)(w.Tg,{className:n,tag:"ul",elevated:!0,css:et.self,style:{bottom:"calc(".concat(i,"px + ").concat(c.TV.space8,")")},children:[(0,r.tZ)(l.G,{css:et.menuItems,children:t}),(0,r.tZ)(w.Tg,{css:et.apron,children:(0,r.BX)(l.G,{css:et.menuApronWrapper,children:[(0,r.tZ)(ee(),{legacyBehavior:!0,href:en.href,as:en.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Explore Themes"})]})}),(0,r.tZ)(ee(),{legacyBehavior:!0,href:K.ZS.href,as:K.ZS.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)($.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Create a Theme"})]})})]})})]})},ei=(0,s.X)({trigger:[z.gU.filled,c.l0.p(8),c.l0.color.foregroundDefault,c.l0.border({width:0})],triggerContent:[c.l0.align.center,c.l0.rowWithGap(8)],chevron:[c.l0.transition.snappy],selectLabel:[c.l0.flex.growAndShrink(1),{textAlign:"left",lineHeight:c.TV.lineHeightHeaderBig}],menuWrapper:[c.l0.position.relative],sectionHeadings:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{borderTop:"1px solid ".concat(c.TV.outlineDimmer),textTransform:"uppercase"}],officialHeading:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{textTransform:"uppercase"}],showMoreWrapper:[c.l0.align.center],spinnerWrapper:[c.l0.p(8),c.l0.align.center]}),eo=l.K.li;function ea(e){var t=e.id,n=e.sections,i=e.initialSelectedItem,o=e.selectedItem,c=e.onChange,s=e.placeholder,f=e.dataCy,p=e.paginationOptions,h=(0,k._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),m=(0,X.useId)(),g=(0,V.Z)(c),v=(0,X.useRef)(null),b=W(v),w=Object.values(n).flat(),Z=(0,J.L7)((0,d._)((0,u._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var t=e.selectedItem;t&&g.current(t)},stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case J.L7.stateChangeTypes.MenuKeyDownEnter:case J.L7.stateChangeTypes.MenuKeyDownSpaceButton:case J.L7.stateChangeTypes.ItemClick:return(0,d._)((0,u._)({},r),{isOpen:!0});default:return r}}},void 0!==o&&{selectedItem:o}),{id:m})),C=(0,H.Z)({onLoadMore:p.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var t,n=e.item,i=e.index;return(0,r.tZ)(eo,(0,d._)((0,u._)({},Z.getItemProps({item:n,index:i})),{"data-cy":n.dataCy,children:(0,r.tZ)(M.Z,{highlighted:i===Z.highlightedIndex,selected:n.id===(null===(t=Z.selectedItem)||void 0===t?void 0:t.id),title:n.title})}))};return(0,r.BX)(l.G,{id:t,dataCy:f,children:[(0,r.tZ)(Y.T,{children:(0,r.tZ)("label",(0,d._)((0,u._)({},Z.getLabelProps()),{children:"select a theme"}))}),(0,r.tZ)("button",(0,d._)((0,u._)({type:"button",css:ei.trigger},h,Z.getToggleButtonProps({ref:v})),{children:(0,r.BX)(l.G,{css:ei.triggerContent,children:[(0,r.tZ)(q.Z,{size:16}),Z.selectedItem?(0,r.tZ)(a.xv,{css:ei.selectLabel,multiline:!1,children:Z.selectedItem.title}):(0,r.tZ)(a.xv,{color:"dimmer",css:ei.selectLabel,multiline:!1,children:s}),(0,r.tZ)(j.Z,{rotate:Z.isOpen?180:0,css:ei.chevron})]})})),(0,r.tZ)("div",(0,d._)((0,u._)({},Z.getMenuProps()),{css:ei.menuWrapper,children:Z.isOpen&&w.length>0?(0,r.BX)(er,{bottomOffset:b,children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.officialHeading,multiline:!1,children:"Official Themes"}),n.official.map(function(e,t){return(0,r.tZ)(S,{item:e,index:t},"".concat(e.id))}),n.authored.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Your Themes"}),n.authored.map(function(e,t){var i=n.official.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,n.installed.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Community Themes"}),n.installed.map(function(e,t){var i=n.official.length+n.authored.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,p.authoredHasNextPage||p.installedHasNextPage?(0,r.tZ)(l.G,{css:ei.showMoreWrapper,children:p.loading?(0,r.tZ)(l.G,{css:ei.spinnerWrapper,children:(0,r.tZ)(x.Z,{size:12})}):(0,r.tZ)(y.hU,{tooltipBehavior:"hidden",alt:"Show more",onClick:p.loadMore,ref:C,children:(0,r.tZ)(j.Z,{})})}):null]}):null}))]})}var el=n(14861),ec=n(97420),es=n(71658),eu=n(89107),ed=n(63257),ef=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var o=e.currentUser.authoredThemes.items,a=i.currentUser.authoredThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{authoredThemes:(0,d._)((0,u._)({},i.currentUser.authoredThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},ep=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var o=e.currentUser.installedThemes.items,a=i.currentUser.installedThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{installedThemes:(0,d._)((0,u._)({},i.currentUser.installedThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},eh=function(e){var t=e.authoredThemesData,n=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,X.useCallback)(function(){var e,o;(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&t.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:t.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:ef}):(null==n?void 0:null===(o=n.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&n.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:n.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:ep})},[t,n,r,i])},em=function(e){var t,n,i,o,a,s,d,f,p=e.context,h=(0,k._)(e,["context"]),m=(0,X.useId)(),g=(0,_.Z)().showError,v=(t=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return g(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&g(n.message)}}),I.a(O,t)),y=v.data,w=v.loading,Z=v.error,x=v.fetchMore,C=(0,S._)((n=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return g(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&g(n.message)}}),B.t(U,n)),2),R=C[0],D=C[1],A=D.data,P=D.loading,G=D.error,N=D.fetchMore,M=(0,el.F)(),F=M.setActiveTheme,W=M.isSaving,V=M.error,H=M.theme;(0,X.useEffect)(function(){var e,t=null==y?void 0:null===(e=y.currentUser)||void 0===e?void 0:e.authoredThemes;(null==t?void 0:t.__typename)!=="CustomThemeConnection"||t.pageInfo.hasNextPage||R()},[y,R]);var z=((null==A?void 0:null===(o=A.currentUser)||void 0===o?void 0:null===(i=o.installedThemes)||void 0===i?void 0:i.__typename)==="InstalledThemeConnection"?A.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),j=(null==y?void 0:null===(s=y.currentUser)||void 0===s?void 0:null===(a=s.authoredThemes)||void 0===a?void 0:a.__typename)==="CustomThemeConnection"?y.currentUser.authoredThemes.items:[];(0,X.useEffect)(function(){V&&g(V.message)},[V,g]);var q=eh({authoredThemesData:y,installedThemesData:A,fetchMoreAuthored:x,fetchMoreInstalled:N}),J=(null==y?void 0:null===(d=y.currentUser)||void 0===d?void 0:d.authoredThemes.__typename)==="CustomThemeConnection"&&y.currentUser.authoredThemes.pageInfo.hasNextPage,Y=(null==A?void 0:null===(f=A.currentUser)||void 0===f?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&A.currentUser.installedThemes.pageInfo.hasNextPage;if(Z||G)return(0,r.tZ)(l.G,{children:(0,r.tZ)(b.E,{colorway:"negative",text:"Something went wrong loading your themes"})});var $={official:es.T,authored:j,installed:z};return(0,r.tZ)(l.G,{children:(0,r.tZ)(ea,(0,u._)({css:[[W?T.p.backgroundPulse(ec.TV.accentPrimaryDefault,ec.TV.accentPrimaryDimmest):{}],c.l0.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:ec.TV.backgroundHigher}}],id:m,dataCy:"preferences-theme-dropdown",sections:$,disabled:W,paginationOptions:{loadMore:q,authoredHasNextPage:J,installedHasNextPage:Y,loading:w||P},selectedItem:(0,E.iG)(H)?H.customTheme:es.T.find(function(e){return e.id===H.id}),onChange:function(e){F(e.id),"number"==typeof e.id&&(0,eu.B4)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:p})}},h))})},eg=n(40652),ev=n(79904),ey=n(44935),eb=n(27840),ew=n(62835),eZ=n(69460);function ex(e){return e.slice().sort(function(e,t){return e-t})}var eC=(0,s.X)({ruler:[c.l0.py(4),c.l0.px(8),c.l0.rowWithGap(4),c.l0.align.center,c.l0.borderRadius(8)],remove:[c.l0.borderRadius(4)],title:[c.l0.pr(8),c.l0.overflow("visible"),c.l0.flex.shrink(0)],body:[c.l0.flex.row,c.l0.flex.wrapReverse,c.l0.align.start,c.l0.justify.end,c.l0.flex.growAndShrink(1),{gap:c.TV.space4}],list:[c.l0.flex.row,c.l0.flex.wrap,c.l0.flex.growAndShrink(1),c.l0.align.end,c.l0.justify.end,{gap:c.TV.space4}],add:[c.l0.rowWithGap(4),c.l0.align.center]});function ek(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(w.Tg,{css:eC.ruler,elevated:!0,children:[(0,r.tZ)(a.xv,{multiline:!1,children:t}),(0,r.tZ)(y.hU,{css:eC.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(ew.Z,{})})]})}function eS(){var e=(0,S._)((0,X.useState)(!1),2),t=e[0],n=e[1],i=(0,S._)((0,X.useState)(80),2),o=i[0],c=i[1],s=(0,X.useRef)(null),u=(0,X.useRef)(null),d=-1===o,p=o>=0&&o<=1e3,h=(0,f.Gn)("rulers"),m=h.preferences,g=h.update,v=ex(m.rulers);return(0,r.tZ)(eZ.$,{id:"rulers",title:(0,r.tZ)(a.xv,{css:eC.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(l.G,{css:eC.body,children:[(0,r.tZ)(l.G,{css:eC.list,children:v.map(function(e,t){return(0,r.tZ)(ek,{pos:e,onRemove:function(){g({rulers:v.filter(function(e,n){return n!==t})})}},t)})}),t?(0,r.BX)(l.G,{css:eC.add,children:[(0,r.tZ)(ey.II,{ref:s,type:"number",style:{width:d?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)c(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||c(t)}},onKeyDown:function(e){"Escape"===e.key?(c(80),n(!1)):"Enter"===e.key&&p&&(g({rulers:ex((0,ed._)(v).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==u.current&&(n(!1),c(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(ev.zx,{ref:u,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(eb.Z,{}),disabled:!p,onClick:function(){p&&(g({rulers:ex((0,ed._)(v).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),c(80))}})]}):(0,r.tZ)(r.HY,{children:v.length>=10?null:(0,r.tZ)(ev.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)($.Z,{}),onClick:function(){return n(!0)}})})]})})}var e_=(0,s.X)({container:[c.l0.flex.row,c.l0.justify.spaceBetween,c.l0.align.start,{"@container (max-width: 400px)":[c.l0.colWithGap(8)]}],title:[c.l0.flex.growAndShrink(1)],body:[c.l0.colWithGap(12)],switchWrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.end,{"@container (max-width: 400px)":[c.l0.flex.rowReverse]}],switchLabel:[{"@container (max-width: 400px)":[c.l0.ml(8)]}]});function eT(){var e=(0,f.Gn)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,r.BX)(l.G,{css:e_.container,children:[(0,r.BX)(l.G,{css:e_.title,children:[(0,r.tZ)(a.xv,{children:"Show Whitespace"}),(0,r.tZ)(a.xv,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(l.G,{css:e_.body,children:[(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Leading"}),(0,r.tZ)(Z.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Enclosed"}),(0,r.tZ)(Z.r,{"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Trailing"}),(0,r.tZ)(Z.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Selected"}),(0,r.tZ)(Z.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var eE=n(93371),eR=n(7391),eD=n(98433);function eI(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"codeActionsOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Code Actions on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Run 'Fix all' Code Actions for the current editor on save."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Code Actions on Save",isSelected:t.codeActionsOnSave,onChange:function(e){n({codeActionsOnSave:e})}})})}var eB=n(6466),eA=n(85995);function eP(e){var t=e.context,n=e.text,i=(0,S._)((0,X.useState)(!1),2),o=i[0],a=i[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ev.zx,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.tZ)(eA.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:t}}})]})}var eG=n(37701),eL=n(22419),eN=n(25),eO=n(85983),eU=n(87387);function eM(){var e=(0,R._)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return eM=function(){return e},e}var eX={},eF=(0,D.Ps)(eM()),eW=n(42935),eV={titleContainer:[c.l0.rowWithGap(8),c.l0.align.center],upgradeRow:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween]};function eH(){var e,t,n=(0,p.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eX,void 0),I.a(eF,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.userSubscriptionType)===eO.HP.HackerPro,d=(0,i.Gv)((0,eR.useRouter)()),h=(0,eG.v)().isTeamWithAiDisabled,g=(0,f.Gn)("codeSuggestion","completeCodeEngine"),y=g.preferences,b=g.update,w=(0,eB.Z)().engine,Z=function(e){var t=b(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return h?null:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eW.L,{currentValue:y.codeSuggestion,update:Z,setting:eD.z2.codeSuggestion,title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:eV.titleContainer,children:(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion"})}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Code completion provides inline ghost text suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),s||d?null:(0,r.BX)(l.G,{css:eV.upgradeRow,children:[(0,r.tZ)(a.xv,{children:"Upgrade for full access to Replit AI"}),(0,r.tZ)(eP,{text:"Upgrade to Replit ".concat(eU.we),context:"workspace_settings_pane"})]}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.tZ)(eL.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(eN.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",w]})]}),currentValue:y.completeCodeEngine,update:Z,setting:eD.z2.completeCodeEngine})]}):null]})}function ez(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"formatOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Format on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Format on Save",isSelected:t.formatOnSave,onChange:function(e){n({formatOnSave:e})}})})}var ej=n(54236),eq=n(96214);function eJ(){var e=(0,R._)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n    }\n  }\n"]);return eJ=function(){return e},e}var eY={},e$=(0,D.Ps)(eJ()),eK=n(76068),eQ=(0,ej.Zb)(),e0=ej.hx?[{title:"override",value:ej.hx}]:Array.from((0,ed._)(Object.entries(eK._)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),e1=(0,ej.hN)()||ej.hx?e0[0]:e0[1];function e2(){var e,t,n,i=(0,p.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eY,void 0),I.a(e$,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.isStaff)||!1,d=(0,f.Gn)("chatEngine","ghostwriterUseAdvancedModel"),h=d.preferences,g=d.update,b=(0,ej.vl)(),w=(0,S._)((0,X.useState)(!Object.values(e0).map(function(e){return e.value}).includes(eQ)),2),Z=w[0],x=w[1],k=(0,S._)((0,X.useState)(""),2),_=k[0],T=k[1],E=function(e){var t=g(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return(0,r.BX)(r.HY,{children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.chatEngine,currentValue:h.chatEngine,update:E,title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Advanced AI Chat Engine"}),(0,r.tZ)(eL.u,{tooltip:"You are seeing this functionality because you have special permissions. If set, this preference overrides the default advanced model.",children:(0,r.tZ)(eN.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",b.qualified]})]})})]}):null,(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.ghostwriterUseAdvancedModel,currentValue:h.ghostwriterUseAdvancedModel,update:E})]}),s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eZ.$,{id:"ghostwriterChatService",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:(0,r.tZ)(a.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,r.BX)(l.G,{css:[c.l0.colWithGap(8)],children:[(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current endpoint: ",eQ]}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eq.P,{css:[c.l0.minWidth(184)],initialSelectedItem:null!==(n=e0.find(function(e){return e.value===eQ}))&&void 0!==n?n:eQ?e0[e0.length-1]:e1,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,ej.iX)(e.value),x(!1),window.location.reload()):x(!0)},items:e0}),Z?(0,r.BX)(l.G,{css:c.l0.rowWithGap(4),children:[(0,r.tZ)(ey.II,{value:_,onChange:function(e){T(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,ej.iX)(_)}}),(0,r.tZ)(y.hU,{alt:"Update custom url",onClick:function(){(0,ej.iX)(_),window.location.reload()},children:eQ!==_?(0,r.tZ)(C.Z,{}):(0,r.tZ)(eb.Z,{})})]}):null]})})]}):null]})}function e3(e){var t=e.hideLayoutControl,n=e.className,o=e.resetLayout,s=(0,f.Gn)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching","highlightAiChatInDefaultLayout","codeRepairHighlight"),k=s.preferences,S=s.update,_=(0,i.Gv)((0,eR.useRouter)()),T=(0,i.T3)(),E=(0,eE.cR)(),R=(0,g.NJ)(),D=(0,p.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),I=(0,p.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),B=(0,p.P5)({controlName:"flag-default-layout-ai-in-the-editor",logFlagToAnalytics:!1}),A=(0,p.P5)({controlName:"flag-default-layout-ai-pane",logFlagToAnalytics:!1}),P=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),S(e)};if(!k)return null;var G=(0,d._)((0,u._)({},eD.z2.multiselectModifierKey),{options:eD.z2.multiselectModifierKey.options.map(function(e){return(0,d._)((0,u._)({},e),{title:(0,h.hp)("cmdOrCtrlKey"===e.id?h.LH.CMD_OR_CTRL_KEY:h.LH.ALT_KEY,R)})})});return(0,r.BX)(w.Tg,{className:n,background:"default",css:[c.l0.p(16),c.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.layout,update:P,currentValue:k.isLayoutStacked,rightComponent:o?(0,r.tZ)(y.hU,{alt:"Reset layout",onClick:function(){o.reset()},children:o.resetting?(0,r.tZ)(x.Z,{}):(0,r.tZ)(C.Z,{})}):null}),(0,r.tZ)(v.R,{})]}),(0,r.tZ)(eW.L,{setting:eD.z2.fontSize,update:P,currentValue:k.fontSize}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eZ.$,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Accept Suggestion on Commit Character"}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.tZ)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Accept suggestion on commit character",isSelected:k.acceptSuggestionOnCommitCharacter,onChange:function(e){P({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eZ.$,{id:"enableCloseBracketMatching",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Auto close brackets"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Auto close brackets",isSelected:k.enableCloseBracketMatching,onChange:function(e){P({enableCloseBracketMatching:e})}})}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eg.ZP,{}),(0,r.tZ)(v.R,{}),D?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eI,{preferences:k,update:P}),(0,r.tZ)(v.R,{}),(0,r.tZ)(ez,{preferences:k,update:P}),(0,r.tZ)(v.R,{})]}):null,(0,r.tZ)(eW.L,{setting:eD.z2.wrapping,update:P,currentValue:k.wrapping}),(0,r.tZ)(v.R,{}),T?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.minimap,update:P,currentValue:k.minimapDisplay}),(0,r.tZ)(v.R,{})]}),(0,r.tZ)(eS,{}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.keyboardHandler,update:P,currentValue:k.keyboardHandler}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:G,update:P,currentValue:k.multiselectModifierKey}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.showFileTreeGitStatus,update:P,currentValue:k.showFileTreeGitStatus}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.codeRepairHighlight,update:P,currentValue:k.codeRepairHighlight}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eH,{}),(0,r.tZ)(e2,{}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.codeIntelligence,update:P,currentValue:k.codeIntelligence}),(0,r.tZ)(v.R,{}),I&&k.codeIntelligence?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.semanticTokens,update:P,currentValue:k.semanticTokens}),(0,r.tZ)(v.R,{})]}):null,(0,r.tZ)(eT,{}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.accessibleTerminal,update:P,currentValue:k.accessibleTerminal}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.shellBellAudio,update:P,currentValue:k.shellBellAudio}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eZ.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:E?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),E?(0,r.tZ)(l.G,{css:[c.l0.pt(8),c.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(b.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(Z.r,{"aria-label":"Automatic Webview",isSelected:k.webviewAutoOpenOnPortOpened,isDisabled:E,onChange:function(e){P({webviewAutoOpenOnPortOpened:e})}})}),(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.forwardPortsAutomatically,update:P,currentValue:k.forwardPortsAutomatically}),_?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eZ.$,{id:"theme",title:"Theme",children:(0,r.tZ)(em,{css:[c.l0.minWidth(184),c.l0.backgroundColor.backgroundHigher],context:eu.HY.WorkspacePreferencesPane})})]}),B||A?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.highlightAiChatInDefaultLayout,update:P,currentValue:k.highlightAiChatInDefaultLayout})]}):null,(0,r.tZ)(v.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.chatAudioNotification,update:P,currentValue:k.chatAudioNotification})]})}var e4=n(31089),e8=n(62279),e6=n(4573),e5=n(84238),e7=n(83059),e9=n(38975),te=n(39819),tt=n(19602),tn=n(89313),tr=n(91372),ti=n(54300),to=n(11195),ta=n(47767),tl=n(70625),tc=n(10126);function ts(e){var t=(0,X.useRef)(null),n=(0,X.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var o=t.current,a=n.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,tl.lc)(r);if(l){if((0,tl.ZG)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;t.current=setTimeout(function(){return i(a)},c)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var tu=(0,s.X)({root:[c.l0.colWithGap(8)],row:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.minHeight(28)],left:[c.l0.colWithGap(2),c.l0.flex.grow(0),c.l0.flex.shrink(1)],right:[c.l0.rowWithGap(16),c.l0.align.center,c.l0.justify.end,c.l0.position.relative,c.l0.flex.grow(1),c.l0.flex.shrink(0)],recordingRow:[c.l0.flex.column,c.l0.align.center,c.l0.justify.end],recordingRowInner:[c.l0.rowWithGap(8),c.l0.align.center],recordingRowKeys:[c.l0.position.relative],recordingRowHint:[c.l0.position.absolute,c.l0.top(20),c.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[c.l0.display.flex,c.l0.align.baseline,c.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],secondaryText:[c.l0.display.flex,c.l0.flex.row,c.l0.align.center,c.l0.rowWithGap(4)],secondaryTextId:[c.l0.flex.grow(1),c.l0.flex.shrink(0)],secondaryTextDescription:[c.l0.flex.grow(0),c.l0.flex.shrink(1),c.l0.color.foregroundDimmest],buttons:[c.l0.rowWithGap(4)]}),td=(0,s.X)({root:[c.l0.rowWithGap(8),c.l0.align.center],recordingRow:[c.l0.rowWithGap(4),c.l0.align.center],input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function tf(e){var t,n,i,o,s=e.command,u=e.filter,d=e.shortcutsToCommands,f=e.onViewShortcutConflicts,p=(0,tc.r3)(),h=(0,tc.wU)(),m=(0,tc.V_)(s.id),g=(0,S._)((0,X.useState)(null),2),v=g[0],w=g[1],Z=ts(function(e){switch(e.type){case"start":w({recorded:[]});return;case"stop":w(null);return;case"update":w({recorded:e.recorded});return;case"success":var t=(0,tl.SG)(e.shortcut);if(!t||p(s.id,t)){w(null);return}w(null);return;case"error":w(function(t){var n;return{error:e.message,recorded:null!==(n=null==t?void 0:t.recorded)&&void 0!==n?n:[]}});return}}),x=Z.stopRecording,k=Z.startRecording,_=Z.onKeyDown,T=(0,e5.Z)(function(){return x()},[]),E=!!v;ty(E);var R=null!==(o=null==v?void 0:v.recorded)&&void 0!==o?o:[],D=null==v?void 0:v.error,I=u.length>0,B=null===(t=e9.Z.match(u,s.name))||void 0===t?void 0:t.ranges,A=null===(n=e9.Z.match(u,s.id))||void 0===n?void 0:n.ranges,P=(null==s?void 0:s.description)?null===(i=e9.Z.match(u,s.description))||void 0===i?void 0:i.ranges:void 0,G=(0,e7.Z)(function(){return u.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[u]);return(0,r.BX)(l.G,{css:tu.root,"data-testid":s.id,children:[(0,r.BX)(l.G,{css:tu.row,children:[(0,r.BX)(l.G,{css:tu.left,children:[(0,r.tZ)(e6.x,{text:s.name,highlight:B,dimmed:I}),(0,r.BX)(a.xv,{variant:"small",css:tu.secondaryText,multiline:!1,children:[I?(0,r.tZ)(e6.x,{css:tu.secondaryTextId,text:s.id,highlight:A,dimmed:I}):null,s.description?(0,r.BX)(r.HY,{children:[I?(0,r.tZ)(a.xv,{color:"dimmest",multiline:!1,children:""}):null,(0,r.tZ)(e6.x,{css:tu.secondaryTextDescription,text:s.description,highlight:P,dimmed:I})]}):null]})]}),(0,r.BX)(l.G,{innerRef:E?T:void 0,css:tu.right,children:[E?(0,r.tZ)(to.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:_,css:td.input})}):null,s.shortcut&&!E&&d.length>1?(0,r.tZ)(y.hU,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){X.startTransition(function(){s.shortcut&&f(tp([s.shortcut]))})},children:(0,r.tZ)(ti.Z,{color:c.TV.foregroundDimmer})}):null,s.shortcut&&!E?(0,r.tZ)(ta.bM,{small:!0,keyCombo:s.shortcut,match:G}):null,s.shortcut||E?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(ev.zx,{size:"small",variant:"outlined",iconLeft:(0,r.tZ)($.Z,{}),text:"Add shortcut",onClick:function(){return k()}}),m?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return p(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null]}),E?(0,r.tZ)(l.G,{css:tu.recordingRow,children:(0,r.BX)(l.G,{css:tu.recordingRowInner,children:[(0,r.tZ)(l.G,{css:tu.recordingRowKeys,children:R.length>0?(0,r.tZ)(l.G,{css:tu.keys,children:R.map(function(e,t){return(0,r.tZ)(ta.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,r.tZ)(a.xv,{multiline:!1,color:"dimmest",css:tu.recordingRowPlaceholder,children:"Recording"})}),(0,r.tZ)(y.hU,{alt:"Stop",onClick:function(){return x()},children:(0,r.tZ)(tZ,{})})]})}):null,s.shortcut&&!E?(0,r.BX)(l.G,{css:tu.buttons,children:[m&&m!==s.shortcut?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return p(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null,(0,r.tZ)(y.hU,{alt:"Change",onClick:function(){return k()},children:(0,r.tZ)(tn.Z,{})}),(0,r.tZ)(y.hU,{alt:"Remove",onClick:function(){return h(s.id)},children:(0,r.tZ)(tt.Z,{})})]}):null]})]}),D?(0,r.tZ)(b.E,{icon:(0,r.tZ)(ti.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return w(function(e){var t;return{recorded:null!==(t=null==e?void 0:e.recorded)&&void 0!==t?t:[]}})}}):null]})}function tp(e){var t=e.flat();return t.length>1?t.map(function(e){return tp([e])}).join(" "):(0,tl.QR)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var th=(0,s.X)({root:[c.l0.colWithGap(8),c.l0.p(0)],surface:[c.l0.pt(8),c.l0.borderRadius(8),c.l0.colWithGap(12)]});function tm(e){var t=e.search,n=e.setSearch,i=(0,X.useRef)(null),o=(0,S._)((0,X.useState)(!1),2),c=o[0],s=o[1];ty(c);var u=ts(function(e){var t,r,o;switch(e.type){case"start":s(!0),n(""),null==i||null===(t=i.current)||void 0===t||t.focus();return;case"stop":case"error":s(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":n(tp([e.shortcut]));return;case"update":n(tp(e.recorded));return}}),d=u.stopRecording,f=u.startRecording,p=u.onKeyDown;return(0,r.BX)(l.G,{css:td.root,children:[(0,r.tZ)(to.MT,{children:(0,r.tZ)(ey.II,{ref:i,placeholder:c?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:c?d:void 0,onChange:function(e){n(e.currentTarget.value)},onKeyDown:c?function(e){"Escape"===e.key?d():p(e)}:void 0,value:t})}),(0,r.tZ)(l.G,{css:td.recordingRow,children:c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmest",css:td.searchingText,multiline:!1,children:"Searching"}),(0,r.tZ)(y.hU,{alt:"Stop Recording",onClick:d,children:(0,r.tZ)(tZ,{})})]}):(0,r.tZ)(y.hU,{alt:"Record Keys",onClick:f,children:(0,r.tZ)(tr.Z,{})})}),(0,r.tZ)(y.hU,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.tZ)(ew.Z,{})})]})}function tg(){var e=(0,S._)((0,X.useState)(""),2),t=e[0],n=e[1],i=(0,X.useDeferredValue)(t);return(0,r.BX)(l.G,{css:th.root,children:[(0,r.tZ)(tm,{search:t,setSearch:n}),(0,r.tZ)(tv,{search:i,setSearch:n})]})}var tv=X.memo(function(e){var t=e.search,n=e.setSearch,i=(0,tc.xF)(),o=(0,e7.Z)(function(){return(0,ed._)(i.values())},[i]),a=(0,X.useMemo)(function(){return e9.Z.filter(t,o,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(tp([e.shortcut]))),t}})},[t,o]),l=(0,X.useMemo)(function(){return a.reduce(function(e,t){var n=t.original,r=n.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(n):i=[n],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.tZ)(w.Tg,{css:th.surface,children:a.map(function(e,i){var o;return(0,r.BX)(X.Fragment,{children:[i>0?(0,r.tZ)(w.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(tf,{command:e.original,filter:t,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:n})]},e.original.id)})}):null});function ty(e){var t="You have unsaved changes";(0,X.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var tb=(0,e8.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),tw=(0,s.X)({background:[{animationName:tb,animation:"".concat(tb," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(c.TV.redStronger)},c.l0.height(11),c.l0.width(11),c.l0.borderRadius("full"),c.l0.position.absolute],container:[c.l0.position.relative,c.l0.align.center,c.l0.justify.center],icon:[{zIndex:1}]});function tZ(){return(0,r.BX)(l.G,{css:tw.container,children:[(0,r.tZ)(te.Z,{css:tw.icon,color:c.TV.redStronger}),(0,r.tZ)(l.G,{css:tw.background})]})}function tx(){var e=(0,e4.U)()("keyboard_shortcuts");return(0,r.BX)(w.Tg,{background:"default",css:[c.l0.px(16),c.l0.pb(16),c.l0.colWithGap(12)],children:[(0,r.tZ)(l.G,{tag:"label",htmlFor:e}),(0,r.tZ)(tg,{})]})}var tC=(0,s.X)({headerContainer:[c.l0.flex.column,c.l0.justify.center,c.l0.px(16),c.l0.py(8)],subheading:[{fontStyle:"italic"},c.l0.color.foregroundDimmer,c.l0.mt(8),c.l0.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[c.l0.fontWeight.medium]}],tab:[c.l0.py(8),c.l0.px(16)]});function tk(e){var t=e.hideLayoutControl,n=e.resetLayout,c=(0,i.T3)();return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:tC.headerContainer,children:[(0,r.tZ)(a.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.tZ)(a.xv,{variant:"small",css:tC.subheading,children:"The following settings apply to your account and will be used across all your Repls."})]}),c?(0,r.tZ)(e3,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(l.G,{children:(0,r.BX)(o.mQ,{css:tC.tabs,children:[(0,r.BX)(o.td,{withDividers:!1,css:tC.tabList,children:[(0,r.tZ)(o.OK,{css:tC.tab,children:"Editor preferences"}),(0,r.tZ)(o.OK,{css:tC.tab,children:"Keyboard shortcuts"})]}),(0,r.BX)(o.nP,{children:[(0,r.tZ)(o.x4,{children:(0,r.tZ)(e3,{resetLayout:n})}),(0,r.tZ)(o.x4,{children:(0,r.tZ)(tx,{})})]})]})})]})}},18282:function(e,t,n){n.d(t,{CF:function(){return p},hQ:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(44236),l=n(9122);function c(){var e=(0,i._)(["\n  fragment ConvertedToProjectModalRepl on Repl {\n    id\n    org {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ConvertedToProjectModal($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          slug\n        }\n        project {\n          id\n          title\n          mainRepl {\n            id\n          }\n        }\n        ...CreateProjectForkRepl\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c()),f=(0,o.Ps)(s(),a.a);function p(e){var t=(0,r._)({},u,e);return l.a(f,t)}},87865:function(e,t,n){n.d(t,{b:function(){return _}});var r=n(42516),i=n(41733),o=n(30509),a=n(66626),l=n(3796),c=n(14118),s=n(99595),u=n(16155),d=n(3569),f=n(77876),p=n(79904),h=n(39808),m=n(36809),g=n(58532),v=n(24766),y=n(63163),b=n(93245),w=n(18282),Z=n(9834),x=n.n(Z),C=n(75271),k=(0,m.X)({self:[y.l0.colWithGap(16),y.l0.container("root")],actions:[y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.center,(0,r._)({},y.nC.max(475,"root"),[y.l0.colWithGap(8),y.l0.align.end])],buttons:[y.l0.rowWithGap(8),(0,r._)({},y.nC.max(350,"root"),[y.l0.colWithGap(8),y.l0.align.end])]}),S=function(){var e=(0,u.Z)(),t=(0,w.CF)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),n=t.data,r=t.previousData,c=(0,s.Z)(),m=c.showConfirm,y=c.showError,Z=(0,a._)((0,f.F)({onFork:function(){m("Repl forked, redirecting...")},onError:function(){y("Error creating fork - please try again")}}),2),S=Z[0],_=Z[1].loading,T=(null==n?void 0:n.getRepl.__typename)==="Repl"?n.getRepl:null,E=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,R=(null==T?void 0:T.org)?T.org:null,D=(null==T?void 0:T.project)?T.project:null,I=(0,a._)((0,C.useState)(!1),2),B=I[0],A=I[1];return((0,C.useEffect)(function(){var t,n,r,i;if((null==T?void 0:null===(t=T.project)||void 0===t?void 0:t.mainRepl)&&E&&T.project.mainRepl.id===e)return(null===(r=E.project)||void 0===r?void 0:null===(n=r.mainRepl)||void 0===n?void 0:n.id)&&E.project.mainRepl.id===e||(i=setTimeout(function(){A(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,T,E]),T&&R&&D)?(0,l.tZ)(g.u,{isOpen:B,onRequestClose:function(){return A(!1)},centered:!0,children:(0,l.BX)(b.G,{css:k.self,children:[(0,l.tZ)(v.h4,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,l.BX)(v.xv,{children:["This Repl is now the source of truth for a Project called"," ",D.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,l.BX)(b.G,{css:k.actions,children:[(0,l.tZ)(x(),{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,l.tZ)(v.xv,{children:"Learn more"})}),(0,l.BX)(b.G,{css:k.buttons,children:[(0,l.tZ)(p.zx,{text:"Work in a new fork",onClick:function(){_||S({orgId:R.id,repl:T,forkSource:"convertedToProjectModal"})},disabled:_,loading:_}),(0,l.tZ)(h.Z,(0,o._)((0,i._)({colorway:"primary"},(0,d.RF)({org:R,projectId:D.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},_=function(e){var t=e.repl;return(0,c.P5)({controlName:"flag-converted-to-project-modal",type:"boolean",default:!1})&&t.org?(0,l.tZ)(S,{}):null}},71323:function(e,t,n){n.d(t,{An:function(){return f},Pr:function(){return g},r:function(){return h}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303),l=n(76143);function c(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query CreateProjectCheckForProject($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(c()),p=(0,o.Ps)(s());function h(e){var t=(0,r._)({},d,e);return a.D(p,t)}var m=(0,o.Ps)(u());function g(e){var t=(0,r._)({},d,e);return l.t(m,t)}},69615:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(3796),i=n(93245),o=n(36809),a=n(63163),l=n(97420),c=(0,o.X)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}],svg:[a.l0.width("auto"),a.l0.height("auto")]}),s=function(e){var t=e.className;return(0,r.tZ)(i.G,{className:t,css:c.container,children:(0,r.BX)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("rect",{width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:l.TV.accentPositiveStrongest}),(0,r.tZ)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:l.TV.accentPositiveDimmest,strokeWidth:"2"})]})})}},42564:function(e,t,n){n.d(t,{J:function(){return m}});var r=n(41733),i=n(30509),o=n(69792),a=n(16155),l=n(21262),c=n(71440),s=n(9122);function u(){var e=(0,l._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),p=n(85983),h=n(43627);function m(){var e,t,n,l,c,u,m=(0,o.e)({controlName:h.r}),g=(e={variables:{id:(0,a.Z)()},skip:!m},t=(0,r._)({},d,e),s.a(f,t)),v=(null===(l=g.data)||void 0===l?void 0:null===(n=l.getRepl)||void 0===n?void 0:n.__typename)==="Repl"?g.data.getRepl.org:void 0,y=!!v&&v.type===p.a4.Team&&(v.authorizations.createPrivateRepl.isAuthorized||v.authorizations.createPublicRepl.isAuthorized)&&v.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},g),{hasProject:(null===(c=g.data)||void 0===c?void 0:c.getRepl.__typename)==="Repl"&&!!(null===(u=g.data.getRepl.project)||void 0===u?void 0:u.id),isEligibleForProject:y})}},9929:function(e,t,n){n.d(t,{B:function(){return u},e:function(){return s}});var r=n(27387),i=n(66626),o=n(96583),a=n(84082),l=n(23882),c=n(75271),s=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,l.Z)(),t=e.container,n=e.fs,u=e.git,d=(0,i._)((0,c.useState)({state:"loading"}),2),f=d[0],p=d[1];return(0,c.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return p({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=t.sent()).error&&p({state:"error",error:"Could not get repository status"}),e.error||e.state===a.yG.NOT_INITIALIZED)return p({state:"error",error:"Could not get repository status"}),[2];return[4,s(u)];case 2:if(t.sent().error)return p({state:"error",error:"Could not configure SSH"}),[2];return p({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,n,u]),f}},73344:function(e,t,n){n.d(t,{Z:function(){return ev},$:function(){return eg}});var r=n(27387),i=n(66626),o=n(96583),a=n(3796),l=n(16155),c=n(96949),s=n(79904),u=n(39808),d=n(91466),f=n(22893),p=n(24766),h=n(93245),m=n(36809),g=n(13850),v=n(87618),y=n(90767),b=n(54300),w=n(63163),Z=n(23882),x=n(12394),C=n(25949),k=n(24200),S=n(75271),_=n(68140),T=n(35370),E=n(45250),R=n(83960),D=n(58997),I=n(59978),B=n(63257),A=n(54505),P=n(44935),G=n(14548),L=n(30231),N=n(6674),O=n(39031),U=n(12379),M=n(43257),X=n(66791),F="Import HTML package",W=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() </script>'}]}],V=[{title:F,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"></script>'}]}],H=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],z="Import Node package",j=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],q=[{title:z,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],J=n(9602),Y=(0,m.X)({root:[w.l0.colWithGap(4)],toolTipContainer:[w.l0.rowWithGap(4),w.l0.align.center],templateContainer:[w.l0.rowWithGap(4),w.l0.justify.center,w.l0.backgroundColor.backgroundRoot,w.l0.borderRadius(4),w.l0.p(4),w.l0.align.center],contentContainer:[w.l0.colWithGap(4)],input:[w.l0.minWidth(64),w.l0.flex.growAndShrink(1)],codeExampleContainer:[w.l0.borderRadius(4),w.l0.flex.shrink(1)],codeExampleText:[w.l0.font.code,w.l0.color.foregroundDimmer,w.l0.py(4),w.l0.flex.growAndShrink(1)]}),$=function(e){var t=e.title,n=e.content,r=(0,i._)((0,S.useState)(n),2),o=r[0],l=r[1];return(0,a.BX)(h.G,{css:Y.root,children:[(0,a.BX)(h.G,{css:Y.toolTipContainer,children:[(0,a.tZ)(p.xv,{variant:"subheadDefault",children:t}),"Get user info"===t?(0,a.tZ)(J.hU,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,a.tZ)(O.Z,{})}):null]}),(0,a.BX)(h.G,{css:Y.contentContainer,children:[(0,a.tZ)(h.G,{css:Y.templateContainer,children:n.map(function(e,n){var r=e.type;switch(r){case"input":return(0,a.tZ)(P.II,{onChange:function(e){var t=(0,B._)(o);t[n].value=e.target.value,l(t)},placeholder:e.placeholder,value:e.value||"",css:Y.input},"".concat(t,"-").concat(n));case"code":return(0,a.tZ)(h.G,{css:Y.codeExampleContainer,children:(0,a.tZ)(p.xv,{multiline:!1,css:Y.codeExampleText,children:e.value})},"".concat(t,"-").concat(n));default:(0,X.Z)(r)}})}),(0,a.tZ)(K,{code:o.reduce(function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value},""),packageImport:t===z||t===F})]})]})},K=function(e){var t=e.code,n=e.packageImport,r=(0,k.R3)(),i=(0,U.Z)(r),o=(0,Z.Z)().fs,l=(0,k.Qt)();return i?(0,a.tZ)(G.Tg,{children:(0,a.tZ)(s.zx,{size:"small",variant:"outlined",onClick:function(){var e,a;if(n&&r&&o){if("html"!==(0,T.r6)(r)){i({code:t,insertAt:0});return}o.readFile(r).then(function(e){if(e.error)throw e.error;var n=M.Z.from(e.content).toString(),r=n.indexOf("</head>")-1;-1===r&&(r=n.indexOf("<script")),-1===r&&(r=n.indexOf("</body>")),-1===r&&(r=n.length),i({code:t,insertAt:r})});return}i({code:t,insertAt:null!==(a=null===(e=l())||void 0===e?void 0:e.position.offset)&&void 0!==a?a:0})},text:n?"Auto add":"Insert",iconRight:(0,a.tZ)(L.Z,{}),css:{width:"fit-content"}})}):(0,a.tZ)(G.Tg,{children:(0,a.tZ)(s.zx,{size:"small",variant:"outlined",onClick:function(){return(0,A.Z)(t)},text:"Copy",iconLeft:(0,a.tZ)(N.Z,{}),css:{width:"fit-content"}})})},Q=function(e){var t=e.examples;return(0,a.tZ)(h.G,{css:[w.l0.colWithGap(16)],children:t.map(function(e,t){return(0,a.tZ)($,{title:e.title,content:e.content},t)})})},ee=function(e){var t=e.langKey;return(0,a.BX)(h.G,{css:[w.l0.colWithGap(8)],children:[" ","html"!==t&&(0,a.tZ)(Q,{examples:V}),(0,a.tZ)(Q,{examples:H})]})},et=n(62279),en=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],er=(0,et.iv)([w.l0.colWithGap(16)]),ei=function(){return(0,a.tZ)(h.G,{css:er,children:en.map(function(e,t){return(0,a.tZ)($,{title:e.title,content:e.content},t)})})},eo=(0,et.iv)([w.l0.colWithGap(8)]),ea=function(e){var t=e.langKey,n=(0,a.tZ)(ei,{});switch(t){case"html":n=(0,a.tZ)(Q,{examples:W});break;case"nodejs":n=(0,a.tZ)(Q,{examples:j})}return(0,a.tZ)(h.G,{css:eo,children:n})},el=function(e){var t=e.langKey,n=null;switch(t){case"html":n=V;break;case"nodejs":n=q}return n?(0,a.tZ)(h.G,{css:[w.l0.colWithGap(8)],children:(0,a.tZ)(Q,{examples:n})}):null},ec=n(41733),es=n(21262),eu=n(71440),ed=n(9122);function ef(){var e=(0,es._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return ef=function(){return e},e}var ep={},eh=(0,eu.Ps)(ef()),em=(0,m.X)({link:[w.l0.color.accentPrimaryStronger,w.l0.cursor.pointer],errorContainer:[w.l0.textAlign.center,w.l0.colWithGap(4)],mainContent:[w.l0.colWithGap(24)],enableAuthContent:[w.l0.colWithGap(8)],mainDescription:[w.l0.colWithGap(8)],usageSectionTitle:[w.l0.colWithGap(2)],usageSection:[w.l0.colWithGap(8)],usageSectionTitleText:[{color:w.TV.foregroundDimmest,textTransform:"uppercase",fontWeight:w.TV.fontWeightMedium}],divider:[w.l0.backgroundColor.outlineDimmer],usageExamples:[w.l0.colWithGap(12)]}),eg=function(){var e=(0,Z.Z)(),t=e.dotReplit,n=e.fs,a=(0,i._)((0,S.useState)(),2),l=a[0],c=a[1],s=(0,i._)((0,S.useState)(!1),2),u=s[0],d=s[1],f=(0,i._)((0,S.useState)(!1),2),p=f[0],h=f[1],m=(0,i._)((0,S.useState)(!0),2),g=m[0],v=m[1],y=(0,i._)((0,S.useState)(!0),2),b=y[0],w=y[1],x=(0,S.useCallback)((0,r._)(function(){var e,n,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:c(void 0),v(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,t.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case D.Yt.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case D.Yt.Disconnected:throw Error("Disconnected, cannot read .replit file.");case D.Yt.NotFound:return w(!1),[2]}return d(!!(null==a?void 0:null===(n=a.config)||void 0===n?void 0:null===(e=n.auth)||void 0===e?void 0:e.buttonEnabled)),h(!!(null==a?void 0:null===(i=a.config)||void 0===i?void 0:null===(r=i.auth)||void 0===r?void 0:r.pageEnabled)),[3,5];case 3:return c(o.sent().message),[3,5];case 4:return v(!1),[7];case 5:return[2]}})}),[t,c,v,w,d,h]);return(0,S.useEffect)(function(){var e;(e=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:if(!n)return[2];return[4,x()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[n,x]),(0,S.useEffect)(function(){if(n){var e=n.watchTextFile(E.l,{onChange:(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),[2]}})})});return function(){e(),h(!1),d(!1),v(!1)}}},[n,h,x]),{error:l,isDotReplitAuthButtonEnabled:u,isDotReplitAuthPageEnabled:p,isDotReplitAuthLoading:g,hasDotReplit:b,setError:c,setIsDotReplitAuthLoading:v,isDotReplitAuthEnabled:u||p}};function ev(){var e,t,n,m,v,E=(0,l.Z)(),D=(0,Z.Z)().dotReplit,B=(0,k.R3)(),A=B?(0,T.r6)(B):null,P=(0,I.I)().configs,G=(0,i._)((0,S.useState)(""),2),L=G[0],N=G[1],O=(e=(0,ec._)({},ep,{variables:{replID:E}}),ed.a(eh,e)),U=O.data,M=O.error,X=O.loading,F=(null==U?void 0:U.repl.__typename)==="Repl"&&(null==U?void 0:null===(n=U.repl)||void 0===n?void 0:null===(t=n.config)||void 0===t?void 0:t.isServer),W=null!==(v=null==U?void 0:null===(m=U.currentUser)||void 0===m?void 0:m.isLoggedIn)&&void 0!==v&&v,V=eg(),H=V.error,z=V.isDotReplitAuthButtonEnabled,j=V.isDotReplitAuthPageEnabled,q=V.isDotReplitAuthLoading,J=V.hasDotReplit,Y=V.setError,$=V.setIsDotReplitAuthLoading,K=V.isDotReplitAuthEnabled;(0,S.useEffect)(function(){if(P.find(function(e){return"react"===e.language})||"jsx"===A||"tsx"===A){N("react");return}P.length>0&&N(P[0].language)},[A,L,N,P]);var Q=(0,S.useCallback)((0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return $(!0),(0,c.j)(c.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,D.updateDotReplit([(0,R.$0)(!0),(0,R.Jk)(!1)])];case 1:return e.sent().error&&(Y("Couldn't enable login page, please try again"),$(!1)),[2]}})}),[$,D,Y]),et=(0,S.useCallback)((0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return $(!0),(0,c.j)(c.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,D.updateDotReplit([(0,R.$0)(!1),(0,R.Jk)(!0)])];case 1:return e.sent().error&&(Y("Couldn't enable login button, please try again"),$(!1)),[2]}})}),[$,D,Y]),en=(0,S.useCallback)((0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return $(!0),(0,c.j)(c.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,D.updateDotReplit([(0,R.$0)(!1),(0,R.Jk)(!1)])];case 1:return e.sent().error&&(Y("Couldn't disable Log in with Replit, please try again"),$(!1)),[2]}})}),[$,D,Y]),er=(0,S.useMemo)(function(){return W?J?M?(0,a.tZ)(h.G,{css:em.errorContainer,children:(0,a.tZ)(f.E,{colorway:"warning",text:"An error ocurred retrieving auth for this Repl. Please try again later."})}):"html"===L||F?void 0:(0,a.tZ)(h.G,{css:em.errorContainer,children:(0,a.tZ)(f.E,{colorway:"warning",text:"Please start your web app to use Log in with Replit"})}):(0,a.BX)(h.G,{css:em.errorContainer,children:[(0,a.tZ)(f.E,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,a.tZ)(p.xv,{children:(0,a.tZ)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,a.tZ)(h.G,{css:em.errorContainer,children:(0,a.tZ)(eb,{})})},[M,J,W,F,L]),ei="html"===L||"nodejs"===L,eo=(0,a.tZ)(p.xv,{color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."}),es=(0,a.BX)(h.G,{css:em.mainContent,children:[(0,a.BX)(h.G,{css:em.mainDescription,children:[j?(0,a.BX)(p.xv,{color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,a.BX)("span",{onClick:et,css:em.link,onKeyDown:et,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]}):(0,a.BX)(p.xv,{color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,a.BX)("span",{onClick:Q,css:em.link,onKeyDown:Q,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),ei?void 0:eo]}),(0,a.BX)(h.G,{children:["nodejs"===L&&z?null:(0,a.tZ)(el,{langKey:L}),z?(0,a.tZ)(ee,{langKey:L}):null]}),(0,a.BX)(h.G,{css:em.usageSection,children:[(0,a.BX)(h.G,{css:em.usageSectionTitle,children:[(0,a.tZ)(p.xv,{multiline:!1,variant:"small",css:em.usageSectionTitleText,children:"Usage"}),(0,a.tZ)(d.R,{css:em.divider})]}),(0,a.tZ)(h.G,{children:(0,a.BX)(h.G,{css:em.usageExamples,children:[" ","nodejs"===L&&z?(0,a.tZ)(el,{langKey:L}):null,(0,a.tZ)(ea,{langKey:L})]})})]}),(0,a.tZ)(s.zx,{onClick:en,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:q||X})]}),eu=(0,C.Se)().getDescription({type:"replAuth"}),ef=(0,a.BX)(h.G,{css:em.enableAuthContent,children:[(0,a.tZ)(p.xv,{css:w.l0.textAlign.center,children:eu}),(0,a.tZ)(s.zx,{colorway:"primary",onClick:Q,text:"Enable Login Page",loading:q||X,disabled:!!H,iconLeft:(0,a.tZ)(y.Z,{})}),(0,a.BX)(p.xv,{css:w.l0.textAlign.center,variant:"small",children:["Alternatively,"," ",(0,a.tZ)("span",{onClick:et,css:em.link,onKeyDown:et,role:"button",tabIndex:0,children:"use a custom login button"}),"."]})]}),ev=(0,a.tZ)(u.Z,{href:_.TT.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,a.tZ)(g.Z,{}),text:"Learn more"});return(0,a.tZ)(x.Z,{pane:{type:"replAuth"},maxWidth:K?600:450,headerText:"Login with Replit",body:(0,a.BX)(a.HY,{children:[H?(0,a.tZ)(f.E,{text:H,colorway:K?void 0:"warning",icon:(0,a.tZ)(b.Z,{})}):null,null!=er?er:K?es:ef]}),action:er?void 0:ev})}var ey=(0,m.X)({container:[w.l0.colWithGap(16)]}),eb=function(){return(0,a.BX)(h.G,{css:ey.container,children:[(0,a.BX)(p.xv,{children:[(0,a.tZ)("a",{href:_.TT.REPL_AUTH,target:"_blank",rel:"noopener",css:em.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,a.tZ)(u.Z,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.tZ)(v.Z,{})})]})}},60242:function(e,t,n){n.d(t,{HX:function(){return C},ap:function(){return I},BZ:function(){return S},gF:function(){return T},vi:function(){return R}});var r=n(41733),i=n(21262),o=n(71440),a=n(71519);function l(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=n(56250),u=n(60357),d=n(89549),f=n(89885),p=n(71323),h=n(92331),m=n(9122),g=n(82303);function v(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,o.Ps)(v(),a._,c,s.s,u.sY,d.wd,f.d,p.An),k=(0,o.Ps)(y(),C);function S(e){var t=(0,r._)({},x,e);return m.a(k,t)}var _=(0,o.Ps)(b(),h.FW);function T(e){var t=(0,r._)({},x,e);return g.D(_,t)}var E=(0,o.Ps)(w(),C);function R(e){var t=(0,r._)({},x,e);return g.D(E,t)}var D=(0,o.Ps)(Z());function I(e){var t=(0,r._)({},x,e);return g.D(D,t)}},24886:function(e,t,n){n.d(t,{Z:function(){return rW}});var r,i,o,a,l,c,s,u,d=n(41733),f=n(30509),p=n(66626),h=n(3796),m=n(25722),g=n(75271),v=n(45685),y=n(34925),b=n(23830),w=n(23666),Z=n(52657),x=n(99595),C=n(16155),k=n(43038),S=n(11881),_=n(96949),T=n(59941),E=n(3569),R=n(42516),D=n(24766),I=n(93245),B=n(75710),A=n(10578),P=n(63163),G=n(92331),L=n(27387),N=n(96583),O=n(14118),U=n(97432),M=n(12285),X=n(4955),F=n(14105),W=n(9670),V=n(84864);(r=l||(l={}))[r.Default=0]="Default",r[r.Saved=1]="Saved",r[r.Current=2]="Current";var H=n(62372),z=n(98587),j=n(15023),q=n(14548),J=n(89313),Y=n(78421);function $(e){var t=(0,p._)((0,g.useState)(null),2),n=t[0],r=t[1],i=(0,p._)((0,g.useState)(null),2),o=i[0],a=i[1],l=(0,H.Z)({onUpload:function(t){var n=t.url;r(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;a(null),r(t)},onError:function(e){r(null),a(e.message)}}),c=(0,g.useCallback)(function(){return a(null)},[]);return(0,f._)((0,d._)({},l),{error:o,clearError:c,previewUrl:n})}var K=n(81202),Q=n.n(K),ee=n(85983),et=n(21262),en=n(71440),er=n(89549),ei=n(82303);function eo(){var e=(0,et._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return eo=function(){return e},e}function ea(){var e=(0,et._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ea=function(){return e},e}var el={},ec=(0,en.Ps)(eo(),G.FW,er.wd),es=(0,en.Ps)(ea(),G.FW,er.wd),eu="Something went wrong publishing your Template";function ed(e){if(e.error)return e.error.message||eu;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return eu}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return eu}}}function ef(){var e,t,n,r,i=(0,p._)((e=(0,d._)({},el,void 0),ei.D(ec,e)),2),o=i[0],a=i[1],l=(0,p._)((t=(0,d._)({},el,void 0),ei.D(es,t)),2),c=l[0],s=l[1];return{createRelease:(n=(0,L._)(function(e){var t,n;return(0,N.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ed(n)}];case 3:return r.sent(),[2,{data:null,error:eu}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(r=(0,L._)(function(e){var t,n;return(0,N.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ed(n)}];case 3:return r.sent(),[2,{data:null,error:eu}];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),data:a.data||s.data,loading:a.loading||s.loading,error:ed(a||s)}}var ep=n(9122);function eh(){var e=(0,et._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return eh=function(){return e},e}var em={},eg=(0,en.Ps)(eh(),G.FW);function ev(){var e=(0,et._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ev=function(){return e},e}var ey={},eb=(0,en.Ps)(ev(),G.FW);function ew(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplTags)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplTags.message:(null===(l=e.data)||void 0===l?void 0:l.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function eZ(){var e=(0,et._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eZ=function(){return e},e}var ex={},eC=(0,en.Ps)(eZ(),G.FW);function ek(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplViewSettings)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(l=e.data)||void 0===l?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function eS(){var e=(0,et._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return eS=function(){return e},e}var e_={},eT=(0,en.Ps)(eS(),G.FW);function eE(e){return e.message||"Something went wrong saving updates to your Repl"}function eR(e){return"repl_file"===e||"repl_image"===e}(i=c||(c={})).ReplFile="repl_file",i.ReplImage="repl_image";var eD=function(e){"use strict";(0,X._)(n,e);var t=(0,W._)(n);function n(){return(0,M._)(this,n),t.apply(this,arguments)}return n}((0,F._)(Error)),eI=function(e){"use strict";(0,X._)(n,e);var t=(0,W._)(n);function n(){return(0,M._)(this,n),t.apply(this,arguments)}return n}((0,F._)(Error)),eB=function(e){"use strict";(0,X._)(n,e);var t=(0,W._)(n);function n(){return(0,M._)(this,n),t.apply(this,arguments)}return n}((0,F._)(Error));function eA(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function eP(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var eG=(0,g.createContext)(null),eL=function(e){var t=(0,g.useContext)(eG);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},eN=function(){var e=(0,g.useContext)(eG);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eO=n(98924),eU=n(36809),eM=n(41026),eX=n(25949),eF=(0,eU.X)({container:[P.l0.p(4),P.l0.flex.row,P.l0.maxWidth(100),P.l0.backgroundColor.backgroundDefault,P.l0.borderRadius(4),{aspectRatio:"1 / 1"}],root:[P.l0.flex.grow(1),P.l0.flex.row],stacked:[P.l0.flex.grow(1),P.l0.colWithGap(2),P.l0.justify.spaceEvenly],sideBySide:[P.l0.flex.grow(1),P.l0.rowWithGap(2)],paneGroup:[P.l0.p(2),P.l0.flex.grow(1),P.l0.backgroundColor.backgroundHigher,P.l0.center]});function eW(e){var t=e.layoutState,n=(0,eO._)(e,["layoutState"]);return(0,h.tZ)(I.G,(0,f._)((0,d._)({css:eF.container},n),{children:(0,h.tZ)(eV,{root:t.layout,paneData:t.data})}))}function eV(e){var t,n=e.root,r=e.paneData;return null==n.tiling?null:(0,h.tZ)(I.G,{css:eF.root,children:(null===(t=n.tiling)||void 0===t?void 0:t.type)==="split"?(0,h.tZ)(eH,{split:n.tiling,paneData:r,depth:1}):(0,h.tZ)(ez,{group:n.tiling,paneData:r,depth:1})})}function eH(e){var t=e.split,n=e.paneData,r=e.depth;return r>2?(0,h.tZ)(ej,{}):(0,h.tZ)(I.G,{css:t.stacked?eF.stacked:eF.sideBySide,children:t.children.map(function(e){return"split"===e.type?(0,h.tZ)(eH,{split:e,paneData:n,depth:r+1}):(0,h.tZ)(ez,{group:e,paneData:n,depth:r+1})})})}function ez(e){var t=e.group,n=e.paneData,r=e.depth,i=n[t.panes[t.activeIndex]],o=(0,eX.Se)(),a=o.Icon({pane:i,size:r>1?12:16}),l=o.getTitle(i);return(0,h.tZ)(I.G,{css:eF.paneGroup,title:l,children:a})}function ej(){return(0,h.tZ)(I.G,{css:eF.paneGroup,children:(0,h.tZ)(eM.Z,{})})}var eq=n(63257),eJ=n(91451),eY=n.n(eJ),e$=(0,eU.X)({container:[P.l0.colWithGap(8)],layoutButton:[P.l0.borderRadius(4),P.l0.p(8),P.l0.border({width:1,color:P.TV.greyDimmer}),P.l0.backgroundColor.backgroundHigher,P.l0.cursor.pointer,{"&:hover":[P.l0.backgroundColor.backgroundHighest],'&[data-selected="true"]':[P.l0.backgroundColor.accentPrimaryDimmest,P.l0.border({color:P.TV.blueDimmer})],'&[data-selected="true"]:hover':[P.l0.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[P.l0.backgroundColor.backgroundDefault,P.l0.border({color:P.TV.greyDimmest}),P.l0.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[P.l0.rowWithGap(8),P.l0.justify.spaceBetween,P.l0.width("100%")],layoutButtonText:[P.l0.flex.growAndShrink(1),P.l0.flex.column,P.l0.justify.center],layoutButtonHeader:[P.l0.mb(4)],layoutPreview:[P.l0.width(80),P.l0.height(80),{alignSelf:"center"}]});function eK(e){var t,n=e.getCurrentLayoutState(),r=Q()(eY()(n,"sidebarPercent"),eY()(e.savedLayoutState,"sidebarPercent")),i=(t=(0,eX.Se)(),(0,g.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var n=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?n.push.apply(n,(0,eq._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,eq._)(i.children))}return n.reverse().map(function(n){return t.getTitle(e.data[n])}).join(", ")},[t])),o=(0,g.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),a=(0,g.useMemo)(function(){return i(n)},[n,i]);return(0,h.BX)(I.G,{css:e$.container,children:[(0,h.tZ)(D.xv,{variant:"small",children:"Choose an initial workspace layout for new Repls using this template."}),(0,h.tZ)(q.Tg,{css:e$.layoutButton,"data-selected":e.templateLayout.value===l.Default,onClick:function(){return e.templateLayout.setValue(l.Default)},children:(0,h.tZ)(I.G,{css:e$.layoutButtonRow,children:(0,h.BX)(I.G,{css:e$.layoutButtonText,children:[(0,h.tZ)(D.h4,{level:3,variant:"text",css:e$.layoutButtonHeader,children:"Default layout"}),(0,h.tZ)(D.xv,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,h.tZ)(q.Tg,{css:e$.layoutButton,"data-selected":e.templateLayout.value===l.Saved,onClick:function(){return e.templateLayout.setValue(l.Saved)},children:(0,h.BX)(I.G,{css:e$.layoutButtonRow,children:[(0,h.BX)(I.G,{css:e$.layoutButtonText,children:[(0,h.tZ)(D.h4,{level:3,variant:"text",css:e$.layoutButtonHeader,children:"Saved layout"}),(0,h.tZ)(D.xv,{variant:"small",children:o})]}),(0,h.tZ)(eW,{css:e$.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,h.tZ)(q.Tg,{css:e$.layoutButton,"data-selected":e.templateLayout.value===l.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(l.Current)},children:(0,h.BX)(I.G,{css:e$.layoutButtonRow,children:[(0,h.BX)(I.G,{css:e$.layoutButtonText,children:[(0,h.tZ)(D.h4,{level:3,variant:"text",css:e$.layoutButtonHeader,children:"Current layout"}),(0,h.tZ)(D.xv,{variant:"small",children:r?"Same as saved layout":a})]}),(0,h.tZ)(eW,{css:e$.layoutPreview,layoutState:n})]})})]})}function eQ(e){var t=e.getCurrentLayoutState,n=eL("layout");return(0,h.tZ)(I.G,{css:e$.container,children:null==t?(0,h.tZ)(D.xv,{children:"Initial layouts may only be customized in the desktop environment."}):(0,h.tZ)(eK,{templateLayout:n,getCurrentLayoutState:t})})}var e0=n(79904),e1=n(22893),e2=n(22419),e3=n(48155),e4=n(30231),e8=n(16409),e6=n(54300),e5=n(62695),e7=n(96432),e9=n(73878),te=n(86466),tt=n(27840),tn=I.K.button,tr=function(){return(0,h.tZ)(I.G,{css:[P.l0.flex.row,P.l0.flex.grow(1),{borderTop:"1px solid ".concat(P.TV.outlineDimmest)}]})},ti=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,h.BX)(tn,{type:"button",css:[P.l0.reset.button,P.l0.position.relative,te.gU.nofill,t&&P.l0.backgroundColor.backgroundHigher,P.l0.p(4),P.l0.borderRadius(4)],onClick:i,disabled:o,children:[(0,h.tZ)(D.xv,{variant:"small",multiline:!1,children:r}),n?(0,h.tZ)(tt.Z,{size:6,strokeWidth:6,color:P.TV.foregroundDimmer,css:[P.l0.position.absolute,{top:2,right:-2}]}):null]})},to=n(33470),ta=n(43769),tl=n(42310),tc=n(39808),ts=n(41749),tu=n(9834),td=n.n(tu),tf=n(23522),tp=function(e){var t=e.repl,n=(0,ta.j3)(t),r=t.url?(0,ta.QB)(t):"",i=(0,tl.Z)({text:"Check out what I just made on Replit: ".concat(t.title),url:r});return(0,h.BX)(q.Tg,{background:"default",css:[P.l0.borderRadius(8),P.l0.overflow("hidden"),P.l0.colWithGap(16),P.l0.width(510),P.l0.p(16),P.l0.flex.growAndShrink(1),(0,R._)({},"@media (max-width: ".concat(B.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,h.BX)(I.G,{css:[P.l0.colWithGap(16)],children:[(0,h.tZ)(D.xv,{variant:"subheadBig",multiline:!1,children:"Share your Repl"})," ",(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.tZ)(D.xv,{variant:"small",css:[P.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,h.BX)(I.G,{css:[P.l0.rowWithGap(4),P.l0.align.center],children:[(0,h.tZ)(td(),(0,f._)((0,d._)({legacyBehavior:!0},n),{css:[P.l0.flex.growAndShrink(1)],children:(0,h.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:r})})),(0,h.tZ)(tf.m,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:r})]})]})]}),(0,h.tZ)(I.G,{css:[P.l0.rowWithGap(12),P.l0.justify.end,(0,R._)({alignItems:"flex-end"},P.BC.max("mobileMax"),[P.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:(0,h.tZ)(tc.Z,{prefetch:!1,href:i,iconLeft:(0,h.tZ)(ts.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,R._)({},P.BC.max("mobileMax"),[P.l0.mr(0)])]})})]})};function th(e){var t=e.error,n=e.dataCy;return t?(0,h.BX)(I.G,{css:[P.l0.rowWithGap(4),P.l0.align.center],children:[(0,h.tZ)(e6.Z,{css:[P.l0.color.accentNegativeStronger]}),(0,h.tZ)(D.xv,{css:[P.l0.flex.growAndShrink(1),P.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var tm=n(36335),tg=n(19078),tv=n(62477),ty=n(46954),tb=n(57785),tw=n(35574),tZ=n(44935),tx=n(89774);function tC(){var e=(0,et._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return tC=function(){return e},e}function tk(){var e=(0,et._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return tk=function(){return e},e}var tS={},t_=(0,en.Ps)(tC()),tT=(0,en.Ps)(tk(),t_),tE=I.K.div,tR=I.K.li,tD={searchValue:"",loading:!1,repls:[]};function tI(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,f._)((0,d._)({},e),{loading:!1,repls:(0,tb.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,f._)((0,d._)({},e),{loading:!0});case"searchValue":return(0,f._)((0,d._)({},e),{searchValue:t.searchValue})}}function tB(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function tA(e){var t,n=(0,g.useRef)(null);(0,tm.r)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&tB(e.selectedRepl)===e.inputValue?(0,h.tZ)(I.G,{css:[P.l0.px(8),P.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,h.tZ)(j.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,h.BX)(I.G,{css:[{position:"relative"}],children:[(0,h.BX)(tE,(0,f._)((0,d._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,h.tZ)(tZ.II,(0,d._)({css:[P.l0.pr(32),r&&P.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,h.tZ)(I.G,{css:[P.l0.center,P.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,h.tZ)(A.Z,{}):(0,h.tZ)(tx.Z,{})})]})),(0,h.tZ)(tE,(0,f._)((0,d._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,h.BX)(tg.Z,{children:[e.loading&&0===e.repls.length?(0,h.tZ)(tR,{css:[P.l0.center,P.l0.py(32)],children:(0,h.tZ)(A.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,h.tZ)(tR,{css:[P.l0.center,P.l0.py(32)],children:(0,h.tZ)(D.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,h.tZ)(tR,(0,f._)((0,d._)({},e.getItemProps({item:t,index:n})),{children:(0,h.tZ)(tv.Z,{taller:!0,filter:"",title:tB(t),subtitle:(0,tw.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,h.tZ)(j.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var tP=n(31089),tG=n(43133),tL=I.K.label,tN=(0,g.forwardRef)(function(e,t){return(0,h.tZ)(tL,(0,f._)((0,d._)({},e),{ref:t,css:P.l0.color.foregroundDimmer}))}),tO=function(){var e,t,n,r,i,o,a,l=(0,tP.U)()("repl"),c=eL("replId"),s=eL("iconUrl"),u=(t=(e=(0,p._)((0,g.useReducer)(tI,tD),2))[0],n=e[1],o=(r={variables:{search:(0,ty.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,d._)({},tS,r),ep.a(tT,i)).loading,(0,g.useEffect)(function(){o&&n({type:"loading"})},[o]),a=(0,g.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}),m=(0,tG.Kb)({id:l,items:u.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;u.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:tB});return(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.tZ)(tN,{css:P.l0.color.foregroundDimmer,htmlFor:l,children:"Repl"}),(0,h.tZ)(tA,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,f._)((0,d._)({},m.selectedItem),{iconUrl:s.value||m.selectedItem.iconUrl}):void 0,repls:u.repls,loading:u.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),u.setSearchValue("")),m.openMenu()}})]})},tU=function(){var e=(0,tP.U)(),t=e("replName"),n=e("replDescription"),r=eN(),i=r.replIdField,o=r.replTitleField,a=r.replDescriptionField,l=r.isSaving;return(0,h.BX)(I.G,{css:[P.l0.colWithGap(16),P.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,h.tZ)(tO,{}):null,(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.tZ)(I.G,{css:[P.l0.flex.row,P.l0.align.baseline,P.l0.justify.spaceBetween],children:(0,h.tZ)(tN,{css:[P.l0.color.foregroundDimmer,{lineHeight:P.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),o.value]}),(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.BX)(I.G,{css:[P.l0.flex.row,P.l0.align.baseline,P.l0.justify.spaceBetween],children:[(0,h.tZ)(tN,{css:[P.l0.color.foregroundDimmer,{lineHeight:P.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,h.BX)(D.xv,{multiline:!1,css:{color:a.value.length>1e3?P.TV.accentNegativeStronger:P.TV.foregroundDimmest},children:[a.value.length,"/",1e3]})]}),(0,h.tZ)(tZ.B,{id:n,value:a.value,disabled:!i.value||l,onChange:function(e){a.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[P.l0.minHeight(128),P.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),a.touched?(0,h.tZ)(th,{error:a.error,dataCy:"publish-form-repl-description-error"}):null]})]})},tM=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,h.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,h.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?P.TV.accentPrimaryDimmest:void 0},children:n}),(0,h.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,h.tZ)("rect",{width:"268",height:"17",fill:P.TV.backgroundDefault}),(0,h.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:P.TV.accentPositiveDimmer}),(0,h.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:P.TV.backgroundHighest}),(0,h.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:P.TV.backgroundHighest}),(0,h.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?P.TV.accentPrimaryDefault:P.TV.outlineDimmer}),t?(0,h.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:P.TV.white}):null,(0,h.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?P.TV.accentPrimaryDefault:P.TV.outlineDimmer,strokeWidth:"1"})]})]})},tX=n(62279),tF=n(82922),tW=n(35370),tV=I.K.ol,tH=I.K.li,tz=(0,tX.iv)([P.l0.py(4),P.l0.borderRadius(8),{border:"1px solid ".concat(P.TV.outlineDimmest),borderRadius:P.TV.borderRadius8,backgroundColor:te.vb.interactiveBackground,zIndex:P.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:P.TV.space8,listStyle:"none"}]),tj={backgroundColor:te.vb.interactiveBackgroundActive},tq={backgroundColor:P.TV.accentPrimaryDimmer},tJ=(0,tX.iv)([P.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,d._)({},tj),":active":(0,d._)({},tq)}}]);function tY(e){var t,n,r,i,o,a,l,c,s,u,m,v,y,b,w,x,C=e.fs,k=e.initiallySelectedFile,S=e.onFileSelect,_=e.onClear,T=(0,g.useRef)(null),E=(n=(t=(0,p._)((0,g.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,g.useEffect)(function(){function e(){return(e=(0,L._)(function(){var e,t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,tW.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[C]),(0,d._)({},n)),R=E.isLoading,B=E.files,A=E.error,G=(o=(i={files:B,inputRef:T,initiallySelectedFile:k}).files,a=i.inputRef,l=i.initiallySelectedFile,s=(c=(0,p._)((0,g.useState)(!1),2))[0],u=c[1],v=(m=(0,p._)((0,g.useState)(o),2))[0],y=m[1],b=(0,g.useCallback)(function(e){return o.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[o]),w=(0,tG.Kb)({items:v,isOpen:s,initialInputValue:l,initialSelectedItem:v.find(function(e){return e===l}),onIsOpenChange:function(e){u(!!e.isOpen)},onInputValueChange:function(e){var t;y(b(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),x=(0,g.useCallback)(function(){var e;u(!1),null===(e=a.current)||void 0===e||e.blur()},[a]),(0,g.useEffect)(function(){var e;y(b(null!==(e=w.inputValue)&&void 0!==e?e:""))},[o,b,w.inputValue]),(0,g.useEffect)(function(){w.selectedItem&&x()},[w.selectedItem,x]),(0,f._)((0,d._)({},w),{closeMenu:x,items:v})),O=(0,Z.Z)(S);return(0,g.useEffect)(function(){G.selectedItem&&O.current(G.selectedItem)},[G.selectedItem,O]),(0,h.BX)(I.G,{children:[(0,h.tZ)(I.G,(0,f._)((0,d._)({},G.getComboboxProps({refKey:"innerRef"})),{css:[P.l0.position.relative],children:(0,h.tZ)(tF.E,(0,f._)((0,d._)({},G.getInputProps({onFocus:G.openMenu,ref:T,refKey:"inputRef",disabled:R,placeholder:"Search your files"})),{onClear:function(){var e;G.reset(),null===(e=T.current)||void 0===e||e.focus(),_()},loading:R}))})),(0,h.BX)(I.G,(0,f._)((0,d._)({},G.getMenuProps({refKey:"innerRef"})),{css:[P.l0.position.relative],children:[A?(0,h.tZ)(I.G,{css:[P.l0.p(8)],children:(0,h.tZ)(D.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!A&&G.isOpen?(0,h.tZ)(tV,{css:[tz],children:G.items.length>0?G.items.map(function(e,t){return(0,h.tZ)(tH,(0,f._)((0,d._)({css:[tJ,G.highlightedIndex===t&&tj,e===G.selectedItem&&tq]},G.getItemProps({item:e,index:t,onClick:function(){G.closeMenu()}})),{children:(0,h.tZ)(D.xv,{multiline:!1,children:e})}),e)}):(0,h.tZ)(tH,{css:[P.l0.p(8)],children:(0,h.BX)(D.xv,{multiline:!1,children:['No files found for "',G.inputValue,'"']})})}):null]}))]})}var t$=function(e){var t=(0,g.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:t,accept:z.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tK=function(e){var t=t$(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,h.BX)(h.HY,{children:[(0,h.tZ)("input",(0,f._)((0,d._)({},n),{css:{display:"none"}})),e.children(r)]})},tQ=n(11782),t0=n(9602),t1=n(58532),t2=n(89882);n(81253);var t3=n(19602),t4=n(99609);n(35328);var t8=(0,tX.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function t6(e){var t=e.src,n=e.alt;return(0,h.BX)(I.G,{css:[t8,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,h.tZ)(tQ.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,h.tZ)(I.G,{css:[t8,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var t5=n(3615),t7=[{value:c.ReplImage,text:"Photo"},{value:c.ReplFile,text:"File"}],t9=function(e){var t,n,r,i,o,a,l=e.fs,s=(0,tP.U)(),u=s("coverPage"),m=eN(),v=m.selectedRepl,y=m.coverFileField,b=m.coverUrlField,w=m.coverDefaultViewField,Z=(0,p._)((t=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,k.uploadImage(t,t4.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},i=(r=(0,p._)((0,g.useState)(!1),2))[0],o=r[1],a=(0,g.useRef)(0),[i,(0,g.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),a.current++,o(!0)},onDragLeave:function(e){e.preventDefault(),a.current--,0===a.current&&o(!1)},onDrop:function(e){e.preventDefault(),a.current=0,o(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),x=Z[0],C=Z[1],k=$(b.setValue);return(0,h.BX)(I.G,(0,f._)((0,d._)({css:[P.l0.colWithGap(16)]},C),{children:[(0,h.BX)(I.G,{css:P.l0.colWithGap(12),children:[(0,h.tZ)(I.G,{css:[P.l0.rowWithGap(8)],children:(0,h.tZ)(t5.E,{tag:"fieldset",css:[P.l0.rowWithGap(24)],name:u,value:w.value,onChange:function(e){eR(e.target.value)&&w.setValue(e.target.value)},children:t7.map(function(e){return(0,h.BX)(I.G,{css:[P.l0.rowWithGap(8)],children:[(0,h.tZ)(t5.Y,{id:s(e.value),value:e.value}),(0,h.tZ)("label",{htmlFor:s(e.value),children:e.text})]},e.value)})})}),w.value===c.ReplImage&&(0,h.BX)(I.G,{css:[P.l0.colWithGap(4),P.l0.align.center],children:[(0,h.tZ)(tK,{onFile:function(e){return k.uploadImage(e,t4.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,h.tZ)(e0.zx,{onClick:t,colorway:x?"primary":void 0,text:"Upload a cover photo",iconLeft:k.isLoading?(0,h.tZ)(A.Z,{}):(0,h.tZ)(t2.Z,{}),stretch:!0})}}),k.error?(0,h.tZ)(e1.E,{colorway:"negative",icon:(0,h.tZ)(e6.Z,{}),text:k.error}):null,(0,h.tZ)(D.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),w.value===c.ReplFile&&(0,h.BX)(I.G,{css:[P.l0.colWithGap(8)],children:[(0,h.tZ)(tY,{fs:l,initiallySelectedFile:y.value,onFileSelect:y.setValue,onClear:function(){return y.setValue("")}},null==v?void 0:v.id),(0,h.tZ)(th,{error:y.error})]})]}),w.value===c.ReplImage&&(0,h.BX)(tM,{active:x,showPlayButton:w.value===c.ReplImage&&!!b.value&&!k.isLoading,children:[w.value===c.ReplImage&&b.value?(0,h.tZ)(t6,{src:b.value,alt:"cover"}):null,k.isLoading?(0,h.tZ)(I.G,{css:[{position:"absolute",inset:0},P.l0.align.center,P.l0.justify.center],children:(0,h.tZ)(A.Z,{color:P.TV.white,size:24})}):null]})]}))},ne=n(7935),nt=function(){eL("iconUrl");var e=eN(),t=e.replIconInput,n=e.replIconUrl;return(0,h.BX)(I.G,{css:[P.l0.colWithGap(16),P.l0.align.center],children:[(0,h.BX)(I.G,{css:[P.l0.colWithGap(8)],children:[(0,h.BX)(I.G,{css:[P.l0.rowWithGap(8)],children:[(0,h.tZ)(tK,{onFile:function(e){return t.uploadImage(e,t4.N.ReplIcon)},css:P.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,h.tZ)(e0.zx,{onClick:t,text:"Upload image",iconLeft:(0,h.tZ)(t2.Z,{}),css:[P.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,h.tZ)(I.G,{children:(0,h.tZ)(e1.E,{icon:(0,h.tZ)(e6.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,h.tZ)(j.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[P.l0.backgroundColor.backgroundHigher]})]})},nn=function(){return(0,h.tZ)(I.G,{css:[P.l0.colWithGap(8)],children:(0,h.tZ)(I.G,{children:(0,h.BX)(D.xv,{children:["See the"," ",(0,h.tZ)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,h.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nr=n(29626),ni=n(76547),no=I.K.ul,na=I.K.li;function nl(e){var t=e.children;return(0,h.tZ)(I.G,{css:[P.l0.px(8),P.l0.pt(8)],children:(0,h.tZ)(D.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function nc(e){var t=e.highlighted,n=e.tag;return(0,h.tZ)(I.G,{css:[P.l0.rowWithGap(8),P.l0.p(8),t&&{backgroundColor:te.gU.listItem["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,h.BX)(I.G,{css:[P.l0.flex.growAndShrink(1),P.l0.rowWithGap(4),P.l0.align.center],children:[(0,h.tZ)(D.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,h.tZ)(ni.Z,{}):null]})})}var ns=g.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,h.tZ)(tg.Z,{css:[P.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,h.BX)(na,{children:[(0,h.tZ)(nl,{children:r.title}),(0,h.tZ)(no,{css:[P.l0.pt(4),P.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,h.tZ)(na,(0,f._)((0,d._)({},t({item:r,index:i})),{children:(0,h.tZ)(nc,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});ns.displayName="TagsMenu";var nu=n(16152);function nd(){var e=(0,et._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return nd=function(){return e},e}function nf(){var e=(0,et._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return nf=function(){return e},e}var np={},nh=(0,en.Ps)(nd()),nm=(0,en.Ps)(nf(),nh),ng=/^[0-9a-zA-Z]+$/,nv=function(e){return e.id},ny=n(30043),nb=I.K.div,nw=I.K.input,nZ=(0,tX.iv)([P.l0.fontSize(12),P.l0.pl(24),P.l0.pr(8),P.l0.py(4)]);function nx(){return(0,h.tZ)(D.xv,{multiline:!1,css:[P.l0.px(4),P.l0.flex.row,P.l0.align.center,P.l0.position.absolute,P.l0.height("100%"),P.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,h.tZ)(ny.Z,{size:12})})}function nC(e){var t=e.text,n=e.children;return(0,h.BX)(q.Tg,{elevated:!0,css:[P.l0.position.relative,P.l0.minWidth(30),P.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:P.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,h.tZ)(nx,{}),(0,h.tZ)(D.xv,{css:[{visibility:"hidden"},nZ],multiline:!1,children:t}),n]})}function nk(e){var t,n,r,i,o,a,l,c,s,u,m,v,y,b,w,x,C,k,S,_,T=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,o=e.setInputValue,a=(0,ty.Z)(i,100),l=(0,Z.Z)(n),k=(s=(c={search:a,filter:void 0===r?function(){return!0}:r}).search,u=c.filter,v=(m=(0,d._)({},np,{variables:{limit:s?10:3,search:s}}),ep.a(nm,m)).data,b=(y=(0,p._)((0,g.useState)({official:[],community:[],newTag:[]}),2))[0],w=y[1],x=(0,g.useMemo)(function(){if(v){var e=[],t=[],n=new Set,r=!0,i=!1,o=void 0;try{for(var a,l=v.tagGroups.official[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;n.add(c.id.toLowerCase()),u(c)&&e.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var d=!0,f=!1,p=void 0;try{for(var h,m=v.tagGroups.community[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;n.add(g.id.toLowerCase()),u(g)&&t.push(g)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}var y=t.find(function(e){return e.id===s}),b=!s||y||n.has(s.toLowerCase())?void 0:{id:s,isOfficial:!1};return{official:e,community:t,newTag:b&&u(b)?[b]:[]}}},[v,u,s]),(0,g.useEffect)(function(){if(x){var e=x.official,t=x.community,n=x.newTag;w(function(r){return{official:(0,tb.Z)(e,{existing:r.official,getKey:nv}),community:(0,tb.Z)(t,{existing:r.community,getKey:nv}),newTag:n}})}},[x]),C={tagGroups:b,reset:function(){w({official:[],community:[],newTag:[]})}}).tagGroups,S=C.reset,_=(0,tG.Kb)({inputValue:i,items:(0,eq._)(k.official).concat((0,eq._)(k.community),(0,eq._)(k.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),o(""),_.reset(),_.openMenu())}}),(0,nu.Z)(function(){_.selectedItem&&l.current(_.selectedItem)},[_.selectedItem]),{tagGroups:k,combobox:_,onChange:function(e){var t=e.currentTarget.value;(!t||ng.test(t))&&!(t.length>30)&&o(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),E=T.combobox,R=T.tagGroups,D=T.onChange,B=T.onKeyDown,A=(0,g.useMemo)(function(){var e;return e=[],(R.official.length&&e.push({title:"Official Tags",tags:R.official}),R.community.length&&e.push({title:"Community Tags",tags:R.community}),R.newTag.length&&e.push({title:"Create new tag",tags:R.newTag}),0===e.length)?null:{type:"sections",sections:e}},[R]),G="Add tag";return(0,h.BX)(I.G,{children:[(0,h.tZ)(nb,(0,f._)((0,d._)({},E.getComboboxProps()),{css:[P.l0.flex.row],children:(0,h.tZ)(nC,{text:E.inputValue||G,children:(0,h.tZ)(nw,(0,d._)({css:[P.l0.coverContainer,nZ,P.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":P.l0.color.foregroundDefault,"&:focus::placeholder":P.l0.color.foregroundDimmest}]},E.getInputProps({placeholder:G,onChange:D,onKeyDown:B,onFocus:function(){E.openMenu()}})))})})),(0,h.tZ)(nb,(0,f._)((0,d._)({},E.getMenuProps()),{css:[P.l0.position.relative],children:A&&E.isOpen?(0,h.tZ)(ns,{getItemProps:E.getItemProps,highlightedIndex:E.highlightedIndex,data:A}):null}))]})}function nS(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,o=t.map(function(e){return e.id}),a=(0,p._)((0,g.useState)(""),2),l=a[0],c=a[1];return(0,h.BX)(I.G,{css:[P.l0.flex.row,P.l0.flex.wrap,{margin:"calc(-1 * ".concat(P.TV.space4,")")}],children:[t.map(function(e,t){return(0,h.tZ)(I.G,{css:[P.l0.m(4)],children:(0,h.tZ)(nr.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,h.tZ)(I.G,{css:[P.l0.m(4)],children:(0,h.tZ)(nk,{onSelect:r,filter:function(e){return!o.includes(e.id.toLowerCase())},inputValue:l,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),i(e))}})}):null]})}var n_=function(){var e=eL("tags");return(0,h.BX)(I.G,{css:[P.l0.colWithGap(8)],children:[(0,h.tZ)(I.G,{css:[P.l0.colWithGap(4)],children:(0,h.tZ)(nS,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,eq._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,eq._)(e.value.slice(0,t)).concat((0,eq._)(e.value.slice(t+1))))}})}),(0,h.BX)(I.G,{css:P.l0.rowWithGap(4),children:[(0,h.tZ)(D.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,h.BX)(D.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},nT=n(37782),nE=n(62699),nR=n(8445),nD=n(38163),nI=n(57865),nB=n(76881),nA=n(45250),nP=(0,eU.X)({rootContainer:[(0,R._)({},(0,e5.et)("tabletMin"),{display:"flex"}),P.l0.flex.growAndShrink(1),P.l0.p(16),P.l0.colWithGap(12),P.l0.align.center,P.l0.display.none],heading:[P.l0.width("100%"),{fontWeight:P.TV.fontWeightMedium}],contentContainer:[P.l0.width("100%"),P.l0.maxWidth(432),P.l0.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+P.TV.backgroundRoot+", inset 0 -48px 24px -24px "+P.TV.backgroundRoot},feed:[P.l0.height(416),P.l0.colWithGap(24),P.l0.justify.center,P.l0.overflow("hidden"),P.l0.backgroundColor.backgroundRoot],loadingContainer:[P.l0.flex.grow(1),P.l0.align.center,P.l0.justify.center]}),nG=I.K.form,nL=function(e){var t=e.user,n=eN(),r=n.selectedRepl,i=n.replTitleField,o=n.replDescriptionField,a=n.replIconUrl,l=n.tagsField;return(0,h.BX)(q.Tg,{background:"root",css:nP.rootContainer,children:[(0,h.tZ)(D.xv,{multiline:!1,variant:"small",color:"dimmer",css:nP.heading,children:"Preview"}),(0,h.BX)(I.G,{css:nP.contentContainer,children:[(0,h.tZ)(I.G,{css:nP.topShadow}),(0,h.BX)(I.G,{css:nP.feed,children:[(0,h.tZ)(to.O,{}),r&&a?(0,h.tZ)(to.Z,{post:{user:t,repl:(0,f._)((0,d._)({},r),{title:i.value,iconUrl:a,tags:l.value,description:o.value,isTemplate:!0})}}):(0,h.tZ)(I.G,{css:nP.loadingContainer,children:(0,h.tZ)(A.Z,{})}),(0,h.tZ)(to.O,{})]})]})]})},nN=["Basics","Tags","Icon","Cover page","Layout","Publishing"],nO=(0,eU.X)({rootContainer:[P.l0.borderRadius(8),P.l0.flex.row,P.l0.overflow("hidden"),(0,R._)({},(0,e5.et)("tabletMax"),{minWidth:850})],formContainer:[P.l0.colWithGap(12),P.l0.p(16),P.l0.minWidth(320),P.l0.flex.growAndShrink(1),(0,R._)({},(0,e5.et)("tabletMin"),{maxWidth:370})],form:[P.l0.colWithGap(16),P.l0.flex.growAndShrink(1)],formSections:[P.l0.rowWithGap(4),P.l0.align.center],formSectionsNavigation:[P.l0.flex.growAndShrink(1)],loadingContainer:[P.l0.rowWithGap(4),P.l0.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(P.TV.accentPrimaryDimmer," !important")}]});function nU(e){var t,n,r,i,o,a,s,u,f,m,v,y,b,w,x,C,k,S,T,E,R,B,G,M=e.replId,X=e.currentUser,F=e.source,W=e.getDesktopLayoutState,H=(t=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!eX)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eX.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==e9.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),z=(0,U.d)({tablet:!0}),j=(0,O.P5)({type:"boolean",controlName:"flag-template-layout-author"}),J=!z&&j&&null!=W,Y=function(e){var t,n,r,i,o,a,c,s,u=(0,V.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),f=(t={variables:{id:u.value||""},skip:!u.value},n=(0,d._)({},em,t),ep.a(eg,n)),h=(null===(r=f.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?f.data.repl:null,m=!!(null==h?void 0:h.publishedAs),v=(0,V.Y)("",eA),y=(0,V.Y)("",eP),b=(0,V.Y)(null,function(){return null}),w=(0,V.Y)("repl_image",function(){return null}),x=(0,V.Y)(null,function(){return null}),C=(0,V.Y)("",e.fileValidator),k=(0,V.Y)([],function(){return null}),S=(0,V.Y)(l.Default,function(){}),T=function(){var e,t=(0,p._)((e=(0,d._)({},ex,void 0),ei.D(eC,e)),2),n=t[0],r=t[1];function i(){return(i=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:ek(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:ek(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),E=function(){var e,t=(0,p._)((e=(0,d._)({},ey,void 0),ei.D(eb,e)),2),n=t[0],r=t[1];function i(){return(i=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:ew(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:ew(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),R=function(){var e,t=(0,p._)((e=(0,d._)({},e_,void 0),ei.D(eT,e)),2),n=t[0],r=t[1];function i(){return(i=(0,L._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:eE(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&eE(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),D=ef(),I=(null==h?void 0:null===(i=h.replViewSettings)||void 0===i?void 0:i.defaultView)&&eR(h.replViewSettings.defaultView)?h.replViewSettings.defaultView:"repl_image",B=(0,Z.Z)(v.setValue),A=(0,Z.Z)(y.setValue),P=(0,Z.Z)(k.setValue),G=(0,Z.Z)(b.setValue),O=(0,Z.Z)(x.setValue),U=(0,Z.Z)(w.setValue),M=(0,Z.Z)(C.setValue);(0,g.useEffect)(function(){var e,t,n,r;h&&(U.current(I),M.current(null!==(t=null===(e=h.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),B.current(h.isRenamed?h.title:"",{preventTouch:!0}),A.current(null!==(n=h.description)&&void 0!==n?n:"",{preventTouch:!0}),P.current(h.tags),G.current(h.iconUrl.endsWith(".svg")?null:h.iconUrl),O.current(null!==(r=h.imageUrl)&&void 0!==r?r:null))},[h,O,G,P,B,A,I,U,M]);var X=$(b.setValue),F=X.previewUrl||b.value||(null==h?void 0:h.iconUrl)||(null==h?void 0:h.templateInfo.iconUrl),W=null!==(s=null===(c=[u,v,y,b,w,x,k,C,S].filter(function(e){return(e!==C||"repl_file"===w.value)&&e.error}))||void 0===c?void 0:null===(a=c[0])||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)&&void 0!==s?s:null;function H(){return(H=(0,L._)(function(){var e,t,n,r,i,o,a,l,c,s,u;return(0,N.Jh)(this,function(d){switch(d.label){case 0:if(!h)throw new eD("Missing repl");if(t=h.title!==v.value,n=h.description!==y.value,r=h.iconUrl!==b.value,i="repl_image"===w.value&&h.imageUrl!==x.value,o=C.value&&"repl_file"===w.value&&(null===(e=h.replViewSettings)||void 0===e?void 0:e.replFile)!==C.value,a=w.value&&I!==w.value,l=!Q()(h.tags,k.value),!(t||n||r))return[3,2];if(v.error||y.error||b.error)throw new eD;return[4,R.updateRepl({id:h.id,title:t?v.value:void 0,description:n?y.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((c=d.sent()).error)throw new eI(c.error);d.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===w.value&&x.error||"repl_file"===w.value&&C.error)throw new eD;return[4,T.setReplViewSettings({replId:h.id,defaultView:"repl_image"===w.value?ee.bV.ReplImage:ee.bV.ReplFile,replImage:i?x.value:void 0,replFile:o?C.value:void 0})];case 3:if((s=d.sent()).error)throw new eI(s.error);d.label=4;case 4:if(!l)return[3,6];if(k.error)throw new eD;return[4,E.setReplTags({replId:h.id,tags:k.value.map(function(e){return e.id})})];case 5:if((u=d.sent()).error)throw new eI(u.error);d.label=6;case 6:return[2]}})})).apply(this,arguments)}function z(){return(z=(0,L._)(function(){var t,n,r;return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(!h)throw new eD("Missing repl");if(W)throw new eD(null!=W?W:"Something went wrong");return t=null,e.canAuthorTemplateLayout&&S.value===l.Current&&(t=null===(n=e.getDesktopLayoutState)||void 0===n?void 0:n.call(e)),[4,D.createDeployment({input:{replId:h.id,description:y.value,iconUrl:F||h.iconUrl,initialLayoutState:t}})];case 1:if((r=i.sent()).error)throw new eB(r.error);return(0,_.j)(_.U3.POST_MADE,{source:e.source,replType:"template_repl",title:v.value,description:y.value,tags:k.value.map(function(e){return e.id}),defaultView:w.value}),[2]}})})).apply(this,arguments)}var j=R.loading||T.loading||E.loading,q=R.error||T.error||E.error,J=D.loading,Y=D.error;return{selectedRepl:h,isReplLoading:f.loading,replLoadingError:f.error,replIdField:u,replTitleField:v,replDescriptionField:y,iconUrlField:b,coverDefaultViewField:w,coverUrlField:x,coverFileField:C,layoutField:S,tagsField:k,replIconInput:X,replIconUrl:F,inputError:W,save:function(){return H.apply(this,arguments)},isSaving:j,savingError:q,publishInitialRelease:function(){return z.apply(this,arguments)},isPublishing:J,publishingError:Y,isPublished:m}}({replId:M,fileValidator:H,source:F,canAuthorTemplateLayout:J,getDesktopLayoutState:W}),K=Y.selectedRepl,et=Y.isReplLoading,en=Y.replLoadingError,er=Y.replIdField,eo=Y.replTitleField,ea=Y.replDescriptionField,el=Y.iconUrlField,ec=Y.tagsField,es=Y.coverDefaultViewField,eu=Y.coverUrlField,ed=Y.coverFileField,eh=Y.layoutField,ev=Y.save,eZ=Y.isSaving,eS=Y.savingError,eL=Y.publishInitialRelease,eN=Y.isPublishing,eO=Y.publishingError,eU=Y.isPublished,eM=(r=(n={repl:K,currentUser:X}).repl,i=n.currentUser,a=(o=(0,p._)((0,nB.qg)(),2))[0],s=o[1],u=(0,nB.ic)(),m=(f=(0,p._)((0,g.useState)(function(){var e,t,n;return e=(0,nT.ZP)({onUnrecoverableError:(0,nI.Z)({throwBsod:s,origin:"Publish: services/onUnrecoverableError"})}),t=(0,nD.Z)({container:e}),n=(0,nA.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,v=f.fs,y=f.dotReplit,w=(b=(0,p._)((0,g.useState)(function(){return m.getConnectionState()===nT.em.CONNECTED}),2))[0],x=b[1],C=(0,nE.b)(r?{repl:r,currentUser:i}:null),k=(0,nR.S)(),(0,g.useEffect)(function(){if(r&&C&&m.getConnectionState()===nT.em.DISCONNECTED)return m.connect({context:C,getMinimumRetryDelayMs:k}),function(){return m.close()}},[r,m,C]),(0,g.useEffect)(function(){return m.onConnectionStateChanged(function(e){x(e===nT.em.CONNECTED)})},[m]),{isConnected:w,container:m,fs:v,dotReplit:y,bsodId:null==a?void 0:a.eventId,devClearBsod:function(){return u()}}),eX=eM.fs,eF=eM.dotReplit,eW=eM.bsodId,eV=J&&!eU?[]:["Layout"],eH=(0,p._)((0,g.useState)(0),2),ez=eH[0],ej=eH[1],eq=nN[ez],eJ=ez===nN.length-1,eY=(0,p._)((0,g.useState)({show:!1,isUpdate:!1}),2),e$=eY[0],eK=eY[1],e5=(0,p._)((0,g.useState)(function(){return Array(nN.length).fill(!1)}),2),te=e5[0],tt=e5[1],tn=(0,g.useCallback)(function(e,t){te[e]=t,tt(te)},[te]);(0,g.useEffect)(function(){Y.replTitleField.value&&Y.replDescriptionField.value?tn(0,!0):tn(0,!1),Y.tagsField.value.length>0?tn(1,!0):tn(1,!1),Y.iconUrlField.value?tn(2,!0):tn(2,!1),Y.coverDefaultViewField.value===c.ReplImage&&Y.coverUrlField.value||Y.coverDefaultViewField.value===c.ReplFile&&Y.coverFileField.value?tn(3,!0):tn(3,!1)},[te,Y,tn]);var to=(T=(S=(0,p._)((0,g.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],E=S[1],(0,g.useEffect)(function(){function e(){return(e=(0,L._)(function(){var e,t,n;return(0,N.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eF.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return E({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),E({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eF]),(0,d._)({},T));(0,g.useEffect)(function(){to.isLoading||!to.entryPoint||ed.value||ed.setValue(to.entryPoint)},[to.isLoading,to.entryPoint,ed]);var ta=(0,p._)((0,g.useState)(!1),2),tl=ta[0],tc=ta[1];(0,g.useEffect)(function(){tl||M&&(et||eU)||(tc(!0),(0,_.j)(_.U3.PUBLISH_SELECTED,{source:F}))},[tl,F,M,et,eU]);var ts=(0,Z.Z)(!!((null==K?void 0:K.publishedAs)||(null==K?void 0:K.lastPublishedAt))),tu=(0,Z.Z)(eq);if((0,g.useEffect)(function(){return function(){ts.current||(0,_.j)(_.U3.PUBLISH_FLOW_EXITED,{source:F,lastSectionVisited:tu.current})}},[F,ts,tu]),eW)return(0,h.tZ)(e7.Z,{});if(e$.show&&K)return(0,h.tZ)(tp,{repl:K});var td={Basics:{hasError:!!(er.error||eo.error||ea.error),isValid:(0,L._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([er.validate(),eo.validate(),ea.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!ec.error,isValid:(0,L._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,ec.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!el.error,isValid:(0,L._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,el.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(es.value===c.ReplImage?eu.error:ed.error),isValid:(0,L._)(function(){var e;return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(es.value!==c.ReplImage)return[3,2];return[4,eu.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,ed.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!eh.error,isValid:(0,L._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,eh.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,L._)(function(){return(0,N.Jh)(this,function(e){return[2,!0]})})}},tf=td[eq].hasError,th=td[eq].isValid,tm=null!==(G=nN.find(function(e){return td[e].hasError}))&&void 0!==G?G:null,tg=null;K?en||eS||eO?tg="Something went wrong - please try again":tf&&(tg="Please fill out the the form"):tg="Please select a Repl";var tv=!!(!K||tf||en||et||eZ||eN),ty=(R=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(t=tv)return[3,2];return[4,th()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];if(!eV.includes(nN[e]))return[3,4];return[4,ty(e+1)];case 3:case 6:return n.sent(),[2];case 4:return n.trys.push([4,6,,7]),ej(e),[4,ev()];case 5:return n.sent(),[3,7];case 7:return[2]}})}),function(e){return R.apply(this,arguments)}),tb=ez>0;return(0,h.tZ)(eG.Provider,{value:Y,children:(0,h.BX)(q.Tg,{css:nO.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,h.BX)(I.G,{css:nO.formContainer,children:[(0,h.tZ)(D.xv,{variant:"subheadBig",multiline:!1,children:eU?"Edit publish settings":"Publish template"}),(0,h.BX)(nG,{onSubmit:(B=(0,L._)(function(e){var t,n,r,i,o,a;return(0,N.Jh)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!eJ)return[3,13];t=!0,n=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nN[Symbol.iterator](),l.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return[4,td[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(eU)return[3,10];return[4,eL()];case 9:return l.sent(),eK({show:!0,isUpdate:!1}),[3,12];case 10:return[4,ev()];case 11:l.sent(),eK({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:ty(ez+1),l.label=14;case 14:return[2]}})}),function(e){return B.apply(this,arguments)}),css:nO.form,children:[(0,h.tZ)(I.G,{css:nO.formSections,children:nN.map(function(e,t){return eV.includes(e)?null:(0,h.BX)(g.Fragment,{children:[0!==t&&(0,h.tZ)(tr,{}),(0,h.tZ)(ti,{isActive:ez===t,isComplete:te[t],onClick:function(){return ty(t)},disabled:tv,children:e})]},e)})}),(0,h.BX)(I.G,{css:nO.formSectionsNavigation,children:["Basics"===eq&&(0,h.tZ)(tU,{}),"Tags"===eq&&(0,h.tZ)(n_,{}),"Icon"===eq&&(0,h.tZ)(nt,{}),"Cover page"===eq&&(0,h.tZ)(t9,{fs:eX}),"Layout"===eq&&(0,h.tZ)(eQ,{getCurrentLayoutState:W}),"Publishing"===eq&&(0,h.tZ)(nn,{})]}),(0,h.BX)(I.G,{children:[eJ&&tm&&tm!==eq?(0,h.tZ)(e1.E,{colorway:"negative",icon:(0,h.tZ)(e6.Z,{}),text:"Please fix error in ".concat(tm," section")}):null,eS?(0,h.tZ)(e1.E,{colorway:"negative",icon:(0,h.tZ)(e6.Z,{}),text:eS}):null,eO?(0,h.tZ)(e1.E,{colorway:"negative",icon:(0,h.tZ)(e6.Z,{}),text:eO}):null]}),(0,h.BX)(I.G,{css:[P.l0.rowWithGap(8),P.l0.align.center,tb?P.l0.justify.spaceBetween:P.l0.justify.end],children:[tb?(0,h.tZ)(e0.zx,{type:"button",iconLeft:(0,h.tZ)(e3.Z,{}),disabled:tv,onClick:function(){return ty(ez-1)},text:"Back"}):null,eZ?(0,h.tZ)(I.G,{css:nO.loadingContainer,children:(0,h.tZ)(A.Z,{})}):null,(0,h.BX)(e2.u,{tooltip:tg,placement:"bottom",isDisabled:!tg,children:[!eJ&&(0,h.tZ)(e0.zx,{type:"submit",colorway:"primary",iconLeft:(0,h.tZ)(e4.Z,{}),disabled:tv,text:"Next",dataCy:"publish-form-next-button"}),eJ&&!eU?(0,h.tZ)(e0.zx,{type:"submit",colorway:"primary",css:nO.submitButton,iconLeft:eN?(0,h.tZ)(A.Z,{}):(0,h.tZ)(e8.Z,{}),disabled:!!(tv||tm),text:"Submit",dataCy:"publish-form-publish-button"}):null,eJ&&eU?(0,h.tZ)(e0.zx,{type:"submit",colorway:"primary",iconLeft:eN?(0,h.tZ)(A.Z,{}):(0,h.tZ)(e8.Z,{}),disabled:!!(tv||tm),text:"Save"}):null]})]})]})]}),(0,h.tZ)(nL,{user:X})]})})}var nM=(0,eU.X)({loadingContainer:[P.l0.center,P.l0.p(32),P.l0.width(512),(0,R._)({},"@media (max-width: ".concat(B.j.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[P.l0.center,P.l0.p(32)]});function nX(e){var t,n,r=e.replId,i=e.source,o=e.getDesktopLayoutState,a=(0,G.NH)(),l=(null===(n=a.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?a.data.currentUser:null;return a.loading?(0,h.tZ)(I.G,{css:nM.loadingContainer,children:(0,h.tZ)(A.Z,{})}):a.error||!l?(0,h.tZ)(I.G,{css:nM.errorContainer,children:(0,h.tZ)(D.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,h.tZ)(nU,{source:i,replId:r,currentUser:l,getDesktopLayoutState:o})}function nF(){var e=(0,et._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return nF=function(){return e},e}var nW={},nV=(0,en.Ps)(nF()),nH=n(31718),nz=n(87915),nj=n(72748),nq=n(68140);function nJ(){var e=(0,et._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nJ=function(){return e},e}var nY={},n$=(0,en.Ps)(nJ()),nK=I.K.form;function nQ(e){if(0===e.length)return{message:"You cannot leave this empty."}}function n0(e){var t,n,r=e.changeType;return r===ee.J5.NewFile?(t=P.TV.accentPositiveStronger,n="Added"):r===ee.J5.DeletedFile?(t=P.TV.accentNegativeStronger,n="Deleted"):(t=P.TV.foregroundDefault,n="Changed"),(0,h.tZ)(D.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}var n1=(0,eU.X)({loadingContainer:[P.l0.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:P.TV.space8}],item:[P.l0.rowWithGap(4),P.l0.align.center]});function n2(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,h.tZ)(I.G,{css:n1.loadingContainer,children:(0,h.tZ)(A.Z,{})});if(t.error)return(0,h.tZ)(e1.E,{icon:(0,h.tZ)(e6.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,h.tZ)(D.xv,{children:"No file changes to publish."});var r=t.pendingChanges,i=r.slice(0,15);return(0,h.BX)(I.G,{css:n1.container,children:[i.map(function(e){return(0,h.BX)(g.Fragment,{children:[(0,h.BX)(I.G,{css:n1.item,children:[(0,h.tZ)(nz.Z,{size:12,path:e.fileName}),(0,h.tZ)(D.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,h.tZ)(n0,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,h.BX)(D.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var n3=(0,eU.X)({header:[P.l0.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:P.TV.space8}],activeLabel:[P.l0.p(4),{display:"flex"}]});function n4(e){var t,n=e.repl,r=function(){var e,t=(0,p._)((e=(0,d._)({},nY,{refetchQueries:["ReplEnvironmentHeader"]}),ei.D(n$,e)),2),n=t[0];function r(){return(r=(0,L._)(function(e){var t;return(0,N.Jh)(this,function(r){switch(r.label){case 0:return[4,n({variables:{input:e.input}})];case 1:return[2,{data:(t=r.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return r.apply(this,arguments)},state:t[1]}}(),i=(t=(0,L._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:return[4,r.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return(0,h.BX)(I.G,{children:[(0,h.tZ)(D.h4,{level:1,variant:"subheadBig",css:n3.header,children:"Existing Releases"}),(0,h.tZ)(I.G,{css:n3.grid,children:n.releases.items.map(function(e){var t,r;return(0,h.BX)(g.Fragment,{children:[(0,h.tZ)("span",{children:(0,nj.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,h.tZ)("span",{children:e.description}),(0,h.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=n.deployment)||void 0===r?void 0:null===(t=r.activeRelease)||void 0===t?void 0:t.id)?(0,h.tZ)("span",{css:n3.activeLabel,children:"(active)"}):(0,h.tZ)(e0.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(){i(e.id)}})})]},e.id)})})]})}var n8=(0,eU.X)({container:[P.l0.colWithGap(24),P.l0.p(16)],modifiedContainer:[P.l0.colWithGap(8)],layoutContainer:[P.l0.colWithGap(8)],descriptionContainer:[P.l0.colWithGap(4)],descriptionLabel:[P.l0.color.foregroundDimmer,{fontSize:P.TV.fontSizeSmall,lineHeight:P.TV.lineHeightSmall}],descriptionInput:[P.l0.width("100%"),P.l0.minHeight(64),P.l0.maxHeight(128),{resize:"vertical"}],footerContainer:[P.l0.rowWithGap(12),P.l0.justify.end],existingReleasesContainer:[P.l0.p(16),P.l0.colWithGap(16)]});function n6(e){var t,n,r,i,o,a,c,s,u,m,v,y,b=e.repl,w=e.getDesktopLayoutState,Z=(0,tP.U)(),x=(0,p._)((0,g.useState)(!1),2),C=x[0],k=x[1],S=(0,p._)((0,g.useState)(!1),2),_=S[0],T=S[1],E=(i=function(e){var t,n,r,i,o=(r={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},i=(0,d._)({},nW,r),ep.a(nV,i)),a=o.data,l=o.loading,c=o.error;if(l)return{loading:l,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var s=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return s?{loading:!1,pendingChanges:(null===(n=s.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:b.id}.replId}),o=(0,g.useMemo)(function(){return i.pendingChanges?i.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,tW.U$)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[i.pendingChanges]),(0,f._)((0,d._)({},i),{pendingChanges:o})),B=ef(),A=(0,V.Y)("",nQ),P=(null===(c=E.pendingChanges)||void 0===c?void 0:c.length)!==0,G=(null===(s=b.user)||void 0===s?void 0:s.username)===nq.IU||(null===(u=b.user)||void 0===u?void 0:u.username)==="templates",M=(0,p._)((0,g.useState)({ran:!1,tested:!1}),2),X=M[0],F=M[1],W=(0,U.d)({tablet:!0}),H=(0,O.P5)({type:"boolean",controlName:"flag-template-layout-author"}),z=!W&&H&&null!=w,j=(0,p._)((n=(t=(0,p._)((0,g.useState)(b.releases.items[0]),2))[0],r=t[1],(0,g.useEffect)(function(){b.releases.items.length>0&&r(b.releases.items.slice().sort()[0])},[b.releases.items]),[n,r]),2),q=j[0],J=j[1],Y=(null==q?void 0:q.initialLayoutState)!=null,$=(0,V.Y)(Y?l.Saved:l.Default,function(){}),K=Y?$.value!==l.Saved:$.value!==l.Default,Q=P||K;(0,g.useEffect)(function(){F({ran:!1,tested:!1})},[F]);var ee=!!(A.error||B.loading||!G&&!Q||G&&(!X.ran||!X.tested)),et=G&&(null===(v=b.releases)||void 0===v?void 0:null===(m=v.items)||void 0===m?void 0:m.length)>1,en="";return(A.error?en="Please fill out the form":G||Q||(en="No file or layout changes to publish in this release"),C)?(0,h.tZ)(tp,{repl:b}):_?(0,h.tZ)(I.G,{css:n8.existingReleasesContainer,children:(0,h.tZ)(n4,{repl:b})}):(0,h.BX)(nK,{onSubmit:(a=(0,L._)(function(e){var t,n,r,i;return(0,N.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),ee||A.validate())return[2];return n=null,z&&($.value===l.Current?n=w():$.value===l.Saved&&Y&&(n=null==q?void 0:q.initialLayoutState)),[4,B.createRelease({input:{replId:b.id,description:A.value,initialLayoutState:n}})];case 1:if((r=o.sent()).error)return[2];return k(!0),(null===(t=r.data)||void 0===t?void 0:t.createReplRelease.__typename)==="Repl"&&(J(i=r.data.createReplRelease.releases.items.slice().sort()[0]),$.setValue((null==i?void 0:i.initialLayoutState)!=null?l.Saved:l.Default)),[2]}})}),function(e){return a.apply(this,arguments)}),css:n8.container,children:[(0,h.tZ)(D.h4,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,h.BX)(I.G,{css:n8.modifiedContainer,children:[(0,h.tZ)(D.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,h.tZ)(n2,{pendingChangesState:E,isReplitTemplate:G})]}),z?(0,h.BX)(I.G,{css:n8.layoutContainer,children:[(0,h.tZ)(D.h4,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,h.tZ)(eK,{getCurrentLayoutState:w,savedLayoutState:null==q?void 0:q.initialLayoutState,templateLayout:$})]}):null,G||Q?(0,h.BX)(I.G,{css:n8.descriptionContainer,children:[(0,h.tZ)("label",{htmlFor:Z("description"),css:n8.descriptionLabel,children:"Description"}),(0,h.tZ)(tZ.B,{id:Z("description"),"aria-label":"Description",onChange:function(e){return A.setValue(e.target.value)},css:n8.descriptionInput,placeholder:"Explain what has changed about your template"}),A.error?(0,h.tZ)(e1.E,{icon:(0,h.tZ)(e6.Z,{}),text:null===(y=A.error)||void 0===y?void 0:y.message,colorway:"negative"}):null]}):null,G?(0,h.tZ)(n7,{repl:b,state:X,onChange:function(e,t){return F(function(n){return(0,f._)((0,d._)({},n),(0,R._)({},e,t))})}}):null,(0,h.tZ)(I.G,{children:B.error?(0,h.tZ)(e1.E,{icon:(0,h.tZ)(e6.Z,{}),text:B.error,colorway:"negative"}):null}),(0,h.BX)(I.G,{css:n8.footerContainer,children:[et?(0,h.tZ)(e0.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return T(!0)}}):null,(0,h.tZ)(e2.u,{tooltip:en,placement:"bottom",isDisabled:!en,children:(0,h.tZ)(e0.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,h.tZ)(e8.Z,{}),disabled:ee})})]})]})}var n5=(0,eU.X)({container:[P.l0.colWithGap(12)],row:[P.l0.rowWithGap(8),P.l0.py(2)]});function n7(e){var t,n,r,i=e.repl,o=e.state,a=e.onChange,l=(0,tP.U)(),c=(0,er.e9)(),s=c.data,u=c.loading,d=null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.username;return(0,h.BX)(I.G,{css:n5.container,children:[(0,h.tZ)(D.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,h.BX)(I.G,{children:[(0,h.BX)(n9,{children:[(0,h.tZ)(nH.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e)}}),(0,h.tZ)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,h.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,h.tZ)("code",{children:".upm"}),"."]})]}),(0,h.BX)(n9,{children:[(0,h.tZ)(nH.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e)}}),(0,h.tZ)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,h.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,h.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,h.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),u||(null===(r=i.user)||void 0===r?void 0:r.username)!==d?null:(0,h.tZ)(e1.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function n9(e){var t=e.children;return(0,h.tZ)(I.G,{css:n5.row,children:t})}var re=n(29193),rt=n(76304),rn=n(24562),rr=n(59489),ri=n(42427),ro=n(34030),ra=n(2446),rl=n(85995),rc=n(7391),rs=n(60242),ru=n(63752),rd=n(42704),rf=(0,tX.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),rp=(0,tX.iv)([P.l0.position.relative,P.l0.cursor.pointer,P.l0.backgroundColor.backgroundHigher,P.l0.borderRadius(4),P.l0.p(2),{input:[P.l0.position.absolute,P.l0.top(0),P.l0.left(0),P.l0.width("100%"),P.l0.height("100%"),P.l0.zIndex(-1),{opacity:0}]}]),rh=(0,tX.iv)([P.l0.color.accentPrimaryDefault,P.l0.position.absolute,P.l0.top(0),P.l0.left(0),P.l0.width("100%"),P.l0.height("100%"),P.l0.borderRadius(4),P.l0.backgroundColor.backgroundRoot,P.l0.overflow("hidden"),P.l0.display.flex,P.l0.align.center,P.l0.justify.center]),rm=(0,eU.X)({addIcon:[rp,P.l0.display.flex,P.l0.align.center,P.l0.justify.center,P.l0.border({width:1,color:P.TV.foregroundDimmest}),P.l0.backgroundColor.backgroundRoot,{"&:hover":[P.l0.color.accentPrimaryDefault,{borderColor:P.TV.accentPrimaryDefault}]}],updateIcon:[rp,{"&:hover .hover-state":{opacity:.8}}],hoverState:[rh,{opacity:0}],loadingState:[rh,{opacity:.8}],loadingIcon:[P.l0.display.flex,P.l0.align.center,P.l0.justify.center,{animation:"".concat(rf," 1s linear infinite")}],error:[{fontSize:P.TV.fontSizeDefault,color:P.TV.accentNegativeDefault}]});function rg(e){var t=(0,g.useRef)(null),n=(0,p._)((0,g.useState)(e.value),2),r=n[0],i=n[1],o=(0,p._)((0,g.useState)(null),2),a=o[0],l=o[1],c=(0,H.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){l(e.message)}});(0,g.useEffect)(function(){i(e.value)},[e.value]);var s=null==r?void 0:r.startsWith("data:");return(0,h.BX)(rd.gC,{spacing:4,children:[(0,h.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},css:r?rm.updateIcon:rm.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,h.BX)(h.HY,{children:[(0,h.tZ)(ru.Z,{iconUrl:r,size:32,alt:"icon"}),s?(0,h.tZ)("div",{css:rm.loadingState,children:(0,h.tZ)("div",{css:rm.loadingIcon,children:(0,h.tZ)(A.Z,{})})}):(0,h.tZ)("div",{css:rm.hoverState,className:"hover-state",children:(0,h.tZ)(J.Z,{})})]}):(0,h.tZ)(Y.Z,{size:32}),(0,h.tZ)("input",{ref:t,accept:z.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null==r?void 0:r.length)&&(l(null),c.uploadImage(r[0],t4.N.TemplateIcon))}})]}),a?(0,h.tZ)("div",{css:rm.error,children:a}):null]})}var rv=n(6065),ry=n(38865),rb=n(61010),rw=n(4135),rZ=n(32622),rx=n(77876),rC=n(9164),rk=n(27060),rS=n(77402),r_=n(31940),rT=n(59830),rE=n(80863),rR=n(22510),rD=n(38799),rI=n(84082),rB=n(23882),rA=n(71323),rP=n(69615),rG=n(9929),rL=(0,eU.X)({dialog:[P.l0.py(2),P.l0.colWithGap(16)],actions:[P.l0.rowWithGap(8),P.l0.justify.end],setupItem:[P.l0.rowWithGap(8),P.l0.align.center],learnMoreLink:[P.l0.p(0)],description:[P.l0.colWithGap(8)],reachOut:[P.l0.pt(16),P.l0.px(16),P.l0.border({direction:"top",color:P.TV.outlineDimmest}),{marginInline:-16}]}),rN=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,m=e.repl,v=e.org,y=e.onRequestClose,b=e.onForkSeparately,w=(0,x.Z)().showError,k=v.id,S=(0,p._)((0,rE.Z)({navigateAfterFork:!0,replLinkOptions:{projectPane:!0},onFork:function(){y()},onError:function(){w("Error creating fork - please try again")}}),2),_=S[0],T=S[1].loading,E=(0,p._)((n=(t=(0,rB.Z)()).git,r=t.fs,o=(i=(0,p._)((0,g.useState)({loading:!1,error:null,success:!1}),2))[0],a=i[1],l=(0,C.Z)(),c=(0,p._)((0,rA.r)({}),1)[0],s=(0,Z.Z)(function(){var e,t,n;_({originId:m.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(n=null===(t=m.deployment)||void 0===t?void 0:null===(e=t.activeRelease)||void 0===e?void 0:e.id)&&void 0!==n?n:void 0,orgId:k,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:m.publishedAs===ee.O2.App,isTemplate:m.publishedAs===ee.O2.Template}})}),u=(0,p._)((0,rA.Pr)(),1)[0],[(0,g.useCallback)((d=(0,L._)(function(e){var t,i,o,d,f,p,h,m;return(0,N.Jh)(this,function(g){switch(g.label){case 0:a({loading:!0,error:null,success:!1}),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,u({variables:{id:l},fetchPolicy:"no-cache"})];case 2:if(!(i=g.sent().data)||"Repl"!==i.getRepl.__typename)throw Error("Please try again");if(null===(t=i.getRepl.project)||void 0===t?void 0:t.id)throw Error("This Repl is already part of a project");return[3,4];case 3:return a({loading:!1,error:"message"in(o=g.sent())?o.message:"Please try again",success:!1}),[2];case 4:return[4,n.init({includeAllInitialFiles:!0,initialCommit:!0})];case 5:if(!(d=g.sent()).error)return[3,11];if(d.error!==rI.aq.ALREADY_INITIALIZED)return[3,10];return[4,n.getRepositoryState()];case 6:if((f=g.sent()).error)return a({loading:!1,error:"Could not create Project - please try again",success:!1}),[2];if(!(f.state!==rI.yG.CLEAN))return[3,9];return[4,n.stageFiles({all:!0})];case 7:return g.sent(),[4,n.commit({message:"Initial project commit",allowEmpty:!1})];case 8:g.sent().error&&a({loading:!1,error:"Could not generate initial commit to create Project",success:!1}),g.label=9;case 9:return[3,11];case 10:return a({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 11:return[4,(0,rG.e)(n)];case 12:return g.sent().error&&a({loading:!1,error:"Could not create Project, please try again",success:!1}),[4,r.flush()];case 13:return g.sent(),[4,r.persist({skipDebounce:!0})];case 14:if((p=g.sent()).error||!p.success)return a({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(r.getStatus()===e9.kO.Clean){e();return}r.onStatusChange(function(t){if(t===e9.kO.Clean){e();return}})})];case 15:g.sent(),g.label=16;case 16:return g.trys.push([16,18,,19]),[4,c({variables:{input:{mainReplId:l,orgId:e}}})];case 17:if((m=g.sent()).errors||!(null===(h=m.data)||void 0===h?void 0:h.createProject))throw Error("Could not create project");if("Project"!==m.data.createProject.__typename)throw Error(m.data.createProject.message);return[3,19];case 18:return a({loading:!1,error:g.sent().message,success:!1}),[2];case 19:return a({loading:!1,error:null,success:!0}),s.current(),[2]}})}),function(e){return d.apply(this,arguments)}),[n,r,l,c,s,u]),o]),2),R=E[0],B=E[1],A=(f=(0,L._)(function(){return(0,N.Jh)(this,function(e){return B.loading||R(k),[2]})}),function(){return f.apply(this,arguments)});return(0,h.BX)(rR.l0,{css:rL.dialog,onSubmit:function(e){e.preventDefault(),A()},children:[(0,h.tZ)(D.h4,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this Repl?"}),(0,h.tZ)(rP.G,{}),(0,h.BX)(I.G,{css:rL.description,children:[(0,h.tZ)(D.xv,{children:"Consider starting a Project  a set of connected, forkable Repls for better collaborative development and versioning. Within a Project, you can:"}),(0,h.tZ)(rD.M,{children:(0,h.BX)("ul",{children:[(0,h.tZ)("li",{children:"Fork a Repl to work on a feature in isolation, and merge back when ready"}),(0,h.tZ)("li",{children:"View all ongoing development in one place"}),(0,h.BX)("li",{children:["Share secrets and configuration between forks"," ",(0,h.tZ)(D.xv,{color:"dimmest",children:"(coming soon)"})]})]})})]}),B.error?(0,h.tZ)(e1.E,{colorway:"negative",icon:(0,h.tZ)(e6.Z,{}),text:B.error}):null,(0,h.BX)(I.G,{css:rL.actions,children:[(0,h.tZ)(e0.zx,{loading:B.loading||T,text:"Fork separately",onClick:function(){y(),b()}}),(0,h.tZ)(e0.zx,{loading:B.loading||T,text:"Fork & start a Project",colorway:"primary",type:"submit"})]}),(0,h.tZ)(I.G,{css:rL.reachOut,children:(0,h.BX)(D.xv,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,h.tZ)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},rO=n(42564),rU=n(34366);function rM(e){var t=e.repl,n=(0,w.Z)(),r=(0,g.useMemo)(function(){if(t.org){var e;return{text:t.org.name,css:[{"&, & span":P.l0.flex.shrink(1)}],iconLeft:(0,h.tZ)(rv.q,{src:null!==(e=t.org.image)&&void 0!==e?e:null,username:t.org.name,fullName:t.org.name,size:24})}}return t.user?{text:t.user.username,css:[{"&, & span":P.l0.flex.shrink(1)}],iconLeft:(0,h.tZ)(rv.q,{src:t.user.image,username:t.user.username,size:24})}:{text:""}},[t]);if(!t.user||!t.org&&!t.user)return null;var i=t.org?(0,E._Q)(t.org).repls:(0,ry.Ru)(t.user),o=t.org?(0,E._Q)(t.org).repls.href.toString():(0,ry.Ru)(t.user).as;return n?(0,h.tZ)(e0.zx,(0,f._)((0,d._)({},r),{onClick:function(){rZ.X.openExternalUrl(o)}})):(0,h.tZ)(tc.Z,(0,f._)((0,d._)({},r),{as:i.as,href:i.href,prefetch:!1}))}function rX(e){var t,n,r=e.setActiveDialog,i=e.repl,o=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,c=e.setIsEditing,u=e.updateReplInfo,m=(0,rU.Z)(),v=!!i.publishedAs,b=(0,p._)((0,g.useState)(!1),2),Z=b[0],C=b[1],k=(0,w.Z)(),S=!!i.org&&i.org.type===ee.a4.Team,_=(0,y.g)().fork,T=(0,rO.J)(),E=(0,x.Z)(),B=E.showConfirm,G=E.showError,L=(0,p._)((0,rx.F)({onFork:function(){B("Repl forked, redirecting...")},onError:function(){G("Error creating fork - please try again")}}),2),N=L[0],O=L[1].loading,U=(0,g.useCallback)(function(){var e;if(!(null===(e=i.org)||void 0===e?void 0:e.id)||T.loading){_();return}if(T.isEligibleForProject&&!T.hasProject){C(!0);return}if(T.hasProject){N({orgId:i.org.id,repl:i,forkSource:"replInfoHeader"});return}_()},[i,_,T,N]),M=[];i.authorizations.fork.isAuthorized&&M.push({value:"Fork",label:"Fork",icon:O?(0,h.tZ)(A.Z,{}):(0,h.tZ)(rw.Z,{}),isDisabled:O});var X=i.authorizations.publish.isAuthorized;if(!k&&!m&&!S){var F=i.isPrivate||!i.isRenamed||!X,W="";i.isPrivate?W="Make Repl public to publish":i.isRenamed||(W="Rename Repl to publish"),null==i.publishedAs&&M.push({value:s.Publish,label:"Publish as Template",icon:(0,h.tZ)(rT.Z,{}),isDisabled:F,description:W,dataCy:"repl-info-header-settings-publish"}),i.publishedAs!==ee.O2.RegularRepl||F||M.push({value:s.Unpublish,label:"Unpublish",icon:(0,h.tZ)(rb.Z,{})}),o&&!F&&M.push({value:s.UnpublishTemplate,label:"Unpublish template",icon:(0,h.tZ)(rb.Z,{})}),v&&!F&&M.push({value:s.EditPublishSettings,label:"Edit template publish settings",icon:(0,h.tZ)(J.Z,{})})}return i.authorizations.deleteRepl.isAuthorized&&M.push({isDestructive:!0,value:s.DeleteRepl,label:"Delete",icon:(0,h.tZ)(t3.Z,{})}),(0,h.BX)(I.G,{css:[P.l0.colWithGap(8),P.l0.p(8)],children:[(0,h.BX)(I.G,{css:[P.l0.rowWithGap(8),P.l0.align.center,P.l0.justify.spaceBetween,(0,R._)({},P.BC.max("mobileMax"),[P.l0.flex.columnReverse,P.l0.align.start,{gap:P.TV.space8}])],children:[(0,h.BX)(I.G,{css:[P.l0.rowWithGap(8),P.l0.center,P.l0.flex.shrink(1)],children:[(0,h.tZ)(rM,{repl:i}),i.authorizations.editMetadata.isAuthorized&&o?(0,h.tZ)(rg,{value:i.iconUrl,onChange:a}):null]}),(0,h.BX)(I.G,{css:[P.l0.align.center,P.l0.rowWithGap(8),(0,R._)({},P.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[k?null:(0,h.tZ)(tc.Z,(0,f._)((0,d._)({prefetch:!1},(0,ta.j3)(i)),{iconRight:(0,h.tZ)(rk.Z,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),o||k||m||S?null:(0,h.tZ)(e2.u,{tooltip:"Make Repl public to share",isDisabled:!i.isPrivate,children:(0,h.tZ)(e0.zx,{type:"button",iconLeft:(0,h.tZ)(Y.Z,{}),onClick:function(){r(s.Share)},text:"Share",disabled:i.isPrivate})}),o&&!k?(0,h.tZ)(e0.zx,{type:"button",iconLeft:(0,h.tZ)(Y.Z,{}),onClick:function(){return r(s.UpdatePublishedTemplate)},text:"Publish changes"}):null,k?(0,h.tZ)(tf.q,{textToCopy:window.location.href,tooltipText:"Copy Repl URL",tooltipSuccessText:"Copied!",iconLeft:(0,h.tZ)(rS.Z,{}),text:""}):null,M.length>0&&(0,h.tZ)(rC.ZE,{dataCy:"repl-info-header-settings",trigger:(0,h.tZ)(t0.hU,{alt:"Repl settings",size:32,children:(0,h.tZ)(r_.Z,{size:16})}),"aria-label":"Repl settings",onAction:function(e){switch(e){case"Fork":U();return;case s.Unpublish:r(s.Unpublish);return;case s.UnpublishTemplate:r(s.UnpublishTemplate);return;case s.DeleteRepl:r(s.DeleteRepl);return;case s.EditPublishSettings:r(s.EditPublishSettings);return;case s.Publish:r(s.Publish);return}},children:M.map(function(e){return(0,h.tZ)(rC.sN,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),l?(0,h.tZ)(t0.hU,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){u(),c(!1)},children:(0,h.tZ)(ne.Z,{})}):null]})]}),(null===(t=i.org)||void 0===t?void 0:t.type)===ee.a4.Team&&(null===(n=i.user)||void 0===n?void 0:n.__typename)==="User"?(0,h.BX)(D.xv,{variant:"small",color:"dimmest",children:["Created by @",i.user.username]}):null,i.lastPublishedAt&&X?(0,h.BX)(D.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(i.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null,Z&&i.org?(0,h.tZ)(t1.u,{isOpen:!0,onRequestClose:function(){return C(!1)},children:(0,h.tZ)(rN,{repl:i,org:i.org,onRequestClose:function(){return C(!1)},onForkSeparately:_})}):null]})}(o=s||(s={})).DeleteRepl="DeleteRepl",o.PowerUp="PowerUp",o.BuyCycles="BuyCycles",o.Unpublish="Unpublish",o.UnpublishTemplate="UnpublishTemplate",o.EditPublishSettings="EditPublishSettings",o.Publish="Publish",o.UpdatePublishedTemplate="UpdatePublishedTemplate",o.Share="Share",(a=u||(u={})).Fork="Fork",a.Delete="Delete",a.Unpublish="Unpublish",a.UnpublishTemplate="UnpublishTemplate",a.EditPublishSettings="EditPublishSettings";var rF=(0,eU.X)({loadingRoot:[P.l0.center,P.l0.p(16)],root:{overflow:"auto",maxHeight:"80vh",".icon-container":[P.l0.display.flex,P.l0.align.center,P.l0.px(4)],form:P.l0.p(8)}});function rW(e){var t=e.getDesktopLayoutState,n=e.setIsEditing,r=e.showCloseButton,i=e.onDeployClick,o=(0,C.Z)(),a=(0,rs.BZ)({variables:{replId:o}}).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return l?(0,h.tZ)(rV,{getDesktopLayoutState:t,setIsEditing:n,showCloseButton:r,repl:l,onDeployClick:i}):(0,h.tZ)(I.G,{css:rF.loadingRoot,children:(0,h.tZ)(A.Z,{})})}function rV(e){var t,n,r,i,o=e.repl,a=e.getDesktopLayoutState,l=e.showCloseButton,c=e.setIsEditing,u=e.onDeployClick,C=(0,rc.useRouter)(),R=(0,w.Z)(),B=(0,p._)((0,g.useState)(null),2),A=B[0],G=B[1],L=(0,p._)((0,g.useState)(o.isRenamed?o.title:""),2),N=L[0],O=L[1],U=(0,p._)((0,g.useState)(o.description||""),2),M=U[0],X=U[1],F=(0,p._)((0,g.useState)(o.rawTemplateLabel),2),W=F[0],V=F[1],H=(0,x.Z)().showError,z=o.publishedAs===ee.O2.Template,j=(null===(t=o.org)||void 0===t?void 0:t.type)!=="team"&&(o.authorizations.editVisibility.isAuthorized||o.authorizations.editVisibility.code===ee.RO.RequiresActiveSubscription);(0,g.useEffect)(function(){X(o.description||"")},[o.description]);var J=(0,T.Z)(),Y=(0,g.useRef)(o),$=(0,p._)((0,rs.ap)({variables:{id:o.id},onCompleted:function(){var e;if(R){C.push("/desktopApp/home");return}if((null===(e=o.org)||void 0===e?void 0:e.type)==="team"){var t=(0,E._Q)(o.org);C.push(t.home.href);return}C.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return H((0,k.Z)(e.message))}}),2),K=$[0],Q=$[1].loading,et=(0,p._)((0,rs.vi)({onError:function(e){return H((0,k.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=Y.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,C.push({pathname:J,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),Y.current=o,Object.keys(r).length>0&&c(!1)}}),2),en=et[0],er=et[1].loading,ei=(0,p._)((0,rs.gF)({variables:{input:{replId:o.id}},onError:function(e){m.Tb(e),H((0,k.Z)(e.message))}}),2),eo=ei[0],ea=ei[1],el=(0,g.useMemo)(function(){return!!N&&N!==o.title||W!==o.rawTemplateLabel||(""!==M||!!o.description)&&M!==o.description},[o,N,M,W]),ec=(0,Z.Z)(el),es=(0,g.useCallback)(function(){el&&en({variables:{input:{id:o.id,title:N.trim()||o.title,description:M,templateLabel:o.authorizations.editTemplateMetadata.isAuthorized?W:void 0}}})},[el,en,o,N,M,W]),eu=(0,Z.Z)(es);(0,g.useLayoutEffect)(function(){return function(){ec.current&&eu.current()}},[eu,ec]);var ed=function(){en({variables:{input:{id:o.id,isPrivate:!o.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},o),{isPrivate:!o.isPrivate})}}}),(0,_.j)(_.U3.PRIVATE_TOGGLED,{enabled:!o.isPrivate,source:"workspace_info_modal"})},ef=o.isRenamed?"Name your Repl":"Default name: ".concat(o.title),ep=[ee.Sy.Submit,ee.Sy.PublishTemplate,ee.Sy.EditTemplate].includes(o.workspaceCta),eh=(0,tP.U)(),em=(null===(n=o.owner)||void 0===n?void 0:n.__typename)==="Team",eg=o.authorizations.viewDeploymentConfig.isAuthorized&&"function"==typeof u,ev="/replEnvironmentDesktop"===J&&eg,ey=(null===(r=o.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"&&o.hostingDeployment.currentBuild;return(0,h.BX)("div",{css:rF.root,"data-can-change-description":o.authorizations.editMetadata.isAuthorized,children:[(0,h.tZ)(y.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:o,teamContext:(null===(i=o.owner)||void 0===i?void 0:i.__typename)==="Team"?o.owner.id:void 0,children:(0,h.tZ)(rX,{repl:o,isTemplate:z,showCloseButton:l,setActiveDialog:G,setIsEditing:c,updateIconUrl:function(e){return en({variables:{input:{id:o.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},o),{iconUrl:e})}}})},updateReplInfo:es})}),(0,h.tZ)("form",{onSubmit:function(e){e.preventDefault(),es()},children:(0,h.BX)(I.G,{css:[P.l0.align.stretch,P.l0.colWithGap(16)],children:[(0,h.BX)(q.Tg,{background:"default",css:[P.l0.colWithGap(16)],children:[(0,h.tZ)(I.G,{css:[P.l0.flex.column],children:(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.BX)(I.G,{css:[P.l0.flex.row,P.l0.justify.spaceBetween,P.l0.align.end],children:[(0,h.tZ)("label",{htmlFor:eh("name"),children:(0,h.tZ)(D.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,h.tZ)(b.Z,{maxLength:60,value:N,hideLabel:!0})]}),(0,h.tZ)(tZ.II,{style:{cursor:o.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!o.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:ef,value:N,onChange:function(e){return O(e.target.value)},spellCheck:!1,id:eh("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,h.tZ)(I.G,{css:[P.l0.flex.column],children:(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.BX)(I.G,{css:[P.l0.flex.row,P.l0.justify.spaceBetween,P.l0.align.end],children:[(0,h.tZ)("label",{htmlFor:eh("description"),children:(0,h.tZ)(D.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,h.tZ)(b.Z,{maxLength:rt.p,value:M,hideLabel:!0})]}),(0,h.tZ)(tZ.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!o.authorizations.editMetadata.isAuthorized,maxLength:rt.p,value:M,onChange:function(e){return X(e.target.value)},placeholder:"What does this Repl do?",css:[P.l0.minHeight(96),P.l0.maxHeight(256),{resize:"vertical"}],id:eh("description")})]})})]}),z&&o.authorizations.editTemplateMetadata.isAuthorized?(0,h.tZ)(q.Tg,{background:"default",css:[P.l0.colWithGap(4)],children:(0,h.BX)(I.G,{css:[P.l0.colWithGap(4)],children:[(0,h.tZ)("label",{htmlFor:eh("template"),children:(0,h.tZ)(D.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,h.tZ)(tZ.II,{value:W,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return V(e.target.value)},id:eh("template")})]})}):null]})}),ep?null:(0,h.BX)(I.G,{css:[P.l0.colWithGap(24),P.l0.p(8),P.l0.pt(0)],children:[j?(0,h.BX)(I.G,{css:[P.l0.colWithGap(8)],children:[(0,h.BX)(rr.hE,{tag:"fieldset",name:eh("privacy"),value:o.isPrivate.toString(),onChange:function(){if(!er){(0,_.j)(_.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!o.isPrivate,source:"workspace_info_modal"});var e,t=!o.isPrivate;if(o.authorizations.editVisibility.isAuthorized||!1===t){ed();return}o.authorizations.editVisibility.code===ee.RO.RequiresActiveSubscription&&(null===(e=o.org)||void 0===e?void 0:e.__typename)!=="Org"?G(s.PowerUp):H(o.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,h.tZ)(rr.rK,{id:eh("false"),value:"false",text:"Public",icon:(0,h.tZ)(ro.Z,{})}),(0,h.tZ)(rr.rK,{id:eh("true"),value:"true",text:"Private",icon:(0,h.tZ)(ra.Z,{})})]}),(0,h.tZ)(D.xv,{variant:"small",color:"dimmest",children:(0,S.Z)(o.isPrivate,em)})]}):null,ev?(0,h.tZ)(I.G,{css:P.l0.colWithGap(8),children:(0,h.tZ)(e0.zx,{text:ey?"Redeploy your Repl":"Deploy your Repl",iconLeft:(0,h.tZ)(ri.Z,{}),colorway:ey?void 0:"primary",onClick:function(){u(),ey||(0,_.j)(_.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})}})}):null]}),(0,h.tZ)(rn.Z,{isOpen:A===s.DeleteRepl,onClose:function(){return G(null)},selectedRepls:[o],onDelete:function(){K()},deleting:Q}),(0,h.tZ)(rl.Z,{isOpen:A===s.PowerUp,onClose:function(){return G(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,h.tZ)(t1.u,{isOpen:A===s.Unpublish,onRequestClose:function(){return G(null)},children:(0,h.tZ)(re.Z,{repl:o,source:"replEnvironment",onDone:function(){G(null)}})}),(0,h.tZ)(t1.u,{isOpen:A===s.UnpublishTemplate,onRequestClose:function(){return G(null)},children:(0,h.tZ)(v.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return G(null)},onConfirm:function(){ea.loading||(eo(),G(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,h.tZ)(t1.u,{isOpen:A===s.EditPublishSettings,onRequestClose:function(){return G(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,h.tZ)(nX,{source:"replEnvironment",replId:o.id,getDesktopLayoutState:a})}),(0,h.tZ)(t1.u,{isOpen:A===s.Publish,onRequestClose:function(){return G(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,h.tZ)(nX,{source:"replEnvironment",replId:o.id,getDesktopLayoutState:a})}),(0,h.tZ)(t1.u,{isOpen:A===s.UpdatePublishedTemplate,onRequestClose:function(){return G(null)},noPadding:!0,children:(0,h.tZ)(n6,{repl:o,getDesktopLayoutState:a})}),(0,h.tZ)(t1.u,{isOpen:A===s.Share,onRequestClose:function(){return G(null)},noPadding:!0,children:(0,h.tZ)(tp,{repl:o})})]})}},56250:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(21262),i=n(71440),o=n(71519);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},5128:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(42516),i=n(3796),o=n(15023),a=n(24766),l=n(93245),c=n(36809),s=n(63163),u=n(47523),d=n(61826),f=n(22419),p=(0,c.X)({metadata:[s.l0.rowWithGap(6),s.l0.align.center,s.l0.flex.growAndShrink(1)],iconWrapper:[s.l0.position.relative,s.l0.display.none,(0,r._)({},s.BC.min("tabletMax"),[s.l0.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[s.l0.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[s.l0.flex.shrink(1),s.l0.truncate]});function h(e){var t=e.repl,n=(0,u.Z)().didDisconnect;return(0,i.BX)(l.G,{css:p.metadata,children:[(0,i.BX)(l.G,{css:p.iconWrapper,children:[(0,i.tZ)(l.G,{css:n&&p.dimIcon,children:(0,i.tZ)(o.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),n?(0,i.tZ)(f.u,{tooltip:"Reconnecting",children:(0,i.tZ)(d.Z,{size:16,css:p.diconnectedIcon})}):null]}),(0,i.tZ)(a.xv,{multiline:!1,css:p.title,"data-cy":"header-repl-title",color:n?"dimmer":"default",children:t.title})]})}},74457:function(e,t,n){n.d(t,{ZP:function(){return Q},L7:function(){return K}});var r,i,o,a=n(27387),l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(96583),f=n(3796),p=n(62279),h=n(25722),m=n(29574),g=n(47126),v=n(80786),y=n(80951),b=n(21262),w=n(71440),Z=n(9122);function x(){var e=(0,b._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return x=function(){return e},e}var C={},k=(0,w.Ps)(x()),S=new Date("2022-07-08"),_=(0,y.O4)("useCelebrateFirstReplPlay",!1),T=n(99595),E=n(16155),R=n(10777),D=n(14074),I=n(96949),B=n(24766),A=n(22419),P=n(75710),G=n(10578),L=n(81253),N=n(45252),O=n(63163),U=n(1053),M=n(62695),X=n(31252),F=n(75271);function W(){var e=(0,b._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return W=function(){return e},e}var V={},H=(0,w.Ps)(W()),z=n(76848);function j(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case U.Ah.IDLE:return(0,f.tZ)(L.Z,{size:r});case U.Ah.RUNNING:return(0,f.tZ)(N.Z,{size:r});default:return(0,f.tZ)(G.Z,{size:r})}}var q=(r={},(0,l._)(r,U.Ah.IDLE,"Run"),(0,l._)(r,U.Ah.RUNNING,"Stop"),(0,l._)(r,U.Ah.STOPPING,"Stopping"),(0,l._)(r,U.Ah.OFFLINE,"Working"),(0,l._)(r,U.Ah.BEFORE_RUN,"Working"),r),J=(i={small:48,large:85},(0,l._)(i,U.Ah.IDLE,68),(0,l._)(i,U.Ah.RUNNING,72),(0,l._)(i,U.Ah.STOPPING,92),(0,l._)(i,U.Ah.OFFLINE,86),(0,l._)(i,U.Ah.BEFORE_RUN,86),i),Y=(0,p.iv)([O.l0.py(12),O.l0.width(J.small),O.l0.flex.row,O.l0.center,O.l0.borderRadius(),O.l0.backgroundColor.accentPositiveDimmest,O.l0.color.accentPositiveStrongest,O.l0.cursor.pointer,O.l0.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},O.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:O.TV.accentPositiveStrongest}]},(0,l._)(o,(0,M.et)("tabletMax"),[O.l0.width(J.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(O.TV.accentPositiveStrongest)}),o)]),$=(0,p.iv)([O.l0.color.foregroundDimmer,O.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},O.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:O.TV.accentPrimaryDefault}]}]);function K(e){var t=(0,u._)((0,F.useState)(e.getRunState()),2),n=t[0],r=t[1];return(0,F.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),n}var Q=F.forwardRef(function(e,t){var n,r,i,o,p,y,b,w,x,G,L,N,W,Q=e.runner,ee=e.onRunInitiated,et=e.style,en=e.disableTooltip,er=e.shortcut,ei=(0,z.s2)(),eo=(0,E.Z)(),ea=K(Q),el=(0,F.useMemo)(function(){return ei&&ea!==U.Ah.OFFLINE?ei.step:ea},[ea,ei]),ec=(n=(0,c._)({},V,{variables:{id:eo}}),Z.a(H,n)).data,es=(null==ec?void 0:ec.repl.__typename)==="Repl"?ec.repl:null,eu=(r=(0,c._)({},C,void 0),p=Z.a(k,r),y=(0,m.Gn)("extraDelight").preferences.extraDelight,b=(0,g.$0)().fireCircularBurstFrom,x=(w=(0,u._)((0,v.KO)(_),2))[0],G=w[1],L=null!==(o=null===(i=p.data)||void 0===i?void 0:i.currentUser)&&void 0!==o?o:null,N=!x&&L&&new Date(L.timeCreated)>=S,{hasCelebrated:x,celebrate:function(e){if(!e){h.Tb(Error("Cannot find element for celebrate Repl run confetti"));return}(y||N)&&b({element:e}),N&&G(!0)}}).celebrate,ed=el!==U.Ah.IDLE&&el!==U.Ah.RUNNING,ef=(0,T.Z)().showError,ep=(0,F.useRef)(null),eh=(W=(0,a._)(function(){var e,t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),el!==U.Ah.IDLE)return[3,4];if(ee&&ee(),ep.current&&eu(ep.current),!(null==ei?void 0:ei.run))return[3,1];return ei.run(),[3,3];case 1:return[4,Q.run()];case 2:c.sent(),c.label=3;case 3:return es&&(0,I.j)(I.U3.PROJECT_RAN,{placement:"primary_btn",replId:es.id,replTitle:es.title,rootOriginReplUrl:es.rootOriginReplUrl,templateTitle:null===(n=es.source)||void 0===n?void 0:null===(t=n.release)||void 0===t?void 0:null===(e=t.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=es.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username}),[2];case 4:if(el===U.Ah.RUNNING){if(null==ei?void 0:ei.stop)return[2,ei.stop()];return[2,Q.stopRun()]}return[3,6];case 5:if(ef((l=c.sent()).toString()),R.kg.error("run button error",{errorMessage:l.message}),el===U.Ah.RUNNING){if(null==ei?void 0:ei.stop)return[2,ei.stop()];return[2,Q.stopRun()]}return[3,6];case 6:return[2]}})}),function(){return W.apply(this,arguments)}),em=el===U.Ah.IDLE;return"inline-small"===(void 0===et?"default":et)?(0,f.BX)("button",{"data-cy":"ws-run-btn",onClick:eh,ref:ep,disabled:ed,css:[O.l0.p(12),O.l0.flex.row,O.l0.center,O.l0.borderRadius(8),em?O.l0.backgroundColor.accentPositiveDimmest:O.l0.backgroundColor.backgroundHigher,em?O.l0.color.accentPositiveStronger:O.l0.color.foregroundDimmer,{border:"1px solid",borderColor:em?O.TV.accentPositiveDimmest:O.TV.backgroundHigher},O.l0.width("100%"),O.l0.height("100%")],children:[(0,f.tZ)(j,{runState:el}),(0,f.tZ)(B.xv,{variant:"subheadDefault",css:[O.l0.pl(8)],multiline:!1,children:q[el]})]}):(0,f.tZ)(A.u,{placement:"bottom",isDisabled:en||!er,tooltip:er?(0,f.tZ)(X.bM,{keyCombo:er,fontSize:12}):null,children:function(e,n){return(0,f.BX)("button",(0,s._)((0,c._)({},e),{onClick:eh,ref:(0,D.l)(ep,n,t),css:[Y,!em&&$,O.l0.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,M.et)("tabletMax"),O.l0.width(J[el]))],children:[(0,f.tZ)(j,{runState:el,size:12}),(0,f.tZ)(B.xv,{multiline:!1,css:[O.l0.pl(6),O.l0.display.none,O.l0.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(P.j.tabletMax,"px)"),[O.l0.display.block])],children:q[el]})]}))}})})},29460:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(9602),c=n(36809),s=n(63163),u=(0,c.X)({checked:[s.l0.backgroundColor.backgroundHigher],unchecked:[s.l0.color.foregroundDimmest]});function d(e){var t=e.alt,n=e.icon,c=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i._)((0,r._)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:s,children:n}))}},21885:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(42516),o=n(3796),a=n(62279),l=n(22419),c=n(19602),s=n(63163),u=(0,a.iv)([s.l0.focusRing,s.l0.display.flex,s.l0.center,s.l0.borderRadius(4),s.l0.backgroundColor.backgroundRoot,s.l0.color.foregroundDefault,s.l0.cursor.pointer,s.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,s.wl.hover,[s.l0.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var t=e.onClick;return(0,o.tZ)(l.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:t,css:u,children:(0,o.tZ)(c.Z,{size:16})})})}},10406:function(e,t,n){n.d(t,{f:function(){return R}});var r,i=n(3796),o=n(14118),a=n(69792),l=n(27387),c=n(42516),s=n(66626),u=n(96583),d=n(25722),f=n(46954),p=n(16155),h=n(84082),m=n(64566),g=n(75271),v=n(41733),y=n(21262),b=n(71440),w=n(82303);function Z(){var e=(0,y._)(["\n  mutation SyncReplGitState($input: UpdateReplGitStateInput!) {\n    updateReplGitState(input: $input) {\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),k=n(83059),S=(r={},(0,c._)(r,h.yG.CLEAN,"CLEAN"),(0,c._)(r,h.yG.DIRTY_INDEX,"DIRTY_INDEX"),(0,c._)(r,h.yG.DIRTY_WORKTREE,"DIRTY_WORKTREE"),r),_=function(e){var t;return null!==(t=S[e])&&void 0!==t?t:null},T=n(43627);function E(){var e,t,n,r,i,o,a,c,y,b,Z,S,T;return e=(0,p.Z)(),n=(0,m.Z)((t=(0,l._)(function(e){var t,n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,n!==h.y5.NORMAL)return[2,{error:null,notNormal:!0}];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];return[2,{branchName:null==(r=i)?void 0:r.branch,state:_(t.state),type:"NORMAL",error:null}]}})}),function(e){return t.apply(this,arguments)})),r=(0,k.Z)(function(){return n&&!n.error&&!n.notNormal&&n.branchName&&n.state?{lastBranch:n.branchName,state:n.state,type:n.type}:null},[n]),o=(null==(i=(0,f.Z)(r,1e3))?void 0:i.type)==="NORMAL",b=null!==(c=null==(y=(0,m.Z)((a=(0,l._)(function(e){var t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:if(!o)return[2,{error:null,firstSha:null}];return[4,e.escapeHatchGitExecRead("git rev-list --max-parents=0 HEAD")];case 1:if((t=n.sent()).error)return[2,{error:t.error}];if(!t.output)return[2,{error:null,firstSha:null}];if(!/^[0-9a-f]{40}$/.test(t.output.trim()))return d.Tb(Error("useFirstCommitSha expected a 40 character sha, got: ".concat(t.output.trim()))),[2,{error:h.aq.UNKNOWN}];return[2,{error:null,firstSha:t.output.trim()}]}})}),function(e){return a.apply(this,arguments)}),[o]))?void 0:y.firstSha)&&void 0!==c?c:null,S=(0,s._)((Z=(0,v._)({},x,void 0),w.D(C,Z)),1)[0],T=(0,g.useCallback)(function(t){return S({variables:{input:{replId:e,gitInfo:t}}})},[S,e]),(0,g.useEffect)(function(){(null==i?void 0:i.state)&&b&&T({version:1,lastBranch:i.lastBranch,state:i.state,type:i.type,firstCommitSha:b,aiSummary:null})},[null==i?void 0:i.lastBranch,null==i?void 0:i.state,null==i?void 0:i.type,b,T]),null}function R(){var e=(0,o.P5)({controlName:"flag-legacy-team-repo-features"}),t=(0,a.e)({controlName:T.r});return e||t?(0,i.tZ)(E,{}):null}},66975:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(66626),i=n(3796),o=n(379),a=n(22893),l=n(24766),c=n(22419),s=n(10539),u=n(93245),d=n(63163),f=n(75271),p=n(36200),h=n(20622),m=n(14118),g=n(99595),v=n(11006),y=n(27840),b=n(19602),w=n(9834),Z=n.n(w),x=n(41733),C=n(21262),k=n(71440),S=n(87903),_=n(82303);function T(){var e=(0,C._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,k.Ps)(T(),S.j7),D=n(38935),I=n(29574),B=n(12623),A=n(97242),P=n(26555),G=n(42173),L=n(71253),N=n(66164),O=n(25462),U=n(62279),M=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"],X=(0,f.memo)(function(e){var t=e.content,n=(0,I.Gn)("fontSize").preferences.fontSize,r=(0,f.useCallback)(function(e){return(0,i.tZ)(B.Z,(0,x._)({},e))},[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(P.D,{css:(0,U.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:d.TV.foregroundDefault,fontFamily:"".concat(d.TV.fontFamilyDefault," !important"),fontSize:n,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:d.TV.foregroundDefault,fontWeight:d.TV.fontWeightMedium,marginBottom:d.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:d.TV.space8,borderBottom:"1px solid ".concat(d.TV.backgroundHigher),marginTop:d.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:d.TV.space24},h4:{fontSize:"1em",marginTop:d.TV.space16},h5:{fontSize:"0.875em"},h6:{color:d.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(d.TV.space16,")"),paddingRight:d.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:d.TV.space16,fontSize:n,fontFamily:"".concat(d.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:d.TV.space16,wordBreak:"normal",th:{fontWeight:d.TV.fontWeightMedium},"td, th":{padding:"".concat(d.TV.space8," ").concat(d.TV.space12),border:"1px solid ".concat(d.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:d.TV.backgroundDefault,borderTop:"1px solid ".concat(d.TV.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:d.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:d.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:d.TV.space16},ol:{listStyle:"decimal",marginBottom:d.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(d.TV.fontFamilyCode," !important"),margin:"".concat(d.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:d.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:d.TV.space16,borderLeft:"".concat(d.TV.space2," solid ").concat(d.TV.backgroundHighest),paddingLeft:d.TV.space16},"blockquote > *":{color:"".concat(d.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(d.TV.fontFamilyCode),color:d.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:d.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(d.TV.backgroundHighest)},a:{color:d.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:d.TV.space8,padding:0},details:{marginBottom:d.TV.space16,display:"block",background:d.TV.backgroundHigher,borderRadius:d.TV.borderRadius4,padding:d.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:d.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(d.TV.backgroundHighest),marginBottom:d.TV.space16,paddingBottom:d.TV.space16},hr:{height:1,backgroundColor:d.TV.backgroundHigher,margin:"".concat(d.TV.space24," 0"),border:0}}),allowedElements:M,remarkPlugins:[D.Ic,N.Z,O.Z,L.Z],linkTarget:"_blank",rehypePlugins:[G.Z],components:{code:r,img:A.Z},children:t})})}),F=n(48180),W=(0,f.memo)(function(e){var t,n=e.thread,w=e.message,C=(0,h.d)(),k=(0,g.Z)().showError,S=(0,r._)((t=(0,x._)({},E,{onError:function(e){k(e.message)},onCompleted:function(e){var t;(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)==="UserError"&&k(e.deleteThreadMessage.message)}}),_.D(R,t)),2),T=S[0],D=S[1].loading,I=(0,m.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),B=!!(n&&n.indexStart===n.indexEnd),A={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},P=(0,f.useMemo)(function(){return{diff:(0,F.Y)(w.timeCreated),full:(0,F.u)(w.timeCreated)}},[w]);if(!w.user)return null;var G=C===w.user.id?[{label:"Delete",icon:(0,i.tZ)(b.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(u.G,{children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.pb(4)],children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.rowWithGap(8)],children:[(0,i.tZ)(Z(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(w.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(s.n,{small:!0,src:w.user.image,username:w.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(c.u,{tooltip:P.full,placement:"top",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:P.diff})})}),G.length>0&&I?(0,i.tZ)(p.Z,{items:G,onItemClick:function(e){"Delete"!==e.label||D||T({variables:{id:w.id}})},label:"More"}):null]}),B?(0,i.tZ)(c.u,{tooltip:A.outdatedTooltip,children:(0,i.tZ)(o.D,{colorway:"negative",text:A.outdated})}):null]}),"StatusMessageContentType"===w.content.__typename&&"resolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(y.Z,{}),text:A.statusBanner.resolved}):null,"StatusMessageContentType"===w.content.__typename&&"unresolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(v.Z,{}),text:A.statusBanner.unresolved}):null,"TextMessageContentType"===w.content.__typename&&(0,i.tZ)(X,{content:w.content.text})]})})},48180:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(35574),i=n(20597),o=function(e){var t=new Date(e),n=new Date;return 60>(0,i.Z)(n,t)?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},79393:function(e,t,n){n.d(t,{AL:function(){return Z},GD:function(){return m},VO:function(){return h},Y:function(){return b},tT:function(){return v}});var r=n(41733),i=n(21262),o=n(71440),a=n(87903),l=n(9122),c=n(82303);function s(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r._)({},p,e);return l.a(h,t)}var g=(0,o.Ps)(u(),a.j7);function v(e){var t=(0,r._)({},p,e);return c.D(g,t)}var y=(0,o.Ps)(d(),a.j7);function b(e){var t=(0,r._)({},p,e);return c.D(y,t)}var w=(0,o.Ps)(f(),a.j7);function Z(e){var t=(0,r._)({},p,e);return c.D(w,t)}},49638:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(41733),i=n(30509),o=n(66626),a=n(63257),l=n(87903),c=n(65894),s=n(79393),u=n(1193),d=n(99595),f=n(16155),p=n(83059),h=n(23882),m=n(98713),g=n(30826),v=n.n(g),y=n(75271),b=n(69284);function w(e,t){if(!e)return null;var n,r=e.state.field(b.OQ),i=e.state.field(b.ZS);return(null!==(n=r[t])&&void 0!==n?n:(null==i?void 0:i.id)===t?i:null)||null}function Z(e,t){if(!e)return null;var n=w(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var g=(0,d.Z)().showError,x=(0,f.Z)(),C=(0,c.Z)().map(function(e){return e.username}),k=(0,h.Z)().fs,S=(0,s.GD)({variables:{id:e}}),_=S.data,T=S.error,E=S.loading,R=S.client,D=function(){if(E||!_){var n;return!!t&&(null===(n=t.state.field(b.ZS))||void 0===n?void 0:n.id)===e}return"AnnotationAnchor"!==_.thread.__typename}(),I=(0,y.useMemo)(function(){return E||!_?null:"UserError"===_.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===_.thread.__typename?_.thread:null},[_,e,E]),B=(0,o._)((0,s.tT)({onError:function(e){return g(e.message)},update:function(e,t){var n,r;if(t.errors){t.errors.forEach(function(e){return g(e.message)});return}if((null===(r=t.data)||void 0===r?void 0:null===(n=r.createThread)||void 0===n?void 0:n.__typename)==="UserError"){g(t.data.createThread.message);return}}}),1)[0],A=(0,o._)((0,s.AL)({onError:function(e){return g(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return g(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&g(r.message)}}),1)[0],P=(0,o._)((0,s.Y)({onError:function(e){return g(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return g(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&g(r.message)}}),1)[0],G=(0,o._)((0,l.Hj)(),1)[0],L=(0,p.Z)(function(){return v()(G,1e3,{trailing:!1})},[G]),N=function(){var e=null==_?void 0:_.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:D,error:T,loading:E,getHighlight:Z,getLatestAnchor:function(){return w(t,e)},updateThread:function(e){var t,n=e.changes,o=(null==_?void 0:null===(t=_.thread)||void 0===t?void 0:t.__typename)==="AnnotationAnchor"?_.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,n),{isResolved:"boolean"==typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,c=o.messageId,d=(0,m.kW)(l,{users:(0,a._)(C).concat(["everyone"])}),f={id:c,text:l,mentions:d.mentions};if(D&&t&&n){var p=t.state.field(b.ZS),h={id:e,replId:x,indexStart:null==p?void 0:p.indexStart,indexEnd:null==p?void 0:p.indexEnd,otVersion:k.getOTVersion(n),path:n};B({variables:{thread:h,message:f,highlight:Z(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},h,N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},h),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==_?void 0:_.currentUser}});var g=R.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(g){var v,y,w=(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)==="ThreadsByFileResult"?g.threadsByFile.threads:[],S=N().user;R.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(w).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:S,isResolved:!1,participants:[S]},h)])}}})}return}var T=(null==_?void 0:null===(v=_.thread)||void 0===v?void 0:v.__typename)==="AnnotationAnchor"?_.thread:null;if(!T)throw Error("expected thread");A({variables:{replId:x,threadId:T.id,threadMessage:f,highlight:Z(t,T.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},T),{messages:(0,a._)(T.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:T.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(t){L({variables:{threadId:e,messageId:t.messageId,message:null}})}}}},1193:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},84531:function(e,t,n){n.d(t,{x:function(){return E},y:function(){return T}});var r=n(27387),i=n(63257),o=n(96583),a=n(51305),l=n(25722),c=n(96949),s=n(12285),u=function(){"use strict";function e(t){(0,s._)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),d=n(76330),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,d.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,d.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,d.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(f.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return g.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=f.buildSuite({tests:o,meta:a});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},p="__UNIT_TEST_RESULT_START__",h="__UNIT_TEST_RESULT_END__",m="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,d.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,d.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(p,'");\n        System.out.println(out);\n        System.out.println("').concat(h,'");\n    }\n}');function g(){return(g=(0,r._)(function(e){var t,n,r,l,s,u,g,v,y,b,w,Z,x,C,k,S,_,T,E,R,D;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,l=e.logger,s=e.suiteCode,g=l.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),g("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:s,filename:"".concat(f.testSuiteName(),".java")})];case 2:if(v=o.sent().error)return f.captureSetupError({tag:"Failed to create suite code file",raw:v}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return g("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:m,filename:"".concat(f.testRunnerName(),".java")})];case 3:if(y=o.sent().error)return f.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return l.clearLogs(),g=l.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")];case 6:if(w=(b=o.sent()).output,Z=b.error)return x="Failed to fetch working directory java files",f.captureSetupError({tag:x,raw:Z}),[2,{error:"".concat(x,"\r\n\r\n")+(null==w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+Z}];if("string"!=typeof w)throw Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\x00"),k=".:./target/dependency/*",[4,(u=t).exec.apply(u,["javac","-classpath",k,"-d","."].concat((0,i._)(C)))];case 7:if(_=(S=o.sent()).output,T=S.error)return[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null==_?void 0:_.replace(/\n/g,"\n\r"))+"\r\n\r\n"+T}];return g("Running your tests"),[4,t.exec("java","-classpath",k,(0,d.Og)(f.testRunnerName()))];case 8:if(R=(E=o.sent()).output,D=E.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==R?void 0:R.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!=typeof R)throw Error("expected runOutput to be a string");return[2,{result:JSON.parse(R.slice(R.indexOf(p)+p.length,R.lastIndexOf(h))),error:null}]}})})).apply(this,arguments)}var v=function(e){return!!e&&e.trim().length>0&&e.split("\n").some(function(e){return!(e.trim().startsWith("#")||""===e.trim())})},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),v(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),v(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},b="__UNIT_TEST_RESULT_START__",w="__UNIT_TEST_RESULT_END__",Z="import unittest\nimport ".concat((0,d.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,d.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(b,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(w,"');");function x(){return(x=(0,r._)(function(e){var t,n,r,i,l,s,u,f,p,h,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:if(u=o.sent().error)return y.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:Z,filename:"".concat(y.testRunnerName(),".py")})];case 3:if(f=o.sent().error)return y.captureSetupError({tag:"Failed to create test runner file",raw:f}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(a.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,d.Og)("".concat(y.testRunnerName(),".py")))];case 5:if(h=(p=o.sent()).output,m=p.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==h?void 0:h.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!=typeof h)throw Error("expected runoutput to be a string");return[2,{result:JSON.parse(h.slice(h.indexOf(b)+b.length,h.lastIndexOf(w))),error:null}]}})})).apply(this,arguments)}var C={testRunnerName:function(){throw Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(C.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return S.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function k(){return(k=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.exec("sh","-c","which jest &> /dev/null && echo 1 || echo 0")];case 1:if("1"===((t=n.sent()).output?t.output.trim():null))return[2];return[4,e.exec("npm","install","-g","jest@24.x.x")];case 2:return n.sent(),[2]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t,n,r,i,l,s,u,f,p,h,m,g,v,y,b,w,Z,x,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(C.testSuiteName(),".js")})];case 2:if(u=o.sent().error)return C.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,d.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,d.e3)({fs:n,code:JSON.stringify(h),filename:p})];case 3:if(m=o.sent().error)return C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,function(e){return k.apply(this,arguments)}(t)];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),s=i.startLogSpinner("Running your tests"),g=(0,d.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",g,"--config",(0,d.Og)(p),"--forceExit","--passWithNoTests")];case 6:if(y=(v=o.sent()).output,(b=v.error)&&!b.endsWith(f.toString()))return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}];return s("Parsing your test results"),[4,n.readFile(g)];case 7:if((w=o.sent()).error)return C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}];if((Z=JSON.parse(w.content.toString())).success)return[2,{error:null,result:{passed:!0,failures:[]}}];if(!(S=(x=Z.testResults[0]).assertionResults.filter(function(e){return"passed"!==e.status}).map(function(e){return{name:e.title,stack:e.failureMessages[0]}})).length)return[2,{error:x.message.replace(/\n/g,"\r\n")}];return[2,{error:null,result:{passed:!1,failures:S}}]}})})).apply(this,arguments)}var _={java10:f,java10_beta:f,java:f,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function T(e){return e in _}function E(e){if(!T(e))throw Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(_)));return _[e]}},76330:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return p},e3:function(){return d}});var r=n(27387),i=n(96583),o=n(25722),a=n(43257),l=n(72106),c=n(73878),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o;return(0,i.Jh)(this,function(i){return t=e.fs,n=e.code,r=s+e.filename,o=a.Z.from(n,"utf8"),[2,t.writeFile(r,o)]})})).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:if((t=r.sent()).error)return[2];return[4,Promise.all(t.children.map(function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e(function(e){e.setTag("unitTestLib","true"),o.Tb(n)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}},48424:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(23882),o=n(75271),a=n(58997),l=n(84531);function c(){var e=(0,i.Z)().dotReplit,t=(0,r._)((0,o.useState)(null),2),n=t[0],c=t[1],s=(0,r._)((0,o.useState)(!0),2),u=s[0],d=s[1];return(0,o.useEffect)(function(){var t=!1,n=e.watch(function(e){if(t||(t=!0,d(!1)),e.error){e.error===a.Yt.NotFound&&c(null);return}var n,r,i=null===(r=e.config.unitTest)||void 0===r?void 0:null===(n=r.language)||void 0===n?void 0:n.toLowerCase();i&&(0,l.y)(i)?c(i):c(null)});return function(){n()}},[e]),{language:n,isLoading:u}}},36670:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(3796),i=n(75271);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},87061:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(79904),o=n(36809),a=n(78719),l=n(63163),c=n(12394),s=(0,o.X)({button:[l.l0.display.inlineBlock]});function u(e){var t=e.openNetworkingTool;return(0,r.tZ)(c.Z,{pane:{type:"webview"},bodyText:(0,r.BX)(r.HY,{children:["No web server is currently running with ports available to view. Try running your Repl, and check the"," ",(0,r.tZ)(i.zx,{css:s.button,text:"Networking tool",iconLeft:(0,r.tZ)(a.Z,{}),size:"small",onClick:t})," ","to ensure ports are being forwarded correctly."]})})}},60357:function(e,t,n){n.d(t,{I5:function(){return h},sY:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    authorizations {\n      addCustomDomain {\n        isAuthorized\n      }\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),p=(0,o.Ps)(s(),f,d);function h(e){var t=(0,r._)({},u,e);return a.a(p,t)}},73452:function(e,t,n){n.d(t,{oB:function(){return ez},U8:function(){return eJ},Cl:function(){return ej}});var r,i,o=n(41733),a=n(66626),l=n(3796),c=n(23666),s=n(16155),u=n(79685),d=n(18757),f=n(93245),p=n(36809),h=n(63163),m=n(22630),g=n(12666),v=n(79904),y=n(9602),b=n(24766),w=n(22419),Z=n(27840),x=n(7935),C=n(42427),k=n(39031),S=function(e){var t=e.onClick,n=e.onDismiss,r=e.rounded,i=[h.l0.colWithGap(4),h.l0.align.start,h.l0.p(4),h.l0.pl(8),h.l0.flex.growAndShrink(1),r&&h.l0.borderRadius(8),{borderWidth:1,borderStyle:"solid",background:h.TV.accentPrimaryDimmest,borderColor:h.TV.accentPrimaryDimmer,color:h.TV.accentPrimaryStrongest}],o="function"==typeof n;return(0,l.tZ)(f.G,{css:i,children:(0,l.BX)(f.G,{css:[h.l0.rowWithGap(6),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.width("100%")],children:[(0,l.BX)(f.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(f.G,{css:[h.l0.colWithGap(4),h.l0.justify.start,h.l0.align.start],children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,t){return(0,l.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.center],children:[(0,l.tZ)(Z.Z,{size:12}),(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:e})]},t)})}),delay:"none",children:(0,l.tZ)(k.Z,{})}),(0,l.tZ)(b.xv,{css:h.l0.flex.growAndShrink(1),variant:"small",children:"Ready to share with the world?"})]}),(0,l.tZ)(v.zx,{colorway:"primary",iconLeft:(0,l.tZ)(C.Z,{}),text:"Deploy your app",onClick:t}),o?(0,l.tZ)(f.G,{css:{marginLeft:"auto"},children:(0,l.tZ)(y.hU,{alt:"dismiss",onClick:n,children:(0,l.tZ)(x.Z,{})})}):null]})})},_=n(96949),T=n(43540),E=n(75271);function R(e){var t,n=e.repl,r=e.onClick,i=(0,T.Z)("workspace","workspace-deployments-webview-banner"),o=i.shouldDisplay,a=i.register,c=i.dismiss;(0,E.useEffect)(function(){a()},[a]);var s=n.authorizations.viewDeploymentConfig.isAuthorized,u=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&n.hostingDeployment.currentBuild;return s&&!u&&o?(0,l.tZ)(f.G,{children:(0,l.tZ)(S,{onClick:function(){(0,_.j)(_.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),c(),r()},onDismiss:c,rounded:!1})}):null}var D=n(98924);function I(e){var t=e.actionType,n=(0,D._)(e,["actionType"]);(0,_.j)(_.U3.WS_WEBVIEW_USED,(0,o._)({type:t},n))}var B=n(30509),A=n(25722),P=n(12285),G=n(52657),L=n(83059),N=function e(t){"use strict";var n=t.initialRelativeUrl,r=t.initialPort,i=t.onChange,o=t.navigateTo,a=this;(0,P._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){"blank"!==e&&"srcdoc"!==e&&((e!==a.getCurrentRelativeUrl()||t!==a.getCurrentPort())&&(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges())},this.relativeUrlUpdate=function(e){if(a.pendingNavigations>0){a.pendingNavigations-=1;return}a.push(e,a.getCurrentPort())},this.back=function(){I({actionType:"history_back"}),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){I({actionType:"history_forward"}),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!=t?t:a.getCurrentPort();a.navigateTo.current(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;I({actionType:"refresh"}),a.navigateTo.current(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=i,this.pendingNavigations=0,this.navigateTo=o,this.init(n,r)},O=n(42516),U=n(62279),M=n(71051),X=n(39808),F=n(44935),W=n(58532),V=n(3615),H=n(14548),z=n(48155),j=n(30231),q=n(89313),J=n(27060),Y=n(10578),$=n(94970),K=n(10055),Q=n(98724),ee=n(54300),et=n(31089),en=n(31252),er=n(9834),ei=n.n(er),eo=n(21262),ea=n(71440),el=n(9122),ec=n(82303);function es(){var e=(0,eo._)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return es=function(){return e},e}function eu(){var e=(0,eo._)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}function ed(){var e=(0,eo._)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return ed=function(){return e},e}function ef(){var e=(0,eo._)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return ef=function(){return e},e}function ep(){var e=(0,eo._)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var eh={},em=(0,ea.Ps)(es()),eg=(0,ea.Ps)(eu(),em),ev=(0,ea.Ps)(ed()),ey=(0,ea.Ps)(ef(),em),eb=(0,ea.Ps)(ep(),em),ew=n(54505),eZ=n(77402),ex=n(30043),eC=n(19602),ek=n(32508),eS=n.n(ek);function e_(e){switch(e.status){case"verified":return(0,l.tZ)(Z.Z,{color:h.TV.accentPositiveDefault});case"failed":return(0,l.tZ)(x.Z,{color:h.TV.accentNegativeDefault});case"verifying":return(0,l.tZ)(Y.Z,{color:h.TV.accentPrimaryDefault});default:return null}}function eT(e){var t,n=e.replId,r=e.hostedUrl,i=e.desiredARecord,c=e.existingDomain,s=e.onLink,u=e.onGoBack,d=e.onLinkStarted,p=e.onStateChanged,m=(0,a._)((0,E.useState)(c?"loading":null),2),g=m[0],y=m[1],w=(0,a._)((0,E.useState)(!1),2),Z=w[0],x=w[1],C=(0,a._)((0,E.useState)(null),2),k=C[0],S=C[1],_=(0,a._)((0,E.useState)(!1),2),T=_[0],R=_[1],D=(0,a._)((t=(0,o._)({},eh,void 0),ec.D(ey,t)),2),I=D[0],B=D[1],P=(0,E.useRef)(null),G=(0,E.useRef)(null),L=(0,E.useRef)(null),N=function(e){(null==e?void 0:e.current)&&e.current.select()},O=function(e){(0,ew.Z)(e).catch(function(e){A.$e(function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),A.Tb(e)})})},U=(0,a._)((0,E.useState)(c||""),2),M=U[0],X=U[1];(0,E.useEffect)(function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&s()},[B.data,s]);var W=function(){try{var e=new URL("/",M);X(e.hostname)}catch(e){}},V=function(e){y(e),p()},H=eS()(M,{require_valid_protocol:!1})&&M.split(".").length>=2,z=H&&2===M.split(".").length,j=r.replace(/^https:\/\//,""),q="replit-verify=".concat(n),J=(0,et.U)();return(0,l.BX)(f.G,{css:[h.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,l.BX)(b.xv,{children:["Learn more"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/additional-resources/hosting-web-pages",target:"_blank",children:"here"}),"."]})]}),(0,l.BX)(f.G,{css:[h.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("domain"),children:(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,l.tZ)(F.II,{className:"cname-url",readOnly:"loading"===g,value:M,onChange:function(e){X(e.target.value)},onBlur:function(){W()},placeholder:"example.com",id:J("domain")})]}),z&&!T?(0,l.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[(0,l.BX)(f.G,{css:[h.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("record"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,l.tZ)("code",{children:"A"})," Record"]})}),(0,l.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"A"}),(0,l.tZ)(F.II,{readOnly:!0,ref:P,onChange:function(){return null},value:i,onFocus:function(){return N(P)},id:J("record")}),(0,l.tZ)(v.zx,{onClick:function(){return O(i)},text:"Copy"})]})]}),(0,l.tZ)(f.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,l.tZ)(v.zx,{variant:"outlined",onClick:function(){return R(!0)},text:"Use CNAME record instead."})})]}):null,H&&(T||!z)?(0,l.BX)(f.G,{css:[h.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("CNAMERecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,l.tZ)("code",{children:"CNAME"})," Record"]})}),(0,l.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"CNAME"}),(0,l.tZ)(F.II,{readOnly:!0,ref:L,onChange:function(){return null},value:j,onFocus:function(){return N(L)},id:J("CNAMERecord")}),(0,l.tZ)(v.zx,{onClick:function(){return O(j)},text:"Copy"})]}),z?(0,l.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[(0,l.tZ)(b.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,l.tZ)(f.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,l.tZ)(v.zx,{onClick:function(){return R(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}):null,H?(0,l.BX)(f.G,{css:[h.l0.colWithGap(4)],children:[z?(0,l.tZ)("label",{htmlFor:J("txtRecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,l.tZ)("code",{children:"TXT"})," Record"]})}):(0,l.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,l.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,l.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:M}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"TXT"}),(0,l.tZ)(F.II,{readOnly:!0,ref:G,onChange:function(){return null},value:q,onClick:function(){return N(G)},id:J("txtRecord")}),(0,l.tZ)(v.zx,{onClick:function(){return O(q)},text:"Copy"})]})]}):null,"loading"===g?(0,l.tZ)(f.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,l.tZ)(eD,{replId:n,domain:M,onVerified:function(){return V("verified")},onError:function(){return V("error")}})}):null,"verified"===g?(0,l.tZ)(f.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,l.tZ)(b.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===g||k?(0,l.tZ)(f.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,l.BX)(b.xv,{multiline:!1,children:["Creating the domain link failed",k?": "+k:"","."]})}):null,(0,l.BX)(f.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,l.tZ)(v.zx,{onClick:u,text:"Close"}),H&&null===g?(0,l.tZ)(v.zx,{disabled:Z,onClick:function(){x(!0),S(null),I({variables:{replId:n,domain:M}}).then(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;(null==n?void 0:n.__typename)==="Repl"?(S(null),V("loading")):(((null==n?void 0:n.__typename)==="ServiceUnavailable"||(null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError")&&S(null==n?void 0:n.message),V("error")),x(!1),d()}).catch(function(e){x(!1),S(e.message)})},text:"".concat(Z?"Linking domain...":"Link domain"),iconLeft:(0,l.tZ)(eZ.Z,{}),colorway:"primary"}):null]})]})}(r=i||(i={})).Verified="verified",r.Verifying="verifying",r.Failed="failed";var eE=(0,U.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),eR=(0,p.X)({loadingIndicator:[h.l0.width("20px"),h.l0.height("20px"),h.l0.border({color:h.TV.accentPrimaryDimmer,direction:"top",width:3}),{aspectRatio:"1 / 1",borderRadius:"100%",transform:"rotate(0deg)",animation:"linear ".concat(eE," 1s infinite")}]});function eD(e){var t=e.domain,n=e.replId,r=e.onVerified,i=e.onError,c=(d=(0,o._)({},eh,{variables:{replId:n,domain:t},pollInterval:1e3}),el.a(ev,d)),s=c.data,u=c.stopPolling;if((0,E.useEffect)(function(){if(s&&"Repl"===s.repl.__typename){var e,t,n=s.repl;if((null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)==="NotFoundError"){i();return}if((null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)==="DomainStatus2"){var o=n.checkDomain2,a=o.retry,l=o.verified;if(!l&&!a){i();return}(l||!a)&&u(),l&&r()}}},[s,u,r,i]),(null==s?void 0:s.repl.__typename)==="Repl"&&s.repl.checkDomain2){var d,p,m,g,v,y,w="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,Z=null;if(null==w?void 0:w.records){var x=w.records;x.__typename,Z=(0,D._)(x,["__typename"])}var C=null;return(null==w?void 0:w.status)||((null===(y=s.repl.checkDomain2)||void 0===y?void 0:y.__typename)==="ServiceUnavailable"&&(C=s.repl.checkDomain2.message),C||(C="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.")),(0,l.BX)(f.G,{css:[h.l0.colWithGap(16),h.l0.justify.spaceBetween],children:[(0,l.BX)(f.G,{css:[h.l0.rowWithGap(16),h.l0.align.center],children:[(0,l.tZ)("div",{css:eR.loadingIndicator}),(0,l.tZ)("div",{children:C})]}),Z||(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.__typename)==="DomainStatus2"&&(null===(g=s.repl.checkDomain2)||void 0===g?void 0:g.retry)||(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.__typename)==="ServiceUnavailable"?(0,l.BX)(f.G,{children:[(0,l.tZ)("br",{}),Z?(0,l.BX)(f.G,{children:["Currently, your domains records show:",(0,l.tZ)("pre",{css:[h.l0.overflow("scroll")],children:Object.entries(Z).map(function(e){var n=(0,a._)(e,2),r=n[0],i=n[1];return null==i?void 0:i.map(function(e){return(0,l.BX)("div",{children:[t," ",r," ",e]},"{domain}-{dnsType}")})})})]}):(0,l.tZ)(b.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null]})}return(null==s?void 0:s.repl.__typename)==="Repl"&&(null===(p=s.repl.checkDomain2)||void 0===p?void 0:p.__typename)==="NotFoundError"?(0,l.tZ)(l.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function eI(e){var t,n=e.replId,r=e.domain,i=e.onUnlink,c=e.onGoBack,s=(0,a._)((t=(0,o._)({},eh,{variables:{input:{id:n,removeDomain:r}}}),ec.D(eb,t)),2),u=s[0],d=s[1];return(0,E.useEffect)(function(){d.data&&d.data.updateRepl.repl&&i()},[d.data,i]),(0,l.BX)(f.G,{css:[h.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,l.BX)(b.xv,{children:["Are you sure you want to unlink"," ",(0,l.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+r,children:r}),"?"]})]}),(0,l.BX)(f.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,l.tZ)(v.zx,{onClick:c,text:"Cancel"}),(0,l.tZ)(v.zx,{onClick:function(){d.loading||u()},text:d.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,l.tZ)(eC.Z,{}),disabled:d.loading})]})]})}function eB(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,c=e.domains,s=e.refetch,u=(0,a._)((0,E.useState)("listing"),2),d=u[0],p=u[1],m=(0,a._)((0,E.useState)(null),2),g=m[0],y=m[1],Z=null;return"listing"===d?Z=(0,l.BX)(f.G,{css:[h.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,l.tZ)(f.G,{css:[h.l0.colWithGap(16)],children:c.map(function(e){return e?(0,l.tZ)(f.G,{children:(0,l.BX)(f.G,{css:[h.l0.colWithGap(4),h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,l.BX)(f.G,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.width("100%")],children:[(0,l.tZ)(f.G,{css:[h.l0.flex.shrink(1)],children:(0,l.tZ)(w.u,{tooltip:e.domain,children:(0,l.tZ)(b.xv,{multiline:!1,children:e.domain})})}),(0,l.tZ)(f.G,{children:(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(b.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,l.tZ)(e_,{status:e.state})})})]}),(0,l.BX)(f.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,h.l0.align.center,h.l0.width("100%"),"verified"!==e.state&&h.l0.pl(12)],children:[(0,l.tZ)(v.zx,{text:"Unlink",css:h.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){y(e.domain),p("unlinking")}}),"verified"!==e.state?(0,l.tZ)(v.zx,{text:"Check status",css:h.l0.width("50%"),onClick:function(){y(e.domain),p("linking")}}):null]})]})},e.domain):null})})]}),(0,l.tZ)(v.zx,{text:"Create domain link",onClick:function(){return p("linking")},iconLeft:(0,l.tZ)(ex.Z,{})})]}):"linking"===d?Z=(0,l.tZ)(eT,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:g,onLink:o,onGoBack:function(){p("listing"),y(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===d&&null!==g&&(Z=(0,l.tZ)(eI,{replId:t,domain:g,onUnlink:function(){s(),p("listing"),i()},onGoBack:function(){p("listing"),y(null)}})),(0,l.BX)(f.G,{css:[h.l0.colWithGap(16)],children:[(0,l.tZ)(b.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,l.BX)(b.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),Z]})}var eA=n(24281),eP=n(23522),eG=n(41960),eL=(0,U.iv)([h.l0.borderRadius(6),h.l0.color.foregroundDimmer,h.l0.height(24)]),eN=[h.l0.reset.button,F.u3,h.l0.rowWithGap(0),h.l0.flex.grow(0),h.l0.color.accentPositiveStronger,h.l0.fontSize("small"),h.l0.focusRing,{"&:hover":[h.l0.cursor.pointer,h.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},h.l0.align.center,h.l0.py(0),h.l0.px(4)],eO=(0,p.X)({root:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween,h.l0.border({color:h.TV.outlineDimmest,direction:"bottom"}),h.l0.p(2),h.l0.container("root"),h.l0.zIndex(1),h.l0.p(4),h.l0.gap(4)],devControls:[h.l0.flex.row,h.l0.gap(4)],navControls:[h.l0.align.center,h.l0.rowWithGap(4),h.l0.flex.growAndShrink(1)],urlWrapper:[h.l0.position.relative,h.l0.flex.row,h.l0.flex.growAndShrink(1)],urlOptionsRoot:[h.l0.rowWithGap(0),h.l0.flex.growAndShrink(1),h.l0.overflow("hidden")],urlOptions:[h.l0.p(8),h.l0.colWithGap(6),h.l0.borderRadius(4)],urlOptionsSection:[h.l0.colWithGap(4),h.l0.pb(8),h.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[h.l0.rowWithGap(0),h.l0.justify.spaceBetween,h.l0.flex.grow(1)],portRadioGroup:[h.l0.colWithGap(8)],portOption:[h.l0.rowWithGap(8),h.l0.color.foregroundDimmer],portOptionSelected:[h.l0.rowWithGap(8),h.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[h.l0.cursor.pointer,h.l0.color.foregroundDefault]}],temporaryDevLinkWrapper:[h.l0.rowWithGap(4)],temporaryDevLinkText:{flex:"0 1 auto"},temporaryDevLink:[h.l0.display.block,h.l0.color.accentPositiveStronger,h.l0.fontSize("small"),h.l0.focusRing,{wordBreak:"break-all","&:hover":[h.l0.cursor.pointer,h.l0.color.accentPositiveStrongest]}],url:eN,urlSelected:[eN,h.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[h.l0.py(0),h.l0.fontSize(12),h.l0.flex.grow(1)],urlPath2:[h.l0.py(0),h.l0.fontSize(12),h.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[h.l0.backgroundColor.greenDimmer,h.l0.borderRadius(4),h.l0.p(2),{lineHeight:1,"&:hover":[h.l0.cursor.pointer,h.l0.backgroundColor.greenDefault]}],goButton:[h.l0.position.absolute,h.l0.right(4),h.l0.top("50%"),{transform:"translateY(-50%)"}],text:[h.l0.ml(8),h.l0.mr(4),h.l0.color.foregroundDimmest],buttons:[h.l0.flex.row,h.l0.align.center,(0,O._)({},h.nC.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[h.l0.p(6),h.l0.borderRadius(4),h.l0.flex.shrink(0),{border:"none"}],fakeUrl:[h.l0.fontSize(12),h.l0.border(),{boxSizing:"content-box"},h.l0.borderRadius(6),h.l0.px(8),h.l0.py(2),h.l0.flex.grow(1),h.l0.rowWithGap(4),h.l0.align.center],devtoolsErrorsBadge:[h.l0.position.absolute,h.l0.center,h.l0.textAlign.center,h.l0.backgroundColor.accentNegativeStronger,h.l0.color.accentNegativeDimmest,h.l0.right(0),h.l0.top(-2),h.l0.p(2),h.l0.minWidth(14),h.l0.height(14),h.l0.borderRadius(16),h.l0.fontSize(10)]});function eU(e){var t=e.children;return(0,l.tZ)(w.u,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:t})}function eM(e){var t=e.replId,n=e.url,r=e.webviewEventMonitorState,i=e.navigationState,s=e.forwardedPorts,u=e.canEditDomain,d=e.devtoolsErrorCount,p=e.iframeLoading,m=e.onToggleDevtools,g=e.onOpenPortSettings,y=(0,c.Z)(),w=function(e){var t,n,r,i=(t=(0,o._)({},eh,{variables:{replId:e}}),el.a(eg,t)),l=i.data,c=i.refetch,s=(0,a._)((0,E.useState)(!1),2),u=s[0],d=s[1],f=(0,E.useRef)(!1);if(!l||"Repl"!==l.repl.__typename)return{showEditReplcoDomainButton:!1};var p=null!==(r=null===(n=l.repl.domains)||void 0===n?void 0:n.filter(Boolean).filter(function(e){return!(null==e?void 0:e.hosting_deployment_id)}).map(function(e){return{domain:e.domain,state:e.state}}))&&void 0!==r?r:[];return p.length||f.current?(f.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:d,isEditingDomain:u,editDomainProps:{domains:p,refetch:c,replId:e,apexProxy:l.repl.apexProxy,hostedUrl:l.repl.hostedUrl,onUnlink:function(){c(),d(!1)},onLink:function(){c(),d(!1)}}}):{showEditReplcoDomainButton:!1}}(t),Z=(0,l.tZ)(eV,{});return"external-page"===r.state?Z=(0,l.tZ)(eW,{backToLocal:function(){return i.refresh()}}):"active"===r.state&&(Z=(0,l.tZ)(eF,{url:n,navigationState:i,forwardedPorts:s,iframeLoading:p,onOpenPortSettings:g})),(0,l.BX)(H.Tg,{css:eO.root,children:[Z,(0,l.tZ)(f.G,{css:h.l0.flex.row,children:(0,l.BX)(f.G,{css:eO.buttons,children:[u&&w.showEditReplcoDomainButton?(0,l.BX)(l.HY,{children:[(0,l.tZ)(v.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return w.setIsEditingDomain(!w.isEditingDomain)},iconLeft:(0,l.tZ)(q.Z,{size:16})}),(0,l.tZ)(W.u,{isOpen:w.isEditingDomain,onRequestClose:function(){return w.setIsEditingDomain(!1)},children:(0,l.tZ)(eB,(0,o._)({},w.editDomainProps))})]}):null,(0,l.BX)(f.G,{css:eO.devControls,children:["active"===r.state?(0,l.BX)(f.G,{css:h.l0.position.relative,children:[(0,l.tZ)(v.zx,{size:"small",variant:"outlined",onClick:m,css:eL,text:"Devtools",iconLeft:(0,l.tZ)(Q.Z,{})}),d>0?(0,l.tZ)(f.G,{css:eO.devtoolsErrorsBadge,children:(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:d>99?"99+":d.toString()})}):null]}):null,(0,l.tZ)(eU,{children:(0,l.tZ)(X.Z,{size:"small",variant:"outlined",css:eL,href:i.getExternalUrl(),target:"_blank",iconLeft:(0,l.tZ)(J.Z,{}),text:y?"Open in the browser":"New tab",onClick:function(){I({actionType:"open_new_window"})}})})]})]})})]})}function eX(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=n.canNavigateToInputRelativeUrl,c=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.selectedPort,p=n.setPort,h=(0,a._)((0,E.useState)(!1),2),g=h[0],v=h[1],w=(0,et.U)(),Z=w("radioGroup");return(0,l.BX)(f.G,{css:eO.urlOptionsRoot,children:[(0,l.BX)(eG.xo,{isOpen:g,onOpenChange:v,label:"Show URL Options",background:"higher",children:[(0,l.BX)("button",{css:g?eO.urlSelected:eO.url,children:[(0,l.tZ)(eU,{children:(0,l.tZ)(f.G,{css:eO.urlDots,children:"{...}"})}),".".concat(t.includes("replit.dev")?"replit.dev":"repl.co").concat((0,m.O2)(d)?"":":"+d)]}),(0,l.BX)(H.Tg,{css:eO.urlOptions,children:[(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.BX)(f.G,{css:eO.urlOptionsTitle,children:[(0,l.BX)(b.xv,{children:["Listening on ",(0,M.Z)("port",r.length),":"]}),(0,l.tZ)(y.hU,{alt:"Networking tool",onClick:i,children:(0,l.tZ)(K.Z,{})})]}),(0,l.tZ)(V.E,{tag:"fieldset",css:eO.portRadioGroup,name:Z,value:d.toString(),onChange:function(e){p(parseInt(e.target.value,10)),v(!1)},children:r.map(function(e,t){return(0,l.BX)(f.G,{css:d===e.configuration.externalPort?eO.portOptionSelected:eO.portOption,children:[(0,l.tZ)(V.Y,{id:w(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,l.tZ)("label",{htmlFor:w(e.configuration.externalPort),css:eO.portOptionLabel,children:":".concat(e.configuration.localPort,"  :").concat(e.configuration.externalPort)})]},"".concat(t,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.tZ)(b.xv,{children:"Dev URL:"}),(0,l.BX)(f.G,{css:eO.temporaryDevLinkWrapper,children:[(0,l.tZ)(b.xv,{css:eO.temporaryDevLinkText,maxLines:1,children:(0,l.tZ)(ei(),{legacyBehavior:!0,href:t,passHref:!0,children:(0,l.tZ)("a",{css:eO.temporaryDevLink,target:"_blank",children:t})})}),(0,l.tZ)(eP.m,{textToCopy:t,tooltipText:"Copy link",tooltipDelay:"none",size:18})]}),(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})]})]}),(0,l.tZ)(F.II,{css:eO.urlPath2,style:g?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&c()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}})]})}function eF(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.iframeLoading,o=e.onOpenPortSettings,a=n.canNavigateBack,c=n.navigateBack,s=n.canNavigateForward,u=n.navigateForward,d=n.canNavigateToInputRelativeUrl,p=n.navigateToInputRelativeUrl,h=n.refresh,m=(0,eA.NJ)(),g=(0,en.gf)("webviewpane.reload");return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(y.hU,{alt:"Back",tooltipDelay:"long",onClick:c,disabled:!a,css:eO.navButton,children:(0,l.tZ)(z.Z,{})}),(0,l.tZ)(y.hU,{alt:"Forward",tooltipDelay:"long",onClick:u,disabled:!s,css:eO.navButton,children:(0,l.tZ)(j.Z,{})}),(0,l.tZ)(y.hU,{alt:"Refresh".concat(g?" (".concat((0,en.Ih)(g,m),")"):""),tooltipDelay:"long",onClick:h,css:eO.navButton,children:i?(0,l.tZ)(Y.Z,{}):(0,l.tZ)($.Z,{})}),(0,l.BX)(f.G,{css:eO.urlWrapper,children:[(0,l.tZ)(eX,{url:t,navigationState:n,forwardedPorts:r,onOpenPortSettings:o}),(0,l.tZ)(H.Tg,{elevated:!0,css:eO.goButton,children:(0,l.tZ)(y.hU,{alt:"Go to URL",disabled:!d,onClick:p,size:18,tooltipContents:(0,l.tZ)(en.bM,{keyCombo:"Enter"}),children:(0,l.tZ)(j.Z,{})})})]})]})}function eW(e){var t=e.backToLocal,n=(0,a._)((0,E.useState)(!1),2),r=n[0],i=n[1];return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(v.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:eL,text:"Back to my page",iconLeft:r?(0,l.tZ)(Y.Z,{}):(0,l.tZ)(z.Z,{})}),(0,l.BX)(H.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,l.tZ)(ee.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eV(){return(0,l.tZ)(f.G,{css:eO.navControls,children:(0,l.BX)(H.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,l.tZ)(Y.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var eH=n(60357),ez=80;function ej(e,t){var n=function(e,t){var n=void 0;if((null==e?void 0:e.portType)==="external")n=null==e?void 0:e.port;else if((null==e?void 0:e.portType)==="local"){var r=t.find(function(t){return t.configuration.localPort===e.port});n=null==r?void 0:r.configuration.externalPort}return n}(e,t);return n||(t.length>0?t.find(function(e){return 80===e.configuration.externalPort})?80:t[0].configuration.externalPort:void 0)}var eq=(0,p.X)({desktopAppWebview:[h.l0.flex.growAndShrink(1),{border:"none",backgroundColor:h.TV.white}],iframe:[h.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:h.TV.white}],self:[h.l0.backgroundColor.backgroundDefault,h.l0.height("100%"),h.l0.borderRadius(4),{overflow:"hidden"}]});function eJ(e){var t,n,r,i,p,h,v,y,b,w,Z,x,C,k,S,T,D,P,O,U,M,X,F,W,V,H,z,j,q,J,Y,$,K,Q,ee,et=e.initialPort,en=e.initialPath,er=void 0===en?"/":en,ei=e.openPane,eo=e.containerRef,ea=e.openNetworkingTool,el=e.setRefreshCb,ec=e.ports,es=e.container,eu=(0,E.useId)(),ed=(0,s.Z)(),ef=(0,c.Z)(),ep=(0,eH.I5)({variables:{id:ed}}).data,eh=(null==ep?void 0:ep.repl.__typename)==="Repl"?ep.repl:null,em=(0,E.useRef)(null),eg=(0,E.useRef)(!1),ev=(0,a._)((0,E.useState)(!0),2),ey=ev[0],eb=ev[1],ew=(0,a._)((0,E.useState)(0),2),eZ=ew[0],ex=ew[1],eC=(0,m.J_)({replId:ed,ports:ec,container:es}),ek=(0,g.bg)(ec),eS=(n=(t={replId:ed,webviewId:eu,isHTML:(0,u.T)(),iframeOrWebviewRef:em,iframeSrc:null==eC?void 0:eC.iframeSrc,onLoaded:function(){return eb(!1)},onDevtoolsErrorCountChange:ex}).replId,r=t.webviewId,i=t.isHTML,p=t.iframeOrWebviewRef,h=t.iframeSrc,v=t.onLoaded,y=t.onDevtoolsErrorCountChange,w=(b=(0,a._)((0,E.useState)({state:"loading",relativeUrl:null}),2))[0],Z=b[1],x=(0,c.Z)(),(0,E.useEffect)(function(){if(x&&h){if(!p.current)throw Error("Expected iframe to be defined when iframerc exists");var e=p.current,t=new URL(h);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;if("did-navigate-in-page"===e.type&&v(),n.hostname!==t.hostname){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}Z(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[x,h,p,v]),(0,E.useEffect)(function(){if(!x&&h){var e=new URL(h);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin&&new URL(t.origin).hostname===e.hostname&&"object"==typeof t.data&&(null===(a=t.data)||void 0===a?void 0:a.type)){var a,l,c=p.current,s=t.data;if(null==s||!s.id||s.id===r)switch(s.type){case"ready":v(),t.data.wasShown&&(null==c||null===(l=c.contentWindow)||void 0===l||l.postMessage({type:"toggleDevtools",source:"automatic"},"*"));break;case"event":var u=t.data,d=u.event,f=u.payload;"error"===d?A.Tb(f):(0,_.j)(d,(0,B._)((0,o._)({},f),{replId:n,isHTML:i}));break;case"show-badge":y(t.data.count);break;case"page-navigation":if(s.payload.isExternal){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var h=s.payload.path;Z(function(e){return"active"===e.state&&e.relativeUrl===h?e:{state:"active",relativeUrl:h}})}}}},[n,r,x,i,h,p,v,y]),{webviewEventMonitorState:w}).webviewEventMonitorState,e_=null!=eC;(0,E.useEffect)(function(){ef&&e_&&em.current.addEventListener("dom-ready",function(){eg.current=!0})},[ef,e_]);var eT=(0,E.useCallback)(function(e,t){if(ex(0),eC&&em.current&&(null==eC?void 0:eC.iframeSrc)){if(ef){if(!eg.current)return;var n,r=em.current,i=new URL(e,eC.iframeSrc);t&&(i=(0,m.hw)(i.toString(),t)),r.loadURL(i.toString()),eb(!0);return}if(null===(n=em.current)||void 0===n?void 0:n.contentWindow){var o=(0,m.hw)(null==eC?void 0:eC.iframeSrc,t);o.searchParams.set("initialPath",e),o.searchParams.set("id",eu),em.current.src=o.href,eb(!0)}}},[eC,eu,ef]),eE=(k=(C={initialPort:et,initialPath:er,presentationalUrl:null==eC?void 0:eC.presentationUrl,webviewEventMonitorState:eS,navigateTo:function(e,t){return eT(e,t)}}).initialPort,S=C.initialPath,T=C.presentationalUrl,D=C.webviewEventMonitorState,P=C.navigateTo,U=(O=(0,a._)((0,E.useState)(!1),2))[0],M=O[1],F=(X=(0,a._)((0,E.useState)(!1),2))[0],W=X[1],H=(V=(0,a._)((0,E.useState)("Loading..."),2))[0],z=V[1],q=(j=(0,a._)((0,E.useState)(80),2))[0],J=j[1],Y=(0,E.useCallback)(function(e,t,n,r){M(e),W(t),z(n),J(r)},[]),$=(0,G.Z)(P),K=(0,G.Z)(k),Q=(0,G.Z)(S),ee=(0,L.Z)(function(){return new N({initialRelativeUrl:Q.current,initialPort:K.current,onChange:Y,navigateTo:$})},[Q,K,Y,$]),(0,E.useEffect)(function(){"loading"===D.state&&K.current!==q&&ee.setPort(K.current)},[k,K,ee,q,D]),(0,E.useEffect)(function(){"active"===D.state&&ee.relativeUrlUpdate(D.relativeUrl)},[D.state,D.relativeUrl,ee]),{canNavigateBack:U,canNavigateForward:F,navigateBack:ee.back,navigateForward:ee.forward,canNavigateToInputRelativeUrl:H!==D.relativeUrl,navigateToInputRelativeUrl:function(){I({actionType:"navigated_to",path:H}),ee.navigate(H)},inputRelativeUrl:H,setInputRelativeUrl:z,refresh:ee.refresh,setPort:ee.setPort,selectedPort:q,getExternalUrl:function(){return(0,m.hw)(T||"",q)+H}}),eR=(0,g.vU)(eE.selectedPort);return((0,E.useEffect)(function(){eR&&eR.configuration.isLocalhost&&"loading"===eS.state&&eE.refresh()},[eE,eR,eS.state]),(0,E.useEffect)(function(){null==el||el(function(){return eE.refresh})},[eE.refresh,el]),eh&&eC)?(0,l.BX)(f.G,{css:eq.self,innerRef:eo,children:[(0,l.tZ)(eM,{replId:ed,url:eC.presentationUrl,webviewEventMonitorState:eS,navigationState:eE,forwardedPorts:ek,canEditDomain:eh.authorizations.addCustomDomain.isAuthorized,devtoolsErrorCount:eZ,iframeLoading:ey,onToggleDevtools:function(){if(I({actionType:"devtools_opened"}),ex(0),!ef){var e,t;null===(t=em.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var n=em.current;n&&eg&&(n.isDevToolsOpened()?n.closeDevTools():n.openDevTools())},onOpenPortSettings:ea}),(0,l.tZ)(R,{repl:eh,onClick:function(){return ei({type:"deployments"})}}),ef?(0,l.tZ)("webview",(0,o._)({"data-cy":"ws-webview",ref:em,src:eY({url:eC.iframeSrc,port:et,path:er,id:eu}).toString(),css:eq.desktopAppWebview},d.Z)):(0,l.tZ)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:em,src:eY({url:eC.iframeSrc,port:et,path:er,id:eu}).toString(),css:eq.iframe},d.Z))]}):null}function eY(e){var t=e.url,n=e.port,r=e.path,i=e.id,o=new URL(t);return(0,m.O2)(n)?o.hostname.endsWith(".localhost")?o.port="8081":o.port="":o.port=n.toString(),o.searchParams.set("initialPath",r),o.searchParams.set("id",i),o}},38822:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1053),i=n(75271);function o(e){var t=e.container,n=e.runner,o=e.refreshWebView;(0,i.useEffect)(function(){var e,i=[];return"outputs"===n.mode&&i.push(n.onBlockChanged(function(t){t.type===r.kH.EXECUTION&&1===t.data.exitCode&&(e=Date.now())})),i.push(t.onPortOpened(function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||o()}})),function(){return i.forEach(function(e){return e()})}},[t,o,n])}},75834:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1053),i=n(75271);function o(e){var t=e.runner,n=e.refreshWebView;(0,i.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===r.Ah.RUNNING&&n()})},[t,n])}},24126:function(e,t,n){n.d(t,{A:function(){return ee},Z:function(){return eo}});var r=n(66626),i=n(3796),o=n(24766),a=n(93245),l=n(36809),c=n(63163),s=n(67827),u=n(9602),d=n(76848),f=n(75271),p=n(86466),h=n(44935),m=n(21781),g=n(48155),v=n(79904),y=n(99149),b=n(14548),w=n(65034),Z=n(19602),x=n(47136),C=new Map(m.zY.anyOf.map(function(e){return[e.properties.task.const,e]})),k=new Set(C.keys());function S(e){var t=(0,d.Vg)(e),n=(0,d.Fq)(),r=(0,d.lP)(),a=(0,d.uL)();return t?(0,i.tZ)(T,{inititalConfig:t,onArgsBlur:a,onChange:function(t,n){null!==t&&r(e,t,{persist:"task"===n})},onRemove:function(){return n(e)}}):(0,i.tZ)(o.xv,{children:"Task not found"})}var _=(0,l.X)({root:[c.l0.borderRadius(4),c.l0.p(6),c.l0.colWithGap(4)],taskRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween],args:[c.l0.colWithGap(2)]});function T(e){var t,n=(0,r._)((0,f.useState)((null===(t=e.inititalConfig)||void 0===t?void 0:t.task)||null),2),l=n[0],c=n[1],s=(0,r._)((0,f.useState)(e.inititalConfig&&"args"in e.inititalConfig?e.inititalConfig.args:null),2),d=s[0],p=s[1],m=Array.from(C.keys()).map(function(e){return{id:e}}),g=l?function(e){var t,n=C.get(e);if(!n||!("args"in n.properties))return null;var r=null===(t=n.required)||void 0===t?void 0:t.includes("args");return{type:n.properties.args.type,required:r}}(l):null;function v(t){var n="task"===t.type?{task:"task"===t.type?t.task:l,args:l!==t.task?null:d}:{task:l,args:t.args};c(n.task),p(n.args);var r=n.task?C.get(n.task):null;if(!r)return null;try{e.onChange(y.B4.Decode(r,n),t.type)}catch(n){e.onChange(null,t.type)}}return(0,i.BX)(b.Tg,{elevated:!0,css:_.root,children:[(0,i.BX)(a.G,{css:_.taskRow,children:[(0,i.tZ)(w.P,{"aria-label":"Select a task",selectedKey:l,onSelectionChange:function(e){!function(e){if(!k.has(e))throw Error("Invalid task name: ".concat(e," (expected one of ").concat(Array.from(k),")"))}(e),v({type:"task",task:e})},items:m,children:function(e){return(0,i.tZ)(x.m9,{label:e.id},e.id)}}),(0,i.tZ)(u.hU,{alt:"Remove task",onClick:e.onRemove,children:(0,i.tZ)(Z.Z,{})})]}),g?(0,i.BX)(a.G,{css:_.args,children:[(0,i.BX)(o.xv,{variant:"small",color:"dimmest",children:["Args (",g.type,")"]}),(0,i.tZ)(h.II,{onBlur:e.onArgsBlur,onChange:function(e){var t=e.currentTarget.value;v({type:"args",args:"number"===g.type?Number(t):t})},required:g.required,value:d?d.toString():"",type:g.type})]}):null]})}var E=n(78272),R=n(20957),D=n(59489),I=n(65697),B=n(58532),A=n(30043),P=n(91466);function G(e){var t=e.mode,n=void 0===t?"sequential":t,r=e.onChange;return(0,i.BX)(D.hE,{name:"mode",onChange:r,row:!0,value:null!=n?n:"sequential",children:[(0,i.tZ)(D.rK,{id:"sequential",text:"Sequential",value:"sequential"}),(0,i.tZ)(D.rK,{id:"parallel",text:"Parallel",value:"parallel"})]})}function L(e){return(0,i.tZ)(a.G,{css:N.nav,children:(0,i.tZ)(v.zx,{size:"small",variant:"nofill",onClick:e.onBack,iconLeft:(0,i.tZ)(g.Z,{}),text:"Workflows"})})}var N=(0,l.X)({root:[c.l0.colWithGap(16)],nav:[c.l0.flex.row],content:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)],tasks:[c.l0.colWithGap(8)]});function O(e){var t=e.index,n=e.onDelete,l=(0,d.uL)(),c=(0,d.DW)(t),u=(0,d.xI)(),p=(0,d.G8)(),g=(0,d.IV)(t),y=(0,r._)((0,f.useState)(!1),2),b=y[0],w=y[1],x=(0,s.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]);if(!c)return(0,i.tZ)(o.xv,{children:"Workflow not found"});var C=(null==g?void 0:g.step)===m.KX.RUNNING;return(0,i.BX)(i.HY,{children:[(0,i.BX)(a.G,{css:N.root,children:[(0,i.tZ)(v.zx,{size:"small",onClick:function(){return null==x?void 0:x({workflowId:c.name})},loading:C,iconLeft:C?(0,i.tZ)(R.Z,{}):(0,i.tZ)(E.Z,{}),text:"Run Workflow"}),(0,i.tZ)(P.R,{}),(0,i.BX)(a.G,{css:N.content,children:[(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(h.II,{onBlur:l,value:c.name,onChange:function(e){u(t,function(t){t.name=e.currentTarget.value})}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(G,{mode:c.mode,onChange:function(e){u(t,function(t){t.mode=e}),l()}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:N.tasks,children:[c.tasks.map(function(e,n){return(0,i.tZ)(S,{workflowIndex:t,taskIndex:n},n.toString())}),(0,i.tZ)(v.zx,{iconLeft:(0,i.tZ)(A.Z,{}),text:"Add task",onClick:function(){return p(t)}})]})]})]}),(0,i.tZ)(P.R,{}),(0,i.tZ)(v.zx,{iconLeft:(0,i.tZ)(Z.Z,{}),text:"Delete Workflow",colorway:"red",variant:"outlined",onClick:function(){return w(!0)}})]}),(0,i.tZ)(B.u,{isOpen:b,onRequestClose:function(){return w(!1)},children:(0,i.tZ)(I.Z,{name:"Workflow",hideModal:function(){return w(!1)},delete:n})})]})}var U=n(81253),M=n(45252),X=n(22510),F=n(41974),W=n(29043),V=(0,l.X)({root:[c.l0.colWithGap(12)],inputs:[c.l0.colWithGap(8)],tasks:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)]});function H(e){var t=(0,r._)((0,f.useState)(""),2),n=t[0],l=t[1],c=(0,r._)((0,f.useState)([null]),2),s=c[0],u=c[1],d=(0,r._)((0,f.useState)(void 0),2),p=d[0],m=d[1],g=(0,f.useMemo)(function(){if(!n||!s.length)return(0,W.UG)("invalid");var e=[],t=!0,r=!1,i=void 0;try{for(var o,a=s[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(null===l)return(0,W.UG)("invalid");e.push(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,W.Ok)({name:n,mode:p,tasks:e})},[n,p,s]);return(0,i.BX)(X.l0,{css:V.root,onSubmit:function(t){t.preventDefault(),g.ok&&e.onCreate(g.value)},children:[(0,i.BX)(a.G,{css:V.inputs,children:[(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(h.II,{required:!0,placeholder:"Workflow name",value:n,onChange:function(e){return l(e.currentTarget.value)}})]}),(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(G,{mode:p,onChange:m})]}),(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:V.tasks,children:[s.map(function(e,t){return(0,i.tZ)(T,{onChange:function(e){u(function(n){return(0,F.Uy)(n,function(n){n[t]=e})})},onRemove:function(){u(function(e){return(0,F.Uy)(e,function(e){e.splice(t,1)})})}},"newTask"+t)}),(0,i.tZ)(v.zx,{size:"small",text:"Add task",type:"button",onClick:function(){u(function(e){return(0,F.Uy)(e,function(e){e.push(null)})})},iconLeft:(0,i.tZ)(A.Z,{})})]})]})]}),(0,i.tZ)(v.zx,{colorway:"primary",disabled:!g.ok,text:"Create Workflow",type:"submit"})]})}var z=n(10578),j=n(54129),q=n(7935),J=n(89313),Y=(0,l.X)({root:[c.l0.colWithGap(6)],item:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween]});function $(e){var t=e.index,n=(0,r._)((0,f.useState)(!1),2),l=n[0],c=n[1],s=(0,d.DW)(t),p=en(t),h=(0,j.Z)(null==p?void 0:p.isRunningObservable);return s&&p?l?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"Edit Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return c(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(O,{index:t,onDelete:function(){return c(!1)}})]}):(0,i.BX)(a.G,{css:Y.item,children:[(0,i.tZ)(v.zx,{size:"small",iconLeft:h?(0,i.tZ)(M.Z,{}):(0,i.tZ)(U.Z,{}),text:s.name,onClick:function(){h?p.stop():p.run()}}),(0,i.tZ)(v.zx,{variant:"outlined",size:"small",iconLeft:(0,i.tZ)(J.Z,{}),text:"Edit",onClick:function(){return c(!0)}})]}):null}var K=(0,l.X)({root:[c.l0.colWithGap(6),c.l0.borderRadius(4),c.l0.border(),c.l0.p(8)],header:[c.l0.rowWithGap(6),c.l0.align.center,c.l0.justify.spaceBetween]});function Q(){var e=(0,r._)((0,f.useState)(!1),2),t=e[0],n=e[1],l=(0,d.mj)();return t?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"New Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return n(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(H,{onCreate:function(e){n(!1),l(e)}})]}):(0,i.tZ)(a.G,{css:Y.item,children:(0,i.tZ)(v.zx,{onClick:function(){return n(!0)},iconLeft:(0,i.tZ)(A.Z,{}),size:"small",text:"New Workflow",variant:"outlined"})})}function ee(){var e=(0,d.e8)();return(0,i.BX)(a.G,{css:Y.root,children:[e.map(function(e){return(0,i.tZ)($,{index:e},e)}),(0,i.tZ)(Q,{})]})}var et=(0,l.X)({wrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween,c.l0.borderRadius(4),c.l0.px(6),c.l0.height(32),p.gU.filled],left:[c.l0.align.center,c.l0.flex.row,c.l0.flex.growAndShrink(1)]});function en(e){var t=(0,d.gG)(),n=(0,s.U)(function(n){return function(){var r,i=null===(r=t())||void 0===r?void 0:r[e];return!!i&&n.workflows.runWorkflow.rpc({workflowId:i.name})}},[t,e]),r=(0,d.iM)(e),i=(0,s.U)(function(e){return function(){var t,n=null===(t=r())||void 0===t?void 0:t.runId;return!!n&&e.workflows.stopRun.rpc({runId:n})}},[r]),o=(0,d.IP)(e);return(0,f.useMemo)(function(){return n&&i?{run:n,stop:i,isRunningObservable:o}:null},[n,i,o])}function er(e){var t=e.index,n=e.onClick,r=(0,d.DW)(t),l=en(t),c=(0,j.Z)(null==l?void 0:l.isRunningObservable);return r?(0,i.BX)(a.G,{css:et.wrapper,children:[(0,i.tZ)(a.G,{css:et.left,onClick:n,children:(0,i.tZ)(o.xv,{children:r.name})}),l?(0,i.tZ)(u.hU,{alt:c?"Stop workflow":"Run workflow",onClick:function(){c?l.stop():l.run()},children:c?(0,i.tZ)(M.Z,{}):(0,i.tZ)(U.Z,{})}):null]}):null}var ei=(0,l.X)({wrapper:[c.l0.p(8),c.l0.colWithGap(8)],list:[c.l0.colWithGap(4)],loading:[c.l0.center,c.l0.p(16)]});function eo(e){(0,d.sA)(e.isActive);var t=(0,r._)((0,f.useState)({type:"list"}),2),n=t[0],o=t[1],l=(0,d.e8)(),c=(0,d.mj)(),s=(0,d.am)();if((0,d.nR)())return(0,i.tZ)(a.G,{css:ei.loading,children:(0,i.tZ)(z.Z,{})});switch(n.type){case"newWorkflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(H,{onCreate:function(e){o({type:"workflow",index:c(e)})}})]});case"workflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(O,{index:n.index,onDelete:function(){s(n.index),o({type:"list"})}})]});case"list":return(0,i.BX)(a.G,{css:ei.wrapper,children:[l.length?(0,i.tZ)(a.G,{css:ei.list,children:l.map(function(e){return(0,i.tZ)(er,{index:e,onClick:function(){return o({type:"workflow",index:e})}},e)})}):null,(0,i.tZ)(v.zx,{iconLeft:(0,i.tZ)(A.Z,{}),text:"New Workflow",onClick:function(){o({type:"newWorkflow"})}})]})}}},37493:function(e,t,n){n.d(t,{C:function(){return function e(t,n){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})}};var l,c=t.commands;if(!c)throw Error("Context command must have commands");return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:t.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,c({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(n.path).concat([{data:t.data}])})];case 1:return[2,o.sent().map(function(t){return e(t,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}},V:function(){return h}});var r=n(27387),i=n(63257),o=n(96583),a=n(3796),l=n(74044),c=n(99149),s=n(11782),u=n(6843),d=n(17546),f=n(80075),p=l.Dy.Object({id:l.Dy.Optional(l.Dy.String()),icon:l.Dy.Optional(l.Dy.String()),type:l.Dy.Union([l.Dy.Literal("action"),l.Dy.Literal("context")]),label:l.Dy.String(),description:l.Dy.String(),contributions:l.Dy.Optional(l.Dy.Array(l.Dy.Enum(d.Y)))});function h(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t){var n,i,a;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!c.B4.Check(p,n))throw Error("Invalid command");if(i=null,"string"==typeof n.icon){if(""===n.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}if(a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type){var s;a.commands=(s=(0,r._)(function(n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=n.active,i=n.searchQuery,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<s))return[3,9];return f=u.push,[4,h(l[d],t)];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return s.apply(this,arguments)})}else a.run=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},93371:function(e,t,n){n.d(t,{cR:function(){return b},nP:function(){return w},gI:function(){return Z},Sp:function(){return x}});var r=n(66626),i=n(16155),o=n(23882),a=n(50013),l=n(41733),c=n(21262),s=n(71440),u=n(9122),d=n(82303);function f(){var e=(0,c._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,c._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},m=(0,s.Ps)(f()),g=(0,s.Ps)(p()),v=n(75271),y=n(22402);function b(){var e,t=(0,v.useContext)(a.Z),n=(0,r._)((0,v.useState)(null!==(e=null==t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),i=n[0],l=n[1],c=(0,o.Z)().dotReplit;return(0,v.useEffect)(function(){return c.watch(function(e){var t,n,r;l(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[c]),i}function w(){var e=(0,r._)((0,v.useState)(null),2),t=e[0],n=e[1],i=(0,o.Z)().dotReplit;return(0,v.useEffect)(function(){return i.watch(function(e){var t,r,i=null===(r=e.config)||void 0===r?void 0:null===(t=r.extension)||void 0===t?void 0:t.extensionID;i?n((0,y.T8)(i)):n(null)})},[i]),t}var Z=function(){var e=(0,o.Z)().dotReplit,t=(0,r._)((0,v.useState)(null),2),n=t[0],i=t[1];return(0,v.useEffect)(function(){return e.watch(function(e){var t,n,r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.staticDirectory;r?i({path:r,relativePath:r.replace(/^\.\//,"")}):i(null)})},[e]),n};function x(){var e,t,n,a,c=(0,i.Z)(),s=(e=(0,l._)({},h,{variables:{replId:c}}),u.a(m,e)),f=s.data,p=s.loading,y=s.error,b=(0,r._)((t=(0,l._)({},h,void 0),d.D(g,t)),1)[0],w=!p&&!y&&!!(null==f?void 0:f.repl)&&"Repl"===f.repl.__typename&&null!==(a=null===(n=f.repl.config)||void 0===n?void 0:n.isExtension)&&void 0!==a&&a,Z=(0,r._)((0,v.useState)(!1),2),x=Z[0],C=Z[1],k=(0,o.Z)().dotReplit;(0,v.useEffect)(function(){return k.watch(function(e){var t,n,r;C(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[k]),(0,v.useEffect)(function(){p||y||x===w||b({variables:{replId:c,isExtension:x},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:c,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:x}}}}})},[p,y,c,w,x,b])}},17546:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).CommandBar="commandbar",i.FiletreeContextMenu="filetree-context-menu",i.SidebarSearch="sidebar-search",i.EditorContextMenu="editor-context-menu"},36827:function(e,t,n){n.d(t,{L:function(){return u}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(14118),s=n(1053);function u(e){var t,n=(0,c.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});(0,l.C)((t=(0,i._)(function(t,i){var l,c,u,d,f,p,h,m,g,v,y,b;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(l=i.addCleanup,!n)return[2];return[4,t.agentToolRun.workspace.stream({})];case 1:u=(c=o._.apply(void 0,[a.sent(),3]))[0],d=c[1],f=c[2],l(f),p=!1,h=!1,a.label=2;case 2:a.trys.push([2,8,9,14]),g=(0,r._)(d),a.label=3;case 3:return[4,g.next()];case 4:if(!(p=!(v=a.sent()).done))return[3,7];if(!(y=v.value).ok||"run"!==y.payload.$kind)return[3,6];return e.getRunState()===s.Ah.RUNNING&&e.stopRun(),[4,e.run()];case 5:a.sent(),u.push({$kind:"ok"}),a.label=6;case 6:return p=!1,[3,3];case 7:return[3,14];case 8:return b=a.sent(),h=!0,m=b,[3,14];case 9:if(a.trys.push([9,,12,13]),!(p&&null!=g.return))return[3,11];return[4,g.return()];case 10:a.sent(),a.label=11;case 11:return[3,13];case 12:if(h)throw m;return[7];case 13:return[7];case 14:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[n,e])}},28365:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(49853),i=n(80786),o=n(75271),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,function(e,t,n){t(l,n)});function s(){var e=(0,o.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)(function(){t!==e&&n(e)},[e,t,n])}},12379:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(23882),i=n(75271),o=n(35370),a=n(14118),l=n(58988);function c(e){var t=(0,r.Z)().fs,n=(0,a.P5)({controlName:"flag-draft-buffers"}),c=(0,l.Qk)(),s=(0,i.useCallback)(function(r,i){var a=r.code,l=r.insertAt,s=r.newLine,u=void 0===s||s;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=t.watchTextFile(e,{onReady:function(r){var o=r.initialContent,s=r.writeChange,f=o.toString(),p="end"===l?f.length:l,h=a;u&&(0!==p&&p!==f.length&&-1===(p=f.indexOf("\n",p))&&(p=f.length),0!==p&&"\n"!==f[p-1]&&(h="\n"+h),"\n"!==f[p]&&(h+="\n")),s({from:p,insert:h},i),!n||c?t.flush(new Set([e])).finally(function(){d()}):d()}})},[e,t,n,c]);return!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e)?null:s}},31321:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(46074),c=n(96949),s=n(23882),u=n(73660),d=n(65559),f=n(75271),p=n(35370),h=n(73878),m=n(76881),g=n(27030),v=n(14118),y=n(58988);function b(e){var t,n,b,w=e.moveOrDeleteFile,Z=(0,s.Z)().fs,x=(0,u.K)(),C=(0,f.useRef)(new Map),k=(0,d.ex)(),S=(0,i._)((0,f.useState)(!1),2),_=S[0],T=S[1],E=(0,i._)((0,f.useState)(!1),2),R=E[0],D=E[1],I=(0,i._)((0,f.useState)([]),2),B=I[0],A=I[1],P=(0,g.k)(),G=(0,m.uV)(),L=(0,v.P5)({controlName:"flag-draft-buffers"}),N=(0,y.Qk)(),O=B.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),U=(0,i._)((0,f.useState)(),2),M=U[0],X=U[1],F=(0,d.ZB)();(0,f.useEffect)(function(){if(!(!k||C.current.has(k))){var e=function(e){var t=e.node.path;F(e.eventType===h.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),w&&w(e),C.current.delete(k),A(function(e){return e.filter(function(e){return e.path!==k})})};(0,p.Mb)(k)?Z.watchTextFile(k,{onMoveOrDelete:e,onError:function(e,t){e.code||((!L||N)&&Z.flush(),Z.persist({skipDebounce:!0}),G({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){A(function(n){return(0,o._)(n.filter(function(e){return e.path!==k})||[]).concat([{path:k,prompt:t,cb:e}])}),x("user:ot:diverged",{path:k,divergence:t}),T(!0),M||X(k)}}):Z.watchFile(k,{onChange:function(){},onMoveOrDelete:e}),C.current.set(k,!0)}},[k,Z,G,w,M,x,F,N,L]);var W=(t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),D(!0),[4,Promise.all(B.map(function(t){return A(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?T(!1):X(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),D(!1),[2]}})}),function(e){return t.apply(this,arguments)}),V=M?B.find(function(e){return e.path===M}):null,H=null==V?void 0:V.prompt,z=(0,l.J)({left:{code:null!==(n=null==H?void 0:H.localContent)&&void 0!==n?n:"",filePath:M},right:{code:null!==(b=null==H?void 0:H.remoteContent)&&void 0!==b?b:"",filePath:M}});return{isConverging:R,didContentsDiverge:_,showMoreDetail:P,failedFiles:B,failedFilesOptions:O,selectedFile:M,setSelectedFile:X,reviewingPrompt:H,onChoice:W,local:z.left,remote:z.right}}},47523:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(37782),o=n(65117),a=n(23882),l=n(75271);function c(){var e=(0,a.Z)().container,t=(0,o.Z)(e),n=(0,r._)((0,l.useState)(!1),2),c=n[0],s=n[1];return((0,l.useEffect)(function(){t===i.em.CONNECTED&&s(!0)},[t]),c)?{didConnectOnce:c,didDisconnect:t!==i.em.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},14423:function(e,t,n){n.d(t,{$q:function(){return eu},FL:function(){return em}});var r,i,o,a=n(31417),l=n(27387),c=n(42516),s=n(66626),u=n(63257),d=n(96583),f=n(25722),p=n(70882),h=n(56091),m=n(14118),g=n(99595),v=n(16155),y=n(10777),b=n(40490),w=n(96949),Z=n(37475),x=n(67827),C=n(52657),k=n(4041),S=n(75271),_=n(27069),T=n(23882),E=n(9583),R=n(41733),D=n(33859),I=n.n(D),B=n(21262),A=n(71440),P=n(76143);function G(){var e=(0,B._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return G=function(){return e},e}var L={},N=(0,A.Ps)(G()),O=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},U=new Map([["hintsList","hints"]]);function M(){return(M=(0,l._)(function(e){var t,n,r,i,o,a,c,u,f,p,h,m,g,v,y;function b(){return w.apply(this,arguments)}function w(){return(w=(0,l._)(function(){var e,n,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(e="object"==typeof r.env?r.env:null)||0===Object.keys(e).length)return[2];return o=(n="object"==typeof i.env?i.env:null)?(0,R._)({},e,n):e,[4,t.updateDotReplit([O("env",o)])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}function Z(){return x.apply(this,arguments)}function x(){return(x=(0,l._)(function(){var e,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(null===(e=i.nix)||void 0===e?void 0:e.channel)return[2];if(null==r?void 0:null===(o=r.nix)||void 0===o?void 0:o.channel)return[3,2];return[4,n.getLatestStableChannel()];case 1:if(!(l=c.sent()).channel)return[2];return a=l.channel,[3,3];case 2:a=r.nix.channel,c.label=3;case 3:return[4,t.updateDotReplit([O("nix/channel",a)])];case 4:return c.sent(),[2]}})})).apply(this,arguments)}function C(){return(C=(0,l._)(function(e){var n,o,a,l,c;return(0,d.Jh)(this,function(s){switch(s.label){case 0:if(o=!!(n=i[e]),Array.isArray(n)?o=n.length>0:n&&"object"==typeof n&&(o=Object.keys(n).length>0),l=null!==(a=U.get(e))&&void 0!==a?a:e,o||!r[l])return[2];return c=O(l,r[l]),[4,t.updateDotReplit([c])];case 1:return s.sent(),[2]}})})).apply(this,arguments)}return(0,d.Jh)(this,function(l){switch(l.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],a={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:Z,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},c=[],u=!0,f=!1,p=void 0;try{for(h=Object.entries(a)[Symbol.iterator]();!(u=(m=h.next()).done);u=!0)v=(g=(0,s._)(m.value,2))[0],y=g[1],null!==y&&("function"==typeof y?c.push(y()):c.push(function(e){return C.apply(this,arguments)}(v)))}catch(e){f=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(f)throw p}}return[4,Promise.all(c)];case 1:return l.sent(),[2,o]}})})).apply(this,arguments)}var X=n(70694),F=n(7391),W=n(35370),V=n(45250),H=n(72106),z=n(73878),j=n(9122),q=n(82303);function J(){var e=(0,B._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n        authorizations {\n          editFileContents {\n            isAuthorized\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return J=function(){return e},e}function Y(){var e=(0,B._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function $(){var e=(0,B._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return $=function(){return e},e}function K(){var e=(0,B._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Q={},ee=(0,A.Ps)(J()),et=(0,A.Ps)(Y());$();var en=(0,A.Ps)(K()),er=n(95088),ei=n.n(er),eo=n(91823),ea=n.n(eo),el={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},ec={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:el,javascript:el,vue:{18:"vue-node-18",20:"vue-node-20"}};function es(e,t){if(void 0===e)return!1;if(void 0===t)return!0;var n=ea()(e);if(null===n)return!1;var r=ea()(t);return null===r||ei()(n,r)}(r=i||(i={})).PreparingRepl="preparingRepl",r.GitInit="gitInit",r.GitRemoteAdd="gitRemoteAdd",r.CheckoutBranch="checkoutBranch",r.TidyingFiles="tidyingFiles",r.Done="done";var eu=(o={},(0,c._)(o,"preparingRepl","Preparing Repl"),(0,c._)(o,"gitInit","Initializing Git"),(0,c._)(o,"gitRemoteAdd","Adding Remote"),(0,c._)(o,"checkoutBranch","Checking Out Branch"),(0,c._)(o,"tidyingFiles","Tidying Files"),(0,c._)(o,"done","Finalizing"),o);function ed(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function ef(e){return e.replace(/'/g,"'\"'\"'")}var ep=function(e){var t,n,r,i,o,a,c,f,p,h,m,g,v,b=e.checkoutBranch,w=(0,F.useRouter)(),Z=(0,T.Z)(),x=Z.container,_=Z.dotReplit,E=Z.runner,R=Z.git,D=Z.fs,I=(t=(0,k.Z)({container:x,service:"exec"}).channel,n=(0,S.useRef)(!1),r=(0,S.useRef)([]),i=(0,C.Z)((0,l._)(function(){var e,o,a,l,c,u,f,p,h,m;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(n.current||!r.current.length||(null==t?void 0:t.status)!=="open")return[2];if(!(e=r.current.pop()))throw Error("Expected request");return l=(a=(o=(0,s._)(e,2))[0]).args,c=a.env,u=o[1],f="",p=t.onCommand(function(e){e.output&&(f+=e.output)}),n.current=!0,[4,t.request({exec:{args:l,env:c,noUserEnv:!0}})];case 1:return h=d.sent(),n.current=!1,p(),m=h.channelClosed?"Channel closed":h.error,u(m?{error:m,output:f||null}:{output:f,error:null}),i.current(),[2]}})})),o=null==t?void 0:t.status,(0,S.useEffect)(function(){"open"===o&&i.current()},[o,i]),(0,S.useCallback)(function(e){var t=e.args,n=e.env;return new Promise(function(e){r.current.push([{args:t,env:n},e]),i.current()})},[i])),B=(a=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,R.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return a.apply(this,arguments)}),A=(c=(0,l._)(function(e){return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,R.addRemote({name:"origin",url:e})];case 1:return t.sent(),[2]}})}),function(e){return c.apply(this,arguments)}),P=(f=(0,l._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ed("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=n.sent()).output)return[2,"main"];return(t=(0,s._)(e.output.split(": "),2))[0],[2,t[1].trim()]}})}),function(){return f.apply(this,arguments)}),G=(p=(0,l._)(function(e){var t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ed("git checkout -f -b '".concat(ef(e),"' 'origin/").concat(ef(e),"'"))})];case 1:if((t=n.sent()).error)throw Error("Failed to checkout branch: ".concat(t.error));return[2]}})}),function(e){return p.apply(this,arguments)}),L=(h=(0,l._)(function(e){var t,n,r,i;return(0,d.Jh)(this,function(o){switch(o.label){case 0:if(n=void 0!==(t=e.deepen)&&t,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,I({args:ed("git fetch '".concat(ef(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&n))return[3,4];return[4,I({args:ed("git fetch origin '".concat(ef(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,I({args:ed("git fetch origin '".concat(ef(i),"' --progress --depth=10"))})];case 6:return[4,I({args:ed("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return h.apply(this,arguments)}),N=(m=(0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,D.readDir(H.Ql)];case 1:if((r=a.sent()).error)return[2];return[4,_.getConfig()];case 2:if(!(null===(t=(i=a.sent()).config)||void 0===t?void 0:null===(e=t.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var t;return t=e.filename,!o.some(function(e){return null!=t.match(e)})}).map(function(e){return e.type===z.Tv.Directory?D.deleteDir(e.filename):D.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(n=i.config)||void 0===n?void 0:n.entrypoint))return[3,6];return[4,D.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return m.apply(this,arguments)}),O={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},U=(g=(0,l._)(function(){var e,t,n,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:for(t in e=[],O)e.push(t);n=0,i.label=1;case 1:if(!(n<e.length))return[3,5];return r=e[n],[4,D.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,I({args:["git","clean","-fdx"].concat((0,u._)(O[r]))})];case 3:i.sent(),i.label=4;case 4:return n++,[3,1];case 5:return[2]}})}),function(){return g.apply(this,arguments)});return v=(0,l._)(function(e){var t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return t=e.remote,n=e.accessToken,[4,N()];case 1:return a.sent(),y.kg.info("GitHub Import: Removed template boilerplate"),[4,B()];case 2:return a.sent(),[4,A(t)];case 3:return a.sent(),[4,P()];case 4:return r=a.sent(),[4,Promise.all([L({deepen:!1,remote:t,remoteToken:n,branch:r}),b?L({deepen:!1,remote:t,remoteToken:n,branch:b}):null])];case 5:var c;if(a.sent(),c=(0,l._)(function(){var e;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,G(r)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),y.kg.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(w.query),checkoutBranch:b,githubRepo:t}),[3,3];case 3:return[2]}})}),i=function(){return c.apply(this,arguments)},!b)return[3,11];a.label=6;case 6:return a.trys.push([6,8,,10]),[4,G(b)];case 7:case 9:return a.sent(),[3,10];case 8:return o=a.sent(),y.kg.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(o),query:JSON.stringify(w.query),checkoutBranch:b,githubRepo:t}),[4,i()];case 10:return[3,13];case 11:return[4,i()];case 12:a.sent(),a.label=13;case 13:if("html"!==E.mode)return[3,16];return[4,(0,X.r)(x,H.Ql)];case 14:return a.sent(),[4,E.run()];case 15:a.sent(),a.label=16;case 16:return[4,U()];case 17:return a.sent(),y.kg.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return v.apply(this,arguments)}},eh=function(e){var t=e.checkoutBranch,n=e.onUpdateState,r=e.showError;return(0,x.U)(function(e){var i;return i=(0,l._)(function(i){var o,l,c,u,f,p,h,m,g,v,y,b,w,Z;return(0,d.Jh)(this,function(d){switch(d.label){case 0:o=i.remote,l=i.accessToken,c=i.homeDir,f=function(){},d.label=1;case 1:return d.trys.push([1,,15,16]),p={homeDir:c,remoteUrl:o,accessToken:null!=l?l:void 0,clearHomeDir:!0},t&&(p.checkoutBranch=t),[4,e.gitImport.fromGithub.subscribe(p)];case 2:u=(h=s._.apply(void 0,[d.sent(),2]))[0],f=h[1],m=!1,g=!1,d.label=3;case 3:d.trys.push([3,8,9,14]),y=(0,a._)(u),d.label=4;case 4:return[4,y.next()];case 5:if(!(m=!(b=d.sent()).done))return[3,7];(w=b.value).ok?n(w.payload.state):r(w.payload.code+": "+w.payload.message),d.label=6;case 6:return m=!1,[3,4];case 7:return[3,14];case 8:return Z=d.sent(),g=!0,v=Z,[3,14];case 9:if(d.trys.push([9,,12,13]),!(m&&null!=y.return))return[3,11];return[4,y.return()];case 10:d.sent(),d.label=11;case 11:return[3,13];case 12:if(g)throw v;return[7];case 13:return[7];case 14:return[3,16];case 15:return f(),[7];case 16:return[2]}})}),function(e){return i.apply(this,arguments)}},[t,n,r])};function em(e){var t,n,r,i,o,a,c,u,x,C,k,D,B,A,G,O,U,X,H,z,J,Y,$,K,er,ei=e.insertConfigPlugin,eo=e.setConfigScreenLockIsOpen,el=e.openFile,eu=e.onUpdateState,ed=(0,Z.iM)(),ef=(0,m.P5)({controlName:"flag-pid2-github-import"})&&ed,em=(0,F.useRouter)(),eg=(0,v.Z)(),ev=(0,s._)((t=(0,R._)({},Q,void 0),q.D(et,t)),2),ey=ev[0],eb=ev[1],ew=(0,s._)((0,S.useState)(null),2),eZ=ew[0],ex=ew[1],eC=(0,T.Z)(),ek=eC.fs,eS=eC.runner,e_=eC.dotReplit,eT=(0,g.Z)(),eE=eT.showError,eR=eT.showConfirm,eD=(r=(n=(0,T.Z)()).dotReplit,i=n.nixService,o=(0,v.Z)(),c=(0,s._)((a=(0,R._)({},L,void 0),P.t(N,a)),1)[0],x=(u=(0,g.Z)()).showWarning,C=u.showError,(0,S.useCallback)((k=(0,l._)(function(e){var t,n,a,l,s,u,f,p,h,m,g,v;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return[4,r.getConfig()];case 1:if(!(n=d.sent().config)||(null===(t=n.modules)||void 0===t?void 0:t.length))return[2];return[4,c({variables:{replId:o}})];case 2:if(!(null==(l=(null==(a=d.sent().data)?void 0:a.repl.__typename)==="Repl"?a.repl:null)?void 0:l.rootOriginReplUrl))return[2];try{s=I().parse(e.toString())}catch(e){return C("Failed to parse template .replit file"),y.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!s)return[2];return[4,function(e){return M.apply(this,arguments)}({nixService:i,dotReplit:r,config:n,templateConfig:s})];case 3:u=d.sent(),f=!0,p=!1,h=void 0;try{for(m=u[Symbol.iterator]();!(f=(g=m.next()).done);f=!0)v=g.value,x(v,1e3)}catch(e){p=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return[2]}})}),function(e){return k.apply(this,arguments)}),[o,x,C,r,i,c])),eI=(D=(0,b.Wd)("importBranch","string"))?decodeURIComponent(D):null,eB=(0,_.Z)();(0,S.useEffect)(function(){eb.error&&eE("Failed to finish cloning Repl - "+eb.error)},[eb.error,eE]),(0,S.useEffect)(function(){eZ&&eE("Failed to finish cloning Repl - "+eZ)},[eZ,eE]),(0,S.useEffect)(function(){eb.data&&eR("Finished cloning Repl")},[eb.data,eR]);var eA=(B=(0,R._)({},Q,{variables:{replId:eg},fetchPolicy:"no-cache"}),j.a(ee,B)).data,eP=(A=(0,_.Z)(),O=(G=(0,T.Z)()).fs,U=G.dotReplit,Y=(null==(J=(H={skip:!((X=(null==eA?void 0:eA.repl.__typename)==="Repl"?eA.repl.config.gitRemoteUrl:void 0)&&A),variables:X?{input:{githubRepoUrl:X}}:void 0},z=(0,R._)({},Q,H),j.a(en,z)).data)?void 0:J.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?J.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,S.useCallback)((0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(Y&&A))return[3,4];return e=Y.map(function(e){return{language:e}}),[4,O.readFile("package.json")];case 1:return"content"in(t=a.sent())&&(n=function(e){var t,n,r=null;try{n=JSON.parse(e)}catch(e){return null}if(null===(t=n.engines)||void 0===t?void 0:t.node){var i=ea()(n.engines.node);i&&(r="".concat(i.major))}return r}(t.content.toString()))&&(e.push({language:"javascript",version:n}),Y.includes("Vue")&&e.push({language:"vue",version:n})),[4,O.readFile("pyproject.toml")];case 2:return"content"in(t=a.sent())&&(r=function(e){var t,n,r,i,o,a=null;try{o=I().parse(e)}catch(e){return null}var l=(null===(r=o.tool)||void 0===r?void 0:null===(n=r.poetry)||void 0===n?void 0:null===(t=n.dependencies)||void 0===t?void 0:t.python)||(null===(i=o.project)||void 0===i?void 0:i["requires-python"]);if(l){var c=ea()(l);c&&(a="".concat(c.major,".").concat(c.minor))}return a}(t.content.toString()))&&e.push({language:"python",version:r}),i=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=ec[u.language.toLowerCase()];if(d){var f=n.get(d);(!f||es(u.version,f.version))&&n.set(d,u)}}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var p=new Map;null===(a=t.fullModules)||void 0===a||a.forEach(function(e){(null==e?void 0:e.id)&&p.set(e.id,e)});var h=new Set,m=!0,g=!1,v=void 0;try{for(var y,b=n.entries()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=(0,s._)(y.value,2),Z=w[0],x=w[1];if("string"==typeof Z){var C=p.get(Z);C&&h.add(C)}else{var k=x.version;if(!k||!Z[k]){var S=Object.keys(Z);S.sort(function(e,t){return es(e,t)?-1:1}),k=S[0]}var _=Z[k],T=p.get(_);T&&h.add(T)}}}catch(e){g=!0,v=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}return Array.from(h)}(e,A),o=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],i.length>0?(y.kg.info("GitHub Import: recommended modules:",Object.fromEntries(i.map(function(e){return[e.id,e.name]}))),o.push({op:"add",path:"modules",value:JSON.stringify(i.map(function(e){return e.id}))})):y.kg.warn("GitHub Import: no recommended modules found"),[4,U.updateDotReplit(o)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[U,O,A,Y]),topLanguages:Y}),eG=eP.addRecommendedModules,eL=eP.topLanguages,eN=($=(0,l._)(function(){var e,t,n,r,i,o,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if(!eA||"Repl"!==eA.repl.__typename||(t=eA.repl,n=eA.currentUser,"Repl"!==t.__typename||!n||"CurrentUser"!==n.__typename)||(i=null!==(r=null===(e=n.gitHubInfo)||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,!(o=t.config.gitRemoteUrl)||!t.config.doClone||!eL))return[2];if(!eA.repl.authorizations.editFileContents.isAuthorized)return ex("You do not have permission to edit this Repl"),y.kg.warn("GitHub Import: Attempt to doClone for user without authorization"),[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),eo(!0),[4,eH({remote:o,accessToken:i})];case 2:return l.sent(),(0,w.j)(w.U3.NIX_GH_IMPORT_USED,{action:p.D.ImportEnded,replId:t.id,orgContext:(0,h.sI)()}),[3,5];case 3:return a=l.sent(),y.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(a),query:JSON.stringify(em.query),githubRepo:o,hasAccessToken:!!i}),f.Tb(a,{extra:{query:JSON.stringify(em.query),githubRepo:o,hasAccessToken:!!i}}),ex(String(a)),[3,5];case 4:return eo(!1),[7];case 5:return[2]}})}),function(){return $.apply(this,arguments)}),eO=(0,s._)((0,S.useState)(!1),2),eU=eO[0],eM=eO[1];(0,S.useEffect)(function(){eB&&eA&&"Repl"===eA.repl.__typename&&eL&&eM(!0)},[eA,eB,eU,eL]),(0,S.useEffect)(function(){eU&&eN()},[eU]);var eX=(K=(0,l._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,E.W)({dotReplit:e_,fs:ek})];case 1:return(e=t.sent().entrypoint)&&el({path:e,opener:(0,W.gK)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return K.apply(this,arguments)});function eF(){return ek.readFile(V.l)}var eW=eh({checkoutBranch:eI,onUpdateState:eu,showError:eE}),eV=ep({checkoutBranch:eI}),eH=(er=(0,l._)(function(e){var t,n,r,i,o,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if(t=e.remote,n=e.accessToken,!eB||!(eA&&"Repl"===eA.repl.__typename))return[2];return y.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,eF()];case 1:if(r=l.sent(),!(ef&&eW))return[3,3];return i=eA.repl,[4,eW({remote:t,accessToken:n,homeDir:"/home/runner/".concat(i.slug)})];case 2:return l.sent(),[3,5];case 3:return[4,eV({remote:t,accessToken:n})];case 4:l.sent(),l.label=5;case 5:if(y.kg.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,8];return[4,e_.updateDotReplit([])];case 6:return l.sent(),[4,eF()];case 7:r=l.sent(),l.label=8;case 8:if("content"in r)return[3,9];return y.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,14];case 9:return[4,eF()];case 10:return o=l.sent(),a=""!==r.content.toString()&&"content"in o&&o.content.toString()!==r.content.toString(),[4,eD(r.content)];case 11:if(l.sent(),y.kg.info("GitHub Import: Patched dotreplit"),!a)return[3,12];return y.kg.info("GitHub Import: Repo has .replit",{githubURL:t}),[3,14];case 12:return[4,eG()];case 13:l.sent(),y.kg.info("GitHub Import: Added recommended modules"),l.label=14;case 14:return[4,ey({variables:{input:{id:eg,doClone:!1}}})];case 15:if(l.sent(),!eI)return[3,17];return[4,ek.persist()];case 16:l.sent(),(0,b.pg)({router:em,params:[{mode:"delete",key:"importBranch"}]}),l.label=17;case 17:return y.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eX()];case 18:if(l.sent(),"html"===eS.mode)return[2];return ei(),[2]}})}),function(e){return er.apply(this,arguments)})}},53156:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(23882),o=n(75271),a=n(73878),l=n(47523);function c(){var e=(0,i.Z)().fs,t=(0,r._)((0,o.useState)(!1),2),n=t[0],c=t[1],s=(0,l.Z)(),u=s.didConnectOnce,d=s.didDisconnect;return((0,o.useEffect)(function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange(function(e){c(e===a.kO.Syncing)})},[e]),u)?{isSaving:n,isOffline:d}:{isSaving:!1,isOffline:!1}}},81321:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(27387),i=n(96583),o=n(29574),a=n(84082),l=n(64566);function c(){var e,t,n,c=(0,o.Gn)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,s=(0,l.Z)((n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!c)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=r.sent()).error)return[2,t];if(t.type!==a.y5.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((n=r.sent()).error)return[2,n];return[2,{status:n,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c]);return s&&!s.error&&(null===(e=s.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=s.status)||void 0===t?void 0:t.changes):null}},62305:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14118),i=n(16155),o=n(79685),a=n(82973),l=n(23882),c=n(75271),s=n(72106),u="persistmirrored";function d(){var e=(0,o.T)(),t=(0,i.Z)(),n=(0,r.P5)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,l.Z)().container;(0,c.useEffect)(function(){if(!(!e||!n||(null!==(r=a.Z.get(u,"array"))&&void 0!==r?r:[]).includes(t))){var r,i=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:s.Ql}}).then(function(e){if(e.ok){var n,r;r=null!==(n=a.Z.get(u,"array"))&&void 0!==n?n:[],a.Z.set(u,r.concat(t)),i()}}),function(){}});return i}},[d,e,n,t])}},45919:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(37782),i=n(23882),o=n(75271);function a(){var e=(0,i.Z)().container;(0,o.useEffect)(function(){var t=function(){e.getConnectionState()===r.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}},4322:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(66626),i=n(75271),o=n(14118),a=n(58988),l=n(35370),c=n(65883),s=function(){var e=(0,o.P5)({controlName:"flag-draft-buffers"}),t=(0,a.Qk)(),n=(0,i.useRef)(!1);return(0,i.useEffect)(function(){n.current=t||!1===e},[t,e]),n};t.Z=function(e,t){var n=(0,a.Qk)(),s=(0,r._)((0,i.useState)(!1),2),u=s[0],d=s[1],f=(0,o.P5)({controlName:"flag-draft-buffers"});return(0,i.useEffect)(function(){if(!t||!(0,l.Mb)(t)||!f||(0,c.C_)((0,c.S1)(t))){d(!1);return}d(!1===e.isFileOrDirSaved(t));var n=e.watchTextFile(t,{onFileSavedChanged:function(e){d(!e)}});return function(){n()}},[e,t,f]),f&&null!==t&&!1===n&&u}},21285:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return s}});var r=n(66626),i=n(75271),o=n(23882),a=n(72106),l=n(73878),c=".tutorial";function s(){var e=(0,o.Z)().fs,t=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),n=t[0],s=t[1];return(0,i.useEffect)(function(){e.watchDir(a.Ql,{onChange:function(e){s({isLoading:!1,isTutorial:e.some(function(e){return e.type===l.Tv.Directory&&e.filename===c})})},onMoveOrDelete:function(){s({isLoading:!1,isTutorial:!1})},onError:function(){s({isLoading:!1,isTutorial:!1})}})},[e]),n}},80060:function(e,t,n){n.d(t,{R:function(){return f}});var r=n(3796),i=n(62279),o=n(99595),a=n(79904),l=n(51619),c=n(63163),s=n(97933),u=n(75271),d=(0,i.iv)([c.l0.mt(8)]);function f(e){var t=e.onOpenEnvEditor,n=(0,s.Z)(),i=(0,o.Z)(),c=(0,u.useRef)(!1);(0,u.useEffect)(function(){if(n&&!c.current){var e=i.showNotice((0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{children:"This Repl contains secrets that are missing values."}),(0,r.tZ)("div",{children:"Add values to ensure the code runs as expected."}),(0,r.tZ)("div",{children:(0,r.tZ)(a.zx,{size:"small",iconLeft:(0,r.tZ)(l.Z,{}),css:d,colorway:"primary",onClick:function(){t(),i.hideMessage(e)},text:"Manage secrets"})})]}),1e4);c.current=!0}},[n])}},58862:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(37475),i=n(75271);function o(){var e=(0,r.r9)();(0,i.useEffect)(function(){},[e])}},80410:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(75271),s=n(52657),u=n(88397);function d(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function f(e){var t,n,f=e.fs,p=e.openMultipleFiles,h=e.openMultipleURLs,m=e.waitForFileClose,g=e.isMobileWorkspace,v=void 0!==g&&g,y=(0,s.Z)(m),b=(0,c.useCallback)((t=(0,i._)(function(e){var t,n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(t=e.filename,n=e.waitForClose,!v)return[3,2];if(!t.endsWith(".git/COMMIT_EDITMSG"))return p({paths:[t]}),[2];return r=window.prompt("Enter a commit message"),[4,f.writeFile(t,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(d(),p({paths:[t]}),!n||!y.current)return[2];return[4,y.current(t)];case 3:return i.sent(),[4,f.flush()]}})}),function(e){return t.apply(this,arguments)}),[f,v,p,y]);(0,l.C)((n=(0,i._)(function(e,t){var n,i,l,c,s,f,m,g,v,y,w,Z,x,C,k,S,_;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.session,i=t.addCleanup,[4,e.replspaceApi.init.stream({session:n.from})];case 1:c=(l=o._.apply(void 0,[a.sent(),3]))[0],s=l[1],f=l[2],i(f),m=!1,g=!1,a.label=2;case 2:a.trys.push([2,13,14,19]),y=(0,r._)(s),a.label=3;case 3:return[4,y.next()];case 4:if(!(m=!(w=a.sent()).done))return[3,12];if(!(Z=w.value).ok)return[3,11];switch(Z.payload.$kind){case"openFile":return[3,5];case"openMultipleFiles":return[3,7];case"openMultipleURLs":return[3,8];case"getSSHToken":return[3,9]}return[3,11];case 5:return[4,b(Z.payload)];case 6:return a.sent(),Z.payload.waitForClose&&c.push({$kind:"closeFile",filename:Z.payload.filename,nonce:Z.payload.nonce}),[3,11];case 7:return Z.payload.files.length>0&&(d(),p({paths:Z.payload.files})),[3,11];case 8:return Z.payload.urls.length>0&&(d(),h({urls:Z.payload.urls})),[3,11];case 9:return C=(x=Z.payload).nonce,k=x.replId,[4,(0,u.Bi)({replId:k})];case 10:return"success"!==(S=a.sent()).type?c.push({$kind:"sshToken",nonce:C,error:S.message}):c.push({$kind:"sshToken",nonce:C,token:S.data.token,SSHHostname:S.data.ssh_hostname}),[3,11];case 11:return m=!1,[3,3];case 12:return[3,19];case 13:return _=a.sent(),g=!0,v=_,[3,19];case 14:if(a.trys.push([14,,17,18]),!(m&&null!=y.return))return[3,16];return[4,y.return()];case 15:a.sent(),a.label=16;case 16:return[3,18];case 17:if(g)throw v;return[7];case 18:return[7];case 19:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[h,p,b])}},56850:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(10777),i=n(75271);function o(){(0,i.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,i=n.jsHeapSizeLimit,o=n.totalJSHeapSize,a=n.usedJSHeapSize,l=window.performance.now();r.kg.info("perf:browser_memory",{jsHeapSizeLimit:i,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(t,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},3960:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(41733),i=n(16155),o=n(79468),a=n(66554),l=n(75271);function c(){var e=(0,i.Z)(),t=(0,o.Z)("fileTree").trackTimeToLoadFileStart;return(0,l.useCallback)(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r._)({replId:e},o))},[e,t])}},36413:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(29574),i=n(16155),o=n(96949),a=n(23882),l=n(75271),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,a.Z)().container,t=(0,r.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n=(0,i.Z)();(0,l.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort;if(a){(0,o.j)(o.U3.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t});return}(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})})},[e,n,t])}},28467:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(47726),i=n(16155),o=n(10777),a=n(47),l=n(23882),c=n(75271),s=n(92756),u=n(58997),d=new Set;function f(e){var t=e.workspaceType,n=(0,i.Z)(),f=(0,l.Z)(),p=f.dotReplit,h=f.container;(0,c.useEffect)(function(){if(!d.has(n)){d.add(n);var e=p.watch(function(n){if(!n.error||n.error!==u.Yt.Disconnected){try{var i=h.getConnectionMetadata();if(!i||!i.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=!!window.performance.getEntriesByName(s.Iy.pageNavStart,"mark").length,a={ssr:!i,workspaceType:t,tokenCluster:n.cluster},l="time to code";window.performance.measure(l,i?s.Iy.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c){o.kg.info("Could not obtain measure for time to code",a);return}var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(s.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,s.Iy.fetchConnectionMetadataPageInvisibleStart,s.Iy.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleEnd)),o.kg.time("time to code minus page invisible",d,a),o.kg.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),r.v.addTiming("time_to_code_minus_page_invisible",d),r.v.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:t,parsedToken:(0,a.he)(i.token)})}catch(e){o.kg.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[n,t,p,h])}},79468:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(10777),i=n(79317),o=n(35370),a=new Map,l=function(e,t){if((0,o.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}},c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,o=t.source,l=window.performance.now(),c=(0,i.V)(e);r.kg.time("time to load file",l-n,{from:o,fileViewerType:c}),a.delete(e)}};function s(e){return{trackTimeToLoadFileStart:function(t){return l(t,e)},trackTimeToLoadFileEnd:c}}},57337:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(90267),i=n(16155),o=n(23882),a=n(41733),l=n(21262),c=n(71440),s=n(91476);function u(){var e=(0,l._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),p=n(75271),h=n(73878);function m(){var e,t,n=(0,o.Z)().fs,l=(e={variables:{replId:(0,i.Z)()}},t=(0,a._)({},d,e),s.m(f,t)).data,c=(null==l?void 0:l.currentUserCanWrite)===!1;(0,p.useEffect)(function(){c&&window.location.reload()},[c]);var u=(0,p.useCallback)(function(){return c||n.getStatus()===h.kO.Clean?r.Tk.NavigateAnyway:r.Tk.PromptUser},[n,c]);(0,r.ZP)({shouldPreventNavCb:u})}},8056:function(e,t,n){n.d(t,{_:function(){return y},O:function(){return v}});var r=n(27387),i=n(66626),o=n(96583),a=n(83059),l=n(9816),c=n(70625),s=n(56262),u=n(41733),d=n(21262),f=n(71440),p=n(82303);function h(){var e=(0,d._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,f.Ps)(h());function v(){var e,t=(0,l.O)(),n=(0,i._)((e=(0,u._)({},m,void 0),p.D(g,e)),1)[0],c=(0,s.F)();return(0,a.Z)(function(){var e;return e=(0,r._)(function(e){var r,a,l,s,u,d,f,p,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=[],a=!0,l=!1,s=void 0;try{for(u=e[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)p=(f=(0,i._)(d.value,2))[0],h=f[1],r.push({commandId:p,keyCombo:h})}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return[4,n({variables:{input:{environment:t,platform:c,keybindings:r}}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}},[t,n,c])}function y(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=function(e){if(e&&"object"==typeof e&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,c.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,c.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(l);s&&t.set(s.commandId,s.keyCombo)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},56262:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(24281),i=n(23788);function o(){var e=(0,r.NJ)(),t=(0,r.Vm)(),n=(0,r.Cl)();return e||t?i.K5.Mac:n?i.K5.Windows:i.K5.Linux}},86433:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27387),i=n(96583),o=n(38242),a=n(21262);function l(){var e=(0,a._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,n(71440).Ps)(l());function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:c,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())?void 0:null===(t=n.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},13490:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(66626),i=n(63257),o=n(35370),a=n(73878),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,a=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value,p=(0,o.r6)(f);if(p&&(!t||p.startsWith(t))){var h=null!==(d=n.get(p))&&void 0!==d?d:0;n.set(p,h+1)}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return(0,i._)(n.entries()).sort(function(e,t){var n=(0,r._)(e,2)[1];return(0,r._)(t,2)[1]-n}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,t){if(e.fileType===a.Tv.Directory||!e.input)return[];if("."===e.input)return c.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return c.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,o.r6)(e.input),r=s(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,i._)(s(t(),n))),r.length<3){var u=n?l.filter(function(e){return e.startsWith(n)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},16372:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(73878),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===r.Tv.File}).length,n=e.filter(function(e){return e.type===r.Tv.Directory}).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},70694:function(e,t,n){n.d(t,{r:function(){return r}});function r(e,t){return new Promise(function(n){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:t}}).then(function(e){e.ok,r(),n()}),function(e){e.willReconnect&&r()}})})}},5438:function(e,t,n){n.d(t,{e:function(){return k},Z:function(){return C}});var r=n(41733),i=n(66626),o=n(85234),a=n.n(o),l=n(10777),c=n(27387),s=n(98924),u=n(63257),d=n(96583),f=n(25722),p=n(57997),h=n(41060),m=n(58591),g="exit status 1";function v(){return(v=(0,c._)(function(e){var t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(n=e.container,0===(r=(0,s._)(e,["container"])).query.trim().length)return[2,y(m.f.EMPTY_QUERY)];if(n.getConnectionState()===p.em.DISCONNECTED)return[2,y(m.f.CONTAINER_DISCONNECTED)];if(n.getConnectionState()===p.em.CONNECTING)return[2,y(m.f.CONTAINER_CONNECTING)];return[4,(t=n).exec.apply(t,(0,u._)((0,h.PR)(r)))];case 1:if(o=(i=c.sent()).output,a=i.error)switch(a){case g:return[2,y(m.f.EMPTY_RESULTS)];case"signal: broken pipe":return[2,y(m.f.PARTIAL_RESULTS)];case"Channel closed":return[2,y(m.f.CHANNEL_CLOSED)];default:return f.Tb(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,h.Tq)()(o))||0===l.filesMap.size)return[2,y(m.f.EMPTY_RESULTS)];return[2,y(l.error,l.filesMap)]}})})).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var b=n(86763),w=n.n(b),Z=n(70593),x="File Search Used";function C(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,c=e.isStreaming,u=e.trackLatency,d=void 0!==u&&u,p=(0,Z.Z)({container:t}),v=[],y=a()(),b=Date.now(),C=function(e){i(v=e)};return w()(function(e){var t=a()();y=t,b=Date.now(),n(null),o(!0);var i=!0;if(""===e.query){C([]),o(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){n("abort");return}var a=new TextEncoder,l=(0,h.Tq)(),c=0,u=0,d=function(){},p=function(e){r(e),n("error")},v=function(e){if(0===c&&"finished"===e){p(m.f.EMPTY_RESULTS);return}"finished"===e?n(e,{bytes:u}):n(e),d()},y=t.onOutput(function(e){var t=a.encode(e).length;u+=t;var n=l(e);if(n){var r=n.error,o=n.filesMap,s=n.filesMapChanges;r&&p(r),c=o.size,s.forEach(function(e){var t=o.get(e);t&&o.set(e,(0,h.Vd)(t))}),i(o,s)}}),b=t.onStderr(function(e){if(e.trim()===g)return p(m.f.EMPTY_RESULTS);p(m.f.INVALID_COMMAND)});d=function(){y(),b()};var w=(0,h.PR)(o);t.request({args:w,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===g?p(m.f.EMPTY_RESULTS):p(m.f.INVALID_COMMAND);v("finished")}).catch(function(e){return f.Tb(Error("Ripgrep search command failed with error: ".concat(e))),p(m.f.INVALID_COMMAND)})}((0,r._)({execer:p,onComplete:function(r,i){if(y===t){o(!1);var a,c,s,u,f="finished"===r&&i&&i.bytes===h.Ak;f&&n(m.f.PARTIAL_RESULTS),d&&l.kg.time("".concat(x," - complete"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(c=e.excludeGlobs)||void 0===c?void 0:c.length)&&void 0!==u?u:0)>0,latency:Date.now()-b,isPartialResults:f})}},onError:function(e){y===t&&n(e)},onParse:function(n,r){if(y===t){if(i){if(d){var a,s,u,f;l.kg.time("".concat(x," - first_chunk"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null==e?void 0:null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==f?f:0)>0})}C((0,h.Md)([],n,r)),i=!1}else C((0,h.Md)(v,n,r));c&&o(!1)}},mode:"json",context:0},e))},200)}function k(e){var t=e.container,n=w()(function(e,n,o){(function(e){return v.apply(this,arguments)})((0,r._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===m.f.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}},44793:function(e,t,n){n.d(t,{Eu:function(){return d},m6:function(){return l}});var r,i,o,a=n(63257);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],o=[],l=!0,u=!1,f=void 0;try{for(var p,h=e[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=p.value,g=s(m);g.startsWith("**")?i.push(g):o.push(g)}}catch(e){u=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw f}}return o.length>0&&(r(["!*"]),new Set(o).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],o=i.startsWith("{")&&i.endsWith("}")?d(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,a._)(o.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=d(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map(c))})),r(i),r(t.map(function(e){return"!".concat(c(s(e)))})),n}function c(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function s(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var u=(r={},i={},(o=function(e,t){r[e]=t,i[t]=e})("{","}"),o("(",")"),o("[","]"),{hasKey:function(e){return e in r},getKey:function(e){return r[e]},hasValue:function(e){return e in i},getValue:function(e){return i[e]}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(u.hasKey(d))r.push(d);else if(u.hasValue(d)&&r.pop()!==u.getValue(d))return[e];i+=d}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},41060:function(e,t,n){n.d(t,{Ak:function(){return f},Tq:function(){return p},PR:function(){return v},Vd:function(){return m},Md:function(){return g}});var r=n(41733),i=n(30509),o=n(63257),a=n(10777);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=n(44793),s=n(58591),u=n(32581),d=n(91620).lW,f=524288;function p(){var e="",t=new Map;return function(n){var o=new Set,l=!1;if(n.trim().startsWith("error"))return{error:s.f.INVALID_COMMAND,filesMap:t,filesMapChanges:o};var c=n.indexOf("\n"),u=0,d=e+n;if(c>=0)c+=e.length;else{e=d;return}for(;c>=0;){var f=d.substring(u,c).trim();if(0!==f.length){var p=function(e){try{return JSON.parse(e)}catch(e){return null}}(f);p&&!function(e,t,n){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":break;case"match":case"context":var l=h(e.data.path);if(!l)return!1;n.add(l);var c=t.get(l);if(!c)return!1;var s=function(e,t){var n,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];(null===(n=l[0])||void 0===n?void 0:n.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach(function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})}),(0,i._)((0,r._)({},t),{lines:t.lines.concat(c)})}(e,c);s&&t.set(l,s);break;case"error":return a.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(p,t,o)&&(l=!0)}u=c+1,c=d.indexOf("\n",u)}return e=d.substring(u),{error:l?s.f.INVALID_LINE:null,filesMap:t,filesMapChanges:o}}}function h(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:n})}function g(e,t,n){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value,m=t.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return r}function v(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,a=e.isCaseSensitive,s=e.isMatchingWholeWords,d=e.includeGlobs,p=e.excludeGlobs,h=void 0===p?(0,o._)(u.hD):p,m=["rg"];switch(t){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),n.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(a?"--case-sensitive":"--ignore-case"),m.push("--hidden"),s&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.m6)(d,h))),m.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return["sh","-c","".concat(l.apply(void 0,(0,o._)(e))," | head -c ").concat(t)]}(m)}},58591:function(e,t,n){var r,i;n.d(t,{f:function(){return r}}),(i=r||(r={})).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",i.EMPTY_RESULTS="Nothing came up searching your Repl's content.",i.EMPTY_QUERY="No search query was provided.",i.INVALID_LINE="We encountered an invalid line while parsing your search results.",i.INVALID_COMMAND="Ripgrep returned an invalid response.",i.CONTAINER_DISCONNECTED="Disconnected from the container.",i.CONTAINER_CONNECTING="Connecting to the container.",i.CHANNEL_CLOSED="Channel was closed."},66554:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(96949);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},98713:function(e,t,n){n.d(t,{YI:function(){return L},kW:function(){return G}});var r,i,o=n(41733),a=n(30509),l=n(3796),c=n(36809),s=n(63163),u=n(71711);n(75271),(r=i||(i={})).TEXT="TEXT",r.MENTION="MENTION",r.LINK="LINK",r.REPL_LINK="REPL_LINK",r.DEEP_LINK="DEEP_LINK",r.CODE="CODE",r.BOLD="BOLD",r.ITALICS="ITALICS",r.STRIKETHROUGH="STRIKETHROUGH",r.QUOTE="QUOTE";var d=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,l.tZ)("code",{onClick:n,style:r,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("b",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("i",{onClick:n,children:t.content})},b=(0,c.X)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.l0.color.foregroundDimmest,s.l0.border({width:2,color:s.TV.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),w=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("span",{onClick:n,css:b.strikethrough,children:t.content})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("blockquote",{onClick:n,css:b.blockquote,children:t.content})},x=/(@[0-9a-zA-Z_]+)/,C=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,k=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,S=/(`.+?`)/,_=/(\*\*.+?\*\*)/,T=/(_.+?_)/,E=/(\*.+?\*)/,R=/(~~.+?~~)/,D=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function B(e){var t=e.url;return{type:"LINK",url:t,content:t}}function A(e){var t=e.hash;return{type:"DEEP_LINK",url:t,content:t}}var P=RegExp([S.source,_.source,T.source,E.source,R.source,k.source,x.source,C.source,D.source].join("|"),"m");function G(e,t){var n=e.split(P),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u){var d=function(e,t){if(k.test(e)){var n={};try{n=new window.URL(e)}catch(t){return{content:e,type:"TEXT"}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?A({hash:n.hash}):I.test(n.pathname)?function(e){var t=e.url,n=I.exec(t.pathname);if(!n)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):B({url:e}):B({url:e})}if(C.test(e))return A({hash:e});if(D.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(S.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(_.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(T.test(e)||E.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(R.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(x.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,t);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,c=void 0===i?{}:i;return(0,l.tZ)(l.HY,{children:t.tokens.map(function(e,t){var n={fragment:e,key:t};return"MENTION"===e.type?(0,l.tZ)(f,(0,a._)((0,o._)({},n),{onClick:function(){return r(e)}})):"LINK"===e.type?(0,l.tZ)(p,(0,o._)({},n)):"REPL_LINK"===e.type?(0,l.tZ)(h,(0,o._)({},n)):"DEEP_LINK"===e.type?(0,l.tZ)(m,(0,o._)({},n)):"CODE"===e.type?(0,l.tZ)(g,(0,a._)((0,o._)({},n),{style:c})):"BOLD"===e.type?(0,l.tZ)(v,(0,o._)({},n)):"ITALICS"===e.type?(0,l.tZ)(y,(0,o._)({},n)):"STRIKETHROUGH"===e.type?(0,l.tZ)(w,(0,o._)({},n)):"QUOTE"===e.type?(0,l.tZ)(Z,(0,o._)({},n)):(0,l.tZ)(d,(0,o._)({},n))})})}},76132:function(e,t,n){n.d(t,{D:function(){return su}});var r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C=n(41733),k=n(30509),S=n(66626),_=n(63257),T=n(3796),E=n(25949),R=n(33083),D=n(92191),I=n(74044),B=n(99149),A=n(94717),P=n(69593),G=n(34209),L=n(85965),N=n(35139),O=n(29574),U=n(83059),M=n(42965),X=n(87915),F=n(17608),W=n(49982),V=n(33323),H=n(16865),z=n(61010),j=n(62407),q=n(37968),J=n(41639),Y=n(82424),$=n(7391),K=n.n($),Q=n(24200),ee=n(19236),et=n(49853),en=n(75271),er=n(35370),ei=n(42516),eo=n(52130),ea=n(97432),el=n(14274),ec=n(93245),es=n(81346),eu=n(37365),ed=n(63163),ef=n(86763),ep=n.n(ef),eh=n(28365),em=n(24281),eg=n(36809),ev=(0,eg.X)({root:[ed.l0.height(48),ed.l0.backgroundColor.backgroundRoot,ed.l0.display.flex,ed.l0.justify.spaceBetween,ed.l0.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[ed.l0.color.foregroundDefault,ed.l0.fontSize(16),ed.l0.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[ed.l0.position.fixed,ed.l0.width("100%"),ed.l0.zIndex(100),ed.l0.left(0)]}),ey=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,T.BX)("nav",{css:ev.root,children:[t.map(function(e){return(0,T.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,T.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,T.tZ)(es.Z,{})}),(0,T.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,T.tZ)(eu.Z,{})})]})},eb=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],ew=function(e){var t=e.path,n=(0,_._)(eb).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},eZ="visualViewport"in window;function ex(e){var t=e.filePath,n=e.isLoading,r=(0,eh.uN)(),i=(0,ea.d)({tablet:!1}),o=(0,em.Vm)(),a=(0,el.Z)();(0,en.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,a=(n.top+n.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+(o?50:0))}}})},[a,r,o]);var l=(0,S._)((0,en.useState)(0),2),c=l[0],s=l[1];if((0,en.useEffect)(function(){if(o){var e=window.visualViewport;if(eZ&&e){var t=ep()(function(){s(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[o]),!a||n||!i)return null;var u=(0,T.tZ)(ey,{onUndo:function(){r&&((0,eo.Yw)(r),r.focus())},onRedo:function(){r&&((0,eo.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:ew({path:t})});return!o||eZ?(0,T.tZ)(ec.G,{css:ev.fixedContainer,style:{bottom:c},children:u}):u}var eC=n(73581),ek=n(49205),eS=n(79484),e_=n(83918),eT=n(27387),eE=n(96583),eR=n(3030),eD=n(42305),eI=n(54129),eB=n(92943),eA=n(23882),eP=n(25357),eG=n(26677),eL=new eD.j(function(e,t,n,r){return(0,eG.Rr)(e,t?(0,eP.ZF)("/home/runner/".concat(t.slug,"/").concat(n)):null,r)}),eN=n(12285),eO=n(80403),eU=n(64988),eM=n(16783),eX=n.n(eM),eF="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),eW="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),eV=eR.tk.theme({".cm-vws-space":{backgroundColor:ed.TV.foregroundDimmest,maskImage:eF,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eF,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:ed.TV.foregroundDimmest,maskImage:eW,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eW,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),eH=eX()(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return eR.p.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function ez(e,t,n){var r=e.facet(eJ);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(t),a=e.doc.lineAt(n),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var c=0===a.text.trim().length,s=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||s){if(c){if(r.leading||r.trailing||s)for(var u=0;u<l;u++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r.leading||r.trailing||u)&&i.push(eH(l,"trailing",u).range(c,c+1))}}(u);return}for(var d=l-a.text.trimStart().length,f=a.text.trim().length,p=0;p<l;p++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+f?"trailing":o>d?"enclosed":"leading";var p=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r[u]||p)&&i.push(eH(l,u,p).range(c,c+1))}}(p)}}}(l);return i}var ej=function(){"use strict";function e(t){(0,eN._)(this,e),this.decorations=eR.p.set(ez(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,eU.aU)(e,eJ)){this.decorations=eR.p.set(ez(e.state,0,e.state.doc.length));return}var t=e.state.facet(eJ);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,_._)(e.state.selection.ranges).concat((0,_._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=eO.jT.create(o)),a.length&&(i=eO.jT.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,o,a){var l=eO.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):eO.jT.create([l]);var c=eO.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):eO.jT.create([c])}),r){var l=r.ranges;n=n.update({filter:function(e,t){return!l.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return ez(e.state,t.from,t.to)}).flat()})),this.decorations=n}},e}(),eq=eR.lg.fromClass(ej,{decorations:function(e){return e.decorations}}),eJ=eO.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:{}},enables:[eV,eO.Wl.highest(eq)]}),eY=new eD.j(function(e,t,n,r){return e||t||n||r?eJ.of({leading:e,enclosed:t,trailing:n,selected:r}):null}),e$=n(69829),eK=n(37301),eQ=n(23572),e0=n(97763),e1=n(23469),e2=n(86472),e3=n(11208),e4=n(2309),e8=n(13387),e6=n(70593),e5=new eD.j(function(e,t,n,r,i,o){return e?e.formatters.map(function(e){var a;if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var l,c,s=n.find(function(t){return t.clientId===e.id});return s&&s&&s.isSupportedFile(o)&&r&&r.isFormatSupported&&(0,e1.Z)(s).isFormatSupported&&i?eK.Lf.of({format:(l=(0,eT._)(function(e,t,n){return(0,eE.Jh)(this,function(r){return[2,(t?s.request.formatRange(o,(0,eQ.Ih)(e,t),n):s.request.format(o,n)).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,e2.Z)(t.result,e.toString())}:{result:eO.as.empty(e.length)}})]})}),function(e,t,n){return l.apply(this,arguments)}),supportsRangeFormatting:(0,e1.Z)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]}return(0,e8.F7)(o,e)?eK.Lf.of({format:(c=(0,eT._)(function(n,r,i){var a,l,c,s,u;return(0,eE.Jh)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,e6.Z)({container:t}),(l=(0,_._)(e.startCommand.args)).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===e$.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),c="",s="",u=[a.onOutput(function(e){return c+=e}),a.onStderr(function(e){return s+=e}),a.dispose],[4,a.request((0,k._)((0,C._)({},e.startCommand),{args:l,lifecycle:e$.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return u.forEach(function(e){return e()}),t?{error:!0,message:s}:{result:c}})];case 1:return[2,d.sent()]}})}),function(e,t,n){return c.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),e7=n(1076),e9=n(48096),te=n(4955),tt=n(9670),tn=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(eO.uU);function tr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(a,t);l&&i.push(tn.range(l,a.from,a.to)),o=a.to+1}return i}tn.yours=new tn("yours"),tn.base=new tn("base"),tn.middle=new tn("middle"),tn.theirs=new tn("theirs");var ti=["yours","base","middle","theirs"];function to(e){Array.isArray(e)&&(e=eO.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,o,a,l={},c={},s=[],u=!0,d=!1,f=void 0;try{for(var p,h=ti[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value,g=r.value,v=r.from,y=r.to;if("base"!==m||g.type===m){if(g.type===m)l[m]={from:v,to:y},s.push({from:v,to:y,type:g.type});else if("yours"!==g.type)s.push({from:v,to:y,type:g.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}if(!l.yours||!l.middle||!l.theirs){n.push.apply(n,(0,_._)(s));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=c.base)&&void 0!==o||(c.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,w=l.yours.to+1,Z=b.from-1;if(c.yours=w<Z?{from:w,to:Z}:null,l.base){var x=l.base.to+1,C=l.middle.from-1;c.base=x<C?{from:x,to:C}:null}var k=l.middle.to+1,S=l.theirs.from-1;c.theirs=k<S?{from:k,to:S}:null;var T={from:l.yours.from,to:l.theirs.to,markers:l,content:c};t.push(T)}return{hunks:t,hanging:n}}var ta=eO.r$.define({combine:function(e){return e.length?e[0]:7}}),tl=eO.QQ.define({create:function(e){var t=e.doc,n=e.facet(ta),r=eO.Xs.of(tr(t,n)),i=to(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(ta),i=t.state.facet(ta);if(r!==i){var o=eO.Xs.of(tr(n,i)),a=to(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges(function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,p=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:p})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:tr(n,i,s,u)}));var h=to(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),tc=eR.tk.atomicRanges.from(tl,function(e){return function(){return e.markers}}),ts=eO.yy.changeFilter.of(function(e){var t=e.startState.field(tl);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,function(t,s){e<=t&&i>=s||0!==c&&(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c))||o===a&&(i===s+1&&0===n.lineAt(i).length||e===t-1&&0===n.lineAt(e).length)||r.push(t-1,s+1)})}),!(r.length>0)||r}),tu=eO.yy.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(tl):e.startState.field(tl);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<n.ranges.length&&"break"!==function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)}),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,p=o.goalColumn,h=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=eO.jT.range(d,f,p,h);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:n,sequential:!0}]:e}),td="cm-git-conflict-marker-yours",tf="cm-git-conflict-marker-base",tp="cm-git-conflict-marker-middle",th="cm-git-conflict-marker-theirs",tm="cm-git-conflict-marker-hanging",tg="cm-git-conflict-content-yours",tv="cm-git-conflict-content-base",ty="cm-git-conflict-content-theirs";function tb(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:ed.TV.space4,paddingBottom:ed.TV.space4,fontWeight:ed.TV.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function tw(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tZ=eR.tk.theme((d={},(0,ei._)(d,".".concat(td),tb({background:"rgba(0, 150, 255, 0.1)",color:ed.TV.blueStrongest,noBorder:!0})),(0,ei._)(d,".".concat(tp),tb({background:"rgba(255, 0, 0, 0.1)",color:ed.TV.redStrongest})),(0,ei._)(d,".".concat(tf),tb({background:"rgba(255, 165, 0, 0.1)",color:ed.TV.orangeStrongest})),(0,ei._)(d,".".concat(th),tb({background:"rgba(0, 150, 255, 0.1)",color:ed.TV.blueStrongest,noBorder:!0})),(0,ei._)(d,".".concat(tm),tb({background:"rgba(100, 150, 255, 0.1)",color:ed.TV.blueStrongest,noBorder:!0})),(0,ei._)(d,".".concat(tg),tw({background:"rgba(0, 255, 0, 0.1)"})),(0,ei._)(d,".".concat(ty),tw({background:"rgba(255, 0, 0, 0.1)"})),(0,ei._)(d,".".concat(tv),tw({background:"rgba(255, 165, 0, 0.1)"})),d)),tx={yours:{marker:eR.p.line({class:td}),content:eR.p.line({class:tg})},base:{marker:eR.p.line({class:tf}),content:eR.p.line({class:tv})},middle:{marker:eR.p.line({class:tp})},theirs:{marker:eR.p.line({class:th}),content:eR.p.line({class:ty})},hanging:{marker:eR.p.line({class:tm})}},tC=function(){"use strict";function e(t){(0,eN._)(this,e),this.builder=new eO.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to){this.builder.add(n.from,n.from,t);return}for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),tk=eR.tk.decorations.from(tl,function(e){return function(t){var n=new tC(t.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t.viewport.from>c.to||t.viewport.to<c.from||(n.add(c.markers.yours,tx.yours.marker),c.content.yours&&n.add(c.content.yours,tx.yours.content),c.markers.base&&n.add(c.markers.base,tx.base.marker),c.content.base&&n.add(c.content.base,tx.base.content),n.add(c.markers.middle,tx.middle.marker),c.content.theirs&&n.add(c.content.theirs,tx.theirs.content),n.add(c.markers.theirs,tx.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}}),tS=eR.tk.decorations.from(tl,function(e){return function(){var t=new eO.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,tx.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}}),t_=[tl,[tc,ts,tu],[eO.Wl.lowest(tZ),tk,tS]],tT=n(96442),tE=function(){"use strict";function e(t,n,r,i,o,a){(0,eN._)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,c=this.desc,s=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var d=(0,tT.Gj)(c,s,n).pending;l=(0,tT.U_)(a,t,{chunks:l,changesB:d},o),c=(0,tT.fu)(l,a.length),s=null,u=(0,tT.Hu)(c)}else s=(r=(0,tT.Gj)(c,s,n)).pending,c=r.desc,u=(0,tT.Hu)(c);return s&&t.eq(a)&&(l=[],c=eO.as.empty(a.length),s=null,u=[]),new e(a,t,l,c,s,u)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?tT.dQ.COVERED:(0,tT.dx)(t,tT.MF.B,this.ranges)},t.iterRanges=function(){return(0,eE.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,eE.XA)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(t,n,r){var i=(0,tT.U_)(t,n,void 0,r),o=(0,tT.fu)(i,t.length),a=(0,tT.Hu)(o);return new e(t,n,i,o,null,a)},e}(),tR=eO.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),tD=eO.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(tR);return!n||Math.max(n.lines,t.newDoc.lines)>5e3||Math.max(n.length,t.newDoc.length)>4e5?null:(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")))):e=tE.create(n,t.newDoc,{scanLimit:4e4}),e)}}),tI=n(71215),tB=(0,eR.v5)({class:tI.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(tD,!1);if(!n||!n.hasChanges())return tI.Do;if(0===n.original.length)return tI.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case tT.dQ.COVERED:return tI.vP;case tT.dQ.MODIFIED:return tI.wp;default:return tI.Do}},initialSpacer:function(e){return e.state.field(tD,!1)?tI.Vt:tI.Do},updateSpacer:function(e,t){var n=t.state.field(tD,!1)?tI.Vt:tI.Do;return e===n?e:n}}),tA=eO.r$.define({enables:function(e){return[tR.computeN([e],function(t){return t.facet(e)}),tI.Lw,tD,eO.Wl.highest(tB)]}}),tP=n(52870);(o=f||(f={})).GUTTER_DIFF="GUTTER_DIFF",o.INLINE_DIFF="INLINE_DIFF";var tG=eO.Py.define(),tL=eO.Py.define(),tN=eO.QQ.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(tG)?n=s.value:s.is(tL)&&(r=s.value)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[tA.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tP.p.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tO=function(){"use strict";function e(t,n,r){var i=this;(0,eN._)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,eT._)(function(){var t,n,r,i,o;return(0,eE.Jh)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,er.T3)(e.path)})];case 1:if(t=a.sent(),e.disposed||!(n=e.view.state.field(tN,!1)))return[2];return(!(o=null===(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:tG.of(o)}),[2]}})})()},t.destroy=function(){this.dispose(),this.disposed=!0},e}(),tU=n(14118),tM=new eD.j(function(e,t,n){var r=[t?[tN,eR.lg.define(function(n){return new tO(n,e,t)})]:[]];return n||r.push(t_),r}),tX=n(63115),tF=n(12717),tW=n(99842),tV=n(7351),tH=n(8571),tz=n(87183),tj=n(41091),tq=n(52927),tJ=n(63188),tY=n(24766),t$=n(85551),tK=n(43885),tQ="cm-ghostwriter-hint-tooltip",t0=eR.tk.theme((0,ei._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:ed.TV.backgroundHigher,borderTop:"solid 1px ".concat(ed.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(tQ," .cm-ghostwriter-hint"),{display:"block"})),t1=(0,eg.X)({hint:[ed.l0.p(4),ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.font.default,{opacity:.6}],prompt:[ed.l0.rowWithGap(4),ed.l0.align.center]});function t2(){return(0,T.BX)(ec.G,{css:t1.hint,children:[(0,T.tZ)(t$.Z,{width:8,height:8}),(0,T.BX)(ec.G,{css:t1.prompt,children:[(0,T.tZ)(tK.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,T.tZ)(tY.xv,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var t3=eR.lg.define(function(e){var t=function(){var t,n,r;return(0,_._)(e.dom.children).concat((0,_._)(null!==(r=null===(n=tJ.yb.get(e))||void 0===n?void 0:null===(t=n.children[0])||void 0===t?void 0:t.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,tV.LR)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=n(c);if(0===s.length){var u=(0,tq.V)((0,T.tZ)(t2,{}));u.className="cm-ghostwriter-hint",c.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,p=n(c)[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;c.removeChild(h)}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}),t4=n(10777),t8=n(96949),t6=n(97420),t5=n(66591),t7=n(7225),t9=n(38935),ne=n(12623),nt=(0,eg.X)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),nn={p:{padding:"".concat(ed.TV.space2," ").concat(ed.TV.space8),lineHeight:1.4,marginBottom:"".concat(ed.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(ed.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(ed.TV.space4," !important")},pre:{margin:"".concat(ed.TV.space2," ").concat(ed.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(ed.TV.outlineDimmest),paddingTop:ed.TV.space4},"h1, h2, h3":{margin:"".concat(ed.TV.space8," !important"),marginTop:"".concat(ed.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(ed.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(ed.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(ed.TV.space4," !important")},hr:{margin:"".concat(ed.TV.space8," !important"),borderTop:"2px solid ".concat(ed.TV.backgroundHighest," !important")},li:{margin:"".concat(ed.TV.space2," ").concat(ed.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(ed.TV.backgroundHighest),marginBottom:ed.TV.space4},".cm-line":{paddingLeft:ed.TV.space4,paddingRight:ed.TV.space4},".cm-content":{paddingLeft:ed.TV.space4,paddingRight:ed.TV.space4}},nr=(0,en.memo)(function(e){var t=e.content,n=e.className;return(0,T.tZ)(ec.G,{css:nn,children:(0,T.tZ)(t9.ZP,{className:n,components:{code:function(e){return(0,T.tZ)(ne.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function ni(e){var t=e.content,n=e.className;return"string"==typeof t?(0,T.tZ)(nr,{css:nt.styles0,className:n,content:t}):t.kind===t7.MarkupKind.PlainText?(0,T.tZ)(ec.G,{children:(0,T.tZ)(tY.xv,{className:n,children:t.value})}):(0,T.tZ)(nr,{className:n,content:t.value})}var no=n(98924),na=n(55992),nl=n(4384),nc=n(83176),ns=n(25490);(a=p||(p={}))[a.Dollar=0]="Dollar",a[a.Colon=1]="Colon",a[a.Comma=2]="Comma",a[a.CurlyOpen=3]="CurlyOpen",a[a.CurlyClose=4]="CurlyClose",a[a.Backslash=5]="Backslash",a[a.Forwardslash=6]="Forwardslash",a[a.Pipe=7]="Pipe",a[a.Int=8]="Int",a[a.VariableName=9]="VariableName",a[a.Format=10]="Format",a[a.Plus=11]="Plus",a[a.Dash=12]="Dash",a[a.QuestionMark=13]="QuestionMark",a[a.EOF=14]="EOF";var nu=function(){"use strict";function e(){(0,eN._)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();nu._table=(h={},(0,ei._)(h,36,0),(0,ei._)(h,58,1),(0,ei._)(h,44,2),(0,ei._)(h,123,3),(0,ei._)(h,125,4),(0,ei._)(h,92,5),(0,ei._)(h,47,6),(0,ei._)(h,124,7),(0,ei._)(h,43,11),(0,ei._)(h,45,12),(0,ei._)(h,63,13),h);var nd=function(){"use strict";function e(){(0,eN._)(this,e),this._children=[],function(e,t){t.forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0})})}(this,["parent"])}var t=e.prototype;return t.appendChild=function(e){return e instanceof nf&&this._children[this._children.length-1]instanceof nf?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,_._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,n)},t.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(nx)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,S._)(i.value,2),l=a[0],c=a[1];if(this instanceof c&&l in e)return e[l](this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,nl._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof nw)return e;e=e.parent}}}]),e}(),nf=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(nd),np=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){return(0,eN._)(this,n),t.apply(this,arguments)}return n}(nd),nh=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,nl._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof nm?this._children[0]:void 0}}]),n}(np),nm=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){var e;return(0,eN._)(this,n),e=t.apply(this,arguments),e.options=[],e}var r=n.prototype;return r.appendChild=function(e){return e instanceof nf&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(nd),ng=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){var e;return(0,eN._)(this,n),e=t.apply(this,arguments),e.regexp=RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return e instanceof nv&&!!e.elseValue})&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l instanceof nv){var c=e[l.index]||"";c=l.resolve(c),t+=c}else t+=l.toString()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(nd),nv=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e,r,i,o){var a;return(0,eN._)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(nd),ny=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new nf(t)],!0)},r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(np);function nb(e,t){for(var n=(0,_._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,_._)(r.children))}}var nw=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){return(0,eN._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1},r.fullLen=function(e){var t=0;return nb([e],function(e){return t+=e.len(),!0}),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof nh&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof ny&&n.resolve(e)&&delete t._placeholders,!0}),this},r.appendChild=function(e){return delete this._placeholders,(0,nc._)((0,ns._)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,nc._)((0,ns._)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")},r.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},r.walk=function(e){nb(this.children,e)},(0,nl._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof nh&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(nd),nZ=function(){"use strict";function e(){(0,eN._)(this,e),this._scanner=new nu,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new nw;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return e instanceof nh&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,n){var i=r.get(e.index);if(i){var a=new nh(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),f instanceof nh&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new nh(0))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new nf(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new nh(Number(t)):new ny(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new nh(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nf("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new nm;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new nf(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new ny(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nf("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseTransform=function(e){for(var t=new ng,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new nf(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n||this._accept(4))return e.appendChild(new nv(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new nv(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new nv(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new nv(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new nv(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new nv(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new nf(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return new e().parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),nx={Text:nf,Placeholder:nh,Variable:ny,FormatString:nv,Choice:nm},nC=function(){"use strict";function e(t){(0,eN._)(this,e),this.lines=t.split(/\r\n?|\n/).map(function(e){return new nZ().parse(e).children})}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:eO.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:tV.Jv.of(t.completion)};if(l.length&&(s.selection=nD(l,0)),l.length>1){var u=new n_(l,0),d=s.effects=[nT.of(u)];void 0===n.state.field(nR,!1)&&d.push(eO.Py.appendConfig.of([nR,nB,nA]))}if(r===i&&!l.length){var f=eO.as.of(c,n.state.doc.length),p=n.state.selection.ranges.map(function(e){return e.map(f,0)});s.selection=eO.jT.create(p,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,na.basename)(i);case"TM_FILENAME_BASE":return(0,na.basename)(i,(0,na.extname)(i));case"TM_DIRECTORY":return(0,na.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r=n.view,i=n.from,o=r.state,a=[],l=[],c=o.doc.lineAt(i),s=/^\s*/.exec(c.text)[0],u=o.facet(R.c),d=!0,f=!1,p=void 0;try{for(var h,m,g=t[Symbol.iterator]();!(d=(m=g.next()).done);d=!0)!function(){var t=m.value,r=0,o="",c=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=s+u.repeat(t);e=i+e.slice(t),n+=i.length}return o+=e,r+=e.length,{line:a.length,from:n,to:r}},d=function(t){var o=!0,s=!1,u=void 0;try{for(var f,p=t[Symbol.iterator]();!(o=(f=p.next()).done);o=!0)f.value.match({Text:function(e){c(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),c(o)},Choice:function(e){c(e.options[0].value)},Placeholder:function(e){var t,n=a.length?i+a.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var o={field:e.index,from:n+r,to:null};l.push(o),d(e.children),o.to=n+r}else{c("");var s=n+r;l.push({field:e.index,from:s,to:s})}}})}catch(e){s=!0,u=e}finally{try{o||null==p.return||p.return()}finally{if(s)throw u}}};d(t),a.push(o)}()}catch(e){f=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(f)throw p}}var v=(h=Math).max.apply(h,(0,_._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var t=e.field,n=(0,no._)(e,["field"]);return(0,k._)((0,C._)({},n),{field:0===t?v:t-1})})}},e}(),nk=eR.p.widget({widget:new(function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){return(0,eN._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(eR.l9))}),nS=eR.p.mark({class:"cm-snippetField"}),n_=function(){"use strict";function e(t,n){(0,eN._)(this,e),this.ranges=t,this.active=n,this.deco=eR.p.set(t.map(function(e){return(e.from===e.to?nk:nS).range(e.from,e.to)}))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=function(e,t){var n=t.mapPos(e.from,-1,eO.gc.TrackDel),r=t.mapPos(e.to,1,eO.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(c,t);if(!s)return null;n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})},e}(),nT=eO.Py.define({map:function(e,t){return null==e?void 0:e.map(t)}}),nE=eO.Py.define(),nR=eO.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(nT))return l.value;if(l.is(nE)&&e)return new n_(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return eR.tk.decorations.from(e,function(e){return e?e.deco:eR.p.none})}});function nD(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return eO.jT.range(e.from,e.to)});if(0!==n.length)return eO.jT.create(n)}function nI(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(nR,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,_._)(o.ranges.map(function(e){return e.field}))),c=e>0&&o.active>=l;return i(r.update({selection:nD(o.ranges,a),effects:nT.of(c?null:new n_(o.ranges,a))})),!0}}var nB=eO.Wl.highest(eR.$f.of([{key:"Tab",run:nI(1),shift:nI(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nR,!1)&&(n(t.update({effects:nT.of(null)})),!0)}}])),nA=eR.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nR,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:nD(r.ranges,i.field),effects:nT.of(r.ranges.some(function(e){return e.field>i.field})?new n_(r.ranges,i.field):null)}),!0)}}),nP=eO.r$.define({combine:function(e){return e.some(Boolean)}}),nG=new WeakMap;function nL(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var nN="lsp-completion-keyboard-shortcuts",nO=eR.tk.theme((m={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:t6.TV.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,ei._)(m,"& .".concat(nN),{display:"none"}),(0,ei._)(m,'& [aria-selected="true"] .'.concat(nN),{float:"right",display:"inline-block"}),m)),nU=n(92678);function nM(e){var t=e.content,n=e.className,r=e.showHoveredVariable,i=(0,O.Gn)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,T.tZ)(ni,{content:t});var o=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,T.tZ)(t9.ZP,{css:[{p:{fontSize:i.fontSize}},r?[ed.l0.maxHeight(nX),ed.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,T.tZ)(ne.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:o})}var nX=100;function nF(e){var t=e.className,n=e.content,r=e.textHovered,i=(0,eA.Z)().debuggest,o=(0,eI.Z)(i.mainClient),a=o&&("running"===o.state.current||"paused"===o.state.current),l=(0,S._)((0,en.useState)(!1),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(void 0),2),d=u[0],f=u[1],p=a&&d;return(0,en.useEffect)(function(){function e(){return(e=(0,eT._)(function(){var e,t;return(0,eE.Jh)(this,function(n){switch(n.label){case 0:if(!a)return[3,4];s(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,o.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(t=n.sent()).body)||void 0===e?void 0:e.result)&&f((0,C._)({name:r,value:t.body.result},t.body)),[3,4];case 3:return s(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[o,a,r]),(0,T.BX)(ec.G,{css:[nn,p?ed.l0.maxHeight(nX+190):ed.l0.maxHeight(190),ed.l0.minHeight(30),ed.l0.overflowY("auto"),ed.l0.borderRadius(4),ed.l0.backgroundColor.backgroundHigher],children:[c?void 0:(0,T.tZ)(nM,{content:n,className:t,showHoveredVariable:!!p}),p?(0,T.tZ)(ec.G,{css:[ed.l0.maxHeight(190),ed.l0.overflowY("auto")],children:(0,T.tZ)(nU._,{depth:0,client:o,variable:d})}):void 0]})}var nW=n(98841),nV=n(60482),nH=n(54923),nz=n(62502),nj=n(4960),nq=n(17932),nJ=n(66938),nY=n(71051),n$=new(function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){var e;return(0,eN._)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(eR.SJ)),nK=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).numLines=e,r}var r=n.prototype;return r.eq=function(e){return e.numLines===this.numLines},r.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,nY.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(eR.l9),nQ=eR.p.mark({class:"cm-searchResultMatch"}),n0=eR.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:ed.TV.foregroundDefault,backgroundColor:ed.TV.accentPrimaryDimmest,outline:ed.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:ed.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),n1=n(84238),n2=n(9602),n3=n(29737),n4=n(7935),n8=n(10578),n6=n(7420),n5=(0,eg.X)({snippetGroupText:[ed.l0.pl(8),ed.l0.py(8)],snippetGroupContainer:[ed.l0.p(4)],loadingContainer:[ed.l0.width(128),ed.l0.height(128),ed.l0.display.flex,ed.l0.align.center,ed.l0.justify.center],container:[ed.l0.minWidth("375px"),ed.l0.maxWidth("500px"),ed.l0.pt(4),ed.l0.overflowY("scroll")],firstReferenceDivider:[ed.l0.border({direction:"bottom",color:ed.TV.backgroundHighest})],headerGroup:[ed.l0.p(4)],headerContainer:[ed.l0.flex.row,ed.l0.justify.spaceBetween,ed.l0.align.center,ed.l0.pr(4)],header:[ed.l0.p(4),ed.l0.pl(8)],referencesGroups:[ed.l0.p(4)],referencesHeader:[ed.l0.p(4),ed.l0.pl(8)]});function n7(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(t);return 0===a.length?(0,T.tZ)(tY.xv,{color:"dimmer",css:n5.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,T.tZ)(ec.G,{children:a.map(function(e){var r,l,c=t[e],s=n[e],u=(l=(r=c.sort(function(e,t){return e.from-t.from})).map(function(e){var t=e.from,n=e.to;return nQ.range(t,n)}),[eR.lg.define(function(){return{}},{decorations:function(){return eR.p.set(l)}}),function(e,t){var n=[],r=1;e.forEach(function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})});var i=n.map(function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return eR.p.replace({widget:new nK(e.endLine-e.startLine+1)}).range(n.from,r.to)}),o=n.map(function(e){var n=t.line(e.startLine);return eR.p.line({class:"cm-line-hidden"}).range(n.from)}),a=eO.QQ.define({create:function(){return eR.p.set(i)},update:function(e){return e},provide:function(e){return eR.tk.decorations.from(e)}}),l=eO.QQ.define({create:function(){return eR.p.set(o)},update:function(e){return e},provide:function(e){return eR.tk.decorations.from(e)}}),c=n.map(function(e){var n=t.line(e.startLine);return n$.range(n.from)});return[a,l,n0,eR.p2.of(eO.Xs.of(c))]}(r,s)]);return(0,T.tZ)(ec.G,{css:n5.snippetGroupContainer,children:(0,T.tZ)(rt,{path:e,extensions:[u],doc:s,numMatches:c.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,S._)(c,1)[0],r=s.lineAt(n.from),a=n.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function n9(e){var t=e.files,n=e.onClose,r=e.references,i=e.definitions,o=e.currentFile,a=e.currentFileContents,l=e.jumpToPosition,c=(0,eA.Z)().fs,s=(0,e3.Z)(o)[0],u=(0,n1.Z)(n,[]),d=(0,S._)((0,en.useState)((0,ei._)({},o,eO.xv.of(a.split("\n")))),2),f=d[0],p=d[1];(0,en.useEffect)(function(){if(t.length){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,eT._)(function(){var n;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:var i;return n={},[4,Promise.all(t.map((i=(0,eT._)(function(e){var t;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:return[4,c.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=eO.xv.of(t.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),e)return[2];return p(function(e){return(0,C._)({},e,n)}),[2]}})})).apply(this,arguments)}},[c,t]);var h=(0,_._)(r).concat((0,_._)(i));if(!s||h.some(function(e){return!(s.documentUriToPath(e.uri) in f)}))return(0,T.tZ)(ec.G,{css:n5.loadingContainer,children:(0,T.tZ)(n8.Z,{size:32})});var m={},g={};function v(e,t){if(!s)throw Error("Expected LSP Client");var n=s.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=f[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})}return r.forEach(function(e){v(e,m)}),i.forEach(function(e){v(e,g)}),(0,T.BX)(ec.G,{innerRef:u,css:n5.container,children:[(0,T.tZ)(ec.G,{css:n5.firstReferenceDivider,children:(0,T.BX)(ec.G,{css:n5.headerGroup,children:[(0,T.BX)(ec.G,{css:n5.headerContainer,children:[(0,T.tZ)(tY.h4,{level:2,variant:"subheadDefault",css:n5.header,children:"Definitions"}),(0,T.tZ)(n6.Z,{filled:!1,border:!1,onClick:n,children:(0,T.tZ)(n4.Z,{})})]}),(0,T.tZ)(n7,{matchesMap:g,fileToContents:f,type:"DEFINITION",onClose:n,currentFile:o,jumpToPosition:l})]})}),(0,T.tZ)(ec.G,{children:(0,T.BX)(ec.G,{css:n5.referencesGroups,children:[(0,T.tZ)(tY.h4,{level:2,variant:"subheadDefault",css:n5.referencesHeader,children:"References"}),(0,T.tZ)(n7,{matchesMap:m,fileToContents:f,type:"REFERENCES",onClose:n,currentFile:o,jumpToPosition:l})]})})]})}(l=g||(g={})).DEFINITION="DEFINITION",l.REFERENCES="REFERENCES";var re=(0,eg.X)({container:[ed.l0.width("100%"),ed.l0.p(4),ed.l0.rowWithGap(4),ed.l0.justify.spaceBetween,ed.l0.align.center],left:[ed.l0.flex.grow(1),ed.l0.rowWithGap(8),ed.l0.align.center],editor:[ed.l0.p(4)],text:[ed.l0.flex.shrink(1),{textOverflow:"ellipsis"}]});function rt(e){var t=e.path,n=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,S._)((0,en.useState)(a),2),c=l[0],s=l[1];return(0,T.BX)(ec.G,{children:[(0,T.BX)(ec.G,{css:re.container,children:[(0,T.BX)(ec.G,{css:re.left,children:[(0,T.tZ)(X.Z,{path:t}),(0,T.tZ)(tY.xv,{multiline:!1,title:t,css:re.text,children:t}),(0,T.tZ)(tY.xv,{color:"dimmest",multiline:!1,children:(0,nY.Z)("match",i,!0)})]}),(0,T.tZ)(n2.hU,{alt:c?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return s(function(e){return!e})},children:(0,T.tZ)(n3.Z,{rotate:c?180:0,style:{transition:"200ms ease"}})})]}),(0,T.tZ)(ec.G,{css:re.editor,style:{display:c?"block":"none"},children:(0,T.tZ)(nJ.F,{path:t,initialDoc:n,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var rn=n(13585),rr=n(92799),ri=n(37505),ro=(0,n(38158).B)(),ra=eO.Py.define(),rl=eO.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,o){n=o.sliceString(0,1)}),n||null}}),rc=new tq.J(function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(ed.TV.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],c=r.signatures.length>1;if(!l)return null;var s=l.documentation,u=null!=r.activeParameter&&(null===(n=l.parameters)||void 0===n?void 0:null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,T.BX)(ec.G,{css:[ed.l0.flex.row,ed.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[c?(0,T.tZ)(ec.G,{css:[ed.l0.flex.row,ed.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,T.BX)("span",{css:[{alignSelf:"flex-end"},ed.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,T.BX)(ec.G,{children:[(0,T.tZ)(ec.G,{css:[ed.l0.py(4),ed.l0.pl(c?4:8),ed.l0.pr(8),ed.l0.maxHeight(100),ed.l0.overflowY("scroll"),ed.l0.font.code,{lineHeight:ed.TV.lineHeightSmall,maxWidth:a}],children:(0,T.tZ)(rs,{signature:l,activeParameter:r.activeParameter})}),!!(s||u)&&(0,T.BX)(ec.G,{css:[ed.l0.px(c?4:8),ed.l0.py(2),ed.l0.maxHeight(200),ed.l0.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,T.tZ)(ni,{content:u}):null,s?(0,T.tZ)(ni,{content:s}):null]})]})]})});function rs(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,T.tZ)("span",{children:r});var a=null===(t=i[o])||void 0===t?void 0:t.label;if(!a)return(0,T.tZ)("span",{children:r});var l=(0,S._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),c=l[0],s=l[1];return(0,T.BX)("div",{children:[(0,T.tZ)("span",{children:r.slice(0,c)}),(0,T.tZ)("strong",{children:a}),(0,T.tZ)("span",{children:r.slice(s)})]})}function ru(){return(ru=(0,eT._)(function(e,t,n,r,i){return(0,eE.Jh)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(n.map((a=(0,eT._)(function(n){var o,a;return(0,eE.Jh)(this,function(l){return(o=i.current.get(n.clientId))&&n.notify.cancelRequest(o),a=n.generateId(),i.current.set(n.clientId,a),[2,n.request.signatureHelp(r,(0,eQ.sg)(e.doc,t),{id:a}).then(function(e){return(i.current.get(n.clientId)===a&&i.current.set(n.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var rd=n(51638),rf=n(92674),rp=n.n(rf),rh=new Map,rm=n(85188),rg=n(22488),rv=n(65895),ry=n(76773),rb=n(41691),rw=n(80273),rZ={namespace:rb.pJ.namespace,type:rb.pJ.typeName,class:rb.pJ.className,enum:rb.pJ.typeName,interface:rb.pJ.typeName,struct:rb.pJ.typeName,typeParameter:rb.pJ.typeName,parameter:rb.pJ.variableName,variable:rb.pJ.variableName,property:rb.pJ.propertyName,enumMember:rb.pJ.propertyName,event:rb.pJ.typeName,function:rb.pJ.function(rb.pJ.variableName),method:rb.pJ.function(rb.pJ.propertyName),macro:rb.pJ.macroName,keyword:rb.pJ.keyword,modifier:rb.pJ.modifier,comment:rb.pJ.comment,string:rb.pJ.string,number:rb.pJ.number,regexp:rb.pJ.regexp,operator:rb.pJ.operator,decorator:rb.pJ.function(rb.pJ.annotation),angle:null,arithmetic:rb.pJ.arithmeticOperator,attribute:rb.pJ.attributeName,attributeBracket:rb.pJ.bracket,bitwise:rb.pJ.bitwiseOperator,boolean:rb.pJ.bool,brace:rb.pJ.brace,bracket:rb.pJ.bracket,builtinAttribute:rb.pJ.standard(rb.pJ.attributeName),builtinType:rb.pJ.standard(rb.pJ.typeName),character:rb.pJ.character,colon:rb.pJ.punctuation,comma:rb.pJ.separator,comparison:rb.pJ.compareOperator,constParameter:rb.pJ.constant(rb.pJ.variableName),derive:rb.pJ.function(rb.pJ.annotation),deriveHelper:rb.pJ.function(rb.pJ.annotation),dot:rb.pJ.derefOperator,escapeSequence:rb.pJ.escape,invalidEscapeSequence:rb.pJ.invalid,formatSpecifier:rb.pJ.processingInstruction,generic:rb.pJ.typeName,label:rb.pJ.labelName,lifetime:rb.pJ.special(rb.pJ.variableName),logical:rb.pJ.logicOperator,macroBang:rb.pJ.macroName,parenthesis:rb.pJ.paren,punctuation:rb.pJ.punctuation,selfKeyword:rb.pJ.self,selfTypeKeyword:rb.pJ.self,semicolon:rb.pJ.separator,typeAlias:rb.pJ.typeName,toolModule:rb.pJ.namespace,union:null,unresolvedReference:null,tomlArrayKey:rb.pJ.propertyName,tomlTableKey:rb.pJ.className},rx={declaration:rb.pJ.definition,definition:rb.pJ.definition,readonly:rb.pJ.constant,static:rb.pJ.constant,deprecated:null,abstract:null,async:rb.pJ.special,modification:function(e){return e===rb.pJ.keyword?rb.pJ.modifier:null},documentation:function(e){return e===rb.pJ.comment?rb.pJ.docComment:e===rb.pJ.string?rb.pJ.docString:null},defaultLibrary:rb.pJ.standard,attribute:null,callable:rb.pJ.function,constant:rb.pJ.constant,consuming:null,controlFlow:function(e){return e===rb.pJ.keyword?rb.pJ.controlKeyword:e===rb.pJ.operator?rb.pJ.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return rb.pJ.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},rC=new Set([rb.pJ.comment,rb.pJ.string,rb.pJ.number,rb.pJ.keyword,rb.pJ.operator]),rk=new Map;function rS(){return(rS=(0,eT._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,eE.Jh)(this,function(f){switch(f.label){case 0:if(t=e.client,n=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,e1.Z)(t),r&&a.isSemanticTokensDeltaSupported)l=t.semanticTokensDelta(n,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=t.semanticTokensFull(n,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];c=(0,eQ.sg)(i,0),s=(0,eQ.sg)(i,i.length),l=t.semanticTokensRange(n,{start:c,end:s},{signal:o})}return[4,l];case 1:if((u=f.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var r_=function(){"use strict";function e(t,n){(0,eN._)(this,e),this.data=t,this.id=n}var t=e.prototype;return t.reset=function(){this.data=[],this.id=null},t.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var t,n,r=e.edits.slice().sort(function(e,t){return t.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s,u,d=l.value;(null===(s=d.data)||void 0===s?void 0:s.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,_._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.id=null!==(n=e.resultId)&&void 0!==n?n:null}else if("data"in e)this.data=e.data,this.id=null!==(t=e.resultId)&&void 0!==t?t:null;else throw Error("Invalid semantic tokens response")},t.decorations=function(e,t){for(var n=t.doc,r=new eO.f_,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],c=this.data[a+1],s=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?c:o+c;var f=function(e,t,n){var r=(0,rw.uH)(e,t);if(null===r)return null;var i=rZ[r];if(!i)return null;var o=(0,rw.ib)(e,n),a="".concat(r,":").concat(o.join(",")),l=rk.get(a);if(void 0!==l)return l;var c=o.map(function(e){if(void 0===rx[e])return null;var t=rx[e];return null===t?null:t}).filter(Boolean),s=!0,u=!1,d=void 0;try{for(var f,p=c[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=(0,f.value)(i);h&&(i=h)}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return i&&rC.has(i)&&(i=null),rk.set(a,i),i}(e,u,d);if(f){var p=(0,R.QN)(t,[f]);if(p){var h=(0,eQ.RL)(n,{line:i,character:o}),m=(0,eQ.RL)(n,{line:i,character:o+s}),g=eR.p.mark({class:p});r.add(h,m,g)}}}return r.finish()},e}(),rT=["typescript"],rE=function(){"use strict";function e(t,n){var r=this;(0,eN._)(this,e),this.view=t,this.client=n,this.data=new r_([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=eR.p.none,this.proneToDesync=rT.some(function(e){return n.clientId.includes(e)}),this.disposables.push(n.onSemanticTokensRefresh(function(){return r.refresh()}),n.onServerCapabilitiesChange(function(){return r.refresh()}));var i=t.state.facet(tj.Yp);if(i){if(n.isOpen(i))this.run();else{var o=setTimeout(function(){n.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var t=e.prototype;return t.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},t.refresh=function(){this.abort(),this.data.reset(),this.run()},t.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,eT._)(function(){var t;return(0,eE.Jh)(this,function(n){switch(n.label){case 0:t=function(){var t,n,r,i,o,a,l,c,s,u,d;return(0,eE.Jh)(this,function(f){switch(f.label){case 0:t=Date.now(),f.label=1;case 1:if(f.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(tj.Yp),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(n=r.semanticTokensProvider)||void 0===n?void 0:n.legend,c=(l=(0,e1.Z)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!c||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=eR.p.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return rS.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(s=f.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(s),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=f.sent(),(0,eR.OO)(e.view.state,u),e.data.reset(),e.decorations=eR.p.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-t,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:f.sent(),f.label=6;case 6:return[2]}})},n.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,eE.XA)(t())];case 2:return n.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},t.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},t.postUpdate=function(e){(0,eU.aU)(e,tj.Yp)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},t.destroy=function(){this.abort(),this.data.reset();var e=!0,t=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.disposables=[]},e}(),rR=new eD.j(function(e){if(!e||!e.length)return null;var t=e.map(function(e){return eR.lg.define(function(t){return new rE(t,e)},{decorations:function(e){return e.decorations},provide:function(e){return eR.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})});return eO.Wl.highest(t)}),rD=n(64426),rI=new eD.j(function(e){return nP.of(e)}),rB=new eD.j(function(e){return rm.WB.of(e)}),rA=new eD.j(function(e){return rD.I.of(e)}),rP=n(97588),rG=eR.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:t6.TV.backgroundDefault,borderLeft:"1px solid ".concat(t6.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),rL=eO.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),rN=new eD.j(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[rG,rL,rP.a.compute([tD,rL],function(e){if(e.field(rL,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(tD,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tT.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case tT.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}})]}),rO=n(88681),rU=n(85234),rM=n.n(rU),rX=n(82436),rF=eO.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null}}),rW=eO.r$.define({combine:function(e){return rH(e)}}),rV=eO.r$.define({combine:function(e){return rH(e)}});function rH(e){var t=[];return e.forEach(function(e){return e?t.push(e):void 0}),t}var rz=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).diagnostic=e,r}return n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,nl._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(eO.uU);function rj(e){var t=new eO.f_;return(0,D.c1)(e,function(e,n,r){t.add(n,r,new rz(e))}),t.finish()}var rq=eO.QQ.define({create:function(e){return rj(e)},update:function(e,t){return(0,eU.aU)(t,D.lC)?rj(t.state):e.map(t.changes)},provide:function(e){return rW.compute([e],function(t){for(var n=new Map,r=t.field(e).iter();r.value;){for(var i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,c=null===(l=n.get(a))||void 0===l?void 0:l.severityValue;(!c||c<r.value.severityValue)&&n.set(a,r.value),a++}r.next()}return Array.from(n.entries()).map(function(e){var t=(0,S._)(e,2),n=t[0],r=t[1];return{color:r.severityColor,number:n,zIndex:r.severityValue}})})}}),rJ="cm-with-scrollbar",rY="cm-scrollbar-gutter",r$="cm-scrollbar-inner",rK="cm-scrollbar-overlay-container",rQ="cm-scrollbar-overlay",r0="cm-scrollbar-overlay-invisible",r1="cm-scrollbar-overlay-active",r2="--cm-scrollbar-overlay-height",r3=eR.tk.theme((b={"&":{height:"100%",overflowY:"auto"}},(0,ei._)(b,"& .".concat(rY),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,ei._)(b,"& .".concat(r$),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,ei._)(b,"& .".concat(r$," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,ei._)(b,".".concat(rK),(y={position:"absolute",top:0,height:"100%",width:"100%"},(0,ei._)(y,"& .".concat(rQ),(v={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(r2,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,ei._)(v,"&:hover",{opacity:"0.3"}),(0,ei._)(v,"&.".concat(r0),{pointerEvents:"none",opacity:0}),v)),(0,ei._)(y,"& .".concat(r1),(0,ei._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(rQ),{opacity:"0.4"})),y)),(0,ei._)(b,"&.".concat(rJ," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,ei._)(b,"&.".concat(rJ," .cm-scroller"),{scrollbarWidth:"none"}),b)),r4=function(){"use strict";function e(t){(0,eN._)(this,e),this.dragInfo=null,this.view=t,this.container=document.createElement("div"),this.container.classList.add(rK),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(rQ),this.container.appendChild(this.handle);var n=t.dom.querySelector(".".concat(r$));n&&n.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(t.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var t=e.prototype;return t.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(t){var n=t.ratio;e.handle.style.setProperty(r2,"".concat(100*n,"%")),1===n?e.handle.classList.add(r0):e.handle.classList.remove(r0)}})},t.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var t=e.view.contentHeight,n=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((n-r)/(t-n)))}},write:function(t){var n=t.scrollTop;e.handle.style.top="".concat(n,"px")}})},t.onMouseDown=function(e){var t=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(r1);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var n=t.view.scrollDOM.clientHeight,r=t.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-n/r*n/2)/n*r}},write:function(e){var n=e.scrollTop;t.view.scrollDOM.scrollTop=n}})}},t.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(r1))},t.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var t=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+t/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},t.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},t.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),r8=function(){"use strict";function e(t){(0,eN._)(this,e),this.view=t;var n=t.state.facet(rF);if(!n)throw Error("expected config");this.dom=n.create(t).dom,this.dom.classList.add(rY);var r=document.createElement("div");r.classList.add(r$);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling),this.update()}var t=e.prototype;return t.shouldRedraw=function(e,t){return!!(!e||!t||(0,eU.aU)(e,"doc","selection","focus",rV,rW,R.SW,R.xP))||this.view.contentHeight!==this.previousContentHeight||2*t.scrollClientHeight!==this.previousCanvasHeight},t.update=function(e){var t=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:t.view.scrollDOM.clientHeight}},write:function(n){var r=n.scrollClientHeight;if(t.context&&t.shouldRedraw(e,{scrollClientHeight:r})){t.previousContentHeight=t.view.contentHeight,t.context.canvas.width=28,t.context.canvas.height=2*r,t.previousCanvasHeight=t.context.canvas.height,t.context&&t.context.clearRect(0,0,t.context.canvas.width,t.context.canvas.height);var i=t.view.state.facet(rV),o=t.view.state.facet(rW),a=new Map,l=!0,c=!1,s=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f,p=(0,S._)(u.value,2),h=p[0],m=p[1],g=h%3,v=void 0,y=void 0,b=!0,w=!1,Z=void 0;try{for(var x,C=m[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k,_=x.value;if(void 0===v||void 0===y){v=_,y=_;continue}if(y.number+1===_.number&&y.color===_.color&&y.zIndex===_.zIndex){y=_;continue}a.set(g,(null!==(k=a.get(g))&&void 0!==k?k:[]).concat([[v,y]])),v=_,y=_}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}v&&y&&a.set(g,(null!==(f=a.get(g))&&void 0!==f?f:[]).concat([[v,y]]))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var T=!0,E=!1,D=void 0;try{for(var I,B=a.entries()[Symbol.iterator]();!(T=(I=B.next()).done);T=!0)!function(){var e=(0,S._)(I.value,2),n=e[0],i=e[1].sort(function(e,t){var n,r,i=(0,S._)(e,1)[0],o=(0,S._)(t,1)[0];return(null!==(n=i.zIndex)&&void 0!==n?n:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)!function(){var e=(0,S._)(c.value,2),i=e[0],o=i.color,a=i.number,l=e[1].number,s=t.view.state.doc.line(a),u=t.view.state.doc.line(l),d=1/0,f=-1/0;if((0,R.q2)(t.view.state).between(s.from,u.to,function(e,t){d>e&&(d=e),f<t&&(f=t)}),d<f){var p=t.view.state.doc.lineAt(d);p.number<=s.number&&(s=p),t.view.state.doc.lineAt(f).number>=u.number&&(u=p)}var h=s.number,m=u.number,g=!0,v=!1,y=void 0;try{for(var b,w=t.view.state.field(r7)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var Z=(0,S._)(b.value,2),x=Z[0],C=Z[1];x[0].number<s.number&&(h-=C),x[1].number<u.number&&(m-=C)}}catch(e){v=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(v)throw y}}t.drawRange({scrollClientHeight:r,color:o,from:h,to:m,lane:n})}()}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}()}catch(e){E=!0,D=e}finally{try{T||null==B.return||B.return()}finally{if(E)throw D}}var A=!0,P=!1,G=void 0;try{for(var L,N=i[Symbol.iterator]();!(A=(L=N.next()).done);A=!0){var O=L.value,U=!0,M=!1,X=void 0;try{for(var F,W=O[Symbol.iterator]();!(U=(F=W.next()).done);U=!0){var V=F.value,H=V.color,z=V.number,j=z,q=!0,J=!1,Y=void 0;try{for(var $,K=t.view.state.field(r7)[Symbol.iterator]();!(q=($=K.next()).done);q=!0){var Q=(0,S._)($.value,2),ee=(0,S._)(Q[0],1)[0],et=Q[1];ee.number<z&&(j-=et)}}catch(e){J=!0,Y=e}finally{try{q||null==K.return||K.return()}finally{if(J)throw Y}}t.drawRange({scrollClientHeight:r,color:H,from:j})}}catch(e){M=!0,X=e}finally{try{U||null==W.return||W.return()}finally{if(M)throw X}}}}catch(e){P=!0,G=e}finally{try{A||null==N.return||N.return()}finally{if(P)throw G}}}}})},t.destroy=function(){this.dom.remove()},t.drawRange=function(e){if(this.context){var t,n=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-n)<4&&(n-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(t=e.lane)&&void 0!==t?t:0),2*n,28/(void 0===e.lane?1:3),2*r)}},e}();function r6(e){for(var t=[],n=(0,R.q2)(e).iter();n.value;){var r=t[t.length-1];if(!r||r[0][1].to<n.to){var i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);t.push([[i,o],o.number-i.number])}n.next()}return t}function r5(e){return null!==e.facet(rF)}var r7=eO.QQ.define({create:function(e){return r5(e)?r6(e):[]},update:function(e,t){return r5(t.state)&&(0,eU.aU)(t,"doc",R.iQ,r5)?r6(t.state):e}}),r9=eO.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null},enables:function(e){return[rF.compute([e],function(t){return t.facet(e)}),r3,[r7,(0,eU.Zc)(function(e){return new r8(e)},{isEnabled:function(e){return null!==e.facet(rF)},provide:function(){return eR.tk.editorAttributes.of(function(e){return null!==e.state.facet(rF)?{class:rJ}:null})}})],(0,eU.Zc)(function(e){return new r4(e)},{isEnabled:function(e){return null!==e.facet(rF)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),ie="cm-multiplayer-selection-green",it="cm-multiplayer-selection-red",ir="cm-multiplayer-selection-blue",ii="cm-multiplayer-selection-gold",io="cm-multiplayer-selection-purple",ia="cm-multiplayer-selection-teal",il="cm-multiplayer-selection-pink",ic=eR.tk.theme((w={},(0,ei._)(w,".".concat(ie),{background:"rgba(27, 196, 125, 0.2)"}),(0,ei._)(w,".".concat(it),{background:"rgba(239, 85, 51, 0.2)"}),(0,ei._)(w,".".concat(ir),{background:"rgba(24, 160, 251, 0.2)"}),(0,ei._)(w,".".concat(ii),{background:"rgba(255, 199, 0, 1)"}),(0,ei._)(w,".".concat(io),{background:"rgba(144, 124, 255, 0.2)"}),(0,ei._)(w,".".concat(ia),{background:"rgba(0, 181, 206, 0.2)"}),(0,ei._)(w,".".concat(il),{background:"rgba(238, 70, 211, 0.2)"}),w)),is={"#1BC47D":ie,"#EF5533":it,"#18A0FB":ir,"#FFC700":ii,"#907CFF":io,"#00B5CE":ia,"#EE46D3":il},iu=eO.Py.define(),id=eO.Py.define(),ip=eO.Py.define(),ih=eO.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r[s.id]=(0,k._)((0,C._)({},s),{position:n(s.position),selectionStart:n(s.selectionStart),selectionEnd:n(s.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,f=void 0;try{for(var p,h=t.effects[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;if(m.is(rX.R)&&(e=(0,C._)({},e)),m.is(iu)&&m.value.position<=t.newDoc.length&&((e=(0,C._)({},e))[m.value.id]=(0,C._)({},m.value)),m.is(id)&&(e=(0,C._)({},e),m.is(id)&&delete e[m.value]),m.is(ip)){e=(0,C._)({},e);var g=!0,v=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var Z=(0,S._)(b.value,2),x=Z[0];Z[1].username===m.value&&delete e[x]}}catch(e){v=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(v)throw y}}}}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}return e},provide:function(e){return[ic,eO.Wl.high((0,eR.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,eU.aU)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.selectionStart,d=s.selectionEnd,f=s.color.selection;if(u!==d){var p=eO.jT.range(u,d);r.push.apply(r,(0,_._)(eR.dc.forRange(t,f,p)))}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}})),rV.compute([e],function(t){var n=t.field(e,!1);return n?Object.entries(n).map(function(e){var n=(0,S._)(e,2),r=(n[0],n[1]);return{color:r.color.cursor,number:t.doc.lineAt(r.selectionStart).number}}):[]})]}}),im=eR.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:ed.TV.shadow1,borderRadius:ed.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function ig(e){e.style.transform="translate(-10000px, -10000px)"}var iv=/iPhone|iPad|iPod/i;function iy(){return!!window.navigator.userAgent.match(iv)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function ib(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=iy()?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var iw=new Map,iZ=[im,eR.lg.define(function(e){var t=e.state.field(ih,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:ib(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&s()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),n.forEach(function(e){o.observe(e.view.dom)}))}function l(){t&&0!==Object.values(t).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&n.forEach(function(e){ig(e.view.dom)})}a();var c=null;function s(){null===c&&(c=setTimeout(function(){c=null,l()},50))}window.addEventListener("resize",s);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=iw.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return iw.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(!n||!r){ig(o);return}var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1){ig(o);return}var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=iy()?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat(rM()())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(ih,!1);if(!(o!==r.startState.field(ih,!1))){r.geometryChanged&&l();return}var c=new Map,s=new Set;if(o){var u=new Map((0,_._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(t){var n=u.get(t.id);if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=ib(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){s.has(e.view)||e.view.dom.remove()}),n=c,t=o,a(),l()},destroy:function(){window.removeEventListener("resize",s),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==o||o.disconnect(),c&&clearTimeout(c)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],ix=function(){"use strict";function e(t,n,r,i){var o=this;(0,eN._)(this,e),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:ip.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;o.destroyed||(o.updateSelections=t)},onCursor:function(e){if(!o.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o=n.id,a=n.position,l=n.selectionStart,c=n.selectionEnd,s=r[i];if(s&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof c)return iu.of({id:o,username:i,position:a,color:{cursor:s,selection:is[s]||""},selectionStart:l,selectionEnd:c})}}({cursor:e,usernameColorsMap:o.colors});t&&o.view.dispatch({effects:t})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:id.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var t=e.prototype;return t.getColorMapFromUsers=function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,k._)((0,C._)({},e),(0,ei._)({},t.username,t.color)):e},{})},t.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(eO.YW.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}},t.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),iC=new eD.j(function(e,t,n){return[iZ,ih,eR.lg.define(function(r){return new ix(r,e,t,n)},{provide:function(e){return eR.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})]}),ik=function(){"use strict";function e(t,n){var r=this;(0,eN._)(this,e),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}var t=e.prototype;return t.onFollowedUserChanged=function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(ih,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null===(n=t.followed)||void 0===n?void 0:n.username)});r&&this.jumpToPosition(r.position)}}},t.jumpToPosition=function(e){this.view.dispatch({effects:[eR.tk.scrollIntoView(eO.jT.cursor(e),{x:"center",y:"center"})]})},t.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},t.postUpdate=function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;p.is(iu)&&p.value.username===this.followed.username&&(t=p)}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),iS=new eD.j(function(e){return eR.lg.define(function(t){return new ik(t,e)},{provide:function(e){return eR.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),i_=n(40455),iT=eR.lg.define(function(e){var t=e.state.facet(iE),n=[];return{update:function(e){t=e.state.facet(iE);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};t instanceof KeyboardEvent&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),t instanceof InputEvent&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),t instanceof CompositionEvent&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(eO.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}},{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return eO.Wl.highest(eR.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),iE=eO.r$.define({combine:function(e){return!!e.length&&e[0]}}),iR=new eD.j(function(e){return iE.of(e)}),iD=n(76881),iI=n(79468),iB=n(73878),iA=eO.q6.define(),iP=eO.Py.define(),iG=eO.QQ.define({create:function(){return!0},update:function(e,t){return!(0,eU.aU)(t,iP)&&e},provide:function(e){return rO.o.from(e)}}),iL=function(){"use strict";function e(t,n,r,i){var o=this;(0,eN._)(this,e),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,k._)((0,C._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,i=e.version;o.destroyed||(o.debug.latestReceivedVersion=i,o.debug.openVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:iP.of(null),annotations:[eO.YW.addToHistory.of(!1),eO.YW.remote.of(!0),iA.of(!0)]}))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{t.dispatch({changes:n,annotations:[eO.YW.remote.of(r===iB.Fl.Container),eO.YW.addToHistory.of(r===iB.Fl.Local||0===a),iA.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var t=e.prototype;return t.postUpdate=function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!(a.annotation(eO.YW.remote)||a.annotation(iA))){this.debug.initiatedChanges++;var l=a.annotation(i_.Z)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(t){this.debugThrowWriteChangeError(e,a,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},t.debugThrowSyncRemoteOpError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,eR.OO)(r.view.state,n)})},t.debugThrowWriteChangeError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(iT),c=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(c)}})}),(0,eR.OO)(e.state,n)},e}(),iN=new eD.j(function(e,t,n){return eR.lg.define(function(r){return new iL(r,e,t,n)},{provide:function(e){return[iG,eR.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})]}})}),iO=n(70125),iU=n(79685),iM=n(61873),iX=n(45077),iF=n(24006),iW=n(1277),iV=n(68453),iH=n(79904),iz=n(44935),ij=n(58532),iq=n(11195),iJ=(0,eg.X)({buttons:[ed.l0.display.flex,ed.l0.rowWithGap(4),ed.l0.justify.end],input:[ed.l0.colWithGap(4),ed.l0.flex.grow(1)],gap:[ed.l0.colWithGap(16)],label:[ed.l0.color.foregroundDimmer,ed.l0.fontSize(12),ed.l0.height(24),ed.l0.justify.center],flexRow:[ed.l0.display.flex,ed.l0.rowWithGap(8),ed.l0.align.center]}),iY={fontFamily:"text-security-disc"},i$=ec.K.label;function iK(e){var t=(0,eA.Z)().secrets,n=(0,en.useId)(),r=(0,en.useId)(),i=(0,S._)((0,en.useState)(""),2),o=i[0],a=i[1],l=(0,S._)((0,en.useState)(e.initialValue),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(!1),2),d=u[0],f=u[1],p=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(e.isOpen){var t;null===(t=p.current)||void 0===t||t.focus(),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,T.tZ)(iq.MT,{contain:!0,children:(0,T.tZ)(ij.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,T.BX)(ec.G,{css:iJ.gap,children:[(0,T.tZ)(tY.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,T.BX)(ec.G,{css:iJ.flexRow,children:[(0,T.BX)(ec.G,{css:iJ.input,children:[(0,T.tZ)(i$,{css:iJ.label,htmlFor:n,children:"Key"}),(0,T.tZ)(iz.II,{id:n,ref:p,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,T.BX)(ec.G,{css:iJ.input,children:[(0,T.BX)(ec.G,{css:iJ.flexRow,children:[(0,T.tZ)(i$,{css:iJ.label,htmlFor:r,children:"Value"}),(0,T.tZ)(n2.hU,{alt:"Toggle Secret",onClick:function(){return f(function(e){return!e})},tooltipPlacement:"top",children:d?(0,T.tZ)(z.Z,{}):(0,T.tZ)(H.Z,{})})]}),(0,T.tZ)(iz.II,{id:r,value:c,onChange:function(e){return s(e.target.value)},style:d?void 0:iY})]})]}),(0,T.BX)(ec.G,{css:iJ.buttons,children:[(0,T.tZ)(iH.zx,{text:"Cancel",onClick:e.onCancel}),(0,T.tZ)(iH.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===c.length,onClick:(0,eT._)(function(){return(0,eE.Jh)(this,function(n){switch(n.label){case 0:return[4,t.addEntries([{key:o,value:c}])];case 1:return n.sent(),e.onSaveSecret(o,c),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var iQ=n(2446),i0=n(54300),i1=n(31252),i2=(0,eg.X)({hint:[ed.l0.align.center,ed.l0.border({color:ed.TV.outlineDimmer,direction:"top"}),ed.l0.color.foregroundDimmest,ed.l0.display.flex,ed.l0.flex.row,ed.l0.px(8),ed.l0.py(4),ed.l0.rowWithGap(8)],info:[ed.l0.p(8)],key:[ed.l0.px(4)],wrapper:[ed.l0.backgroundColor.backgroundHigher,ed.l0.borderRadius(4),ed.l0.cursor.default,ed.l0.font.default],mobileButtons:[ed.l0.flex.grow(1)],mobileHint:[ed.l0.justify.center]}),i3={borderTop:"1px solid ".concat(ed.TV.outlineDimmer),borderBottom:"1px solid ".concat(ed.TV.outlineDimmer),borderRadius:0};function i4(e){return(0,T.BX)(ec.G,{css:i2.wrapper,style:e.onMobile?i3:void 0,children:[(0,T.BX)(ec.G,{css:i2.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,T.tZ)(ec.G,{children:"The value you pasted looks like a secret."}),(0,T.tZ)(ec.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,T.tZ)(i6,(0,C._)({},e)):(0,T.tZ)(i8,(0,C._)({},e))]})}function i8(e){return(0,T.BX)(T.HY,{children:[e.supportsSecrets?(0,T.BX)(ec.G,{css:i2.hint,onClick:e.onClickUseSecrets,children:[(0,T.tZ)(iQ.Z,{}),"Press",(0,T.tZ)(ec.G,{css:i2.key,children:(0,T.tZ)(i1.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,T.BX)(ec.G,{css:i2.hint,onClick:e.onClickPasteAnyway,children:[(0,T.tZ)(i0.Z,{}),"Press",(0,T.tZ)(ec.G,{css:i2.key,children:(0,T.tZ)(i1.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,T.BX)(ec.G,{css:i2.hint,onClick:e.onClickUndo,children:[(0,T.tZ)(i0.Z,{}),"Press",(0,T.tZ)(ec.G,{css:i2.key,children:(0,T.tZ)(i1.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function i6(e){return(0,T.BX)(ec.G,{css:[i2.hint,i2.mobileHint],children:[e.supportsSecrets?(0,T.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,T.tZ)(iQ.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,T.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,T.tZ)(i0.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,T.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,T.tZ)(iQ.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var i5=n(14548),i7=n(64627),i9=(0,eg.X)({border:[ed.l0.border({color:t6.TV.accentPrimaryDefault,direction:"y",width:1})],title:[ed.l0.display.flex,ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.justify.spaceBetween,ed.l0.px(8),ed.l0.pt(4),ed.l0.font.default],wrapper:[ed.l0.backgroundColor.backgroundRoot,ed.l0.py(0),ed.l0.position.relative,ed.l0.zIndex(200)]});function oe(e){var t;return t=e.onClose,(0,en.useEffect)(function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,T.tZ)(iq.MT,{autoFocus:!0,contain:!0,children:(0,T.tZ)(ec.G,{css:i9.wrapper,children:(0,T.BX)(ec.G,{css:i9.border,children:[(0,T.BX)(ec.G,{css:i9.title,children:[(0,T.BX)(tY.xv,{multiline:!1,children:["Access the secret ",(0,T.tZ)("strong",{children:e.keyName}),":"]}),(0,T.tZ)(n2.hU,{alt:"Close",onClick:e.onClose,children:(0,T.tZ)(n4.Z,{})})]}),(0,T.tZ)(i5.Tg,{background:"root",children:(0,T.tZ)(i7.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var ot=iF.V.compute([iM.xg],function(e){var t=e.field(iM.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}),on=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e,r){var i;return(0,eN._)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tq.V)((0,T.tZ)(i4,{supportsSecrets:e.state.facet(iM.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:iM.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,iM.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:iM.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eR.l9),or=iV.t.compute([iM.xv],function(e){var t=e.facet(tj.Yp),n=e.field(iM.xv);return n&&t?{key:"pasteScannerModal",node:function(e){var t;return(0,T.tZ)(iK,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:(t=(0,eT._)(function(t){var r,i,o,a,l;return(0,eE.Jh)(this,function(c){for(r=e.state.field(iM.xg).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===n.id&&(i.push(iM.uh.of(l.id)),i.push(iM.Yt.of({secret:t,from:o,to:a}))),r.next();return e.dispatch({effects:(0,_._)(i).concat([iM.ZB.of(null)])}),[2]})}),function(e){return t.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:iM.ZB.of(null)})}})}}:null}),oi=eR.tk.decorations.compute([iM.Do],function(e){var t=e.field(iM.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(tj.Yp);return i&&o?eR.p.set(eR.p.widget({widget:new oo(i.key,o),side:1,block:!0}).range(n,r)):eR.p.none}),oo=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e,r){var i;return(0,eN._)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,tq.V)((0,T.tZ)(oe,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:iM.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:eO.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eR.l9),oa=[ot,(c=[iM.xv,iM.xg],s=function(e){return null!=e.field(iM.xv,!1)?null:e.field(iM.xg,!1)||null},[eR.hJ.compute(c,function(e){var t=s(e);if(!t||e.facet(iW.h))return null;for(var n=t.iter();n.value;){var r=function(){var e=new on(n.value,"tooltip");return{v:{arrow:!0,pos:n.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,iX._)(r))return r.v}return null}),eR.tk.decorations.compute(c,function(e){var t=s(e);if(!t||!e.facet(iW.h))return eR.p.none;for(var n=t.iter();n.value;){var r=new on(n.value,"pocket");return eR.p.set(eR.p.widget({widget:r,side:1,block:!0}).range(n.to,n.to))}return eR.p.none})]),or,oi],ol=new eD.j(function(e){return[iM.$X.of(!e),iM.Do,iM.xg,iM.xv,oa,iM.Gv]});function oc(e,t){var n=performance.now();t4.kg.time(e,n-t)}var os=new eD.j(function(e){var t=e?.01:.001;return eO.Wl.highest(eR.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){oc("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){oc("editor input latency after layout",n)}):setTimeout(function(){oc("editor input latency after layout",n)})})}}}))}),ou=n(91166),od=n(69436),of=n(32508),op=n.n(of),oh=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){op()(e)&&window.open(e,"_blank")}}],om=new eD.j(function(e){return e?null:(0,od.ZP)({key:"mod",rules:oh})}),og=n(30826),ov=n.n(og),oy=new Set,ob=ov()(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=oy[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,t8.j)(t8.U3.WS_TYPED,{fileExt:o})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}oy.clear()},18e4),ow=eR.tk.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(tj.Yp);if(t){var n=(0,er.r6)(t)||(0,er.UO)(t);!e.transactions.some(function(e){return e.annotation(eO.YW.remote)})&&(oy.has(n)||(oy.add(n),ob()))}}}),oZ=n(11515),ox=eR.tk.theme({".cm-ruler-element":{backgroundColor:ed.TV.backgroundHigher}}),oC=eO.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),ok=(0,eR.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,eU.aU)(e,oS,oC,rX.R)},markers:function(e){if(e.state.field(oC,!1))return[];var t=e.state.facet(oS);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,p=i+e.defaultCharacterWidth*f;p<o&&n.push(new eR.dc("cm-ruler-element",p,0,2,a))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),oS=eO.r$.define({enables:[oC,ok,ox]}),o_=new eD.j(function(e){return e.map(function(e){return oS.of(e)})}),oT=n(5786),oE=n(52657),oR=n(37862),oD=n(1567),oI=n(91026),oB=n(16633),oA=n(62922),oP=n(47385),oG=n(29460);function oL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}function oN(e){return e>420?"large":"small"}var oO=ec.K.div,oU=(0,eg.X)({root:[ed.l0.rowWithGap(4),ed.l0.px(4),ed.l0.py(6),{borderBottom:"1px solid",borderColor:ed.TV.outlineDimmest}],panelButtonWrapper:[ed.l0.center,ed.l0.height(32)],content:[ed.l0.display.grid,ed.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:ed.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[ed.l0.position.absolute,ed.l0.top(0),ed.l0.right(0),ed.l0.height("100%"),ed.l0.center,ed.l0.pr(4)],inputControlsSmall:[ed.l0.colWithGap(8),ed.l0.flex.growAndShrink(1)],searchInputWrapper:[ed.l0.position.relative,{gridArea:"search"}],searchControls:[ed.l0.display.flex,ed.l0.align.center,ed.l0.rowWithGap(8),ed.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[ed.l0.display.flex,ed.l0.align.center,ed.l0.rowWithGap(8),ed.l0.flex.wrap,{gridArea:"replace-controls"}],searchSettings:ed.l0.flex.row,jumpIconButton:[ed.l0.height(32),ed.l0.width(32)]});function oM(e){var t=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(t.current){var n;e!==(null===(n=t.current)||void 0===n?void 0:n.value)&&(t.current.value=e)}},[e]),t}var oX=new tq.J(en.forwardRef(function(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=(0,S._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=(0,S._)((0,en.useState)([]),2),s=c[0],u=c[1],d=(0,S._)((0,en.useState)(null),2),f=d[0],p=d[1],h=s.length,m=(0,oE.Z)(r),g=(0,oE.Z)(s),v=oM(r.search),y=oM(r.replace);function b(){(0,oT.g)(n);var e=n.state.selection.main;n.dispatch({effects:eR.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||p(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=h?1:t+1})}function w(){(0,oT.a7)(n);var e=n.state.selection.main;n.dispatch({effects:eR.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||p(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?h||1:t-1})}(0,en.useImperativeHandle)(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=g.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});p(-1!==t?t+1:null)},onDocChanged:function(){u(oL(m.current,n.state.doc)),p(null)},onExpandRequested:function(){l(!0)}}},[n,m,g]),(0,en.useEffect)(function(){var e=oL(r,n.state.doc);u(e);var t=n.state.selection.main,i=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});p(-1!==i?i+1:null)},[n,r]);var Z=(0,S._)((0,en.useState)(function(){return oN(n.dom.clientWidth)}),2),x=Z[0],C=Z[1],k=(0,oR.Z)(function(e){e.width&&C(oN(e.width))});function _(e){return(0,eR.$1)(n,e,"search-panel")}var E=h>0,R=r.search.length>0?"0 / 0":null,D=E?"".concat(f||1," / ").concat(h):R,I=D?8*D.length:null,B=(0,T.BX)(ec.G,{css:oU.searchSettings,children:[(0,T.tZ)(oG.Z,{alt:"case sensitive",icon:(0,T.tZ)(oI.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,T.tZ)(oG.Z,{alt:"regular expressions",icon:(0,T.tZ)(oB.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,T.tZ)(oG.Z,{alt:"whole words",icon:(0,T.tZ)(oA.Z,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),A=[oU.content];return"small"!==x&&a?A.push(oU.contentExpanded):"small"===x&&a?A.push(oU.contentExpandedSmall):"small"!==x||a||A.push(oU.contentSmall),(0,T.tZ)(oO,{ref:k,onKeyDown:function(e){_(e)&&e.preventDefault()},children:(0,T.BX)(i5.Tg,{elevated:!0,css:oU.root,children:[(0,T.tZ)(ec.G,{css:oU.panelButtonWrapper,children:(0,T.tZ)(n2.hU,{alt:a?"Close replace panel":"Show replace panel",css:oU.jumpIconButton,onClick:function(){l(function(e){return!e})},children:(0,T.tZ)(V.Z,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,T.BX)(ec.G,{css:A,children:[(0,T.BX)(ec.G,{css:oU.searchInputWrapper,children:[(0,T.tZ)(oP.h,{ref:v,style:{padding:4,paddingRight:null!=I?I:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,oD.jh)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||_(e))){if(e.preventDefault(),e.shiftKey){w();return}b()}},onChange:function(e){i({search:e})}}),D?(0,T.tZ)(ec.G,{css:oU.matchLabel,children:(0,T.tZ)(tY.xv,{variant:"small",color:"dimmest",multiline:!1,children:D})}):null]}),(0,T.BX)(ec.G,{css:oU.searchControls,children:[(0,T.BX)(ec.G,{css:ed.l0.flex.row,children:[(0,T.tZ)(n2.hU,{css:oU.jumpIconButton,alt:"Previous",onClick:function(){w()},children:(0,T.tZ)(V.Z,{rotate:-90})}),(0,T.tZ)(n2.hU,{css:oU.jumpIconButton,alt:"Next",onClick:function(){b()},children:(0,T.tZ)(V.Z,{rotate:90})})]}),(0,T.tZ)(iH.zx,{text:"Select all",onClick:function(){(0,oT.i3)(n),n.focus()}}),B]}),a?(0,T.BX)(T.HY,{children:[(0,T.tZ)(ec.G,{css:oU.replaceInputWrapper,children:(0,T.tZ)(iz.II,{ref:y,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||_(e)||(e.preventDefault(),(0,oT.K9)(n))},onChange:function(e){i({replace:e.target.value})}})}),(0,T.BX)(ec.G,{css:oU.replaceControls,children:[(0,T.tZ)(iH.zx,{text:"Replace",onClick:function(){(0,oT.K9)(n)}}),(0,T.tZ)(iH.zx,{text:"Replace all",onClick:function(){(0,oT.ko)(n)}})]})]}):null]}),(0,T.tZ)(ec.G,{css:oU.panelButtonWrapper,children:(0,T.tZ)(n2.hU,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,oT.N$)(n)},children:(0,T.tZ)(n4.Z,{})})})]})})})),oF=eO.Py.define(),oW=[(0,oT.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=ep()(function(t){var n,r,i,o,a,l,c=(0,oT.uP)(e.state),s=new oT.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:oT.ql.of(s)})},300),l=oX.create({view:e,query:(0,oT.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,eU.aU)(t,oT.ql)&&oX.set(l,{view:e,query:(0,oT.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!n){var e;i=!1,null===(e=oX.ref(l))||void 0===e||e.onSelectionSet()}})),t.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!n){var e;r=!1,null===(e=oX.ref(l))||void 0===e||e.onDocChanged()}})),(0,eU.aU)(t,oF)&&!o&&(o=!0,requestAnimationFrame(function(){if(!n){var e;o=!1,null===(e=oX.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return n=!0}}}}),eR.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,oT.Ep)(e.state)||(0,oT.nx)(e))&&(e.dispatch({effects:oF.of(null)}),!0)}}])],oV=n(16155),oH=n(38031),oz=null!==(Z=globalThis.requestIdleCallback)&&void 0!==Z?Z:globalThis.requestAnimationFrame;function oj(e,t,n){var r=e.field(t,!1);if(void 0===r){if(void 0===n)throw Error("Field is not mounted on state");return n}return t.spec.toJSON(r,e)}function oq(e){for(var t=e.sliceString(0,200)+e.length,n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(n>>>0).toString(36)}var oJ=function(){"use strict";function e(t,n,r,i){var o=this;(0,eN._)(this,e),this.view=t,this.replId=n,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(iG,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var t=e.prototype;return t.apply=function(){if(!this.historyIsMounted&&this.view.state.field(eo.cE,!1)){(0,eR.OO)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(iG,!1)){if(this.historyIsMounted){var e,t,n=this.key?rO.o.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(n)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==oq(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,eo.m8)())}),this.historyIsMounted=!0;return}var i=eO.jT.fromJSON(r.selection),o=[(e=r.scroll,(t=eR.tk.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,t),this.compartment.reconfigure([eo.cE.init(function(e){var t,n;return t=eo.cE,n=r.history,t.spec.fromJSON(n,e)}),(0,eo.m8)()])];if(this.view.state.field(R.iQ,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],c=r.folds[a+1];o.push(R.SW.of({from:l,to:c}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},t.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,oz(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:oq(e.view.state.doc),scroll:function(e){var t=e.scrollDOM.scrollTop,n=e.scrollDOM.scrollLeft;if(0===t&&0===n)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(t+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-t>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-t,scrollLeft:n}}(e.view),selection:e.view.state.selection.toJSON(),history:oj(e.view.state,eo.cE),folds:oj(e.view.state,R.iQ,[])}))}))},t.postUpdate=function(e){if((0,eU.aU)(e,tj.Yp,iG)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,eU.aU)(e,"doc","selection",eo.cE,R.iQ)&&this.scheduleCacheUpdate()},t.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,nl._)(e,[{key:"key",get:function(){var e=this.view.state.facet(tj.Yp);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),oY=new eD.j(function(e,t){var n=new eO.F6,r=eR.lg.define(function(r){return new oJ(r,e,t,n)},{provide:function(e){return eR.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}});return[n.of(rO.o.of(!0)),r]}),o$=eR.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),oK=n(9487),oQ=n(99595),o0=n(1193);function o1(e,t,n,r){var i=(0,oQ.Z)().showError,o=(0,oV.Z)(),a=(0,o0.eR)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t});return(0,en.useMemo)(function(){var r;return t||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(t){return t.path===e&&(!n||!t.isResolved)}).reduce(function(e,t){return(0,k._)((0,C._)({},e),(0,ei._)({},t.id,t))},{})},[a.loading,a.data,a.error,e,t,n])}var o2=n(62279),o3=n(379),o4=n(49638),o8=n(25688),o6=n(59140),o5=n(60366),o7=n(27840),o9=n(98571),ae=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,no._)(e,["caretSize"]);return(0,T.BX)("svg",(0,k._)((0,C._)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,T.tZ)("mask",{id:"outline",fill:"white",children:(0,T.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,T.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,T.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,T.tZ)("defs",{children:(0,T.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,T.tZ)("stop",{stopColor:"#57ABFF"}),(0,T.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},at=n(66975),an=n(21289),ar=n(61177),ai=n(65894),ao=n(59325),aa=n(28949),al=n(20622),ac=n(76684),as=n(82973),au=n(14074),ad=n(7300),af=n(86866),ap=n(42704),ah=n(43133),am=n(52589),ag=n(69284),av=(0,eg.X)({inlineThreadHeader:[ed.l0.flex.row,ed.l0.align.center,ed.l0.justify.spaceBetween,ed.l0.position.relative,ed.l0.px(12),ed.l0.py(8),{borderBottomWidth:ed.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:ed.TV.outlineDimmest}],inlineThreadHeaderCaret:[ed.l0.position.absolute,ed.l0.height("fit-content"),ed.l0.display.flex,ed.l0.flex.row,ed.l0.align.center],inlineThreadHeaderActions:[ed.l0.flex.row,ed.l0.align.center,ed.l0.rowWithGap(4)],inlineThreadHeaderNavigator:[ed.l0.flex.row,ed.l0.align.center,ed.l0.rowWithGap(4)],inlineThreadInputContainer:[ed.l0.px(12),ed.l0.pb(8),ed.l0.pt(8),ed.l0.border({color:ed.TV.outlineDimmest,direction:"top"}),{".popover-control-container":[ed.l0.flex.grow(1)]}],inlineThreadInput:[ed.l0.flex.row,ed.l0.align.start,ed.l0.rowWithGap(8),ed.l0.width("full")],commentContainer:[ed.l0.px(12),ed.l0.py(12),ed.l0.maxHeight(300),ed.l0.overflowY("auto"),ed.l0.colWithGap(16)]}),ay=function(e){var t,n,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,f=e.openThreadsInbox,p={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},h=o1(null===o?"":o,l,!0,!0),m=(0,O.Gn)("fontSize").preferences.fontSize,g=[12,8];switch(m){case 10:g=[8,6];break;case 14:g=[10,6];break;case 18:g=[12,8];break;case 24:g=[14,10]}var v=(0,en.useMemo)(function(){return Object.values(h).sort(function(e,t){return e.indexStart-t.indexStart})},[h]),y=(0,en.useMemo)(function(){return v.findIndex(function(e){return e.id===i})},[v,i]),b=(0,an.a9)(),w=(t=(0,eT._)(function(){return(0,eE.Jh)(this,function(e){return b(y===v.length-1?v[0].id:v[y+1].id),[2]})}),function(){return t.apply(this,arguments)}),Z=(n=(0,eT._)(function(){return(0,eE.Jh)(this,function(e){return b(0===y?v[v.length-1].id:v[y-1].id),[2]})}),function(){return n.apply(this,arguments)});return(0,T.BX)(i5.Tg,{background:"root",css:av.inlineThreadHeader,children:[null!==s&&(0,T.tZ)("span",{css:av.inlineThreadHeaderCaret,style:{top:-g[1],left:s},children:(0,T.tZ)(ae,{caretSize:g})}),(0,T.tZ)(iH.zx,{iconLeft:(0,T.tZ)(af.Z,{}),onClick:function(){f()},text:p.viewAll,size:"small"}),v.length>1?(0,T.BX)(ec.G,{css:av.inlineThreadHeaderNavigator,children:[(0,T.tZ)(n2.hU,{alt:p.previous,onClick:Z,children:(0,T.tZ)(o5.Z,{})}),(0,T.BX)(tY.xv,{color:"dimmest",variant:"small",multiline:!1,children:[y+1,"/",v.length]}),(0,T.tZ)(n2.hU,{alt:p.next,onClick:w,children:(0,T.tZ)(o6.Z,{})})]}):null,(0,T.BX)(ec.G,{css:av.inlineThreadHeaderActions,children:[r||a||c?null:(0,T.tZ)(iH.zx,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,T.tZ)(o7.Z,{})}),!r&&a?(0,T.tZ)(o3.D,{text:"Resolved",colorway:"positive"}):null,(0,T.tZ)(iH.zx,{onClick:void 0===u?function(){}:u,text:p.dismiss,size:"small",iconLeft:(0,T.tZ)(ad.Z,{})})]})]})},ab=function(e){var t,n,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,c=e.onRequestClose,s=void 0===c?function(){}:c,u=(0,S._)((0,en.useState)(""),2),d=u[0],f=u[1],p=(0,S._)((0,en.useState)(rp().v4()),2),h=p[0],m=p[1],g=(0,aa.Z)().ref,v=(0,en.useRef)(null),y={input:{placeholder:function(){return l?"Start a new thread (Markdown is supported)":i?"Reply to re-open thread":"Reply (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},b=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:h}),f(""),m(rp().v4()))},w=(0,al.d)(),Z=(0,ai.Z)(),x=(0,S._)((0,ac.Z)({"@":(t=(0,eT._)(function(e){var t,n;return(0,eE.Jh)(this,function(r){return t=Z.filter(function(e){return e.id!==w}),e&&(n=e.toLowerCase(),t=t.filter(function(e){return e.username.toLowerCase().startsWith(n)})),[2,t.slice(0,5).map(function(e){return{icon:(0,T.tZ)(ao.Z,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return t.apply(this,arguments)})}),2),_=x[0].suggestions,E=x[1],R=(0,ah.Kb)({items:(null==_?void 0:_.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null==_?void 0:_.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(_&&t){var n=_.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;f(r),setTimeout(function(){v.current&&(v.current.setSelectionRange(i,i),v.current.focus())})}}}),D=R.isOpen,I=R.getInputProps,B=R.getMenuProps,A=R.getItemProps,P=R.highlightedIndex,G=R.getComboboxProps;return(0,en.useEffect)(function(){var e="threads/drafts/".concat(r),t=as.Z.get(e,"string");t&&f(t);var n=v.current;return function(){if(n){var t=n.value;if(0===t.length){as.Z.remove(e);return}as.Z.set(e,t)}}},[r]),(0,T.tZ)(i5.Tg,{background:"root",css:av.inlineThreadInputContainer,children:(0,T.BX)("div",(0,k._)((0,C._)({css:av.inlineThreadInput},G()),{children:[l?(0,T.tZ)(iH.zx,{text:y.cancel,onClick:s}):null,(0,T.BX)("div",{css:[{width:"100%"}],children:[(0,T.tZ)(iz.B,(0,C._)({},I({ref:function(e){v.current=e,g(e),E(e)},value:d,onChange:function(e){var t=e.target.value;f(t),o({message:t,messageId:h})},onKeyDown:function(e){!D&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),b()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),s())},placeholder:y.input.placeholder(),css:[ed.l0.height(32),ed.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,T.tZ)("div",{css:{position:"relative"},children:(0,T.tZ)("div",(0,k._)((0,C._)({},B({css:[{position:"absolute",top:ed.TV.space2,overflow:"hidden"},ed.l0.borderRadius(16),ed.l0.shadow(1),ed.l0.backgroundColor.backgroundDefault]})),{children:null==_?void 0:_.results.map(function(e,t){return(0,o2.az)("div",(0,k._)((0,C._)({},A({item:e,index:t})),{key:e.value}),(0,T.BX)(ap.Ug,{spacing:2,css:[P===t?ed.l0.backgroundColor.backgroundHighest:null,ed.l0.p(8)],children:[e.icon,(0,T.tZ)("div",{children:e.value})]}))})}))})]}),(0,T.tZ)(ec.G,{css:[ed.l0.pt(4)],children:(0,T.tZ)(n2.hU,{alt:y.submit,tooltipDelay:"long",onClick:b,children:(0,T.tZ)(o9.Z,{})})})]}))})},aw=function(e){var t,n,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,c=e.filePath,s=e.openThreadsInbox,u=(0,o4.Z)(r,l,c),d=u.thread,f=u.loading,p=u.isPlaceholder,h=u.getLatestAnchor,m=u.updateThread,g=u.changeThreadMessage,v=u.finalizeThreadMessage,y=function(){null==l||l.dispatch({effects:[ag.YM.of(null)]})},b=(0,O.Gn)("fontSize").preferences.fontSize,w=(0,en.useRef)(null);(0,ar.Z)(d);var Z=h(),x=l&&!f&&"number"==typeof(null==Z?void 0:Z.indexEnd)&&Z.indexEnd<=l.state.doc.length?null===(n=l.coordsAtPos(Z.indexEnd))||void 0===n?void 0:n.left:null,C=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,k=b;switch(b){case 10:k=13;break;case 14:k=19;break;case 18:k=25;break;case 24:k=34}var S=(0,oQ.Z)().showConfirm,E=(0,oV.Z)(),R=(0,en.useRef)(null),D=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,en.useEffect)(function(){setTimeout(function(){D()},0)},[null==d?void 0:d.messages]);var I=(0,en.useMemo)(function(){return(null==d?void 0:d.messages)?(0,_._)(d.messages).sort(function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)}):[]},[null==d?void 0:d.messages]),B=(t=(0,en.useRef)(0),(0,oR.Z)(function(e){var n=e.height;n!==t.current&&(null==l||l.requestMeasure()),t.current=n}));return(0,T.tZ)("div",{css:[ed.l0.width("100%"),ed.l0.backgroundColor.backgroundRoot],children:(0,T.BX)(ec.G,{innerRef:(0,au.l)(w,B),css:[ed.l0.font.default,{borderTopWidth:ed.TV.borderWidthDefault,borderBottomWidth:ed.TV.borderWidthDefault,borderStyle:"solid",borderColor:ed.TV.accentPrimaryDefault}],children:[p||f?null:(0,T.tZ)(ay,{isCreating:i,isResolved:a,isLoading:f,threadId:r,filePath:c,caretPosition:x&&C?x-C-6:null,isPlaceholder:p,onRequestClose:y,onResolveThread:function(){m({changes:{isResolved:!0}}),S("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),f&&!p?(0,T.tZ)(ec.G,{style:{height:k},children:(0,T.tZ)(o8.Z,{viewBox:"0 0 400 21",backgroundColor:ed.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:ed.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,T.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,T.BX)(T.HY,{children:[!i&&I.length>0?(0,T.tZ)("div",{css:av.commentContainer,style:{fontSize:b},ref:R,children:I.map(function(e){return(0,T.tZ)(at.Z,{thread:d,message:e},e.id)})}):null,(0,T.tZ)(ab,{threadId:r,isPlaceholder:p,isResolved:a,onRequestClose:y,onMessageChange:g,onMessageSubmit:function(e){v(e),(0,t8.j)(am.U3.MESSAGE_SENT,{replId:E,source:"threads",newThread:p})}})]})]})})},aZ=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){return(0,eN._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(eO.uU);aZ.prototype.elementClass="",aZ.prototype.toDOM=void 0,aZ.prototype.mapMode=eO.gc.TrackBefore,aZ.prototype.startSide=aZ.prototype.endSide=-1,aZ.prototype.point=!0;var ax=eO.r$.define(),aC=eO.r$.define(),ak=eO.r$.define({combine:function(e){return e.some(function(e){return e})}}),aS=eR.lg.fromClass(function(){"use strict";function e(t){(0,eN._)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(aC).map(function(e){return new aR(t,e)});var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(ak),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ak)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=eO.Xs.iter(this.view.state.facet(ax),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new aE(e,t.view.viewport,-t.view.documentPadding.top)}),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var p=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(y.type==eR.kH.Text){f=y;break}}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}}else f=d.type==eR.kH.Text?d:void 0;if(f){i.length&&(i=[]),aT(r,i,d.from);var b=!0,w=!1,Z=void 0;try{for(var x,C=o[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)x.value.line(this.view,f,i)}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var k=!0,S=!1,_=void 0;try{for(var T,E=o[Symbol.iterator]();!(k=(T=E.next()).done);k=!0)T.value.finish()}catch(e){S=!0,_=e}finally{try{k||null==E.return||E.return()}finally{if(S)throw _}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(aC),n=e.state.facet(aC),r=e.docChanged||e.heightChanged||e.viewportChanged||!eO.Xs.eq(e.startState.facet(ax),e.state.facet(ax),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value,g=t.indexOf(m);g<0?s.push(new aR(this.view,m)):(this.gutters[g].update(e),s.push(this.gutters[g]))}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}var v=!0,y=!1,b=void 0;try{for(var w,Z=this.gutters[Symbol.iterator]();!(v=(w=Z.next()).done);v=!0){var x=w.value;x.dom.remove(),0>s.indexOf(x)&&x.destroy()}}catch(e){y=!0,b=e}finally{try{v||null==Z.return||Z.return()}finally{if(y)throw b}}var C=!0,k=!1,S=void 0;try{for(var _,T=s[Symbol.iterator]();!(C=(_=T.next()).done);C=!0){var E=_.value;this.dom.appendChild(E.dom)}}catch(e){k=!0,S=e}finally{try{C||null==T.return||T.return()}finally{if(k)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return eR.tk.scrollMargins.of(function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==eR.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})}});function a_(e){return Array.isArray(e)?e:[e]}function aT(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var aE=function(){"use strict";function e(t,n,r){(0,eN._)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=eO.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),aT(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new aD(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),aR=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()})};for(var o in(0,eN._)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=a_(n.markers(t)),n.initialSpacer&&(this.spacer=new aD(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=a_(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!eO.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),aD=function(){"use strict";function e(t,n,r,i){(0,eN._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}(),aI=eO.r$.define(),aB=eO.r$.define({combine:function(e){return(0,eO.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e);for(var r in t)!function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i}(r);return n}})}}),aA=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e){var r;return(0,eN._)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(aZ);function aP(e,t){return e.state.facet(aB).formatNumber(t,e.state)}function aG(e){for(var t=9;t<e;)t=10*t+9;return t}aC.compute([aB],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(aI)},lineMarker:function(e,t,n){return n.some(function(e){return e.toDOM})?null:new aA(aP(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(aB)!=e.state.facet(aB)},initialSpacer:function(e){return new aA(aP(e,aG(e.state.doc.lines)))},updateSpacer:function(e,t){var n=aP(t.view,aG(t.view.state.doc.lines));return n==e.number?e:new aA(n)},domEventHandlers:e.facet(aB).domEventHandlers}});var aL=new(function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(){var e;return(0,eN._)(this,n),e=t.apply(this,arguments),e.elementClass="cm-activeLineGutter",e}return n}(aZ));ax.compute(["selection"],function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(aL.range(s)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return eO.Xs.of(t)});var aN=n(73307),aO=n(79393),aU=function(e){var t=e.isOpen,n=e.threadId,r=(0,S._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,aO.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,en.useEffect)(function(){if(a&&!a.error){var e,t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o((null==t?void 0:t.__typename)==="AnnotationAnchor"&&(null==t?void 0:t.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,T.tZ)(n2.hU,{alt:t?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[ed.l0.width(20),ed.l0.height(20),ed.l0.transition.snappy,ed.l0.cursor.pointer,ed.l0.display.flex,ed.l0.borderRadius(8),ed.l0.position.relative,ed.l0.overflow("visible"),t?ed.l0.color.accentPrimaryStrongest:ed.l0.color.foregroundDimmest,{borderWidth:ed.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?ed.TV.accentPrimaryDefault:"transparent",backgroundColor:t?ed.TV.accentPrimaryDimmer:ed.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?ed.TV.accentPrimaryStronger:ed.TV.outlineDimmer,color:t?ed.TV.accentPrimaryStrongest:ed.TV.foregroundDimmer,background:t?ed.TV.accentPrimaryDefault+" !important":ed.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,T.BX)(T.HY,{children:[i?(0,T.tZ)("div",{css:[ed.l0.width(8),ed.l0.height(8),ed.l0.backgroundColor.redStronger,ed.l0.position.absolute,ed.l0.top(-1),ed.l0.left(-1),ed.l0.borderRadius("full")]}):null,(0,T.tZ)(aN.Z,{})]})})};function aM(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var aX=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e,r){var i;return(0,eN._)(this,n),(i=t.call(this)).id=e,i.filePath=r,i}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,tq.V)((0,T.tZ)(aw,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,rn.ZM)(e.state,{pane:{type:"threadInbox"}})}}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&aM(t,n,r),t},r.ignoreEvent=function(){return!0},n}(eR.l9),aF=function(e){"use strict";(0,te._)(n,e);var t=(0,tt._)(n);function n(e,r){var i;return(0,eN._)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tq.V)((0,T.tZ)(aU,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[ag.YM.of(e.state.field(ag.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(aZ),aW=[(i=[aS],r&&!1===r.fixed&&i.push(ak.of(!0)),i),aC.of((0,C._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return eO.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(ag.OQ),n=e.state.field(ag.PQ);return eO.Xs.of(Object.values(t).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new aF(t.id,t.id===n).range(r)}),!0)},initialSpacer:function(){return new aF("initial-spacer",!1)}}))],aV=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},aH=n(14861),az=function(e,t,n,r,i){if(t===n)return null;var o=(0,S._)(r,2),a=o[0],l=o[1];return eR.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)},aj=new eD.j(function(e,t){return e?[eO.Wl.highest(aW),ag.cR,ag.OQ,ag.ZS,ag.PQ,eR.tk.decorations.compute([ag.OQ,ag.ZS,ag.PQ],function(e){var n=e.field(ag.OQ),r=e.field(ag.ZS),i=e.field(ag.PQ),o=r||Object.values(n).find(function(e){return e.id===i});return eR.p.set((0,_._)(Object.values(n)).map(function(e){var n=o&&e.id===o.id;return az(e.id,e.indexStart,e.indexEnd,t,n)}).filter(function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length}),!0)}),eR.tk.decorations.compute([ag.OQ,ag.ZS,ag.PQ,tj.Yp],function(e){var t=e.field(ag.OQ),n=e.field(ag.ZS),r=e.field(ag.PQ),i=e.facet(tj.Yp);if(void 0===i)return eR.p.none;var o=(0,_._)(Object.values(t)).concat((0,_._)(n?[n]:[])).filter(Boolean).find(function(e){return e.id===r});return o?eR.p.set([eR.p.widget({widget:new aX(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):eR.p.none}),eR.tk.updateListener.of(function(e){(0,ri.j)(e,rX.R,function(){var t=(0,_._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;aM(s,n,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})}),eR.tk.updateListener.of(function(e){(0,ri.j)(e,ag.eR,function(t){var n=t.value,r=e.state.field(ag.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[eR.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),aq=n(97687),aJ=n(43086),aY=n(11409);function a$(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function aK(e,t){var n;return null==t?a$(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function aQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rM()(),n={messageType:aY.cF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,aq.bG)(n,t)}function a0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rM()(),n={messageType:aY.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,aq.bG)(n,t)}function a1(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function a2(e){var t=e.map(function(e){return eO.jT.range(e.location,e.location+e.length)});return eO.jT.create(t)}function a3(e,t,n,r,i){var o=i.payload;if((0,aY.Se)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=a2(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.m7)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=a2(i.selections);return n.dispatch({changes:{from:0,to:n.state.doc.length,insert:i.text},selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.ac)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=a2(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.fz)(o))return!!a1(e,t,r,o.filePath,o.revisionId)&&(n.dispatch(n.state.replaceSelection(o.text)),!0);if((0,aY.T$)(o))a1(e,t,r,o.filePath,o.revisionId)&&(0,iO.l)({filePath:e,view:n,clipboardText:o.text});else if((0,aY.aB)(o))switch(o.action){case aY.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!a1(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,o.filePath,o.revisionId);case aY.b9.REQUEST_UNDO:return!!a1(e,t,r,o.filePath,o.revisionId)&&((0,eo.Yw)(n),!0);case aY.b9.REQUEST_REDO:return!!a1(e,t,r,o.filePath,o.revisionId)&&((0,eo.KX)(n),!0);case aY.b9.REQUEST_INDENT_SELECTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(eo.at(n),!0);case aY.b9.REQUEST_DEDENT_SELECTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(eo.xi(n),!0);case aY.b9.REQUEST_TOGGLE_COMMENT:return!!a1(e,t,r,o.filePath,o.revisionId)&&(eo.O8(n),!0);case aY.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(0,aJ.o)(n);case aY.b9.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var a4=n(66791),a8=n(73660),a6=new eD.j(function(e){var t=eR.tk.domEventHandlers({scroll:ep()(function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})},250)}),n=ep()(function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})},250);return[t,eR.tk.updateListener.of(function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})]}),a5=n(26822),a7=n(572);function a9(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var le=new eD.j(function(e){return eR.tk.focusChangeEffect.of(function(t,n){var r=t.facet(tj.Yp);return r&&e(r,n?{type:"focus",position:a9(t)}:{type:"blur"}),null})}),lt=new eD.j(function(e){return eR.tk.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(tj.Yp);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:a9(t.state)})}})}),ln=n(6038),lr=n(78371),li=n(81116),lo=n(90333),la=n(68307),ll=n(47495),lc=n(6191),ls=n(25639),lu=n(69967),ld=n(42354),lf=n(43561),lp=n(70793),lh=n(84082),lm=eR.tk.theme({"& .cm-scrollbar-gutter":{backgroundColor:t6.TV.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:t6.TV.backgroundHigher}}),lg=new eD.j(function(e,t){var n;return e?null:[lm,r9.of({create:function(){return{dom:document.createElement("div")}}}),rW.compute(["doc",tD],function(e){var n=e.field(tD,!1);if(!n)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case tT.dQ.COVERED:r.push({number:i,color:t.values.global.greenDefault,zIndex:1});break;case tT.dQ.MODIFIED:r.push({number:i,color:t.values.global.blueDefault,zIndex:0})}return r}),rq,(n=({color:t.values.global.foregroundDefault}).color,rV.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(t){var r=t.head;return{color:n,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),lv=n(64566),ly=n(50303),lb=n(29017),lw=n(21262),lZ=n(71440),lx=n(9122);function lC(){var e=(0,lw._)(["\n  query GetReplCodeRepairAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useCodeRepair {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return lC=function(){return e},e}var lk={},lS=(0,lZ.Ps)(lC());function l_(){var e,t,n,r=(t={variables:{replId:(0,oV.Z)()}},n=(0,C._)({},lk,t),lx.a(lS,n)).data,i=(null==r?void 0:null===(e=r.repl)||void 0===e?void 0:e.__typename)==="Repl"&&r.repl.authorizations.useCodeRepair.isAuthorized,o=(0,tU.P5)({controlName:"flag-code-repair"});return i&&o}function lT(e){return(0,en.useMemo)(function(){var t;return!!e&&(null===(t=e8.$R.from(e))||void 0===t?void 0:t.id)==="python"},[e])}var lE=n(25948),lR=n(51371),lD=n(20904),lI=n(24374),lB=n(11782),lA=n(30967),lP=(0,eg.X)({codeRepairUpsell:[ed.l0.minHeight("auto"),ed.l0.minWidth("325px"),ed.l0.borderRadius(4),ed.l0.backgroundColor.backgroundHigher],codeRepairUpsellBody:[ed.l0.px(6),ed.l0.py(4),ed.l0.gap(4),ed.l0.colorMixBg(ed.TV.blurpleDimmest,"transparent",.25)],codeRepairUpsellHeader:[ed.l0.rowWithGap(8),ed.l0.align.center],codeRepairText:[{filter:"blur(3px)",opacity:.6,userSelect:"none"}],popoutWrapper:[ed.l0.backgroundColor.backgroundHigher,ed.l0.borderRadius(4),ed.l0.position.fixed,{top:"var(--popout-top, 0px)",left:"var(--popout-left, 0px)"}],codeRepairGif:[ed.l0.borderRadius(4)]}),lG=function(e){var t=e.diagnostic,n=e.handleOpenPurchaseModal,r=(0,S._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,S._)((0,en.useState)(!1),2),l=a[0],c=a[1],s=(0,en.useRef)(null),u=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(i&&s.current){var e,t,n=s.current.getBoundingClientRect(),r=n.top-50,o=n.right+10;null===(e=u.current)||void 0===e||e.style.setProperty("--popout-top","".concat(r,"px")),null===(t=u.current)||void 0===t||t.style.setProperty("--popout-left","".concat(o,"px"))}},[i]),(0,T.BX)(ec.G,{css:lP.codeRepairUpsell,children:[(0,T.BX)(ec.G,{css:lP.codeRepairUpsellBody,children:[(0,T.BX)(ec.G,{css:lP.codeRepairUpsellHeader,children:[(0,T.tZ)(lI.u,{iconLeft:(0,T.tZ)(lD.Z,{}),colorway:"yellow",text:"Upgrade to enable automatic AI code fixes.",onClick:function(){var e;n(),(0,t8.j)(t8.U3.AI_CODE_REPAIR_EVENT,{action:"code_suggestion_upgrade",diagnostic_code:null===(e=t.code)||void 0===e?void 0:e.toString()})}}),(0,T.tZ)(ec.G,{innerRef:s,css:ed.l0.cursor.pointer,onMouseEnter:function(){if(o(!0),!l){var e;c(!0),(0,t8.j)(t8.U3.AI_CODE_REPAIR_EVENT,{action:"demo_gif_viewed",diagnostic_code:null===(e=t.code)||void 0===e?void 0:e.toString()})}},onMouseLeave:function(){return o(!1)},children:(0,T.tZ)(H.Z,{})})]}),(0,T.tZ)(tY.xv,{children:(0,T.tZ)("code",{css:lP.codeRepairText,children:"print('repair code with AI')"})})]}),i?(0,lA.createPortal)((0,T.tZ)(ec.G,{innerRef:u,css:lP.popoutWrapper,children:(0,T.tZ)(lB.Z,{alt:"code-repair-gif",src:"/public/images/ai/code-repair.gif",height:270,width:480,css:lP.codeRepairGif})}),document.body):null]})},lL=function(e){var t=(0,eR.bF)(function(t,n){var r,i=(0,L.ge)(t.state),o=null,a=!0,l=!1,c=void 0;try{for(var s,u,d=i[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value,p=(0,S._)((0,lR.D)(t.state,f),2),h=p[0],m=p[1];if(n>=h&&n<=m){o=f;break}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}if(!o||!lE.W.includes(null!==(r=null===(s=o.code)||void 0===s?void 0:s.toString())&&void 0!==r?r:""))return null;var g=(0,S._)((0,lR.D)(t.state,o),2);return{pos:g[0],end:g[1],create:function(){var t=(0,tq.V)((0,T.tZ)(lG,{diagnostic:o,handleOpenPurchaseModal:e}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t}},above:!0}});return[eO.Wl.lowest(t)]},lN=new eD.j(function(e){return(0,_._)(lL(e))}),lO=new eD.j(function(){return(0,eR.CT)()}),lU=function(e){var t;return(0,lv.Z)((t=(0,eT._)(function(t){var n;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:return[4,t.status()];case 1:if((n=r.sent()).error)return[2,{error:n.error,isUnmerged:null}];if(n.changes.find(function(t){return t.path===e&&(t.type.index===lh.hF.UNMERGED||t.type.worktree===lh.hF.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return t.apply(this,arguments)}),[e])||{error:null,isUnmerged:null}};function lM(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,E,R,D,I,B,A,U,X,F,W,V,H,z,j,q,J,Y,ee,et,ei,eo,ea,el,ec,es,eu,ed,ef,eg,ev,ey,eb,ew,eZ,ex,eC,ek,eS,e_,eD,eP,eG,eM,eX,eF,eW,eV,eH,ez,ej,eq,eJ,e$,eK,e2,e8,e6,te,tt,tn,tr,ti,to,ta=e.filePath,tl=e.autoFocus,tc=e.isHidden,ts=e.isReadOnly,tu=e.deeplink,td=e.onDeeplinkUpdated,tf=e.performPaneOperation,tp=e.handleOpenPurchaseModal,th=(0,eA.Z)(),tm=th.fs,tg=th.debuggest,tv=th.presence,ty=th.runner,tb=(0,O.Gn)("codeRepairHighlight","formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,tw=(0,oZ.Z)(),tZ=tw.ref,tx=tw.view,tC=(0,en.useCallback)(function(e){return tf({operation:"open",pane:e,secondary:!0})},[tf]);(0,eh.VD)(tx);var tk=(0,em.FS)(),tS=iR.use(!!(null==tk?void 0:tk.match(/Chrome/i))&&!!(null==tk?void 0:tk.match(/Android/i))),t_="/replEnvironmentDesktop"===K().pathname,tT=(0,en.useContext)(ln.B3),tE=(0,iD.jT)(),tR=(n=(t={path:ta,isHidden:tc}).path,r=t.isHidden,i=(0,a7.NH)(),o=le.use(i),a=lt.use(i),(0,en.useEffect)(function(){i(n,{type:r?"hidden":"unhidden"})},[r,i,n]),(0,en.useEffect)(function(){return function(){i(n,{type:"unmount"})}},[i,n]),(0,en.useMemo)(function(){return[o,a]},[o,a])),tD=(s=(l={view:tx,presence:tv,fs:tm,filePath:ta}).view,u=l.presence,d=l.fs,f=l.filePath,p=iC.use(f,d,u),h=iS.use(u),m=(0,iI.Z)().trackTimeToLoadFileEnd,g=(0,iD.uV)(),v=(0,iD.Id)(),y=(0,iD.I7)(),b=(0,en.useMemo)(function(){return{trackTimeToLoadFileEnd:m,throwBsod:g,setBsodFilePathVersion:v,deleteBsodFilePathVersion:y}},[y,v,g,m]),w=iN.use(f,d,b),Z=null===(c=(0,N.IK)(s,rO.o))||void 0===c||c,x=(0,en.useMemo)(function(){return[w,p,h]},[w,p,h]),(0,en.useMemo)(function(){return{isLoading:Z,extensions:x}},[Z,x])),tI=tD.isLoading,tB=tD.extensions;R=(E={view:tx,autoFocus:tl,isLoading:tI}).view,D=E.isLoading,I=E.autoFocus,(0,en.useEffect)(function(){I&&R&&!D&&R.focus()},[R,D,I]);var tA=function(){var e=(0,oV.Z)(),t=(0,en.useContext)(oH.d);if(!t)throw Error("Expected codemirror state to be in codemirror state context");return oY.use(e,t)}(),tP=(A=(B={filePath:ta,isLoading:tI}).filePath,U=B.isLoading,X=(0,eA.Z)().fs,F=(0,e3.Z)(A),W=(0,O.Gn)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,V=(0,tU.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),H=(0,tU.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),z=U||!W.codeIntelligence||!F.find(function(e){return e.isSupportedFile(A)}),j=(0,en.useMemo)(function(){return new eU.Rh(z?[]:function(e,t,n,r){if(!t.length)return[];var i,o,a,l,c,s,u,d=[(o=(i={lspClients:t,path:n}).lspClients,a=i.path,eR.lg.define(function(e){var t,n,r,i,l,c;return n=(t={lspClients:o,path:a,view:e}).lspClients,r=t.path,i=t.view,l=rp().v4(),c=function(e){var t,n=rh.get(e.clientId);return(null!==(t=null==n?void 0:n.get(r))&&void 0!==t?t:[])[0]===l},function(){var e=!0,t=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(e=(a=c.next()).done);e=!0){var s,u=a.value,d=rh.get(u.clientId),f=null!==(s=null==d?void 0:d.get(r))&&void 0!==s?s:[];d?d.set(r,(0,_._)(f).concat([l])):rh.set(u.clientId,new Map([[r,[l]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){t=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw o}}}(),{id:l,destroy:function(){var e=!0,t=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var c,s=o.value,u=rh.get(s.clientId),d=(null!==(c=null==u?void 0:u.get(r))&&void 0!==c?c:[]).filter(function(e){return e!==l});s.getServerState()===rd.a.INITIALIZED&&s.isOpen(r)&&s.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}},update:function(e){if(e.docChanged){var t=!0,i=!1,o=void 0;try{for(var a,l,s=n[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u,d=l.value;if(c(d)){var f=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(f!==t5.TextDocumentSyncKind.None&&d.isOpen(r)){if(f===t5.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,t){var n=[],r=t;return e.iterChanges(function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,eQ.sg)(r,i),end:(0,eQ.sg)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)}),n}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}}}}})),(0,L.Fq)({lspClients:t,path:n}),function(e,t){function n(e){return(0,e1.Z)(e).isTextDocumentSyncSupported}return eR.lg.fromClass(function(){"use strict";function r(e){(0,eN._)(this,r),this.dispose=this.listen(e.state.facet(tj.Yp))}var i=r.prototype;return i.update=function(e){(0,eU.aU)(e,tj.Yp)&&(this.dispose=this.listen(e.state.facet(tj.Yp)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&t.find(function(e){return n(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value;n(c)&&(0,e1.Z)(c).isTextDocumentSyncSaveSupported&&c.isOpen(r)&&c.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,t),(0,rv.BB)(t)];return(0,rg.isMobile)()||d.push([nO,t0,t3,(0,tV.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tH.o)(e)?tQ:""},addToOptions:[{render:function(e,t){if(!(0,tH.o)(t))return null;var n=(0,tq.V)((0,T.tZ)("div",{className:nN,children:(0,T.tZ)(tK.ZP,{size:"inherit",shortcut:{key:""}})}));return n.style.display="inline-flex",n},position:200}],override:t.map(function(e){return(0,tV.eC)(["LineComment","BlockComment"],function(e){var t=.01>Math.random(),n=0,r=function(n,r,i){if(t&&r){var o=e.getLanguageId(r);return t4.kg.info("lsp:autocomplete:".concat(n),(0,C._)({languageId:o},i)),(0,t8.j)(t8.U3.LSP_COMPLETION_USED,(0,C._)({type:n,sampleRate:.01},i))}};function i(){return(i=(0,eT._)(function(t){var i,o,a,l,c,s,u,d,f,p;return(0,eE.Jh)(this,function(h){switch(h.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:t5.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(o))?{triggerKind:t5.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:t5.CompletionTriggerKind.Invoked}:null}(t,(null==o?void 0:null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(n&&e.notify.cancelRequest(n),!(l=t.state.facet(tj.Yp)))throw Error("path not found");return n=e.generateId(),c=t.state.doc,[4,e.request.completion(l,(0,eQ.sg)(c,t.pos),a,{id:n})];case 1:if("error"in(s=h.sent())||(u=s.result,t.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,p=Array.isArray(u)?{}:null!==(f=u.itemDefaults)&&void 0!==f?f:{},[2,function(e){for(var t,n=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,c=null,s=(R=r.filter(function(e){return!!e.label}),D=["label","kind"],I=new Set,R.filter(function(e){var t=D.map(function(t){return e[t]}).join("");return!I.has(t)&&(I.add(t),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),u=((s=s.sort(function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0})).length%2?s.length-1:s.length)/2,d=0;d<=u;d++){if(0===d&&s[u]){s[u].boost=0;continue}var f=s[u-d];if(f){var p=s[u-d+1],h=p.sortText,m=p.boost,g=void 0===m?0:m;f.boost=f.sortText===h?g:g+1}var v=s[u+d];if(v){var y=s[u+d-1],b=y.sortText,w=y.boost,Z=void 0===w?0:w;v.boost=v.sortText===b?Z:Z-1}}var x=null!==(P=null===(B=s[0])||void 0===B?void 0:B.boost)&&void 0!==P?P:0,E=null!==(G=null===(A=s[s.length-1])||void 0===A?void 0:A.boost)&&void 0!==G?G:0;if(x>99||E<-99)for(var R,D,I,B,A,P,G,L,N=99/Math.max(Math.abs(x),Math.abs(E)),O=0;O<s.length;O++)s[O].boost=(null!==(L=s[O].boost)&&void 0!==L?L:0)*N;var U=(0,S._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=nL(t)+nL(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(s),2),M=U[0],X=U[1],F=n.matchBefore(X),W=n.pos;function V(e,t){var n,r,s,u,d,f,p,h,m,g,v,y,b,w;return m=t.state.facet(tj.Yp),g=null!==(d=(0,tz.Z)(t.state))&&void 0!==d?d:"unknown",v=(0,e1.Z)(o),y=e.item,b=e.boost,w={label:y.label,detail:v.isCompletionLabelDetailsSupported?null===(n=y.labelDetails)||void 0===n?void 0:n.description:y.detail,type:null===(r=Object.entries(t7.CompletionItemKind).find(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return y.kind===n}))||void 0===r?void 0:r[0].toLowerCase(),commitCharacters:t.state.facet(nP)?null!==(h=null!==(p=null!==(f=y.commitCharacters)&&void 0!==f?f:i.commitCharacters)&&void 0!==p?p:null===(u=o.getServerCapabilities())||void 0===u?void 0:null===(s=u.completionProvider)||void 0===s?void 0:s.allCommitCharacters)&&void 0!==h?h:[]:void 0,boost:b},nG.set(w,e),w.apply=function(t,n,r,i){var s=function(e){var n=u?l:t.state.doc,r={from:(0,eQ.RL)(n,e.start),to:(0,eQ.RL)(n,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(m){var u=c,d=null!==(p=null===(f=e.resolved)||void 0===f?void 0:f.additionalTextEdits)&&void 0!==p?p:y.additionalTextEdits;if(y.insertTextFormat===t7.InsertTextFormat.Snippet){var f,p,h,v,b,w=null;d&&(w={changes:d.map(function(e){return(0,k._)((0,C._)({},s(e.range)),{insert:e.newText})})});var Z=new nC(null!==(b=null!==(v=null===(h=y.textEdit)||void 0===h?void 0:h.newText)&&void 0!==v?v:y.insertText)&&void 0!==b?b:y.label);if(y.textEdit&&"range"in y.textEdit){var x=i,T=s(y.textEdit.range);r=T.from,i=Math.max(i=T.to,x)}var E=w?[w,Z.apply({view:t,from:r,to:i,path:m,completion:n})]:[Z.apply({view:t,from:r,to:i,path:m,completion:n})];t.dispatch.apply(t,(0,_._)(E)),a("completion-accepted",m,{language:g,completionKind:y.kind,insertTextFormat:y.insertTextFormat});return}var R=[];if(y.textEdit){if(!("range"in y.textEdit))return;var D=s(y.textEdit.range);R.push((0,k._)((0,C._)({},D),{to:Math.max(D.to,t.state.selection.main.to),insert:y.textEdit.newText}))}else{var I=y.insertText||y.label,B=t.state.wordAt(i);B&&B.to>i&&I.includes(t.state.doc.sliceString(i,B.to))&&(i=B.to),R.push({from:r,to:i,insert:I})}var A=(0,S._)(R,1)[0],P="";null==d||d.forEach(function(e){var t=s(e.range);"from"in A&&t.from===A.from&&(P=e.newText),R.push((0,k._)((0,C._)({},t),{insert:e.newText}))});var G=i-r;t.state.selection.ranges.forEach(function(e){if(e!==t.state.selection.main){if(!("insert"in A)||!A.insert)throw Error("Expected insert in mainChange");var n=e.from-G,r=P+A.insert;R.push({from:n,to:e.to,insert:r})}});var L=eO.as.of(R.map(function(e){return"from"in e&&void 0!==e.to?(0,k._)((0,C._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),t.state.doc.length);a("completion-accepted",m,{language:g,completionKind:y.kind,insertTextFormat:y.insertTextFormat}),t.dispatch({annotations:tV.Jv.of(n),changes:L,selection:eO.jT.create(t.state.selection.ranges.map(function(e){return e.map(L,0)}),t.state.selection.mainIndex)}),y.command&&o.request.executeCommand(y.command.command,y.command.arguments)}},v.isCompletionItemResolveSupported&&(w.info=(0,eT._)(function(){var t,n,r,i,l,c,s;return(0,eE.Jh)(this,function(u){switch(u.label){case 0:if(n=null!==(t=e.resolved)&&void 0!==t?t:null)return[3,2];return[4,o.request.resolveCompletionItem(y)];case 1:if(n="result"in(r=u.sent())?r.result:null,r.cancelled||null===n)return[2,null];e.resolved=n,u.label=2;case 2:if(i=Math.floor(2147483647*Math.random()),l=[],m&&n.detail&&n.detail!==y.detail&&n.detail!==y.label&&(s=["```"+((c=m.lastIndexOf("."))>=0?m.slice(c+1):"md"),n.detail,"```"].join("\n"),l.push((0,T.tZ)(ni,{className:n.documentation?"lsp-completion-detail":void 0,content:{value:s,kind:"markdown"}},"".concat(i,"-detail")))),n.documentation&&l.push((0,T.tZ)(ni,{content:n.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",m,{language:g,resolutionSource:"request",completionKind:y.kind}),[2,{dom:(0,tq.V)((0,T.tZ)("div",{children:l}))}]}})})),w}return F&&(W=F.from),s.length&&a("completion-options-presented",n.state.facet(tj.Yp),{language:null!==(t=(0,tz.Z)(n.state))&&void 0!==t?t:"unknown"}),{from:W,options:s.map(function(e){return V(e,n)}),validFor:M,update:function(e,t,n,r){return(0,k._)((0,C._)({},e),{options:e.options.map(function(e){var t,n=null!==(t=nG.get(e))&&void 0!==t?t:null;return n?V(n,r):e})})},map:function(e,t){return c=c?c.composeDesc(t):t,e}}}({context:t,startingDoc:c,items:d,itemDefaults:p,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var t={current:new Map};function n(){return(n=(0,eT._)(function(n,i){var o,a,l,c,s,u;return(0,eE.Jh)(this,function(d){switch(d.label){case 0:if(!(a=n.facet(tj.Yp))||(l=n.field(r,!1),c=n.field(rl,!1),!(s=e.filter(function(e){var t,n,r,i=null!==(r=null===(n=e.getServerCapabilities())||void 0===n?void 0:null===(t=n.signatureHelpProvider)||void 0===t?void 0:t.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||c&&i.includes(c)))})).length))return[2,null];return[4,function(e,t,n,r,i){return ru.apply(this,arguments)}(n,i,s,a,t)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=eO.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,k._)((0,C._)({},e),{pos:t.newSelection.main.from})),(0,ri.j)(t,ro.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,ri.j)(t,ra,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,k._)((0,C._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=rc.create({help:n.help,index:n.index});return{dom:r,update:function(t){rc.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return eR.hJ.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),i=eR.lg.define(function(){var t,r=ep()((t=(0,eT._)(function(e){var t,r,i;return(0,eE.Jh)(this,function(o){switch(o.label){case 0:if(!(t=e.state.selection.main).empty)return[3,2];return r=e.state.field(ro.state,!1),[4,function(e,t){return n.apply(this,arguments)}(e.state,t.from)];case 1:(i=o.sent())&&!r&&(0,tV._B)(e),e.dispatch({effects:ro.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)}),0);return{update:function(t){e.some(function(e){return(0,e1.Z)(e).isSignatureHelpSupported})&&t.selectionSet&&t.state.selection.main.empty&&r(t.view)}}});function o(e,t){var n=e.state.field(ro.state,!1);return"active"!==(0,tV.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var a=function(e){return function(t){return!!o(t,"navigate")&&(t.dispatch({effects:ra.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:ro.effect.of(null)}),!0)}}];return[r,ro.state,rl,i,eO.Wl.high(eR.$f.of(l))]}(t),(l=function(e){var t,n=null;return(0,eR.bF)((t=(0,eT._)(function(t,r){var i,o,a,l,c,s;return(0,eE.Jh)(this,function(u){switch(u.label){case 0:if(t.state.facet(nW.j)||!(0,e1.Z)(e).isHoverSupported||!(i=t.state.facet(tj.Yp)))return[2,null];o=(0,eQ.sg)(t.state.doc,r);try{a=t.state.wordAt(r)}catch(e){return[2,null]}if(n){if(n.from===(null==a?void 0:a.from)&&n.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(n.id)}return n={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(c=u.sent(),n=null,"error"in c||null===(s=c.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)t=(0,eQ.RL)(l,r.range.start),n=(0,eQ.RL)(l,r.range.end),a=l.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var c=i.wordAt(t);c?(a=l.sliceString(c.from,c.to),t=Math.min(t,c.from),n=c.to):a=l.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,tq.V)((0,T.tZ)(nF,{content:r.contents,textHovered:a}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t,mount:function(){!function(e,t){t.forEach(function(t){return setTimeout(e,t)})}(function(){(0,eR.E2)(e)},[0,50,200,1e3])}}},above:!0}}({hover:s,offset:r,state:t.state})]}})}),function(e,n){return t.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(eO.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(nW.j))},hoverTime:0})},[eO.Wl.highest(t.map(function(e){return l(e)})),eR.tk.domEventObservers({mousedown:function(e,t){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,eR.Dm)(t.state)&&t.dispatch({effects:eR.E8})},keydown:function(e,t){"Escape"===e.key&&(0,eR.Dm)(t.state)&&t.dispatch({effects:eR.E8})},scroll:function(e,t){(0,eR.Dm)(t.state)&&t.dispatch({effects:eR.E8})}})]),(0,rm.DZ)(t,e,r),(0,nV.jd)({lspClients:t}),(c=eO.Py.define(),s=eO.Py.define(),[eR.tk.updateListener.of((u=(0,eT._)(function(e){var n,r,i,o,a,l,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,S,T,E,R,D,I,B,A,P,G,L,N,O,U,M;return(0,eE.Jh)(this,function(X){switch(X.label){case 0:if(!t.some(function(e){var t=(0,e1.Z)(e);return t.isFindReferencesSupported||t.isFindDefinitionSupported}))return[2];n=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){u=l.value,d=!0,f=!1,p=void 0;try{for(h=u.effects[Symbol.iterator]();!(d=(m=h.next()).done);d=!0)(g=m.value).is(nz.h)&&(n=g.value)}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!n||!(v=e.view.state.facet(tj.Yp)))return[2];y=e.state.doc,b=(0,eQ.sg)(y,n),w=[],Z=!0,x=!1,C=void 0;try{for(k=function(){var e=T.value,t=(0,e1.Z)(e);t.isFindDefinitionSupported&&w.push(e.request.findDefinitions(v,b).then(function(t){return{client:e,response:t,type:"definition"}})),t.isFindReferencesSupported&&w.push(e.request.findReferences(v,b,{includeDeclaration:!1}).then(function(t){return{client:e,response:t,type:"references"}}))},S=t[Symbol.iterator]();!(Z=(T=S.next()).done);Z=!0)k()}catch(e){x=!0,C=e}finally{try{Z||null==S.return||S.return()}finally{if(x)throw C}}return E=Promise.all(w),(0,nH.SC)(e.view,E),[4,E];case 1:R=X.sent(),D=[],I=[],B=new Set,A=!0,P=!1,G=void 0;try{for(L=function(){var e=O.value,t=e.client,n=e.response,r=e.type;if(("error"in n))throw Error("Something went wrong fetching references: ".concat(n.error.message));var i=(0,nq.g)(n.result);if(!i)return"continue";"definition"===r&&D.push.apply(D,(0,_._)(i)),"references"===r&&I.push.apply(I,(0,_._)(i)),i.forEach(function(e){B.add(t.documentUriToPath(e.uri))})},N=R[Symbol.iterator]();!(A=(O=N.next()).done);A=!0)L()}catch(e){P=!0,G=e}finally{try{A||null==N.return||N.return()}finally{if(P)throw G}}if(!D.length&&!I.length)return(0,nj.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:s.of(null)}),[2];return U=Array.from(B).filter(function(e){return e!==v}),M=y.toJSON().join("\n"),e.view.dispatch({effects:c.of({references:I,definitions:D,currentFile:v,currentFileContents:M,files:U})}),[2]}})}),function(e){return u.apply(this,arguments)})),eO.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u.is(c)&&(n=u.value),u.is(s)&&(n=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return[eR.$f.of([{key:"Escape",run:function(t){return!!t.state.field(e)&&(t.dispatch({effects:s.of(null)}),!0)}}]),eR.hJ.compute([e],function(t){var n=t.field(e),r=t.facet(tj.Yp);if(!n)return null;var i=t.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var t=(0,tq.V)((0,T.tZ)("div",{children:(0,T.tZ)(n9,(0,k._)((0,C._)({},n),{onClose:function(){e.dispatch({effects:s.of(null)})},jumpToPosition:function(t){if(t.path!==r){(0,rn.ZB)(e.state,{path:t,secondary:!1});return}var n=t.line,i=t.col;(0,tX.S)({view:e,line:n,col:i}),e.focus()}}))}));return t.classList.add("replit-tooltip"),t.style.padding="0",t.style.overflow="scroll",{dom:t}}}})]}})]),(0,rr.f)(e,t)),d}(X,F,A,H))},[F,A,X,H,z]),q=(0,en.useMemo)(function(){return new eU.Rh(function(){return tW.T.of(F.map(function(e){return(0,e1.Z)(e)}))})},[F]),(0,en.useEffect)(function(){return!F.length||z?j.set(null):(0,ry.uf)(F.map(function(e){return e.onServerCapabilitiesChange(function(){q.set(tW.T.of(F.map(function(e){return(0,e1.Z)(e)})))})}))},[q,F,j,z]),[q.extension,j.extension,rI.use(W.acceptSuggestionOnCommitCharacter),rB.use(W.codeActionsOnSave),rA.use(W.codeIntelligence),rR.use(W.semanticTokens&&V?F:null)]),tG=(Y=(J={debuggest:tg,filePath:ta}).debuggest,ee=J.filePath,et=(0,eA.Z)().fs,ei=(0,eB.Z)(),eo=(0,eI.Z)(Y.mainClient),eL.use(eo,ei,ee,et));(0,tX.Z)({filePath:ta,view:tx,isLoading:tI,deeplink:tu,onDeeplinkUpdated:td});var tL=(el=(ea={view:tx,filePath:ta}).view,ec=ea.filePath,es=(0,eA.Z)().fs,(0,S._)((0,ll.L)({accept:[la.z.Code,lc.FILE],drop:function(e,t){if(el){var n=t.getClientOffset(),r=n?el.posAtCoords(n):null;if(null!==r){var i=function(e){el.focus(),el.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===la.z.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var c,s=e.files[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;ec&&(0,er.gK)(ec)&&(0,ls.r)(u,es,ec).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}}}}),2)[1]),tN=(0,e7.Z)({filePath:ta}),tO=(ed=(eu={view:tx,filePath:ta,isLoading:tI,enable:t_}).view,ef=eu.filePath,eg=eu.isLoading,ev=eu.enable,ey=(0,an.kM)(),(0,en.useEffect)(function(){ed&&ey&&ed.dispatch({effects:[ag.YM.of(ey),ag.eR.of(ey)]})},[ed,ey]),eb=(0,aH.F)().theme,eZ=(ew=(0,S._)((0,en.useState)([t6.TV.accentPrimaryDimmest,t6.TV.accentPrimaryDimmer]),2))[0],ex=ew[1],(0,en.useEffect)(function(){var e=aV(eb.values.global.accentPrimaryDimmest);ex(["rgba(".concat(e.join(","),", 0.5)"),t6.TV.accentPrimaryDimmer])},[eb]),eC=o1(ef,eg,!0,ev),ek=(0,eA.Z)().fs,e_=(eS=(0,oK.kL)(ef)).contentRef,eD=eS.loadedFile,eP=eS.transformSelectionRef,(0,en.useEffect)(function(){var e=!1,t=eP.current,n=e_.current;if(eD&&t&&n&&!eg&&ed){var r=Object.values(eC);if(0===r.length){ed.dispatch({effects:ag.qi.of({})});return}Promise.all(r.map(function(e){return(0,oK.Ft)({anchor:e,version:ek.getOTVersion(ef),transformSelection:t,content:n})})).then(function(t){if(!e){var n=t.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,C._)({},e.anchor,null==e?void 0:e.newSelection)});return ed.dispatch({effects:ag.qi.of(n.reduce(function(e,t){return e[t.id]=t,e},{}))}),function(){e=!0,ed&&ed.dispatch({effects:ag.qi.of({})})}}})}},[eC,ed,eD,ek,eP,e_,ef,eg]),aj.use(ev,eZ));eX=(eG={view:tx,filePath:ta}).view,eF=eG.filePath,eW=(0,$.useRouter)(),eV=(0,M.Gv)(eW),eH=(0,en.useRef)({revisionId:rM()(),textEditorState:a$(eF),hasGhostwriterSuggestion:!1}),ez=(0,en.useRef)(eF),ej=null!==(eM=null==eX?void 0:eX.plugin(N.pE))&&void 0!==eM?eM:null,(0,en.useEffect)(function(){if(eV&&eX&&ej&&!ej.destroyed){var e=function(e){aQ(eH.current,e.messageId)},t=function(t){a3(eF,ez.current,eX,eH.current,t)?e(t):(0,aq.pl)(t.messageId)},n=function(t){a3(eF,ez.current,eX,eH.current,t)?e(t):(0,aq.pl)(t.messageId)},r=function(r){try{var i=r.data;if(!(0,aY.CF)(i)||i.protocolVersion!==aY.Wj)return;var o=i.payload;i.messageDirection===aY.s1.TO_NATIVE&&(0,aY.H7)(o)&&(ez.current=o.activePaneFilePath),(0,aq.fp)(r,function(r){var o=r.type;switch(o){case aY.cF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case aY.cF.REQUEST_SET_SELECTION:case aY.cF.REQUEST_REPLACE_SELECTION:case aY.cF.REQUEST_SET_TEXT:case aY.cF.REQUEST_INSERT_TEXT:case aY.cF.REQUEST_PASTE_TEXT:t(i);break;case aY.cF.TEXT_EDITOR_REQUEST_ACTION:n(i);break;default:(0,a4.Z)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),eH.current={revisionId:rM()(),textEditorState:aK(eF,eX),hasGhostwriterSuggestion:(0,tH.o)(eX.state)},aQ(eH.current);var i=!1,o=!1,a=ej.bind({changed:function(e){var t;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null===(t=eH.current)||void 0===t?void 0:t.hasGhostwriterSuggestion)!==(0,tH.o)(e.state)},callback:function(){var e=i?rM()():eH.current.revisionId;i=!1,eH.current={revisionId:e,textEditorState:aK(eF,eX),hasGhostwriterSuggestion:(0,tH.o)(eX.state)},aQ(eH.current)},destroy:function(){window.removeEventListener("message",r),o||(a0(eF),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(a0(eF),o=!0)}}},[eX,eF,eV,ej]);var tJ=(eq=(0,a8.K)({path:ta}),a6.use(eq)),tY=lU(ta).isUnmerged,t$=(e$=(eJ={filePath:ta,enableConflicts:!0===tY}).filePath,eK=eJ.enableConflicts,e2=(0,tU.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),e8=(0,eA.Z)().git,tM.use(e8,void 0===e$?null:e$,!(void 0!==eK&&eK)||!e2)),t1=(0,M.T3)(),t2=om.use(t1),t9=iO.hx.use(tm),ne=os.use(t1),nt=o_.use(tb.rulers),nn=(0,aH.F)(),nr=rN.use(t1,tb.minimapDisplay,nn),no=lg.use(t1,nn),na=(0,tU.P5)({controlName:"flag-draft-buffers"}),nl=P.NS.use(tm,ty,na,tb.formatOnSave),nc=(e6={filePath:ta},te=(0,eA.Z)().container,tt=(0,e0.T)(),tn=(0,O.Gn)("codeIntelligence").preferences,tr=(0,e3.Z)(e6.filePath),ti=(0,e4.Z)(tr),e5.use(tt,te,tr,ti,tn.codeIntelligence,e6.filePath)),ns=eY.use(tb.showLeadingWhitespace,tb.showEnclosedWhitespace,tb.showTrailingWhitespace,tb.showSelectedWhitespace),nu=(0,lb.N)({analyticsSurface:"workspace_editor"}),nd=(0,lo.Ls)({path:ta}),nf=(0,lo.fD)({path:ta}),np=(0,lo.jg)({path:ta}),nh=(0,en.useCallback)(function(){tx&&nd(tx,"shortcut")},[tx,nd]),nm=(0,lu.u)({isMobile:t1,generateCode:nd,filePath:ta}),ng=(0,en.useCallback)(function(){tC({type:"ghostwriterChat"})},[tC]),nv=(0,e9.W)({onGenerateCode:nh,onReplyInChat:ng}),ny=(0,lr.av)(),nb=ny.onContextMenu,nw=ny.closeContextMenu,nZ=ny.openContextMenu,nx=ny.isVisible,nk=(0,en.useCallback)(function(e){tx&&(0,eR.$1)(tx,e,"context-menu")&&(nw(),e.stopPropagation(),e.preventDefault())},[nw,tx]),nS=(0,S._)((0,lo.aT)({path:ta,view:tx,onCommand:function(e){if(tx){var t=tx.state.selection.main.head;if(t){var n=tx.coordsAtPos(t);n&&nZ({target:{x:n.left,y:n.top},command:[n_(),e],width:275,onKeyDownHandler:nk})}}}}),2),n_=nS[0],nT=nS[1],nE=(0,en.useCallback)(function(e){nb(e,{command:n_(),width:275,onKeyDownHandler:nk})},[n_,nb,nk]),nR=(0,en.useCallback)(function(e,t){nZ({target:e,command:[n_(),t],width:275,onKeyDownHandler:nk})},[n_,nk,nZ]),nD=lo.pZ.use(t1,nx,nE),nI=li.t.use(nR),nB=(0,en.useCallback)(function(e){nZ({target:{x:e.right-275,y:e.top},width:275,command:n_(),onKeyDownHandler:nk})},[n_,nk,nZ]),nA=(0,ld.W)({editCode:np,explainCode:nf,generateCode:nd,onMoreClick:nB}),nU=l_(),nM=lT(ta),nX=(to=(0,iU.T)(),ol.use(to)),nJ=(0,tU.P5)({controlName:"flag-problems-pane"}),nY=tF.y.use(nJ),n$=ly.lL.use(tb.codeRepairHighlight),nK=lN.use(tp),nQ=lO.use(),n0=(0,rn.Fs)(tf),n1=lp.G.use(tm,ty,na);return(0,T.tZ)("div",{css:lf.ac,"data-cy":tI?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(ta),children:(0,T.tZ)(ou.ZP,{ref:tZ,elementRef:tL,css:lf.Mp,filePath:ta,hideTooltips:tc,readOnly:ts,extensions:[nD,nI,nT,tB,tG,tA,tP,nm,nQ,t2,tS,ne,t$,no,nr,iO.sy,t9,iT,nv,nX,o$,nt,ns,nl,nc,G.er,tJ,tN,tO,oW,ow,t1?[]:nA,tR,nY,n0,n1,nu,nU&&nM?n$:[],!nU&&nM?nK:[]],onException:function(e){var t,n={filePath:ta,cursorPosition:JSON.stringify(null==tT?void 0:null===(t=tT.get(Q._s))||void 0===t?void 0:t.position),fileVersion:tE({filePath:ta})};if(tx){var r=tx.plugin(iT),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=tx.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(tx.state.selection.main.toJSON()),n.updateDoc=tx.state.doc.sliceString(0)}(0,a5.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}var lX=n(64888),lF=n(87088),lW=n(44794),lV=n(56636),lH=n(86466),lz=n(41974),lj=n(80786),lq=n(41960),lJ=n(41026),lY=(0,et.cn)(0),l$=(0,et.cn)(new Map([["normal",[]],["compact",[]]])),lK=(0,et.cn)(null,function(e,t,n){var r=e(l2);t(l$,function(e){return(0,lz.Uy)(e,function(e){var t=e.get(r);if(!t)throw Error("Expect width for: "+r);t[n.index]=n.width})})}),lQ=(0,et.cn)(null,function(e,t,n){t(l$,function(e){return(0,lz.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)(0,S._)(o.value,2)[1].slice(0,n)}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),l0=(0,et.cn)(function(e){var t=new Map([["normal",0],["compact",0]]),n=!0,r=!1,i=void 0;try{for(var o,a=e(l$)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1],u=0,d=!0,f=!1,p=void 0;try{for(var h,m=s[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;void 0!==g&&(u+=g)}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}t.set(c,u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}),l1=(0,et.cn)(function(e){if("normal"===e(l2))return null;var t=e(l$).get("compact");if(!t)return null;var n=e(lY)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(void 0!==s){if((n-=s)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return null}),l2=(0,et.cn)(function(e){var t,n=e(lY);return(null!==(t=e(l0).get("normal"))&&void 0!==t?t:0)>n?"compact":"normal"}),l3=(0,eg.X)({item:[ed.l0.viewStyle,lH.gU.listItem,ed.l0.p(6),ed.l0.rowWithGap(4),ed.l0.align.center,{fontSize:ed.TV.fontSizeSmall}]});function l4(e){var t=(0,S._)((0,en.useState)(null),2),n=t[0],r=t[1],i=null!==n&&(null===(s=e.items[n])||void 0===s?void 0:s.popover);if(i)return(0,T.tZ)(T.HY,{children:i});var o=[],a=!0,l=!1,c=void 0;try{for(var s,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;f.onClick||f.popover||o.push(f.key)}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(0,T.tZ)(lX.v2,{disabledKeys:o,onAction:function(t){var n=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.key===t){if(c.onClick){c.onClick();break}c.popover&&r(e.items.indexOf(c));break}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,T.tZ)(lX.sN,{id:e.key,css:l3.item,children:(0,T.tZ)(l8.Provider,{value:function(){},children:(0,en.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var l8=(0,en.createContext)(function(e){});function l6(){return(0,en.useContext)(l8)}var l5=(0,eg.X)({button:[ed.l0.viewStyle,ed.l0.reset.button,ed.l0.rowWithGap(4),ed.l0.center,ed.l0.color.foregroundDimmest,ed.l0.hover([ed.l0.color.foregroundDefault]),ed.l0.height("100%"),{fontSize:12,"&:has(*)":[ed.l0.px(4),lH.gU.nofill,ed.l0.borderRadius(0)]}],tooltip:[ed.l0.backgroundColor.backgroundHighest,ed.l0.borderRadius(4),ed.l0.color.foregroundDimmer,ed.l0.p(4),ed.l0.border({color:ed.TV.outlineDefault}),{fontSize:12}]});function l7(e){var t=(0,oR.Z)(function(t){return e.onWidth(t.width)}),n=(0,S._)((0,en.useState)(null),2),r=n[0],i=n[1];return(0,T.tZ)(ec.G,{innerRef:t,children:(0,T.BX)(lF.aJ,{isDisabled:null==r||e.hidden,children:[(0,T.tZ)(lW.z,{isDisabled:e.isDisabled||e.hidden,css:l5.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:(0,T.tZ)(l8.Provider,{value:i,children:e.children})}),(0,T.tZ)(lF.u,{placement:"top",offset:8,css:l5.tooltip,children:r})]})})}var l9=(0,eg.X)({root:[ed.l0.flex.row,ed.l0.flex.growAndShrink(1),ed.l0.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[ed.l0.flex.growAndShrink(1)],moreButton:[{width:24},ed.l0.reset.button,ed.l0.center,lH.gU.nofill,ed.l0.height("100%"),ed.l0.position.absolute,ed.l0.right(0),ed.l0.top(0)],popover:[ed.l0.borderRadius(4),ed.l0.border({color:ed.TV.outlineDefault})]});function ce(e){var t=e.left.filter(Boolean),n=e.right.filter(Boolean),r=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],i=(0,lj.Dv)(l2,{store:r}),o=(0,lj.Dv)(l1,{store:r}),a=(0,lj.b9)(lK,{store:r}),l=(0,lj.b9)(lY,{store:r}),c=(0,oR.Z)(function(e){return l(e.width)}),s=t.length-1,u=(0,_._)(t).concat((0,_._)(n)),d=(0,lj.b9)(lQ,{store:r}),f=u.length;return(0,en.useEffect)(function(){d(f)},[d,f]),(0,T.tZ)(T.HY,{children:(0,T.BX)(ec.G,{className:e.className,css:l9.root,innerRef:c,children:[u.map(function(e,t){return e.popover?(0,T.BX)(en.Fragment,{children:[(0,T.BX)(lV.hg,{children:[(0,T.tZ)(l7,{onWidth:function(e){return a({index:t,width:e})},hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,en.cloneElement)(e.item,{presentation:i})}),(0,T.tZ)(lq.Bf,{placement:t<=s?"top left":"top right",children:e.popover})]}),t===s?(0,T.tZ)(ec.G,{css:l9.middle}):null]},e.key):(0,T.BX)(en.Fragment,{children:[(0,T.tZ)(l7,{onWidth:function(e){return a({index:t,width:e})},onClick:e.onClick,hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,en.cloneElement)(e.item,{presentation:i})}),t===s?(0,T.tZ)(ec.G,{css:l9.middle}):null]},e.key+t)}),null===o?null:(0,T.BX)(lV.hg,{children:[(0,T.tZ)(lW.z,{css:l9.moreButton,children:(0,T.tZ)(lJ.Z,{size:12})}),(0,T.tZ)(lq.Bf,{placement:"top right",children:(0,T.tZ)(l4,{items:u.slice(o)})})]})]})})}var ct=n(62881),cn=n(31718),cr=n(32652),ci=n(91466);function co(e){var t=e.presentation,n=(0,O.Gn)("codeSuggestion").preferences.codeSuggestion,r=l6();return(0,en.useEffect)(function(){r("compact"===t?"AI":null)},[r,t]),(0,T.BX)(T.HY,{children:[(0,T.tZ)(t$.Z,{size:12,color:n?ed.TV.blurpleDefault:void 0}),"compact"===t?null:(0,T.tZ)(ec.G,{children:"AI"})]})}var ca=(0,eg.X)({root:[ed.l0.p(8),ed.l0.maxWidth(260)],featureHeader:[ed.l0.rowWithGap(8),ed.l0.align.center],featureTitle:[ed.l0.rowWithGap(4),ed.l0.align.center,ed.l0.flex.growAndShrink(1),ed.l0.fontWeight.medium],enableAutocomplete:[ed.l0.rowWithGap(4),ed.l0.align.center],text:[ed.l0.colWithGap(8)],hint:[ed.l0.rowWithGap(4),ed.l0.align.center],divider:[ed.l0.my(8)]});function cl(e){var t=e.activeFile,n=(0,en.useId)(),r=(0,O.Gn)("codeSuggestion","codeRepairHighlight"),i=r.preferences,o=i.codeSuggestion,a=i.codeRepairHighlight,l=r.update,c=l_(),s=lT(t);return(0,T.BX)(ec.G,{css:ca.root,children:[c&&s?(0,T.BX)(T.HY,{children:[(0,T.BX)(ec.G,{css:ca.featureHeader,children:[(0,T.BX)(ec.G,{css:ca.featureTitle,children:[(0,T.tZ)(ct.Z,{color:ed.TV.blurpleDefault}),(0,T.tZ)(tY.xv,{children:"AI Code Repair"})]}),(0,T.BX)(ec.G,{css:ca.enableAutocomplete,children:[(0,T.tZ)(ec.G,{tag:"label",htmlFor:n,children:(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,T.tZ)(cn.X,{id:n,checked:a,name:"Code Repair Highlighting",onChange:function(){return l({codeRepairHighlight:!a})}})]})]}),(0,T.tZ)(ec.G,{css:ca.text,children:(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Highlights language-related errors that AI can fix for you"})}),(0,T.tZ)(ci.R,{css:ca.divider})]}):null,(0,T.BX)(ec.G,{css:ca.featureHeader,children:[(0,T.BX)(ec.G,{css:ca.featureTitle,children:[(0,T.tZ)(ct.Z,{color:ed.TV.blurpleDefault}),(0,T.tZ)(tY.xv,{children:"AI Autocomplete"})]}),(0,T.BX)(ec.G,{css:ca.enableAutocomplete,children:[(0,T.tZ)(ec.G,{tag:"label",htmlFor:n,children:(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,T.tZ)(cn.X,{id:n,checked:o,name:"Code Complete",onChange:function(){return l({codeSuggestion:!o})}})]})]}),(0,T.BX)(ec.G,{css:ca.text,children:[(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,T.BX)(ec.G,{css:ca.hint,children:[(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,T.tZ)(i1.bM,{small:!0,keyCombo:"Tab"}),(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var cc=n(76208),cs=n(98008),cu=n(69941),cd=n(25607),cf=n(96214),cp=n(1051);function ch(e){var t=e.filePath,n=e.presentation,r=(0,O.Gn)("codeIntelligence").preferences.codeIntelligence,i=(0,eh.uN)(),o=(0,e3.Z)(t)[0],a=(0,S._)((0,en.useState)(null==o?void 0:o.getServerState()),2),l=a[0],c=a[1],s=(0,S._)((0,en.useState)(null==o?void 0:o.getServerHealth()),2),u=s[0],d=s[1],f=(0,S._)((0,en.useState)(!1),2),p=f[0],h=f[1],m=(0,N.IK)(i,tj.Q$),g=(0,en.useMemo)(function(){var e,n,r,i;return(r=null===(e=e8.$R.from(t))||void 0===e?void 0:e.name)?r:(r=null==m?void 0:null===(n=m.language)||void 0===n?void 0:n.name)&&r.length>0?(i=r).slice(0,1).toUpperCase()+i.slice(1).toLowerCase():(r=(0,er.r6)(t),m)?r:"Plain Text"},[t,m]),v=(0,en.useMemo)(function(){if(!r)return 6;if(null!==o&&u===rd.N.STALLED)return 3;var e=null!=o&&u===rd.N.READY;return p||l===rd.a.INITIALIZING||l===rd.a.INITIALIZED&&!e?0:e?1:l===rd.a.EXITED?2:null!==m?4:5},[o,p,m,u,l,r]);(0,en.useEffect)(function(){if(o)return h(!1),c(o.getServerState()),d(o.getServerHealth()),(0,ry.uf)([o.onServerStateChange(function(e){c(e)}),o.onServerHealthChange(function(e){d(e)})])},[o]);var y=(0,N.IK)(i,eK.i5),b=(0,S._)((0,en.useState)(y?{title:y.name,value:y.id}:void 0),2),w=b[0],Z=b[1],x=(0,en.useRef)(!1);(0,en.useEffect)(function(){x.current||(null==w?void 0:w.value)===(null==y?void 0:y.id)||Z(y?{title:y.name,value:y.id}:void 0)},[w,y]);var C=l6();return(0,en.useEffect)(function(){C("Language support"+("compact"===n?" (".concat(g,")"):""))},[C,n,g]),(0,T.BX)(T.HY,{children:[(0,T.tZ)(cb,{state:v}),"compact"===n?null:(0,T.tZ)(ec.G,{children:g})]})}var cm=(0,eg.X)({menu:[ed.l0.p(8),ed.l0.colWithGap(8),ed.l0.maxWidth(390),ed.l0.minWidth(390)],file:[ed.l0.pl(4),ed.l0.display.inlineFlex,ed.l0.rowWithGap(4),ed.l0.align.center,{verticalAlign:"top"}],section:[ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.justify.spaceBetween],header:[ed.l0.colWithGap(2),ed.l0.flex.shrink(1)],selects:[ed.l0.rowWithGap(4)],staticWidth:[ed.l0.flex.grow(0),ed.l0.flex.shrink(1)],variableWidth:[ed.l0.flex.grow(1),ed.l0.flex.shrink(0),{flexBasis:0}],flexEnd:[ed.l0.align.end],red:[ed.l0.color.redDefault],row:[ed.l0.rowWithGap(8),ed.l0.align.center]});function cg(e){var t=e.filePath,n=e.openSettings,r=(0,eA.Z)(),i=r.dotReplit,o=r.lspnix,a=(0,e3.Z)(t)[0],l=(0,S._)((0,en.useState)(null==a?void 0:a.getServerState()),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(null==a?void 0:a.getServerHealth()),2),d=u[0],f=u[1],p=(0,S._)((0,en.useState)(!1),2),h=p[0],m=p[1];(0,en.useEffect)(function(){if(a)return m(!1),s(a.getServerState()),f(a.getServerHealth()),(0,ry.uf)([a.onServerStateChange(function(e){s(e)}),a.onServerHealthChange(function(e){f(e)})])},[a]);var g=(0,O.Gn)("codeIntelligence").preferences.codeIntelligence,v=(0,en.useCallback)(function(){g&&(o.disable(),o.enable(),m(!0))},[o,g]),y=(0,eh.uN)(),b=(0,N.IK)(y,tj.Q$),w=(0,en.useMemo)(function(){if(!g)return 6;if(null!==a&&d===rd.N.STALLED)return 3;var e=null!=a&&d===rd.N.READY;return h||c===rd.a.INITIALIZING||c===rd.a.INITIALIZED&&!e?0:e?1:c===rd.a.EXITED?2:null!==b?4:5},[a,h,b,d,c,g]),Z=(0,N.IK)(y,eK.i5),x=(0,N.IK)(y,eK.dt),_=(0,S._)((0,en.useState)(Z?{title:Z.name,value:Z.id}:void 0),2),E=_[0],R=_[1],D=(0,en.useRef)(!1),I=(0,en.useMemo)(function(){var e;return null!==(e=null==x?void 0:x.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[x]);return(0,T.BX)(ec.G,{css:cm.menu,children:[(0,T.BX)(tY.h4,{level:1,children:["Language support for ",(0,T.BX)("span",{css:cm.file,children:[(0,T.tZ)(X.Z,{path:t,size:16})," ",(0,T.tZ)("span",{children:(0,er.UO)(t)})]})]}),(0,T.tZ)(ci.R,{}),(0,T.tZ)(cy,{client:a,restart:v,state:w,openSettings:n,filePath:t}),x&&E?(0,T.BX)(T.HY,{children:[(0,T.tZ)(ci.R,{}),(0,T.BX)(ec.G,{css:cm.section,children:[(0,T.tZ)(ec.G,{css:[cm.header,cm.staticWidth],children:(0,T.tZ)(tY.xv,{multiline:!1,children:"Code Formatter"})}),1===x.length?(0,T.tZ)(ec.G,{css:[cm.header,cm.variableWidth,cm.flexEnd],children:(0,T.tZ)(tY.xv,{multiline:!1,children:E.title})}):(0,T.tZ)(ec.G,{css:cm.selects,children:(0,T.tZ)(cf.P,{placement:"top",items:I,selectedItem:(0,k._)((0,C._)({},E),{icon:D.current?(0,T.tZ)(n8.Z,{size:12}):void 0}),disabled:D.current,onChange:function(e){e.value!==E.value&&(D.current=!0,R(e),(function(e,t){return cw.apply(this,arguments)})(i,{path:t,formatterId:e.value}).finally(function(){return D.current=!1}))}})})]})]}):null]})}function cv(e){var t=(0,T.tZ)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,T.tZ)(tY.xv,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,T.tZ)(tY.xv,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,T.BX)(ec.G,{css:cm.row,children:[(0,T.tZ)(tY.xv,{css:cm.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,T.BX)(ec.G,{css:cm.row,children:[(0,T.tZ)(tY.xv,{css:cm.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function cy(e){var t=function(){switch(e.state){case 0:case 1:case 2:case 3:return(0,T.BX)(T.HY,{children:[(0,T.tZ)(ec.G,{css:[cm.header,cm.variableWidth],children:(0,T.tZ)(tY.xv,{multiline:!1,children:e.client?e.client.clientName:"Language Server for ".concat(e.filePath)})}),(0,T.tZ)(ec.G,{css:[cm.header,cm.staticWidth],children:(0,T.tZ)(cv,{restart:e.restart,state:e.state})})]});case 5:case 4:return(0,T.tZ)(ec.G,{css:cm.header,children:(0,T.tZ)(tY.xv,{color:"dimmer",children:"Limited language support because the language server is not available."})});case 6:return(0,T.tZ)(ec.G,{css:cm.header,children:(0,T.BX)(tY.xv,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,T.tZ)("br",{}),(0,T.tZ)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})});default:return null}}();return t?(0,T.BX)(ec.G,{css:cm.section,children:[" ",t," "]}):null}function cb(e){switch(e.state){case 3:case 6:case 4:return(0,T.tZ)(cd.Z,{size:16});case 0:return(0,T.tZ)(n8.Z,{size:16,color:ed.TV.blueStronger});case 1:return(0,T.tZ)(ec.G,{dataCy:"ws-code-intelligence-active",children:(0,T.tZ)(cs.Z,{size:16})});case 2:return(0,T.tZ)(cu.Z,{size:16});case 5:return(0,T.tZ)(cc.Z,{size:16})}}function cw(){return(cw=(0,eT._)(function(e,t){var n,r;return(0,eE.Jh)(this,function(i){return(n=".".concat((0,cp.mD)(t.path)),r="rules/formatter/fileExtensions/".concat(n,"/id"),t.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,ei._)({},"".concat(n),{id:t.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}(u=x||(x={}))[u.Loading=0]="Loading",u[u.Ready=1]="Ready",u[u.Exited=2]="Exited",u[u.Stalled=3]="Stalled",u[u.Partial=4]="Partial",u[u.Missing=5]="Missing",u[u.Disabled=6]="Disabled";var cZ=n(22527);function cx(e){var t,n=e.presentation,r=(0,lv.Z)((t=(0,eT._)(function(e){var t,n,r,i;return(0,eE.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,!(n!==lh.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return t.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=l6();return(0,en.useEffect)(function(){o("compact"===n&&i?i:null)},[o,n,i]),i?(0,T.BX)(T.HY,{children:[(0,T.tZ)(cZ.Z,{color:t6.TV.foregroundDimmer,size:12}),"compact"===n?null:(0,T.tZ)(ec.G,{children:i})]}):null}var cC=n(65559),ck=n(71480),cS=(0,eg.X)({group:[ed.l0.align.center,ed.l0.rowWithGap(4)],row:[ed.l0.align.center,ed.l0.rowWithGap(8)]});function c_(e){var t,n,r,i,o,a,l,c,s=e.filePath,u=e.presentation,d=(n=(t=(0,S._)((0,en.useState)(null),2))[0],r=t[1],i=(0,e3.Z)(s),o=(0,cC.nC)(),a=(0,ee.dr)(),(0,en.useEffect)(function(){var e=function(e){var t,n=o().find(function(e){var t=(0,S._)(e,2);return"problems"===(t[0],t[1]).type});if(n){var r=a(n[0]);r&&"problems"===r.type&&(null===(t=r.updateProblems)||void 0===t||t.call(r,s,e))}},t=function(t){if(t.path===s){var n=[],o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.isOpen(s)&&n.push.apply(n,(0,_._)(d.getDiagnostics(t.path)))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(n),e(n)}},n=[],l=!0,c=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;p.isOpen(s)&&n.push.apply(n,(0,_._)(p.getDiagnostics(s)))}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}r(n),e(n);var h=[],m=!0,g=!1,v=void 0;try{for(var y,b=i[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;h.push(w.onDiagnostics(function(e){return t(e)}))}}catch(e){g=!0,v=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}return function(){h.forEach(function(e){return e()}),o().some(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return"codeEditor"===n.type&&n.data.path===s})||e([])}},[i,s,o,a]),n),f=(0,en.useMemo)(function(){var e;return d?(e=d.reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),d.length>0&&0===Object.keys(e).length&&(e[t7.DiagnosticSeverity.Error]=d.length),e):null},[d]),p=f&&null!==(l=f[t7.DiagnosticSeverity.Error])&&void 0!==l?l:0,h=f&&null!==(c=f[t7.DiagnosticSeverity.Warning])&&void 0!==c?c:0,m=null===f,g=l6();return((0,en.useEffect)(function(){if(m){g(null);return}var e="";0===p&&0===h&&(e="No problems"),p>0&&(e+="".concat((0,nY.Z)("Error",p),": ").concat(p)),h>0&&(e.length>0&&(e+=", "),e+="".concat((0,nY.Z)("Warning",h),": ").concat(h)),g(e)},[g,u,m,h,p]),f)?(0,T.BX)(ec.G,{css:cS.row,children:[(0,T.BX)(ec.G,{css:cS.group,children:[(0,T.tZ)(ck.Z,{severity:t7.DiagnosticSeverity.Error,size:12}),"compact"===u?null:(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(p)})]}),(0,T.BX)(ec.G,{css:cS.group,children:[(0,T.tZ)(ck.Z,{severity:t7.DiagnosticSeverity.Warning,size:12}),"compact"===u?null:(0,T.tZ)(tY.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]})]}):null}function cT(e){if(e.facet(rO.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function cE(e){var t=e.view,n=(0,en.useRef)(null);return(0,en.useEffect)(function(){var e,r=n.current,i=null!==(e=t.plugin(N.pE))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=t.state;r.textContent=cT(a);var l=i.bind({changed:function(e){return(0,eU.aU)(e,"selection",rO.o)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?cT(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[t]),(0,T.tZ)("span",{ref:n,"data-cy":"current-position"})}var cR=n(70546),cD=n(96034);function cI(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,s=e.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=i;if(i=i+u.length+1,0!==u.length){var f=(0,cD.L)(u,t),p=u.trimStart(),h=d+(u.length-p.length);if(0!==f&&d!==h){var m="";if(n===cR.Q.TABS){var g=Math.floor(f/t),v=f%t;m="	".repeat(g)+" ".repeat(v)}else n===cR.Q.SPACES&&(m=" ".repeat(f));m+p!==u&&r.push({from:d,to:h,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return eO.as.of(r,e.length)}var cB=n(91629),cA=n(22893),cP=n(28065),cG=n(15323),cL=n(10055),cN=n(55649),cO=n(40652),cU=(0,eg.X)({surface:[ed.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[ed.l0.p(8),ed.l0.colWithGap(8),ed.l0.maxWidth(410)],file:[ed.l0.pl(4),ed.l0.display.inlineFlex,ed.l0.rowWithGap(4),ed.l0.align.center,{verticalAlign:"top"}],space:[ed.l0.width(2),ed.l0.color.foregroundDimmer,ed.l0.textAlign.center],section:[ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.justify.spaceBetween],header:[ed.l0.colWithGap(2),ed.l0.flex.shrink(1)],selects:[ed.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.justify.spaceBetween],saveButtons:[ed.l0.rowWithGap(4)]});function cM(e){var t,n=e.filePath,r=e.openSettings,i=(0,O.Gn)("indentDetection","indentSize").preferences,o=(0,eh.uN)(),a=(0,N.IK)(o,rO.o),l=null!==a&&!!i.indentDetection&&a,c=(0,N.IK)(o,cB.K_),s=(0,N.IK)(o,cB.E2),u=(0,N.IK)(o,cB.vO),d=null!==(t=(0,N.IK)(o,eO.yy.tabSize))&&void 0!==t?t:i.indentSize,f="	"===(0,N.IK)(o,R.c)?cR.Q.TABS:cR.Q.SPACES,p=(0,S._)((0,en.useState)(!1),2),h=p[0],m=p[1],g=(0,S._)((0,en.useState)(f),2),v=g[0],y=g[1],b=(0,S._)((0,en.useState)(d),2),w=b[0],Z=b[1],x=(0,S._)((0,en.useState)(!1),2),C=x[0],k=x[1],E=(0,S._)((0,en.useState)(!1),2),D=E[0],I=E[1],B=(0,S._)((0,en.useState)(!1),2),A=B[0],P=B[1],G=(0,S._)((0,en.useState)(!1),2),L=G[0],U=G[1];(0,en.useEffect)(function(){C||(y(f),Z(d))},[f,d,C]),(0,en.useEffect)(function(){h||(y(f),Z(d),k(!1))},[h,f,d]),(0,en.useEffect)(function(){v===f&&w===d&&k(!1)},[v,w,f,d]),(0,en.useEffect)(function(){if(D||A||L){var e=setTimeout(function(){I(!1),P(!1),U(!1)},1e3);return function(){return clearTimeout(e)}}},[D,A,L]),l&&h&&m(!1);var M=(0,en.useCallback)(function(){if(o){var e=cI(o.state.doc,d,f);o.dispatch({changes:e,effects:cB.Fm.of(!0)}),P(!0)}},[o,f,d]),F=(0,en.useCallback)(function(){o&&(o.dispatch({effects:cB.Fm.of(!0)}),o.state.field(cB.E2)&&o.dispatch({effects:cB.O4.of({type:void 0,size:void 0})}),U(!0))},[o]),W=(0,en.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=void 0,n=[cB.O4.of({type:v,size:w})];if(e){if(v!==f&&(t=cI(o.state.doc,d,v)),v===cR.Q.SPACES&&w!==d){var r=function(e,t,n,r){if(t===cR.Q.TABS)return eO.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,s=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,p=a;if(a=a+f.length+1,0!==f.length){var h=(0,cD.L)(f,n),m=f.trimStart(),g=p+(f.length-m.length);if(0!==h&&p!==g){var v=Math.floor(h/n),y=h%n,b=i.repeat(v)+" ".repeat(y);b+m!==f&&o.push({from:p,to:g,insert:b})}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return eO.as.of(o,e.length)}(t?t.apply(o.state.doc):o.state.doc,v,d,w);t=t?t.compose(r):r}t&&n.push(cB.Fm.of(!0))}o.dispatch({changes:t,effects:n}),k(!1),I(!0)}},[o,f,d,v,w]),V=(0,en.useCallback)(function(){m(!1),r()},[r]),H=(0,en.useMemo)(function(){if(s){var e=s.size,t=s.type===cR.Q.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[s,u]);return(0,T.BX)(ec.G,{css:cU.menu,children:[(0,T.BX)(tY.h4,{level:1,children:["Indentation for",(0,T.BX)("span",{css:cU.file,children:[(0,T.tZ)(X.Z,{path:n,size:16})," ",(0,T.tZ)("span",{children:(0,er.UO)(n)})]})]}),c?(0,T.tZ)(cA.E,{colorway:"warning",icon:(0,T.tZ)(i0.Z,{}),text:"This file type requires that ".concat(c===cR.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,T.tZ)(ci.R,{}),(0,T.BX)(ec.G,{css:cU.section,children:[(0,T.BX)(ec.G,{css:cU.header,children:[(0,T.tZ)(tY.xv,{multiline:!1,children:"Indentation unit"}),(0,T.tZ)(tY.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,T.BX)(ec.G,{css:cU.selects,children:[(0,T.tZ)(cO.qm,{css:cU.sizeInput,size:w,onChange:function(e){e!==w&&(Z(e),k(!0))}}),(0,T.tZ)(cf.P,{items:(0,_._)(cO.Ly),selectedItem:cO.Ly.find(function(e){return e.value===(v===cR.Q.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?cR.Q.SPACES:cR.Q.TABS;t!==v&&(y(t),k(!0))}})]})]}),(0,T.tZ)(ci.R,{}),i.indentDetection?(0,T.BX)(T.HY,{children:[(0,T.BX)(ec.G,{css:cU.section,children:[(0,T.BX)(ec.G,{css:cU.header,children:[(0,T.tZ)(tY.xv,{multiline:!1,children:"Detected indentation unit"}),(0,T.tZ)(tY.xv,{variant:"small",color:"dimmer",children:H})]}),L?(0,T.tZ)(iH.zx,{colorway:"positive",text:"Detected!",iconLeft:(0,T.tZ)(o7.Z,{}),onClick:F}):(0,T.tZ)(iH.zx,{text:s?"Re-detect":"Detect",iconLeft:(0,T.tZ)(cG.Z,{}),disabled:!u&&!s,onClick:F})]}),(0,T.tZ)(ci.R,{})]}):null,(0,T.BX)(ec.G,{css:cU.buttonsGroup,children:[(0,T.tZ)(iH.zx,{text:"Global settings",iconLeft:(0,T.tZ)(cL.Z,{}),onClick:V}),(0,T.tZ)(ec.G,{css:cU.saveButtons,children:D||A?(0,T.tZ)(T.HY,{children:D?(0,T.tZ)(iH.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,T.tZ)(o7.Z,{}),onClick:function(){return W(!1)}}):(0,T.tZ)(iH.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,T.tZ)(o7.Z,{}),onClick:M})}):(0,T.tZ)(T.HY,{children:C?(0,T.BX)(T.HY,{children:[(0,T.tZ)(iH.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,T.tZ)(cN.Z,{}),onClick:function(){return W(!0)}}),(0,T.tZ)(iH.zx,{text:"Save",iconLeft:(0,T.tZ)(o7.Z,{}),onClick:function(){return W(!1)}})]}):(0,T.tZ)(iH.zx,{text:"Re-indent file",iconLeft:(0,T.tZ)(cN.Z,{}),onClick:M})})})]})]})}function cX(e){var t,n=e.presentation,r=(0,O.Gn)("indentDetection","indentSize").preferences,i=(0,eh.uN)(),o=(0,N.IK)(i,rO.o),a=null!==o&&!!r.indentDetection&&o,l=null!==(t=(0,N.IK)(i,eO.yy.tabSize))&&void 0!==t?t:r.indentSize,c="	"===(0,N.IK)(i,R.c)?cR.Q.TABS:cR.Q.SPACES,s=l6();return(0,en.useEffect)(function(){s("File Indentation")},[s]),(0,T.BX)(T.HY,{children:[(0,T.tZ)(cW,{type:c,loading:a}),"compact"===n?null:(0,T.tZ)(cV,{type:c,size:l,loading:a})]})}function cF(e){var t=e.size,n=void 0===t?16:t,r=(0,no._)(e,["size"]);return(0,T.tZ)(cP.ZP,(0,k._)((0,C._)({size:n},r),{children:(0,T.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function cW(e){var t=e.type;return e.loading?(0,T.tZ)(n8.Z,{size:12}):t===cR.Q.SPACES?(0,T.tZ)(cF,{color:ed.TV.foregroundDimmer,size:12}):(0,T.tZ)(cN.Z,{color:ed.TV.foregroundDimmer,size:12})}function cV(e){var t=e.type,n=e.size;if(e.loading)return(0,T.tZ)(tY.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===cR.Q.SPACES?"Spaces":"Tabs";return(0,T.BX)(tY.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}function cH(e){var t=e.presentation,n=l6();return(0,en.useEffect)(function(){n("compact"===t?"History":null)},[n,t]),(0,T.BX)(T.HY,{children:["compact"===t?null:(0,T.tZ)(ec.G,{children:"History"}),(0,T.tZ)(q.Z,{size:12})]})}var cz=n(80856),cj=(0,eg.X)({text:[{textTransform:"capitalize"}]});function cq(e){var t=e.presentation,r=(0,S._)((0,en.useState)(null),2),i=r[0],o=r[1],a=(0,en.useRef)(null),l=(0,en.useRef)(null),c=l6(),s=(0,eh.uN)(),u=(0,O.Gn)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",f=(0,en.useCallback)(function(e){var n=null!=e?e:"";if(s&&i&&void 0===e){var r,o,u=i.getCM(s);n=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}c("compact"===t?n:null),l.current=n,a.current&&a.current.innerText!==n&&(a.current.innerText=n||"")},[s,i,c,t]);return(0,en.useEffect)(function(){d&&!i&&n.e(9316).then(n.bind(n,4302)).then(function(e){o(e),f()})},[d,i,f]),(0,en.useEffect)(function(){if(s&&d&&i){var e,t=a.current,n=null!==(e=s.plugin(N.pE))&&void 0!==e?e:null;if(t&&n&&!n.destroyed)return n.bind({changed:function(){var e,t,n=i.getCM(s),r=null!==(t=null==n?void 0:null===(e=n.state.vim)||void 0===e?void 0:e.mode)&&void 0!==t?t:"";return l.current!==r},callback:function(){f()}})}},[s,d,i,f]),d?(0,T.BX)(T.HY,{children:[(0,T.tZ)(cz.Z,{size:12}),"compact"===t?null:(0,T.tZ)("span",{css:cj.text,ref:a})]}):null}var cJ=n(63740);function cY(e){var t=e.presentation,n=e.toggled?"Diffing":"Diff",r=l6();return(0,en.useEffect)(function(){r("compact"===t?n:null)},[r,t,n]),(0,T.BX)(T.HY,{children:[(0,T.tZ)(cJ.Z,{color:t6.TV.foregroundDimmer,size:12}),"compact"===t?null:(0,T.tZ)(ec.G,{children:n})]})}var c$=(0,eg.X)({root:[{borderTop:"1px solid ".concat(ed.TV.backgroundHigher)},{height:"29px",contain:"strict"}]}),cK=(0,en.memo)(function(e){var t,n,r,i,o,a,l,c,s,u,d,p,h,m,g,v,y,b,w,Z,x,C,k,S=e.filePath,_=e.performPaneOperation,E=(0,en.useCallback)(function(e){return _({operation:"open",pane:e,secondary:!0})},[_]),R=(0,en.useCallback)(function(){return E({type:"preferences"})},[E]),D=(t=(0,cr.ZP)(),(0,cr.G_)(t)?{item:(0,T.tZ)(co,{}),popover:(0,T.tZ)(cl,{activeFile:S}),key:"ai"}:null),I=(r=(n={filePath:S,openSettings:R}).filePath,i=n.openSettings,{item:(0,T.tZ)(ch,{filePath:r,openSettings:i}),popover:(0,T.tZ)(cg,{openSettings:i,filePath:r}),key:"codeIntelligence"}),B=(o=(0,tU.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,eh.uN)(),o?{item:(0,T.tZ)(c_,{filePath:S}),onClick:a?function(){return(0,tF.C)(a)}:void 0,key:"lspDiagnostics"}:null),A=(0,tU.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,T.tZ)(cx,{}),onClick:function(){return E({type:"git"})},key:"currentBranch"}:null,P=(l=(0,tU.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(c=(0,eh.uN)(),s=(0,N.IK)(c,tN),u=!c||!s||null===s.head,d=(null==s?void 0:s.mode)===f.INLINE_DIFF,p={toggle:(0,en.useCallback)(function(){if(!c)return null;c.dispatch({effects:tL.of(d?f.GUTTER_DIFF:f.INLINE_DIFF)})},[c,d]),toggled:d,disabled:u}).toggle,m=p.toggled,g=p.disabled,l&&!g?{item:(0,T.tZ)(cY,{toggled:m}),onClick:h,key:"toggleDiff"}:null),G={item:(0,T.tZ)(cq,{}),key:"vimMode"},L=(v=(0,eh.uN)())?{item:(0,T.tZ)(cE,{view:v}),onClick:function(){return(0,oT.zo)(v)},key:"currentPosition"}:null,O=(b=(y={filePath:S,performPaneOperation:_}).filePath,w=y.performPaneOperation,Z=(0,en.useCallback)(function(){w({operation:"replace",pane:{type:"history",data:{path:b}}})},[w,b]),{item:(0,T.tZ)(cH,{}),key:"history",onClick:Z}),U=(C=(x={filePath:S,openSettings:R}).filePath,k=x.openSettings,{item:(0,T.tZ)(cX,{}),popover:(0,T.tZ)(cM,{filePath:C,openSettings:k}),key:"indentation"});return(0,T.tZ)(ce,{css:c$.root,left:[D,I,B,A,P,G],right:[L,U,O]})}),cQ=n(85995),c0=n(54236),c1=(0,eg.X)({root:[ed.l0.backgroundColor.outlineDimmer,ed.l0.position.relative],inner:[ed.l0.rowWithGap(8),ed.l0.align.center,ed.l0.p(8),ed.l0.zIndex(11)]});function c2(e){return(0,T.tZ)(ec.G,{css:c1.root,children:(0,T.BX)(ec.G,{css:c1.inner,children:[(0,T.tZ)(tY.xv,{children:"Files are read-only in Agent Mode."}),e.onExitAgentMode?(0,T.tZ)(iH.zx,{variant:"underlined",text:"Exit Agent Mode",onClick:e.onExitAgentMode}):null]})})}var c3=n(22192),c4=n(95281),c8=n(43540),c6=n(43977),c5=(0,eg.X)({root:[ed.l0.position.absolute,ed.l0.bottom(37),ed.l0.right(8),ed.l0.zIndex(4)],body:[ed.l0.flex.column,ed.l0.gap(8)]}),c7=function(e){var t=e.performPaneOperation,n=(0,c8.Z)("integrations-pane","integrations-toast"),r=n.shouldDisplay,i=n.dismiss,o=n.register,a=(0,S._)((0,en.useState)(r),2),l=a[0],c=a[1];return((0,en.useEffect)(function(){o()},[o]),(0,en.useEffect)(function(){r&&(c(!0),(0,t8.j)(t8.U3.INTEGRATIONS_PANE_USED,{action:"fileEditorNudgeShown"}))},[r]),l)?(0,T.tZ)(ec.G,{css:c5.root,children:(0,T.tZ)(cA.E,{colorway:"primary",text:(0,T.BX)(ec.G,{css:c5.body,children:[(0,T.tZ)("div",{children:"Looking to add more capabilities to your Repl?"}),(0,T.tZ)("div",{children:(0,T.tZ)(iH.zx,{size:"small",iconLeft:(0,T.tZ)(c6.Z,{}),colorway:"primary",onClick:function(){i(),(0,t8.j)(t8.U3.TOOL_OPENED,{source:"fileEditorNudge",tool:"integrations"}),t({operation:"open",pane:{type:"integrations"}}),c(!1)},text:"Explore Integrations"})})]}),closable:!0,closeAction:function(){c(!1),i()}})}):null},c9=(0,c3.$)(["border","borderRadius"]),se=c9.cssVars,st=c9.styleTokens,sn=(0,eg.X)({root:[ed.l0.position.relative,ed.l0.flex.column,ed.l0.overflowY("hidden"),ed.l0.width("100%"),ed.l0.height("100%"),{border:st.border,borderRadius:st.borderRadius}]});function sr(e){var t=(0,en.useRef)(null),n=(0,ek.Do)(eC.Q.id,eC.y.Editor),r=(0,el.Z)(),i=(0,eS.yx)(),o=i.isAiCalloutVisible,a=i.handleDismiss,l=(0,eh.uN)(),c=(0,S._)((0,en.useState)(!1),2),s=c[0],u=c[1],d=(0,tU.P5)({controlName:"flag-integrations-pane-experiment"}),f=(0,en.useCallback)(function(){u(!0)},[]),p=(0,c0.$g)(),h=(0,c0.F)(),m=(0,c0.lr)();(0,c4.j)(t,h,function(e){var t;return t={},(0,ei._)(t,se.border,e?"2px solid ".concat(ed.TV.outlineDimmer):"unset"),(0,ei._)(t,se.borderRadius,e?"0px 0px 4px 4px":"inherit"),t});var g=r||p;return(0,T.BX)(ec.G,{innerRef:(0,au.l)(n,t),css:sn.root,children:[o?(0,T.tZ)(eS.ZP,{codeEditorView:l,filePath:e.filePath,onDismiss:a,performPaneOperation:e.performPaneOperation}):null,p?(0,T.tZ)(c2,{onExitAgentMode:m}):null,(0,T.tZ)(e_.$,{performPaneOperation:e.performPaneOperation,path:e.filePath}),(0,T.tZ)("div",{css:lf.ev,children:(0,T.tZ)(lM,{filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:p,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation,handleOpenPurchaseModal:f})}),(0,T.tZ)("div",{style:{display:g?"none":"block"},children:(0,T.tZ)(cK,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),d?(0,T.tZ)(c7,{performPaneOperation:e.performPaneOperation}):null,e.hideMobileKeyboardToolbar?null:(0,T.tZ)(ex,{filePath:e.filePath,isLoading:!1}),(0,T.tZ)(cQ.Z,{isOpen:s,onClose:function(){return u(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_code_repair",surface:"ghostwriter_power_up_dialog"}}})]})}var si=n(6843),so=n(99319),sa=(0,eg.X)({root:[ed.l0.coverContainer,ed.l0.center,ed.l0.p(16)]});function sl(e){var t=e.message;return(0,T.tZ)(ec.G,{css:sa.root,children:(0,T.tZ)(ec.G,{children:(0,T.tZ)(cA.E,{icon:(0,T.tZ)(i0.Z,{}),colorway:"orange",text:t})})})}var sc=n(49719),ss=I.Dy.Object({type:I.Dy.Literal("codeEditor"),data:I.Dy.Object({path:I.Dy.Union([I.Dy.String({minLength:1}),I.Dy.Null()]),line:I.Dy.Optional(I.Dy.Number()),col:I.Dy.Optional(I.Dy.Number())})}),su={Content:function(e){var t=e.pane,n=e.options;return(0,T.tZ)(sf,(0,k._)((0,C._)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,T.tZ)(X.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,er.UO)(e.data.path):"No file open"},category:E.hc.WorkspaceFeatures,decode:function(e){return B.B4.Decode(ss,e)}};function sd(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.performPaneOperation,d=(0,eh.uN)(),f=(0,U.Z)(function(){return d?{match:si.pl,data:{type:"action",label:"Toggle all folds",icon:(0,T.tZ)(V.Z,{}),run:function(){0===(0,R.q2)(d.state).size?(0,R.g_)(d):(0,R.jZ)(d)}}}:null},[d]),p=(0,N.IK)(d,A.W);(0,en.useEffect)(function(){p&&u({operation:"commit"})},[p,u]);var h=(0,so.Mp)({path:s,performPaneOperation:u}),m=(t=(0,eh.uN)(),n=(0,N.IK)(t,P.SD),(0,U.Z)(function(){if(t&&n)return{match:si.pl,data:{label:"Format "+(0,er.UO)(s),icon:(0,T.tZ)(j.Z,{}),type:"action",run:function(){(0,P.z1)(t)}}}},[n,s,t])),g=(r=(0,M.T3)(),o=(i=(0,O.Gn)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,U.Z)(function(){return r?null:{match:si.pl,data:{label:"Minimap",icon:(0,T.tZ)(W.Z,{}),type:"context"},commands:function(e){var t=e.active,n=e.searchQuery;return t||n?[{value:"none",label:"Hide",icon:(0,T.tZ)(z.Z,{})},{value:"characters",label:"Characters",icon:(0,T.tZ)(J.Z,{})},{value:"blocks",label:"Blocks",icon:(0,T.tZ)(Y.Z,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:si.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),v=(l=function(){return u({operation:"replace",pane:{type:"history",data:{path:s}}})},(0,U.Z)(function(){return{match:si.pl,data:{label:"History",icon:(0,T.tZ)(q.Z,{}),type:"action",run:function(){l()}}}},[l])),y=(0,U.Z)(function(){var e=void 0;if((0,er.gK)(s)&&(e={type:"markdown",data:{path:s}}),(0,er.B4)(s)&&(e={type:"media",data:{path:s}}),e)return{match:si.pl,data:{label:"Preview",icon:(0,T.tZ)(H.Z,{}),type:"action",run:function(){e&&u({operation:"replace",pane:e})}}}},[s,u]),b=(c=(0,cC.p9)(),{match:si.pl,data:{label:"Reveal in file tree",icon:(0,T.tZ)(F.Z,{}),type:"action",run:function(){c(s)}}});return(0,ee.L5)(function(){if(d){var e=[];return m&&e.push(m),y&&e.push(y),e.push(v),g&&e.push(g),f&&e.push(f),e.push(b),h&&e.push.apply(e,(0,_._)(h)),{type:"codeEditor",commands:e,getEditorView:function(){return d},getCurrentSelectionText:function(){if(!d.state.selection.main.empty)return d.state.sliceDoc(d.state.selection.main.from,d.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){(0,G.el)({view:d,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){(0,G.iG)(d)},fetchProblems:function(){return(0,D.j)(d),(0,L.ge)(d.state)}}}},[d,m,y,v,g,f,b,h]),(0,ee.Wk)(function(){return d},[d]),null}function sf(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.line,d=e.col,f=e.isActive,p=e.isHidden,h=e.performPaneOperation,m=(0,S._)((0,en.useState)(!p),2),g=m[0],v=m[1];g||p||v(!0);var y=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],b=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],w=(0,$.useRouter)(),Z=!(K().query.embed||K().query.lite)&&!(0,M.Gv)(w)&&f,x=(n=(t={path:s,replaceEditorPath:(0,en.useCallback)(function(e){h({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[h]),getFileRenameInProgress:(0,Q.p8)()}).path,r=t.replaceEditorPath,i=t.getFileRenameInProgress,o=(0,eA.Z)().fs,l=(a=(0,S._)((0,en.useState)(null),2))[0],c=a[1],(0,en.useEffect)(function(){if(n){if(n.startsWith("/"))return c('Cannot open "'.concat(n,'"')),function(){c(null)};var e=o.watchPathStat(n,{onNewStat:function(e){var t=i();if(!e.exists){if((null==t?void 0:t.from)===n){r(t.to);return}c('No file found at "'.concat(n,'", it may have been deleted'));return}if(e.type===iB.Tv.Directory){c('"'.concat(n,'" is a directory'));return}c(null)},onError:function(){c('Unknown error occured while read "'.concat(n,'", try re-opening the editor'))}});return function(){e(),c(null)}}},[i,o,n,r]),l),C=(0,U.Z)(function(){return{line:u,col:d}},[u,d]),k=(0,U.Z)(function(){return function(){h({operation:"replace",pane:{type:"codeEditor",data:{path:s}}})}},[h,s]);return s?x?(0,T.tZ)(sl,{message:x}):p&&!g?null:(0,T.tZ)(eh.Cl.Provider,{value:y,children:(0,T.BX)(sc.ox.Provider,{value:b,children:[(0,T.tZ)(sr,{filePath:s,autoFocus:Z,isHidden:null!=p&&p,deeplink:C,onDeeplinkUpdated:k,hideMobileKeyboardToolbar:!0,performPaneOperation:h},s),(0,T.tZ)(sd,{path:s,isActive:f,performPaneOperation:h})]})}):null}},25138:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("commands"),data:r.Dy.Object({autoFocus:r.Dy.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},70823:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("config"),flow:r.Dy.Union([r.Dy.Literal("githubImport"),r.Dy.Literal("incompleteConfig")])}),a=function(e){return i.B4.Decode(o,e)}},88433:function(e,t,n){n.d(t,{R:function(){return ua}});var r,i,o,a,l,c,s,u,d,f,p,h,m,g=n(66626),v=n(3796),y=n(12394),b=n(75271),w=n(27598),Z=n(54821),x=n(27387),C=n(63257),k=n(96583),S=n(42516),_=n(41733),T=n(62279),E=n(99059),R=n(57185),D=n(80703),I=n(93245),B=n(36809),A=n(63163),P=n(1048),G=A.nC.min(600),L=(0,B.X)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[A.l0.display.none,(0,S._)({},G,A.l0.display.flex)],hiddenOnDesktop:[A.l0.display.flex,(0,S._)({},G,A.l0.display.none)]});function N(e){var t=e.children,n=e.render,r=e.timeout,i=void 0===r?300:r,o=e.initialHeight,a=(0,b.useRef)(null),l=(0,b.useRef)(null),c=O(l),s=c>0?c:o,u={transition:i+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},d={entering:{opacity:1,height:s},entered:{transitionProperty:"opacity",opacity:1,height:s,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,v.tZ)(P.ZP,{nodeRef:a,timeout:i,in:n,children:function(e){return(0,v.tZ)(I.G,{innerRef:a,style:(0,_._)({},u,d[e]),children:(0,v.tZ)(I.G,{innerRef:l,children:t})})}})}function O(e){var t=(0,g._)((0,b.useState)(0),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){if(e.current){var t=new ResizeObserver(function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.borderBoxSize[0].blockSize;r(l)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}});return t.observe(e.current),function(){return t.disconnect()}}},[n,e]),n}var U=n(14118),M=n(42965),X=n(3569),F=n(48827),W=n(21602),V=n(79904),H=n(39808),z=n(86466),j=n(35820),q=n(58532),J=n(22893),Y=n(24374),$=n(14548),K=n(24766),Q=n(99743),ee=n(4733),et=n(76711),en=n(19621),er=n(27060),ei=n(36259),eo=n(54300),ea=n(22192),el=n(5297),ec=n(25949),es=n(85983),eu=n(66791),ed=n(77631),ef=n(49135),ep=n(30509),eh=n(98924),em=[A.l0.width("100%"),A.l0.p(8)],eg=[A.l0.py(32),A.l0.minHeight("100%"),A.l0.center],ev=function(e){var t=e.children,n=e.centered,r=e.maxWidth,i=(0,eh._)(e,["children","centered","maxWidth"]),o=[em,n&&eg,r&&L.maxWidth].filter(Boolean);return(0,v.tZ)(I.G,(0,ep._)((0,_._)({},i),{css:o,children:t}))},ey=n(96394),eb=n(96949),ew=function(e){var t=e.context;(0,eb.j)(eb.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},eZ=function(e,t){(0,eb.j)(eb.U3.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},ex=n(8278),eC=n(21262),ek=n(71440),eS=n(9122);function e_(){var e=(0,eC._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return e_=function(){return e},e}function eT(){var e=(0,eC._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eT=function(){return e},e}var eE={},eR=(0,ek.Ps)(e_()),eD=(0,ek.Ps)(eT(),eR);function eI(){var e=(0,eC._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eI=function(){return e},e}var eB={},eA=(0,ek.Ps)(eI(),eR);function eP(e){var t=(0,_._)({},eB,e);return eS.a(eA,t)}var eG=n(44935),eL=n(22419),eN=n(39031),eO=(0,B.X)({self:[A.l0.colWithGap(8)],selfGrow:[A.l0.colWithGap(8),A.l0.flex.grow(1)],label:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.maxWidth("100%")],labelText:[A.l0.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[A.l0.flex.growAndShrink(1),A.l0.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[A.l0.display.flex,A.l0.flex.row,A.l0.justify.spaceBetween,A.l0.align.center],actions:[A.l0.rowWithGap(4)],labelLoading:[A.l0.rowWithGap(8),A.l0.align.center,j.p.foregroundPulse(),A.l0.width(200),A.l0.borderRadius(8)],inputLoading:[j.p.foregroundPulse(),A.l0.borderRadius(8)]}),eU=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.detail,a=e.warning,l=e.actions,c=e.children,s=e.grow;return(0,v.BX)(I.G,{css:void 0!==s&&s?eO.selfGrow:eO.self,children:[(0,v.BX)(I.G,{css:eO.header,children:[(0,v.BX)(I.G,{tag:"label",htmlFor:t,css:eO.label,children:[(0,v.tZ)(K.xv,{color:"dimmer",multiline:!1,children:n}),(0,v.tZ)(eL.u,{tooltip:r,children:(0,v.tZ)(eN.Z,{color:A.TV.foregroundDimmest})}),void 0!==i&&i?(0,v.tZ)(K.xv,{css:eO.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,v.tZ)(K.xv,{css:eO.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,a?(0,v.tZ)(K.xv,{css:eO.labelTextWarning,variant:"small",multiline:!1,children:a}):null]}),l?(0,v.tZ)(I.G,{css:eO.actions,children:l}):null]}),c]})},eM=function(){return(0,v.BX)(I.G,{css:eO.self,children:[(0,v.tZ)(I.G,{css:eO.header,children:(0,v.tZ)(I.G,{css:eO.labelLoading,children:(0,v.tZ)(K.xv,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,v.tZ)(I.G,{css:eO.inputLoading,children:(0,v.tZ)(eG.II,{disabled:!0})})]})},eX=n(9602),eF=n(48155),eW=n(10578),eV=[A.l0.p(8),A.l0.center],eH=function(){return(0,v.tZ)(I.G,{css:eV,children:(0,v.tZ)(eW.Z,{size:24})})},ez=(0,B.X)({error:[A.l0.flex.grow(0),A.l0.mt(0)]}),ej=function(e){var t=e.text,n=(0,eh._)(e,["text"]);return(0,v.tZ)(ev,(0,ep._)((0,_._)({css:ez.error},n),{children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:t})}))},eq=(0,B.X)({back:[A.l0.flex.row,A.l0.align.center]}),eJ=function(e){var t=e.onBack;return(0,v.tZ)(I.G,{css:eq.back,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,v.tZ)(eF.Z,{})})})},eY=n(39537);function e$(){var e=(0,eC._)(["\n  query ReservedVMMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: gce }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return e$=function(){return e},e}var eK={},eQ=(0,ek.Ps)(e$(),eY.bN),e0=n(96214),e1=n(30231),e2=n(68140),e3=n(97420),e4=(0,B.X)({header:[A.l0.colWithGap(4),A.l0.mb(16)],costWrapper:[A.l0.rowWithGap(2),A.l0.align.center,A.l0.flex.shrink(1)],cost:[A.l0.rowWithGap(4),A.l0.align.baseline],selectWrapper:A.l0.rowWithGap(12),selectInner:[A.l0.flex.growAndShrink(1)],select:[A.l0.border({color:e3.TV.outlineDefault}),{flex:"1 1 auto"}]}),e8=function(e){var t,n=e.initialMachineConfiguration,r=e.isTeamRepl,i=e.onChange,o=e.onConfirm,a=e.onError,l=e.onBack,c=(0,g._)((0,b.useState)(n?(0,ep._)((0,_._)({},n),{maxInstances:1}):void 0),2),s=c[0],u=c[1],d=(0,g._)((0,ed.gr)(null==s?void 0:s.configurationSlug),2),f=d[0],p=d[1],h=(0,g._)((0,b.useState)(!1),2),m=h[0],y=h[1],w=(t=(0,_._)({},eK,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}}),eS.a(eQ,t)),Z=w.data,x=w.loading,C=(null==Z?void 0:Z.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?Z.hostingMachineConfigurations.results:null;(0,b.useEffect)(function(){ew({context:ex.k.AutoscaleMachineConfiguration})},[]),(0,b.useEffect)(function(){if(C&&!s){var e=r?C.find(function(e){return"e2-micro"===e.slug}):C.find(function(e){return"e2-small"===e.slug});if(!e){a("An error occurred trying to validate default machine configuration");return}var t={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};u(t),"function"==typeof i&&i(t)}},[C,s,r,i,a]);var k=C&&(null==C?void 0:C.length)>0,S=x||r||m||!k;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eJ,{onBack:l})}),(0,v.BX)(ev,{maxWidth:!0,children:[(0,v.BX)(I.G,{css:e4.header,children:[(0,v.tZ)(K.xv,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,v.tZ)(eU,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:s?(0,v.BX)(v.HY,{children:[(0,v.tZ)(I.G,{css:e4.selectWrapper,children:r?(0,v.tZ)(eG.II,{value:s.configurationLabel,disabled:!0}):(0,v.BX)(v.HY,{children:[(0,v.tZ)(I.G,{css:e4.selectInner,children:(0,v.tZ)(e0.P,{css:e4.select,initialSelectedItem:{id:s.configurationId,title:s.configurationLabel},items:k?Object.values(C).map(function(e){var t=e.id;return{title:e.label,id:t}}):[],onChange:function(e){var t=e.id,n=null==C?void 0:C.find(function(e){return e.id===t});if(!n){a("An error occurred trying to validate selected machine configuration");return}var r={configurationId:n.id,configurationLabel:n.label,configurationSlug:n.slug,maxInstances:1};u(r),"function"==typeof i&&i(r)},disabled:S})}),(0,v.tZ)(I.G,{css:e4.costWrapper,children:(0,v.BX)(I.G,{css:e4.cost,children:[(0,v.BX)(K.xv,{variant:"subheadDefault",multiline:!1,children:["$",p]}),(0,v.tZ)(K.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,v.BX)(K.xv,{color:"dimmer",variant:"small",multiline:!1,children:["($",f,"/hour)"]})]})})]})}),"function"==typeof o?(0,v.BX)(I.G,{css:[A.l0.colWithGap(8),A.l0.pt(8)],children:[(0,v.tZ)(V.zx,{colorway:"primary",text:"Approve and update",iconRight:(0,v.tZ)(e1.Z,{}),onClick:function(){if(!s){a("An error occurred trying to validate selected machine configuration");return}y(!0),o(s)},loading:x,disabled:S}),(0,v.BX)(K.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:e2.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,v.tZ)(I.G,{css:[j.p.foregroundPulse(),A.l0.borderRadius(8)],children:(0,v.tZ)(eG.II,{disabled:!0})})})]})]})},e6=n(78272),e5=n(99595),e7=n(82303);function e9(){var e=(0,eC._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return e9=function(){return e},e}function te(){var e=(0,eC._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return te=function(){return e},e}var tt={},tn=(0,ek.Ps)(e9()),tr=(0,ek.Ps)(te(),tn);function ti(e){var t,n=e.disabled,r=e.onSuccessfulExecution,i=(0,w.hn)(),o=(0,w.$y)(),a=(0,w.kW)(),l=(0,e5.Z)().showError,c=(0,g._)((0,b.useState)(),2),s=c[0],u=c[1],d=function(e){u(e.message),l(e.message)},f=(0,g._)((t=(0,_._)({},tt,{onError:d,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==r||r(t.execution);return}d(Error("An error occurred while executing the scheduled job"))}}),e7.D(tr,t)),2),p=f[0],h=f[1].loading,m=!!(!i||!o||h||s||void 0!==n&&n),y=(null==o?void 0:o.status)===es.Fe.Success,x=a===Z.z.Ready,C=!m&&x&&y,k=x?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,D.Sj)(a));return(0,v.tZ)(eL.u,{tooltip:k,isDisabled:C,children:(0,v.tZ)(V.zx,{text:"Run now",iconLeft:h?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(e6.Z,{}),size:"small",disabled:m||!C,onClick:function(){i&&!m&&p({variables:{deploymentId:i}})}})})}var to=(l={},(0,S._)(l,es.r4.Gce,"Reserved VM"),(0,S._)(l,es.r4.CloudRun,"Autoscale"),(0,S._)(l,es.r4.Static,"Static"),(0,S._)(l,es.r4.Cron,"Scheduled"),l),ta=n(9834),tl=n.n(ta),tc=n(47363),ts=n(26394),tu=n(79035),td=n(20260),tf=n(17202),tp=n(95173),th=(0,B.X)({root:[A.l0.rowWithGap(0),A.l0.flex.shrink(1)],name:[A.l0.color.foregroundDefault,A.l0.fontWeight.medium],item:[A.l0.rowWithGap(8),A.l0.pr(4),A.l0.align.center,A.l0.flex.growAndShrink(1)],itemMainText:[A.l0.flex.growAndShrink(1),A.l0.align.center],itemRight:[A.l0.textAlign.right],itemContent:[A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1),A.l0.align.center],disabledLog:{cursor:"not-allowed"}}),tm=function(e){var t=e.onClick,n=(0,w.kW)(),r=(0,w.$y)();if(n===Z.z.Loading||!r)return(0,v.tZ)(eW.Z,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,v.tZ)(I.G,{css:th.root,children:(0,v.BX)(I.G,{css:th.item,children:[(0,v.tZ)(ts.c,{status:i}),(0,v.tZ)(I.G,{css:th.itemMainText,children:(0,v.BX)(K.xv,{multiline:!1,children:[(0,v.tZ)("span",{css:th.name,children:r.user.displayName+" "}),(0,tu.B)(i)+" ",!function(e){switch(e){case es.Fe.Building:case es.Fe.Promoting:case es.Fe.Running:case es.Fe.Pending:case es.Fe.Failed:case es.Fe.Success:return!0;case es.Fe.Resuming:case es.Fe.Suspending:case es.Fe.Suspended:case es.Fe.UpdatingTier:return!1}}(i)?null:(0,v.tZ)(eL.u,{tooltip:(0,tp.Z)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,v.tZ)("span",(0,ep._)((0,_._)({},e),{ref:t,children:(0,tf.Z)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,v.tZ)(I.G,{css:th.itemRight,children:(0,v.tZ)(eX.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:a,css:a&&th.disabledLog,children:(0,v.tZ)(td.Z,{})})})]})})},tg=n(2446),tv=function(e){var t=e.currentBuild,n=(0,U.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:ed.q7}),r=(0,g._)((0,b.useState)([]),2),i=r[0],o=r[1],a=n!==ed.q7;return(0,b.useEffect)(function(){var e=(null===(i=t.repl.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,r=[];switch(t.provider){case es.r4.Goval:r.push({href:"https://".concat(e,".id.repl.co"),private:!0});break;case es.r4.Gce:case es.r4.CloudRun:case es.r4.Static:var i,a,l,c,s,u,d=(null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.__typename)==="HostingDeployment"?null===(l=t.repl.hostingDeployment)||void 0===l?void 0:l.replitAppSubdomain:void 0;!d&&(null===(c=t.repl.owner)||void 0===c?void 0:c.username)&&(d="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null===(u=window)||void 0===u?void 0:null===(s=u.location)||void 0===s?void 0:s.hostname)!=="replit.com"?".staging":"",".").concat(n),private:!1})}if(t.repl.domains){var f=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),p=!0,h=!1,m=void 0;try{for(var g,v=f[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;y&&r.push({href:"https://".concat(y.domain),private:!1,state:"verified"!==y.state?y.state:void 0})}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}}o(r)},[t,n]),(0,v.BX)(I.G,{css:[A.l0.colWithGap(2),A.l0.flex.growAndShrink(1)],children:[a?(0,v.tZ)(J.E,{colorway:"warning",text:"The ".concat(ed.q7," domain is currently unavailable, please use the ").concat(n," URL below.")}):null,i.map(function(e,t){return(0,v.BX)(I.G,{css:[A.l0.rowWithGap(8),A.l0.align.center],children:[(0,v.tZ)(K.xv,{css:[A.l0.flex.shrink(1)],multiline:!1,children:(0,v.tZ)("a",{href:e.href,target:"_blank",css:[A.l0.color.foregroundDefault],children:e.href})}),e.private?(0,v.tZ)(tg.Z,{color:A.TV.foregroundDefault}):null,(0,v.tZ)("a",{href:e.href,target:"_blank",css:[A.l0.display.flex,A.l0.align.center],children:(0,v.tZ)(er.Z,{color:A.TV.foregroundDefault})}),e.state?(0,v.BX)(K.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))})]})},ty=(0,T.F4)("\n    50% {\n      background-color: ".concat(A.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(A.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),tb=(0,B.X)({deploymentInfo:[A.l0.colWithGap(8),A.l0.p(16),A.l0.borderRadius(),{outline:"1px solid transparent"}]}),tw=(0,B.X)({textButton:[A.l0.cursor.pointer,A.l0.reset.button,A.l0.color.accentPrimaryStronger,A.l0.focusRing,A.l0.hover(A.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:A.l0.hover(A.l0.color.accentPrimaryStrongest),labeledSection:[A.l0.flex.growAndShrink(1),(0,S._)({},A.nC.min(400),[A.l0.flex.row,A.l0.align.baseline])],labeledSectionFullWidth:[A.l0.flex.growAndShrink(1),(0,S._)({},A.nC.min(400),[A.l0.flex.row,A.l0.align.baseline,A.l0.flex.grow(1),A.l0.justify.spaceBetween])],buildStatus:[A.l0.rowWithGap(4),A.l0.align.center,A.l0.flex.shrink(1)],deploymentInfo:tb.deploymentInfo,deploymentInfoAnimate:[tb.deploymentInfo,{animation:"".concat(ty," 700ms ease-out")}],deploymentInfoTitle:[A.l0.rowWithGap(8),A.l0.flex.wrap,A.l0.flex.shrink(0),A.l0.justify.spaceBetween],deploymentInfoContent:[A.l0.colWithGap(8),(0,S._)({},A.nC.min(400),A.l0.colWithGap(4))],typeColumn:[A.l0.rowWithGap(6),A.l0.flex.wrap,A.l0.flex.shrink(1)]}),tZ=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:tw.textButton,onClick:n,children:t})},tx=function(e){var t=e.name,n=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,v.BX)(I.G,{css:tw.typeColumn,children:[(0,v.tZ)(K.xv,{multiline:!1,children:t}),n?(0,v.BX)(K.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,v.tZ)(tZ,{text:"Manage",onClick:o}):null,i?(0,v.tZ)(tl(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,v.tZ)("a",{css:tw.textLink,children:(0,v.tZ)(K.xv,{children:"See all usage"})})}):null]})},tC=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,v.BX)(I.G,{css:r?tw.labeledSectionFullWidth:tw.labeledSection,children:[(0,v.tZ)(I.G,{css:A.l0.minWidth(100),children:(0,v.tZ)(K.xv,{css:A.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},tk=function(e){var t=e.provider,n=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,w.kW)(),l=(0,w.$y)(),c=void 0!==l,s=t!==es.r4.Static&&c&&null===l.hasImageTag,u=!!((a===Z.z.Ready||a===Z.z.Suspended)&&!s),d=null,f=null,p=null,h=null,m=(0,w.pn)(),g=(0,b.useRef)(void 0);(0,b.useEffect)(function(){m&&(g.current=null==m?void 0:m.id)},[m,null==m?void 0:m.id]);var y=(null==l?void 0:l.status)===es.Fe.Success,x=(null==l?void 0:l.id)===g.current,C=(null==l?void 0:l.provider)!==es.r4.Cron;switch(l&&(f=(0,v.BX)(v.HY,{children:[(0,v.tZ)(tC,{label:"Status",children:(0,v.tZ)(I.G,{css:tw.buildStatus,children:(0,v.tZ)(tm,{onClick:function(){r(l)}})})}),C?(0,v.tZ)(tC,{label:"Domain",children:(0,v.tZ)(tv,{currentBuild:l})}):null]})),t){case es.r4.Gce:p=(0,v.tZ)(tC,{label:"Type",fullWidth:!c,children:(0,v.tZ)(tx,{name:to[t],sku:null==n?void 0:n.configurationLabel,canManage:u,onManageClick:i})});break;case es.r4.CloudRun:p=(0,v.tZ)(tC,{label:"Type",fullWidth:!c,children:(0,v.tZ)(tx,{name:to[t],sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case es.r4.Static:p=(0,v.tZ)(tC,{label:"Type",fullWidth:!c,children:(0,v.tZ)(tx,{name:to[t],sku:void 0,canManage:u&&c,onManageClick:i})});break;case es.r4.Cron:if(!(null==l?void 0:null===(k=l.machineJob)||void 0===k?void 0:k.timezone))break;var k,S,_,T=null==l?void 0:null===(S=l.machineJob)||void 0===S?void 0:S.timezone,E=tc.y.find(function(e){return e.utc.includes(T)}),R=(null==E?void 0:E.abbr)||T;p=(0,v.tZ)(tC,{label:"Type",fullWidth:!c,children:(0,v.tZ)(tx,{name:to[t],sku:"".concat(R,", ").concat(null==l?void 0:null===(_=l.machineJob)||void 0===_?void 0:_.crontab),canManage:!1,onManageClick:i})}),d=(0,v.tZ)(ti,{onSuccessfulExecution:function(){o({type:ex.a.ChangeView,payload:{view:ex.k.Schedule}})}});case es.r4.Goval:}return(s&&(h=(0,v.tZ)(I.G,{children:(0,v.tZ)(J.E,{icon:(0,v.tZ)(eo.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f||p||h)?(0,v.BX)($.Tg,{elevated:!0,css:y&&x?tw.deploymentInfoAnimate:tw.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,v.BX)(I.G,{css:tw.deploymentInfoTitle,children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}),d]}):null,(0,v.BX)(I.G,{css:tw.deploymentInfoContent,children:[f,p,h]})]}):null},tS=n(99799),t_=n(71051),tT=n(67790),tE=n(63411),tR=n(80786),tD=A.nC.min(320),tI=(0,B.X)({container:A.l0.colWithGap(4),label:[A.l0.flex.column,A.l0.pb(4),(0,S._)({},tD,[A.l0.flex.row,A.l0.justify.spaceBetween,A.l0.pb(0)])],resource:A.l0.fontWeight.medium,cost:[A.l0.rowWithGap(1),A.l0.align.baseline]}),tB=n(49853),tA=n(50366),tP=[1,2,4,8],tG=tA.m0*tA.hU,tL=[tG,2*tG,4*tG,8*tG],tN=[[0,3],[0,4],[2,5],[3,6]],tO=tP.length-1,tU=1/(2*tO),tM=(0,tB.cn)(2),tX=(0,tB.cn)(function(e){return tP[e(tM)]}),tF=(0,tB.cn)(function(e){return tL[e(tM)]}),tW=(0,tB.cn)(function(e){return tN[e(tM)]}),tV=(0,tB.cn)(0),tH=(0,tB.cn)(function(e){var t=e(t1)[0]/tO,n=e(t1)[1]/tO,r=0,i=0;return e(tV)<t&&(r=(t-e(tV))/tU,i=t-tU),e(tV)>n&&(r=(e(tV)-n)/tU,i=n+tU),{overage:r,point:i}}),tz=(0,tB.cn)(0),tj=(0,tB.cn)(0),tq=[.5,1,2,4,8,16,32];tA.m0;var tJ=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],tY=tq.length-1,t$=1/(2*tY),tK=(0,tB.cn)(4),tQ=(0,tB.cn)(function(e){return tq[e(tK)]}),t0=(0,tB.cn)(function(e){return e(t7)*tA.m0}),t1=(0,tB.cn)(function(e){return tJ[e(tK)]}),t2=(0,tB.cn)(0),t3=(0,tB.cn)(function(e){var t=e(tW)[0]/tY,n=e(tW)[1]/tY,r=0,i=0;return e(t2)<t&&(r=(t-e(t2))/t$,i=t-t$),e(t2)>n&&(r=(e(t2)-n)/t$,i=n+t$),{overage:r,point:i}}),t4=(0,tB.cn)(null,function(e,t){var n=e(tM),r=e(t1)[0],i=e(t1)[1];n<r&&t(tM,r),n>i&&t(tM,i)}),t8=(0,tB.cn)(null,function(e,t){var n=e(tK),r=e(tW)[0],i=e(tW)[1];n<r&&t(tK,r),n>i&&t(tK,i)}),t6=(0,tB.cn)(function(e){var t=e(t1)[0]/tO,n=e(t1)[1]/tO,r=e(tW)[0]/tY,i=e(tW)[1]/tY;return e(tV)<t?(t-e(tV))/tU:e(tV)>n?(e(tV)-n)/tU:e(t2)<r?(r-e(t2))/t$:e(t2)>i?(e(t2)-i)/t$:0}),t5=(0,tB.cn)(function(e){var t;return(1e5*(t={ramCost:e(t0),cpuCost:e(tF)}).ramCost+1e5*t.cpuCost)/1e5}),t7=(0,tB.cn)(function(e){return e(tQ)*tA.v7}),t9=(0,tB.cn)(function(e){return e(tX)*tA.hU}),ne=(0,tB.cn)(function(e){return e(t7)+e(t9)});(r=c||(c={})).None="0ms",r.Normal="200ms";var nt=["ArrowLeft","ArrowRight","Home","End"],nn=(0,T.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),nr=(0,T.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:A.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(A.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),ni=(0,b.forwardRef)(function(e,t){var n=(0,g._)((0,tR.KO)(tX),1)[0],r=(0,tR.b9)(tz),i=(0,b.useRef)(null),o=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(tP[0])),i.current.setAttribute("aria-valuemax",String(tP[tP.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,b.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,b.useMemo)(function(){return(0,v.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:[nr,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),no="min(var(--point), var(--position))",na="max(var(--point), var(--position))",nl=(0,b.forwardRef)(function(e,t){var n=(0,tR.Dv)(tH),r=n.overage,i=n.point,o=(0,tR.Dv)(tV),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,tT.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,tT.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,tT.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:z.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(no,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(no,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(na,", \n                  transparent ").concat(na," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])}),nc=(0,B.X)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:A.TV.outlineStronger}});function ns(e){var t=e.list;return(0,v.tZ)(I.G,{css:nc.container,children:t.map(function(e){return(0,v.tZ)(I.G,{css:nc.mark},e)})})}function nu(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(tM),2),r=n[0],i=n[1],o=(0,g._)((0,b.useState)(!1),2),a=o[0],l=o[1],s=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useRef)(null),f=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),p=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(p(r/tO),f(c.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,s=o.width,u=n.target===e?s/2:n.clientX-o.left,d=null,h=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-s)));t!==d&&(d=t,p(t),i(Math.round(t*tO)))};h(n.clientX);var m=function(e){f(c.None),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(c.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,p,f]),(0,b.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&nt.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(tO,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=tO}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,v.BX)(I.G,{css:A.l0.colWithGap(8),children:[(0,v.BX)(I.G,{innerRef:s,css:nn,children:[(0,v.tZ)(nl,{ref:u}),(0,v.tZ)(ni,{ref:d})]}),(0,v.tZ)(ns,{list:tP})]})},[])}function nd(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(tX),1)[0],r=(0,g._)((0,tR.KO)(t9),1)[0],i=(0,tR.b9)(t8);return(0,b.useEffect)(function(){i()},[i,n]),(0,v.BX)(I.G,{css:tI.container,children:[(0,v.BX)(I.G,{css:tI.label,children:[(0,v.BX)(K.xv,{css:tI.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,v.BX)(I.G,{css:tI.cost,children:[(0,v.BX)(K.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,t_.Z)("compute unit",r)]}),(0,v.tZ)(K.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(nu,{setAttrs:t})]})}var nf=(0,b.forwardRef)(function(e,t){var n=(0,g._)((0,tR.KO)(tQ),1)[0],r=(0,tR.b9)(tj),i=(0,b.useRef)(null),o=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(tq[0])),i.current.setAttribute("aria-valuemax",String(tq[tq.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,b.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,b.useMemo)(function(){return(0,v.tZ)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[nr,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),np="min(var(--point), var(--position))",nh="max(var(--point), var(--position))",nm=(0,b.forwardRef)(function(e,t){var n=(0,tR.Dv)(t3),r=n.overage,i=n.point,o=(0,tR.Dv)(t2),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,tT.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,tT.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,tT.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:z.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(np,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(np,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(nh,", \n                  transparent ").concat(nh," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function ng(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(tK),2),r=n[0],i=n[1],o=(0,g._)((0,b.useState)(!1),2),a=o[0],l=o[1],s=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useRef)(null),f=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),p=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(p(r/tY),f(c.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,s=o.width,u=n.target===e?s/2:n.clientX-o.left,d=null,h=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-s)));t!==d&&(d=t,p(t),i(Math.round(t*tY)))};h(n.clientX);var m=function(e){f(c.None),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(c.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,p,f]),(0,b.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&nt.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(tY,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=tY}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,v.BX)(I.G,{css:A.l0.colWithGap(8),children:[(0,v.BX)(I.G,{innerRef:s,css:nn,children:[(0,v.tZ)(nm,{ref:u}),(0,v.tZ)(nf,{ref:d})]}),(0,v.tZ)(ns,{list:tq})]})},[])}function nv(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(tQ),1)[0],r=(0,g._)((0,tR.KO)(t7),1)[0],i=(0,tR.b9)(t4);return(0,b.useEffect)(function(){i()},[i,n]),(0,v.BX)(I.G,{css:tI.container,children:[(0,v.BX)(I.G,{css:tI.label,children:[(0,v.BX)(K.xv,{css:tI.resource,multiline:!1,children:[n," GiB RAM"]}),(0,v.BX)(I.G,{css:tI.cost,children:[(0,v.BX)(K.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,t_.Z)("compute unit",r)]}),(0,v.tZ)(K.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,v.tZ)(ng,{setAttrs:t})]})}var ny=(0,B.X)({container:[A.l0.px(8),A.l0.width("100%"),A.l0.position.absolute,A.l0.top(60),A.l0.bottom(21),A.l0.transition.snappy,A.l0.zIndex(1),(0,S._)({},A.nC.min(320),A.l0.top(34))],svg:[A.l0.width("100%"),A.l0.height("100%"),A.l0.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function nb(){var e,t=(0,tR.Dv)(t6),n=(0,b.useRef)(null),r=(0,b.useRef)(null),i=(0,b.useRef)((null===(e=r.current)||void 0===e?void 0:e.offsetWidth)||0),o=(0,tR.Dv)(tz),a=(0,tR.Dv)(tj);(0,b.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var l={x1:o/(i.current-16)*100,x2:a/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,b.useEffect)(function(){(0,tT.A)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,v.tZ)(I.G,{css:ny.container,id:"rope",innerRef:r,children:(0,v.BX)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:ny.svg,children:[(0,v.tZ)("line",(0,ep._)((0,_._)({},l),{stroke:A.TV.outlineDimmer})),(0,v.tZ)("line",(0,ep._)((0,_._)({},l),{stroke:A.TV.outlineDefault,strokeDasharray:8})),(0,v.BX)("g",{ref:n,css:ny.overage,children:[(0,v.tZ)("line",(0,ep._)((0,_._)({},l),{stroke:A.TV.accentPrimaryDefault})),(0,v.tZ)("line",(0,ep._)((0,_._)({},l),{stroke:A.TV.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var nw=[A.l0.borderRadius(8)],nZ=(0,B.X)({container:[nw],disabled:[nw,{opacity:.5,pointerEvents:"none"}],top:[A.l0.p(16),A.l0.colWithGap(12)],bottom:[A.l0.p(16),A.l0.border({direction:"top",color:A.TV.outlineDimmer})],header:[A.l0.rowWithGap(8)],text:[A.l0.colWithGap(4),A.l0.flex.growAndShrink(1)],title:[A.l0.rowWithGap(4),A.l0.align.center],edit:z.gU.outlined,overview:[A.l0.colWithGap(8)],overviewLine:[A.l0.flex.column,(0,S._)({},A.nC.min(320),[A.l0.flex.row,A.l0.justify.spaceBetween])],overviewValue:[A.l0.fontWeight.medium],total:[A.l0.rowWithGap(4),A.l0.flex.shrink(1),A.l0.align.center],cost:[A.l0.flex.row,A.l0.align.baseline,{gap:1}],builder:[A.l0.colWithGap(12),A.l0.position.relative,{"--cpu-transition-time":c.Normal,"--cpu-progress":1,"--ram-transition-time":c.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function nx(e){var t=e.machineConfiguration,n=e.disabled,r=e.toggleEditable,i=void 0===r||r,o=(0,b.useRef)(null),a=(0,g._)((0,b.useState)(!i),2),l=a[0],c=a[1],s=(0,tR.Dv)(tX),u=(0,tR.Dv)(tQ),d=(0,tR.Dv)(t9),f=(0,tR.Dv)(t7),p=(0,tR.Dv)(t5),h=(0,tR.Dv)(ne),m=(0,tR.b9)(tV),y=(0,tR.b9)(t2),w=(0,tR.b9)(tM),Z=(0,tR.b9)(tK);return(0,b.useEffect)(function(){if(t){var e=tP.findIndex(function(e){return e.toString()===t.vcpu}),n=tq.findIndex(function(e){return e.toString()===t.memory});w(e),Z(n)}},[t,w,Z]),(0,v.BX)($.Tg,{elevated:!0,css:n?nZ.disabled:nZ.container,children:[(0,v.BX)(I.G,{css:nZ.top,children:[(0,v.BX)(I.G,{css:nZ.header,children:[(0,v.BX)(I.G,{css:nZ.text,children:[(0,v.BX)(I.G,{css:nZ.title,children:[(0,v.tZ)(tE.Z,{}),(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,v.tZ)(K.xv,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,v.tZ)(V.zx,{text:l?"Done":"Edit",css:nZ.edit,onClick:function(){return c(!l)}}):null]}),l?(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:nZ.builder,innerRef:o,children:[(0,v.tZ)(nb,{}),(0,v.tZ)(nd,{setAttrs:{setTransitionTime:function(e){(0,tT.A)(o,"--cpu-transition-time",e)},setProgress:function(e){(0,tT.A)(o,"--cpu-progress",e.toString()),m(e)}}}),(0,v.tZ)(nv,{setAttrs:{setTransitionTime:function(e){(0,tT.A)(o,"--ram-transition-time",e)},setProgress:function(e){(0,tT.A)(o,"--ram-progress",e.toString()),y(e)}}})]}),(0,v.tZ)(K.xv,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,v.BX)(I.G,{css:nZ.overview,children:[(0,v.BX)(I.G,{css:nZ.overviewLine,children:[(0,v.BX)(K.xv,{css:nZ.overviewValue,multiline:!1,children:[s," vCPU",s>1?"s":""]}),(0,v.BX)(I.G,{css:nZ.cost,children:[(0,v.BX)(K.xv,{multiline:!1,color:"dimmer",children:[d," ",(0,t_.Z)("compute unit",d)]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,v.BX)(I.G,{css:nZ.overviewLine,children:[(0,v.BX)(K.xv,{css:nZ.overviewValue,multiline:!1,children:[u," GiB RAM"]}),(0,v.BX)(I.G,{css:nZ.cost,children:[(0,v.BX)(K.xv,{multiline:!1,color:"dimmer",children:[f," ",(0,t_.Z)("compute unit",f)]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,v.tZ)(I.G,{css:nZ.bottom,children:(0,v.BX)(I.G,{css:nZ.overviewLine,children:[(0,v.tZ)(K.xv,{css:nZ.overviewValue,multiline:!1,children:"Total per machine"}),(0,v.BX)(I.G,{css:nZ.total,children:[(0,v.BX)(I.G,{css:nZ.cost,children:[(0,v.BX)(K.xv,{multiline:!1,children:[h," ",(0,t_.Z)("compute unit",h)]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,v.tZ)(eL.u,{tooltip:(0,v.BX)(I.G,{css:nZ.cost,children:[(0,v.BX)(K.xv,{multiline:!1,children:["$",p.toFixed(6)]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,v.tZ)(eN.Z,{color:A.TV.foregroundDimmest})})]})]})})]})}var nC=[1,2,3,4,5,6,7,8,9,10],nk=nC.length-1,nS=1/(2*nk),n_=(0,tB.cn)(2),nT=(0,tB.cn)(function(e){return nC[e(n_)]}),nE=(0,tB.cn)(function(e){return(e(t5)*e(nT)).toFixed(6)}),nR=(0,tB.cn)(function(e){return e(ne)*e(nT)}),nD=(0,tB.cn)(0),nI=(0,tB.cn)(function(e){var t=0/nk,n=nC.length-1/nk,r=0,i=0;return e(nD)<t&&(r=(t-e(nD))/nS,i=t-nS),e(nD)>n&&(r=(e(nD)-n)/nS,i=n+nS),{overage:r,point:i}});(i=s||(s={})).None="0ms",i.Normal="120ms";var nB=["ArrowLeft","ArrowRight","Home","End"],nA=(0,T.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),nP=(0,T.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:A.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(A.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),nG=(0,b.forwardRef)(function(e,t){var n=(0,g._)((0,tR.KO)(nT),1)[0],r=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(nC[0])),r.current.setAttribute("aria-valuemax",String(nC[nC.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,b.useMemo)(function(){return(0,v.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[nP,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])}),nL="min(var(--point), var(--position))",nN="max(var(--point), var(--position))",nO=(0,b.forwardRef)(function(e,t){var n=(0,tR.Dv)(nI),r=n.overage,i=n.point,o=(0,tR.Dv)(nD),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,tT.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,tT.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,tT.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,v.BX)(v.HY,{children:[(0,v.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,v.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:z.vb.interactiveBorder,borderRadius:"2px"},children:(0,v.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(nL,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(nL,", \n                  ").concat(z.vb.interactiveBorderHover," ").concat(nN,", \n                  transparent ").concat(nN," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function nU(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(n_),2),r=n[0],i=n[1],o=(0,g._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useRef)(null),f=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),p=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(p(r/nk),f(s.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&d.current&&!a){var e=u.current,t=d.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,u=n.target===e?c/2:n.clientX-o.left,d=null,h=function(e){var t=Math.max(0,Math.min(1,(e-r.left-u)/(a-c)));t!==d&&(d=t,p(t),i(Math.round(t*nk)))};h(n.clientX);var m=function(e){f(s.None),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(s.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,p,f]),(0,b.useEffect)(function(){if(void 0!==r&&d.current&&!a){var e=d.current,t=function(e){if(void 0!==r&&nB.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(nk,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=nk}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,v.tZ)(I.G,{css:A.l0.colWithGap(8),children:(0,v.BX)(I.G,{innerRef:c,css:nA,children:[(0,v.tZ)(nO,{ref:u}),(0,v.tZ)(nG,{ref:d})]})})},[])}var nM=(0,B.X)({costInfo:[A.l0.rowWithGap(4),A.l0.flex.shrink(1),A.l0.align.center]});function nX(e){var t=e.setAttrs,n=(0,g._)((0,tR.KO)(nT),1)[0],r=(0,g._)((0,tR.KO)(nE),1)[0],i=(0,g._)((0,tR.KO)(nR),1)[0];return(0,v.BX)(I.G,{css:tI.container,children:[(0,v.BX)(I.G,{css:tI.label,children:[(0,v.BX)(K.xv,{css:tI.resource,multiline:!1,children:[n," ",(0,t_.Z)("machine",n)]}),(0,v.BX)(I.G,{css:nM.costInfo,children:[(0,v.BX)(I.G,{css:tI.cost,children:[(0,v.BX)(K.xv,{multiline:!1,children:[i," compute units"]}),(0,v.tZ)(K.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,v.tZ)(eL.u,{tooltip:(0,v.BX)(I.G,{css:tI.cost,children:[(0,v.BX)(K.xv,{multiline:!1,children:["$",r]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,v.tZ)(eN.Z,{color:A.TV.foregroundDimmest})})]})]}),(0,v.tZ)(nU,{setAttrs:t})]})}var nF=[A.l0.colWithGap(12),A.l0.borderRadius("container"),A.l0.p(16)],nW=(0,B.X)({container:[nF],disabled:[nF,{opacity:.5,pointerEvents:"none"}],text:[A.l0.colWithGap(4)],title:[A.l0.rowWithGap(4),A.l0.align.center],cost:[A.l0.flex.row,A.l0.align.baseline,A.l0.fontWeight.medium,{gap:3}],builder:[A.l0.colWithGap(8),A.l0.position.relative,{"--max-instances-transition-time":s.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function nV(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,i=(0,b.useRef)(null),o=(0,tR.b9)(nD),a=(0,tR.b9)(n_);return(0,b.useEffect)(function(){if(t){var e=nC.indexOf(t);if(-1===e){r("An error occurred while setting selected max machine instances.");return}a(e)}},[t,a,r]),(0,v.BX)($.Tg,{elevated:!0,css:n?nW.disabled:nW.container,children:[(0,v.BX)(I.G,{css:nW.text,children:[(0,v.BX)(I.G,{css:nW.title,children:[(0,v.tZ)(en.Z,{}),(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,v.tZ)(K.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,v.tZ)(I.G,{css:nW.builder,innerRef:i,children:(0,v.tZ)(nX,{setAttrs:{setTransitionTime:function(e){(0,tT.A)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,tT.A)(i,"--max-instances-progress",e.toString()),o(e)}}})})]})}function nH(){var e=(0,eC._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return nH=function(){return e},e}var nz={},nj=(0,ek.Ps)(nH(),eY.bN),nq=function(e){var t,n,r=(0,w.kW)(),i=(0,w.hn)(),o=(0,w.$y)(),a=void 0!==(0,w.pn)(),l=!a&&"string"!=typeof i,c=(0,tR.Dv)(tX),s=(0,tR.Dv)(tQ),u=(0,tR.Dv)(nT),d=(t=(0,_._)({},nz,{onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),eS.a(nj,t)),f=d.data,p=d.loading,h=(null==f?void 0:f.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?f.hostingMachineConfigurations.results:null;(0,b.useEffect)(function(){ew({context:ex.k.AutoscaleMachineConfiguration})},[]);var m=(n=(0,x._)(function(){var t,n,r,i;return(0,k.Jh)(this,function(o){return(t=null==h?void 0:h.find(function(e){var t=e.vcpu,n=e.memory;return c.toString()===t&&s.toString()===n}))?(n=t.id,r=t.label,i=t.slug,e.onConfirm({configurationId:n,configurationLabel:r,configurationSlug:i,maxInstances:u})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),g=p||e.fetching||a||r!==Z.z.Ready;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eJ,{onBack:e.onBack})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.BX)(I.G,{css:A.l0.colWithGap(16),children:[(0,v.BX)(I.G,{css:A.l0.colWithGap(4),children:[(0,v.tZ)(K.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,v.BX)(I.G,{css:A.l0.colWithGap(16),children:[(0,v.tZ)(nx,{machineConfiguration:null==o?void 0:o.machineConfiguration,disabled:g}),(0,v.tZ)(nV,{maxMachineInstances:null==o?void 0:o.maxMachineInstances,disabled:g,onError:e.onError})]}),(0,v.BX)(I.G,{css:[A.l0.colWithGap(8),A.l0.pt(8)],children:[(0,v.tZ)(V.zx,{colorway:"primary",text:l?"Approve and configure build settings":"Approve and update",iconRight:(0,v.tZ)(e1.Z,{}),onClick:m,loading:p}),(0,v.BX)(K.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,v.tZ)("a",{href:e2.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},nJ=n(64172);function nY(e){var t=e.deployability,n=e.isRedeploy,r=t.deploy,i=t.redeploy,o=n?i:r;return o.isAuthorized?null:(0,v.tZ)(J.E,{text:o.message,colorway:"warning",icon:(0,v.tZ)(eo.Z,{})})}var n$=n(54129),nK=n(61989),nQ=n(68220),n0=n(27840),n1=n(7935),n2=n(64206),n3=n(70145),n4=n(39268),n8=n(40107),n6=n.n(n8),n5=(0,B.X)({self:[A.l0.colWithGap(8),A.l0.mt(8)],accordion:[A.l0.mb(0)],accordionItem:[A.l0.rowWithGap(4),A.l0.align.center],textButton:[A.l0.cursor.pointer,A.l0.reset.button,A.l0.color.accentPrimaryStronger,A.l0.focusRing,A.l0.hover(A.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[A.l0.color.foregroundDimmer,A.l0.m(4),A.l0.textAlign.left],tableWrapper:[A.l0.mb(8),A.l0.colWithGap(8),(0,S._)({},G,A.l0.rowWithGap(0))],table:[A.l0.flex.column,A.l0.width("100%"),(0,S._)({},G,[A.l0.width("50%"),A.l0.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+A.TV.outlineDimmer}}}])],ghostRow:[A.l0.display.none,(0,S._)({},G,A.l0.display.flex)]}),n7=function(e){var t=e.text,n=e.onClick;return(0,v.tZ)("button",{css:n5.textButton,onClick:n,children:t})};function n9(e){var t=e.hasPortsConfigured,n=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return t?n?r?(0,v.tZ)(J.E,{text:(0,v.BX)(v.HY,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,v.tZ)(n7,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,v.tZ)(J.E,{text:(0,v.BX)(v.HY,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,v.tZ)(n7,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(J.E,{text:(0,v.BX)(v.HY,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,v.tZ)(n7,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,v.tZ)(J.E,{text:(0,v.BX)(v.HY,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,v.tZ)(n7,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,v.tZ)(J.E,{text:(0,v.BX)(v.HY,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,v.tZ)(n7,{text:"Networking pane to configure.",onClick:o})]})})}var re=function(e){return 80===(0,n3.OD)(e.configuration)};function rt(e){var t=e.portState,n=(0,n3.VZ)(t.configuration),r=(0,n3.OD)(t.configuration),i=re(t);return(0,v.BX)(v.HY,{children:[(0,v.BX)(n4.sg,{width:"50%",children:[(0,v.tZ)(K.xv,{children:n?"localhost":"0.0.0.0"}),i&&n?(0,v.tZ)(n2.Z,{size:16,color:nQ.Br.primary.default}):null]}),(0,v.BX)(n4.sg,{width:"50%",children:[(0,v.BX)(K.xv,{children:[":",r]}),i?(0,v.tZ)(n0.Z,{size:16,color:nQ.Br.positive.default}):(0,v.tZ)(n1.Z,{size:16,color:nQ.Br.negative.default})]})]})}function rn(e){var t=e.ports,n=e.openNetworkingPane,r=(0,n$.Z)(t.portsState),i=(null==r?void 0:r.filter(function(e){return(0,n3.OD)(e.configuration)}).sort(function(e,t){var n,r;return(null!==(n=(0,n3.OD)(e.configuration))&&void 0!==n?n:0)-(null!==(r=(0,n3.OD)(t.configuration))&&void 0!==r?r:0)}))||null,o=null==i?void 0:i.find(re),a=!!o,l=!!(i&&i.length>0),c=!!i&&!!o&&!!(i.filter(re).length>1||i.some(function(e){return(0,n3.OD)(e.configuration)===o.configuration.localPort})),s=!!(o&&(0,n3.VZ)(o.configuration)),u=l&&!a||c,d=(0,g._)((0,b.useState)(!1),2),f=d[0],p=d[1];return(0,v.tZ)(nK.Q,{headerContent:(0,v.BX)(I.G,{css:n5.accordionItem,children:[(0,v.tZ)(eU,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),u?(0,v.tZ)(eo.Z,{size:16,color:nQ.Br.warning.strongest}):null]}),expanded:f,onClick:function(){return p(!f)},css:n5.accordion,children:(0,v.BX)(I.G,{css:n5.self,children:[(0,v.tZ)(n9,{hasPortsConfigured:l,hasPort80Configured:a,hasConflictingPorts:c,hasLocalhostPort80:s,openNetworkingPane:n}),(0,v.tZ)(I.G,{children:(0,v.BX)(I.G,{css:n5.tableWrapper,children:[(0,v.BX)(I.G,{css:n5.table,children:[(0,v.tZ)(K.xv,{css:n5.tableHeader,children:"Deployment expects:"}),(0,v.BX)(n4.iA,{children:[(0,v.BX)(n4.X2,{children:[(0,v.tZ)(n4.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(n4.sg,{header:!0,width:"50%",children:"External Port"})]}),(0,v.BX)(n4.X2,{children:[(0,v.tZ)(n4.sg,{width:"50%",children:(0,v.tZ)(K.xv,{children:"0.0.0.0"})}),(0,v.BX)(n4.sg,{width:"50%",children:[(0,v.tZ)(K.xv,{children:":80"}),(0,v.tZ)(n0.Z,{size:16,color:nQ.Br.positive.default})]})]}),l&&i?n6()((null==i?void 0:i.length)-1).map(function(e){return(0,v.tZ)(n4.X2,{css:n5.ghostRow,children:(0,v.tZ)(n4.sg,{children:(0,v.tZ)(K.xv,{children:"\xa0"})})},e)}):null]})]}),(0,v.BX)(I.G,{css:n5.table,children:[(0,v.tZ)(K.xv,{css:n5.tableHeader,children:"Your External Port configuration(s):"}),(0,v.BX)(n4.iA,{children:[(0,v.BX)(n4.X2,{children:[(0,v.tZ)(n4.sg,{header:!0,width:"50%",children:"Host"}),(0,v.tZ)(n4.sg,{header:!0,width:"50%",children:"External Port"})]}),l?null==i?void 0:i.map(function(e){return(0,v.tZ)(n4.X2,{children:(0,v.tZ)(rt,{portState:e})},e.configuration.localPort)}):(0,v.BX)(n4.X2,{children:[(0,v.tZ)(n4.sg,{width:"50%",children:(0,v.tZ)(K.xv,{children:"-"})}),(0,v.tZ)(n4.sg,{width:"50%",children:(0,v.tZ)(K.xv,{children:"-"})})]})]})]})]})})]})})}var rr=n(84238),ri=n(52657),ro=n(59489),ra=n(31089),rl=n(59421);function rc(){var e=(0,eC._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return rc=function(){return e},e}var rs={},ru=(0,ek.Ps)(rc()),rd=n(63740),rf=n(90632),rp=n(34030),rh=(0,B.X)({self:[A.l0.colWithGap(4),A.l0.flex.growAndShrink(1)],input:[A.l0.color.greyStrongest],loading:[j.p.backgroundPulse(A.TV.backgroundHighest,A.TV.backgroundHigher)],error:[A.l0.color.accentNegativeStronger]}),rm=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,l=e.placeholder,c=e.type,s=void 0===c?"text":c,u=e.onFocus,d=(0,tS.Ar)(n),f=(0,b.useId)();return s||(s="text"),(0,v.BX)(I.G,{css:rh.self,children:[(0,v.tZ)(eG.II,{id:t,value:!r&&d?n:"",onChange:function(e){return o(e.target.value)},css:r?rh.loading:rh.input,disabled:r||i,"aria-describedby":f,placeholder:r?"":l,type:s,onFocus:u}),a?(0,v.tZ)(I.G,{css:rh.error,"aria-live":"polite","aria-atomic":"true",id:f,children:(0,v.tZ)("span",{children:a})}):null]})},rg=[A.l0.borderRadius(8),A.l0.width(32),A.l0.height(32),z.gU.filled,A.l0.justify.center,A.l0.align.center],rv=(0,B.X)({root:[A.l0.rowWithGap(8),A.l0.align.center],iconButton:[A.l0.height("100%"),A.l0.borderRadius(8),{"& button":A.l0.height(32)}],keyInput:[A.l0.width("40%")],valueInput:[A.l0.flex.growAndShrink(1)],secretDifferentInDev:[rg,A.l0.color.orangeStrongest],secretSameInDev:[rg,A.l0.color.accentPrimaryStrongest],deploymentOnly:[rg,A.l0.color.accentPrimaryStrongest]});function ry(e){var t=e.existsInDev,n=e.isDifferentInDev;return t?n?(0,v.tZ)(eL.u,{tooltip:"The value of this secret differs from the workspace value",children:(0,v.tZ)(I.G,{css:rv.secretDifferentInDev,children:(0,v.tZ)(rd.Z,{})})}):(0,v.tZ)(eL.u,{tooltip:"The value of this secret is the same as the workspace value",children:(0,v.tZ)(I.G,{css:rv.secretSameInDev,children:(0,v.tZ)(rf.Z,{})})}):(0,v.tZ)(eL.u,{tooltip:"This secret only exists as a deployment secret",children:(0,v.tZ)(I.G,{css:rv.deploymentOnly,children:(0,v.tZ)(rp.Z,{})})})}var rb=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,o=e.updateEnvVarName,a=e.updateEnvVarValue,l=e.removeEnvVar,c=e.otherKeys,s=e.devSecrets,u=(0,ra.U)(),d=(0,g._)((0,b.useState)(""===n||""===r),2),f=d[0],p=d[1],h=!!(n&&r),m=(0,ri.Z)(h),y=(0,rr.Z)(function(){y.current&&m.current&&p(!1)},[m]),w=!!(s&&s.has(n)),Z=!!(w&&s&&s.get(n)!==r);return f?(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:rv.root,innerRef:y,children:[(0,v.tZ)(I.G,{css:rv.keyInput,children:(0,v.tZ)(eG.II,{placeholder:"Name",id:"".concat(u,"-name-").concat(t),value:n,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&h&&p(!1)},disabled:i})}),(0,v.tZ)(I.G,{css:rv.valueInput,children:(0,v.tZ)(eG.II,{placeholder:"Value",name:"".concat(u,"-value-").concat(t),value:r,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&h&&p(!1)},disabled:i})}),i?null:(0,v.tZ)($.Tg,{elevated:!0,css:rv.iconButton,children:(0,v.tZ)(eX.hU,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){h?p(!1):l()},children:h?(0,v.tZ)(n0.Z,{}):(0,v.tZ)(n1.Z,{})})})]}),c.includes(n)?(0,v.BX)(K.xv,{variant:"small",css:{color:A.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,v.BX)(I.G,{css:rv.root,children:[(0,v.tZ)(ry,{existsInDev:w,isDifferentInDev:Z}),(0,v.tZ)(rl.u_,{value:n}),(0,v.tZ)(rl.BH,{value:r}),(0,v.tZ)(rl.$M,{onEdit:function(){return p(!0)},onDelete:function(){return l()}})]})},rw=function(e){var t,n,r,i,o,a=e.id,l=e.subdomain,c=e.deploymentId,s=e.onChange,u=e.updateValidity,d=(0,U.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:ed.q7}),f=d!==ed.q7,p=(t={variables:{subdomain:l,deploymentId:c},skip:0===l.length},n=(0,_._)({},rs,t),eS.a(ru,n)),h=p.data,m=p.loading,g=p.error,y=(null==h?void 0:h.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&h.replitAppSubdomainAvailability.available,w=(null==h?void 0:h.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?h.replitAppSubdomainAvailability.message:null==h?void 0:null===(r=h.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,b.useEffect)(function(){u(y)},[y]),g)?(0,v.tZ)(J.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:[A.l0.rowWithGap(4),A.l0.align.center],children:[(0,v.tZ)(eG.II,{id:a,placeholder:"subdomain",value:l,onChange:function(e){return s(e.target.value)}}),(0,v.BX)(K.xv,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".",d]})]}),(0,v.BX)(I.G,{css:[A.l0.rowWithGap(4),A.l0.align.center,A.l0.pt(4)],children:[m?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eW.Z,{}),(0,v.tZ)(K.xv,{multiline:!1,children:"Checking availability"})]}):null,y?(0,v.BX)(v.HY,{children:[(0,v.tZ)(n0.Z,{color:"green"}),(0,v.tZ)(K.xv,{css:[A.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,y||m?null:(0,v.BX)(v.HY,{children:[(0,v.tZ)(eo.Z,{color:"red"}),(0,v.tZ)(K.xv,{css:[A.l0.color.redDefault],multiline:!1,children:w})]}),f?(0,v.tZ)(J.E,{colorway:"warning",text:"The ".concat(ed.q7," domain is currently unavailable, please use the ").concat(d," URL above.")}):null]})]})},rZ=function(e){var t=e.appType,n=e.onChange,r=(0,ra.U)();return(0,v.tZ)(ro.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[A.l0.width("100%"),A.l0.flex.row],children:[{value:es.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:es.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,v.tZ)(I.G,{css:[A.l0.flex.grow(1)],children:(0,v.tZ)(eL.u,{tooltip:e.description,children:(0,v.tZ)(ro.rK,{id:r(e.value),value:e.value,text:e.name})})},t)})})},rx=n(41960),rC=n(29737),rk=n(86763),rS=n.n(rk),r_=n(21882),rT=n(44794),rE=n(47483),rR=n(42649),rD=n(41636),rI=(0,B.X)({self:{ul:{maxHeight:"300px"}},select:[A.l0.border()],error:[A.l0.color.accentNegativeStronger],button:[A.l0.reset.button,A.l0.viewStyle,z.gU.nofill,A.l0.align.center,A.l0.display.inlineFlex,{borderColor:z.gU.outlined.borderColor}],popover:[A.l0.width("max-content"),A.l0.overflow("auto"),A.l0.p(1),A.l0.minWidth(240)],listbox:[A.l0.maxHeight(300),A.l0.minWidth(300),A.l0.overflow("auto")],dropdownItemAndContainer:[A.l0.flex.row,A.l0.align.center,z.gU.listItem,A.l0.px(8),A.l0.py(4)],selectedItemAndContainer:[A.l0.px(8),A.l0.py(4),A.l0.justify.spaceBetween,A.l0.align.center,A.l0.rowWithGap(8)],selectedTimezoneCode:[A.l0.align.center,A.l0.textAlign.left,A.l0.rowWithGap(8)],timezoneCode:[A.l0.align.center,A.l0.textAlign.left,A.l0.rowWithGap(8)],selectedCheckIcon:[A.l0.align.center,A.l0.flex.row],header:[A.l0.pt(8),A.l0.px(8),A.l0.pb(4),A.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(A.TV.outlineDimmest)}],search:[A.l0.p(8),{borderBottom:"1px solid ".concat(A.TV.outlineDimmest)}],searchInput:[A.l0.width("100%")],dropdownHeader:[A.l0.fontWeight.medium],loading:[A.l0.maxWidth(70),j.p.backgroundPulse(A.TV.backgroundHighest,A.TV.backgroundHigher)]});function rB(e){var t=e.initialTimezone,n=e.onChange,r=e.loading,i=e.error,o=(0,g._)((0,b.useState)(),2),a=o[0],l=o[1],c=(0,b.useId)();return(0,b.useEffect)(function(){if(!r){if(t&&!a){l(t);return}if(!a&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,ed.lb)(e)){n(e),l(e);return}var i="America/Los_Angeles";i&&(n(i),l(i))}}},[n,a,t,r]),(0,v.BX)(I.G,{css:rI.self,children:[r||!a?(0,v.tZ)(eG.II,{css:rI.loading,disabled:!0}):(0,v.tZ)(rU,{selectedTzCode:a,onSelectionChange:function(e){"string"==typeof e&&(n(e),l(e))},css:rI.select}),i?(0,v.tZ)(I.G,{css:rI.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,v.tZ)("span",{children:i})}):null]})}var rA=(0,B.X)({self:[rI.dropdownItemAndContainer,A.l0.justify.spaceBetween,{backgroundColor:z.vb.interactiveBackground}]});function rP(e){var t=e.title;return(0,v.BX)(I.G,{css:rI.selectedItemAndContainer,children:[(0,v.tZ)(I.G,{css:rI.selectedTimezoneCode,children:(0,v.tZ)(K.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(rC.Z,{})]})}function rG(e){var t=e.tzCode,n=e.selected;return(0,v.BX)(I.G,{css:n?rA.self:rI.dropdownItemAndContainer,children:[(0,v.tZ)(I.G,{css:rI.timezoneCode,children:(0,v.tZ)(K.xv,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,v.tZ)(I.G,{css:rI.selectedCheckIcon,children:n?(0,v.tZ)(n0.Z,{size:16}):null})]})}var rL=(0,B.X)({self:[rI.button,A.l0.align.center,A.l0.px(8),A.l0.py(4),(0,S._)({},A.BC.min("mobileMax"),[A.l0.rowWithGap(4)])]});function rN(e){return e.toLowerCase().replaceAll("_"," ")}var rO=tc.y.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=rN(t),o=rN(n),a=r.map(function(e){return{tzCode:e,normalizedUtcValue:rN(e)}});return(0,ep._)((0,_._)({},e),{normalizedValue:i,normalizedAbbr:o,normalizedUtc:a,searchableText:rN([e.value,e.abbr].concat((0,C._)(e.utc)).join(" "))})});function rU(e){var t=e.selectedTzCode,n=e.onSelectionChange,r=(0,g._)((0,b.useState)(""),2),i=r[0],o=r[1],a=(0,g._)((0,b.useState)(tc.y),2),l=a[0],c=a[1],s=(0,g._)((0,b.useState)(tc.y.find(function(e){return e.utc.includes(t)})),2),u=s[0],d=s[1];(0,b.useEffect)(function(){d(tc.y.find(function(e){return e.utc.includes(t)}))},[t]);var f=rS()(function(e){c(function(e){if(!e)return tc.y;var t=rN(e);return rO.map(function(n){var r=0,i=n.searchableText,o=n.normalizedValue,a=n.normalizedAbbr,l=n.normalizedUtc,c=n.utc;if(i.includes(t)){o.includes(t)&&(r+=10/(o.indexOf(t)+1)),a.includes(t)&&(r+=8/(a.indexOf(t)+1));var s=c;return l.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(s=l.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,ep._)((0,_._)({},n),{utc:s,score:r})}return(0,ep._)((0,_._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),p=function(e){o(e),f(e)};return(0,v.BX)(r_.Ph,{onSelectionChange:n,"aria-label":"Timezone Select",children:[u?(0,v.tZ)(rT.z,{css:rI.button,children:(0,v.tZ)(rP,{title:u.abbr})}):(0,v.tZ)(eL.u,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,v.BX)(rT.z,{css:rL.self,children:[(0,v.tZ)(K.xv,{color:"dimmer",children:"Select"}),(0,v.tZ)(eN.Z,{})]})}),(0,v.BX)(rx.Bf,{noArrow:!0,css:rI.popover,background:"default",placement:"bottom right",children:[(0,v.tZ)(I.G,{css:rI.search,children:(0,v.tZ)(eG.II,{css:rI.searchInput,value:i,onChange:function(e){return p(e.target.value)},placeholder:"Search"})}),(0,v.tZ)(rE.wb,{css:rI.listbox,children:l.map(function(e){var n=e.value,r=e.abbr,i=e.utc;return(0,v.BX)(rR.$0,{children:[(0,v.tZ)(rD.h,{css:rI.header,children:(0,v.BX)(K.xv,{variant:"small",color:"dimmest",css:rI.dropdownHeader,children:[n," (",r,")"]})}),i.map(function(e){return(0,v.tZ)(rE.m9,{id:e,textValue:e,children:(0,v.tZ)(rG,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var rM=n(54236),rX=n(25722);function rF(e,t,n){return rX.$e(function(r){r.setTag("deployments-pane",!0),r.setTag("context",t),n&&r.setExtras(n),rX.Tb(e)}),e}var rW=n(82419),rV={scheduleToCronExpression:{inputTarget:rM.i3.ENGLISH,outputTarget:rM.i3.CRON},cronExpressionToSchedule:{inputTarget:rM.i3.CRON,outputTarget:rM.i3.ENGLISH}},rH=function(e){var t,n=e.type,r=e.onTranslation,i=e.onError,o=(0,b.useRef)(null),a=(0,g._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=function(e,t){rF(Error(e),"useScheduledMachineConfigurationTranslator"),i(t||e)},u=(0,rM.Vs)({onTranslation:function(e,t,i){if(!l&&(o.current&&clearTimeout(o.current),t)){if(!e){r("Unable to derive valid translation from description");return}var a,c=(a=e.match(/`([^`]+)`(?=[^`]*$)/))?a[1]:null;if(!c||"scheduleToCronExpression"===n&&!(0,rW.isValidCron)(c)){r("Unable to derive valid Cron expression from description");return}r(c),(0,eb.j)(eb.U3.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:n,translation:e,prompt:i})}},onError:function(e){return s(e,"Error translating description")}}),d=u.sendMessage,f=u.loading,p=(t=(0,x._)(function(e){var t;return(0,k.Jh)(this,function(i){return(o.current&&clearTimeout(o.current),e)?"cronExpressionToSchedule"!==n||(0,rW.isValidCron)(e)?(t=rV[n],d((0,ep._)((0,_._)({},t),{content:e})),o.current=setTimeout(function(){c(!0),s("Translation timed out")},8e3)):r("Invalid cron expression"):r(""),[2]})}),function(e){return t.apply(this,arguments)});return(0,b.useEffect)(function(){return function(){o.current&&clearTimeout(o.current)}},[o]),{translate:p,loading:f}};function rz(){return(0,v.BX)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:A.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:A.TV.blurpleStronger}),(0,v.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:A.TV.blurpleStronger})]})}var rj=A.nC.min(480),rq=(0,B.X)({cronConfig:[A.l0.colWithGap(8),A.l0.pb(16),A.l0.flex.growAndShrink(1),(0,S._)({},rj,[A.l0.colWithGap(0),A.l0.rowWithGap(8),A.l0.align.start])],scheduledLabeledInput:[A.l0.flex.growAndShrink(1)],crontabLabeledInput:[A.l0.flex.growAndShrink(1),A.l0.maxWidth(128)],translationSwitch:[A.l0.flex.shrink(1),A.l0.mb(4),(0,S._)({transform:"rotate(90deg)",alignSelf:"flex-start"},rj,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[A.l0.height(32),A.l0.width(32),A.l0.center],timezoneSelect:[A.l0.flex.shrink(1),(0,S._)({minWidth:75},rj,{paddingTop:30})],timeoutConfig:[A.l0.flex.row,A.l0.flex.growAndShrink(1),A.l0.width("100%"),A.l0.align.start,A.l0.pb(8)],notificationConfig:[A.l0.flex.row,A.l0.flex.growAndShrink(1),A.l0.width("100%"),A.l0.align.start,A.l0.pb(8)],selectedItemAndContainer:[A.l0.px(8),A.l0.py(4),A.l0.justify.spaceBetween,A.l0.align.center,A.l0.rowWithGap(8)],selectedTimeoutUnits:[A.l0.align.center,A.l0.textAlign.left,A.l0.rowWithGap(8)],button:[A.l0.reset.button,A.l0.viewStyle,z.gU.nofill,A.l0.align.center,A.l0.display.inlineFlex,{borderColor:z.gU.outlined.borderColor},A.l0.minWidth(100)],timeoutUnitsDropdown:[A.l0.ml(4)],dropdownItemAndContainer:[A.l0.flex.row,A.l0.align.center,z.gU.listItem,A.l0.px(8),A.l0.py(4)],dropdownItem:[A.l0.align.center,A.l0.textAlign.left,A.l0.rowWithGap(8)],selectedCheckIcon:[A.l0.align.center,A.l0.flex.row],popover:[A.l0.width("max-content"),A.l0.overflow("auto"),A.l0.p(1),A.l0.minWidth(120)],timeoutLabeledSection:[A.l0.flex.row]}),rJ=(0,B.X)({self:[rq.dropdownItemAndContainer,A.l0.justify.spaceBetween,{backgroundColor:z.vb.interactiveBackground}]}),rY=["minutes","hours"];function r$(e,t){var n=parseInt(e,10);return isNaN(n)?0:"hours"===t.toLowerCase()?3600*n:60*n}function rK(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function rQ(e,t){return rK(e)&&r$(e,t)>39600}function r0(e){var t=e.title;return(0,v.BX)(I.G,{css:rq.selectedItemAndContainer,children:[(0,v.tZ)(I.G,{css:rq.selectedTimeoutUnits,children:(0,v.tZ)(K.xv,{variant:"text",color:"dimmer",children:t})}),(0,v.tZ)(rC.Z,{})]})}function r1(e){var t=e.item,n=e.selected;return(0,v.BX)(I.G,{css:n?rJ.self:rq.dropdownItemAndContainer,children:[(0,v.tZ)(I.G,{css:rq.dropdownItem,children:(0,v.tZ)(K.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,v.tZ)(I.G,{css:rq.selectedCheckIcon,children:n?(0,v.tZ)(n0.Z,{size:16}):null})]})}function r2(e){var t=e.callback,n=e.delay,r=(0,b.useRef)();return(0,b.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function r3(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,o=e.setTimezone,a=e.timezoneError,l=e.loading,c=void 0!==l&&l,s=e.timeoutValue,u=e.setTimeoutValue,d=e.timeoutUnits,f=e.setTimeoutUnits,p=e.setTimeoutValueError,h=(0,g._)((0,b.useState)(!1),2),m=h[0],y=h[1],w=(0,g._)((0,b.useState)(null),2),Z=w[0],x=w[1],C=(0,g._)((0,b.useState)(null),2),k=C[0],S=C[1],_=(0,g._)((0,b.useState)("scheduleToCronExpression"),2),T=_[0],E=_[1],R="scheduleToCronExpression"===T,D="cronExpressionToSchedule"===T,B=rH({type:T,onTranslation:function(e){y(!1),R?n(e):D&&S(e)},onError:function(e){y(!1),x(e)}}),P=B.translate,G=B.loading,L=r2({callback:function(e){return P(e)},delay:3e3}).callerFunction,N=r2({callback:y,delay:500}).callerFunction,O=function(e,t){switch(t){case"scheduleToCronExpression":S(e);break;case"cronExpressionToSchedule":n(e)}U&&y(!1),""!==e&&null!==e&&(N(!0),L(e))},U=G||m;if((0,b.useEffect)(function(){p(!rK(s)||rQ(s,d))},[s,d,p]),Z)return(0,v.BX)(I.G,{children:[(0,v.tZ)(I.G,{css:rq.crontabLabeledInput,children:(0,v.tZ)(eU,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(Z,". Enter valid Cron expression."),grow:!0,children:(0,v.tZ)(rm,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:!1,onChange:n,error:r})})}),(0,v.tZ)(I.G,{css:rq.timezoneSelect,children:(0,v.tZ)(rB,{initialTimezone:i,onChange:o,error:a,loading:c})})]});var M="";return rK(s)?rQ(s,d)&&(M="Please enter a value less than the maximum of 11 hours"):M="Please enter a positive whole number",(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:rq.cronConfig,children:[(0,v.tZ)(I.G,{css:rq.scheduledLabeledInput,children:(0,v.tZ)(eU,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,v.tZ)(rm,{id:"describeSchedule",value:k,placeholder:t?"":"Every day at 3:00 AM",loading:c,disabled:U&&!R,onChange:function(e){return O(e,"scheduleToCronExpression")},onFocus:function(){return E("scheduleToCronExpression")}})})}),(0,v.tZ)(I.G,{css:rq.translationSwitch,children:(0,v.tZ)(eL.u,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,v.tZ)(I.G,{css:rq.translationSwitchIcon,children:U?(0,v.tZ)(eW.Z,{color:A.TV.blurpleStronger}):(0,v.tZ)(rz,{})})})}),(0,v.tZ)(I.G,{css:rq.crontabLabeledInput,children:(0,v.tZ)(eU,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,v.tZ)(rm,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:U&&!D,onChange:function(e){return O(e,"cronExpressionToSchedule")},onFocus:function(){return E("cronExpressionToSchedule")},error:r})})}),(0,v.tZ)(I.G,{css:rq.timezoneSelect,children:(0,v.tZ)(rB,{initialTimezone:i,onChange:o,error:a,loading:c})})]}),(0,v.tZ)(I.G,{css:rq.timeoutConfig,children:(0,v.tZ)(eU,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,v.BX)(I.G,{css:rq.timeoutLabeledSection,children:[(0,v.tZ)(rm,{id:"timeoutValue",value:s,placeholder:"",loading:c,disabled:!1,onChange:function(e){return u(null!=e?e:"")},error:M,type:"number"}),(0,v.BX)(r_.Ph,{css:rq.timeoutUnitsDropdown,defaultSelectedKey:rY[0],selectedKey:d,onSelectionChange:function(e){return f(e.toString())},children:[(0,v.tZ)(rT.z,{css:rq.button,children:(0,v.tZ)(r0,{title:d})}),(0,v.tZ)(rx.Bf,{css:rq.popover,background:"default",placement:"bottom right",children:(0,v.tZ)(rE.wb,{children:rY.map(function(e){return(0,v.tZ)(rE.m9,{id:e,textValue:e,children:(0,v.tZ)(r1,{item:e,selected:e===d})},e)})})})]})]})})})]})}var r4=n(69792),r8=n(42427),r6=n(30043),r5=n(56763);function r7(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,g._)(l.value,2),u=s[0],d=s[1];t.has(u)||r.set(u,d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{missing:r}}var r9=(0,B.X)({root:[A.l0.borderRadius(8),{border:"1px solid "+A.TV.outlineDimmer}],button:[A.l0.reset.button,z.gU.nofill,A.l0.rowWithGap(8),A.l0.align.center,A.l0.height(32),A.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[A.l0.flex.growAndShrink(1),A.l0.rowWithGap(8),A.l0.align.center],expanded:[A.l0.px(8),A.l0.pb(8)],missingItems:[A.l0.colWithGap(8)],missingItem:[A.l0.rowWithGap(8)],missingSecret:[A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+A.TV.outlineDimmest,top:-1},A.l0.py(8),A.l0.position.relative]});function ie(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,o=e.initialExpanded,a=r7({secrets:t,otherSecrets:n}).missing,l=(0,g._)((0,b.useState)(o),2),c=l[0],s=l[1],u=0===a.size;if((0,b.useEffect)(function(){u&&s(!1)},[u]),u)return null;var d="".concat(a.size," ").concat((0,t_.Z)("secret",a.size)," out of sync"),f=1===a.size?"A ".concat(r," secret is missing from this environment"):"".concat(a.size," ").concat(r," secrets are missing from this environment");return(0,v.BX)(I.G,{css:r9.root,children:[(0,v.BX)(I.G,{css:r9.button,tag:"button",onClick:function(){return s(function(e){return!e})},children:[(0,v.BX)(I.G,{css:r9.buttonText,children:[(0,v.tZ)(eo.Z,{color:A.TV.orangeDefault}),(0,v.tZ)(K.xv,{multiline:!1,children:d})]}),c?(0,v.tZ)(r5.Z,{}):(0,v.tZ)(rC.Z,{})]}),c?(0,v.BX)(I.G,{css:r9.expanded,children:[(0,v.tZ)(K.xv,{css:r9.subtitle,color:"dimmer",children:f}),(0,v.tZ)(I.G,{css:r9.missingItems,children:(0,C._)(a.entries()).map(function(e){var t=(0,g._)(e,2),n=t[0],r=t[1];return(0,v.BX)(I.G,{css:r9.missingItem,children:[(0,v.BX)(I.G,{css:r9.missingSecret,children:[(0,v.tZ)(rl.u_,{value:n}),(0,v.tZ)(rl.BH,{value:r})]}),r?(0,v.tZ)(V.zx,{iconLeft:(0,v.tZ)(r6.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]}):null]})}var it=n(41974),ir=n(73878);function ii(e){var t=e.secrets,n=(0,g._)((0,b.useState)(null),2),r=n[0],i=n[1];return(0,b.useEffect)(function(){function e(){return(e=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,t.read()];case 1:return i.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),{devSecrets:r}}function io(){var e=(0,eC._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n    }\n  }\n"]);return io=function(){return e},e}function ia(){var e=(0,eC._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return ia=function(){return e},e}var il={},ic=(0,ek.Ps)(io()),is=(0,ek.Ps)(ia(),ic);function iu(e){var t=e.isPrivate,n=e.setIsPrivate;return(0,v.tZ)(eU,{id:"deploymentPrivacy",title:"Visibility",information:"Whether your deployment URL should be accessible to the public internet or only to authorized Replit users",children:(0,v.BX)(ro.hE,{name:"deploymentPrivacySelector",value:t,onChange:n,row:!0,css:[A.l0.width("100%"),A.l0.flex.row],children:[(0,v.tZ)(ro.rK,{id:"deployment-privacy-disabled",value:!1,text:"Public",icon:(0,v.tZ)(rp.Z,{})}),(0,v.tZ)(ro.rK,{id:"deployment-privacy-enabled",value:!0,text:"Private",icon:(0,v.tZ)(tg.Z,{})})]})})}function id(){return(id=(0,x._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v;return(0,k.Jh)(this,function(y){switch(y.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),o=t[Symbol.iterator](),y.label=2;case 2:if(n=(a=o.next()).done)return[3,5];return l=a.value,[4,e.stat(l)];case 3:if(!((c=y.sent()).exists&&c.type===ir.Tv.File))return[3,4];return[2,"dist"];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=y.sent(),r=!0,i=s,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:u=["dist","build","public"],d=!0,f=!1,p=void 0,y.label=9;case 9:y.trys.push([9,14,15,16]),h=u[Symbol.iterator](),y.label=10;case 10:if(d=(m=h.next()).done)return[3,13];return g=m.value,[4,e.stat(g)];case 11:if(!((v=y.sent()).exists&&v.type===ir.Tv.Directory))return[3,12];return[2,g];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return s=y.sent(),f=!0,p=s,[3,16];case 15:try{d||null==h.return||h.return()}finally{if(f)throw p}return[7];case 16:return[2]}})})).apply(this,arguments)}var ip=(0,B.X)({self:A.l0.colWithGap(16),footer:A.l0.colWithGap(0),ctaGroup:[A.l0.rowWithGap(8),A.l0.pt(12)],deployButton:A.l0.flex.grow(1),secretsModal:[A.l0.colWithGap(8)],secretsModalButtons:[A.l0.rowWithGap(8),A.l0.justify.end,A.l0.pt(8)]}),ih=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,y,C,S,T=e.deploymentId,E=e.initialSubdomain,R=e.provider,D=e.machine,B=e.secrets,P=e.fs,G=e.ports,L=e.dotReplit,N=e.onDeploy,O=e.onCancel,M=e.onError,X=e.initialSecretsSyncExpanded,F=e.openNetworkingPane,W=(0,w.kW)(),H=(0,w.XA)().deployBuild,z=(t=(0,_._)({},il,{skip:!T,variables:{id:null!=T?T:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t=(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(ea(t.replitAppSubdomain),eu(!0)),t.currentBuild.machineJob&&(e_(t.currentBuild.machineJob.timezone),eB(t.currentBuild.machineJob.crontab),t.currentBuild.machineJob.timeoutSeconds)){var n,r,i,o=t.currentBuild.machineJob.timeoutSeconds;o%3600==0?(r=o/3600,i="Hours"):(r=Math.floor(o/60),i="Minutes"),eQ(r.toString()),e2(i)}eO(t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}})),null!=t.currentBuild.isPrivate&&e7(t.currentBuild.isPrivate)}}}),eS.a(is,t)),j=z.data,J=z.loading,Y=(r=(n={provider:R,fs:P,secrets:B,dotReplit:L,isNewDeployment:!T,onError:M,onOptions:function(e){e.appType&&er(e.appType),e.envVars&&eO(e.envVars),e.ignorePorts&&eV(e.ignorePorts),e.buildCommand&&eh(e.buildCommand),e.runCommand&&ev(e.runCommand),e.publicDir&&ej(e.publicDir)}}).isNewDeployment,i=n.provider,o=n.fs,a=n.secrets,l=n.onOptions,c=n.onError,s=n.dotReplit,d=(u=(0,g._)((0,b.useState)(!0),2))[0],f=u[1],p=(0,ri.Z)(c),h=(0,ri.Z)(l),(0,b.useEffect)(function(){var e=!1;function t(){return(t=(0,x._)(function(){var t,n,l,c,u,d,p,m,v;return(0,k.Jh)(this,function(y){switch(y.label){case 0:return t=es.Vp.Server,n=null,l=null,c=null,u=null,[4,Promise.all([r?(0,ey.QX)(a):Promise.resolve(null),(0,ey.$f)(s)])];case 1:if(p=(d=g._.apply(void 0,[y.sent(),2]))[0],m=d[1],e)return[2];if(r)switch(i){case es.r4.Gce:t=m.ignorePorts?es.Vp.Worker:es.Vp.Server;break;case es.r4.CloudRun:t=es.Vp.CloudRun;break;case es.r4.Static:t=es.Vp.Static;break;case es.r4.Cron:t=es.Vp.Cron}else m.appType&&(t=m.appType);if(l=m.buildCommand,!(t!==es.Vp.Static))return[3,2];return n=m.runCommand,[3,5];case 2:if(!m.publicDir)return[3,3];return c=m.publicDir,[3,5];case 3:return[4,function(e){return id.apply(this,arguments)}(o)];case 4:(v=y.sent())&&(c=v),y.label=5;case 5:return i===es.r4.Gce&&(u=m.ignorePorts),h.current({appType:t,envVars:p,buildCommand:l,runCommand:n,publicDir:c,ignorePorts:u}),f(!1),[2]}})})).apply(this,arguments)}try{!function(){t.apply(this,arguments)}()}catch(e){p.current(e.message),f(!1)}return function(){e=!0}},[i,o,s,p,h,r,a]),{loading:d}).loading,$=(null==j?void 0:null===(C=j.hostingDeployment)||void 0===C?void 0:C.__typename)==="HostingDeployment"?j.hostingDeployment:null,Q=null==$?void 0:$.currentBuild,ee=void 0!==Q,et=(0,g._)((0,b.useState)(es.Vp.Server),2),en=et[0],er=et[1],ei=(0,g._)((0,b.useState)(E),2),eo=ei[0],ea=ei[1],el=(0,g._)((0,b.useState)(!1),2),ec=el[0],eu=el[1],ef=(0,g._)((0,b.useState)(null),2),ep=ef[0],eh=ef[1],em=(0,g._)((0,b.useState)(null),2),eg=em[0],ev=em[1],eb=(0,g._)((0,b.useState)(void 0),2),eZ=eb[0],ex=eb[1],eC=(0,g._)((0,b.useState)(null),2),ek=eC[0],e_=eC[1],eT=(0,g._)((0,b.useState)(void 0),2),eE=eT[0],eR=eT[1],eD=(0,g._)((0,b.useState)(null),2),eI=eD[0],eB=eD[1],eA=(0,g._)((0,b.useState)(void 0),2),eP=eA[0],eG=eA[1],eL=(0,g._)((0,b.useState)(null!==(S=null==Q?void 0:Q.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==S?S:[]),2),eN=eL[0],eO=eL[1],eX=(0,g._)((0,b.useState)(!1),2),eF=eX[0],eV=eX[1],eH=(0,g._)((0,b.useState)(null),2),ez=eH[0],ej=eH[1],eq=(0,g._)((0,b.useState)(void 0),2),eJ=eq[0],eY=eq[1],e$=(0,g._)((0,b.useState)("10"),2),eK=e$[0],eQ=e$[1],e0=(0,g._)((0,b.useState)(rY[0]),2),e1=e0[0],e2=e0[1],e3=(0,g._)((0,b.useState)(!1),2),e4=e3[0],e8=e3[1],e6=(0,g._)((0,b.useState)(!1),2),e5=e6[0],e7=e6[1],e9=(0,U.P5)({controlName:ed.BP,logFlagToAnalytics:!1}),te=(0,r4.e)({controlName:ed.BP,default:!1}),tt=ii({secrets:B}).devSecrets;(0,b.useEffect)(function(){ew({context:"deploy_options"})},[]);var tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;eO(function(e){return(0,it.Uy)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},tr=function(e,t){eO(function(n){return(0,it.Uy)(n,function(n){n[e].name=t})})},ti=function(e,t){eO(function(n){return(0,it.Uy)(n,function(n){n[e].value=t})})},to=function(e){eO(function(t){return(0,it.Uy)(t,function(t){t.splice(e,1)})})},ta=en!==es.Vp.Static,tl=R===es.r4.Gce,tc=en===es.Vp.Static,ts=R!==es.r4.Cron&&!(null==$?void 0:$.replitAppSubdomain),tu=R===es.r4.Cron,td=en===es.Vp.Server||en===es.Vp.CloudRun,tf=R!==es.r4.Cron&&(e9||te),tp=(m=(0,x._)(function(){var e,t,n,r,i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if(n=(!ts||ec)&&eo.length?eo:void 0,i=null!==(r=null==$?void 0:null===(t=$.currentBuild)||void 0===t?void 0:null===(e=t.machineJob)||void 0===e?void 0:e.failureNotifications)&&void 0!==r&&r,!n)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,H({envVars:eN.filter(function(e){return(0,tS.GV)(e)}),subdomain:n,machineConfigurationId:(null==D?void 0:D.configurationId)||void 0,maxMachineInstances:(null==D?void 0:D.maxInstances)||void 0,machineJob:ek&&eI?{timezone:ek,crontab:eI,timeoutSeconds:r$(eK,e1),failureNotifications:i}:void 0,config:{buildCommand:ep,runCommand:eg,appType:en,ignorePorts:eF,publicDir:ez},isPrivate:e5})];case 2:return a.sent(),N(),[3,4];case 3:if((o=a.sent())instanceof nJ.ZG)return ex("Run command cannot be empty."),[2];if(o instanceof nJ.SF)return eY("Public directory cannot be empty."),[2];if(o instanceof nJ.Iy)return eR(o.message||"Invalid timezone."),[2];if(o instanceof nJ.Bz)return eG(o.message||"Invalid crontab."),[2];return M(o.message),[3,4];case 4:return[2]}})}),function(){return m.apply(this,arguments)}),th=(0,g._)((0,b.useState)(!1),2),tm=th[0],tg=th[1],tv=(0,g._)((0,b.useState)(!1),2),ty=tv[0],tb=tv[1],tw=(0,(0,w.BU)().getDeployabilityByProvider)(R),tZ=ee?tw.redeploy.isAuthorized:tw.deploy.isAuthorized,tx=J||Y||!tZ||W===Z.z.Preparing||e4,tC=tx||ts&&!ec,tk=eN.map(function(e){return e.name}),t_=(y=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return tg(!0),[4,B.addEntries(eN.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),tg(!1),tb(!1),[2]}})}),function(){return y.apply(this,arguments)}),tT=Y?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eM,{}),(0,v.tZ)(eM,{}),(0,v.tZ)(eM,{})]}):(0,v.BX)(v.HY,{children:[tu?(0,v.tZ)(r3,{crontab:eI,setCrontab:eB,crontabError:eP,timezone:ek,setTimezone:e_,timezoneError:eE,loading:J,timeoutValue:eK,setTimeoutValue:eQ,timeoutUnits:e1,setTimeoutUnits:e2,setTimeoutValueError:e8}):null,ts?(0,v.tZ)(eU,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,v.tZ)(rw,{id:"primaryDomain",subdomain:eo,deploymentId:T||void 0,onChange:ea,updateValidity:eu})}):null,tc?(0,v.tZ)(eU,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,v.tZ)(rm,{id:"publicDir",value:ez,onChange:ej,loading:Y,disabled:tx,error:eJ})}):null,(0,v.tZ)(eU,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,v.tZ)(rm,{id:"buildCommand",value:ep,onChange:eh,loading:Y,disabled:tx})}),ta?(0,v.tZ)(eU,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,v.tZ)(rm,{id:"runCommand",value:eg,onChange:ev,loading:Y,disabled:tx,error:eZ})}):null,(0,v.tZ)(eU,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:(0,v.BX)(I.G,{css:[A.l0.colWithGap(12)],children:[eN.length>0?eN.map(function(e,t){var n=e.name,r=e.value;return(0,v.tZ)(rb,{index:t,name:n,value:r,updateEnvVarName:function(e){return tr(t,e)},updateEnvVarValue:function(e){return ti(t,e)},removeEnvVar:function(){return to(t)},disabled:tx,otherKeys:tk.filter(function(e,n){return n!==t}),devSecrets:tt},t)}):null,tt?(0,v.tZ)(ie,{secrets:new Map(eN.map(function(e){return[e.name,e.value]})),otherSecrets:tt,otherEnvName:"workspace",onAddSecret:function(e){return tn({name:e.key,value:e.value})},initialExpanded:X}):null,(0,v.tZ)(V.zx,{onClick:function(){return tn()},text:"Add deployment secret",iconLeft:(0,v.tZ)(r6.Z,{}),disabled:J})]})}),tl?(0,v.tZ)(eU,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,v.tZ)(rZ,{appType:en,onChange:function(e){er(e),eV((e===es.Vp.Server||e===es.Vp.Worker)&&e===es.Vp.Worker)}})}):null,tf?(0,v.tZ)(iu,{isPrivate:e5,setIsPrivate:e7}):null,td?(0,v.tZ)(rn,{ports:G,openNetworkingPane:F}):null]});return(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:ip.self,children:[tT,(0,v.BX)(I.G,{css:ip.footer,children:[(0,v.tZ)(nY,{deployability:tw,isRedeploy:ee}),(0,v.BX)(I.G,{css:ip.ctaGroup,children:[Q?(0,v.tZ)(V.zx,{text:"Cancel",onClick:O}):null,(0,v.tZ)(I.G,{css:ip.deployButton,children:(0,v.tZ)(V.zx,{colorway:"primary",onClick:tp,text:W===Z.z.Preparing&&"Preparing..."||Y&&"Fetching options..."||"Deploy",iconLeft:Y||W===Z.z.Preparing?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(r8.Z,{}),disabled:tC})})]})]})]}),(0,v.tZ)(q.u,{isOpen:ty,onRequestClose:function(){tm||tb(!1)},children:(0,v.BX)(I.G,{css:ip.secretsModal,children:[(0,v.tZ)(K.xv,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,v.tZ)(K.xv,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,v.BX)(I.G,{css:ip.secretsModalButtons,children:[(0,v.tZ)(V.zx,{text:"Cancel",disabled:tm,onClick:function(){tb(!1)}}),(0,v.tZ)(V.zx,{text:"Yes, copy secrets",colorway:"negative",disabled:tm,loading:tm,onClick:t_})]})]})})]})},im=(0,B.X)({type:[A.l0.borderRadius(8),A.l0.p(8)],hostingTierFlow:A.l0.colWithGap(8),manageReserved:A.l0.colWithGap(16),manageReservedHeader:[A.l0.rowWithGap(8),A.l0.align.center],scheduledJobsConfiguration:[A.l0.colWithGap(4)]});function ig(e){var t,n,r,i=e.replId,o=e.initialState,a=e.fs,l=e.secrets,c=e.dotReplit,s=e.ports,u=e.onBack,d=e.onDeploy,f=e.onError,p=e.openNetworkingPane,h=(0,g._)((0,b.useState)(o),2),m=h[0],y=h[1],w=(t=(0,_._)({},eE,{variables:{replId:i},onError:function(e){return f(e.message)}}),eS.a(eD,t)),Z=w.data,x=w.loading,C=(null==Z?void 0:Z.getRepl.__typename)==="Repl"?Z.getRepl:null,k=C?(0,tS.Jw)({replSlug:C.slug,username:null===(n=C.owner)||void 0===n?void 0:n.username}):"",S=(0,U.P5)({controlName:ed.dA,logFlagToAnalytics:!1});if(x)return(0,v.tZ)(eH,{});if(!C)return null;var T=(null==C?void 0:null===(r=C.owner)||void 0===r?void 0:r.__typename)==="Team";return m.type===es.r4.Static?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return u()},children:(0,v.tZ)(eF.Z,{})})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)($.Tg,{css:im.type,elevated:!0,children:(0,v.tZ)(tC,{label:"Type",fullWidth:!0,children:(0,v.tZ)(tx,{name:to[m.type]})})})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(ih,{initialSubdomain:k,deploymentId:null,provider:m.type,onError:f,onCancel:function(){return u()},onDeploy:d,dotReplit:c,fs:a,ports:s,secrets:l,openNetworkingPane:p})})]}):m.type===es.r4.Gce?(0,v.BX)(v.HY,{children:[(0,v.tZ)(e8,{isTeamRepl:T,onBack:u,onError:f,onChange:function(e){y({type:es.r4.Gce,machine:e})}}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(ih,{initialSubdomain:k,deploymentId:null,provider:m.type,machine:m.machine,onError:f,onCancel:u,onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:p})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.BX)(K.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:e2.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):m.type===es.r4.Cron?S?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eJ,{onBack:u})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.BX)(I.G,{css:im.scheduledJobsConfiguration,children:[(0,v.tZ)(K.xv,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",children:"Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $0.10/month per scheduled deployment scheduler."})]})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eU,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,v.tZ)($.Tg,{css:im.type,elevated:!0,children:(0,v.tZ)(tx,{name:"1 vCPU / 2 GiB RAM",sku:"$0.000028/sec"})})})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(ih,{initialSubdomain:k,deploymentId:null,provider:m.type,onError:f,onCancel:function(){return u()},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:p})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.BX)(K.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,v.tZ)("a",{href:e2.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):null:m.machine?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(eX.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return y({type:es.r4.CloudRun,machine:null})},children:(0,v.tZ)(eF.Z,{})})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)($.Tg,{css:im.type,elevated:!0,children:(0,v.tZ)(tC,{label:"Type",fullWidth:!0,children:(0,v.tZ)(tx,{name:to[m.type],sku:"".concat(m.machine.configurationLabel," / ").concat(m.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){y({type:es.r4.CloudRun,machine:null})}})})})}),(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(ih,{initialSubdomain:k,deploymentId:null,provider:m.type,machine:m.machine,onError:f,onCancel:function(){return y({type:es.r4.CloudRun})},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:p})})]}):(0,v.tZ)(ev,{maxWidth:!0,children:(0,v.tZ)(nq,{onBack:u,onError:f,onConfirm:function(e){y({type:es.r4.CloudRun,machine:e})}})})}var iv=(0,T.iv)([A.l0.reset.button,A.l0.focusRing,A.l0.display.flex,A.l0.position.relative,A.l0.borderRadius(),A.l0.py(8),A.l0.px(8),A.l0.rowWithGap(12),A.l0.align.center,(0,S._)({rowGap:0},G,[A.l0.pb(8),A.l0.pt(12),A.l0.colWithGap(4)])]),iy=(0,ea.$)(["transformOffset","transformOffsetHover","selectedBorderColor"]),ib=iy.cssVars,iw=iy.styleTokens,iZ=(0,B.X)({self:[(0,S._)({flex:1,minWidth:0,"&::after":{content:"none"}},G,{transform:iw.transformOffset,transition:"transform 120ms ease-in-out"})],selfLoading:[{flex:1,minWidth:0},j.p.foregroundPulse(),A.l0.border({color:A.TV.backgroundHighest})],button:[iv,z.gU.filledAndOutlined,A.l0.border({color:A.TV.outlineDimmer})],buttonActive:[iv,A.l0.cursor.pointer,A.l0.colorMixBg(A.TV.accentPrimaryDimmest,z.vb.interactiveBackground),A.l0.border({color:iw.selectedBorderColor})],recommended:[A.l0.py(2),A.l0.mx(8),A.l0.colorMixBg(A.TV.accentPrimaryDimmest),A.l0.color.accentPrimaryStrongest,A.l0.borderRadius("default","default",0,0),A.l0.display.none,(0,S._)({},G,A.l0.display.flex)],recommendedMobile:[A.l0.display.flex,A.l0.color.accentPrimaryStrongest,A.l0.backgroundColor.accentPrimaryDimmest,A.l0.py(2),A.l0.px(6),A.l0.borderRadius(),(0,S._)({},G,A.l0.display.none)],recommendedMobileActive:[A.l0.display.flex,A.l0.color.accentPrimaryStrongest,A.l0.backgroundColor.accentPrimaryDimmer,A.l0.py(2),A.l0.px(6),A.l0.borderRadius(),(0,S._)({},G,A.l0.display.none)],icon:[A.l0.color.foregroundDimmer,A.l0.center],iconActive:[A.l0.color.accentPrimaryStrongest,A.l0.center],tiersTitle:[A.l0.rowWithGap(8),A.l0.align.center],title:[A.l0.fontWeight.medium,A.l0.textAlign.left,A.l0.flex.growAndShrink(1)]});function ix(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.recommended,c=e.disabled,s=e.style,u=(t={},(0,S._)(t,es.r4.CloudRun,(0,v.tZ)(ee.Z,{size:24})),(0,S._)(t,es.r4.Gce,(0,v.tZ)(en.Z,{size:24})),(0,S._)(t,es.r4.Static,(0,v.tZ)(ei.Z,{size:24})),(0,S._)(t,es.r4.Cron,(0,v.tZ)(Q.Z,{size:24})),t)[i];return(0,v.BX)(I.G,{css:[n?iZ.selfLoading:iZ.self,c&&L.hiddenOnMobile],style:s,children:[(0,v.tZ)(I.G,{css:iZ.recommended,style:{visibility:l?"visible":"hidden"},children:(0,v.tZ)(K.xv,{variant:"small",children:"Recommended"})}),(0,v.BX)("button",{css:r?iZ.buttonActive:iZ.button,onClick:function(){return o(i)},disabled:n||c,children:[(0,v.tZ)(I.G,{css:r?iZ.iconActive:iZ.icon,children:u}),(0,v.tZ)(K.xv,{css:iZ.title,multiline:!1,children:a}),l?(0,v.tZ)(I.G,{css:r?iZ.recommendedMobileActive:iZ.recommendedMobile,children:"Recommended"}):null]})]})}var iC=[es.r4.Gce,es.r4.CloudRun,es.r4.Static,es.r4.Cron],ik=(0,B.X)({container:[A.l0.colWithGap(32),A.l0.textAlign.center,L.maxWidth],title:[A.l0.colWithGap(4),A.l0.width("100%"),A.l0.maxWidth(400),A.l0.align.center,{marginLeft:"auto",marginRight:"auto"}],body:A.l0.colWithGap(24),providers:[A.l0.flex.column,(0,S._)({gap:4},G,[A.l0.flex.row,A.l0.align.end,{gap:8,"&:hover > div":{transform:iw.transformOffsetHover,transition:"transform 120ms ease-in-out"}}])],providerDetails:A.l0.colWithGap(16),recommendationHeader:[A.l0.fontWeight.medium,A.l0.pb(12)],recommendationReasons:[A.l0.colWithGap(6),A.l0.border({color:A.TV.outlineDimmest}),A.l0.borderRadius(),A.l0.py(8),A.l0.px(12),{alignSelf:"center"}],recommendationReasonsUl:[A.l0.textAlign.left,A.l0.display.flex,A.l0.rowWithGap(8),{listStyleType:"disc"}],recommendationReason:[A.l0.ml(16)],descriptionTableToggle:[A.l0.color.foregroundDimmer,A.l0.hover(A.l0.color.foregroundDefault),{alignSelf:"center"}],descriptionTable:[A.l0.colWithGap(12),A.l0.pb(12),L.hiddenOnMobile],cta:[A.l0.width("100%"),A.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:A.l0.colWithGap(12),secondaryCta:[A.l0.width("100%"),A.l0.maxWidth(320)],ctaContainer:[A.l0.colWithGap(8),A.l0.align.center],ctaStatusBanner:[A.l0.textAlign.left],oldCta:[A.l0.px(8),A.l0.colWithGap(16)],payment:[A.l0.p(16),A.l0.borderRadius("container"),A.l0.textAlign.left,A.l0.shadow(2)],budgetContainer:[A.l0.colWithGap(8),A.l0.border(),A.l0.borderRadius(),A.l0.p(8)],disabledBanner:[A.l0.py(6),{alignSelf:"center"}],learnMoreLink:[A.l0.display.flex,A.l0.rowWithGap(6),A.l0.align.center,{alignSelf:"center"},A.l0.hover(A.l0.color.accentPrimaryStrongest)]}),iS=function(e){var t,n,r,i,o,a,l,c=e.replId,s=e.onError,u=e.onDeploy,d=e.onViewAction,f=e.initialSelectedProvider,p=(0,w.XZ)(),h=(0,w.Qk)(),m=(0,w.v5)(),y=(0,w.t7)(),Z=(0,g._)((0,b.useState)(void 0),2),C=Z[0],_=Z[1],T=(0,g._)((0,b.useState)(void 0),2),E=T[0],B=T[1],P=(0,g._)((0,b.useState)(!1),2),G=P[0],N=P[1],O=(0,g._)((0,b.useState)(!1),2),M=O[0],X=O[1],F=(0,g._)((0,b.useState)(null!=f?f:null),2),z=F[0],j=F[1],J=(0,g._)((0,b.useState)(!1),2),Y=J[0],Q=J[1],ee=(0,w.BU)(),et=ee.getDeployabilityByProvider,en=ee.refetch;(0,b.useEffect)(function(){ew({context:"intro"})},[]);var ei=(0,ec.Se)(),eo=ei.getDescription,ea=ei.Icon,el=eP({variables:{id:c},onError:function(e){return s(e.message)}}),eu=el.loading,ep=el.data,eh=(0,g._)((0,b.useState)(!1),2),em=eh[0],eg=eh[1],eb=(null==ep?void 0:ep.getRepl.__typename)==="Repl"&&(null===(n=ep.getRepl.owner)||void 0===n?void 0:n.__typename)==="Team",eZ=(null==ep?void 0:ep.getRepl.__typename)==="Repl"&&(null==ep?void 0:null===(r=ep.getRepl.owner)||void 0===r?void 0:r.id)&&(0,ef.xm)(null==ep?void 0:null===(i=ep.getRepl.owner)||void 0===i?void 0:i.id),eC=(null==ep?void 0:null===(o=ep.getRepl)||void 0===o?void 0:o.__typename)==="Repl"&&(null===(a=ep.getRepl.org)||void 0===a?void 0:a.type)==="team"?ep.getRepl.org:void 0,ek=(0,U.P5)({controlName:ed.dA,logFlagToAnalytics:!1});(0,b.useEffect)(function(){(0,x._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(eu)return[2];if(eb&&!eZ)return _(es.r4.Gce),B(es.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,ey.$f)(m)];case 2:if(null===(e=n.sent()).appType)return _(es.r4.CloudRun),B(es.r4.CloudRun),[2];if((t=(0,D.oU)(e.appType))===es.r4.Goval||t===es.r4.Extension)return s("Did not recognize template deployment provider"),[2];return _(t),B(t),[3,4];case 3:return n.sent(),s("Something went wrong"),[3,4];case 4:return[2]}})})()},[s,m,eu,eb,eZ]);var eS=(0,b.useCallback)((0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return eg(!0),[4,en()];case 1:return e.sent(),eg(!1),[2]}})}),[en,eg]);if(z)return(0,v.tZ)(ig,{replId:c,initialState:z?{type:z}:{type:es.r4.Gce,didCheckout:!0},fs:p,secrets:h,dotReplit:m,ports:y,onDeploy:u,onBack:function(){return j(null)},onError:s,openNetworkingPane:function(){d({type:ex.a.OpenPane,payload:{type:"networking"}})}});var e_=et(C),eT=e_.deploy,eE=e_.isIncludedInSubscription,eR=eT.isAuthorized,eD=eT.code,eI=eT.message,eB=eu||em||void 0===C,eA=(l={},(0,S._)(l,es.r4.Gce,{display:!0,title:"Reserved VM",description:"Provides a high-uptime VM; best for apps with known resource needs and persistent session data",billing:(t=(0,g._)((0,ed.gr)("e2-micro"),1)[0],"Billed hourly starting at $".concat(t,"/hour.")),examples:"Web scrapers, stateful APIs, long-running jobs"}),(0,S._)(l,es.r4.CloudRun,{display:!0,title:"Autoscale",description:"Scales resources from zero to any level of traffic; ideal for apps with variable demand",billing:"Usage-based  700 minutes of machine time will cost $1 to start",examples:"Web apps, stateless APIs"}),(0,S._)(l,es.r4.Static,{display:!0,title:"Static",description:"Serves static content like HTML/CSS; simple and cost-effective for websites that don't require a server",billing:"Free, only pay for outbound data transfer (included in Replit plans). Otherwise, $0.10/GiB",examples:"Statically-generated sites or plain HTML/CSS/JS"}),(0,S._)(l,es.r4.Cron,{display:ek,title:"Scheduled",description:"Runs tasks at specified times configured by you; useful for periodic jobs like daily reports",billing:"Usage-based  595 minutes of machine time will cost $1",examples:"Monitors, Slack reminder bots, periodic scrapers"}),l),eG=(iC.length-1)/2;return(0,v.BX)(ev,{centered:!0,children:[(0,v.tZ)(q.u,{isOpen:M,onRequestClose:function(){return X(!1)},children:(0,v.tZ)(R.Z,{onRequestClose:function(){return X(!1)}})}),(0,v.BX)(I.G,{css:ik.container,children:[(0,v.BX)(I.G,{css:ik.title,children:[(0,v.tZ)(ea,{pane:{type:"deployments"},size:48}),(0,v.tZ)(K.h4,{level:1,variant:"subheadBig",children:"Deploy to production"}),(0,v.tZ)(K.xv,{color:"dimmer",children:eo({type:"deployments"})})]}),(0,v.BX)(I.G,{css:ik.body,children:[(0,v.tZ)(I.G,{css:ik.providers,children:iC.map(function(e,t){var n,r=-(t-eG);if(!eA[e].display)return null;var i=eA[e].title,o=E===e,a=C===e;return(0,v.BX)(v.HY,{children:[(0,v.tZ)(ix,{provider:e,loading:eB,active:a,onClick:function(e){_(e),N(!1),Y||Q(!0)},title:i,recommended:o,disabled:!Y&&!o,style:(n={},(0,S._)(n,ib.transformOffset,Y?0:"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))")),(0,S._)(n,ib.transformOffsetHover,Y?0:a?"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))"):"translateX(calc(".concat(100*r,"% + ").concat(t<eG?8*r-75:8*r+75,"px)) scale(0.8)")),(0,S._)(n,"zIndex",o?1:void 0),(0,S._)(n,ib.selectedBorderColor,Y?A.TV.accentPrimaryStronger:A.TV.accentPrimaryDimmest),n)},e),(0,v.tZ)(iD,{info:eA[e],render:C===e})]})})}),E&&!Y?(0,v.BX)(I.G,{css:L.hiddenOnMobile,children:[(0,v.BX)(I.G,{css:ik.recommendationHeader,children:[eA[E].title," is recommended for this template"]}),(0,v.tZ)(iR,{info:eA[E],dim:!0})]}):null,Y?(0,v.BX)(I.G,{css:ik.descriptionTable,children:[(0,v.tZ)(iE,{title:"Description",content:iC.map(function(e){return eA[e].description})}),(0,v.tZ)(iE,{title:"Billing",content:iC.map(function(e){return eA[e].billing})}),(0,v.tZ)(iE,{title:"Example apps",content:iC.map(function(e){return eA[e].examples})})]}):null,(0,v.BX)(I.G,{css:ik.ctaGroup,children:[(0,v.tZ)(V.zx,{variant:"nofill",css:ik.descriptionTableToggle,text:Y?"Only show recommended deployment type":"Show all deployment types",onClick:function(){Q(function(e){return e&&_(E),!e})}}),(0,v.tZ)(i_,{loading:eB,provider:C,isDeployable:eR,isDeployableCode:eD,isDeployableExplanation:eI,isIncludedInSubscription:eE,handleOnProviderContinue:function(){C&&j(C)},refetchDeployabilityQueryData:eS,setShowPaymentMethodForm:function(){return N(!0)},showPaymentMethodForm:G,setShowSupportForm:function(){return X(!0)},org:eC}),G?(0,v.tZ)($.Tg,{elevated:!0,css:ik.payment,children:(0,v.tZ)(W.q,{onSuccess:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return N(!1),[4,eS()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,v.tZ)(H.Z,{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",css:ik.learnMoreLink,iconRight:(0,v.tZ)(er.Z,{}),text:"Learn more about Deployments"})]})]})};function i_(e){var t=e.provider,n=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.handleOnProviderContinue,c=e.refetchDeployabilityQueryData,s=e.setShowPaymentMethodForm,u=e.showPaymentMethodForm,d=e.setShowSupportForm,f=e.org,p=(0,M.sG)(),h=(0,U.P5)({controlName:ed.su,logFlagToAnalytics:!1}),m=(0,U.P5)({controlName:ed.jp,logFlagToAnalytics:!1});if(!n&&p)return(0,v.tZ)(J.E,{text:i,colorway:"grey",css:ik.disabledBanner});if(o)return(0,v.BX)(v.HY,{children:[(0,v.tZ)(V.zx,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:ik.cta}),(0,v.tZ)(K.xv,{color:"dimmer",children:i})]});var g=function(){if(f){var e=(0,X._Q)(f).settings.href.toString()+"/billing";window.open(e,"_blank");return}s()};switch(r){case es.RO.RequiresActiveSubscription:case es.RO.RequiresPaymentMethodOrSubscription:if(h&&r===es.RO.RequiresActiveSubscription)return(0,v.tZ)(I.G,{css:ik.ctaContainer,children:(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ik.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c})});return(0,v.BX)(I.G,{css:ik.ctaContainer,children:[(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ik.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c}),(0,v.tZ)(V.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:ik.cta,disabled:u,loading:a,iconLeft:(0,v.tZ)(et.Z,{}),onClick:g})]});case es.RO.RequiresSmsVerification:return(0,v.tZ)(E.Z,{context:es.jv.Deployments,onSuccess:c});case es.RO.RequiresPaymentMethod:return(0,v.tZ)(V.zx,{colorway:"primary",text:"Add a payment method",css:ik.cta,disabled:u,loading:a,iconLeft:(0,v.tZ)(et.Z,{}),onClick:g});case es.RO.RequiresUnbanning:return(0,v.tZ)(Y.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,v.tZ)(eo.Z,{}),css:ik.ctaStatusBanner,onClick:function(){return d()}});case es.RO.InsufficientBudget:return(0,v.BX)(v.HY,{children:[(0,v.tZ)(J.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),css:ik.ctaStatusBanner}),(0,v.tZ)(I.G,{css:ik.budgetContainer,children:(0,v.tZ)(F.L,{onUpdateSuccess:c})})]});case es.RO.FeatureDisabled:case es.RO.FeatureUnsupportedForReplitTeams:case es.RO.FeatureUnsupportedForTeamsEdu:case es.RO.FeatureUnsupportedForTeamsFree:case es.RO.FeatureUnsupportedForTeamsPro:case es.RO.InsufficientPermissions:case es.RO.InsufficientQuota:case es.RO.RequiresEmailVerification:if(m&&r===es.RO.InsufficientQuota&&"static"===t)return(0,v.BX)(I.G,{css:ik.ctaContainer,children:[(0,v.tZ)(J.E,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:ik.disabledBanner}),(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:ik.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c})]});return(0,v.tZ)(J.E,{text:i,colorway:"grey",css:ik.disabledBanner});case es.RO.Authorized:case es.RO.AuthorizedQuota:return(0,v.tZ)(V.zx,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:ik.cta});default:(0,eu.Z)(r)}}var iT=(0,B.X)({root:[A.l0.colWithGap(4),A.l0.textAlign.left,A.l0.display.none,(0,S._)({},G,A.l0.display.flex)],title:[A.l0.px(2),A.l0.fontWeight.medium],content:[A.l0.rowWithGap(8)],p:[A.l0.px(2),{flex:1}],hr:[A.l0.height(1),A.l0.backgroundColor.outlineDimmest,A.l0.mx(2)],soloRoot:[A.l0.display.grid,A.l0.textAlign.left,A.l0.pl(4),A.l0.py(4),(0,S._)({gridTemplateColumns:"auto",columnGap:16},G,[A.l0.pl(0),A.l0.py(0),A.l0.maxWidth(400),{gridTemplateColumns:"max-content auto",marginInline:"auto"}])],soloTitles:(0,S._)({},G,A.l0.textAlign.left),soloDescriptions:A.l0.pb(8),autosizeContainer:[A.l0.display.flex,A.l0.overflow("hidden"),(0,S._)({transition:"height 120ms ease-out"},G,A.l0.display.none)]});function iE(e){var t=e.content,n=e.title;return(0,v.BX)(I.G,{css:iT.root,children:[(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",css:iT.title,children:n}),(0,v.tZ)(I.G,{css:iT.hr}),(0,v.tZ)(I.G,{css:iT.content,children:t.map(function(e,t){return(0,v.tZ)(K.xv,{variant:"small",css:iT.p,children:e},t)})})]})}function iR(e){var t=e.info,n=e.dim;return(0,v.BX)(I.G,{css:iT.soloRoot,children:[(0,v.tZ)(K.xv,{color:n?"dimmest":"dimmer",css:iT.soloTitles,children:"Description"}),(0,v.tZ)(K.xv,{color:n?"dimmer":"default",css:iT.soloDescriptions,children:t.description}),(0,v.tZ)(K.xv,{color:n?"dimmest":"dimmer",css:iT.soloTitles,children:"Billing"}),(0,v.tZ)(K.xv,{color:n?"dimmer":"default",css:iT.soloDescriptions,children:t.billing}),(0,v.tZ)(K.xv,{color:n?"dimmest":"dimmer",css:iT.soloTitles,children:"Example apps"}),(0,v.tZ)(K.xv,{color:n?"dimmer":"default",css:iT.soloDescriptions,children:t.examples})]})}function iD(e){var t=e.info,n=e.render,r=e.initialHeight,i=(0,b.useRef)(null),o=(0,b.useRef)(null),a=O(o),l=a>0?a:r,c={transition:"200ms ease-in-out",transitionProperty:"height",height:0,visibility:"hidden"},s={entering:{height:l,visibility:"visible"},entered:{height:l,visibility:"visible"},exiting:{height:0,visibility:"visible"},exited:{height:0,visibility:"hidden"}};return(0,v.tZ)(P.ZP,{nodeRef:i,timeout:200,in:n,children:function(e){return(0,v.tZ)(I.G,{innerRef:i,style:(0,_._)({},c,s[e]),css:iT.autosizeContainer,children:(0,v.tZ)(I.G,{innerRef:o,children:(0,v.tZ)(iR,{info:t})})})}})}var iI=n(54455);function iB(){var e=(0,eC._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return iB=function(){return e},e}function iA(){var e=(0,eC._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return iA=function(){return e},e}var iP={},iG=(0,ek.Ps)(iB()),iL=(0,ek.Ps)(iA()),iN=n(15323),iO=n(2447),iU=n(16936),iM=n(84e3),iX=n(58474);function iF(){var e=(0,eC._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return iF=function(){return e},e}function iW(){var e=(0,eC._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return iW=function(){return e},e}function iV(){var e=(0,eC._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return iV=function(){return e},e}var iH={},iz=(0,ek.Ps)(iF()),ij=(0,ek.Ps)(iW(),iz),iq=(0,ek.Ps)(iV(),iz),iJ=n(37862),iY=n(50157),i$=n(27001),iK=(0,b.createContext)(null),iQ=function(){var e=(0,b.useContext)(iK);if(!e)throw Error("Expected log context in context");return e},i0=function(e){var t,n,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,c=e.openFile,s=(0,g._)((0,b.useState)(null),2),u=s[0],d=s[1],f=(0,g._)((0,b.useState)([]),2),p=f[0],h=f[1],m=(0,g._)((0,b.useState)(),2),v=m[0],y=m[1],w=(0,g._)((0,b.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),Z=w[0],S=w[1],T=(0,b.useCallback)(function(){return S({message:"",executionId:l,start:null,end:null,level:null})},[l]),E=(0,g._)((0,b.useState)(!0),2),R=E[0],D=E[1],I=(0,g._)((0,b.useState)(!1),2),B=I[0],A=I[1],P=(0,g._)((0,b.useState)(!1),2),G=P[0],L=P[1],N=(0,g._)((0,b.useState)(!1),2),O=N[0],U=N[1],M=(0,g._)((0,i$.Z)("deployments-logs-color",!0),2),X=M[0],F=M[1],W=(0,b.useRef)(!1),V=(0,iJ.Z)(function(e){var t=e.width;if(void 0!==t){var n=t>500;L(n),W.current||(W.current=!0,A(n))}}),H=(0,iY.iT)(),z=(t={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:Z.executionId?"d-scheduled-".concat(o,"-").concat(Z.executionId):void 0,limit:100,level:Z.level,message:Z.message,start:null===(r=Z.start)||void 0===r?void 0:r.toDate(H).toISOString(),end:null===(i=Z.end)||void 0===i?void 0:i.toDate(H).toISOString()},onError:function(){y("Something went wrong"),h([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl){if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){y(void 0);var t=e.getRepl.hostingDeploymentLogs.result,n=(0,C._)(t).reverse();if(!u){if(t.length>0){var r=new Date(t[0].timestamp);r.setSeconds(r.getSeconds()+1),d(r.toISOString())}else d(new Date().toISOString())}h(n)}else y(e.getRepl.hostingDeploymentLogs.message),h([])}}},n=(0,_._)({},iH,t),eS.a(ij,n)),j=z.loading,q=z.fetchMore,J=z.subscribeToMore,Y=z.variables;(0,b.useEffect)(function(){j&&d(null)},[j]),(0,b.useEffect)(function(){d(null)},[Z,o,a,l]),(0,b.useEffect)(function(){if(u)return J({document:iq,variables:{input:(0,ep._)((0,_._)({deploymentId:o,executionId:l},Z),{start:Z.end?Z.start:u,level:Z.level||void 0})},updateQuery:function(e,t){var n=t.subscriptionData;return(0,it.Uy)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var t=n.data.hostingDeploymentLogUpdates;e.getRepl.hostingDeploymentLogs.result.unshift(t)}return e})}})},[J,o,l,j,Z,u]);var $=(0,b.useRef)(null),K=(0,b.useRef)(!1),Q=(0,b.useRef)(!1),ee=(0,b.useCallback)((0,x._)(function(){var e,t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:if(e=$.current?Math.abs($.current.getTime()-Date.now()):0,j||$.current&&e<500||Q.current||K.current)return[2];return(t=new Date(p[0].timestamp)).setSeconds(t.getSeconds()-1),K.current=!0,[4,q({variables:(0,ep._)((0,_._)({},Y),{end:t.toISOString()})})];case 1:return n=i.sent().data,K.current=!1,"hostingDeploymentLogs"in n.getRepl&&"ReplLogs"===n.getRepl.hostingDeploymentLogs.__typename&&($.current=new Date,0===n.getRepl.hostingDeploymentLogs.result.length?Q.current=!0:(r=(0,C._)(n.getRepl.hostingDeploymentLogs.result).reverse(),h(function(e){return(0,C._)(r).concat((0,C._)(e))}))),[2]}})}),[q,j,p,Y]);return(0,b.useMemo)(function(){return{logs:p,loading:j,error:v,fetchPage:ee,isLive:R,setIsLive:D,isExpanded:B,setIsExpanded:A,filter:Z,setFilter:S,clearFilter:T,deploymentId:o,containerRef:V,isWide:G,isWrapped:O,setIsWrapped:U,openFile:c,isColorful:X,setIsColorful:F}},[T,V,o,v,ee,Z,X,B,R,G,O,j,p,c,F])},i1=n(23522),i2=n(70196),i3=(0,B.X)({root:[A.l0.transition.none,A.l0.reset.button,A.l0.flex.row,A.l0.align.center,A.l0.font.code,A.l0.fontSize(12),A.l0.textAlign.left,A.l0.position.absolute,A.l0.top(0),A.l0.left(0),A.l0.width("100%"),A.l0.color.foregroundDefault,A.l0.border({color:A.TV.outlineDimmest,direction:"bottom"}),A.l0.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(A.TV.backgroundDefault),"&:hover":{backgroundColor:z.vb.interactiveBackground,"--cell-background":"".concat(z.vb.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[A.l0.colorMixBg(A.TV.accentNegativeDimmest,"transparent"),{borderBottomColor:A.TV.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+A.TV.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(A.TV.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+A.TV.accentPrimaryDefault}},A.l0.highRes({boxShadow:"0 -0.5px 0 0 "+A.TV.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+A.TV.accentPrimaryDefault}})]}],primaryCell:[A.l0.display.block,A.l0.pl(6),A.l0.py(6),A.l0.pr(4),A.l0.flex.growAndShrink(1),A.l0.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[A.l0.p(6),A.l0.color.foregroundDimmest,A.l0.truncate,{'&[data-error="true"]':A.l0.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),i4=(0,b.memo)(function(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,c=iQ(),s=c.isWrapped,u=c.isColorful&&t.level===es.in.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!t.line.includes(e)}),d=(0,b.useMemo)(function(){return(0,i2.Z)(t.line)},[t.line]);return(0,v.BX)("div",{tabIndex:0,role:"button",title:d,css:i3.root,style:{height:r,transform:"translateY(".concat(n,"px)")},"data-error":u,children:[l.map(function(e,n){var r=n===l.length-1,a=e.renderCell(t);return(0,v.tZ)(I.G,{css:r?i3.primaryCell:i3.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":s,children:a},e.key)}),(0,v.tZ)("span",{css:i3.copyColumn,className:"copy",children:!a&&(0,v.tZ)(i1.m,{textToCopy:d,tooltipDisable:!0,css:i3.copyButton})})]})}),i8=n(63123),i6=n(72748),i5=n(37633),i7=n(73966),i9=n.n(i7),oe=n(50900),ot=new(n(69244)).cF,on=function(e){var t=e.log,n=e.files,r=iQ().openFile,i=t.line;i=t.level===es.in.Error?(0,i2.Z)(t.line):ot.toHtml(t.line);var o=(0,g._)((0,b.useState)([]),2),a=o[0],l=o[1];(0,b.useEffect)(function(){(0,oe.r)(i,function(){return Promise.resolve(n)}).then(function(e){return l(e)})},[n,i]);var c=(0,b.useCallback)(function(e){e.preventDefault();var t=e.target;t.dataset.file&&r({path:t.dataset.file})},[r]);return(0,v.tZ)("div",{dangerouslySetInnerHTML:{__html:function(e,t){t.sort(function(e,t){return e.from-t.from});var n="",r=0;return t.forEach(function(t){n+=e.slice(r,t.from);var i=e.slice(t.from,t.to);n+='<a href="#" data-file="'.concat(t.file,'">').concat(i,"</a>"),r=t.to}),n+=e.slice(r)}(i,a)},onKeyDown:c,onClick:c})},or=n(90831),oi=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=(0,b.useRef)(!1);return(0,iU.q)(function(){t.current&&setTimeout(function(){n.current&&((0,or.Z)(n.current),r.current=!0)},0)}),{didInitialScroll:r}},oo=function(e){var t,n=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=iQ(),a=o.fetchPage,l=o.setIsLive,c=(0,g._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,g._)((0,b.useState)(0),2),f=d[0],p=d[1],h=(0,g._)((0,b.useState)(0),2),m=h[0],v=h[1],y=(0,b.useRef)(),w=(0,b.useRef)(!1);(0,b.useEffect)(function(){i.current&&p(i.current.offsetWidth-i.current.clientWidth)},[i]);var Z=(0,b.useCallback)(function(e){(y.current||s)&&clearTimeout(y.current),u(!0),y.current=setTimeout(function(){u(!1),v(e.scrollLeft)},100)},[s]);return{scrollHandler:(0,b.useCallback)((t=(0,x._)(function(e){var t,i,o,c,s,u,d;return(0,k.Jh)(this,function(f){switch(f.label){case 0:if(!(t=e.currentTarget)||w.current)return[2];if(Z(t),i=t.scrollHeight,o=t.scrollTop,l(s=i-(c=t.clientHeight)===o),u=20*r,!(!s&&o<u&&i>c&&n.current))return[3,5];w.current=!0,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,a()];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),rX.Tb(d),[3,4];case 4:w.current=!1,f.label=5;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[Z,l,r,n,a]),isScrolling:s,scrollLeftOffset:m-f}},oa=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=iQ(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,c=(0,b.useRef)(0),s=(0,b.useRef)(o[0]),u=(0,b.useCallback)(function(){n.current&&(0,or.Z)(n.current)},[n]);(0,b.useEffect)(function(){var e=t.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(s.current&&s.current.timestamp>o[0].timestamp){var n=e.scrollHeight;if(n!==c.current){var r=n-c.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}s.current=o[0],c.current=e.scrollHeight}},[a,i,o,t,u]);var d=(0,b.useRef)(l);(0,b.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},ol=(0,B.X)({root:[{overflow:"auto"},A.l0.flex.growAndShrink(1)],virtualTable:[A.l0.width("100%"),A.l0.position.relative],tableHeader:[A.l0.display.flex,A.l0.flex.row,A.l0.backgroundColor.backgroundDefault,A.l0.position.sticky,A.l0.zIndex(1),A.l0.top(0),A.l0.border({color:A.TV.outlineDimmest,direction:"bottom"})],columnHeader:[A.l0.color.foregroundDimmer,A.l0.fontSize(12),{lineHeight:"18px"},A.l0.px(6),A.l0.justify.center],infoTooltip:[A.l0.display.flex,A.l0.align.center,A.l0.gap(4),{lineHeight:0}],bottomAnchor:[A.l0.position.absolute,A.l0.bottom(0),A.l0.left(0),A.l0.right(0)]}),oc=function(){var e=iQ().isColorful,t=(0,i5.f)();return(0,b.useMemo)(function(){var n={};if(t){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,g._)(a.value,2),s=c[0],u=c[1];n["--ansi-".concat(i9()(s))]=e?u:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return n},[e,t])};function os(){var e=iQ(),t=e.loading,n=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(t||n),c=(0,b.useRef)(null),s=(0,b.useRef)(null),u=(0,M.sG)(),d=oc(),f=u?44:26,p=(0,iI.MG)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return f},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var t=new Set([0].concat((0,C._)((0,iX.MK)(e))));return(0,C._)(t)}});oa({scrollRef:c,scrollBottomRef:s});var h=oo({didInitialScroll:oi({scrollRef:c,scrollBottomRef:s}).didInitialScroll,itemHeight:f,scrollRef:c}),m=h.scrollHandler,y=h.isScrolling,Z=h.scrollLeftOffset,x=(0,w.$y)(),k=(null==x?void 0:x.provider)===es.r4.Cron,S=(0,b.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,C._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),T=(0,w.XZ)().listFiles,E=(0,g._)((0,b.useState)([]),2),R=E[0],D=E[1];(0,b.useEffect)(function(){T().then(function(e){e.files&&D(e.files)})},[T]);var B=(0,M.sG)(),A=(0,b.useMemo)(function(){return[{key:"time",title:(0,v.BX)("span",{css:ol.infoTooltip,children:["Time",!B&&(0,v.tZ)(eL.u,{tooltip:"Logs persist for up to 30 days",css:ol.infoTooltip,children:(0,v.tZ)(eN.Z,{size:12})})]}),width:a?173:115,renderCell:function(e){var t=(0,i8.Z)(e.timestamp);return(0,i6.Z)(t,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var t=e.buildId.split("-");return t?t[0]:e.buildId}},k&&{key:"run",title:"Run",width:50,renderCell:function(e){var t,n=null===(t=e.executionId)||void 0===t?void 0:t.split("-");return n?n[n.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:S,key:"log",title:"Log",renderCell:function(e){return(0,v.tZ)(on,{files:R,log:e})}}].filter(Boolean)},[R,k,i,B,a,o,S]),P=(0,b.useMemo)(function(){return A.reduce(function(e,t){return e+(t.width||0)},0)},[A]);return(0,v.tZ)(I.G,{innerRef:c,css:ol.root,onScroll:m,children:(0,v.BX)(I.G,{style:(0,_._)({height:p.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(Z,"px")},d),css:ol.virtualTable,children:[(0,v.tZ)(I.G,{css:ol.tableHeader,children:A.map(function(e){return(0,v.tZ)(I.G,{tag:"div",css:ol.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:f},children:e.title},e.key)})}),p.getVirtualItems().map(function(e){var t=r[e.index];return t?(0,v.tZ)(i4,{log:t,height:e.size,y:e.start,resizeRef:p.measureElement,index:e.index,disabled:l,isScrolling:y,columns:A},e.key):null}),(0,v.tZ)("div",{ref:s,css:ol.bottomAnchor})]})})}var ou=(0,B.X)({root:[A.l0.flex.grow(1)],noLogsContainer:[A.l0.colWithGap(8),A.l0.pt(4)],noLogsText:[A.l0.textAlign.center],viewError:[A.l0.pt(0)]});function od(){var e=iQ(),t=e.logs,n=e.error;return e.loading?(0,v.tZ)(ev,{css:ou.root,centered:!0,children:(0,v.tZ)(eH,{})}):0===t.length?(0,v.BX)(v.HY,{children:[n?(0,v.tZ)(ej,{css:ou.viewError,text:n}):null,(0,v.tZ)(ev,{css:ou.root,children:(0,v.BX)(I.G,{css:ou.noLogsContainer,children:[(0,v.tZ)(K.xv,{css:ou.noLogsText,children:"No logs are available."}),(0,v.BX)(K.xv,{color:"dimmer",css:ou.noLogsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return ew({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,v.tZ)(os,{})}var of=n(59140),op=n(7300),oh=n(5189),om=n(31718),og=n(28065);function ov(e){return(0,v.tZ)(og.ZP,(0,ep._)((0,_._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,v.tZ)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var oy=n(1056),ob=(0,B.X)({root:[A.l0.rowWithGap(8),A.l0.justify.spaceBetween,A.l0.border({color:A.TV.outlineDimmest,direction:"top"}),A.l0.height(29)],group:[A.l0.display.flex,A.l0.rowWithGap(8)],button:[A.l0.color.foregroundDefault,A.l0.borderRadius(0),A.l0.height("100%")],liveIndicatorWrapper:[A.l0.width(16),A.l0.height(16),A.l0.display.flex,A.l0.align.center,A.l0.justify.center],liveIndicator:[A.l0.width(6),A.l0.height(6),A.l0.borderRadius("full"),A.l0.backgroundColor.accentPositiveStronger],checkboxWrapper:[A.l0.display.flex,A.l0.align.center,A.l0.rowWithGap(4),A.l0.cursor.pointer],checkbox:[{input:[A.l0.width(16),A.l0.height(16)]}]});function ow(){var e=iQ(),t=e.isLive,n=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,c=e.setIsColorful,s=(0,ra.U)();return(0,v.BX)(I.G,{css:ob.root,children:[(0,v.BX)(I.G,{css:ob.group,children:[(0,v.tZ)(V.zx,{iconLeft:r?(0,v.tZ)(op.Z,{rotate:90}):(0,v.tZ)(oh.Z,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:ob.button}),(0,v.BX)("label",{css:ob.checkboxWrapper,htmlFor:s("wrap"),children:[(0,v.tZ)(om.X,{id:s("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:ob.checkbox}),(0,v.tZ)(ov,{}),(0,v.tZ)("span",{children:"Wrap"})]}),(0,v.BX)("label",{css:ob.checkboxWrapper,htmlFor:s("colorful"),children:[(0,v.tZ)(om.X,{id:s("colorful"),checked:l,onChange:function(){return c(function(e){return!e})},css:ob.checkbox}),(0,v.tZ)(oy.Z,{}),(0,v.tZ)("span",{children:"Colors"})]})]}),(0,v.tZ)(I.G,{css:ob.group,children:(0,v.tZ)(V.zx,{iconLeft:t?(0,v.tZ)(I.G,{css:ob.liveIndicatorWrapper,children:(0,v.tZ)(I.G,{css:ob.liveIndicator})}):(0,v.tZ)(of.Z,{}),onClick:function(){return n(function(e){return!e})},variant:"nofill",text:"Live",css:ob.button})})]})}var oZ=n(82922),ox=n(82410),oC=n(91466),ok=n(94668),oS=n(97221),o_=n(93721),oT=(0,B.X)({buttonGroup:[A.l0.flex.row,A.l0.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}],checkboxWithLabel:[A.l0.rowWithGap(8),A.l0.p(8)],dateRangeInputs:[A.l0.display.grid,A.l0.gap(8),A.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}],clearFilterButton:[A.l0.borderRadius(0),A.l0.width("fit-content")]});function oE(e){var t=e.onClear,n=e.label,r=e.buttonProps,i=e.children,o=t?"primary":void 0,a=(0,g._)((0,b.useState)(!1),2),l=a[0],c=a[1];return(0,v.BX)(o_.Z,{css:oT.buttonGroup,children:[(0,v.BX)(rx.xo,{label:n,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,v.tZ)(V.zx,(0,_._)({colorway:o},r)),i]}),t?(0,v.tZ)(V.zx,{colorway:o,text:"",iconLeft:(0,v.tZ)(n1.Z,{}),onClick:t}):null]})}var oR=n(99065),oD=n(67824),oI=n(3043),oB=n(54151),oA=n(33869),oP=(0,B.X)({group:[A.l0.display.flex,{gap:A.TV.space4},A.l0.position.relative],dateInput:[eG.u3,A.l0.flex.row,{gap:A.TV.space4}],dateSegment:[A.l0.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(A.TV.accentPrimaryDefault),outlineOffset:1}}],iconButton:[A.l0.position.absolute,A.l0.top("50%"),A.l0.right(0),{transform:"translateY(-50%)"}],calendar:[A.l0.p(8)],calendarHeader:[A.l0.flex.row,A.l0.align.center,A.l0.justify.spaceBetween],calendarHeaderText:[A.l0.fontSize(A.TV.fontSizeDefault),A.l0.color.foregroundDefault,A.l0.fontWeight.normal],arrowButton:[z.gU.listItem,A.l0.borderRadius("default"),A.l0.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[A.l0.mt(8),{th:[A.l0.height(14),A.l0.color.foregroundDimmer,A.l0.fontWeight.normal,A.l0.pb(4)]}],calendarCell:[z.gU.listItem,A.l0.flex.column,A.l0.fontSize(A.TV.fontSizeDefault),A.l0.width(32),A.l0.height(28),A.l0.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[A.l0.display.none],'&[data-selected="true"]':{"&, &:hover":[A.l0.backgroundColor.accentPrimaryDimmer]}}]});function oG(e){var t=(0,g._)((0,b.useState)(!1),2),n=t[0],r=t[1];return(0,v.tZ)(oD.Mt,(0,ep._)((0,_._)({},e),{children:(0,v.BX)(o_.Z,{css:oP.group,children:[(0,v.tZ)(oI.Wr,{css:oP.dateInput,children:function(e){return(0,v.tZ)(oI.kE,{segment:e,css:oP.dateSegment})}}),(0,v.BX)(rx.xo,{label:"Calendar",isOpen:n,onOpenChange:r,children:[(0,v.tZ)(eX.hU,{alt:"Open calendar",tooltipBehavior:"hidden",css:oP.iconButton,children:(0,v.tZ)(oR.Z,{})}),(0,v.BX)(oB.f,{css:oP.calendar,children:[(0,v.BX)("header",{css:oP.calendarHeader,children:[(0,v.tZ)(rT.z,{slot:"previous",css:oP.arrowButton,children:(0,v.tZ)(eF.Z,{})}),(0,v.tZ)(oA.X,{css:oP.calendarHeaderText}),(0,v.tZ)(rT.z,{slot:"next",css:oP.arrowButton,children:(0,v.tZ)(e1.Z,{})})]}),(0,v.tZ)(oB.TK,{css:oP.calendarGrid,children:function(e){return(0,v.tZ)(oB.VX,{date:e,css:oP.calendarCell})}})]})]})]})}))}var oL=(0,B.X)({section:[A.l0.p(8),A.l0.gap(8)],dateRangeInputs:[A.l0.display.grid,A.l0.gap(8),A.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),oN=function(){var e=iQ(),t=e.filter,n=e.setFilter;return(0,v.BX)(I.G,{css:oL.dateRangeInputs,children:[(0,v.tZ)(oS._,{variant:"text",children:"After"}),(0,v.tZ)(oG,{granularity:"minute",hourCycle:24,value:t.start,onChange:function(e){return n(function(t){return(0,ep._)((0,_._)({},t),{start:e})})}}),(0,v.tZ)(oS._,{variant:"text",children:"Before"}),(0,v.tZ)(oG,{granularity:"minute",hourCycle:24,value:t.end,onChange:function(e){return n(function(t){return(0,ep._)((0,_._)({},t),{end:e})})}})]})},oO=function(){var e=iQ(),t=e.filter,n=e.setFilter,r=(0,iY.iT)(),i=t.start||t.end,o="Date",a=t.start&&(0,i6.Z)(t.start.toDate(r),"M/d/yy"),l=t.end&&(0,i6.Z)(t.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,v.tZ)(oE,{label:"Date range",onClear:i?function(){return n(function(e){return(0,ep._)((0,_._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,v.tZ)(rC.Z,{})},children:(0,v.tZ)(I.G,{css:oL.section,children:(0,v.tZ)(oN,{})})})},oU=(0,B.X)({inputContainer:[A.l0.p(8)]}),oM=function(){var e=iQ(),t=e.filter,n=e.setFilter,r=(0,g._)((0,b.useState)(t.executionId),2),i=r[0],o=r[1];return(0,b.useEffect)(function(){o(t.executionId)},[t.executionId]),(0,v.tZ)(eG.II,{placeholder:"*****",value:i||"",onChange:function(e){var t=e.target.value;o(t),t&&5!==t.length||n(function(e){return(0,ep._)((0,_._)({},e),{executionId:t})})},onBlur:function(){return n(function(e){return(0,ep._)((0,_._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,ep._)((0,_._)({},e),{executionId:i})})}})},oX=function(){var e=iQ(),t=e.filter,n=e.setFilter;return(0,v.tZ)(oE,{onClear:t.executionId?function(){return n(function(e){return(0,ep._)((0,_._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:t.executionId?"Run: ".concat(t.executionId):"Run ID",iconRight:t.executionId?void 0:(0,v.tZ)(rC.Z,{})},children:(0,v.tZ)(I.G,{css:oU.inputContainer,children:(0,v.tZ)(ok.nv,{children:(0,v.tZ)(oM,{})})})})},oF=function(){var e=(0,w.$y)();return(null==e?void 0:e.provider)===es.r4.Cron},oW=(0,B.X)({root:[A.l0.p(8),A.l0.rowWithGap(8),{"> *:first-child":A.l0.flex.grow(1)}],divider:A.l0.backgroundColor.outlineDimmer,section:[A.l0.p(8),A.l0.gap(8)],checkboxWithLabel:[A.l0.rowWithGap(8),A.l0.p(8)],buttonInnerCheckbox:[{pointerEvents:"none"}],clearFilterButton:[A.l0.borderRadius(0),A.l0.width("fit-content")]}),oV=function(){var e=iQ(),t=e.filter,n=e.setFilter,r=function(){n(function(e){return(0,ep._)((0,_._)({},e),{level:e.level===es.in.Error?null:es.in.Error})})};return(0,v.tZ)(V.zx,{colorway:t.level===es.in.Error?"primary":void 0,text:"Errors only",iconLeft:(0,v.tZ)(om.X,{onChange:r,checked:t.level===es.in.Error}),onClick:r})},oH=function(){var e=oF();return(0,v.BX)(v.HY,{children:[(0,v.tZ)(oV,{}),(0,v.tZ)(oO,{}),e&&(0,v.tZ)(oX,{})]})},oz=function(){var e=iQ(),t=e.filter,n=e.setFilter,r=e.clearFilter,i=oF(),o=!!(t.message||t.level||t.start||t.end||t.executionId),a=(0,ra.U)();return(0,v.tZ)(oE,{label:"Filter",buttonProps:{text:"",iconLeft:(0,v.tZ)(ox.Z,{})},onClear:o?r:void 0,children:(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:oW.checkboxWithLabel,children:[(0,v.tZ)(om.X,{name:"Filter by errors only",id:a("errors-only"),checked:t.level===es.in.Error,onChange:function(e){return n(function(t){return(0,ep._)((0,_._)({},t),{level:e?es.in.Error:null})})}}),(0,v.tZ)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,v.BX)(v.HY,{children:[(0,v.tZ)(oC.R,{css:oW.divider}),(0,v.tZ)(I.G,{css:oW.section,children:(0,v.BX)(ok.nv,{children:[(0,v.tZ)(oS._,{color:"dimmer",children:"Run ID"}),(0,v.tZ)(oM,{})]})})]}):null,(0,v.tZ)(oC.R,{css:oW.divider}),(0,v.BX)(I.G,{css:oW.section,children:[(0,v.tZ)(oS._,{color:"dimmer",children:"Date range"}),(0,v.tZ)(oN,{})]}),(0,v.tZ)(oC.R,{css:oW.divider}),(0,v.tZ)(V.zx,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:oW.clearFilterButton})]})})};function oj(){var e=iQ(),t=e.filter,n=e.setFilter,r=e.isWide,i=(0,g._)((0,b.useState)(t.message),2),o=i[0],a=i[1];return(0,b.useEffect)(function(){a(t.message)},[t.message]),(0,v.BX)(I.G,{css:oW.root,children:[(0,v.tZ)(oZ.E,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&n(function(e){return(0,ep._)((0,_._)({},e),{message:""})})},onBlur:function(){return n(function(e){return(0,ep._)((0,_._)({},e),{message:o})})},onClear:function(){n(function(e){return(0,ep._)((0,_._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,ep._)((0,_._)({},e),{message:o})})}}),r?(0,v.tZ)(oH,{}):(0,v.tZ)(oz,{})]})}var oq=(0,B.X)({root:[A.l0.flex.growAndShrink(1),A.l0.overflow("hidden")],header:[A.l0.colWithGap(8),A.l0.p(6),{borderBottom:"1px solid ".concat(A.TV.outlineDimmest)}],headerActions:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.justify.spaceBetween]}),oJ=function(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return t?(0,v.tZ)(oY,{deploymentId:t,replId:n,executionId:r,onBack:i,openFile:o}):(0,v.tZ)(ev,{children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"Deployment not found"})})};function oY(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=i0({deploymentId:t,replId:n,executionId:r,openFile:e.openFile});return(0,iU.q)(function(){ew({context:ex.k.Logs})}),(0,v.tZ)(iK.Provider,{value:o,children:(0,v.BX)(I.G,{css:oq.root,innerRef:o.containerRef,children:[i?(0,v.tZ)(I.G,{css:oq.header,children:(0,v.tZ)(I.G,{css:oq.headerActions,children:(0,v.tZ)(eX.hU,{alt:"Back",onClick:i,children:(0,v.tZ)(eF.Z,{})})})}):null,(0,v.tZ)(oj,{}),(0,v.tZ)(od,{}),(0,v.tZ)(ow,{})]})})}var o$=(0,B.X)({root:[A.l0.flex.growAndShrink(1),A.l0.overflow("hidden")],executionListHeader:[A.l0.colWithGap(8),A.l0.p(6),{borderBottom:"1px solid ".concat(A.TV.outlineDimmest)}],executionListHeaderActions:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.justify.spaceBetween],executionList:[{overflow:"auto"},A.l0.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.fontSize(12),A.l0.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(A.TV.outlineDimmest),color:A.TV.foregroundDimmer}],executionItemStatusDot:[A.l0.width("6px"),A.l0.height("6px"),A.l0.borderRadius("full"),A.l0.flex.shrink(0),A.l0.pr(4)],executionItemDistance:[A.l0.minWidth(100)],executionItemTimestamp:[A.l0.minWidth(90)],executionItemRunTime:[A.l0.minWidth(60)],executionItemStatus:[A.l0.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[A.l0.rowWithGap(8),A.l0.align.center,{marginLeft:"auto"}],noExecutionsContainer:[A.l0.colWithGap(8),A.l0.pt(4)],noExecutionsText:[A.l0.textAlign.center],maxResultsMessage:[A.l0.fontSize(12),A.l0.color.foregroundDimmest]});function oK(e){var t=e.deploymentId,n=e.replId,r=e.openFile,i=(0,g._)((0,b.useState)(),2),o=i[0],a=i[1];return t?o?(0,v.tZ)(oJ,{replId:n,deploymentId:t,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,v.tZ)(oQ,{deploymentId:t,onViewExecutionLogs:function(e){var t=e.split("-");a(t[t.length-1])}}):(0,v.tZ)(ev,{children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"Deployment not found"})})}function oQ(e){var t,n,r,i=e.deploymentId,o=e.onViewExecutionLogs,a=(0,g._)((0,b.useState)([]),2),l=a[0],c=a[1],s=(0,g._)((0,b.useState)(!1),2),u=s[0],d=s[1],f=(0,g._)((0,b.useState)(),2),p=f[0],h=f[1],m=(t=(0,_._)({},iP,{variables:{deploymentId:i},onError:function(e){h(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&c(e.scheduledJobListExecutions.results)}}),eS.a(iG,t)),y=m.loading,w=m.refetch,Z=(0,g._)((n=(0,_._)({},iP,{onError:function(e){h(e)},onCompleted:function(e){var t=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===t.__typename&&c(function(e){return e.map(function(e){return e.id===t.execution.id?t.execution:e})})}}),e7.D(iL,n)),2),x=Z[0],k=Z[1].loading,S=!!(y||k||u||p);return(0,iU.q)(function(){y||w(),ew({context:ex.k.Schedule})}),(0,v.BX)(I.G,{css:o$.root,children:[(0,v.BX)(I.G,{css:o$.executionListHeader,children:[p?(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:null!==(r=p.message)&&void 0!==r?r:"Something went wrong"}):null,(0,v.BX)(I.G,{css:o$.executionListHeaderActions,children:[(0,v.tZ)(ti,{disabled:S,onSuccessfulExecution:function(e){c(function(t){return[e].concat((0,C._)(t)).slice(0,50)})}}),(0,v.tZ)(eX.hU,{alt:"Refresh",disabled:S,onClick:function(){S||(d(!0),w().finally(function(){d(!1)}))},children:u?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(iN.Z,{})})]})]}),(0,v.tZ)(o0,{executions:l,loading:y,disabled:S,onExecutionItemAction:function(e){switch(e.type){case"cancel":x({variables:{deploymentId:i,executionId:e.payload.id}});break;case"logs":o(e.payload.id)}}})]})}function o0(e){var t=e.executions,n=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,b.useRef)(null),a=(0,M.sG)()?44:28,l=(0,iI.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return n?(0,v.tZ)(ev,{centered:!0,children:(0,v.tZ)(eH,{})}):0===t.length?(0,v.tZ)(ev,{children:(0,v.BX)(I.G,{css:o$.noExecutionsContainer,children:[(0,v.tZ)(K.xv,{css:o$.noExecutionsText,children:"No runs yet..."}),(0,v.BX)(K.xv,{color:"dimmer",css:o$.noExecutionsText,children:["Having trouble?"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return ew({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,v.tZ)(I.G,{innerRef:o,css:o$.executionList,children:(0,v.tZ)(I.G,{style:{height:l.getTotalSize()},css:o$.executionListRows,children:l.getVirtualItems().map(function(e){var n=t[e.index];return(0,v.tZ)(o3,{execution:n,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key)})})})}var o1=(u={},(0,S._)(u,es.YJ.Done,A.TV.accentPositiveDefault),(0,S._)(u,es.YJ.Running,A.TV.orangeStronger),(0,S._)(u,es.YJ.Failed,A.TV.accentNegativeDefault),(0,S._)(u,es.YJ.Cancelled,A.TV.greyDefault),(0,S._)(u,es.YJ.Unrecognized,A.TV.greyDefault),u);function o2(e){var t=e.status,n=t in o1?o1[t]:A.TV.greyDefault;return(0,v.tZ)(I.G,{tag:"span",css:o$.executionItemStatusDot,style:{backgroundColor:n,boxShadow:"0 0 8px ".concat(n)}})}function o3(e){var t=e.execution,n=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==t?void 0:t.endedAt)?(new Date(t.endedAt).valueOf()-new Date(t.startedAt).valueOf())/1e3:null;return(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{title:t.id,css:o$.executionItem,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,v.tZ)(o2,{status:t.status}),(0,v.tZ)(I.G,{css:o$.executionItemDistance,children:(0,iO.Z)(new Date(t.startedAt),Date.now(),{addSuffix:!0})}),(0,v.BX)(I.G,{css:o$.executionItemTimestamp,children:[new Date(t.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(t.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,v.tZ)(I.G,{css:o$.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,v.tZ)(I.G,{css:o$.executionItemStatus,children:t.status}),(0,v.BX)(I.G,{css:o$.executionItemActions,children:[t.status===es.YJ.Running?(0,v.tZ)(eX.hU,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:t.id}})},children:(0,v.tZ)(iM.Z,{})}):null,(0,v.tZ)(eX.hU,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:t.id}})},children:(0,v.tZ)(td.Z,{})})]})]}),49===i?(0,v.tZ)(I.G,{title:t.id,css:o$.executionItem,style:{height:r,transform:"translateY(".concat(n+r,"px)")},children:(0,v.tZ)(K.xv,{css:o$.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}(o=d||(d={})).Cancel="cancel",o.Logs="logs";var o4=n(16155),o8=n(17695),o6=n(10055),o5=n(4273),o7=n(19349),o9=n(45151),ae=n(26881),at=n(14861),an=(0,T.iv)([A.l0.maxHeight(320),A.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function ar(){var e=(0,at.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var ai=n(34293);function ao(){var e=(0,eC._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return ao=function(){return e},e}function aa(){var e=(0,eC._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aa=function(){return e},e}var al={},ac=(0,ek.Ps)(ao()),as=(0,ek.Ps)(aa(),ac),au=function(e){var t=e.data;ae.kL.register(ae.ZL);var n=(0,at.F)().values;return(0,v.tZ)(ai.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:ar()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},ad=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,g._)((0,b.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,_._)({},al,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":s(Error(e.getRepl.analyticsDuration.message))}}}),eS.a(as,t)),d=u.data,f=u.loading,p=u.error;return p&&s(p),(0,v.BX)(I.G,{css:A.l0.colWithGap(8),children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,v.BX)(I.G,{children:[f?(0,v.tZ)(I.G,{css:[an,A.l0.borderRadius(),j.p.backgroundPulse()]}):null,c?(0,v.tZ)(J.E,{text:c.message,colorway:"negative"}):null,(null==d?void 0:null===(n=d.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.getRepl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,v.tZ)(I.G,{css:an,children:(0,v.tZ)(au,{data:d.getRepl.analyticsDuration})}):null]})]})},af=n(86306),ap=n(81995);ae.kL.register(ae.uw,ae.f$,ae.od,ae.jn,ae.u);var ah=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,at.F)().values,c={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,ep._)((0,_._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},s=t.length;return(0,v.tZ)(ai.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,ep._)((0,_._)({},ar()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,i6.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(s<=24){if(r.getHours()%4!=0)return;return(0,i6.Z)(r,"HH:mm")}if(r.toISOString()===(0,ap.Z)(r).toISOString())return(0,i6.Z)(r,"MMM d")}}}}},data:c})};function am(){var e=(0,eC._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return am=function(){return e},e}function ag(){var e=(0,eC._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return ag=function(){return e},e}function av(){var e=(0,eC._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return av=function(){return e},e}var ay={},ab=(0,ek.Ps)(am()),aw=(0,ek.Ps)(ag(),ab),aZ=(0,ek.Ps)(av(),aw),ax=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,at.F)().values,o=Array(r).fill(0).map(function(e,t){return(0,af.Z)(n,t)}),a=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),l=[{label:"Connected",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,v.tZ)(ah,{labels:o,datasets:l,maintainAspectRatio:!1})},aC=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,g._)((0,b.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,_._)({},ay,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":s(Error(e.getRepl.analyticsPageViews.message))}}}),eS.a(aZ,t)),d=u.data,f=u.loading,p=u.error,h=(null==d?void 0:null===(n=d.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.getRepl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?d.getRepl.analyticsPageViews:void 0,m=h?h.uniques:void 0;return p&&s(p),(0,v.BX)(I.G,{css:[A.l0.colWithGap(8)],children:[(0,v.BX)(I.G,{css:[A.l0.flex.row,A.l0.align.center,A.l0.justify.spaceBetween],children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),m?(0,v.BX)(K.xv,{multiline:!1,children:[(0,v.tZ)("strong",{children:m})," unique IP addresses"]}):null]}),(0,v.BX)(I.G,{children:[f?(0,v.tZ)(I.G,{css:[A.l0.width("100%"),an,A.l0.borderRadius(),j.p.backgroundPulse()]}):null,c?(0,v.tZ)(J.E,{text:c.message,colorway:"negative"}):null,h?(0,v.tZ)(I.G,{css:an,children:(0,v.tZ)(ax,{data:h,start:o,hours:a})}):null]})]})},ak=n(60202);n(56688),ae.kL.register(ae.uw,ae.f$,ae.od,ae.jn,ae.Dx,ae.u,ae.FB);var aS=function(e){var t,n,r,i=e.data,o=e.start,a=e.end,l=e.label,c=e.unit,s=e.xAxisLabel,u=e.yAxisLabel,d=(0,at.F)().values,f=ar(),p={datasets:[{label:l,data:i,fill:!1,borderColor:d.global.blueDimmer,tension:.1}]},h=(r=Math).max.apply(r,(0,C._)(i.map(function(e){return e.y}))),m=Math.ceil(c===ak.YL.Percentage?Math.max(h,100):Math.ceil(1.2*h)),g=(t=o,(n=a.getTime()-t.getTime())<=36e5?{unit:"minute",stepSize:5}:n<=216e5?{unit:"minute",stepSize:30}:n<=864e5?{unit:"hour",stepSize:2}:n<=2592e5?{unit:"hour",stepSize:6}:n<=6048e5?{unit:"hour",stepSize:12}:{unit:"day",stepSize:1}),y=g.unit,b=g.stepSize;return(0,v.tZ)(ai.x1,{data:p,options:{animation:!1,scales:{x:{type:"time",time:{unit:y},title:{display:!0,text:s},min:o.getTime(),max:a.getTime(),ticks:{stepSize:b,color:d.global.foregroundDimmer}},y:{title:{display:!0,text:u},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:d.global.foregroundDimmer,callback:function(e){return c?"".concat(e).concat(c):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,_._)({},f)}}})};function a_(){var e=(0,eC._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return a_=function(){return e},e}function aT(){var e=(0,eC._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return aT=function(){return e},e}function aE(){var e=(0,eC._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aE=function(){return e},e}var aR={},aD=(0,ek.Ps)(a_()),aI=(0,ek.Ps)(aT(),aD),aB=(0,ek.Ps)(aE(),aI),aA=function(e){var t,n,r,i=e.start,o=e.end,a=e.timeSeriesFragment,l=e.xAxisLabel,c=e.yAxisLabel;if(0===a.results.length)return(0,v.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var s={label:(t=a.results)[0].value,unit:(r=null===(n=t[0])||void 0===n?void 0:n.unit)?function(e,t){var n=Object.entries(e).find(function(e){var n=(0,g._)(e,2);return n[0],n[1]===t});if(n)return e[n[0]]}(ak.YL,r):void 0,data:t.map(function(e){return{x:new Date(e.timestamp),y:e.count}})},u=s.label,d=s.unit,f=s.data;return(0,v.tZ)(aS,{data:f,start:i,end:o,label:u,unit:d,xAxisLabel:l,yAxisLabel:c})},aP=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,t){return(0,af.Z)(n,t)}),a=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,C._)(a.keys()).map(function(e,t){var n=i(e,t),r=a.get(e);return{label:e,data:o.map(function(e){var t,n=null!==(t=null==r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,v.tZ)(ah,{labels:o,datasets:l,maintainAspectRatio:!1})},aG=function(e){var t,n,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,s=e.colorFn,u=(0,g._)((0,b.useState)(void 0),2),d=u[0],f=u[1],p=(t=(0,_._)({},aR,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":f(Error("Too many requests"));break;case"UserError":case"NotFoundError":f(Error(e.getRepl.analyticsTimeSeries.message))}}}),eS.a(aB,t)),h=p.data,m=p.loading,y=p.error,w=(null==h?void 0:null===(n=h.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=h.getRepl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?h.getRepl.analyticsTimeSeries:void 0;return y&&f(y),(0,v.BX)(I.G,{css:[A.l0.colWithGap(8)],children:[(0,v.tZ)(I.G,{css:[A.l0.flex.row,A.l0.align.center,A.l0.justify.spaceBetween],children:(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,v.BX)(I.G,{children:[m?(0,v.tZ)(I.G,{css:[A.l0.width("100%"),an,A.l0.borderRadius(),j.p.backgroundPulse()]}):null,d?(0,v.tZ)(J.E,{text:d.message,colorway:"negative"}):null,w?(0,v.tZ)(I.G,{css:an,children:(0,ak.BB)(a)?(0,v.tZ)(aA,{start:l,end:(0,af.Z)(l,c),timeSeriesFragment:w}):(0,v.tZ)(aP,{data:w,start:l,hours:c,colorFn:s})}):null]})]})},aL=n(51174),aN=n.n(aL);function aO(){var e=(0,eC._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return aO=function(){return e},e}function aU(){var e=(0,eC._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aU=function(){return e},e}var aM={},aX=(0,ek.Ps)(aO()),aF=(0,ek.Ps)(aU(),aX),aW=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,v.tZ)(K.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,v.tZ)(az,{data:t});case"pie":return(0,v.tZ)(aH,{data:t,devices:!1});case"device-pie":return(0,v.tZ)(aH,{data:t,devices:!0});case"table":return(0,v.tZ)(aV,{data:t})}},aV=function(e){var t=e.data;return ae.kL.register(ae.qi),(0,v.tZ)(I.G,{children:t.results.map(function(e,t){return(0,v.BX)(I.G,{css:[A.l0.rowWithGap(16),A.l0.py(8),{borderBottom:"1px solid ".concat(A.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,v.tZ)(I.G,{css:[A.l0.flex.grow(1),A.l0.maxWidth("90%")],children:(0,v.tZ)(K.xv,{title:e.value,multiline:!1,children:e.value})}),(0,v.tZ)(I.G,{children:(0,v.tZ)(K.xv,{multiline:!1,children:e.count})})]},t)})})},aH=function(e){var t=e.data,n=e.devices,r=(0,at.F)(),i=r.isDarkColorScheme,o=r.values,a=i?A.tX.categorical:A.tX.categorical.reverse(),l=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)}),(0,v.tZ)(I.G,{css:an,children:(0,v.tZ)(ai.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:ar()}},data:{labels:(0,C._)(l.keys()),datasets:[{borderWidth:(0,C._)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,C._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,t){return a[t%a.length]})}]}})})},az=function(e){var t=e.data,r=aN()(function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(4179)]).then(n.bind(n,24179))},{loadableGenerated:{webpack:function(){return[24179]}},ssr:!1}),i=t.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,v.tZ)(r,{countries:i})},aj=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,s=e.variant,u=void 0===s?"table":s,d=e.expandable,f=(0,ak.CZ)(l),p=(0,g._)((0,b.useState)(void 0),2),h=p[0],m=p[1],y=(0,g._)((0,b.useState)(!1),2),w=y[0],Z=y[1],x=(t=(0,_._)({},aM,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:w?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":m(Error(e.getRepl.analyticsTopList.message))}}}),eS.a(aF,t)),C=x.data,k=x.loading,S=x.error;return S&&m(S),(0,v.BX)(I.G,{css:A.l0.colWithGap(8),children:[(0,v.BX)(I.G,{css:A.l0.rowWithGap(8),children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===u?"Top Devices":"Top ".concat(f)}),void 0!==d&&d?(0,v.tZ)(eX.hU,{alt:w?"Collapse list":"Expand list",onClick:function(){return Z(!w)},children:w?(0,v.tZ)(op.Z,{}):(0,v.tZ)(oh.Z,{})}):null]}),(0,v.BX)(I.G,{children:[k?(0,v.tZ)(I.G,{css:[A.l0.height(80),A.l0.borderRadius(),j.p.backgroundPulse()]}):null,h?(0,v.tZ)(J.E,{text:h.message,colorway:"negative"}):null,(null==C?void 0:null===(n=C.getRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=C.getRepl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,v.tZ)(aW,{variant:u,data:C.getRepl.analyticsTopList}):null]})]})},aq=n(17601),aJ=n(6543),aY=n(34017),a$=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],aK={label:"one week",key:168},aQ=A.nC.min(600),a0=(0,B.X)({fullWidth:(0,S._)({},aQ,{gridColumn:"span 2"})}),a1=(0,B.X)({container:[A.l0.display.grid,A.l0.gap(32),A.l0.pb(32),(0,S._)({},aQ,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:a0.fullWidth,map:[a0.fullWidth],pies:[a0.fullWidth,A.l0.flex.column,(0,S._)({gap:32},A.nC.min(480),[A.l0.flex.row,{" > *":{flex:1}}])]}),a2=function(e){var t=e.replId,n=(0,g._)((0,b.useState)(aK),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,g._)((0,b.useState)((0,aJ.Z)((0,aY.Z)(new Date),i-1)),2),c=l[0],s=l[1],u=(0,o7.o)("deployment-analytics-dot"),d=u.isDone,f=u.setAsDone,p=(0,aJ.Z)((0,aY.Z)(new Date),23),h=(0,at.F)().values,m=[h.global.redStronger,h.global.redDimmer,h.global.redStrongest,h.global.redDimmest],y=[h.global.orangeDefault,h.global.orangeDimmer,h.global.orangeStronger,h.global.orangeDimmest],w=[h.global.blueDefault,h.global.blueDimmer,h.global.blueStronger,h.global.blueDimmest],Z=[h.global.greenDefault,h.global.greenDimmer,h.global.greenStronger,h.global.greenDimmest];return(0,b.useEffect)(function(){ew({context:ex.k.Analytics})},[]),(0,b.useEffect)(function(){d||f()},[d,f]),(0,v.tZ)(ev,{children:(0,v.BX)(I.G,{css:a1.container,children:[(0,v.tZ)(I.G,{css:a1.fullWidth,children:(0,v.tZ)(aq.ZE,{items:a$,label:"Past ".concat(o),icon:(0,v.tZ)(rC.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=a$.find(function(e){return e.key===n}))&&void 0!==t?t:aK),s((0,aJ.Z)((0,aY.Z)(new Date),n-1))},cssProps:[A.l0.width("fit-content")],children:a$.map(function(e){return(0,v.tZ)(aq.ck,{children:(0,v.tZ)(I.G,{css:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.color.foregroundDefault],children:(0,v.tZ)(K.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(I.G,{css:a1.fullWidth,children:(0,v.tZ)(aC,{replId:t,start:c,hours:i})}),(0,v.tZ)(aj,{replId:t,metric:ak.Pc.Url,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(aj,{replId:t,metric:ak.Pc.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,v.tZ)(aG,{replId:t,title:"HTTP Statuses (24h)",metric:ak.RH.Statuses,start:p,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?Z[t%Z.length]:n<400?w[t%w.length]:n<500?y[t%y.length]:m[t%m.length]}}),(0,v.tZ)(ad,{replId:t,start:c,hours:i}),(0,v.BX)(I.G,{css:a1.pies,children:[(0,v.tZ)(aj,{replId:t,metric:ak.Pc.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,v.tZ)(aj,{replId:t,metric:ak.Pc.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,v.tZ)(I.G,{css:a1.map,children:(0,v.tZ)(aj,{replId:t,metric:ak.Pc.Country,start:c,hours:i,count:100,variant:"map"})})]})})},a3=(0,B.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),a4=(0,B.X)({container:{width:7,position:"relative"},linePast:[a3.line,{backgroundColor:A.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[a3.line,{backgroundImage:"linear-gradient(to top, ".concat(A.TV.outlineDimmest,", ").concat(A.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[a3.line,{borderRight:"1px dashed "+A.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[a3.line,{backgroundColor:A.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[a3.line,{borderRight:"1px dashed "+A.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[a3.circlePast,A.l0.backgroundColor.accentPositiveDefault],circlePastRed:[a3.circlePast,A.l0.backgroundColor.accentNegativeDefault],circlePastGray:[a3.circlePast,A.l0.backgroundColor.outlineDimmer],circlePresent:[A.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[A.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function a8(e){var t,n;switch(e.type){case"pastSuccess":t=a4.linePast,n=(0,v.tZ)(I.G,{css:a4.circlePastGreen});break;case"pastFail":t=a4.linePast,n=(0,v.tZ)(I.G,{css:a4.circlePastRed});break;case"pastNeutral":t=a4.linePast,n=(0,v.tZ)(I.G,{css:a4.circlePastGray});break;case"present":t=a4.linePresent,n=(0,v.tZ)(I.G,{css:a4.circlePresent});break;case"future":t=a4.lineFuture,n=(0,v.tZ)("svg",{viewBox:"0 0 9 9",css:a4.circleFuture,children:(0,v.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:A.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=a4.lineFutureFailClosed,n=(0,v.tZ)(I.G,{css:a4.circleFutureFailClosed});break;case"futureFailOpen":t=a4.lineFutureFailOpen,n=null}return(0,v.BX)(I.G,{css:a4.container,children:[(0,v.tZ)(I.G,{css:t,"data-timeline-line":!0}),n]})}var a6=n(62881),a5=n(56738),a7=n(99677);function a9(e){var t=e.currentStatus,n=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.openDebugChat,c=e.onViewBuildLogs,s=e.onViewApplicationLogs;if((0,w.BU)().hasDebugSummariesAuthorization&&o){var u=t===es.Fe.Building?"Build failed":"Promotion failed";return(0,v.tZ)(lf,{title:u,debugSummary:o,view:ex.k.DeploymentInProgress,provider:n,openFile:a,openDebugChat:l})}return t===es.Fe.Building?(0,v.tZ)(lc,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:c}):t===es.Fe.Promoting?(0,v.tZ)(la,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:c,onViewApplicationLogs:s}):null}function le(e){var t=e.currentStatus,n=e.provider,r=e.debugSummary,i=e.openFile,o=e.openDebugChat,a=e.onViewApplicationLogs;return(0,w.BU)().hasDebugSummariesAuthorization&&r?(0,v.tZ)(lf,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",provider:n,openFile:i,openDebugChat:o}):t===es.Fe.Building?(0,v.tZ)(lc,{provider:n,openFile:i}):t===es.Fe.Promoting?(0,v.tZ)(la,{provider:n,openFile:i,onViewApplicationLogs:a}):null}var lt=(0,B.X)({self:[A.l0.borderRadius(4),A.l0.overflow("hidden"),A.l0.border({color:A.TV.outlineDimmer}),A.l0.mb(6)]});function ln(e){var t=e.title,n=e.debugSummary,r=e.provider,i=e.openFile,o=e.openDebugChat,a=e.onViewBuildLogs;return(0,v.tZ)(I.G,{css:lt.self,children:(0,v.tZ)(lf,{title:t,debugSummary:n,view:ex.k.Deployment,provider:r,onViewBuildLogs:a,viewBuildLogsIcon:(0,v.tZ)(td.Z,{}),openFile:i,openDebugChat:o})})}var lr=(0,B.X)({errorContainer:[A.l0.p(12),A.l0.colWithGap(12)],warning:[A.l0.colWithGap(8)],warningTitle:[A.l0.rowWithGap(8),A.l0.align.center],link:{color:A.TV.foregroundDefault,textDecoration:"underline",":hover":{color:A.TV.accentPrimaryStronger}},xtermContainer:[A.l0.display.flex,A.l0.pt(12),A.l0.pl(16),A.l0.overflow("hidden"),A.l0.borderRadius(4,4,0,0)],xterm:[A.l0.width("100%"),A.l0.maxWidth("100%"),A.l0.height(200)],xtermButton:A.l0.borderRadius(0,0,4,4),list:[{listStyle:"inside"}],listCta:A.l0.display.inlineFlex});function li(e){var t=e.title,n=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,i5.f)(),c=(0,w.XZ)(),s=(0,g._)((0,a5.Z)({openFile:a,listFiles:c.listFiles}),2),u=s[0],d=s[1],f=(0,b.useRef)(r?r.slice(-5):[]);return(0,b.useEffect)(function(){f.current.length&&f.current.forEach(function(e){null==u||u.write(e)})},[u]),(0,v.BX)($.Tg,{elevated:!0,css:lr.errorContainer,children:[(0,v.BX)(I.G,{css:lr.warning,children:[(0,v.BX)(I.G,{css:lr.warningTitle,children:[(0,v.tZ)(eo.Z,{color:A.TV.accentNegativeStronger}),(0,v.tZ)(K.xv,{multiline:!1,children:t})]}),(0,v.tZ)(K.xv,{children:n})]}),void 0===i||i?null:(0,v.BX)(I.G,{children:[(0,v.tZ)(I.G,{css:lr.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,v.tZ)(I.K.div,{css:lr.xterm,ref:d})}),(0,v.tZ)(V.zx,{text:"View all",iconLeft:(0,v.tZ)(oh.Z,{}),onClick:function(){return null==o?void 0:o()},css:lr.xtermButton})]})]})}function lo(e){var t=e.provider,n=e.onViewApplicationLogs,r=(0,w.MV)();return(0,v.BX)(v.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:lr.list,children:[r?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"Make sure your repl runs in the Workspace."}),(0,v.BX)("li",{children:["View our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:lr.link,onClick:function(){return ew({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),t!==es.r4.Static&&n?(0,v.BX)("li",{children:["Look for errors in your application's server logs.",(0,v.tZ)(V.zx,{text:"Logs",size:"small",iconLeft:(0,v.tZ)(td.Z,{}),onClick:n,css:A.l0.display.inlineFlex})," "]}):null,(0,v.tZ)("li",{children:"Look for errors in your deploy logs."})]})]})}function la(e){return(0,v.tZ)(li,(0,_._)({title:"Your app failed to promote",description:(0,v.tZ)(lo,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function ll(){var e=(0,w.MV)();return(0,v.BX)(v.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,v.tZ)("br",{}),(0,v.tZ)("br",{}),"Ways to debug:",(0,v.BX)("ul",{css:lr.list,children:[e?(0,v.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,v.tZ)("li",{children:"Make sure your repl runs in the Workspace."}),(0,v.BX)("li",{children:["View our"," ",(0,v.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:lr.link,onClick:function(){return ew({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,v.tZ)("li",{children:"Look for errors in your deploy logs."})]})]})}function lc(e){return(0,v.tZ)(li,(0,_._)({title:"Your app failed to build",description:(0,v.tZ)(ll,{})},e))}function ls(e){return(0,v.tZ)(li,(0,_._)({title:"This build's deploy logs have expired",description:(0,v.tZ)(v.HY,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var lu=[A.l0.cursor.pointer,A.l0.reset.button,A.l0.color.foregroundDimmest,A.l0.focusRing,A.l0.hover(A.l0.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],ld=(0,B.X)({errorsSection:[A.l0.colWithGap(4),A.l0.p(8),A.l0.colorMixBg(A.TV.accentNegativeDimmest,"transparent",.3),A.l0.color.accentNegativeStrongest],errorsHeader:[A.l0.rowWithGap(12),A.l0.align.center,A.l0.justify.spaceBetween],experimentalTag:[A.l0.rowWithGap(4),A.l0.align.center,A.l0.mr(12),A.l0.color.blurpleStrongest],errorsSectionTitleText:[A.l0.color.foregroundDefault],loading:[A.l0.rowWithGap(4),A.l0.align.center],errorsList:[A.l0.display.flex,A.l0.colWithGap(4),A.l0.pt(6),A.l0.pl(24),{listStyleType:"disc"}],suggestionsSection:[A.l0.colorMixBg(A.TV.blurpleDimmest,"transparent",.15),A.l0.border({direction:"top",color:A.TV.outlineDimmer})],aiSuggestions:[A.l0.p(8),A.l0.colWithGap(8)],aiSuggestionsTitle:[A.l0.rowWithGap(8),A.l0.color.blurpleStrongest,A.l0.align.center],aiSuggestionsList:A.l0.pl(24),divider:A.l0.backgroundColor.outlineDimmer,aiChat:[A.l0.p(8),A.l0.rowWithGap(4),A.l0.color.foregroundDimmer,{a:{color:"inherit",textDecoration:"underline"}}],headerRight:[A.l0.rowWithGap(0)],textButton:[lu]});function lf(e){var t=e.title,n=e.debugSummary,r=e.view,i=e.provider,o=e.onViewBuildLogs,a=e.viewingBuildLogs,l=e.viewBuildLogsIcon,c=e.openFile,s=e.openDebugChat,u=(0,o4.Z)(),d=(0,w.hn)(),f=(0,b.useCallback)(function(e){rF(e,"useHostingDebugSummary",{replId:u,deploymentId:d,debugSummary:n,view:r,provider:i})},[n,d,i,u,r]),p=(0,rM.nC)(n,f),h=p.loading,m=p.debugResult,y=p.error,Z=(0,rM.nV)(),x=(0,w.XZ)().listFiles,C=(0,g._)((0,b.useState)([]),2),k=C[0],S=C[1],_=(0,b.useRef)(!1);return(0,b.useEffect)(function(){d&&m&&!_.current&&(_.current=!0,eZ("viewed",{view:r,debugSummary:n,debugResult:m,replId:u,deploymentId:d}),m.suggestions.some(function(e){return!!lp(e)})&&x().then(function(e){e.files&&S(e.files)}))},[m,r,n,u,d,x]),(0,v.BX)($.Tg,{elevated:!0,children:[(0,v.BX)(I.G,{css:ld.errorsSection,children:[(0,v.BX)(I.G,{css:ld.errorsHeader,children:[(0,v.BX)(I.G,{css:lr.warningTitle,children:[(0,v.tZ)(eo.Z,{color:A.TV.accentNegativeStronger}),(0,v.tZ)(K.xv,{css:ld.errorsSectionTitleText,multiline:!1,children:t})]}),(0,v.BX)(I.G,{css:ld.headerRight,children:[(0,v.BX)(I.G,{css:ld.experimentalTag,children:[(0,v.tZ)(K.xv,{variant:"small",children:"Experimental"}),(0,v.tZ)(a7.Z,{})]}),"function"==typeof o?(0,v.tZ)(I.G,{children:(0,v.BX)("button",{css:ld.textButton,onClick:o,children:[a?"Hide":"View"," logs"," ",(0,v.tZ)(lh,{viewingBuildLogs:a,viewBuildLogsIcon:l})]})}):null]})]}),(0,v.BX)(K.xv,{children:[h?(0,v.BX)(I.G,{css:ld.loading,children:[(0,v.tZ)(eW.Z,{}),(0,v.tZ)(K.xv,{children:"Analyzing error, generating suggestions..."})]}):(0,v.tZ)(v.HY,{children:m?(0,v.BX)(v.HY,{children:[(0,v.tZ)(K.xv,{children:"Your deployment attempt had the following errors:"}),(0,v.tZ)("ul",{css:ld.errorsList,children:m.errors.map(function(e){return(0,v.tZ)("li",{children:e},e)})})]}):null}),y?(0,v.BX)(v.HY,{children:[(0,v.BX)(K.xv,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),n.type===es.k7.DeploymentBuildError?(0,v.tZ)(ll,{}):null,n.type===es.k7.DeploymentPromotionError?(0,v.tZ)(lo,{provider:i}):null]}):null]})]}),!h&&m?(0,v.BX)(I.G,{css:ld.suggestionsSection,children:[(0,v.BX)(I.G,{css:ld.aiSuggestions,children:[(0,v.BX)(I.G,{css:ld.aiSuggestionsTitle,children:[(0,v.tZ)(a6.Z,{}),(0,v.tZ)(K.xv,{multiline:!1,children:"Replit AI suggestions"})]}),(0,v.tZ)("ol",{css:ld.aiSuggestionsList,children:m.suggestions.map(function(e,t){return(0,v.tZ)(lg,{suggestion:e,files:k,openFile:c},"".concat(n.id,"-").concat(t))})})]}),(0,v.tZ)(oC.R,{css:ld.divider}),(0,v.BX)(I.G,{css:ld.aiChat,children:["Not seeing what you need?"," ",(0,v.tZ)("a",{href:"#",onClick:function(e){e.preventDefault(),Z(n.sessionId,{sessionType:rM.FF.CHAT}),s(n.sessionId)},children:"Debug in AI Chat"})]})]}):null]})}function lp(e){var t,n,r,i;return"File"in e&&(null===(t=e.File)||void 0===t?void 0:t.file)!=="null"&&(null===(n=e.File)||void 0===n?void 0:n.file)!==""?(null===(r=e.File)||void 0===r?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null===(i=e.file)||void 0===i?void 0:i.replace("./",""))||void 0}function lh(e){var t=e.viewingBuildLogs;return e.viewBuildLogsIcon||(t?(0,v.tZ)(r5.Z,{}):(0,v.tZ)(rC.Z,{}))}var lm=(0,B.X)({self:{"[data-accordion-header]":[A.l0.align.start,A.l0.flex.growAndShrink(1),A.l0.rowWithGap(4)]},headerInner:[A.l0.flex.growAndShrink(1),A.l0.align.baseline,A.l0.rowWithGap(4)],description:[A.l0.textAlign.left,A.l0.color.foregroundDimmer,A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1),A.l0.justify.spaceBetween],interactiveDescription:[lu,A.l0.textAlign.left,A.l0.color.foregroundDimmer,A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1),A.l0.justify.spaceBetween],file:[A.l0.color.foregroundDimmest,A.l0.fontSize("small")],body:[A.l0.border(),A.l0.borderRadius(),A.l0.mt(4),A.l0.mb(8),A.l0.overflow("hidden"),A.l0.font.code,A.l0.fontSize("small"),{lineHeight:A.TV.lineHeightSmall}],before:[A.l0.color.accentNegativeStrongest,A.l0.colorMixBg(A.TV.accentNegativeDimmest,"transparent",.3),A.l0.px(6),A.l0.py(2)],after:[A.l0.color.accentPositiveStrongest,A.l0.colorMixBg(A.TV.accentPositiveDimmest,"transparent",.3),A.l0.px(6)],fileLinkButton:[lu,A.l0.fontSize("small")]});function lg(e){var t=e.suggestion,n=e.files,r=e.openFile,i=(0,b.useRef)(lp(t)),o=(0,g._)((0,b.useState)(),2),a=o[0],l=o[1];(0,b.useEffect)(function(){if(i.current&&!a){var e=!0,t=!1,r=void 0;try{for(var o,c=n[Symbol.iterator]();!(e=(o=c.next()).done);e=!0)if(o.value===i.current){l(i.current);return}}catch(e){t=!0,r=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw r}}}},[n,a]);var c=(null==t?void 0:t.after)&&(null==t?void 0:t.after)!=="",s=(null==t?void 0:t.before)&&(null==t?void 0:t.before)!=="";return c||s?(0,v.tZ)("li",{css:lm.self,children:(0,v.tZ)(nK.Q,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var n=e.isExpanded,i=e.toggle;return(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:lm.headerInner,children:[(0,v.BX)("button",{css:lm.interactiveDescription,onClick:i,children:[(0,v.tZ)(K.xv,{maxLines:n?void 0:1,style:{color:"inherit"},children:t.description})," "]}),a?(0,v.tZ)("button",{css:lm.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]}),(0,v.tZ)(eX.hU,{alt:"Show suggestion",onClick:i,children:n?(0,v.tZ)(r5.Z,{}):(0,v.tZ)(rC.Z,{})})]})},headerProps:{"data-accordion-header":""},children:(0,v.BX)(I.G,{css:lm.body,children:[s?(0,v.tZ)(I.G,{css:lm.before,children:(0,v.tZ)("pre",{children:t.before})}):null,c?(0,v.tZ)(I.G,{css:lm.after,children:(0,v.tZ)("pre",{children:t.after})}):null]})})}):(0,v.tZ)("li",{css:lm.self,children:(0,v.BX)(I.G,{css:lm.headerInner,children:[(0,v.BX)(I.G,{css:lm.description,children:[(0,v.tZ)(K.xv,{style:{color:"inherit"},children:t.description})," "]}),a?(0,v.tZ)("button",{css:lm.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]})})}var lv=n(76143);function ly(){var e=(0,eC._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return ly=function(){return e},e}function lb(){var e=(0,eC._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return lb=function(){return e},e}function lw(){var e=(0,eC._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return lw=function(){return e},e}function lZ(){var e=(0,eC._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return lZ=function(){return e},e}var lx={},lC=(0,ek.Ps)(ly()),lk=(0,ek.Ps)(lb(),lC),lS=(0,ek.Ps)(lw(),lk),l_=(0,ek.Ps)(lZ(),lC);function lT(){var e=(0,eC._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return lT=function(){return e},e}function lE(){var e=(0,eC._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return lE=function(){return e},e}function lR(){var e=(0,eC._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return lR=function(){return e},e}var lD={},lI=(0,ek.Ps)(lT()),lB=(0,ek.Ps)(lE(),lk,eY.bN),lA=(0,ek.Ps)(lR(),lI),lP=n(379),lG=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,v.tZ)(eo.Z,{alt:"error"}):t<n?(0,v.tZ)(n0.Z,{alt:"success"}):t===n?(0,v.tZ)(eW.Z,{alt:"current"}):(0,v.tZ)(Q.Z,{alt:"waiting"})},lL=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return void 0===n?null:t===r?"negative":t<n?"positive":t===n?"primary":null},lN=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=void 0!==i;return(0,v.tZ)(b.Fragment,{children:(0,v.tZ)(lP.D,{text:l?o:"",colorway:null!==(t=lL({stage:n,activeStage:i,erroredStage:a}))&&void 0!==t?t:void 0,variant:"filled",css:[l&&i<=n&&!a?j.p.foregroundPulse():{},A.l0.border({color:e3.TV.backgroundDefault}),A.l0.overflow("hidden"),(0,S._)({position:"relative",flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":A.l0.display.none},A.nC.min(400),{" span":A.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:l?(0,v.tZ)(lG,{stage:n,activeStage:i,erroredStage:a}):void 0})},l&&i<=n&&!a?1:0)};function lO(){var e=(0,eC._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return lO=function(){return e},e}var lU={},lM=(0,ek.Ps)(lO()),lX=[{id:0,title:"Provision",statusType:es.Fe.Pending},{id:1,title:"Build",statusType:es.Fe.Building},{id:2,title:"Bundle",statusType:es.Fe.Running},{id:3,title:"Promote",statusType:es.Fe.Promoting},{id:4,statusType:es.Fe.Success}],lF=lX.filter(function(e){return"title"in e}),lW=function(e){return lX.find(function(t){return t.statusType===e})},lV=(0,B.X)({base:{borderRadius:A.TV.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:A.TV.greyDefault}}),lH=[A.l0.borderRadius(),{border:"1px solid var(--outline-dimmest)"}],lz=(0,B.X)({container:lH,top:[A.l0.colWithGap(12),A.l0.p(16),A.l0.pt(12)],header:[A.l0.rowWithGap(8),A.l0.justify.spaceBetween,A.l0.width("100%")],headerLeft:[A.l0.rowWithGap(8),A.l0.align.baseline,A.l0.flex.shrink(1)],headerRight:[A.l0.rowWithGap(6),A.l0.justify.end],started:[A.l0.rowWithGap(6),A.l0.flex.growAndShrink(1),A.l0.justify.end,A.l0.color.foregroundDimmest],cancel:[lV.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[A.l0.flex.row,A.l0.flex.grow(1),{zIndex:0}],bottom:[A.l0.borderRadius(0,0,4,4),A.l0.overflow("hidden")],logsOpen:[A.l0.overflow("hidden"),A.l0.height("auto")],logsClosed:[A.l0.overflow("hidden"),A.l0.height(0)],xtermContainer:[A.l0.display.flex,A.l0.pt(12),A.l0.pl(16),A.l0.overflow("hidden")],xterm:[A.l0.width("100%"),A.l0.maxWidth("100%"),A.l0.height(340)],textButton:[A.l0.cursor.pointer,A.l0.reset.button,A.l0.color.foregroundDimmest,A.l0.focusRing,A.l0.hover(A.l0.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),lj=function(e){var t,n,r,i,o=(r={variables:{replId:(0,o4.Z)(),provider:null!==(t=e.provider)&&void 0!==t?t:es.r4.CloudRun},skip:!e.provider},i=(0,_._)({},lD,r),eS.a(lA,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl.authorizations.editDeploymentStatus:void 0,l=null!==(n=null==a?void 0:a.isAuthorized)&&void 0!==n&&n;return(0,v.BX)(I.G,{css:lz.top,children:[(0,v.BX)(I.G,{css:lz.header,children:[(0,v.BX)(I.G,{css:lz.headerLeft,children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,v.BX)(K.xv,{css:lz.started,multiline:!1,maxLines:1,children:["Started ".concat((0,tf.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,v.tZ)("span",{children:e.userDisplayName})]}):null,(0,v.tZ)(eL.u,{isDisabled:l,tooltip:null==a?void 0:a.message,children:(0,v.tZ)(V.zx,{size:"small",text:"Cancel",css:lz.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,v.tZ)(eW.Z,{}):void 0,disabled:e.isCanceling||!l,"data-cancelable":e.onCancel?"true":"false"})})]}),(0,v.tZ)(I.G,{css:lz.headerRight,children:e.onViewBuildLogs?(0,v.BX)("button",{css:lz.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,v.tZ)(r5.Z,{}):(0,v.tZ)(rC.Z,{})]}):null})]}),(0,v.tZ)(I.G,{css:lz.stages,children:lF.map(function(t){var n=t.id,r=t.title;return(0,v.tZ)(lN,{stage:n,totalStagesWithTitle:lF.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)})})]})},lq=function(e){return(0,w.kW)()===Z.z.Preparing?(0,v.tZ)(I.G,{css:lz.container,children:(0,v.tZ)(lj,{})}):(0,v.tZ)(lJ,(0,_._)({},e))},lJ=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m=e.initialBuild,y=e.viewBuildLogsOnLoad,Z=e.onViewLogs,S=e.onCanceled,T=e.onError,E=e.openFile,R=e.openDebugChat,D=(0,w.rm)(),B=(0,w.pn)(),A=B?{id:B.id,status:B.status,provider:B.provider,timeStarted:B.timeCreated,userDisplayName:B.user.displayName,debugSummary:B.debugSummary}:void 0,P=(0,b.useRef)(m||A),G=(t={skip:!(null===(i=P.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(h=null===(o=P.current)||void 0===o?void 0:o.id)&&void 0!==h?h:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":T(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}er({type:"setHistory",payload:n});var u=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;ei(m.status,m.debugSummary)}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}break;default:T("Unexpected typename.")}},onError:function(e){T(e.message)}},n=(0,_._)({},lU,t),eS.a(lM,n)),L=G.loading,N=G.refetch;(0,w.U)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":er({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ei(e.status,e.debugSummary)}});var O=(0,g._)((0,b.useState)(P.current?null===(a=lW(P.current.status))||void 0===a?void 0:a.id:void 0),2),U=O[0],M=O[1],X=(0,g._)((0,b.useState)((null===(l=P.current)||void 0===l?void 0:l.status)==="failed"?null===(c=lW(null===(s=P.current)||void 0===s?void 0:s.status))||void 0===c?void 0:c.id:void 0),2),F=X[0],W=X[1],V=(0,g._)((0,b.useState)((null===(u=P.current)||void 0===u?void 0:u.debugSummary)||void 0),2),H=V[0],z=V[1],j=(0,g._)((0,b.useState)(!1),2),q=j[0],J=j[1],Y=(0,w.XZ)(),$=(0,g._)((0,a5.Z)({openFile:E,listFiles:Y.listFiles}),2),K=$[0],Q=$[1],ee=(0,i5.f)(),et=(0,g._)((0,b.useReducer)(function(e,t){switch(t.type){case"setHistory":return K&&K.clear(),{allLogs:(0,C._)(t.payload).concat((0,C._)(e.allLogs))};case"addLog":return{allLogs:(0,C._)(e.allLogs).concat([t.payload]),recentLogs:[t.payload]};case"refetchLogs":return K&&K.clear(),L||N(),{allLogs:[]}}},{allLogs:[]}),2),en=et[0],er=et[1],ei=function(e,t){if(e===es.Fe.Failed)W(U),t&&z(t);else{var n=lW(e);if(!n)return;M(n.id)}},eo=(r=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return J(!0),[4,D()];case 1:return e.sent(),S(),[2]}})}),function(){return r.apply(this,arguments)}),ea=(0,g._)((0,b.useState)(y||!1),2),el=ea[0],ec=ea[1],eu=function(){ec(!el),el||ew({context:"deploy_progress_logs"})};(0,b.useEffect)(function(){ew({context:"deploy_progress"})},[]),(0,b.useEffect)(function(){var e;(null===(e=P.current)||void 0===e?void 0:e.id)&&B&&B.id!==P.current.id&&(P.current={id:B.id,status:B.status,provider:B.provider,timeStarted:B.timeCreated,userDisplayName:B.user.displayName,debugSummary:B.debugSummary},M(void 0),W(void 0),er({type:"refetchLogs"}))},[B,null===(d=P.current)||void 0===d?void 0:d.id,N]),(0,b.useEffect)(function(){var e;void 0!==U&&(null===(e=P.current)||void 0===e?void 0:e.status)==="failed"&&W(U)},[U,null===(f=P.current)||void 0===f?void 0:f.status]),(0,b.useEffect)(function(){if(K){if(en.recentLogs){en.recentLogs.forEach(function(e){return K.write(e)});return}en.allLogs.forEach(function(e){return K.write(e)})}},[en,K]);var ed=null===(p=lX.find(function(e){return e.id===U}))||void 0===p?void 0:p.statusType,ef=ed!==es.Fe.Success&&!F;return P.current?(0,v.BX)(I.G,{css:lz.container,children:[(0,v.tZ)(lj,{onCancel:ef?eo:void 0,isCanceling:q,onViewBuildLogs:eu,viewBuildLogs:el,provider:P.current.provider,timeStarted:P.current.timeStarted,userDisplayName:P.current.userDisplayName,activeStage:U,erroredStage:F}),(0,v.BX)(I.G,{css:lz.bottom,children:[(0,v.BX)(I.G,{css:el?lz.logsOpen:lz.logsClosed,children:[(0,v.tZ)(oC.R,{}),(0,v.tZ)(I.G,{css:lz.xtermContainer,style:{backgroundColor:null==ee?void 0:ee.background},children:(0,v.tZ)(I.K.div,{css:lz.xterm,ref:Q})})]}),F&&ed?(0,v.BX)(v.HY,{children:[(0,v.tZ)(oC.R,{}),(0,v.tZ)(a9,{currentStatus:ed,provider:P.current.provider,debugSummary:H,logs:en.allLogs,viewBuildLogs:el,openFile:E,openDebugChat:R,onViewBuildLogs:eu,onViewApplicationLogs:Z})]}):null]})]}):null},lY=n(66177),l$=n(82549),lK=n(28393);(f||(f={})).Current="current";var lQ=(0,S._)({},"current",{icon:(0,v.tZ)(function(e){var t=e.color;return(0,v.tZ)(I.G,{css:[A.l0.align.center,A.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,v.tZ)(I.G,{tag:"span",css:[A.l0.width("8px"),A.l0.height("8px"),A.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})},{color:A.TV.blueStronger}),text:"Current deployment"}),l0=I.K.div,l1=function(e){var t=e.activityLogItem.type,n=(0,g._)((0,b.useState)(!1),2),r=n[0],i=n[1],o=(0,g._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(!1);(0,b.useEffect)(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var s=t in lQ&&lQ[t];if(!s)return null;var u=s.icon,d=s.text;return(0,v.tZ)(I.G,{css:[A.l0.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,v.BX)(lK.Z,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,v.tZ)(l0,{css:A.l0.cursor.pointer,children:u}),(0,v.tZ)(I.G,{css:[A.l0.maxWidth(240)],children:(0,v.tZ)(K.xv,{children:d})})]})})};function l2(){var e=(0,eC._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n  }\n  ","\n"]);return l2=function(){return e},e}function l3(){var e=(0,eC._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return l3=function(){return e},e}function l4(){var e=(0,eC._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return l4=function(){return e},e}function l8(){var e=(0,eC._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return l8=function(){return e},e}function l6(){var e=(0,eC._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return l6=function(){return e},e}var l5={},l7=(0,ek.Ps)(l2(),eY.Si),l9=(0,ek.Ps)(l3(),l7),ce=(0,ek.Ps)(l4(),l9),ct=(0,ek.Ps)(l8());l6(),eY.MX,eY.uC;var cn=n(23788),cr=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,g._)((0,b.useState)(!1),2),i=r[0],o=r[1],a=(0,g._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=(0,b.useRef)(!1);return(0,b.useEffect)(function(){s.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,v.tZ)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,v.BX)(lK.Z,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,v.tZ)("span",{css:[z.gU.listItem,A.l0.display.inlineBlock,A.l0.px(2),A.l0.py(0),A.l0.borderRadius(4)],children:n}),(0,v.tZ)(I.G,{css:[A.l0.maxWidth(260)],children:(0,v.tZ)(K.xv,{variant:"small",children:t.id})})]})})},ci=(p={},(0,S._)(p,cn.dD.Deploy,function(e){return(0,v.BX)(v.HY,{children:["deployed ",(0,v.tZ)(cr,{build:e})]})}),(0,S._)(p,cn.dD.Rollback,function(e){return(0,v.BX)(v.HY,{children:["rolled back ",(0,v.tZ)(cr,{build:e})]})}),(0,S._)(p,cn.dD.Fail,function(e){return(0,v.BX)(v.HY,{children:["failed to deploy ",(0,v.tZ)(cr,{build:e})]})}),p),co=function(e){var t=e.activityLogItem,n=t.type,r=t.build,i=r.user.displayName,o=n in ci&&ci[n](r);return o?(0,v.BX)(K.xv,{multiline:!1,children:[(0,v.tZ)("span",{css:A.l0.fontWeight.medium,children:i+" "}),o]}):null};function ca(e){var t=e.type,n=e.view,r=e.provider,i=e.onViewBuildLogs,o=e.openFile,a=e.openDebugChat,l=(0,o4.Z)();return(0,v.tZ)(cv,{replId:l,type:void 0===t?"default":t,view:n,provider:r,onSelect:i,openFile:o,openDebugChat:a})}var cl=lX.filter(function(e){return"title"in e}),cc=(0,B.X)({root:[A.l0.flex.row,A.l0.px(8),A.l0.pb(8),{zIndex:0}]});function cs(e){var t=e.activeStage,n=e.erroredStage;return(0,v.tZ)(I.G,{css:cc.root,children:cl.map(function(e){return(0,v.tZ)(lN,{stage:e.id,text:e.title,totalStagesWithTitle:cl.length,activeStage:t,erroredStage:n},e.id)})})}var cu=(0,B.X)({root:[A.l0.colWithGap(8),A.l0.height("100%")],header:[A.l0.pt(8),A.l0.px(8),A.l0.rowWithGap(8),A.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+A.TV.outlineDimmest}],name:[A.l0.color.foregroundDefault,A.l0.fontWeight.medium],content:[A.l0.p(8),A.l0.flex.growAndShrink(1),A.l0.position.relative],loading:[A.l0.coverContainer,A.l0.center],error:[A.l0.m(8),A.l0.borderRadius(8),A.l0.overflow("hidden")],xterm:[A.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[A.l0.coverContainer,A.l0.p(8)]}]});function cd(e){var t,n,r=e.build,i=e.onBack,o=e.fs,a=e.openFile,l=e.openDebugChat,c=e.onViewAppLogs,s=(0,g._)((0,a5.Z)({openFile:a,listFiles:o.listFiles}),2),u=s[0],d=s[1],f=(t={variables:{input:{buildId:r.id}},ssr:!1,fetchPolicy:"cache-and-network"},n=(0,_._)({},l5,t),eS.a(ct,n)),p=f.data,h=f.loading,m=(0,b.useMemo)(function(){var e=[],t=p&&"HostingBuildDeployActionHistoryResults"===p.hostingBuildDeployActionHistory.__typename?p.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var c,s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)!function(){var t=s.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);lX.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===es.Fe.Failed&&(r=n)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=n?null===(c=lW(n))||void 0===c?void 0:c.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[p]);return(0,b.useEffect)(function(){u&&m&&u.write(m.logs.join(""))},[u,m]),(0,v.BX)(I.G,{css:cu.root,children:[(0,v.BX)(I.G,{css:cu.header,children:[(0,v.tZ)(eX.hU,{alt:"Back to timeline",onClick:function(){return i()},children:(0,v.tZ)(eF.Z,{})}),(0,v.tZ)(I.G,{children:(0,v.BX)(K.xv,{color:"dimmer",multiline:!1,children:[(0,v.tZ)("span",{css:cu.name,children:r.user.displayName+" "}),(0,tu.B)(r.status)]})}),(0,v.tZ)(cr,{build:r})]}),m||h?(0,v.BX)(v.HY,{children:[(null==m?void 0:m.erroredStatus)?(0,v.tZ)(I.G,{css:cu.error,children:(0,v.tZ)(le,{currentStatus:m.erroredStatus,provider:r.provider,debugSummary:r.debugSummary,openFile:a,openDebugChat:l,onViewApplicationLogs:c})}):null,(0,v.tZ)(cs,{activeStage:null==m?void 0:m.activeStage,erroredStage:null==m?void 0:m.erroredStage}),(0,v.tZ)(I.G,{css:cu.divider}),(0,v.BX)($.Tg,{css:cu.content,children:[(0,v.tZ)(I.G,{css:cu.xterm,innerRef:d}),h||!u?(0,v.tZ)(I.G,{css:cu.loading,children:(0,v.tZ)(eW.Z,{color:A.TV.white,size:24})}):null]})]}):(0,v.tZ)(ls,{provider:r.provider,openFile:a})]})}var cf=(0,B.X)({item:A.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,T.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null==a?void 0:a.from)?a.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(36.4,"px;\n  }\n  ").concat((null==a?void 0:a.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(36.4,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))+" 300ms ease-out forwards"}}),cp=(0,B.X)({root:[A.l0.colWithGap(8)],empty:[A.l0.pb(8),A.l0.center,A.l0.align.stretch],items:[],loadMore:[A.l0.center],item:[A.l0.rowWithGap(8),A.l0.pl(8),A.l0.pr(4),A.l0.pb(12),A.l0.align.center,A.l0.flex.growAndShrink(1),A.l0.color.foregroundDimmest,A.l0.hover(A.l0.color.foregroundDefault)],itemMainText:[A.l0.flex.growAndShrink(1),(0,S._)({},A.nC.min(640),A.l0.flex.growAndShrink(0))],itemLine:[A.l0.display.none,(0,S._)({},A.nC.min(640),[A.l0.display.flex,A.l0.flex.growAndShrink(1),A.l0.border({color:A.TV.outlineDimmest,direction:"top"})])],itemRight:[A.l0.rowWithGap(6),A.l0.justify.end,A.l0.textAlign.right],itemContent:[A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1),A.l0.align.center],itemPast:[cf.item,cf.past],itemPastAnimate:[cf.item,cf.past,cf.animate],itemFuture:[cf.item,cf.future],itemFutureAnimate:[cf.item,cf.future,cf.animate],disabledLog:{cursor:"not-allowed"}}),ch=(0,B.X)({top:A.l0.rowWithGap(12),button:[A.l0.reset.button,A.l0.cursor.pointer,A.l0.borderRadius(8),A.l0.display.flex,A.l0.rowWithGap(6),A.l0.align.center,A.l0.px(8),A.l0.color.foregroundDimmer,A.l0.height(32),A.l0.hover(A.l0.color.foregroundDefault),{'&[data-highlight="true"]':[A.l0.color.accentNegativeStrongest,A.l0.backgroundColor.accentNegativeDimmest,A.l0.border({color:A.TV.accentNegativeDimmer})]}],info:[A.l0.flex.growAndShrink(1),{'&[data-open="false"]':A.l0.pb(6)}],buttonContent:[A.l0.flex.growAndShrink(1),A.l0.rowWithGap(8),A.l0.align.center],failedBuildList:A.l0.pt(8)});function cm(e){var t=e.items,n=e.upcomingBuildStatus,r=e.view,i=e.provider,o=e.onClick,a=e.openFile,l=e.openDebugChat,c=(0,g._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,w.kW)(),f=t[0],p=f.build.debugSummary,h=d===Z.z.Ready&&!n&&r!==ex.k.DeploymentInProgress&&p;return(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:ch.top,children:[(0,v.tZ)(a8,{type:s?"futureFailOpen":"futureFailClosed"}),(0,v.BX)(I.G,{css:ch.info,"data-open":s,children:[h?(0,v.tZ)(ln,{title:"".concat(t.length," ").concat((0,t_.Z)("build",t.length)," failed"),debugSummary:p,onViewBuildLogs:function(){return o(f.build)},openFile:a,provider:i,openDebugChat:l}):null,(0,v.BX)("button",{onClick:function(){return u(!s)},css:ch.button,children:[(0,v.BX)(I.G,{css:ch.buttonContent,children:[(0,v.tZ)(oh.Z,{}),(0,v.tZ)(K.xv,{children:"View all failed builds"}),s?null:(0,v.BX)(K.xv,{css:A.l0.color.foregroundDimmest,variant:"small",children:[t.length>1?"Most recent: ":null,(0,tf.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),s?(0,v.tZ)(r5.Z,{color:A.TV.foregroundDimmer}):(0,v.tZ)(rC.Z,{color:A.TV.foregroundDimmer})]})]})]}),s?(0,v.tZ)(I.G,{css:ch.failedBuildList,children:t.map(function(e){return(0,v.tZ)(cy,{item:e,onClick:function(){return o(e.build)},type:"future"},e.id)})}):null]})}function cg(e){var t=e.items,n=e.view,r=e.provider,i=e.onClick,o=e.openFile,a=e.openDebugChat,l=(0,g._)((0,b.useState)(!1),2),c=l[0],s=l[1],u=(0,w.BU)().hasDebugSummariesAuthorization,d=(0,w.pn)(),f=(0,b.useRef)(void 0);(0,b.useEffect)(function(){(null==d?void 0:d.status)!==void 0&&(f.current=null==d?void 0:d.status)},[d,null==d?void 0:d.status]);var p=!d&&f.current!==es.Fe.Building&&f.current!==es.Fe.Success,h=p?A.TV.accentNegativeStronger:A.TV.foregroundDimmer;if(0===t.length)return null;var m=t[0];return u&&m.build.debugSummary?(0,v.tZ)(cm,{items:t,upcomingBuildStatus:f.current,view:n,provider:r,onClick:i,openFile:o,openDebugChat:a}):(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:ch.top,children:[(0,v.tZ)(a8,{type:c?"futureFailOpen":"futureFailClosed"}),(0,v.tZ)(I.G,{css:ch.info,"data-open":c,children:(0,v.BX)("button",{onClick:function(){return s(!c)},css:ch.button,"data-highlight":p,children:[(0,v.BX)(I.G,{css:ch.buttonContent,children:[p?(0,v.tZ)(eo.Z,{color:A.TV.accentNegativeStronger}):null,(0,v.BX)(K.xv,{children:[t.length," ",(0,t_.Z)("build",t.length)," failed"]}),c?null:(0,v.BX)(K.xv,{children:[t.length>1?"Most recent: ":null,(0,tf.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),c?(0,v.tZ)(r5.Z,{color:h}):(0,v.tZ)(rC.Z,{color:h})]})})]}),c?(0,v.tZ)(I.G,{css:ch.failedBuildList,children:t.map(function(e){return(0,v.tZ)(cy,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function cv(e){var t,n,r,i=e.replId,o=e.type,a=void 0===o?"default":o,l=e.view,c=e.provider,s=e.onSelect,u=e.openFile,d=e.openDebugChat,f=(t=(0,_._)({},l5,{variables:{replId:i,count:20},fetchPolicy:"cache-and-network",ssr:!1}),eS.a(ce,t)),p=f.data,h=f.previousData,m=f.loading,g=f.error,y=f.fetchMore,Z=null!=p?p:h,C=(null==Z?void 0:Z.getRepl.__typename)==="Repl"?Z.getRepl:null,S=(null==C?void 0:null===(r=C.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"?C.hostingDeployment:null,T=(n=(0,x._)(function(){var e;return(0,k.Jh)(this,function(t){switch(t.label){case 0:if(!(e=null==S?void 0:S.activityLogs.pageInfo.nextCursor))return[2];return[4,y({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})}),function(){return n.apply(this,arguments)}),E=(0,lY.Z)({onLoadMore:T,rootMargin:"0px 0px 300px 0px"}).targetRef,R=(0,w.$y)(),D=(0,w.pn)(),B=(0,b.useRef)(void 0);if((0,b.useEffect)(function(){(null==D?void 0:D.id)!==void 0&&(B.current=null==D?void 0:D.id)},[null==D?void 0:D.id]),m&&!S)return"failureQueue"===a?null:(0,v.tZ)(cw,{});if(!(null==S?void 0:S.activityLogs))return null;var A=S.activityLogs,P=A.items,G=A.pageInfo;if(0===P.length)return null;if(g)return(0,v.tZ)(I.G,{css:cp.empty,children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"Something went wrong"})});var L=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==es.dD.Fail||r&&r.getTime()>new Date(s.build.timeCreated).getTime())break;n.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(P,R);return"failureQueue"===a?(0,v.tZ)(N,{render:L.length>0,initialHeight:44,children:(0,v.tZ)(cg,{items:L,view:l,provider:c,onClick:s,openFile:u,openDebugChat:d})}):(0,v.BX)(I.G,{css:cp.root,"data-history-timeline-items":P.length-L.length,children:[(0,v.tZ)(I.G,{css:cp.items,children:P.map(function(e,t){return e.build.id===(null==R?void 0:R.id)||t<L.length?null:(0,v.tZ)(cy,{item:e,onClick:function(){return s(e.build)}},e.id)})}),G.nextCursor?(0,v.tZ)(I.G,{css:cp.loadMore,children:(0,v.tZ)(eX.hU,{disabled:m,tooltipBehavior:"hidden",alt:"Show more",onClick:T,ref:E,children:m?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(l$.Z,{})})}):null]})}function cy(e){var t=e.item,n=e.onClick,r=e.timeline,i=e.type,o=t.build.hasDeployLogs,a=new Date(t.timeCreated),l=Date.now(),c=!o,s=(0,v.BX)(I.G,{css:cp.item,children:[(0,v.tZ)(I.G,{css:cp.itemMainText,children:(0,v.tZ)(co,{activityLogItem:t})}),(0,v.tZ)(I.G,{css:cp.itemLine}),(0,v.BX)(I.G,{css:cp.itemRight,children:[(0,v.tZ)(l1,{activityLogItem:t}),(0,v.tZ)(K.xv,{multiline:!1,children:(0,tf.Z)(a,l,{addSuffix:!0})}),(0,v.tZ)(eX.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:c,css:c&&cp.disabledLog,children:(0,v.tZ)(td.Z,{})})]})]});return void 0===r||r?(0,v.BX)(I.G,{css:"past"===(void 0===i?"past":i)?cp.itemPast:cp.itemFuture,children:[(0,v.tZ)(a8,{type:t.type===es.dD.Fail?"pastFail":"pastSuccess"}),s]}):s}var cb=(0,B.X)({loading:[A.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[j.p.backgroundPulse(),A.l0.height(20.4),A.l0.mt(2),A.l0.ml(4),A.l0.flex.growAndShrink(1),A.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function cw(){return(0,v.tZ)(I.G,{children:[,,,].fill(0).map(function(e,t){return(0,v.BX)(I.G,{css:cb.loading,children:[(0,v.tZ)(a8,{type:"pastNeutral"}),(0,v.tZ)($.Tg,{elevated:!0,css:cb.loadingItem})]},t)})})}var cZ=n(43540),cx=n(89470),cC=(0,B.X)({styles0:[A.l0.height(128),A.l0.width(128),A.l0.borderRadius(2),z.gU.nofill],styles1:[A.l0.position.absolute]}),ck=(0,B.X)({container:[A.l0.align.center,A.l0.colWithGap(4)],qrContainer:[A.l0.align.center,A.l0.justify.center]});function cS(e){var t=e.color;return(0,v.BX)(I.G,{css:ck.container,children:[(0,v.BX)(I.G,{css:ck.qrContainer,children:[(0,v.tZ)("svg",{viewBox:"0 0 128 128",css:cC.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,v.tZ)("path",{fill:null!=t?t:A.TV.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,v.tZ)(cx.Z,{size:32,css:cC.styles1,color:t})]}),(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var c_=n(64765),cT=n(52589),cE=(0,B.X)({row:[A.l0.pb(12),A.l0.rowWithGap(2),A.l0.justify.center],buttonLeft:[A.l0.borderRadius(8,0,0,8),A.l0.flex.growAndShrink(1)],buttonRight:[A.l0.borderRadius(0,8,8,0)]});function cR(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,g._)((0,b.useState)(!1),2),i=r[0],o=r[1];return(0,v.BX)(v.HY,{children:[t?(0,v.BX)(I.G,{css:cE.row,children:[(0,v.tZ)(V.zx,{iconLeft:(0,v.tZ)(c_.Z,{}),onClick:function(){(0,eb.j)(cT.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:cE.buttonLeft}),(0,v.tZ)(V.zx,{css:cE.buttonRight,text:"",iconLeft:(0,v.tZ)(n1.Z,{}),onClick:n})]}):null,(0,v.tZ)(q.u,{isOpen:i,onRequestClose:function(){o(!1),n()},children:(0,v.tZ)(cS,{})})]})}function cD(){var e=(0,eC._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return cD=function(){return e},e}var cI={},cB=(0,ek.Ps)(cD(),l9,ic),cA=(0,B.X)({self:A.l0.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:lH,deployOptions:[A.l0.p(16),A.l0.pt(12),A.l0.borderRadius(8),A.l0.border({color:A.TV.outlineDimmest})]}),cP=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,y,C=e.deploymentId,S=e.dotReplit,T=e.fs,E=e.ports,R=e.secrets,D=e.onError,B=e.expanded,A=e.setExpanded,P=e.shouldShowMobileTour,G=e.onDismissMobileTour,L=e.openNetworkingPane,N=e.onResume,O=(0,w.XA)().redeployWithNoNewOptions,M=(0,w.kW)(),X=(i=(t={deploymentId:C,dotReplit:S}).deploymentId,o=t.dotReplit,l=(a=(0,g._)((0,b.useState)(null),2))[0],c=a[1],(0,b.useEffect)(function(){var e=!1;function t(){return(t=(0,x._)(function(){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,ey.$f)(o)];case 1:if(t=n.sent(),e)return[2];return c(t),[2]}})})).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}},[o]),d=(s=(0,_._)({},cI,{variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"}),u=eS.a(cB,s)).data,f=u.loading,p=u.error,h=(null==d?void 0:null===(n=d.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?d.hostingDeployment:null,(null==d?void 0:null===(r=d.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!h&&f?{data:null,erorr:null,loading:!0}:p||!h?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:h,config:l,error:null,loading:!1}),F=(0,w.BU)().deployability,W=null===(m=X.deployment)||void 0===m?void 0:m.currentBuild,H=ii({secrets:R}).devSecrets,z=null===(y=X.deployment)||void 0===y?void 0:y.currentBuild.envVars,j=(0,U.P5)({controlName:ed.Ym,logFlagToAnalytics:!1}),q=(0,b.useMemo)(function(){return H&&z?r7({secrets:new Map(null==z?void 0:z.map(function(e){return[e.name,e.value]})),otherSecrets:H}).missing.size:0},[H,z]);if(X.error)return(0,v.tZ)(ej,{text:X.error});if(B)return W?(0,v.tZ)(I.G,{css:cA.deployOptions,children:(0,v.tZ)(ih,{initialSubdomain:"",provider:W.provider,deploymentId:C,fs:T,secrets:R,dotReplit:S,ports:E,onCancel:function(){return A(!1)},onDeploy:function(){return A(!1)},onError:D,initialSecretsSyncExpanded:q>0,openNetworkingPane:L})}):(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"Provider not found"});var Y=X.loading||!F.redeploy.isAuthorized||!(M===Z.z.Ready||M===Z.z.Suspended)||j&&(null==W?void 0:W.suspendedReason)===cn.dq.Ubb;return(0,v.BX)(I.G,{css:cA.self,children:[(0,v.tZ)(nY,{deployability:F,isRedeploy:!0}),(0,v.BX)(I.G,{css:cA.ctaGroup,children:[(0,v.tZ)(V.zx,{disabled:Y,onClick:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:if(X.loading)return[2];if(M===Z.z.Suspended)return N(),[2];return[4,O()];case 1:return e.sent(),[2]}})}),text:M===Z.z.Suspended?"Resume":"Redeploy",iconLeft:(0,v.tZ)(r8.Z,{})}),(0,v.tZ)(V.zx,{disabled:Y,text:q>0?"".concat(q," ").concat((0,t_.Z)("secrets",q)," out of sync"):"Edit commands and secrets",iconLeft:q>0?(0,v.tZ)(eo.Z,{}):void 0,onClick:function(){return A(!0)}}),(0,v.tZ)(cR,{shouldShow:P,onDismissTour:G})]})]})},cG=(0,B.X)({deployOptionsWithCurrentBuild:[A.l0.p(16),A.l0.pt(12),A.l0.borderRadius(),A.l0.border({color:A.TV.outlineDimmest})],back:[A.l0.pb(8),A.l0.flex.growAndShrink(1)],subViewOuter:[A.l0.rowWithGap(12)],subView:[A.l0.pb(12),A.l0.flex.growAndShrink(1),A.l0.colWithGap(12)],suspendedLink:[A.l0.color.accentNegativeStrongest],deploymentInfoWrapper:[A.l0.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[A.l0.pb(16),A.l0.flex.growAndShrink(1),A.l0.colWithGap(12)],deploymentSuspension:[A.l0.pb(12),A.l0.flex.growAndShrink(1),A.l0.colWithGap(12)],interior:[A.l0.colWithGap(8),A.l0.pb(12)]}),cL=function(e){var t=e.view,n=e.onLifecycleCommand,r=e.onViewAction,i=e.onError,o=e.openFile,a=(0,w.kW)(),l=(0,w.hn)(),c=(0,w.$y)(),s=(0,w.pn)(),u=(0,w.XZ)(),d=(0,w.Qk)(),f=(0,M.sG)(),p=(0,U.P5)({controlName:ed.Ym,logFlagToAnalytics:!1}),h=void 0!==c,m=(0,o4.Z)(),y=(0,w.l9)(m),x=null==c?void 0:c.provider,C=h&&c.machineConfiguration?{configurationId:c.machineConfiguration.id,configurationLabel:c.machineConfiguration.label,configurationSlug:c.machineConfiguration.slug,maxInstances:null==c?void 0:c.maxMachineInstances}:void 0,k=(0,cZ.Z)("deployments-pane","deployments-mobile-download"),S=k.shouldDisplay,_=k.dismiss,T=k.register;(0,b.useEffect)(function(){T()},[T]);var E=(null==c?void 0:c.status)&&c.status===es.Fe.Success&&S&&!f,R=(0,g._)((0,b.useState)(!1),2),D=R[0],B=R[1],A=(0,g._)((0,b.useState)(null),2),P=A[0],G=A[1],L=(0,g._)((0,b.useState)(null),2),N=L[0],O=L[1];(0,b.useEffect)(function(){ew({context:ex.k.Deployment})},[]),(0,b.useEffect)(function(){(a===Z.z.Preparing||a===Z.z.Deploying)&&(t===ex.k.DeploymentInProgress||P||r({type:ex.a.ChangeView,payload:{view:ex.k.DeploymentInProgress}}))},[a,t,r,P]);var X=(0,b.useRef)(void 0);(0,b.useEffect)(function(){X.current=null==s?void 0:s.id},[null==s?void 0:s.id]);var F=(null==c?void 0:c.status)===es.Fe.Success,W=(null==c?void 0:c.id)===X.current;(0,b.useEffect)(function(){F&&W&&r({type:ex.a.ChangeView,payload:{view:ex.k.Deployment}})},[F,W,r]);var V=null==s?void 0:s.status,H=(0,b.useRef)(V);(0,b.useEffect)(function(){V&&(H.current=V)},[V]);var z=(0,w.v5)(),j=(0,w.t7)();if(P)return(0,v.tZ)(cd,{build:P,fs:u,openFile:o,openDebugChat:function(e){r({type:ex.a.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})},onBack:function(){G(null)},onViewAppLogs:function(){r({type:ex.a.ChangeView,payload:{view:ex.k.Logs}})}});if(N===es.r4.CloudRun)return(0,v.tZ)(nq,{onError:i,onConfirm:function(e){r({type:ex.a.SendDeploymentLifecycleCommand,payload:{command:es.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return O(null)}});if(N===es.r4.Gce)return(0,v.tZ)(e8,{isTeamRepl:y,initialMachineConfiguration:C,onConfirm:function(e){r({type:ex.a.SendDeploymentLifecycleCommand,payload:{command:es.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return O(null)},onError:i});var q=!h||!l||!(a===Z.z.Ready||a===Z.z.Suspended||a===Z.z.ProcessingLifecycleCommand),Y=function(e){r({type:ex.a.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})};return(0,v.tZ)(v.HY,{children:(0,v.tZ)(ev,{children:(0,v.BX)(I.G,{children:[(0,v.BX)(I.G,{css:cG.subViewOuter,children:[h?(0,v.tZ)(a8,{type:"future"}):null,(0,v.BX)(I.G,{css:cG.subView,children:[q?null:(0,v.tZ)(cP,{dotReplit:z,fs:u,secrets:d,ports:j,deploymentId:l,onError:i,expanded:D,setExpanded:B,shouldShowMobileTour:null!=E&&E,onDismissMobileTour:_,openNetworkingPane:function(){r({type:ex.a.OpenPane,payload:{type:"networking"}})},onResume:function(){n({command:es.Qc.Resume})}}),t===ex.k.DeploymentInProgress?(0,v.tZ)(lq,{openFile:o,openDebugChat:Y,viewBuildLogsOnLoad:!h,onViewLogs:function(){r({type:ex.a.ChangeView,payload:{view:ex.k.Logs}})},onCanceled:function(){r({type:ex.a.ChangeView,payload:{view:ex.k.Deployment}}),i("Build cancelled")},onError:i}):null]})]}),h&&x?(0,v.BX)(v.HY,{children:[(0,v.tZ)(ca,{type:"failureQueue",onViewBuildLogs:G,openFile:o,openDebugChat:Y,view:t,provider:x}),p&&c.suspendedReason===es.dq.Ubb&&(0,v.BX)(I.G,{css:cG.deploymentInfoWrapper,children:[(0,v.tZ)(a8,{type:"pastFail"}),(0,v.tZ)(I.G,{css:cG.deploymentSuspension,children:(0,v.tZ)(J.E,{icon:(0,v.tZ)(eo.Z,{}),colorway:"negative",text:["Your deployments have been suspended due to an account restriction or billing failure. Navigate to Account > Billing to resolve or reach out to our support team for assistance at ",(0,v.tZ)("a",{css:cG.suspendedLink,href:"mailto:support@replit.com",children:(0,v.tZ)("u",{children:"support@replit.com"})},""),"."]})})]}),(0,v.BX)(I.G,{css:cG.deploymentInfoWrapper,children:[(0,v.tZ)(a8,{type:"present"}),(0,v.tZ)(I.G,{css:cG.deploymentInfo,children:(0,v.tZ)(tk,{provider:x,machine:C,onViewBuildLogs:G,onManageClick:function(){if(x===es.r4.CloudRun||x===es.r4.Gce){O(x);return}x===es.r4.Static&&r({type:ex.a.ChangeView,payload:{view:ex.k.Settings}})},onViewAction:r})})]}),(0,v.tZ)(ca,{onViewBuildLogs:G,openFile:o,openDebugChat:Y,view:t,provider:x})]}):null]})})})},cN=n(14769),cO=A.nC.min(600),cU={order:"--provider-order"},cM={order:"var(".concat(cU.order,")")},cX=(0,T.iv)([A.l0.width("100%"),A.l0.maxWidth(340),(0,S._)({},cO,{order:cM.order})]),cF=(0,T.iv)([A.l0.reset.button,A.l0.overflow("hidden"),A.l0.position.relative,A.l0.focusRing,A.l0.borderRadius(),A.l0.width("100%")]),cW=(0,B.X)({self:[cX,{"&::after":{content:"none"}}],selfLoading:[cX,j.p.foregroundPulse(),A.l0.border({color:A.TV.backgroundHighest})],button:[cF,z.gU.filledAndOutlined,A.l0.border({color:A.TV.outlineDimmer})],buttonActive:[cF,A.l0.cursor.pointer,A.l0.backgroundColor.accentPrimaryDimmest,A.l0.border({color:A.TV.accentPrimaryStronger})],content:[A.l0.p(8),A.l0.colWithGap(4),(0,S._)({},cO,A.l0.py(12))],contentRecommended:[A.l0.p(8),A.l0.colWithGap(4),(0,S._)({},cO,{paddingTop:12,paddingBottom:20})],recommended:[A.l0.py(4),A.l0.backgroundColor.backgroundHighest],recommendedActive:[A.l0.py(4),A.l0.backgroundColor.accentPrimaryDimmer],icon:[A.l0.display.none,A.l0.color.foregroundDimmer,A.l0.center,(0,S._)({},cO,A.l0.display.flex)],iconActive:[A.l0.display.none,A.l0.color.accentPrimaryStrongest,A.l0.center,(0,S._)({},cO,A.l0.display.flex)],tiersTitle:[A.l0.rowWithGap(8),A.l0.align.center],title:[A.l0.rowWithGap(4),A.l0.center]});function cV(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.description,c=e.recommended,s=e.index,u=(t={},(0,S._)(t,es.r4.CloudRun,(0,v.tZ)(ee.Z,{size:32})),(0,S._)(t,es.r4.Gce,(0,v.tZ)(en.Z,{size:32})),(0,S._)(t,es.r4.Static,(0,v.tZ)(ei.Z,{size:32})),(0,S._)(t,es.r4.Cron,(0,v.tZ)(Q.Z,{size:32})),t)[i];return(0,v.tZ)("span",{css:n?cW.selfLoading:cW.self,children:(0,v.BX)("button",{css:r?cW.buttonActive:cW.button,onClick:function(){return o(i)},disabled:n,style:(0,S._)({},cU.order,s),children:[c?(0,v.tZ)(I.G,{css:r?cW.recommendedActive:cW.recommended,children:(0,v.tZ)(K.xv,{variant:"small",children:"Recommended"})}):null,(0,v.BX)(I.G,{css:c?cW.contentRecommended:cW.content,children:[(0,v.tZ)(I.G,{css:r?cW.iconActive:cW.icon,children:u}),(0,v.BX)(I.G,{children:[(0,v.tZ)(I.G,{css:cW.title,children:(0,v.tZ)(K.xv,{variant:"subheadDefault",multiline:!1,children:a})}),(0,v.tZ)(K.xv,{multiline:!1,variant:"small",children:l})]})]})]})})}var cH=(0,B.X)({container:[A.l0.colWithGap(12),A.l0.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[A.l0.align.center,{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[A.l0.flex.growAndShrink(1),A.l0.textAlign.left]});function cz(e){var t=e.header,n=e.info;return(0,v.BX)(I.G,{css:cH.container,children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",children:t}),n.map(function(e,t){return(0,v.BX)(I.G,{css:cH.item,children:[e.icon,(0,v.tZ)(K.xv,{css:cH.text,children:e.text})]},t)})]})}var cj=[es.r4.Gce,es.r4.CloudRun,es.r4.Static,es.r4.Cron],cq=(0,B.X)({container:[A.l0.colWithGap(32),A.l0.textAlign.center,L.maxWidth],title:[A.l0.colWithGap(4),A.l0.width("100%"),A.l0.maxWidth(400),A.l0.align.center,{marginLeft:"auto",marginRight:"auto"}],body:A.l0.colWithGap(16),providers:[A.l0.flex.column,A.l0.align.center,(0,S._)({gap:8},cO,[A.l0.flex.row,A.l0.align.center,{gap:12}])],providerDetails:A.l0.colWithGap(16),cta:[A.l0.width("100%"),A.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:A.l0.colWithGap(8),secondaryCta:[A.l0.width("100%"),A.l0.maxWidth(320)],ctaContainer:[A.l0.colWithGap(8),A.l0.align.center],ctaStatusBanner:[A.l0.textAlign.left],oldCta:[A.l0.px(8),A.l0.colWithGap(16)],payment:[A.l0.p(16),A.l0.borderRadius("container"),A.l0.textAlign.left,A.l0.shadow(2)],budgetContainer:[A.l0.colWithGap(8),A.l0.border(),A.l0.borderRadius(),A.l0.p(8)],disabledBanner:[A.l0.py(6),{alignSelf:"center"}]}),cJ=function(e){var t,n,r,i,o,a,l,c=e.replId,s=e.onError,u=e.onDeploy,d=e.onViewAction,f=e.initialSelectedProvider,p=(0,w.XZ)(),h=(0,w.Qk)(),m=(0,w.v5)(),y=(0,w.t7)(),Z=(0,g._)((0,b.useState)(void 0),2),C=Z[0],_=Z[1],T=(0,g._)((0,b.useState)(void 0),2),E=T[0],B=T[1],P=(0,g._)((0,b.useState)(!1),2),G=P[0],L=P[1],N=(0,g._)((0,b.useState)(!1),2),O=N[0],M=N[1],X=(0,g._)((0,b.useState)(null!=f?f:null),2),F=X[0],V=X[1],H=(0,w.BU)(),z=H.getDeployabilityByProvider,j=H.refetch;(0,b.useEffect)(function(){ew({context:"intro"})},[]);var J=(0,ec.Se)(),Y=J.getDescription,Q=J.Icon,ee=eP({variables:{id:c},onError:function(e){return s(e.message)}}),et=ee.loading,en=ee.data,er=(0,g._)((0,b.useState)(!1),2),ei=er[0],eo=er[1],ea=(null==en?void 0:en.getRepl.__typename)==="Repl"&&(null===(n=en.getRepl.owner)||void 0===n?void 0:n.__typename)==="Team",el=(null==en?void 0:en.getRepl.__typename)==="Repl"&&(null==en?void 0:null===(r=en.getRepl.owner)||void 0===r?void 0:r.id)&&(0,ef.xm)(null==en?void 0:null===(i=en.getRepl.owner)||void 0===i?void 0:i.id),eu=(0,U.P5)({controlName:ed.dA,logFlagToAnalytics:!1}),ep=(null==en?void 0:null===(o=en.getRepl)||void 0===o?void 0:o.__typename)==="Repl"&&(null===(a=en.getRepl.org)||void 0===a?void 0:a.type)==="team"?en.getRepl.org:void 0;(0,b.useEffect)(function(){(0,x._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(et)return[2];if(ea&&!el)return _(es.r4.Gce),B(es.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,ey.$f)(m)];case 2:if(null===(e=n.sent()).appType)return _(es.r4.CloudRun),B(es.r4.CloudRun),[2];if((t=(0,D.oU)(e.appType))===es.r4.Goval||t===es.r4.Extension)return s("Did not recognize template deployment provider"),[2];return _(t),B(t),[3,4];case 3:return n.sent(),s("Something went wrong"),[3,4];case 4:return[2]}})})()},[s,m,et,ea,el]);var eh=(0,b.useCallback)((0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return eo(!0),[4,j()];case 1:return e.sent(),eo(!1),[2]}})}),[j,eo]);if(F)return(0,v.tZ)(ig,{replId:c,initialState:F?{type:F}:{type:es.r4.Gce,didCheckout:!0},fs:p,secrets:h,dotReplit:m,ports:y,onDeploy:u,onBack:function(){return V(null)},onError:s,openNetworkingPane:function(){d({type:ex.a.OpenPane,payload:{type:"networking"}})}});var em=z(C),eg=em.deploy,eb=em.isIncludedInSubscription,eZ=eg.isAuthorized,eC=eg.code,ek=eg.message,eS=et||ei||void 0===C,e_=(l={title:"Deploy to production",subtitle:Y({type:"deployments"})},(0,S._)(l,es.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,v.tZ)(cN.lV,{})},{text:(t=(0,g._)((0,ed.gr)("e2-micro"),1)[0],"Reserved VMs are billed hourly starting at $".concat(t,"/hour.")),icon:(0,v.tZ)(cN.G8,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,v.tZ)(cN.KU,{})}]}),(0,S._)(l,es.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,v.tZ)(cN.Qm,{})},{text:"Compute units are billed at $".concat(tA.m0," per compute unit."),icon:(0,v.tZ)(cN.fG,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,v.tZ)(cN.KU,{})}]}),(0,S._)(l,es.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Share client-side apps fast",info:[{text:"You only pay for outbound data transfer (included in Replit plans). $0.10/GiB otherwise.",icon:(0,v.tZ)(cN.Lv,{})},{text:"Fast deploy times allow you to move quickly on your production sites.",icon:(0,v.tZ)(cN.lt,{})},{text:"Suitable for HTML sites and static content.",icon:(0,v.tZ)(cN.KU,{})}]}),(0,S._)(l,es.r4.Cron,{display:eu,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,v.tZ)(cN.lt,{})},{text:"Usage-based pricing. Each scheduled job is billed at $0.00000125 per compute unit + $0.10 per month for the scheduler.",icon:(0,v.tZ)(cN.fG,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,v.tZ)(cN.KU,{})}]}),l);return(0,v.BX)(ev,{centered:!0,children:[(0,v.tZ)(q.u,{isOpen:O,onRequestClose:function(){return M(!1)},children:(0,v.tZ)(R.Z,{onRequestClose:function(){return M(!1)}})}),(0,v.BX)(I.G,{css:cq.container,children:[(0,v.BX)(I.G,{css:cq.title,children:[(0,v.tZ)(Q,{pane:{type:"deployments"},size:48}),(0,v.tZ)(K.h4,{level:1,variant:"subheadBig",children:e_.title}),(0,v.tZ)(K.xv,{color:"dimmer",children:e_.subtitle}),(0,v.tZ)(K.xv,{css:A.l0.textAlign.center,children:(0,v.tZ)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,v.BX)(I.G,{css:cq.body,children:[(0,v.tZ)(I.G,{css:cq.providers,children:cj.map(function(e,t){if(!e_[e].display)return null;var n=e_[e],r=n.title,i=n.subtitle;return(0,v.tZ)(cV,{provider:e,loading:eS,active:C===e,onClick:function(e){_(e),L(!1)},title:r,description:i,recommended:E===e,index:e===E&&0===t?1.5:e===E&&2===t?.5:t},e)})}),(0,v.BX)(I.G,{css:cq.ctaGroup,children:[(0,v.tZ)(cY,{loading:eS,provider:C,isDeployable:eZ,isDeployableCode:eC,isDeployableExplanation:ek,isIncludedInSubscription:eb,handleOnProviderContinue:function(){C&&V(C)},refetchDeployabilityQueryData:eh,setShowPaymentMethodForm:function(){return L(!0)},showPaymentMethodForm:G,setShowSupportForm:function(){return M(!0)},org:ep}),G?(0,v.tZ)($.Tg,{elevated:!0,css:cq.payment,children:(0,v.tZ)(W.q,{onSuccess:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return L(!1),[4,eh()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,v.tZ)(I.G,{css:cq.providerDetails,children:C?(0,v.tZ)(cz,{header:e_[C].header,info:e_[C].info}):null})]})]})};function cY(e){var t=e.provider,n=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.handleOnProviderContinue,c=e.refetchDeployabilityQueryData,s=e.setShowPaymentMethodForm,u=e.showPaymentMethodForm,d=e.setShowSupportForm,f=e.org,p=(0,M.sG)(),h=(0,U.P5)({controlName:ed.su,logFlagToAnalytics:!1}),m=(0,U.P5)({controlName:ed.jp,logFlagToAnalytics:!1});if(!n&&p)return(0,v.tZ)(J.E,{text:i,colorway:"grey",css:cq.disabledBanner});if(o)return(0,v.BX)(v.HY,{children:[(0,v.tZ)(V.zx,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:cq.cta}),(0,v.tZ)(K.xv,{color:"dimmer",children:i})]});var g=function(){if(f){var e=(0,X._Q)(f).settings.href.toString()+"/billing";window.open(e,"_blank");return}s()};switch(r){case es.RO.RequiresActiveSubscription:case es.RO.RequiresPaymentMethodOrSubscription:if(h&&r===es.RO.RequiresActiveSubscription)return(0,v.tZ)(I.G,{css:cq.ctaContainer,children:(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:cq.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c})});return(0,v.BX)(I.G,{css:cq.ctaContainer,children:[(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:cq.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c}),(0,v.tZ)(V.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:cq.cta,disabled:u,loading:a,iconLeft:(0,v.tZ)(et.Z,{}),onClick:g})]});case es.RO.RequiresSmsVerification:return(0,v.tZ)(E.Z,{context:es.jv.Deployments,onSuccess:c});case es.RO.RequiresPaymentMethod:return(0,v.tZ)(V.zx,{colorway:"primary",text:"Add a payment method",css:cq.cta,disabled:u,loading:a,iconLeft:(0,v.tZ)(et.Z,{}),onClick:function(){return g()}});case es.RO.RequiresUnbanning:return(0,v.tZ)(Y.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,v.tZ)(eo.Z,{}),css:cq.ctaStatusBanner,onClick:function(){return d()}});case es.RO.InsufficientBudget:return(0,v.BX)(v.HY,{children:[(0,v.tZ)(J.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),css:cq.ctaStatusBanner}),(0,v.tZ)(I.G,{css:cq.budgetContainer,children:(0,v.tZ)(F.L,{onUpdateSuccess:c})})]});case es.RO.FeatureDisabled:case es.RO.FeatureUnsupportedForReplitTeams:case es.RO.FeatureUnsupportedForTeamsEdu:case es.RO.FeatureUnsupportedForTeamsFree:case es.RO.FeatureUnsupportedForTeamsPro:case es.RO.InsufficientPermissions:case es.RO.InsufficientQuota:case es.RO.RequiresEmailVerification:if(m&&r===es.RO.InsufficientQuota&&"static"===t)return(0,v.BX)(I.G,{css:cq.ctaContainer,children:[(0,v.tZ)(J.E,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:cq.disabledBanner}),(0,v.tZ)(el.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:cq.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:c})]});return(0,v.tZ)(J.E,{text:i,colorway:"grey",css:cq.disabledBanner});case es.RO.Authorized:case es.RO.AuthorizedQuota:return(0,v.tZ)(V.zx,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:cq.cta});default:(0,eu.Z)(r)}}var c$=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],cK={label:"one hour",key:1},cQ=A.nC.min(600),c0=(0,B.X)({fullWidth:(0,S._)({},cQ,{gridColumn:"span 2"})}),c1=(0,B.X)({container:(0,S._)({display:"grid",gap:32},cQ,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:c0.fullWidth,map:[c0.fullWidth],pies:[c0.fullWidth,A.l0.flex.column,(0,S._)({gap:32},A.nC.min(480),[A.l0.flex.row,{" > *":{flex:1}}])],timeSpanSelector:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.color.foregroundDefault]}),c2=function(e){var t=e.replId,n=(0,g._)((0,b.useState)(cK),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,aJ.Z)(new Date,i),c=(0,at.F)().values,s=c4(l,c3(i));return(0,v.tZ)(ev,{children:(0,v.BX)(I.G,{css:c1.container,children:[(0,v.tZ)(I.G,{css:c1.fullWidth,children:(0,v.tZ)(aq.ZE,{items:c$,label:"Past ".concat(o),icon:(0,v.tZ)(rC.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=c$.find(function(e){return e.key===n}))&&void 0!==t?t:cK)},cssProps:[A.l0.width("fit-content")],children:c$.map(function(e){return(0,v.tZ)(aq.ck,{children:(0,v.tZ)(I.G,{css:c1.timeSpanSelector,children:(0,v.tZ)(K.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,v.tZ)(I.G,{css:c1.fullWidth,children:(0,v.tZ)(aG,{replId:t,title:"CPU Utilization",metric:ak.RH.CPU,start:s,hours:i,colorFn:function(){return c.global.redDefault}})}),(0,v.tZ)(I.G,{css:c1.fullWidth,children:(0,v.tZ)(aG,{replId:t,title:"Memory Utilization",metric:ak.RH.Memory,start:s,hours:i,colorFn:function(){return c.global.redDefault}})})]})})},c3=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},c4=function(e,t){var n=e.getTime()%t;return new Date(e.getTime()-n)},c8=(0,B.X)({sectionContainer:[A.l0.colWithGap(8)]});function c6(e){var t=e.shouldShowDownloadQR,n=(0,g._)((0,b.useState)(t),2),r=n[0],i=n[1];return(0,v.tZ)(I.G,{children:(0,v.BX)(I.G,{css:c8.sectionContainer,children:[(0,v.tZ)(V.zx,{iconLeft:(0,v.tZ)(c_.Z,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var t=!e;return t&&(0,eb.j)(eb.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),r?(0,v.tZ)(cS,{color:A.TV.foregroundDefault}):null]})})}var c5=n(45685),c7=n(30286),c9=n(81253),se=n(73274),st=n(19602),sn=(0,B.X)({container:A.l0.colWithGap(24),pauseAndResumeButtons:A.l0.colWithGap(8),sectionContainer:A.l0.colWithGap(8),sectionButton:[A.l0.color.accentNegativeStrongest,A.l0.transition.snappy,(0,S._)({backgroundColor:z.vb.interactiveBackground,borderColor:"transparent"},A.wl.hover,{borderColor:"transparent"})]}),sr=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,w.kW)(),a=(0,w.$y)(),l=(0,g._)((0,b.useState)(!1),2),c=l[0],s=l[1],u=(0,U.P5)({controlName:ed.Ym,logFlagToAnalytics:!1}),d=i.editDeploymentStatus,f=d.isAuthorized,p=d.message,h=(null==a?void 0:a.status)===es.Fe.Resuming,m=(null==a?void 0:a.status)===es.Fe.Suspending,y=(null==a?void 0:a.status)===es.Fe.Suspended,x=u&&(null==a?void 0:a.suspendedReason)===es.dq.Ubb,C=h||m||o===Z.z.ProcessingLifecycleCommand||o===Z.z.Deploying,k=!(void 0!==t&&t)&&(y||h)&&!x&&(null==a?void 0:a.hasImageTag),S=!(void 0!==n&&n)&&!y&&!x&&!h&&(m||o===Z.z.Deploying||o===Z.z.Ready)&&(null==a?void 0:a.hasImageTag);return(0,v.tZ)(v.HY,{children:(0,v.BX)(I.G,{css:sn.container,children:[k||S?(0,v.BX)(I.G,{css:sn.pauseAndResumeButtons,children:[k?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eL.u,{tooltip:p,isDisabled:f,children:(0,v.tZ)(V.zx,{text:h?"Resuming":"Resume",onClick:function(){return r({command:es.Qc.Resume})},loading:h,disabled:C||!f,iconLeft:h?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(c9.Z,{})})}),(0,v.tZ)(K.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,S?(0,v.BX)(v.HY,{children:[(0,v.tZ)(eL.u,{tooltip:p,isDisabled:f,children:(0,v.tZ)(V.zx,{text:"Pause",onClick:function(){return r({command:es.Qc.Suspend})},loading:m,disabled:C||!f,iconLeft:m?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(c7.Z,{})})}),(0,v.tZ)(K.xv,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,v.tZ)(si,{setIsDestroying:s,onLifecycleCommand:r,authorizations:i,disabled:x}),(0,v.tZ)(so,{isDestroying:c,setIsDestroying:s,onLifecycleCommand:r,authorizations:i,disabled:x})]})})};function si(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=e.authorizations,i=e.disabled,o=(0,g._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=r.deleteDeployment,s=c.isAuthorized,u=c.message;return(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:sn.sectionContainer,children:[(0,v.tZ)(eL.u,{tooltip:u,isDisabled:s,children:(0,v.tZ)(V.zx,{text:"Change deployment type",onClick:function(){return l(!0)},disabled:!s||i,iconLeft:(0,v.tZ)(se.Z,{})})}),(0,v.tZ)(K.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,v.tZ)(q.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,v.tZ)(c5.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),l(!1),n({command:es.Qc.Destroy})},onCancel:function(){return l(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function so(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=e.disabled,a=(0,g._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=i.deleteDeployment,u=s.isAuthorized,d=s.message;return(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:sn.sectionContainer,children:[(0,v.tZ)(eL.u,{tooltip:d,isDisabled:u,children:(0,v.tZ)(V.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:sn.sectionButton,onClick:function(){return c(!0)},disabled:t||!u||o,iconLeft:(0,v.tZ)(st.Z,{})})}),(0,v.tZ)(K.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,v.tZ)(q.u,{isOpen:l,onRequestClose:function(){return c(!1)},children:(0,v.tZ)(c5.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){n(!0),c(!1),r({command:es.Qc.Destroy})},onCancel:function(){return c(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}var sa=n(46134);function sl(){var e=(0,eC._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return sl=function(){return e},e}var sc={},ss=(0,ek.Ps)(sl()),su=n(89313),sd=(0,B.X)({root:[A.l0.colWithGap(4),A.l0.p(8),A.l0.pt(12),A.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[A.l0.rowWithGap(12),A.l0.align.center],typeCol:[A.l0.colWithGap(4),A.l0.flex.growAndShrink(1)],configAndUsageRow:[A.l0.rowWithGap(12),A.l0.align.center,A.l0.flex.growAndShrink(1)],usageRow:[A.l0.rowWithGap(8)]}),sf=function(e){var t,n=e.machineConfiguration,r=(t=(0,_._)({},sc,void 0),eS.a(ss,t)).data,i=(0,b.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"){var i=null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,sa.fZ)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,b.useMemo)(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);if(!o||!i)return(0,v.tZ)(I.G,{css:[A.l0.justify.center,A.l0.flex.row],children:(0,v.tZ)(eW.Z,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,v.BX)($.Tg,{elevated:!0,css:sd.root,children:[(0,v.BX)(I.G,{css:sd.outerRow,children:[(0,v.tZ)(I.G,{css:sd.typeCol,children:o?(0,v.tZ)(K.xv,{multiline:!1,children:o}):null}),(0,v.tZ)(eX.hU,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,v.tZ)(su.Z,{})})]}),i?(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:sd.outerRow,children:[(0,v.tZ)(K.xv,{multiline:!1,children:i.description}),(0,v.tZ)(K.xv,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,v.tZ)(I.G,{css:sd.outerRow,children:(0,v.tZ)(tl(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,v.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]})},sp=n(54505),sh=n(6674),sm=(0,ea.$)(["paddingRight"]),sg=sm.cssVars,sv=sm.styleTokens,sy=(0,B.X)({inputWrapper:[A.l0.position.relative,A.l0.flex.growAndShrink(1),{input:[{paddingRight:sv.paddingRight}]}],copyButton:[A.l0.position.absolute,A.l0.top("50%"),A.l0.right(4),{transform:"translateY(-50%)"}]});function sb(e){return(0,v.BX)(I.G,{css:sy.inputWrapper,style:(0,S._)({},sg.paddingRight,e.value?"36px":"8px"),children:[(0,v.tZ)(eG.II,(0,ep._)((0,_._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,v.tZ)(eX.hU,{css:sy.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,sp.Z)(e.value)},children:(0,v.tZ)(sh.Z,{})}):null]})}var sw=(0,B.X)({root:[A.l0.flex.column,(h={gap:8},(0,S._)(h,A.nC.min("mobileMax"),[A.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,S._)(h,"label",[A.l0.color.foregroundDimmer,{fontSize:A.TV.fontSizeSmall}]),h)],col:[A.l0.colWithGap(4),A.l0.flex.growAndShrink(1)],records:[A.l0.px(12),A.l0.pt(8),A.l0.pb(16),A.l0.colWithGap(16),A.l0.borderRadius(12),(0,S._)({},A.nC.min("mobileMax"),A.l0.colWithGap(12))],divider:(0,S._)({display:"flex",height:1,backgroundColor:A.TV.outlineDimmest},A.nC.min("mobileMax"),A.l0.display.none)});function sZ(e){return(0,v.BX)(I.G,{css:sw.root,children:[(0,v.BX)(I.G,{css:sw.col,children:[(0,v.tZ)(I.G,{tag:"label",children:"Hostname"}),(0,v.tZ)(eG.II,{value:e.hostname,readOnly:!0})]}),(0,v.BX)(I.G,{css:sw.col,children:[(0,v.tZ)(I.G,{tag:"label",children:"Type"}),(0,v.tZ)(eG.II,{value:e.type,readOnly:!0})]}),(0,v.BX)(I.G,{css:sw.col,children:[(0,v.tZ)(I.G,{tag:"label",children:"Record"}),(0,v.tZ)(sb,{value:e.record,readOnly:!0})]})]})}function sx(e){var t="replit-verify=".concat(e.deploymentId);return(0,v.BX)($.Tg,{background:"default",css:sw.records,children:[(0,v.tZ)(sZ,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,v.tZ)(I.G,{css:sw.divider}),(0,v.tZ)(sZ,{hostname:e.hostname,type:"TXT",record:t})]})}function sC(){var e=(0,eC._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return sC=function(){return e},e}function sk(){var e=(0,eC._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return sk=function(){return e},e}var sS={},s_=(0,ek.Ps)(sC()),sT=(0,ek.Ps)(sk()),sE="https://docs.replit.com/cloud-services/deployments/custom-domains",sR=(0,B.X)({root:[A.l0.colWithGap(8),A.l0.borderRadius(8),A.l0.pl(8),A.l0.pr(4),A.l0.height(32),A.l0.justify.center]}),sD=(0,B.X)({root:sR.root,rootExpanded:[sR.root,A.l0.height("auto"),A.l0.pt(4),A.l0.pb(12),A.l0.justify.start],domainRow:[A.l0.reset.button,A.l0.rowWithGap(8),A.l0.align.center,A.l0.justify.spaceBetween],iconButtons:[A.l0.flex.row],expanded:[A.l0.colWithGap(12),A.l0.pl(4),A.l0.pr(8)],domainWrapper:[A.l0.rowWithGap(8),A.l0.align.center,A.l0.flex.shrink(1),A.l0.color.accentPrimaryStronger,{a:A.l0.hover(A.l0.color.accentPrimaryStrongest)}],statusDot:[A.l0.borderRadius("full"),A.l0.width(6),A.l0.height(6)],status:[A.l0.rowWithGap(4),A.l0.align.center],dnsRecords:[A.l0.colWithGap(6)],buttons:[A.l0.flex.column,A.l0.justify.spaceBetween,(m={gap:8},(0,S._)(m,A.nC.min("mobileMax"),A.l0.flex.row),(0,S._)(m,"button",[A.l0.flex.growAndShrink(1)]),m)],warning:[A.l0.rowWithGap(6),A.l0.align.center]}),sI={verified:{color:A.TV.accentPositiveDefault,text:"Verified"},verifying:{color:A.TV.orangeDefault,text:"Verifying"},failed:{color:A.TV.accentNegativeDefault,text:"Failed"}};function sB(e){var t,n,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=e.authorizations,c=(0,g._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,g._)((0,b.useState)(!1),2),f=d[0],p=d[1],h=(0,g._)((t=(0,_._)({},lx,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),lv.t(lS,t)),2),m=h[0],y=h[1].loading,w=(0,g._)((n=(0,_._)({},sS,void 0),e7.D(s_,n)),2),Z=w[0],x=w[1].loading,C=(0,g._)((r=(0,_._)({},sS,void 0),e7.D(sT,r)),2),k=C[0],S=C[1].loading,T=i.state===es.zt.Failed,E=l.addCustomDomain,R=E.isAuthorized,D=E.message,B=l.deleteCustomDomain,P=B.isAuthorized,G=B.message;return(0,v.BX)($.Tg,{elevated:!0,css:s?sD.rootExpanded:sD.root,children:[(0,v.BX)(I.G,{css:sD.domainRow,style:{borderBottomLeftRadius:s?0:void 0,borderBottomRightRadius:s?0:void 0},children:[(0,v.BX)(I.G,{css:sD.domainWrapper,children:[(0,v.tZ)(K.xv,{multiline:!1,children:(0,v.tZ)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,v.BX)(I.G,{css:sD.status,children:[(0,v.tZ)(I.G,{css:sD.statusDot,style:{backgroundColor:sI[i.state].color}}),(0,v.tZ)(K.xv,{color:"dimmer",variant:"small",children:sI[i.state].text})]})]}),(0,v.BX)(I.G,{css:sD.iconButtons,children:[(0,v.tZ)(i1.m,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,v.tZ)(eL.u,{tooltip:D,isDisabled:R,children:(0,v.tZ)(eX.hU,{alt:"Edit",disabled:!R,tooltipBehavior:"hidden",onClick:function(){p(!1),u(function(e){return!e})},css:A.l0.color.foregroundDimmer,children:s?(0,v.tZ)(r5.Z,{}):(0,v.tZ)(su.Z,{})})})]})]}),s?(0,v.tZ)(I.G,{css:sD.expanded,children:f?(0,v.BX)(v.HY,{children:[(0,v.tZ)(K.xv,{children:"Are you sure you want to unlink this domain?"}),(0,v.BX)(I.G,{css:sD.buttons,children:[(0,v.tZ)(V.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){p(!1)}}),(0,v.tZ)(V.zx,{size:"small",disabled:x,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){Z({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:sD.dnsRecords,children:[T?(0,v.BX)(v.HY,{children:[(0,v.BX)(I.G,{css:sD.warning,children:[(0,v.tZ)(eo.Z,{}),(0,v.tZ)(K.xv,{children:"DNS Error"})]}),(0,v.BX)(K.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,v.tZ)("a",{target:"_blank",href:sE,children:"Learn more"})]})]}):(0,v.BX)(K.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,v.tZ)("strong",{css:A.l0.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,v.tZ)("a",{target:"_blank",href:sE,children:"Learn more"})]}),(0,v.tZ)(sx,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,v.BX)(I.G,{css:sD.buttons,children:[(0,v.tZ)(V.zx,{iconLeft:y||S?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(iN.Z,{}),size:"small",text:T?"Retry linking":"Check status",onClick:function(){T?k({variables:{input:{hostingDeploymentDomainId:i.id}}}):m()}}),(0,v.tZ)(eL.u,{isDisabled:P,tooltip:G,children:(0,v.tZ)(V.zx,{iconLeft:(0,v.tZ)(st.Z,{}),size:"small",disabled:x||!P,text:T?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){p(!0)}})})]})]})}):null]})}var sA=n(77402);function sP(){var e=(0,eC._)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return sP=function(){return e},e}var sG={},sL=(0,ek.Ps)(sP(),lC),sN=n(43580),sO=n(28327),sU=n.n(sO),sM=(0,B.X)({root:[A.l0.colWithGap(16),A.l0.p(8),A.l0.borderRadius(8),A.l0.border({color:A.TV.outlineDimmer})],labelRow:[A.l0.rowWithGap(8),A.l0.align.center],labelText:[A.l0.flex.growAndShrink(1)],controls:[A.l0.rowWithGap(8),A.l0.justify.spaceBetween,{"& > button":[A.l0.flex.growAndShrink(1)]}],domainSection:[A.l0.colWithGap(8)],error:[A.l0.rowWithGap(4),A.l0.align.center],recordsSection:[A.l0.colWithGap(8)],valueRow:[A.l0.borderRadius(8),A.l0.pl(8),A.l0.pr(4),A.l0.height(32),A.l0.rowWithGap(8),A.l0.align.center,A.l0.justify.spaceBetween,{a:A.l0.hover(A.l0.color.accentPrimaryStrongest)}]});function sX(e){var t,n=(0,g._)((0,b.useState)(!0),2),r=n[0],i=n[1],o=(0,g._)((0,b.useState)(""),2),a=o[0],l=o[1],c=(0,g._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,g._)((t=(0,_._)({},lx,{onCompleted:function(){e.onAdd()}}),e7.D(l_,t)),2),f=d[0],p=d[1].loading,h=(0,b.useRef)(null),m=(0,b.useId)(),y=sU()(a),w=!y||p,Z=y?null:"Enter a valid domain",x=p?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(e1.Z,{});return r||p||(x=(0,v.tZ)(sA.Z,{})),(0,v.BX)(I.G,{tag:"form",css:sM.root,onSubmit:function(t){if(t.preventDefault(),r){var n;i(!1),null===(n=h.current)||void 0===n||n.focus();return}f({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,v.BX)(I.G,{css:sM.domainSection,children:[(0,v.BX)(I.G,{tag:"label",htmlFor:m,css:sM.labelRow,children:[y&&!r?(0,v.tZ)(n0.Z,{color:A.TV.accentPositiveDefault}):null,(0,v.tZ)(K.xv,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,v.tZ)(eG.II,{id:m,autoFocus:!0,placeholder:"example.com",value:a,disabled:p,onChange:function(e){return l(e.currentTarget.value)},onBlur:function(e){return u(!!e.currentTarget.value)}}):(0,v.BX)($.Tg,{elevated:!0,css:sM.valueRow,children:[(0,v.tZ)(I.G,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,v.tZ)(eX.hU,{alt:"Edit",onClick:function(){return i(!0)},children:(0,v.tZ)(su.Z,{color:A.TV.foregroundDimmer})})]}),Z&&s?(0,v.BX)(I.G,{css:sM.error,children:[(0,v.tZ)(eo.Z,{size:12,color:A.TV.orangeDefault}),(0,v.tZ)(K.xv,{variant:"small",children:Z})]}):null]}),!r&&y?(0,v.tZ)(sF,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,v.BX)(I.G,{css:sM.controls,children:[(0,v.tZ)(V.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,v.tZ)(V.zx,{ref:h,iconRight:x,colorway:"primary",type:"submit",disabled:w,text:r?"Next":"Link domain"})]})]})}function sF(e){return(0,v.BX)(I.G,{css:sM.recordsSection,children:[(0,v.BX)(I.G,{css:sM.labelRow,children:[(0,v.tZ)(sN.Z,{color:A.TV.foregroundDimmest}),(0,v.BX)(K.xv,{multiline:!0,css:sM.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,v.tZ)("a",{target:"_blank",href:sE,children:"Learn more"})]})]}),(0,v.tZ)(sx,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var sW=(0,B.X)({root:[A.l0.py(12),A.l0.flex.column,(0,S._)({gap:6},A.nC.min("mobileMax"),[A.l0.py(4),A.l0.flex.row,A.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[A.l0.flex.growAndShrink(1),A.l0.flex.row,A.l0.fontWeight.medium,{a:[A.l0.truncate,A.l0.flex.shrink(1)]}],confirm:[A.l0.p(8),A.l0.borderRadius(8),A.l0.colWithGap(8),A.l0.justify.spaceBetween],confirmButtons:[A.l0.rowWithGap(8),{button:[A.l0.flex.growAndShrink(1)]}],unlinkButton:[A.l0.color.foregroundDimmer,A.l0.hover(A.l0.backgroundColor.backgroundHighest)]}),sV=function(e){var t=e.domain;return(0,v.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function sH(e){var t,n=e.deploymentId,r=e.domain,i=e.apexProxy,o=(0,g._)((t=(0,_._)({},sG,void 0),e7.D(sL,t)),2),a=o[0],l=o[1].loading,c=(0,g._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,g._)((0,b.useState)(!1),2),f=d[0],p=d[1];return s?(0,v.BX)($.Tg,{elevated:!0,css:sW.confirm,children:[(0,v.BX)(K.xv,{children:["Are you sure you want to remove ",(0,v.tZ)(sV,{domain:r.domain}),"?"]}),(0,v.BX)(I.G,{css:sW.confirmButtons,children:[(0,v.tZ)(V.zx,{text:"Cancel",onClick:function(){return u(!1)},size:"small"}),(0,v.tZ)(V.zx,{size:"small",disabled:l,colorway:"negative",iconLeft:l?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(st.Z,{}),text:"Unlink domain",onClick:function(){return a({variables:{input:{replDomainId:r.id}}})}})]})]}):f?(0,v.BX)($.Tg,{elevated:!0,css:sW.confirm,children:[(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,v.tZ)(I.G,{css:sW.domainLink,children:(0,v.tZ)(sV,{domain:r.domain})})]}),(0,v.tZ)(sF,{deploymentId:n,domain:r.domain,apexProxy:i}),(0,v.BX)(I.G,{css:sW.confirmButtons,children:[(0,v.tZ)(V.zx,{text:"Cancel",onClick:function(){return p(!1)},size:"small"}),(0,v.tZ)(V.zx,{size:"small",disabled:l,colorway:"primary",iconLeft:l?(0,v.tZ)(eW.Z,{}):(0,v.tZ)(sA.Z,{}),text:"Complete transfer",onClick:function(){return a({variables:{input:{replDomainId:r.id,transferToHostingDeploymentId:n}}})}})]})]}):(0,v.BX)(I.G,{css:sW.root,children:[(0,v.tZ)(I.G,{css:sW.domainLink,children:(0,v.tZ)(sV,{domain:r.domain})}),(0,v.tZ)(V.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return u(!0)},iconLeft:(0,v.tZ)(st.Z,{}),css:sW.unlinkButton}),(0,v.tZ)(V.zx,{size:"small",variant:"outlined",disabled:l,iconRight:(0,v.tZ)(e1.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return p(!0)}})]})}var sz=(0,B.X)({root:[A.l0.colWithGap(4),A.l0.p(12),A.l0.pb(6),A.l0.borderRadius(12),A.l0.backgroundColor.backgroundHigher,A.l0.border({color:A.TV.outlineDimmer})],header:[A.l0.align.center,A.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":A.l0.border({color:A.TV.outlineDimmer,direction:"top"})}]});function sj(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,i=1===t.length?"domain":"domains";return(0,v.BX)($.Tg,{css:sz.root,children:[(0,v.BX)(I.G,{css:A.l0.colWithGap(4),children:[(0,v.BX)(I.G,{css:sz.header,children:[(0,v.tZ)(eo.Z,{color:A.TV.yellowStronger}),(0,v.BX)(K.xv,{variant:"subheadDefault",children:["Transfer ",i]})]}),(0,v.BX)(K.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",i," to your development Repl. Please transfer ","domain"===i?"it":"them"," to your deployment for the best user experience."]})]}),(0,v.tZ)(I.G,{css:sz.list,children:t.map(function(e){return(0,v.tZ)(sH,{domain:e,deploymentId:n,apexProxy:r},e.id)})})]})}var sq=(0,B.X)({root:[A.l0.colWithGap(8)],error:[A.l0.center,A.l0.rowWithGap(8)],loading:[A.l0.center],empty:[A.l0.px(16),A.l0.py(32),A.l0.borderRadius(8),A.l0.center,A.l0.colWithGap(8),{border:"1px dashed",borderColor:A.TV.outlineDimmer}],primaryDomain:[A.l0.rowWithGap(4),A.l0.height(32),A.l0.justify.spaceBetween,A.l0.align.center,A.l0.pl(8),A.l0.pr(4),A.l0.borderRadius(8)],primaryDomainLink:[A.l0.flex.shrink(1),A.l0.color.accentPrimaryStronger,{a:A.l0.hover(A.l0.color.accentPrimaryStrongest)}],icons:[A.l0.flex.row,A.l0.align.center],footer:[A.l0.flex.row]});function sJ(e){var t,n,r,i,o=e.deployment,a=e.authorizations,l=(0,g._)((0,b.useState)(!1),2),c=l[0],s=l[1],u=(0,g._)((0,b.useState)(void 0),2),d=u[0],f=u[1],p=(0,U.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:ed.q7});t={variables:{id:o.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:d,onCompleted:function(e){var t,n;f((null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some(function(e){return e.state===cn.zt.Verifying}))?3e4:void 0)}},n=(0,_._)({},lx,t),eS.a(lS,n);var h=(null==o?void 0:null===(r=o.domains)||void 0===r?void 0:r.length)?o.domains:null,m=(null==o?void 0:o.currentBuild.status)===es.Fe.Success,y=null==o?void 0:o.repl.apexProxy,Z=(0,w.$y)(),x=function(){var e,t,n,r,i,o=(null==Z?void 0:null===(e=Z.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(t=Z.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!o&&(null==Z?void 0:null===(n=Z.repl.owner)||void 0===n?void 0:n.username)&&(o="".concat(Z.repl.slug,"-").concat(Z.repl.owner.username)),o)return"".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(p)}(),C=a.addCustomDomain,k=C.isAuthorized,S=C.message;return(0,v.BX)(I.G,{css:sq.root,children:[!c&&(null==o?void 0:null===(i=o.legacyReplDomains)||void 0===i?void 0:i.length)&&y?(0,v.tZ)(sj,{domains:o.legacyReplDomains,deploymentId:o.id,apexProxy:y}):null,(0,v.BX)($.Tg,{elevated:!0,css:sq.primaryDomain,children:[(0,v.tZ)(K.xv,{multiline:!1,css:sq.primaryDomainLink,children:(0,v.tZ)("a",{href:"https://".concat(x),target:"_blank",rel:"noreferrer noopener",children:x})}),(0,v.BX)(I.G,{css:sq.icons,children:[(0,v.tZ)(i1.m,{textToCopy:null!=x?x:""}),(0,v.tZ)(eL.u,{tooltip:sY,children:(0,v.tZ)(tg.Z,{"aria-label":sY,color:A.TV.foregroundDimmer,css:A.l0.m(4)})})]})]}),h&&o?(0,v.tZ)(I.G,{css:A.l0.colWithGap(8),children:h.map(function(e){return(0,v.tZ)(I.G,{children:(0,v.tZ)(sB,{apexProxy:o.repl.apexProxy,deploymentId:o.id,domain:e,authorizations:a})},e.domain)})}):null,c&&y?(0,v.tZ)(sX,{apexProxy:y,deploymentId:o.id,onAdd:function(){return s(!1)},onCancel:function(){return s(!1)}}):null,m?null:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===c?(0,v.tZ)(I.G,{css:sq.footer,children:(0,v.tZ)(eL.u,{tooltip:S,isDisabled:k,children:(0,v.tZ)(V.zx,{disabled:!m||!k,iconLeft:(0,v.tZ)(r6.Z,{}),text:"Link a domain",onClick:function(){return s(!0)},variant:"outlined",size:"small"})})}):null]})}var sY="Your primary domain cannot be changed";function s$(){var e=(0,eC._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return s$=function(){return e},e}var sK={},sQ=(0,ek.Ps)(s$()),s0=n(50575),s1=n(8558),s2=(0,B.X)({container:[A.l0.colWithGap(8)]});function s3(e){var t,n=e.replId,r=e.isCurrentBuildSuccess,i=e.areFailureNotificationsEnabled,o=(0,U.P5)({controlName:"flag-cron-push-notifications",type:"boolean",default:!1,logFlagToAnalytics:!0}),a=(0,g._)((0,b.useState)(i),2),l=a[0],c=a[1],s=(0,g._)((0,b.useState)(void 0),2),u=s[0],d=s[1],f=(0,g._)((t=(0,_._)({},sK,{onCompleted:function(e){var t=e.updateMachineJobFailureNotification;((null==t?void 0:t.__typename)==="NotFoundError"||(null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&(d(t.message),c(function(e){return!e}))}}),e7.D(sQ,t)),1)[0],p=function(e){d(void 0),f({variables:{input:{replId:n,failureNotifications:e}}}),c(e)};return(0,v.BX)(I.G,{children:[u?(0,v.tZ)(J.E,{text:u,colorway:"warning"}):null,(0,v.BX)(eL.u,{isDisabled:r,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:s2.container,children:[(0,v.BX)(ro.hE,{disabled:!r,tag:"fieldset",name:"notification-switch",value:l?"enabled":"disabled",onChange:function(e){p("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,v.tZ)(ro.rK,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,v.tZ)(s1.Z,{})}),(0,v.tZ)(ro.rK,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,v.tZ)(s0.Z,{})})]}),(0,v.tZ)(K.xv,{color:"dimmer",children:"Send email ".concat(o?"and push ":"","notifications when scheduled jobs fail")})]})]})}var s4=(0,B.X)({container:[A.l0.colWithGap(32),L.maxWidth,A.l0.py(8)],usageContainer:A.l0.colWithGap(16),header:A.l0.pb(8),paddedHeader:A.l0.pb(12),notificationConfig:[A.l0.flex.row,A.l0.flex.growAndShrink(1),A.l0.width("100%"),A.l0.align.start,A.l0.pb(8)],suspendedLink:[A.l0.color.accentNegativeStrongest]}),s8=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,v.tZ)(s5,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,v.tZ)(ev,{children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:"Deployment not found"})})},s6={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:es.RO.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:es.RO.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:es.RO.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:es.RO.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:es.RO.InsufficientPermissions,message:"Loading"}};function s5(e){var t,n,r,i,o,a,l,c,s=(0,M.sG)(),u=(0,U.P5)({controlName:ed.Ym,logFlagToAnalytics:!1}),d=(0,g._)((0,b.useState)(!1),2),f=d[0],p=d[1];(0,b.useEffect)(function(){ew({context:ex.k.Settings})},[]);var h=(0,g._)((t=(0,_._)({},lD,void 0),lv.t(lA,t)),2),m=h[0],y=h[1],w=y.data,Z=y.error,x=(n={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var t;(null==e?void 0:null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&m({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,_._)({},lD,n),eS.a(lB,r)),C=x.data,k=x.loading,S=x.error,T=(null==C?void 0:null===(i=C.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"?C.hostingDeployment:void 0,E=(null==T?void 0:T.currentBuild.provider)===es.r4.Cron;if(f)return(0,v.tZ)(nq,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:es.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return p(!1)}});if(S)return(0,v.tZ)(ej,{text:S.message});if(k||!T)return(0,v.tZ)(ev,{centered:!0,children:(0,v.tZ)(eH,{})});var R=T.currentBuild,D=null!==(l=null==R?void 0:R.machineConfiguration)&&void 0!==l?l:void 0,B=(null==w?void 0:null===(o=w.getRepl)||void 0===o?void 0:o.__typename)==="Repl"?w.getRepl.authorizations:s6;return(0,v.tZ)(ev,{children:(0,v.BX)(I.G,{css:s4.container,children:[Z?(0,v.tZ)(J.E,{colorway:"negative",text:Z.message}):void 0,R.provider===es.r4.CloudRun?(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",css:s4.header,children:"Resource usage"}),(0,v.tZ)(I.G,{css:s4.usageContainer,children:(0,v.tZ)(sf,{machineConfiguration:D,onEditAutoscaleMachineConfiguration:function(){return p(!0)},authorizations:B})})]}):null,R.provider!==es.r4.Cron?(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",css:s4.header,children:"Domains"}),(0,v.tZ)(sJ,{deployment:T,authorizations:B})]}):null,(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",css:s4.paddedHeader,children:"Manage deployment"}),u&&R.suspendedReason===es.dq.Ubb?(0,v.tZ)(I.G,{css:s4.paddedHeader,children:(0,v.tZ)(J.E,{icon:(0,v.tZ)(eo.Z,{}),colorway:"negative",text:["Your deployments have been suspended due to an account restriction or billing failure. Navigate to Account > Billing to resolve or reach out to our support team for assistance at ",(0,v.tZ)("a",{css:s4.suspendedLink,href:"mailto:support@replit.com",children:(0,v.tZ)("u",{children:"support@replit.com"})},""),"."]})}):null,(0,v.tZ)(sr,{onLifecycleCommand:e.onLifecycleCommand,authorizations:B})]}),E?(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",css:s4.paddedHeader,children:"Scheduled Job Notifications"}),(0,v.tZ)(s3,{replId:T.repl.id,isCurrentBuildSuccess:T.currentBuild.status===es.Fe.Success,areFailureNotificationsEnabled:null!==(c=null===(a=T.currentBuild.machineJob)||void 0===a?void 0:a.failureNotifications)&&void 0!==c&&c})]}):null,s?null:(0,v.BX)(I.G,{children:[(0,v.tZ)(K.xv,{variant:"subheadDefault",css:s4.paddedHeader,children:"Deploy on the go"}),(0,v.tZ)(c6,{shouldShowDownloadQR:!1})]})]})})}var s7=(0,B.X)({root:[{height:"100%"},A.l0.overflow("hidden"),A.l0.position.relative],content:[A.l0.overflow("auto"),A.l0.flex.growAndShrink(1),A.l0.position.relative]}),s9=function(e){var t,n,r,i,o,a,l=e.onViewUpdate,c=e.onError,s=e.refetch,u=e.openFile,d=e.openPane,f=e.initialView,p=e.error,h=function(e){P({type:ex.a.SendDeploymentLifecycleCommand,payload:e})},m=(0,o4.Z)(),y=(0,w.hn)(),Z=(0,w.pn)(),S=(0,w.$y)(),_=(0,w.XZ)(),T="string"==typeof y,E=!(void 0!==Z)&&!T,R=(0,g._)((0,b.useState)(function(){return Z?ex.k.DeploymentInProgress:E?ex.k.Intro:ex.k.Deployment}),2),D=R[0],B=R[1],A=(0,w.mF)(),P=(t=(0,x._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:switch(l(),e.type){case ex.a.SendDeploymentLifecycleCommand:return[3,1];case ex.a.ChangeView:return[3,3];case ex.a.OpenPane:return[3,4]}return[3,7];case 1:return[4,A(e.payload)];case 2:if(n.sent(),e.payload.command===es.Qc.Destroy)return B(ex.k.Intro),s(),[2];return e.payload.command===es.Qc.UpdateMachineConfiguration&&s(),B(ex.k.Deployment),[3,8];case 3:return B(e.payload.view),[3,8];case 4:if(!("codeEditor"===(t=e.payload).type&&".replit"===t.data.path))return[3,6];return[4,_.stat(".replit")];case 5:if(!n.sent().exists)return c("Could not find .replit configuration file."),[2];n.label=6;case 6:return d(t),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),G=(0,U.P5)({controlName:"flag-depl-intro-simp",default:!1}),L=(n=null==S?void 0:S.provider,r=(0,U.P5)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),o=(i=(0,o7.o)("deployment-analytics-dot")).isLoading,a=i.isDone,(0,b.useMemo)(function(){return[{value:ex.k.Deployment,label:"Overview",icon:(0,v.tZ)(r8.Z,{})}].concat((0,C._)(n===es.r4.Cron?[{value:ex.k.Schedule,label:"Schedule",icon:(0,v.tZ)(Q.Z,{})}]:[]),(0,C._)(n!==es.r4.Static?[{value:ex.k.Logs,label:"Logs",icon:(0,v.tZ)(td.Z,{})}]:[]),(0,C._)(n!==es.r4.Cron?[{value:ex.k.Analytics,label:"Analytics",icon:(0,v.tZ)(o8.Z,{}),showDot:!o&&!a}]:[]),(0,C._)(n&&r&&ue(n)?[{value:ex.k.ResourceMonitoring,label:"Resources",icon:(0,v.tZ)(o5.Z,{}),beta:!1}]:[]),[{value:ex.k.Settings,label:"Settings",icon:(0,v.tZ)(o6.Z,{})}])},[a,o,n,r]));return D===ex.k.Intro?G?(0,v.tZ)(I.G,{css:s7.content,children:(0,v.tZ)(iS,{initialSelectedProvider:f===ex.k.ReservedVMTierSelection?es.r4.Gce:void 0,onViewAction:P,onError:c,onDeploy:function(){P({type:ex.a.ChangeView,payload:{view:ex.k.DeploymentInProgress}})},replId:m})}):(0,v.tZ)(I.G,{css:s7.content,children:(0,v.tZ)(cJ,{initialSelectedProvider:f===ex.k.ReservedVMTierSelection?es.r4.Gce:void 0,onViewAction:P,onError:c,onDeploy:function(){P({type:ex.a.ChangeView,payload:{view:ex.k.DeploymentInProgress}})},replId:m})}):(0,v.BX)(I.G,{css:s7.root,children:[L?(0,v.tZ)(o9.g,{onClick:function(e){P({type:ex.a.ChangeView,payload:{view:e.value}})},tabs:L,value:D===ex.k.DeploymentInProgress?ex.k.Deployment:D}):null,(0,v.BX)(I.G,{css:s7.content,children:[p?(0,v.tZ)(ev,{children:(0,v.tZ)(J.E,{colorway:"warning",icon:(0,v.tZ)(eo.Z,{}),text:p})}):null,D===ex.k.Analytics?(0,v.tZ)(a2,{replId:m}):null,D===ex.k.Logs?(0,v.tZ)(oJ,{replId:m,deploymentId:y,openFile:u}):null,D===ex.k.ResourceMonitoring?(0,v.tZ)(c2,{replId:m}):null,D===ex.k.Settings?(0,v.tZ)(s8,{onError:c,deploymentId:y,onLifecycleCommand:h}):null,D===ex.k.Deployment||D===ex.k.DeploymentInProgress?(0,v.tZ)(cL,{view:D,refetch:s,onViewAction:P,onError:c,openFile:u,onLifecycleCommand:h}):null,D===ex.k.Schedule?(0,v.tZ)(oK,{replId:m,deploymentId:y,openFile:u}):null]})]})},ue=function(e){return[es.r4.Gce,es.r4.CloudRun,es.r4.Cron].includes(e)};function ut(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,i=e.openPane,o=e.tabsNavRef,a=(0,w.m8)(),l=(0,w.kW)(),c=(0,w.ev)(),s=(0,g._)((0,b.useState)(null),2),u=s[0],d=s[1];return l===Z.z.Loading?(0,v.tZ)(y.Z,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,v.tZ)(s9,{tabsNavRef:o,initialView:t,onViewUpdate:function(){u&&d(null),n()},onError:d,refetch:a,openFile:r,openPane:i,error:u||c})}var un=n(19236),ur=n(74044),ui=n(99149),uo=ur.Dy.Object({type:ur.Dy.Literal("deployments"),data:ur.Dy.Optional(ur.Dy.Object({view:ur.Dy.Enum(ex.k)}))}),ua={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,b.useRef)(function(e){if(e&&"object"==typeof e&&"view"in e&&e.view===ex.k.ReservedVMTierSelection)return ex.k.ReservedVMTierSelection}(t)),i=(0,b.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:(0,ec.Dp)(e),data:e}})},[n]),o=(0,g._)((0,b.useState)(null),2),a=o[0],l=o[1];return(0,un.L5)(function(){if(a)return{type:"deployments",getTabs:a.getTabs,setTab:a.setTab}},[a]),(0,v.tZ)(ut,{tabsNavRef:l,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:i,openPane:function(e){n({operation:"open",pane:e})}})},Icon:function(e){var t=e.size;return(0,v.tZ)(og.Pd.Provider,{value:{color:e3.TV.greenStrongest,size:t},children:(0,v.tZ)(r8.Z,{})})},getTitle:function(){return"Deployments"},description:"Deploy a stable, public version of your Repl, unaffected by the changes you make in the workspace",category:ec.hc.CloudServices,decode:function(e){return ui.B4.Decode(uo,e)}}},50544:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(74044),i=n(99149),o=n(68140),a=r.Dy.Union(Object.values(o.TT).map(function(e){return r.Dy.Literal(e)})),l=r.Dy.Object({type:r.Dy.Literal("docs"),data:r.Dy.Optional(r.Dy.Object({url:r.Dy.Optional(r.Dy.Union([a,r.Dy.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},60615:function(e,t,n){n.d(t,{_:function(){return eL}});var r,i,o=n(3796),a=n(43977),l=n(66626),c=n(93245),s=n(36809),u=n(63163),d=n(27387),f=n(41733),p=n(30509),h=n(63257),m=n(96583),g=n(33323),v=n(24766),y=n(42516),b=n(53250),w=n(38935),Z=n(99595),x=n(96949),C=n(61989),k=n(79904),S=n(23522),_=n(9602),T=n(85551),E=n(19699),R=n(43849),D=n(10055),I=n(47136),B=n(379),A=n(65034),P=n(23882),G=n(59421),L=n(59978),N=n(75271),O=u.nC.max(300),U=(0,s.X)({root:[u.l0.flex.column,u.l0.borderRadius(),u.l0.backgroundColor.backgroundHigher,u.l0.border({color:u.TV.outlineDimmer,width:1}),u.l0.overflow("hidden")],summary:[u.l0.flex.column,u.l0.p(8),u.l0.gap(4)],summaryHeader:[u.l0.flex.row,u.l0.gap(8),u.l0.align.center],connectionStatus:[{visibility:"hidden","&[data-visible=true]":{visibility:"visible"}}],summaryBody:[u.l0.color.foregroundDimmer,{fontSize:u.TV.fontSizeSmall,lineHeight:u.TV.lineHeightSmall}],summaryFooter:[u.l0.flex.row,u.l0.align.center,u.l0.justify.end,u.l0.mt(4),u.l0.gap(4),(0,y._)({},O,[u.l0.flex.wrap])],accordionHeader:[],accordionItem:[{"& > button":[u.l0.py(8),u.l0.px(8),u.l0.fontWeight.medium,u.l0.borderRadius(0),{border:0},u.l0.border({color:u.TV.outlineDimmer,width:1,direction:"top"})],"& > div":[u.l0.backgroundColor.backgroundDefault,u.l0.border({color:u.TV.outlineDimmer,width:1,direction:"top"})]}]}),M=function(e){var t=e.icon,n=e.title,r=e.description,i=e.onClick,a=e.isConnected,l=e.sections,s=e.onSectionToggle,u=e.configIcon,d=void 0===u?(0,o.tZ)(D.Z,{}):u;return(0,o.BX)(c.G,{css:U.root,children:[(0,o.BX)(c.G,{css:U.summary,children:[(0,o.BX)(c.G,{css:U.summaryHeader,children:[t,(0,o.tZ)(v.xv,{variant:"subheadDefault",children:n}),(0,o.tZ)(B.D,{text:"Connected",colorway:"positive",css:U.connectionStatus,"data-visible":a})]}),(0,o.tZ)(c.G,{css:U.summaryBody,children:r}),(0,o.tZ)(c.G,{css:U.summaryFooter,children:(0,o.tZ)(k.zx,{variant:a?"outlined":"default",size:"small",colorway:"primary",iconLeft:d,text:a?"Settings":"Configure",onClick:i})})]}),null==l?void 0:l.map(function(e){return(0,o.tZ)(C.Q,{headerContent:e.title,css:U.accordionItem,expanded:e.isOpen,onClick:function(){null==s||s(e.key)},children:e.content},e.key)})]})},X=(0,s.X)({root:[u.l0.flex.column,u.l0.gap(8),u.l0.width("100%")],accordionItemBody:[u.l0.flex.column,u.l0.gap(8),u.l0.p(8)],configurationItem:[u.l0.flex.column,u.l0.gap(8)],configurationItemTitle:[u.l0.fontWeight.bold,u.l0.flex.row,u.l0.align.end,u.l0.gap(4)],configurationActions:[u.l0.flex.row,u.l0.justify.end,u.l0.gap(8)],secretRow:[u.l0.flex.row,u.l0.align.center,u.l0.gap(4),{input:{height:22}}],markdownReset:[{"& > div":{lineHeight:"initial"}}]}),F=function(e){var t=e.serviceName,n=e.items,r=e.isConnected,i=e.secrets,a=(0,Z.Z)(),s=(0,l._)((0,N.useState)(new Map(n.map(function(e){return[e.key,""]}))),2),u=s[0],f=s[1];(0,N.useEffect)(function(){f(i)},[i]);var p=(0,P.Z)().secrets,g=(0,l._)((0,N.useState)(!1),2),y=g[0],b=g[1],C=(0,N.useCallback)((0,d._)(function(){var e;return(0,m.Jh)(this,function(n){switch(n.label){case 0:b(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p.addEntries(u)];case 2:return n.sent(),(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"configurationSaved",service:t}),[3,4];case 3:return e=n.sent(),a.showError(e.message),[3,4];case 4:return b(!1),[2]}})}),[u,a,p,t]),S=(0,l._)((0,N.useState)(!1),2),_=S[0],T=S[1],E=(0,N.useCallback)((0,d._)(function(){var e,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:b(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(e=p).removeEntries.apply(e,(0,h._)(n.map(function(e){return e.key})))];case 2:return i.sent(),(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"configurationReset",service:t}),[3,4];case 3:return r=i.sent(),a.showError(r.message),[3,4];case 4:return T(!1),b(!1),[2]}})}),[n,a,p,t]);return(0,o.BX)(c.G,{css:X.accordionItemBody,children:[n.map(function(e){var t;return(0,o.BX)(c.G,{css:X.configurationItem,children:[(0,o.BX)(c.G,{css:X.configurationItemTitle,children:[e.title,e.required?null:(0,o.tZ)(v.xv,{variant:"small",color:"dimmest",multiline:!1,children:"(optional)"})]}),(0,o.tZ)(w.ZP,{components:{p:function(e){var t=e.children;return(0,o.tZ)(v.xv,{variant:"small",color:"dimmer",children:t})}},css:X.markdownReset,children:e.description}),(0,o.BX)(c.G,{css:X.secretRow,children:[(0,o.tZ)(G.u_,{value:e.key}),(0,o.tZ)(G.BH,{placeholder:e.placeholder,value:null!==(t=u.get(e.key))&&void 0!==t?t:"",onChange:function(t){f(function(n){var r=new Map(n);return r.set(e.key,t),r})}})]})]},e.key)}),(0,o.BX)(c.G,{css:X.configurationActions,children:[r?(0,o.tZ)(k.zx,{text:"Delete",colorway:"red",variant:"outlined",size:"small",onClick:function(){return T(!0)},loading:y}):null,(0,o.tZ)(k.zx,{text:"Save",colorway:"primary",size:"small",onClick:C,loading:y})]}),(0,o.tZ)(G.dU,{keys:n.map(function(e){return e.key}),isOpen:_,onClose:function(){return T(!1)},onConfirm:function(){return E()},loading:y})]})},W=(0,s.X)({root:[u.l0.flex.column,u.l0.gap(8)],header:[u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.mb(8),u.l0.p(8),u.l0.pb(0)],items:[u.l0.flex.column,u.l0.gap(8),u.l0.overflowY("auto"),u.l0.maxHeight(250),{marginLeft:"-var(".concat(u.TV.space8,")"),marginRight:"-var(".concat(u.TV.space8,")")}],item:[u.l0.pl(8),u.l0.width("100%"),u.l0.flex.column,u.l0.gap(8),{"&:not(:last-of-type)":[u.l0.pb(8),{borderBottom:"1px solid ".concat(u.TV.outlineDimmest)}]}],itemHeader:[u.l0.flex.row,u.l0.align.center,u.l0.gap(4),u.l0.fontWeight.bold],itemCodeRoot:[u.l0.position.relative,u.l0.minHeight(52)],itemCode:[u.l0.font.code,u.l0.overflowX("auto"),u.l0.fontSize(12),u.l0.width("100%"),u.l0.pr(8),u.l0.color.foregroundDimmer,{whiteSpace:"pre"}],itemCodeActions:[u.l0.position.absolute,u.l0.right(0),u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.flex.column,u.l0.align.center,u.l0.gap(4),u.l0.pr(4)],askAiContainer:[u.l0.p(8)]}),V={JavaScript:{icon:(0,o.tZ)(E.Z,{})},Python:{icon:(0,o.tZ)(R.Z,{})}},H=function(e){var t=e.items,n=e.serviceName,r=e.performPaneOperation,i=(0,l._)((0,N.useState)("JavaScript"),2),a=i[0],s=i[1],u=(0,L.I)().configs,d=(0,N.useCallback)(function(){return u.some(function(e){return["python2","python3"].includes(e.language)})?"Python":"JavaScript"},[u]);return(0,N.useEffect)(function(){s(d())},[d]),(0,o.BX)(c.G,{css:W.root,children:[(0,o.tZ)(c.G,{css:W.header,children:(0,o.tZ)(A.P,{items:Object.entries(V).map(function(e){var t=(0,l._)(e,2),n=t[0],r=t[1];return(0,p._)((0,f._)({},r),{value:n})}),selectedKey:a,onSelectionChange:function(e){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"codeSampleLanguageChanged",service:n,language:e}),s(e)},"aria-label":"Select a language",children:function(e){return(0,o.tZ)(I.m9,{id:e.value,label:e.value,icon:e.icon},e.value)}})}),(0,o.tZ)(c.G,{css:W.items,children:t.map(function(e){return(0,o.BX)(c.G,{css:W.item,children:[(0,o.BX)(c.G,{css:W.itemHeader,children:[e.title,(0,o.tZ)(_.hU,{tooltipPlacement:"right",colorway:"blurple",alt:"Explain this code",onClick:function(){var t=e.code[a];(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"codeSampleExplained",sample:t,service:n,title:e.title,language:a}),r({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{initialPromptEditorValue:["Can you explain this code sample for me?","","```",t,"```"].join("\n")}}})},children:(0,o.tZ)(T.Z,{})})]}),(0,o.BX)(c.G,{css:W.itemCodeRoot,children:[(0,o.tZ)(b.Z,{fontSize:12,language:a,code:e.code[a],css:W.itemCode}),(0,o.tZ)(c.G,{css:W.itemCodeActions,children:(0,o.tZ)(S.m,{tooltipPlacement:"left",textToCopy:e.code[a],onCopy:function(){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"codeSampleCopied",service:n,sample:e.title,language:a})}})})]})]},e.title)})},a),(0,o.tZ)(c.G,{css:W.askAiContainer,children:(0,o.tZ)(k.zx,{size:"small",text:"Get started with AI",iconLeft:(0,o.tZ)(T.Z,{}),colorway:"blurple",onClick:function(){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"codeSampleStartWithAi",service:n,language:a}),r({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{initialPromptEditorValue:"How do I use ".concat(n," in ").concat(a,"?")}}})}})})]})},z=function(e){var t=e.configurationItems,n=e.codeSampleItems,r=e.title,i=e.description,a=e.performPaneOperation,c=(0,l._)((0,N.useState)({configuration:!1,codeSamples:!1}),2),s=c[0],u=c[1],d=(0,P.Z)().secrets,h=(0,l._)((0,N.useState)(new Map),2),m=h[0],g=h[1];(0,N.useEffect)(function(){return d.watch(function(e){g(e)})},[d]);var v=(0,N.useMemo)(function(){return t.filter(function(e){return e.required}).every(function(e){return!!m.get(e.key)})},[t,m]);return(0,o.tZ)(o.HY,{children:(0,o.tZ)(M,{title:r,description:i,isConnected:v,onClick:function(){u(function(e){return(0,p._)((0,f._)({},e),{configuration:!0})}),(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"configurationOpened",service:r,source:"configureButton"})},onSectionToggle:function(e){u(function(t){var n=!t[e];return n&&(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"configuration"===e?"configurationOpened":"codeSampleOpened",service:r,source:"accordion"}),(0,p._)((0,f._)({},t),(0,y._)({},e,n))})},sections:[{key:"configuration",title:"Configuration",content:(0,o.tZ)(F,{serviceName:r,items:t,isConnected:v,secrets:m}),isOpen:s.configuration},{key:"codeSamples",title:"Code samples",content:(0,o.tZ)(H,{serviceName:r,items:n,performPaneOperation:a}),isOpen:s.codeSamples}]})})},j=[{title:"OpenAI",description:"OpenAI offers cutting-edge AI models for various applications, including natural language processing and generation. Enhance your projects with state-of-the-art AI capabilities.",tags:["AI","LLM","chat"],configurationItems:[{key:"OPENAI_API_KEY",title:"API Key",description:"To get started, you'll need an API key from OpenAI. Visit the [API keys page](https://platform.openai.com/account/api-keys) in your OpenAI account, generate a new key, and paste it below. Remember to keep this key secure and never share it publicly.",placeholder:"sk-",required:!0},{key:"OPENAI_ORG_ID",title:"Organization ID",description:"For accounts associated with multiple organizations, you can specify the [Organization ID](https://platform.openai.com/account/org-settings) to use. This is optional; if not provided, your default organization will be used."}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom openai import OpenAI\n\napi_key = os.environ['OPENAI_API_KEY']\norganization_id = os.environ.get('OPENAI_ORG_ID')  # Optional\n\nclient = OpenAI(api_key=api_key, organization=organization_id)",JavaScript:"import { OpenAI } from 'openai';\n\nconst apiKey = process.env.OPENAI_API_KEY;\nconst organizationId = process.env.OPENAI_ORG_ID;  // Optional\n\nconst openai = new OpenAI({\n  apiKey,\n  organization: organizationId,\n});"}},{title:"Chat creation",code:{Python:'response = client.chat.completions.create(\n    model="gpt-3.5-turbo",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Hello!"}\n    ]\n)\n\nprint(response.choices[0].message.content)',JavaScript:'const response = await openai.chat.completions.create({\n  model: "gpt-3.5-turbo",\n  messages: [\n    {role: "system", content: "You are a helpful assistant."},\n    {role: "user", content: "Hello!"}\n  ],\n});\n\nconsole.log(response.choices[0].message.content);'}},{title:"Image generation",code:{Python:'response = client.images.generate(\n    model="dall-e-3",\n    prompt="A futuristic cityscape with flying cars",\n    size="1024x1024",\n    quality="standard",\n    n=1,\n)\n\nimage_url = response.data[0].url\nprint(f"Generated image URL: {image_url}")',JavaScript:'const response = await openai.images.generate({\n  model: "dall-e-3",\n  prompt: "A futuristic cityscape with flying cars",\n  size: "1024x1024",\n  quality: "standard",\n  n: 1,\n});\n\nconst imageUrl = response.data[0].url;\nconsole.log(`Generated image URL: ${imageUrl}`);'}},{title:"Embedding generation",code:{Python:'response = client.embeddings.create(\n    model="text-embedding-ada-002",\n    input="The quick brown fox jumps over the lazy dog"\n)\nembedding = response.data[0].embedding\nprint(f"Embedding vector (first 5 elements): {embedding[:5]}")',JavaScript:'const response = await openai.embeddings.create({\n  model: "text-embedding-ada-002",\n  input: "The quick brown fox jumps over the lazy dog",\n});\nconst embedding = response.data[0].embedding;\nconsole.log(`Embedding vector (first 5 elements): ${embedding.slice(0, 5)}`);'}}]},{title:"Google AI (Gemini)",description:"Google AI's Gemini model represents the latest in machine learning technology. Integrate this powerful tool into your applications for advanced natural language processing and generation.",tags:["AI","LLM","chat"],configurationItems:[{key:"GOOGLE_AI_API_KEY",title:"API Key",description:"To use Gemini, you'll need to set up an API key. Go to the [Google AI Studio](https://makersuite.google.com/app/apikey) to create one. Once you have your key, enter it below to start using Gemini in your projects.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport google.generativeai as genai\n\ngenai.configure(api_key=os.environ['GOOGLE_AI_API_KEY'])",JavaScript:'const {\n  GoogleGenerativeAI,\n  HarmCategory,\n  HarmBlockThreshold,\n} = require("@google/generative-ai");\n\nconst genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY);'}},{title:"Chat creation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nchat = model.start_chat()\n\nresponse = chat.send_message(\"Hello, how are you?\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\n\nconst chat = model.startChat({\n  generationConfig: {\n    maxOutputTokens: 100,\n  },\n});\n\nconst result = await chat.sendMessage("Hello, how are you?");\nconst response = result.response;\nconsole.log(response.text());'}},{title:"Text generation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nresponse = model.generate_content(\"Write a short poem about artificial intelligence.\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst result = await model.generateContent("Write a short poem about artificial intelligence.");\nconsole.log(result.response.text());'}},{title:"Image analysis",code:{Python:"from PIL import Image\n\nmodel = genai.GenerativeModel('gemini-pro-vision')\nimg = Image.open('image.jpg')\nresponse = model.generate_content([\"Describe this image:\", img])\nprint(response.text)",JavaScript:'const fs = require(\'fs\');\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro-vision" });\n\nconst imageParts = [\n  {\n    inlineData: {\n      data: fs.readFileSync("image.jpg", {encoding: \'base64\'}),\n      mimeType: "image/jpeg"\n    }\n  },\n];\n\nconst result = await model.generateContent(["Describe this image:", ...imageParts]);\nconsole.log(result.response.text());'}}]},{title:"Anthropic (Claude)",description:"Anthropic offers safe AI models like Claude, enhancing applications with capabilities for analysis, writing, coding, and problem-solving.",tags:["AI","LLM","chat"],configurationItems:[{key:"ANTHROPIC_API_KEY",title:"API Key",description:"[Create an API key](https://console.anthropic.com/account/keys) and paste the key below. If you get an error, you may have reached your Anthropic usage limits. To view your usage, check your [Anthropic usage dashboard](https://console.anthropic.com/usage).",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:'import os\nimport anthropic\n\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])',JavaScript:"const Anthropic = require('@anthropic-ai/sdk');\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY,\n});"}},{title:"Chat creation",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Hello, Claude!"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Hello, Claude!'}\n  ],\n});\nconsole.log(message.content[0].text);"}},{title:"Streaming response",code:{Python:'with client.messages.stream(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Write a short story about time travel."}\n    ]\n) as stream:\n    for text in stream.text_stream:\n        print(text, end="", flush=True)',JavaScript:"const stream = await anthropic.messages.stream({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Write a short story about time travel.'}\n  ],\n});\n\nfor await (const chunk of stream) {\n  if (chunk.type === 'content_block_delta') {\n    process.stdout.write(chunk.delta.text);\n  }\n}"}},{title:"Content classification",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=100,\n    messages=[\n        {"role": "user", "content": "Classify the sentiment of this text: \'I absolutely love this product!\'"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 100,\n  messages: [\n    {role: 'user', content: \"Classify the sentiment of this text: 'I absolutely love this product!'\"}\n  ],\n});\nconsole.log(message.content[0].text);"}}]},{title:"Slack",description:"Slack is a communication platform for teams to collaborate in real-time. Integrate with Slack to send messages, manage channels, and automate workflows.",tags:["communication","chat"],configurationItems:[{key:"SLACK_BOT_TOKEN",title:"Bot Token",description:"[Create a Slack app](https://api.slack.com/apps) and obtain a Bot Token. This token allows your bot to interact with your Slack workspace.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom slack_sdk import WebClient\n\nclient = WebClient(token=os.environ['SLACK_BOT_TOKEN'])",JavaScript:"const { WebClient } = require('@slack/web-api');\n\nconst client = new WebClient(process.env.SLACK_BOT_TOKEN);"}},{title:"Message sending",code:{Python:'try:\n    response = client.chat_postMessage(\n        channel="#general",\n        text="Hello from your bot!"\n    )\n    print(f"Message sent: {response[\'ts\']}")\nexcept Exception as e:\n    print(f"Error sending message: {e}")',JavaScript:"try {\n  const result = await client.chat.postMessage({\n    channel: '#general',\n    text: 'Hello from your bot!',\n  });\n  console.log(`Message sent: ${result.ts}`);\n} catch (error) {\n  console.error(`Error sending message: ${error}`);\n}"}},{title:"File upload",code:{Python:'try:\n    response = client.files_upload_v2(\n        channels="#general",\n        file="path/to/file.txt",\n        title="Sample File",\n        initial_comment="Here\'s a file for your review."\n    )\n    print(f"File uploaded: {response[\'file\'][\'id\']}")\nexcept Exception as e:\n    print(f"Error uploading file: {e}")',JavaScript:"try {\n  const result = await client.files.uploadV2({\n    channels: '#general',\n    file: fs.createReadStream('path/to/file.txt'),\n    title: 'Sample File',\n    initial_comment: \"Here's a file for your review.\",\n  });\n  console.log(`File uploaded: ${result.file.id}`);\n} catch (error) {\n  console.error(`Error uploading file: ${error}`);\n}"}},{title:"Retrieving channel information",code:{Python:"try:\n    response = client.conversations_info(channel=\"C1234567890\")\n    print(f\"Channel name: {response['channel']['name']}\")\n    print(f\"Channel purpose: {response['channel']['purpose']['value']}\")\nexcept Exception as e:\n    print(f\"Error retrieving channel info: {e}\")",JavaScript:"try {\n  const result = await client.conversations.info({\n    channel: 'C1234567890'\n  });\n  console.log(`Channel name: ${result.channel.name}`);\n  console.log(`Channel purpose: ${result.channel.purpose.value}`);\n} catch (error) {\n  console.error(`Error retrieving channel info: ${error}`);\n}"}}]},{title:"Discord",description:"Discord is a communication platform designed for creating communities. Integrate with Discord to send messages, manage servers, and enhance user engagement.",tags:["communication","chat"],configurationItems:[{key:"DISCORD_BOT_TOKEN",title:"Bot Token",description:"[Create a Discord application](https://discord.com/developers/applications), add a bot to it, and paste the bot token below. This token allows your bot to interact with Discord servers.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport discord\nfrom discord.ext import commands\n\nintents = discord.Intents.default()\nintents.message_content = True\nbot = commands.Bot(command_prefix='!', intents=intents)",JavaScript:"const { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent,\n  ],\n});"}},{title:"Bot setup and message handling",code:{Python:"@bot.event\nasync def on_ready():\n    print(f'We have logged in as {bot.user}')\n\n@bot.command()\nasync def hello(ctx):\n    await ctx.send('Hello!')\n\nbot.run(os.environ['DISCORD_BOT_TOKEN'])",JavaScript:"client.once('ready', () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n});\n\nclient.on('messageCreate', async message => {\n  if (message.content === '!hello') {\n    await message.reply('Hello!');\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Slash command",code:{Python:'@bot.tree.command(name="greet", description="Greet a user")\nasync def greet(interaction: discord.Interaction, user: discord.Member):\n    await interaction.response.send_message(f"Hello, {user.mention}!")\n\n@bot.event\nasync def on_ready():\n    await bot.tree.sync()\n    print(f\'We have logged in as {bot.user}\')\n\nbot.run(os.environ[\'DISCORD_BOT_TOKEN\'])',JavaScript:"const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');\n\nconst client = new Client({ intents: [GatewayIntentBits.Guilds] });\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('greet')\n    .setDescription('Greet a user')\n    .addUserOption(option => option.setName('user').setDescription('The user to greet').setRequired(true)),\n];\n\nclient.once('ready', async () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n  \n  const rest = new REST({ version: '10' }).setToken(process.env.DISCORD_BOT_TOKEN);\n  try {\n    await rest.put(Routes.applicationCommands(client.user.id), { body: commands });\n    console.log('Slash commands registered');\n  } catch (error) {\n    console.error(error);\n  }\n});\n\nclient.on('interactionCreate', async interaction => {\n  if (!interaction.isCommand()) return;\n\n  if (interaction.commandName === 'greet') {\n    const user = interaction.options.getUser('user');\n    await interaction.reply(`Hello, ${user}!`);\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Sending embeds",code:{Python:'@bot.command()\nasync def embed(ctx):\n    embed = discord.Embed(title="Example Embed", description="This is an example embed.", color=0x00ff00)\n    embed.add_field(name="Field 1", value="Value 1", inline=False)\n    embed.add_field(name="Field 2", value="Value 2", inline=False)\n    await ctx.send(embed=embed)',JavaScript:"client.on('messageCreate', async message => {\n  if (message.content === '!embed') {\n    const embed = new EmbedBuilder()\n      .setTitle('Example Embed')\n      .setDescription('This is an example embed.')\n      .setColor(0x00ff00)\n      .addFields(\n        { name: 'Field 1', value: 'Value 1' },\n        { name: 'Field 2', value: 'Value 2' }\n      );\n    await message.channel.send({ embeds: [embed] });\n  }\n});"}}]},{title:"Stripe",description:"Stripe is a payment processing platform that allows businesses to accept online payments. Integrate with Stripe to manage transactions, subscriptions, and billing.",tags:["payments"],configurationItems:[{key:"STRIPE_SECRET_KEY",title:"Secret Key",description:"[Create a Stripe account](https://dashboard.stripe.com/register) and obtain your Secret Key from the [API keys page](https://dashboard.stripe.com/apikeys). This key allows access to your Stripe account for processing payments.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport stripe\n\nstripe.api_key = os.environ['STRIPE_SECRET_KEY']",JavaScript:"const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);"}},{title:"Create a payment intent",code:{Python:"try:\n    intent = stripe.PaymentIntent.create(\n        amount=2000,  # Amount in cents\n        currency='usd',\n        payment_method_types=['card'],\n    )\n    print(f\"PaymentIntent created: {intent.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating PaymentIntent: {e}\")",JavaScript:"try {\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: 2000, // Amount in cents\n    currency: 'usd',\n    payment_method_types: ['card'],\n  });\n  console.log(`PaymentIntent created: ${paymentIntent.id}`);\n} catch (error) {\n  console.error(`Error creating PaymentIntent: ${error.message}`);\n}"}},{title:"Create a customer",code:{Python:"try:\n    customer = stripe.Customer.create(\n        email='customer@example.com',\n        name='John Doe',\n        description='Test customer'\n    )\n    print(f\"Customer created: {customer.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating customer: {e}\")",JavaScript:"try {\n  const customer = await stripe.customers.create({\n    email: 'customer@example.com',\n    name: 'John Doe',\n    description: 'Test customer'\n  });\n  console.log(`Customer created: ${customer.id}`);\n} catch (error) {\n  console.error(`Error creating customer: ${error.message}`);\n}"}},{title:"Create a subscription",code:{Python:"try:\n    subscription = stripe.Subscription.create(\n        customer='cus_1234567890',\n        items=[{'price': 'price_1234567890'}]\n    )\n    print(f\"Subscription created: {subscription.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating subscription: {e}\")",JavaScript:"try {\n  const subscription = await stripe.subscriptions.create({\n    customer: 'cus_1234567890',\n    items: [{ price: 'price_1234567890' }]\n  });\n  console.log(`Subscription created: ${subscription.id}`);\n} catch (error) {\n  console.error(`Error creating subscription: ${error.message}`);\n}"}}]}],q=n(85045),J=n(58532),Y=n(22510),$=n(44935),K=n(25722),Q=n(16155),ee=n(6829),et=n(14118),en=n(28065),er=n(35870),ei=n(9834),eo=n.n(ei),ea=n(68140),el=[{value:"google",title:"Google"},{value:"facebook",title:"Facebook"},{value:"trello",title:"Trello"},{value:"email",title:"Email"},{value:"sms",title:"SMS"},{value:"stripe",title:"Stripe"},{value:"asana",title:"Asana"},{value:"airtable",title:"Airtable"}].sort(function(){return Math.random()-.5}),ec=(0,s.X)({root:[u.l0.reset.button,u.l0.overflow("hidden"),u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween,u.l0.p(8),u.l0.gap(4),u.l0.backgroundColor.backgroundHigher,u.l0.border({color:u.TV.outlineDimmer,width:1}),u.l0.borderRadius(),u.l0.cursor.pointer,{"&:hover":{backgroundColor:u.TV.backgroundHighest,borderColor:u.TV.outlineDefault}}],title:[u.l0.flex.row,u.l0.align.center,u.l0.gap(4)],content:[u.l0.flex.column,u.l0.gap(4)],action:[]}),es=function(e){var t=e.icon,n=e.title,r=e.description,i=e.onClick;return(0,o.BX)(c.G,{css:ec.root,as:"button",onClick:i,tabIndex:0,children:[(0,o.BX)(c.G,{css:ec.content,children:[(0,o.BX)(v.xv,{variant:"subheadDefault",css:ec.title,children:[(0,o.tZ)(en.Pd.Provider,{value:{size:16},children:t}),n]}),(0,o.tZ)(v.xv,{variant:"small",color:"dimmer",children:r})]}),(0,o.tZ)(g.Z,{})]})},eu=(0,s.X)({root:[u.l0.flex.column,u.l0.gap(8)],actions:[u.l0.justify.end,u.l0.flex.row,u.l0.gap(8)]}),ed=function(e){var t,n=e.isOpen,r=e.setIsOpen,i=(0,Q.Z)(),a=(0,ee.x)(),s=(0,l._)((0,N.useState)(!1),2),u=s[0],g=s[1],y=(0,l._)((0,N.useState)({service:"",freeform:""}),2),b=y[0],w=y[1],Z=(0,N.useId)(),C="".concat(Z,"-service"),S="".concat(Z,"-freeform"),_=!!(b.service||b.freeform);return(0,N.useEffect)(function(){n&&(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"feedbackOpened"}),n||w({service:"",freeform:""})},[n]),(0,o.tZ)(J.u,{isOpen:n,onRequestClose:function(){return r(!1)},children:(0,o.BX)(Y.l0,{onSubmit:(t=(0,d._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),!_)return[2];g(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"feedbackSubmitted",service:b.service,freeform:b.freeform}),[4,fetch("https://integrations-feedback-bot.replit.app/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:b.freeform,requestedService:b.service,replId:i,username:null==a?void 0:a.username})})];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),K.Tb(t),[3,4];case 4:return g(!1),r(!1),[2]}})}),function(e){return t.apply(this,arguments)}),css:eu.root,children:[(0,o.tZ)(v.h4,{variant:"headerDefault",level:2,children:"Integrations Feedback"}),(0,o.tZ)("label",{id:"".concat(C,"-label"),htmlFor:C,children:(0,o.tZ)(v.xv,{variant:"subheadDefault",multiline:!1,children:"Service"})}),(0,o.tZ)(v.xv,{variant:"small",children:"Help us prioritize the services you want to use most in your Repls."}),(0,o.tZ)(A.P,{placeholder:"Select a service",items:[{value:"",title:"Select a service..."}].concat((0,h._)(el),[{value:"other",title:"Other"}]),id:C,"aria-labelledby":"".concat(C,"-label"),selectedKey:b.service,onSelectionChange:function(e){w(function(t){return(0,p._)((0,f._)({},t),{service:e})})},children:function(e){return(0,o.tZ)(I.m9,{id:e.value,label:e.title},e.value)}}),(0,o.tZ)("label",{htmlFor:S,children:(0,o.tZ)(v.xv,{variant:"subheadDefault",multiline:!1,children:"Additional Feedback"})}),(0,o.tZ)($.B,{rows:3,id:S,value:b.freeform,onChange:function(e){return w(function(t){return(0,p._)((0,f._)({},t),{freeform:e.target.value})})}}),(0,o.BX)(c.G,{css:eu.actions,children:[(0,o.tZ)(k.zx,{text:"Cancel",loading:u,onClick:function(){return r(!1)}}),(0,o.tZ)(k.zx,{loading:u,disabled:!_,type:"submit",text:"Submit feedback",colorway:"primary"})]})]})})},ef=function(e){var t=e.onOpenFeedback;return(0,o.tZ)(es,{icon:(0,o.tZ)(er.Z,{}),title:"Don't see what you're looking for?",description:"Tell us what we're missing.",onClick:function(){return t()}})},ep=(0,s.X)({root:[u.l0.px(8),u.l0.flex.column,u.l0.gap(12)],description:[u.l0.flex.column,u.l0.gap(4)],serviceList:[u.l0.flex.column,u.l0.gap(16),u.l0.pb(8)],linkButton:[u.l0.reset.button,u.l0.linkStyle]});function eh(e){var t=e.performPaneOperation,n=e.query,r=(0,et.P5)({controlName:"flag-integrations-pane-feedback"}),i=(0,l._)((0,N.useState)(!1),2),a=i[0],s=i[1],u=(0,N.useMemo)(function(){return new q.Av(j,{fuzzy:!1,selector:function(e){return"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[]),d=(0,N.useMemo)(function(){return n?u.find(n).map(function(e){return e.item}):j},[u,n]),f=r&&n&&0===d.length;return(0,o.BX)(c.G,{css:ep.root,children:[(0,o.tZ)(v.xv,{variant:"subheadBig",children:"External Services"}),(0,o.tZ)(c.G,{css:ep.description,children:(0,o.BX)(v.xv,{variant:"text",color:"dimmer",children:[(0,o.BX)("div",{children:["Connect your Repl to a variety of third-party services using"," ",(0,o.tZ)("button",{css:ep.linkButton,onClick:function(){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),t({operation:"open",secondary:!0,pane:{type:"envEditor"}})},children:"Secrets"}),"."]}),(0,o.BX)("div",{children:["Never share or expose tokens in code."," ",(0,o.tZ)(eo(),{href:ea.TT.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:ep.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]}),!f&&r?(0,o.BX)("div",{children:["Don't see what you're looking for?"," ",(0,o.tZ)("button",{css:ep.linkButton,onClick:function(){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"feedbackOpened",source:"description"}),s(!0)},children:"Send us feedback"}),"."]}):null]})}),d.length>0?(0,o.tZ)(o.HY,{children:(0,o.tZ)(c.G,{css:ep.serviceList,children:d.map(function(e){return(0,o.tZ)(z,{title:e.title,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,performPaneOperation:t},e.title)})})}):null,f?(0,o.tZ)(o.HY,{children:(0,o.tZ)(ef,{onOpenFeedback:function(){return s(!0)}})}):null,(0,o.tZ)(ed,{isOpen:a,setIsOpen:s})]})}var em=n(25949),eg=n(93948),ev=n(54328),ey=n(73344),eb=n(14116),ew=(0,s.X)({root:[u.l0.px(8),u.l0.pb(8),u.l0.flex.column,u.l0.gap(12)],linkButton:[u.l0.reset.button,u.l0.linkStyle]}),eZ=[{tags:["database","storage"],pane:{type:"database"},useConnectionStatus:function(){return"connected"}},{tags:["database","storage","sql"],pane:{type:"neon"},useConnectionStatus:function(){var e=(0,eg.r)(),t=e.neonDatabases,n=e.loading;return t.length>0?"connected":n?"loading":"disconnected"}},{tags:["storage","files"],pane:{type:"objectStorage"},useConnectionStatus:function(){var e=(0,ev.i)(),t=e.loading,n=e.buckets;return n&&n.length>0?"connected":t?"loading":"disconnected"}},{tags:["authentication"],pane:{type:"replAuth"},useConnectionStatus:function(){var e=(0,ey.$)(),t=e.isDotReplitAuthLoading,n=e.isDotReplitAuthEnabled;return t?"loading":n?"connected":"disconnected"}}];function ex(e){var t=e.performPaneOperation,n=e.query,r=(0,em.Se)(),i=r.getDescription,a=r.Icon,l=r.getTitle,s=(0,N.useMemo)(function(){return new q.Av(eZ,{fuzzy:!1,selector:function(e){return"".concat(l(e.pane)," ").concat(i(e.pane)," ").concat(e.tags.join(" "))}})},[i,l]),u=(0,N.useMemo)(function(){return n?s.find(n).map(function(e){return e.item}):eZ},[s,n]);return(0,o.BX)(c.G,{css:ew.root,children:[u.length>0?(0,o.BX)(o.HY,{children:[(0,o.tZ)(v.xv,{variant:"subheadBig",children:"Replit Services"}),(0,o.tZ)(v.xv,{variant:"text",color:"dimmer",children:"Connect to Replit's storage and auth services."})]}):null,eZ.map(function(e){var n,r=l(e.pane),c=e.useConnectionStatus();return u.includes(e)?(0,o.tZ)(M,{title:r,description:null!==(n=i(e.pane))&&void 0!==n?n:"",icon:(0,o.tZ)(a,{pane:e.pane}),onClick:function(){(0,x.j)(x.U3.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:r}),t({operation:"open",secondary:!0,pane:e.pane})},isConnected:"connected"===c,configIcon:(0,o.tZ)(eb.Z,{}),configIconPosition:"right"},r):null})]})}var eC=n(82922),ek=n(23261),eS=n(59489),e_=n(66598),eT=n(34030),eE=n(62279),eR=n(43540),eD=(0,eE.iv)([u.l0.maxWidth(600),u.l0.width("100%"),{alignSelf:"center"}]),eI=(0,s.X)({root:[u.l0.width("100%"),u.l0.overflowY("auto"),u.l0.flex.column,u.l0.flex.grow(1),u.l0.height("100%"),u.l0.width("100%"),{margin:"0 auto"}],header:[eD,u.l0.backgroundColor.backgroundDefault,u.l0.flex.growAndShrink(0),u.l0.p(8),u.l0.flex.row,u.l0.gap(12),u.l0.position.sticky,u.l0.top(0),u.l0.zIndex(1),{alignSelf:"center","& > div:first-child":{flexGrow:1}}],content:[u.l0.flex.growAndShrink(1),u.l0.width("100%"),u.l0.gap(24),u.l0.pb(8),eD]});function eB(e){var t=e.performPaneOperation,n=(0,l._)((0,N.useState)(null),2),r=n[0],i=n[1],a=(0,l._)((0,N.useState)(""),2),s=a[0],u=a[1],d=(0,eR.Z)("integrations-pane","integrations-toast").dismiss;return(0,N.useEffect)(function(){d()},[d]),(0,ek.D)(x.U3.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,o.BX)(c.G,{css:eI.root,children:[(0,o.BX)(c.G,{css:eI.header,children:[(0,o.tZ)(eC.E,{placeholder:"Search for a service...",value:s,onChange:function(e){return u(e.target.value)},onClear:function(){return u("")}}),(0,o.BX)(eS.hE,{name:"integrations-category",value:r,onChange:i,row:!0,children:[(0,o.tZ)(eS.rK,{id:"external",value:"external",text:"External",icon:(0,o.tZ)(eT.Z,{})}),(0,o.tZ)(eS.rK,{id:"replit",value:"replit",text:"Replit",icon:(0,o.tZ)(e_.Z,{})}),(0,o.tZ)(eS.rK,{id:"all",value:null,text:"All"})]})]}),(0,o.BX)(c.G,{css:eI.content,children:["replit"!==r?(0,o.tZ)(eh,{query:s,performPaneOperation:t}):null,"external"!==r?(0,o.tZ)(ex,{query:s,performPaneOperation:t}):null]})]})}(r=i||(i={})).External="external",r.Replit="replit";var eA=n(74044),eP=n(99149),eG=eA.Dy.Object({type:eA.Dy.Literal("integrations")}),eL={Content:function(e){var t=e.options.performPaneOperation;return(0,o.tZ)(eB,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,o.tZ)(a.Z,{size:t})},getTitle:function(){return"Integrations"},getTitlePill:function(){return{text:"New",colorway:"green"}},description:"Connect to Replit-native and external services",category:em.hc.CloudServices,decode:function(e){return eP.B4.Decode(eG,e)}}},49821:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},18454:function(e,t,n){n.d(t,{s:function(){return th},G:function(){return tv}});var r,i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(74044),s=n(99149),u=n(24766),d=n(93245),f=n(36809),p=n(71920),h=n(19602),m=n(63163),g=n(23882),v=n(31252),y=n(25949),b=n(19236),w=n(75271),Z=n(42516),x=n(41733),C=n(30509),k=n(93632),S=n(46954),_=n(37862),T=n(22192),E=n(62466),R=n(42965),D=n(73581),I=n(12666),B=n(1053),A=n(49205),P=n(37633),G=n(41974),L=n(75982),N=n(71051),O=n(79904),U=n(9602),M=n(379),X=n(22419),F=n(27840),W=n(29737),V=n(33323),H=n(56981),z=n(39819),j=n(17824),q=n(54300),J=n(70145),Y=n(72748),$=n(22524),K=n(66791),Q=n(70196);function ee(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var et=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(6),m.l0.align.center],executionPill:[m.l0.flex.shrink(0),m.l0.display.flex,{"@container (max-width: 120px)":[m.l0.display.none]}],lastLineTextWrapper:[m.l0.flex.shrink(1)],lastLineText:[m.l0.display.block,m.l0.maxWidth("100%"),m.l0.overflow("hidden"),m.l0.font.code,m.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 120px)":[m.l0.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 460px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],dateText:[m.l0.flex.row,{"@container (max-width: 260px)":[m.l0.display.none]}],verticalDivider:[m.l0.mx(6),{width:1,height:28,background:m.TV.backgroundHigher}],portInfoDomain:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 400px)":m.l0.display.none}],portInfoPorts:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 320px)":m.l0.display.none}],portTooltipHeader:[m.l0.color.foregroundDimmer,m.l0.fontWeight.normal,m.l0.px(2),m.l0.pb(2)],portTooltipColumnLeft:[m.l0.textAlign.right],portTooltipColumnMiddle:[m.l0.textAlign.center,m.l0.px(4)],portInfoText:[m.l0.mr(0)]}),en=[et.askAIButton,et.aiButtonWithoutPorts],er=[et.askAIButton,et.aiButtonWithPorts],ei=(r={},(0,Z._)(r,B.kH.DEBUGGER,"debugger"),(0,Z._)(r,B.kH.PACKAGER,"packager"),(0,Z._)(r,B.kH.UNIT_TEST,"tests"),(0,Z._)(r,B.kH.EXECUTION,"run"),(0,Z._)(r,B.kH.PORT_INFO,"port"),(0,Z._)(r,B.kH.FORMATTER,"formatter"),(0,Z._)(r,B.kH.SAVE,"save"),r);function eo(e){var t=e.onClick,n=e.showingPorts;return(0,l.BX)(d.G,{css:n?er:en,children:[(0,l.tZ)(u.xv,{color:"dimmer",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(j.Z,{}),text:"Ask AI",onClick:void 0===t?function(){}:t})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})}function ea(e){var t=e.openedPorts;return(0,l.tZ)(d.G,{children:(0,l.BX)("table",{children:[(0,l.BX)("tr",{children:[(0,l.tZ)("th",{css:et.portTooltipHeader,children:"Internal"}),(0,l.tZ)("th",{}),(0,l.tZ)("th",{css:et.portTooltipHeader,children:"External"})]}),(0,l.tZ)("tbody",{children:t.map(function(e){var t=e.configuration,n=!0,r=null;switch(t.type){case J.DL.FORWARDED:n=!0,r=":".concat(t.externalPort);break;case J.DL.INTERNAL_ONLY:n=!1,r=null;break;case J.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case J.DL.MISCONFIGURED:case J.DL.CONFIG_MISSING:n=!0,r=(0,l.tZ)(q.Z,{})}return(0,l.BX)("tr",{children:[(0,l.BX)("td",{css:et.portTooltipColumnLeft,children:[":",t.localPort]}),(0,l.tZ)("td",{css:et.portTooltipColumnMiddle,children:n?"":null}),(0,l.tZ)("td",{children:r})]},t.localPort)})})]})})}function el(e){var t=e.openPane,n=e.openedPorts,r=void 0!==n&&n.length>0,i=r?"{...}.replit.dev":"",o=(0,w.useMemo)(function(){return r?1===n.length?":".concat(n[0].configuration.localPort):"".concat(n.length," ").concat((0,N.Z)("port",n.length)):""},[r,n]),a=(0,w.useCallback)(function(){t({type:"webview",data:r?{portType:"local",port:n[0].configuration.localPort}:void 0},!0)},[r,t,n]),c=(0,w.useCallback)(function(){t({type:"networking"},!0)},[t]);return r?(0,l.BX)(l.HY,{children:[(0,l.BX)(d.G,{css:et.portInfoDomain,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(X.u,{tooltip:"Open Webview",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",text:i,onClick:a})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]}),(0,l.BX)(d.G,{css:et.portInfoPorts,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(X.u,{tooltip:(0,l.tZ)(ea,{openedPorts:n}),children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(H.Z,{color:m.TV.accentPositiveStronger}),text:o,onClick:c})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})]}):null}function ec(e){var t=e.isDone,n=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,c=void 0===a?m.TV.accentPositiveDefault:a,s=e.duration,f=e.time,p=e.openPane,h=e.isCollapsed,g=e.setIsCollapsed,v=e.lastMeaningfullLine,y=e.openedPorts,b=e.onAiChatClick,w=(0,Y.Z)(new Date(f),"HH:mm:ss, MM/dd");return(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapper,onDoubleClick:function(){return g(!h)},children:[(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:h?"Expand":"Collapse",onClick:function(){return g(!h)},children:h?(0,l.tZ)(V.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:ee(i),css:et.executionPill}),(0,l.tZ)(d.G,{css:et.lastLineTextWrapper,children:h?(0,l.tZ)(u.xv,{css:et.lastLineText,variant:"small",children:v}):null})]}),(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!y&&y.length>0,onClick:b}),(0,l.tZ)(el,{openPane:p,openedPorts:y}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:et.dateText,children:[s?(0,l.tZ)(X.u,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:s<1e3?"".concat(Math.floor(s),"ms"):s<6e4?"".concat(Math.floor(s/1e3),"s"):"".concat(Math.floor(s/6e4),"m")}):null,s?"".concat("\xa0","on").concat("\xa0"):null,w]}),t?(0,l.tZ)(X.u,{tooltip:r,children:void 0!==n?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):(0,l.tZ)(X.u,{tooltip:void 0===o?"Running...":o,children:(0,l.tZ)(z.Z,{color:c})})]})]})}function es(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.startTime,c=e.endTime,s=e.localStartTime,u=e.localEndTime,d=e.isDone,f=e.data,p=e.error,h=e.openedPorts,m=e.onAiChatClick,g=ed(!d),v=ef(f.onMessage);a&&c?t=c-a:!d&&s?t=g-s:d&&u&&(t=u-s);var y="Finished";return void 0!==p&&(y=void 0!==p?ee(p):"Finished with error"),(0,l.tZ)(ec,{isDone:d,error:p,finishedTooltipText:y,executionPillText:null!==(n=f.executionMode)&&void 0!==n?n:"unknown",duration:t,time:null!=a?a:s,lastMeaningfullLine:v,openPane:o,isCollapsed:r,setIsCollapsed:i,openedPorts:h,onAiChatClick:m})}function eu(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,a=e.localEndTime,c=e.isDone,s=e.type,d=e.error,f=e.data,p=e.onAiChatClick,h=ed(!c),g=ef(f.onMessage),v=ei[s],y=d?(0,l.BX)(u.xv,{multiline:!0,children:[ee(ei[s])," error",(0,l.tZ)("br",{}),d]}):"Finished",b=m.TV.accentPositiveDefault,w="Running...";if(s===B.kH.DEBUGGER){var Z=f.debugState;b="paused"===Z?m.TV.yellowDefault:m.TV.accentPositiveDefault,w="paused"===Z?"Paused":"Running..."}return a?t=a-o:!c&&o&&(t=h-o),(0,l.tZ)(ec,{isCollapsed:n,setIsCollapsed:r,openPane:i,isDone:c,finishedTooltipText:y,executionPillText:v,duration:t,time:o,circleColor:b,runningTooltipText:w,lastMeaningfullLine:g,error:d,onAiChatClick:p})}function ed(e){var t=(0,o._)((0,w.useState)(function(){return Date.now()}),2),n=t[0],r=t[1];return(0,w.useEffect)(function(){if(e){var t=setInterval(function(){r(Date.now())},100);return function(){clearInterval(t)}}},[e]),n}function ef(e){var t=(0,o._)((0,w.useState)(""),2),n=t[0],r=t[1];return(0,w.useEffect)(function(){return e(function(e){var t,n=null===(t=(0,Q.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===t?void 0:t.trim();n&&r(n)})}),n}function ep(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,c=e.type,s=e.data,u=e.error,d=e.localStartTime,f=e.localEndTime,p=e.startTime,h=e.endTime,m=e.openedPorts,g=e.openAIWithMessage,v=(t=s.onMessage,n=(0,w.useRef)(""),(0,w.useEffect)(function(){return t(function(e){n.current=(n.current+e).slice(-1500)})},[t]),n.current),y=function(){v&&(null==g||g((0,$.Rn)(v)))};switch(c){case B.kH.EXECUTION:return(0,l.tZ)(es,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,startTime:p,endTime:h,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});case B.kH.DEBUGGER:case B.kH.PACKAGER:case B.kH.UNIT_TEST:case B.kH.FORMATTER:case B.kH.SAVE:return(0,l.tZ)(eu,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});default:(0,K.Z)(c)}}var eh=n(23979),em=n(78371),eg=n(13502),ev=n(16642),ey=n(1567),eb=n(14118),ew=n(73660),eZ={noScroll:!0},ex=(0,f.X)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:eh.Cn.topOffset,"& .xterm":[m.l0.py(eh.J),m.l0.pl(eh.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:eh.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eC(e){var t=e.onMessage,n=e.onInput,r=e.openFile,i=e.openAIWithMessage,a=e.openSearchAndReplace,c=e.openWebview,s=e.listFiles,u=e.autoFocus,f=e.maxHeight,p=e.onResizeTerminal,h=e.scrollPosition,m=e.scrollParent,g=e.performPaneOperation,v=(0,eh.fB)({maxHeight:f,openFile:r,listFiles:s,openWebview:c,performPaneOperation:g}),y=v.visibleHeight,b=v.visibleLines,Z=v.bufferHeight,x=v.bufferLines,C=v.wrapperResizeRef,k=v.xterm,S=v.xtermRef,_=v.hasScrollback,T=(0,w.useMemo)(function(){return null==k?void 0:k._term},[k]),E=(0,w.useMemo)(function(){var e,t=null==T?void 0:T._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[T]),R=(0,o._)((0,w.useState)(!1),2),D=R[0],I=R[1],B=(0,o._)((0,w.useState)(""),2),A=B[0],P=B[1],G=(0,o._)((0,w.useState)(!1),2),L=G[0],N=G[1],O=(0,w.useRef)(null),U=(0,eb.P5)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),M=(0,ew.K)();(0,w.useEffect)(function(){return function(){null!==O.current&&clearTimeout(O.current)}},[O]),(0,w.useEffect)(function(){if(T){if(h<1||!_){T.scrollToLine(0);return}var e=Z-y,t=x-b;if(e<1){T.scrollToLine(0);return}T.scrollToLine(Math.round(h/e*t))}},[Z,x,_,h,T,y,b]);var X=(0,w.useCallback)(function(){if(T){var e=T.getSelectionPosition();e&&m(e.start.y*E.height-f/2)}},[T,f,m,E.height]);(0,w.useEffect)(function(){if(U)return t(function(e){return M("repl:run:output",{output:e})})},[t,U,M]);var F=(0,em.av)().onContextMenu,W=(0,eg.j)({xterm:k,isOutputsTerminal:!0,openAIWithMessage:i,openShellSearch:function(e){I(!0),P(e)},openSearchAndReplace:a});return(0,l.BX)(eh.VU,{onInput:n,xterm:k,wrapperResizeRef:C,bufferHeight:Z,onMessage:t,onResizeTerminal:p,autoFocus:u,style:{pointerEvents:L?"none":"all"},onWheel:function(){N(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(function(){N(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(I(!0),e.preventDefault())},children:[D?(0,l.tZ)(d.G,{css:ex.searchWidget,children:(0,l.tZ)(ev.R,{searchValue:A,setSearchValue:P,findPrevious:function(e){(null==k?void 0:k.findPrevious(e,eZ))&&X()},findNext:function(e){(null==k?void 0:k.findNext(e,eZ))&&X()},exit:function(){return I(!1)}})}):null,(0,l.tZ)(eh.UB,{xtermRef:S,visibleHeight:y,maxHeight:f,css:ex.terminal,onContextMenu:function(e){return F(e,{command:W})}})]})}var ek=n(91466),eS=n(81253),e_=n(12394),eT=n(24126),eE=n(76848),eR=(0,f.X)({emptyStateWrapper:[m.l0.p(8),m.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[m.l0.rowWithGap(6),m.l0.backgroundColor.accentPositiveDimmest,m.l0.color.accentPositiveStrongest,m.l0.align.center,m.l0.borderRadius(8),m.l0.py(2),m.l0.px(6),m.l0.mx(4),m.l0.cursor.pointer,{"&:hover":[m.l0.color.white,m.l0.backgroundColor.accentPositiveDefault]}]}),eD=(0,f.X)({root:[m.l0.p(8),m.l0.colWithGap(8)],header:[m.l0.colWithGap(6),m.l0.align.start],workflows:[m.l0.colWithGap(6)]});function eI(e){var t=e.onClick;return(0,l.tZ)(d.G,{tag:"span",style:{display:"inline-block"},children:(0,l.BX)(d.G,{tag:"button",onClick:t,css:eR.simpleRunButtonWrapper,children:[(0,l.tZ)(eS.Z,{size:12}),(0,l.tZ)(u.xv,{children:"Run"})]})})}function eB(e){var t=e.runner,n=(0,o._)((0,w.useState)(function(){return t.getRunState()}),2),r=n[0],i=n[1],a=(0,eE.s2)(),c=function(){if(null==a?void 0:a.run){a.run();return}var e=t.getRunState();(e===B.Ah.IDLE||e===B.Ah.STOPPING)&&t.run()},s=(0,eb.P5)({controlName:"flag-work-flows"});return((0,w.useEffect)(function(){var e=t.onStateChanged(function(e){i(e)});return function(){return e()}},[t]),r===B.Ah.OFFLINE)?(0,l.tZ)(d.G,{css:eR.emptyStateWrapper,children:"The Repl is booting..."}):r===B.Ah.RUNNING||r===B.Ah.BEFORE_RUN?(0,l.tZ)(d.G,{css:eR.emptyStateWrapper,children:"Running..."}):s?(0,l.BX)(d.G,{css:eD.root,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Results of your code will appear here when you run"}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eD.header,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Default"}),(0,l.tZ)(O.zx,{size:"small",text:"Run",iconLeft:(0,l.tZ)(eS.Z,{}),colorway:"positive",onClick:c})]}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eD.workflows,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Workflows"}),(0,l.tZ)(eT.A,{})]})]}):(0,l.tZ)(e_.Z,{pane:{type:"runnerOutput"},headerText:"Run your code",bodyText:(0,l.BX)(l.HY,{children:["Results of your code will appear here when you"," ",(0,l.tZ)(eI,{onClick:c})," the project."]})})}var eA=n(21781),eP=n(31417),eG=n(21460),eL=n(6829),eN=n(24200),eO=n(28670),eU=n(67827),eM=n(14074);function eX(e){var t=e.visualState,n=e.onSetVisualState,r=e.maxHeight,i=(0,o._)((0,w.useState)(t===B.MZ.EXPANDED?0:void 0),2),a=i[0],l=i[1],c=(0,w.useRef)(null),s=(0,o._)((0,w.useState)(t===B.MZ.EXPANDED?"expanded":"collapsed"),2),u=s[0],d=s[1],f=(0,o._)((0,w.useState)(t===B.MZ.COLLAPSED?0:void 0),2),p=f[0],h=f[1],m=(0,w.useCallback)(function(e){e&&l(e.getBoundingClientRect().height)},[]),g=(0,_.Z)(function(e){var t=e.height;"expanded"===u&&l(t)},{type:"debounce",wait:200});(0,w.useEffect)(function(){if(c.current)switch(u){case"start-collapsing":d("is-collapsing");break;case"is-collapsing":h(0);break;case"start-expanding":d("is-expanding");break;case"is-expanding":h(a);break;case"expanded":h(void 0)}},[u,a]);var v="expanded"!==u&&"is-expanding"!==u,y=(0,w.useCallback)(function(e){n(e?B.MZ.COLLAPSED:B.MZ.EXPANDED)},[n]),b=(0,w.useRef)(t);(0,w.useEffect)(function(){b.current===B.MZ.EXPANDED&&t===B.MZ.COLLAPSED&&c.current&&(d("start-collapsing"),h(Math.min(c.current.getBoundingClientRect().height,r)),d("start-collapsing")),b.current===B.MZ.COLLAPSED&&t===B.MZ.EXPANDED&&d("start-expanding"),b.current=t},[r,t]);var Z=(0,w.useCallback)(function(){"is-collapsing"===u&&d("collapsed"),"is-expanding"===u&&d("expanded")},[u]),x=(0,w.useMemo)(function(){return{style:{height:p,transition:"height 120ms ease-out",overflow:"expanded"===u||"start-collapsing"===u?"visible":"hidden"},onTransitionEnd:Z}},[p,u,Z]);return{collapsedStep:u,isCollapsed:v,setIsCollapsed:y,blockWrapperRef:c,blockWrapperProps:x,blockResizeRef:(0,w.useMemo)(function(){return(0,eM.l)(g,m)},[g,m]),measuredBlockHeight:a}}var eF=n(35820),eW=(0,f.X)({terminalLoadingWrapper:[m.l0.p(8)],terminalLoadingLine:[m.l0.borderRadius(2),eF.p.foregroundPulse(),m.l0.height(16),m.l0.mb(4)]});function eV(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),r=(0,w.useMemo)(function(){return Array.from({length:n}).map(function(e,t){return(0,l.tZ)(d.G,{css:eW.terminalLoadingLine,style:{width:100*Math.random()+"%"}},t)})},[n]);return(0,l.tZ)(d.G,{css:eW.terminalLoadingWrapper,style:{height:t+"px"},children:(0,l.tZ)(d.G,{style:{position:"sticky",top:36},children:r})})}var eH=n(24374),ez=n(10055),ej=n(97933),eq=(0,f.X)({button:[m.l0.textAlign.left]}),eJ=function(e){var t=e.onClick;return(0,ej.Z)()?(0,l.tZ)(eH.u,{text:"Missing required secrets. Click here to add them.",onClick:t,iconRight:(0,l.tZ)(ez.Z,{}),colorway:"warning",css:eq.button}):null},eY=n(34030),e$=n(91620).lW,eK="outputs",eQ=(0,T.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e0=eQ.cssVars,e1=eQ.styleTokens,e2=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(4),m.l0.align.center],taskNamePill:[m.l0.maxWidth(100),m.l0.flex.shrink(0),m.l0.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[m.l0.display.none]}],dateText:[m.l0.flex.row,{"@container (max-width: 460px)":[m.l0.display.none]}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[m.l0.minHeight(e1.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:eh.Cn.topOffset,"& .xterm":[m.l0.py(eh.J),m.l0.pl(eh.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:eh.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[m.l0.flex.growAndShrink(0),m.l0.rowWithGap(4),m.l0.align.center]});function e3(e){return(0,Y.Z)(new Date(e),"HH:mm:ss, MM/dd")}function e4(e){var t=e.isDone,n=e.hasError,r=e.errorMessage,i=e.stopTask;return t?(0,l.tZ)(X.u,{tooltip:n?"Error".concat(r?": ".concat(r):""):"Finished",children:n?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):void 0!==i?(0,l.tZ)(U.hU,{alt:"Stop",onClick:i,children:(0,l.tZ)(z.Z,{color:m.TV.accentPositiveDefault})}):(0,l.tZ)(X.u,{tooltip:"Running...",children:(0,l.tZ)(z.Z,{color:m.TV.accentPositiveDefault})})}function e8(e){var t=e.isInRecoveryMode,n=e.isCollapsed,r=e.setIsCollapsed,i=e.taskName,o=e.duration,a=e.isDone,c=e.hasError,s=e.errorMessage,f=e.startTime,p=e.activeUsers,h=e.openPane,g=e.openedPorts,v=e.onAIChatClick,y=e.stopTask,b=e3(f);return(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,onDoubleClick:function(){return r(!n)},children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:n?"Expand":"Collapse",onClick:function(){return r(!n)},children:n?(0,l.tZ)(V.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:i,css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!g&&g.length>0,onClick:v}),(0,l.tZ)(el,{openPane:h,openedPorts:g}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:[o?(0,l.tZ)(X.u,{tooltip:"".concat(Math.round(o).toLocaleString(),"ms"),children:o<1e3?"".concat(Math.floor(o),"ms"):o<6e4?"".concat(Math.floor(o/1e3),"s"):"".concat(Math.floor(o/6e4),"m")}):null,o?"".concat("\xa0","on").concat("\xa0"):null,b]}),p.length>0?(0,l.tZ)(d.G,{css:e2.avatarWrapper,children:p.map(function(e){return(0,l.tZ)(eO.Z,{user:e,size:16},e.id)})}):null,(0,l.tZ)(e4,{isDone:a,stopTask:y,hasError:c,errorMessage:s}),!0===t?(0,l.tZ)(X.u,{tooltip:"The nix environment failed to build. Check if your .replit and replit.nix files are configured properly. For more information look into /run/replit/env/error.",children:(0,l.tZ)(q.Z,{color:m.TV.accentNegativeDefault})}):null]})]})}var e6={noScroll:!0};function e5(e){var t=e.taskIdx,n=e.runId,r=e.connectToTask,c=e.disconnectFromTask,s=e.maxHeight,u=e.scrollParent,f=e.scrollPosition,p=e.openPane,h=e.openAIWithMessage,m=(0,eh.fB)({maxHeight:s,openFile:function(){},listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:function(){}}),g=m.visibleHeight,v=m.visibleLines,y=m.bufferHeight,b=m.bufferLines,Z=m.wrapperResizeRef,x=m.hasScrollback,C=m.xterm,k=m.xtermRef,S=(0,w.useMemo)(function(){return null==C?void 0:C._term},[C]),_=(0,w.useMemo)(function(){var e,t=null==S?void 0:S._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[S]),T=(0,w.useRef)(!1),E=(0,o._)((0,w.useState)(null),2),R=E[0],D=E[1],I=(0,w.useRef)(null),B=(0,o._)((0,w.useState)(!1),2),A=B[0],P=B[1],G=(0,w.useRef)(null);(0,w.useEffect)(function(){return function(){null!==G.current&&clearTimeout(G.current)}},[G]),(0,w.useEffect)(function(){if(S){if(f<1||!x){S.scrollToLine(0);return}var e=y-g,t=b-v;if(e<1){S.scrollToLine(0);return}S.scrollToLine(Math.round(f/e*t))}},[y,b,x,f,S,g,v]),(0,w.useEffect)(function(){function e(){return(e=(0,i._)(function(){var e,t,n,i,l,c,s,u,d,f,p;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(T.current||!C||!R)return[2];return[4,r()];case 1:n=(t=o._.apply(void 0,[a.sent(),2]))[0],i=t[1],T.current=!0,I.current=n,null===(e=I.current)||void 0===e||e.push({$kind:"resize",size:C.getSize()}),l=!1,c=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,eP._)(i),a.label=3;case 3:return[4,u.next()];case 4:if(!(l=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok){if("UNEXPECTED_DISCONNECT"===f.payload.code||"NO_MATCHING_TASK_STATE"===f.payload.code)return[3,6];throw Error("[".concat(f.payload.code,"] ").concat(f.payload.message))}"output"===f.payload.$kind&&R(f.payload.chunk),a.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return p=a.sent(),c=!0,s=p,[3,13];case 8:if(a.trys.push([8,,11,12]),!(l&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){T.current=!1}},[r,n,t,R,C]),(0,w.useEffect)(function(){return function(){c()}},[c]);var L=(0,w.useCallback)(function(e){return D(function(){return e}),function(){}},[]),N=(0,o._)((0,w.useState)(!1),2),O=N[0],U=N[1],M=(0,o._)((0,w.useState)(""),2),X=M[0],F=M[1],W=(0,w.useCallback)(function(e){p({type:"searchReplace",data:{initialQuery:e}},!0)},[p]),V=(0,em.av)().onContextMenu,H=(0,eg.j)({xterm:C,isOutputsTerminal:!0,openAIWithMessage:h,openShellSearch:function(e){U(!0),F(e)},openSearchAndReplace:W}),z=(0,w.useCallback)(function(){if(S){var e=S.getSelectionPosition();e&&u(e.start.y*_.height-s/2)}},[S,s,u,_.height]);return(0,l.BX)(eh.VU,{xterm:C,wrapperResizeRef:Z,bufferHeight:y,onInput:function(e){var t,n=new Uint8Array(e$.from(e));null===(t=I.current)||void 0===t||t.push({$kind:"stdin",stdin:n})},onMessage:L,onResizeTerminal:function(e){var t;null===(t=I.current)||void 0===t||t.push({$kind:"resize",size:e})},onFocus:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"focused"})},onBlur:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"blurred"})},style:{pointerEvents:A?"none":"all"},onWheel:function(){P(!0),G.current&&clearTimeout(G.current),G.current=setTimeout(function(){P(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(U(!0),e.preventDefault())},children:[O?(0,l.tZ)(d.G,{css:e2.searchWidget,children:(0,l.tZ)(ev.R,{searchValue:X,setSearchValue:F,findPrevious:function(e){(null==C?void 0:C.findPrevious(e,e6))&&z()},findNext:function(e){(null==C?void 0:C.findNext(e,e6))&&z()},exit:function(){return U(!1)}})}):null,(0,l.tZ)(eh.UB,{xtermRef:k,visibleHeight:g,maxHeight:s,css:e2.terminal,onContextMenu:function(e){return V(e,{command:H})}})]})}function e7(e){var t,n,r,i,a,c,s=e.runId,u=e.taskIdx,d=e.task,f=e.config,p=e.isInRecoveryMode,h=e.isCollapsed,m=e.setIsCollapsed,g=e.openPane,v=e.openedPorts,y=e.onAIChatClick,b="FINISHED"===d.state||"FAILED"===d.state,Z=d.startTime,x=b?d.endTime:void 0,C=(0,eN.aG)(),k=(0,w.useMemo)(function(){return d.userIds.map(function(e){return C.find(function(t){return t.id===e})}).filter(Boolean)},[d,C]),S=(t=!b,r=(n=(0,o._)((0,w.useState)(function(){return Date.now()}),2))[0],i=n[1],(0,w.useEffect)(function(){if(t){var e=setInterval(function(){i(Date.now())},100);return function(){clearInterval(e)}}},[t]),r);Z&&x?c=x-Z:b||(c=S-Z);var _="shell.exec"===f.task&&"args"in f?f.args:f.task,T=(0,eU.U)(function(e){return function(){e.workflows.stopTask.rpc({runId:s,taskIdx:u})}},[s,u]);return(0,l.tZ)(e8,{isCollapsed:h,setIsCollapsed:m,taskName:_,duration:c,isInRecoveryMode:p,isDone:b,hasError:"FAILED"===d.state,errorMessage:"FAILED"===d.state?null===(a=d.result)||void 0===a?void 0:a.message:void 0,startTime:d.startTime,activeUsers:k,openPane:g,openedPorts:v,stopTask:null!=T?T:void 0,onAIChatClick:y})}function e9(e){var t,n,r,c,s,u=e.task,f=e.taskIdx,p=e.runId,h=e.config,m=e.maxHeight,g=e.rootRef,v=e.currentUser,y=e.ports,b=e.openAIWithMessage,k=e.openPane,T=e.onDoExposePort,R=e.onDontExposePort,D=(0,w.useRef)(null),A=(0,o._)((0,w.useState)(!0),2),G=A[0],N=A[1],O=(0,o._)((0,w.useState)(!1),2),U=O[0],M=O[1],X=(0,o._)((0,w.useState)(0),2),F=X[0],W=X[1],V=(0,P.f)(),H=(0,S.Z)(G,U?6e4:500),z=null!==(c=(null===(t=u.metadata)||void 0===t?void 0:t.task)==="shell.exec"&&u.metadata.isInRecoveryMode)&&void 0!==c&&c,j=(0,I.r4)(y,(null===(n=u.metadata)||void 0===n?void 0:n.task)==="shell.exec"?null===(r=u.metadata)||void 0===r?void 0:r.cgroupPath:void 0),q=(0,o._)((0,w.useState)(B.MZ.EXPANDED),2),J=eX({maxHeight:m,visualState:q[0],onSetVisualState:q[1]}),Y=J.collapsedStep,K=J.isCollapsed,Q=J.setIsCollapsed,ee=J.blockWrapperRef,et=J.blockWrapperProps,en=J.blockResizeRef,er=J.measuredBlockHeight;(0,w.useEffect)(function(){if(g.current){var e,t=g.current,n=function(){var n,r;W(Math.max(0,t.scrollTop-(null!==(r=null===(n=D.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),M(!0),e&&clearTimeout(e),e=setTimeout(function(){M(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[g,D]),(0,w.useEffect)(function(){if(D.current&&g.current)return(0,E.j)(D.current,function(){return N(!0),function(){N(!1)}},{root:g.current,threshold:0})},[g,D]);var ei=(0,eU.U)(function(e){return function(){return e.workflows.connectToTask.stream({runId:p,taskIdx:f,userId:v.id,processViewId:eK})}},[p,f,v]),eo=(0,eU.U)(function(e){return function(){return e.workflows.disconnectFromTask.rpc({runId:p,taskIdx:f,userId:v.id,processViewId:eK})}},[p,f,v]),ea=(0,eU.U)(function(e){return(0,i._)(function(){var t,n,r,i,l,c,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.workflows.readTaskBuffer.subscribe({runId:p,taskIdx:f})];case 1:t=o._.apply(void 0,[a.sent(),1])[0],n=new Uint8Array([]),r=!1,i=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),c=(0,eP._)(t),a.label=3;case 3:return[4,c.next()];case 4:if(!(r=!(s=a.sent()).done))return[3,6];if(!(u=s.value).ok)throw Error(u.payload.code+": "+u.payload.message);"output"===u.payload.$kind&&(n=e$.concat([n,u.payload.chunk])),"finished"===u.payload.$kind&&b((0,$.Rn)(n.toString())),a.label=5;case 5:return r=!1,[3,3];case 6:return[3,13];case 7:return d=a.sent(),i=!0,l=d,[3,13];case 8:if(a.trys.push([8,,11,12]),!(r&&null!=c.return))return[3,10];return[4,c.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(i)throw l;return[7];case 12:return[7];case 13:return[2]}})})}),el=(0,o._)((0,w.useState)(0),2),ec=el[0],es=el[1],eu=(0,_.Z)(function(e){var t=e.height;"expanded"===Y&&es(t)},{type:"debounce",wait:200}),ed=(0,w.useCallback)(function(){k({type:"networking"},!0)},[k]),ef=(0,w.useCallback)(function(e,t){k({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[k]),ep=(0,w.useCallback)(function(){k({type:"envEditor"})},[k]),em="FINISHED"===u.state||"FAILED"===u.state,eg=!1;return("collapsed"===Y?eg=!1:(!em||H)&&(eg=!0),ei&&eo)?(0,l.BX)(d.G,{innerRef:D,children:[(0,l.tZ)(e7,{runId:p,taskIdx:f,task:u,config:h,isInRecoveryMode:z,isCollapsed:K,setIsCollapsed:Q,openPane:k,openedPorts:j,onAIChatClick:function(){return null==ea?void 0:ea()}}),(0,l.BX)(d.G,{innerRef:eu,style:{position:"sticky",top:28},children:[(0,l.tZ)(eJ,{onClick:ep}),(0,l.tZ)(L.ms,{configurations:j.map(function(e){return e.configuration}),openWebview:function(){ef("/",j[0].configuration.localPort)},openNetworkingTool:ed,onDontExposePort:function(){1===j.length&&R(j[0].configuration.localPort)},onDoExposePort:function(){1===j.length&&T(j[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,C._)((0,x._)({ref:ee},et),{children:(0,l.tZ)(d.G,{css:e2.outputBlockTerminalWrapper,style:(s={},(0,Z._)(s,e0.blockMinHeight,er+"px"),(0,Z._)(s,e0.terminalBackgroundColor,null==V?void 0:V.background),(0,Z._)(s,eh.Dq.topOffset,28+ec+"px"),s),children:eg?(0,l.tZ)(d.G,{innerRef:en,children:(0,l.tZ)(e5,{taskIdx:f,runId:p,maxHeight:m-28-ec,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=D.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=g.current)||void 0===n||n.scrollTo({top:i})},scrollPosition:F,connectToTask:ei,disconnectFromTask:eo,openPane:k,openAIWithMessage:b})}):(0,l.tZ)(eV,{targetHeight:null!=er?er:0})})})),(0,l.tZ)(d.G,{css:e2.outputBlockClosingBorder})]}):null}function te(e){var t=(0,w.useCallback)(function(){e.openPane({type:"dependencies"},!0)},[e]),n=e3(e.task.startTime),r=e.task.metadata;return((null==r?void 0:r.task)==="packager.installForAll"||(null==r?void 0:r.task)==="packager.installForLanguage")&&(null==r?void 0:r.hasUserFacingOutput)===!0?(0,l.tZ)(e9,(0,x._)({},e)):(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,children:[(0,l.tZ)(U.hU,{alt:"Open Packager",onClick:t,children:(0,l.tZ)(eG.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:"Packager",css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:n}),(0,l.tZ)(X.u,{tooltip:"Finished",children:(0,l.tZ)(F.Z,{})})]})]})}function tt(e){var t=e.task,n=e.config,r=e.openPane,i=n.args,o=e3(t.startTime),a=(0,w.useCallback)(function(){r({type:"webview",data:{portType:"local",port:i}},!0)},[r,i]);return(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,children:[(0,l.tZ)(U.hU,{alt:"Open Webview",onClick:a,children:(0,l.tZ)(eY.Z,{})}),(0,l.tZ)(M.D,{color:"grey",text:":".concat(i),css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:o}),(0,l.tZ)(X.u,{tooltip:"Finished",children:(0,l.tZ)(F.Z,{})})]})]})}function tn(e){var t=(0,eL.x)();if(!t)return null;var n=e.config.task;switch(n){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":return(0,l.tZ)(e9,(0,C._)((0,x._)({},e),{currentUser:t}));case"packager.installForLanguage":case"packager.installForAll":return(0,l.tZ)(te,(0,C._)((0,x._)({},e),{currentUser:t}));case"workspace.openWebview":return(0,l.tZ)(tt,(0,C._)((0,x._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,K.Z)(n)}}var tr=n(24810),ti=(0,T.$)(["blockMinHeight","terminalBackgroundColor"]),to=ti.cssVars,ta=ti.styleTokens,tl=(0,f.X)({outputsListParent:[m.l0.height("100%"),m.l0.overflow("hidden"),m.l0.borderRadius(0,0,8,8)],outputsListWrapper:[m.l0.height("100%")],outputsList:[m.l0.height("100%"),m.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[m.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[m.l0.minHeight(ta.blockMinHeight)],outputBlockTerminalWrapper:[m.l0.minHeight(ta.blockMinHeight),{backgroundColor:ta.terminalBackgroundColor}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}]});function tc(e){var t,n=e.onInput,r=e.openFile,i=e.openPane,a=e.openAIWithMessage,c=e.openSearchAndReplace,s=e.openSecretsPane,u=e.listFiles,f=e.autoFocus,p=e.rootRef,h=e.maxHeight,m=e.onResizeTerminal,g=e.isDone,v=e.data,y=e.error,b=e.localStartTime,k=e.localEndTime,T=e.startTime,R=e.endTime,D=e.type,A=e.visualState,G=e.onSetVisualState,N=e.ports,O=e.onDontExposePort,U=e.onDoExposePort,M=e.performPaneOperation,X=(0,w.useRef)(null),F=(0,o._)((0,w.useState)(!0),2),W=F[0],V=F[1],H=(0,o._)((0,w.useState)(!1),2),z=H[0],j=H[1],q=(0,o._)((0,w.useState)(0),2),J=q[0],Y=q[1],$=(0,P.f)(),K=(0,S.Z)(W,z?6e4:500),Q=(0,I.r4)(N,D===B.kH.EXECUTION?v.cgroup:void 0),ee=(0,o._)((0,w.useState)(0),2),et=ee[0],en=ee[1],er=(0,w.useCallback)(function(e,t){i({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[i]),ei=eX({maxHeight:h,visualState:A,onSetVisualState:G}),eo=ei.collapsedStep,ea=ei.isCollapsed,el=ei.setIsCollapsed,ec=ei.blockWrapperRef,es=ei.blockWrapperProps,eu=ei.blockResizeRef,ed=ei.measuredBlockHeight;(0,tr.Z)({sendInput:function(e){return n(e),!0},paste:function(){return!1}}),(0,w.useEffect)(function(){if(p.current){var e,t=p.current,n=function(){var n,r;Y(Math.max(0,t.scrollTop-(null!==(r=null===(n=X.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),j(!0),e&&clearTimeout(e),e=setTimeout(function(){j(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[p,X]),(0,w.useEffect)(function(){if(X.current&&p.current)return(0,E.j)(X.current,function(){return V(!0),function(){V(!1)}},{root:p.current,threshold:0})},[p,X]);var ef=(0,_.Z)(function(e){var t=e.height;"expanded"===eo&&en(t)},{type:"debounce",wait:200}),em=!1;return"collapsed"===eo?em=!1:(!g||K)&&(em=!0),(0,l.BX)(d.G,{innerRef:X,children:[(0,l.tZ)(ep,{isCollapsed:ea,setIsCollapsed:el,openPane:i,isDone:g,data:v,localStartTime:b,localEndTime:k,startTime:T,endTime:R,type:D,error:y,openedPorts:Q,openAIWithMessage:a}),(0,l.BX)(d.G,{innerRef:ef,style:{position:"sticky",top:28},children:[(0,l.tZ)(eJ,{onClick:s}),(0,l.tZ)(L.ms,{configurations:Q.map(function(e){return e.configuration}),openWebview:function(){er("/",Q[0].configuration.localPort)},openNetworkingTool:function(){i({type:"networking"},!0)},onDontExposePort:function(){1===Q.length&&O(Q[0].configuration.localPort)},onDoExposePort:function(){1===Q.length&&U(Q[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,C._)((0,x._)({ref:ec},es),{children:(0,l.tZ)(d.G,{css:tl.outputBlockTerminalWrapper,style:(t={},(0,Z._)(t,to.blockMinHeight,ed+"px"),(0,Z._)(t,to.terminalBackgroundColor,null==$?void 0:$.background),(0,Z._)(t,eh.Dq.topOffset,28+et+"px"),t),children:em?(0,l.tZ)(d.G,{innerRef:eu,children:(0,l.tZ)(eC,{onMessage:v.onMessage,onInput:n,openFile:r,openAIWithMessage:a,openSearchAndReplace:c,openWebview:er,listFiles:u,maxHeight:h-28-et,onResizeTerminal:m,scrollPosition:J,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=X.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=p.current)||void 0===n||n.scrollTo({top:i})},autoFocus:f,performPaneOperation:M})}):(0,l.tZ)(eV,{targetHeight:null!=ed?ed:0})})})),(0,l.tZ)(d.G,{css:tl.outputBlockClosingBorder})]})}function ts(e){var t=e.performPaneOperation,n=e.isActive,r=e.runner,i=e.ports,a=e.listFiles,c=e.sessionId,s=e.openAIWithMessage,u=e.onDontExposePort,f=e.onDoExposePort,p=(0,o._)((0,w.useState)([]),2),h=p[0],m=p[1],g=(0,o._)((0,w.useState)(0),2),v=g[0],b=g[1],Z=(0,o._)((0,w.useState)(!0),2),x=Z[0],C=Z[1],S=(0,w.useRef)(null),T=(0,A.Do)(D.Q.id,D.y.Output),E=(0,o._)((0,w.useState)(!1),2),I=E[0],P=E[1],L=(0,w.useRef)(0),N=(0,R.T3)(),O=(0,eE.QF)(),U=(0,w.useMemo)(function(){return O?Object.entries(O).flatMap(function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return r.tasks.filter(function(e){return e.state!==eA.PX.NOT_STARTED}).map(function(e,t){return{task:e,taskIdx:t,runId:n,config:r.workflow.tasks[t]}})}).sort(function(e,t){return e.task.startTime-t.task.startTime}):[]},[O]),M=(0,_.Z)(function(e){b(e.height)},{type:"throttle",wait:200}),X=(0,w.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:(0,y.Dp)(e),data:e}})},[t]),F=(0,w.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({operation:"open",secondary:n,pane:e})},[t]),W=(0,w.useCallback)(function(){t({operation:"open",secondary:!1,pane:{type:"envEditor"}})},[t]),V=(0,w.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[t]),H=(0,w.useCallback)(function(e){s(e),c&&t({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:c}}})},[t,s,c]);return(0,w.useEffect)(function(){return r.onStateChanged(function(e){P(e===B.Ah.BEFORE_RUN)})},[r]),(0,w.useEffect)(function(){m(r.getOutputBlocks())},[r]),(0,w.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){m(e)}),t=r.onBlockChanged(function(e){!h.find(function(t){return t.id===e.id})&&S.current&&(S.current.scrollTo(0,S.current.scrollHeight),C(!0)),m((0,G.Uy)(function(t){var n=t.findIndex(function(t){return t.id===e.id});n>=0?t[n]=e:t.push(e)}))});return function(){t(),e()}},[r,h,S]),(0,l.BX)(d.G,{css:tl.outputsListParent,innerRef:T,children:[I?(0,l.tZ)(k.Z,{}):null,(0,l.BX)(d.G,{css:tl.outputsListWrapper,innerRef:M,children:[0===h.length&&0===U.length?(0,l.tZ)(eB,{runner:r}):null,(0,l.BX)(d.G,{css:[tl.outputsList,x&&tl.outputsListSnapToBottom],innerRef:S,onScroll:function(){S.current&&(S.current.scrollTop<L.current?C(!1):C(S.current.scrollHeight-S.current.scrollTop-20<v),L.current=S.current.scrollTop)},children:[h.map(function(e,o){var c=o===h.length-1;return(0,l.tZ)(tc,{rootRef:S,maxHeight:v,onInput:function(e){var t=r.getRunState();(t===B.Ah.IDLE||t===B.Ah.RUNNING)&&r.sendInput(e)},openFile:X,openAIWithMessage:H,openSearchAndReplace:V,openPane:F,openSecretsPane:W,listFiles:a,onResizeTerminal:function(t){e.isDone||e.type!==B.kH.EXECUTION||r.resizeTerminalForBlock(e.id,t)},autoFocus:n&&c&&!N,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(t){return r.setBlockVisualState(e.id,t)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,ports:i,onDontExposePort:u,onDoExposePort:f,performPaneOperation:t},e.id)}),U.map(function(e){return(0,l.tZ)(tn,{task:e.task,taskIdx:e.taskIdx,runId:e.runId,config:e.config,maxHeight:v,rootRef:S,ports:i,openPane:F,openAIWithMessage:H,onDoExposePort:f,onDontExposePort:u},e.runId+"-"+e.taskIdx)}),x?(0,l.tZ)(d.G,{css:tl.scrollSnap}):null]})]})]})}var tu=n(54236),td=n(96949),tf=n(28065),tp=c.Dy.Object({type:c.Dy.Literal("runnerOutput")}),th={id:"outputs.clear",name:"Clear console history",default:void 0};function tm(e){var t,n,r,c,s,u,d,f=e.runner,p=e.options,m=(n=(t=(0,g.Z)()).fs,r=t.ports,c=(0,eU.U)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),s=(0,w.useMemo)(function(){return[{type:"action",label:"Clear history",icon:(0,l.tZ)(h.Z,{}),run:function(){c&&c(),f.clearBlockHistory()}}]},[f,c]),(0,b.L5)(function(){return{actions:s,type:"runnerOutput",startBlock:f.startBlock,endBlock:f.endBlock,writeOutputToBlock:f.writeOutputToBlock,writeErrorToBlock:f.writeErrorToBlock}},[f,s]),(0,v.Il)(function(){return[th.id,f.clearBlockHistory]},[f]),u=(0,w.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onDoExposePort:(0,w.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:u,ports:r,fs:n}),y=m.ports,Z=m.fs,x=m.onDontExposePort,C=m.onDoExposePort,k=(0,o._)((0,w.useState)(""),2),S=k[0],_=k[1],T=(0,tu.bD)({onSession:function(e){_(e),p.performPaneOperation({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,E=(0,o._)((0,tu.Ni)(),1)[0],R=(0,w.useCallback)((d=(0,i._)(function(e){return(0,a.Jh)(this,function(t){return(0,td.j)(td.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:E,user_model_selection:E,message_content:e,message_source:"console"}),T({kind:"message",message:e,intent:tu.$h.EXPLAIN,model:"advanced"===E?tu.BY.ADVANCED:tu.BY.BASIC}),[2]})}),function(e){return d.apply(this,arguments)}),[E,T]);return(0,l.tZ)(ts,{runner:f,ports:y,listFiles:Z.listFiles,isActive:p.isActive,performPaneOperation:p.performPaneOperation,sessionId:S,openAIWithMessage:R,onDontExposePort:x,onDoExposePort:C})}var tg=(0,f.X)({unavailable:[m.l0.p(8)]}),tv={Content:function(e){var t=e.options,n=(0,g.Z)().runner;return"outputs"!==n.mode?(0,l.tZ)(d.G,{css:tg.unavailable,children:(0,l.tZ)(u.xv,{children:"Console is not available."})}):(0,l.tZ)(tm,{options:t,runner:n})},Icon:function(e){var t=e.size;return(0,l.tZ)(tf.Pd.Provider,{value:{color:m.TV.yellowStrongest,size:t},children:(0,l.tZ)(p.Z,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:y.hc.WorkspaceFeatures,decode:function(e){return s.B4.Decode(tp,e)}}},31797:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(3796),i=n(93245),o=n(54300),a=n(71711),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},category:n(25949).hc.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},237:function(e,t,n){n.d(t,{J:function(){return w},R:function(){return Z}});var r=n(66626),i=n(3796),o=n(74044),a=n(99149),l=n(79685),c=n(28065),s=n(36259),u=n(12666),d=n(23882),f=n(73452),p=n(87061),h=n(38822),m=n(75834),g=n(25949),v=n(75271),y=n(97420),b=o.Dy.Object({type:o.Dy.Literal("webview"),data:o.Dy.Optional(o.Dy.Union([o.Dy.Object({portType:o.Dy.Literal("local"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())}),o.Dy.Object({portType:o.Dy.Literal("external"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())})]))}),w=function(e){return a.B4.Decode(b,e)},Z={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,o=(0,d.Z)(),a=o.container,c=o.runner,s=o.ports,g=(0,l.T)(),y=(0,r._)((0,v.useState)(function(){return function(){}}),2),b=y[0],w=y[1],Z=(0,u.bg)(s),x=g?f.oB:(0,f.Cl)(t,Z);(0,h.Z)({container:a,runner:c,refreshWebView:b}),(0,m.Z)({runner:c,refreshWebView:b});var C=(0,v.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return void 0===x?(0,i.tZ)(p.Z,{openNetworkingTool:C}):(0,i.tZ)(f.U8,{initialPort:x,initialPath:null==t?void 0:t.path,openPane:function(e){n({operation:"open",pane:e})},openNetworkingTool:C,setRefreshCb:w,ports:s,container:a})},Icon:function(e){var t=e.size;return(0,i.tZ)(c.Pd.Provider,{value:{color:y.TV.foregroundDimmer,size:t},children:(0,i.tZ)(s.Z,{})})},getTitle:function(){return"Webview"},description:"Preview your Repl as a web application",category:g.hc.WorkspaceFeatures,decode:w}},74945:function(e,t,n){n.d(t,{U:function(){return g4}});var r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,S,_,T,E,R,D,I,B,A,P,G,L=n(66626),N=n(63257),O=n(3796),U=n(74044),M=n(99149),X=n(9602),F=n(87915),W=n(24766),V=n(93245),H=n(36809),z=n(47874),j=n(10578),q=n(63163),J=n(23882),Y=n(99319),$=n(25949),K=n(19236),Q=n(75271),ee=n(35370),et=(0,H.X)({text:{width:"100%",textAlign:"center"},loaderContainer:[q.l0.display.flex,q.l0.center,q.l0.height("100%")]}),en=U.Dy.Object({type:U.Dy.Literal("binary"),data:U.Dy.Object({path:U.Dy.String()})}),er={Content:function(e){var t=e.pane,n=e.options;return(0,O.tZ)(ei,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,O.tZ)(F.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,ee.UO)(e.data.path)},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(en,e)}};function ei(e){var t=e.path,n=e.performPaneOperation,r=(0,J.Z)().fs,i=(0,Y.Mp)({path:t,performPaneOperation:n});(0,K.L5)(function(){if(i)return{commands:i?(0,N._)(i):[]}},[i]);var o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1],c=(0,L._)((0,Q.useState)(!0),2),s=c[0],u=c[1];return((0,Q.useEffect)(function(){var e=r.watchFile(t,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,t]),s)?(0,O.tZ)(V.G,{css:et.loaderContainer,children:(0,O.tZ)(j.Z,{})}):null===a?(0,O.tZ)(W.xv,{multiline:!1,children:"Failed to load binary file"}):(0,O.BX)(O.HY,{children:[(0,O.tZ)(Y.HK,{path:t,performPaneOperation:n}),(0,O.BX)(Y.VY,{centered:!0,children:[(0,O.tZ)(W.xv,{css:et.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,O.tZ)(X.hU,{alt:"Download",css:[q.l0.position.absolute,q.l0.bottom(8),q.l0.right(8),q.l0.p(16)],children:(0,O.tZ)("a",{href:"data:text/plain;base64,".concat(a),download:(0,ee.UO)(t),css:[q.l0.color.foregroundDimmer],children:(0,O.tZ)(z.Z,{})})})]})]})}var eo=n(76132),ea=n(19621),el=n(39808),ec=n(13850),es=n(12394),eu=n(24200),ed=n(68140),ef=n(83059),ep=n(41733),eh=n(30509),em=n(78950),eg=n(44935),ev=n(54505),ey=n(79904),eb=n(14548),ew=n(30231),eZ=n(6674),ex=n(12379),eC=(0,H.X)({button:{width:"fit-content"}});function ek(e){var t=e.code,n=e.activeFile,r=(0,ex.Z)(n),i=r?{text:"Insert",iconRight:(0,O.tZ)(ew.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,O.tZ)(eZ.Z,{}),onClick:function(){return(0,ev.Z)(t)}};return(0,O.tZ)(eb.Tg,{background:"default",children:(0,O.tZ)(ey.zx,(0,ep._)({size:"small",variant:"outlined",css:eC.button},i))})}var eS=(0,H.X)({self:q.l0.colWithGap(4),content:[q.l0.rowWithGap(4),q.l0.backgroundColor.backgroundRoot,q.l0.borderRadius(4),q.l0.p(4),q.l0.align.center,{width:"fit-content"}]});function e_(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,L._)((0,Q.useState)(n),2),o=i[0],a=i[1];return(0,O.BX)(V.G,{css:eS.self,children:[(0,O.tZ)(eB,{title:t}),(0,O.tZ)(V.G,{css:eS.content,children:o.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,O.tZ)(eE,{i:n,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,O.tZ)(eD,{value:e.value},r)})}),(0,O.tZ)(ek,{code:o.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var eT=(0,H.X)({self:[q.l0.width(64),q.l0.height(24),q.l0.zIndex(1)]});function eE(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,O.tZ)(eg.II,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,eh._)((0,ep._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:eT.self})}var eR=(0,H.X)({self:[q.l0.borderRadius(0),q.l0.backgroundColor.backgroundRoot],code:[q.l0.font.code,q.l0.color.greyStronger,q.l0.p(4)]});function eD(e){var t=e.value;return(0,O.tZ)(V.G,{css:eR.self,children:(0,O.tZ)(W.xv,{css:eR.code,multiline:!1,children:t})})}var eI=(0,H.X)({self:q.l0.rowWithGap(4),bold:{fontWeight:q.TV.fontWeightMedium}});function eB(e){var t=e.title,n=(0,L._)((0,ef.Z)(function(){var e=(0,em._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,O.BX)(V.G,{css:eI.self,children:[(0,O.tZ)(W.xv,{css:eI.bold,multiline:!1,children:r}),(0,O.tZ)(W.xv,{color:"dimmer",multiline:!1,children:i})]})}(r=v||(v={})).IMPORT="Import the database",r.CREATE="Create a new database",r.SET="Set a key to a value",r.GET="Get a key's value",r.DELETE="Delete a key",r.LIST="List all keys",r.LIST_PREFIX="List keys with a prefix";var eA={language:"Bash",methods:[eN("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),eN("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),eN("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),eN("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},eP={language:"Node",methods:[eN("Import the database",'const Database = require("@replit/database")'),eN("Create a new database","const db = new Database()"),eN("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),eN("Get a key's value",'db.get("{{key}}").then(value => {})'),eN("Delete a key",'db.delete("{{key}}").then(() => {})'),eN("List all keys","db.list().then(keys => {})"),eN("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},eG={language:"Go",methods:[eN("Import the database",'import "github.com/replit/database-go"'),eN("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),eN("Get a key's value",'value, _ := database.Get("{{key}}")'),eN("Delete a key",'database.Delete("{{key}}")'),eN("List all keys",'keys, _ := database.ListKeys("")'),eN("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},eL={language:"Python",methods:[eN("Import the database","from replit import db"),eN("Set a key to a value",'db["{{key}}"] = "{{value}}"'),eN("Get a key's value",'db["{{key}}"]'),eN("Delete a key",'del db["{{key}}"]'),eN("List all keys","keys = db.keys()"),eN("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function eN(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var eO=(0,H.X)({self:q.l0.colWithGap(24),code:[q.l0.font.code,q.l0.color.greyStronger,q.l0.backgroundColor.backgroundRoot,q.l0.p(4),q.l0.borderRadius(4)]});function eU(e){var t=e.activeFile,n=(0,ef.Z)(function(){return function(e){switch(e?(0,ee.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return eP;case"go":return eG;case"py":return eL;default:return eA}}(t)},[t]);return(0,O.BX)(V.G,{css:eO.self,children:[(0,O.BX)(W.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. Weve set an environment variable called ",(0,O.tZ)("code",{css:eO.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,O.tZ)(e_,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var eM=n(61989),eX=(0,H.X)({children:[q.l0.p(12),q.l0.colWithGap(8)]});function eF(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,O.tZ)(eM.Q,{defaultExpanded:n,headerContent:(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,O.tZ)(V.G,{css:eX.children,children:r})})}var eW=n(62279),eV=n(71051),eH=n(35820),ez=n(46321),ej=(0,eW.F4)("from{opacity:0}to{opacity:1}"),eq=(0,H.X)({self:[q.l0.colWithGap(8),{animation:"".concat(ej," 100ms forwards ease-in-out alternate")}],selfLoadingText:[q.l0.height(16),q.l0.width(48),q.l0.borderRadius(4),eH.p.backgroundPulse()],selfLoading:[q.l0.height(12),q.l0.borderRadius(16),eH.p.backgroundPulse()],text:[q.l0.rowWithGap(4),{display:"inline-flex"}],textSpan:[q.l0.width("fit-content"),q.l0.display.inlineFlex]});function eJ(e){var t,n,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(t=1e6*(t=o)/1048576,"".concat(t.toFixed(),"/50 MiB")),l=i||!r;return(0,O.tZ)(V.G,{css:eq.self,children:l?(0,O.BX)(O.HY,{children:[(0,O.tZ)(V.G,{css:eq.selfLoadingText}),(0,O.tZ)(V.G,{css:eq.selfLoading})]}):(0,O.BX)(O.HY,{children:[(0,O.BX)(W.xv,{color:"dimmer",css:eq.text,multiline:!1,children:[(0,O.tZ)(V.K.span,{css:eq.textSpan,children:a}),(0,O.tZ)(V.K.span,{css:eq.textSpan,children:"|"}),(0,O.tZ)(V.K.span,{css:eq.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,eV.Z)("key",n)))})]}),(0,O.tZ)(ez.J,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}var eY=n(16155),e$=n(21262),eK=n(71440),eQ=n(9122);function e0(){var e=(0,e$._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return e0=function(){return e},e}function e1(){var e=(0,e$._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return e1=function(){return e},e}var e2={},e3=(0,eK.Ps)(e0()),e4=(0,eK.Ps)(e1(),e3),e8=n(22893),e6=(0,H.X)({sectionWrapper:[q.l0.colWithGap(16),q.l0.width("100%"),q.l0.maxWidth(450)]});function e5(e){var t,n,r,i,o,a,l,c,s,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,eY.Z)()},pollInterval:1e4},o=(0,ep._)({},e2,i),a=eQ.a(e4,o)).data,c=a.error,s=a.loading,l&&("Repl"===l.repl.__typename?n=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info"),c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message),{db:n,loading:s,error:t}),f=d.db,p=d.error,h=d.loading,m=(0,eu.R3)(),g=(0,$.Se)().getTitle({type:"database"});return(0,O.tZ)(es.Z,{pane:{type:"database"},headerText:g,action:(0,O.BX)(V.G,{css:e6.sectionWrapper,children:[p?(0,O.tZ)(e8.E,{colorway:"negative",text:p}):null,(0,O.tZ)(eF,{title:"Storage capacity",children:(0,O.tZ)(eJ,{database:f,loading:h})}),(0,O.tZ)(eF,{title:"How to use the database",children:(0,O.tZ)(eU,{activeFile:m})}),(0,O.tZ)(e7,{performPaneOperation:u})]})})}function e7(e){var t=e.performPaneOperation;return(0,O.tZ)(el.Z,{href:ed.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),t({operation:"open",pane:{type:"docs",data:{url:ed.TT.REPL_DATABASE}}})},iconLeft:(0,O.tZ)(ec.Z,{}),text:"Learn more in the docs"})}var e9=n(28065),te=n(97420),tt=U.Dy.Object({type:U.Dy.Literal("database")}),tn={Content:function(e){var t=e.options.performPaneOperation;return(0,O.tZ)(e5,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.blurpleStronger,size:t},children:(0,O.tZ)(ea.Z,{})})},getTitle:function(){return"Database (Key/Value)"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:$.hc.CloudServices,decode:function(e){return M.B4.Decode(tt,e)}},tr=n(42516),ti=n(84082),to=n(80403),ta=n(52870),tl=n(98924),tc=n(33799),ts=n(3030),tu="rgba(180, 0, 0, 0.125)",td="rgba(0, 180, 0, 0.125)",tf=ts.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:td},"&.cm-merge-a .cm-changedLineGutter":{background:tu},"&.cm-merge-b .cm-changedText":{background:td,outline:"solid 1px ".concat(td),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:tu,outline:"solid 1px ".concat(tu),borderRadius:"2px"},".cm-collapsedLines":{color:te.TV.accentPrimaryStrongest,background:te.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:te.TV.accentPrimaryDimmer}}}),tp=[ts.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),ts.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],th=[to.Wl.highest(tp),tf],tm=n(82436),tg=n(91166),tv=n(75921),ty=n(52657);function tb(e){var t,n,r,i=e.a,o=e.b,a=e.style,l=e.className,c=(0,tl._)(e,["a","b","style","className"]),s=(0,L._)((0,Q.useState)(null),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(null),2),p=f[0],h=f[1],m=(0,Q.useRef)(!1),g=(0,ty.Z)(c),v=(0,ty.Z)(i.doc),y=(0,ty.Z)(o.doc),b=(0,tg.Xl)((0,eh._)((0,ep._)({},i),{readOnly:!0})),w=(0,tg.Xl)((0,eh._)((0,ep._)({},o),{readOnly:!0})),Z=(t=(0,L._)((0,Q.useState)(),2)[1],(0,Q.useCallback)(function(e){t(function(){throw e})},[])),x=c.orientation,C=c.revertControls,k=c.renderRevertControl,S=c.collapseUnchanged,_=c.gutter,T=c.highlightChanges,E=void 0!==S,R=null==S?void 0:S.margin,D=null==S?void 0:S.minSize,I=null!==(n=null==p?void 0:p.a)&&void 0!==n?n:null,B=null!==(r=null==p?void 0:p.b)&&void 0!==r?r:null;return(0,tg.uF)(),(0,Q.useEffect)(function(){var e=function(e){Z(e)};if(u){var t=null;try{t=new tc.QK((0,eh._)((0,ep._)({},g.current),{parent:u,a:{doc:v.current,extensions:[ts.tk.exceptionSink.of(e),th].concat((0,N._)(b))},b:{doc:y.current,extensions:[ts.tk.exceptionSink.of(e),th].concat((0,N._)(w))}}))}catch(t){e(t)}return t&&(h(t),m.current=!0),function(){if(t){h(null);try{t.destroy()}catch(t){e(t)}}}}},[u]),(0,Q.useEffect)(function(){I&&!m.current&&I.dispatch({changes:{from:0,to:I.state.doc.length,insert:i.doc}})},[I,i.doc]),(0,Q.useEffect)(function(){B&&!m.current&&B.dispatch({changes:{from:0,to:B.state.doc.length,insert:o.doc}})},[B,o.doc]),(0,Q.useEffect)(function(){p&&!m.current&&tw(p,g.current.collapseUnchanged)},[p,g,i.doc,o.doc]),(0,Q.useEffect)(function(){if(p&&!m.current){var e=E?{margin:R,minSize:D}:void 0;p.reconfigure({orientation:x,revertControls:C,renderRevertControl:k,collapseUnchanged:e,gutter:_,highlightChanges:T}),e&&tw(p,e)}},[p,x,C,k,E,R,D,_,T]),(0,tm.H)(I),(0,tm.H)(B),(0,Q.useEffect)(function(){m.current=!1}),(0,O.BX)(O.HY,{children:[(0,O.tZ)("div",{ref:d,className:l,style:a}),(0,O.tZ)(tv.N1,{view:I}),(0,O.tZ)(tv.N1,{view:B})]})}function tw(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,ep._)({},t)}))}var tZ=n(59489),tx=n(23522),tC=n(29737),tk=n(56763),tS=(0,H.X)({container:[q.l0.width(60),q.l0.height(24),q.l0.display.flex,q.l0.center,q.l0.borderRadius(4),q.l0.fontSize(q.TV.fontSizeSmall)]});function t_(e){var t,n,r;switch(e.type){case ti.hF.ADDED:case ti.hF.UNTRACKED:t="Added",n=q.TV.greenDimmest,r=q.TV.greenStrongest;break;case ti.hF.MODIFIED:t="Modified",n=q.TV.yellowDimmest,r=q.TV.yellowStrongest;break;case ti.hF.DELETED:t="Deleted",n=q.TV.redDimmest,r=q.TV.redStrongest;break;case ti.hF.RENAMED:t="Renamed",n=q.TV.tealDimmest,r=q.TV.tealStrongest;break;case ti.hF.COPIED:t="Copy",n=q.TV.limeDimmest,r=q.TV.limeStrongest;break;default:return null}return(0,O.tZ)(V.G,{style:{backgroundColor:n,color:r},css:tS.container,children:(0,O.tZ)("span",{children:t})})}function tT(e){var t,n,r;switch(e.type){case"ADDED":t="Added",n=q.TV.greenDimmest,r=q.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=q.TV.yellowDimmest,r=q.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=q.TV.redDimmest,r=q.TV.redStrongest;break;case"RENAMED":t="Renamed",n=q.TV.tealDimmest,r=q.TV.tealStrongest;break;case"COPIED":t="Copy",n=q.TV.limeDimmest,r=q.TV.limeStrongest;break;default:return null}return(0,O.tZ)(V.G,{style:{backgroundColor:n,color:r},css:tS.container,children:(0,O.tZ)("span",{children:t})})}var tE=n(57025),tR=[{"& > span:first-child-of-type":[q.l0.flex.grow(1),q.l0.textAlign.left]},{"& > span":[q.l0.flex.shrink(1)]},q.l0.height("auto"),q.l0.p(8),q.l0.fontWeight.medium,q.l0.backgroundColor.backgroundHigher,q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.overflow("hidden"),q.l0.cursor.pointer],tD=(0,H.X)({buttonFolded:[tR,q.l0.borderRadius(8)],buttonUnfolded:[tR,q.l0.borderRadius(8,8,0,0)],rowContainer:[q.l0.align.center,q.l0.rowWithGap(8),q.l0.position.relative,q.l0.zIndex(1),q.l0.overflow("hidden")],diffContainer:[q.l0.flex.grow(1),q.l0.borderRadius(8)],bodyContainer:[q.l0.borderRadius(0,0,8,8),q.l0.p(8),q.l0.display.flex,q.l0.flex.row,q.l0.flex.wrap,q.l0.align.center,q.l0.justify.center,q.l0.backgroundColor.backgroundDefault,q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"}),q.l0.border({color:q.TV.outlineDimmer,direction:"left"}),q.l0.border({color:q.TV.outlineDimmer,direction:"right"})],noChangesContainer:[q.l0.py(8),q.l0.px(8),q.l0.center,q.l0.width("100%")],innerContainer:[q.l0.display.flex,q.l0.align.center],splitContainer:[q.l0.p(8),q.l0.display.flex,q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.maxWidth("100%"),q.l0.align.center],splitChild:[q.l0.align.center,q.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[q.l0.width(64),q.l0.height(32)]}),tI=function(e){var t=e.value,n=e.onChange;return(0,O.BX)(tZ.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,O.tZ)(V.G,{css:tD.buttonGroupItem,children:(0,O.tZ)(tZ.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,O.tZ)(V.G,{css:tD.buttonGroupItem,children:(0,O.tZ)(tZ.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},tB=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,O.BX)(V.G,{css:n?tD.buttonFolded:tD.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,O.BX)(V.G,{css:[tD.rowContainer,q.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,O.BX)(O.HY,{children:[(0,O.tZ)(F.Z,{path:o}),(0,O.tZ)(W.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,O.tZ)(ew.Z,{}),(0,O.tZ)(F.Z,{path:a}),(0,O.tZ)(W.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],children:i.final.path})]}):(0,O.BX)(O.HY,{children:[(0,O.tZ)(F.Z,{path:a}),(0,O.tZ)(W.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],children:i.final.path})]}),(0,O.tZ)(tx.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,O.BX)(V.G,{css:tD.rowContainer,children:[(0,O.tZ)(tT,{type:i.status}),(0,O.tZ)(X.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,O.tZ)(tC.Z,{}):(0,O.tZ)(tk.Z,{})})]})]})},tA=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,O.tZ)(tb,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,O.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[ta.p.of(to.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},tP=function(e){return(0,ee.T3)(e)?"media":(0,ee.Mb)(e)?"ot":"binary"},tG=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,O.tZ)(V.G,{css:[{display:"flex",height:"100%"}],children:(0,O.tZ)(tE.A,{content:t,mime:(0,ee.yC)(r)})});case"ot":return(0,O.tZ)(tg.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},tL=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.loading)return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(j.Z,{size:20})});if(t.initial.content===t.final.content)return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=tP(t.initial.filename),o=tP(t.final.filename);if("ADDED"===t.status)switch(o){case"media":return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(V.G,{css:tD.innerContainer,children:(0,O.tZ)(tE.A,{content:t.final.content,mime:(0,ee.yC)(t.final.filename)})})});case"ot":return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,O.tZ)(V.G,{css:tD.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,O.tZ)(tA,{diff:t,splitOrUnified:n,extensions:r}):(0,O.BX)(V.G,{css:tD.splitContainer,children:[(0,O.tZ)(V.G,{css:tD.splitChild,children:(0,O.tZ)(tG,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,O.tZ)(V.G,{css:tD.splitChild,children:(0,O.tZ)(tG,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},tN=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,O.BX)(V.G,{css:tD.diffContainer,children:[(0,O.tZ)(tB,{folded:n,setFolded:r,diff:t}),n?null:(0,O.tZ)(eb.Tg,{css:tD.bodyContainer,elevated:!0,children:(0,O.tZ)(tL,{diff:t,splitOrUnified:i})})]},t.id)},tO=n(22419),tU=n(20858),tM=n(27387),tX=n(96583),tF=n(64566),tW=n(25722),tV=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;tW.$e(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&tW.sU("data",i),tW.Tb(r.error)})},tH=(i=(0,tM._)(function(e,t,n,r){var i,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:n,revision:i,convertToBase64:(0,ee.T3)(n)})];case 1:if((o=l.sent()).error)throw tV({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:n,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,t.readFile(n,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})}),function(e,t,n,r){return i.apply(this,arguments)}),tz=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,L._)((0,Q.useState)(null),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(!0),2),c=l[0],s=l[1],u=(0,J.Z)().fs,d=(0,tF.Z)((n=(0,tM._)(function(n){var r,i;return(0,tX.Jh)(this,function(o){switch(o.label){case 0:s(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,tH(n,u,e,t)];case 2:return r=o.sent(),s(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),s(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[e,t,u],r);return(0,Q.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:c}},tj=U.Dy.Object({type:U.Dy.Literal("git"),revision:U.Dy.String()}),tq=U.Dy.Object({type:U.Dy.Literal("fs")}),tJ=U.Dy.Object({type:U.Dy.Literal("diff"),data:U.Dy.Object({left:U.Dy.Object({path:U.Dy.String(),data:U.Dy.Union([tj,tq])}),right:U.Dy.Object({path:U.Dy.String(),data:U.Dy.Union([tj,tq])})})}),tY=(0,H.X)({container:[q.l0.colWithGap(16),q.l0.p(8)],header:[q.l0.mt(0),q.l0.mb(8)],emphasizedText:[q.l0.fontWeight.bold],bodyContainer:[q.l0.borderRadius(8),q.l0.p(8),q.l0.display.flex,q.l0.flex.row,q.l0.flex.wrap,q.l0.align.center,q.l0.justify.center,q.l0.backgroundColor.backgroundDefault,q.l0.border({color:q.TV.outlineDimmest,direction:"full"})],tooltipContainer:[q.l0.display.inlineBlock]}),t$=function(e){var t=e.filename,n=e.onFileClick;return(0,O.tZ)("span",{css:tY.tooltipContainer,children:(0,O.tZ)(tO.u,{tooltip:"View file",children:(0,O.tZ)("button",{css:[q.l0.reset.button,q.l0.linkStyle,q.l0.fontWeight.medium],onClick:n,children:t})})})},tK=function(e){return"git"===e.type?e.revision:"working directory"},tQ=function(e){var t,n,r=e.left,i=e.right,o=e.onFileClick,a=r.path===i.path,l=(t=r.data,n=i.data,t.type===n.type&&("git"!==t.type||t.revision===n.revision));return a?l?(0,O.BX)(W.h4,{level:1,variant:"text",css:tY.header,children:["Comparing"," ",(0,O.BX)("span",{css:tY.emphasizedText,children:[(0,O.tZ)(t$,{filename:r.path,onFileClick:o})," ",tK(r.data)]})," ","to itself"]}):(0,O.BX)(W.h4,{level:1,variant:"text",css:tY.header,children:["Comparing"," ",(0,O.BX)("span",{css:tY.emphasizedText,children:[(0,O.tZ)(t$,{filename:r.path,onFileClick:o})," ",tK(r.data)]})," ","to ",(0,O.tZ)("span",{css:tY.emphasizedText,children:tK(i.data)})]}):l?(0,O.BX)(W.h4,{level:1,variant:"text",css:tY.header,children:["Comparing ",(0,O.tZ)("span",{css:tY.emphasizedText,children:r.path})," to"," ",(0,O.BX)("span",{css:tY.emphasizedText,children:[(0,O.tZ)(t$,{filename:i.path,onFileClick:o})," ",tK(r.data)]})]}):(0,O.BX)(W.h4,{level:1,variant:"text",css:tY.header,children:["Comparing"," ",(0,O.BX)("span",{css:tY.emphasizedText,children:[r.path," ",tK(r.data)]})," ","to"," ",(0,O.BX)("span",{css:tY.emphasizedText,children:[(0,O.tZ)(t$,{filename:i.path,onFileClick:o})," ",tK(i.data)]})]})},t0=(y={},(0,tr._)(y,"Content",function(e){var t=e.pane.data,n=t.left,r=t.right,i=e.options.performPaneOperation,o=(0,L._)((0,Q.useState)("Split"),2),a=o[0],l=o[1],c=tz(n.path,n.data),s=c.fileContent,u=c.loading,d=tz(r.path,r.data),f=d.fileContent,p=d.loading,h=(0,Q.useMemo)(function(){return null===s&&null!==f?ti.yH.ADDED:null!==s&&null===f?ti.yH.DELETED:ti.yH.MODIFIED},[s,f]);return(0,O.BX)(V.G,{css:tY.container,children:[(0,O.tZ)(tQ,{left:n,right:r,onFileClick:function(){i({operation:"open",pane:{type:(0,$.Dp)({path:r.path}),data:{path:r.path}}})}}),(0,O.tZ)(tI,{value:a,onChange:l}),(0,O.tZ)(eb.Tg,{css:tY.bodyContainer,children:(0,O.tZ)(tL,{diff:{id:"".concat(n.path,"-").concat(r.path),status:h,loading:u||p,initial:{filename:(0,ee.UO)(n.path),path:(0,ee.Il)(n.path),content:null!=s?s:""},final:{filename:(0,ee.UO)(r.path),path:(0,ee.Il)(r.path),content:null!=f?f:""}},splitOrUnified:a})})]})}),(0,tr._)(y,"Icon",function(){return(0,O.tZ)(tU.Z,{})}),(0,tr._)(y,"getTitle",function(e){var t=e.data;return t.left.path===t.right.path?"Diff: ".concat((0,ee.UO)(t.left.path)):"Diff: ".concat((0,ee.UO)(t.left.path)," - ").concat((0,ee.UO)(t.right.path))}),(0,tr._)(y,"category",$.hc.WorkspaceFeatures),(0,tr._)(y,"decode",function(e){return M.B4.Decode(tJ,e)}),y),t1=n(55551),t2=n(18557),t3=n(23666),t4=n(93696),t8=n(14861),t6=n(66411),t5=n(86763),t7=n.n(t5),t9=n(43257),ne=n(92674),nt=n.n(ne);function nn(){var e=(0,e$._)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return nn=function(){return e},e}var nr={},ni=(0,eK.Ps)(nn()),no=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},na=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce(function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?e.push(i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,N._)(Object.values(i)))},nl=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},nc=(0,eW.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",t2.Mz-1,"px;}");function ns(e){var t,r,i,o,a=e.fs,l=e.broadcast,c=e.filePath,s=(0,L._)((0,Q.useState)(void 0),2),u=s[0],d=s[1],f=(0,t3.Z)(),p=(0,Q.useRef)(function(e){return(0,N._)(e)}),h=(0,Q.useRef)(function(e){return -1}),m=(0,Q.useRef)({readyPromise:nl()}),g=(0,Q.useRef)({promise:null});(0,Q.useEffect)(function(){Promise.all([n.e(9510),n.e(1770)]).then(n.t.bind(n,61770,23)).then(function(e){p.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},h.current=e.getSceneVersion,d(e.Excalidraw)})},[]);var v=function(){return m.current},y=(t=(0,ep._)({},nr,{ssr:!1}),eQ.a(ni,t)),b=y.data,w=y.loading,Z=(null==b?void 0:null===(o=b.currentUser)||void 0===o?void 0:o.username)||"",x=(0,t8.F)().isDarkColorScheme,C=(0,t6.aG)(),k=(0,t4.Z)(),S=null==k?void 0:k.color,_=(0,L._)((0,Q.useState)(new Map),2),T=_[0],E=_[1],R=(0,L._)((0,Q.useState)(-1),2),D=R[0],I=R[1],B=(0,Q.useRef)(nt()()).current;(0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e,t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(!b||!b.currentUser)return[2];return[4,m.current.readyPromise];case 1:return n.sent(),e=v().getAppState().collaborators,t=new Map,C.forEach(function(n){if(n.username!==(null==b?void 0:null===(r=b.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,eh._)((0,ep._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),v().updateScene({collaborators:t}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,C]);var A=(r=(0,tM._)(function(e,t){var n,r,i,o,a,s;return(0,tX.Jh)(this,function(u){t||(e=e.filter(function(e){return!T.has(e.id)||e.version>T.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)s=a.value,T.set(s.id,s.version),E(new Map(T))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l.broadcastMessage(B,{text:JSON.stringify({elements:e,path:c})}),[2]})}),function(e,t){return r.apply(this,arguments)});(0,Q.useEffect)(function(){if(l)return l.onBroadcastReceived(B,function(e){var t=e.username,n=JSON.parse(e.text);if(n.path===c){if(n.collaborator&&m.current){var r=v().getAppState().collaborators;r.set(t,(0,eh._)((0,ep._)({},r.get(t),n.collaborator),{username:t})),v().updateScene({collaborators:r})}else if(n.elements){var i=na(v(),no,n.elements);I(h.current(i)),v().updateScene({elements:i})}else if(n.removePresence){var o=v().getAppState().collaborators;o.delete(n.removePresence),v().updateScene({collaborators:o})}}})},[l,c,B]),(0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){var t;return c&&a&&(g.current.promise=new Promise((t=(0,tM._)(function(e){var t,n,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.all([a.readFile(c),m.current.readyPromise])];case 1:return"content"in(t=L._.apply(void 0,[i.sent(),1])[0])&&(n=JSON.parse(t.content.toString()||"{}"),r=v().getAppState(),n.appState=(0,ep._)({},r),n.scrollToContent=!0,e(n)),[2]}})}),function(e){return t.apply(this,arguments)}))),[2]})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,a]);var P=(0,Q.useCallback)(t7()((i=(0,tM._)(function(e,t){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,a.writeFile(c,t9.Z.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,t){return i.apply(this,arguments)}),350),[c]),G=function(e){h.current(e)>D&&(D>-1&&A(p.current(e),!1),I(h.current(e)))};return(0,O.BX)(V.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:S?"0 3px 0 3px ".concat(S):"none",backgroundColor:q.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){l.broadcastMessage(B,{text:JSON.stringify({removePresence:Z,path:c})})},children:[u&&!w?(0,O.tZ)(u,{ref:m,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:x?"dark":"light",initialData:g.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=v().getAppState().selectedElementIds||{};l.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:c})})},onChange:function(e,t,n){G(e),I(h.current(e)),h.current(e)>D&&P(e,n)},name:Z}):null,f?(0,O.tZ)(eW.xB,{styles:[nc]}):null]})}function nu(e){var t=e.fs,n=e.broadcast,r=e.filePath;return(0,O.tZ)(ns,{fs:t,broadcast:n,filePath:r},r)}var nd=U.Dy.Object({type:U.Dy.Literal("draw"),data:U.Dy.Object({path:U.Dy.String()})}),nf={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,O.tZ)(np,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,O.tZ)(t1.Z,{size:t})},getTitle:function(e){return(0,ee.UO)(e.data.path)},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(nd,e)}};function np(e){var t=e.path,n=e.performPaneOperation,r=(0,J.Z)(),i=r.fs,o=r.broadcast,a=(0,Y.Mp)({path:t,performPaneOperation:n});return(0,K.L5)(function(){if(a)return{commands:a}},[a]),(0,O.BX)(O.HY,{children:[(0,O.tZ)(Y.HK,{path:t,performPaneOperation:n}),(0,O.tZ)(Y.VY,{children:(0,O.tZ)(nu,{fs:i,broadcast:o,filePath:t})})]})}var nh=n(2446),nm=n(59421),ng=U.Dy.Object({type:U.Dy.Literal("envEditor")}),nv={Content:function(e){var t=e.options.performPaneOperation,n=(0,J.Z)().runner;return(0,O.tZ)(nm.ZP,{getRunState:n.getRunState,performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,O.tZ)(nh.Z,{size:t})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your Repl",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(ng,e)}},ny=n(4135),nb=n(14118),nw=n(80786),nZ=n(49853),nx=(0,Q.createContext)(null);function nC(){var e=(0,Q.useContext)(nx);if(!e)throw Error("Expected store in context");return e}var nk=(0,nZ.cn)([]),nS=(0,nZ.cn)(function(e){return e(nk)},function(e,t,n){var r=e(nk),i=Math.random().toString(36).substring(7);t(nk,[{id:i,type:n,dismiss:function(){var n=e(nk).filter(function(e){return e.id!==i});t(nk,n)}}].concat((0,N._)(r)))});function n_(){return(0,nw.b9)(nS,{store:nC()})}var nT=n(66791),nE=n(54455),nR=n(91466),nD=n(86466),nI=n(41960),nB=n(82922),nA=n(38775),nP=n(30043),nG=n(24969),nL=n(6065),nN=n(90767),nO=n(7599),nU=n(76143);function nM(){var e=(0,e$._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return nM=function(){return e},e}var nX={},nF=(0,eK.Ps)(nM()),nW=n(79032),nV=(0,H.X)({gitUserContainer:[q.l0.flex.row],gitUserInnerContainer:[q.l0.align.center,q.l0.flex.row,{"& > :not(:first-child)":{marginLeft:q.TV.space4}}],gitUserInnerContainerFlipped:[q.l0.align.center,q.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:q.TV.space4}}],alignCenter:[q.l0.align.center]});function nH(e){var t=e.name,n=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,c=void 0!==l&&l,s=e.flip,u=void 0!==s&&s,d=e.placement,f=e.showTooltip;return void 0===f||f?(0,O.tZ)(V.G,{css:nV.gitUserContainer,children:(0,O.tZ)(tO.u,{placement:void 0===d?"bottom":d,tooltip:(0,O.tZ)(W.xv,{children:n}),children:(0,O.BX)(V.G,{css:u?nV.gitUserInnerContainerFlipped:nV.gitUserInnerContainer,children:[(0,O.tZ)(nz,{email:n,name:t,enablePlaceholder:i,small:c}),(0,O.tZ)(W.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}):(0,O.tZ)(V.G,{css:nV.gitUserContainer,children:(0,O.BX)(V.G,{css:u?nV.gitUserInnerContainerFlipped:nV.gitUserInnerContainer,children:[(0,O.tZ)(nz,{email:n,name:t,enablePlaceholder:i,small:c}),(0,O.tZ)(W.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}function nz(e){var t,n=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,c=(0,L._)((t=(0,ep._)({},nX,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),nU.t(nF,t)),1)[0],s=(0,L._)((0,Q.useState)(null),2),u=s[0],d=s[1];return(0,Q.useEffect)(function(){var e;(e=(0,tM._)(function(){var e,t,n,i,o,a,l,s,u,f;return(0,tX.Jh)(this,function(p){switch(p.label){case 0:if(!r.endsWith("@".concat(nO.O)))return[3,1];return e=r.split("@")[0],(t=(0,L._)(e.split("+"),2))[0],n=t[1],d((0,nG.vt)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(nO.J)))return[3,3];return a=r.split("@")[0],(l=(0,L._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null===(o=p.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&d(s),[3,4];case 3:u=(0,nW.FB)(r),(f=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),d(f.toString()),p.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,c]),(0,Q.useMemo)(function(){var e=l?12:16;return null===u?o?(0,O.tZ)(nN.Z,{css:nV.alignCenter,size:e}):null:(0,O.tZ)(nL.q,{css:nV.alignCenter,username:n,src:u,onError:function(){return d(null)},size:e})},[u,o,l,n])}var nj=n(96988),nq=n(52949);(o=b||(b={})).DASHBOARD="DASHBOARD",o.BRANCH="BRANCH",o.CURRENT_BRANCH="CURRENT_BRANCH",o.SETTINGS="SETTINGS",o.COMMIT="COMMIT";var nJ=n(98817),nY=V.K.button,n$=(0,H.X)({container:[q.l0.display.flex,q.l0.flex.growAndShrink(1),q.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[q.l0.width("100%")],searchContainer:[q.l0.p(8)],paddedX:[q.l0.px(8)],loadingContainer:[q.l0.display.flex,q.l0.align.center,q.l0.justify.center,q.l0.py(48)],menu:[q.l0.maxWidth(390),q.l0.width(280),q.l0.display.flex,q.l0.flex.shrink(1),q.l0.maxHeight(640),q.l0.borderRadius(8),q.l0.overflow("hidden")],form:[q.l0.display.flex,q.l0.flex.growAndShrink(1),q.l0.flex.column,q.l0.overflow("hidden")],body:[q.l0.py(8),q.l0.colWithGap(8),q.l0.flex.growAndShrink(1),q.l0.overflow("auto")],branchMetadata:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.flex.shrink(1)],section:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.justify.spaceBetween],selector:[q.l0.display.flex,q.l0.align.center,q.l0.rowWithGap(4)],header:[q.l0.colWithGap(2),q.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},nD.gU.listItem,q.l0.px(8),q.l0.py(4),q.l0.borderRadius(0),q.l0.align.start],inputDisabled:[{opacity:.75}],padded:[q.l0.p(8)],virtualItem:[q.l0.position.absolute,q.l0.top(0),q.l0.left(0),q.l0.width("100%"),q.l0.overflow("hidden")],virtualList:[q.l0.position.relative],divider:[q.l0.mt(8),q.l0.mb(8),q.l0.ml(0),q.l0.mr(0)],errorText:[q.l0.color.accentNegativeStronger,q.l0.mt(4)],createBranchButton:[q.l0.height(32),q.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),nK=function(e,t){var n,r,i,o=n_(),a=(0,J.Z)().git,l=(0,L._)((0,Q.useState)(!0),2),c=l[0],s=l[1],u=(0,tF.Z)((n=(0,tM._)(function(e){var t,n,r,i,a,l,c,u,d,f,p,h,m,g,v,y,b,w,Z,x,C;return(0,tX.Jh)(this,function(k){switch(k.label){case 0:return s(!0),[4,e.isInitialized()];case 1:if((t=k.sent()).error)return o(t.error),s(!1),[2,t];if(!t.initialized)return s(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((n=k.sent()).error)return o(n.error),s(!1),[2,n];return[4,e.findDefaultBranches()];case 3:if((r=k.sent()).error)return o(r.error),s(!1),[2,r];i=n.branches,a=new Set,l=!0,c=!1,u=void 0;try{for(d=function(){var e=p.value,t=i.find(function(t){return(0,ti.Pi)(t,e)});t&&a.add(t)},f=r.refs[Symbol.iterator]();!(l=(p=f.next()).done);l=!0)d()}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}h=Date.now()-72e6,m=[],g=[],v=!0,y=!1,b=void 0;try{for(w=i[Symbol.iterator]();!(v=(Z=w.next()).done);v=!0)x=Z.value,a.has(x)||(x.commit.author.date>h?m.push(x):g.push(x))}catch(e){y=!0,b=e}finally{try{v||null==w.return||w.return()}finally{if(y)throw b}}return C=Array.from(a),s(!1),[2,{active:m,stale:g,important:C,error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(r=(0,tM._)(function(t){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(c||(0,ti.Pi)(e,t))return[2];return s(!0),[4,a.switchBranch(t)];case 1:return(n=r.sent()).error?(o(n.error),s(!1)):(a.forceRefresh(),(0,nj.J)("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),f=(i=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(c||""===e)return[2];return s(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(t=n.sent()).error?(o(t.error),s(!1)):(a.forceRefresh(),(0,nj.J)("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,Q.useEffect)(function(){null!==e&&(s(!1),t({mode:b.CURRENT_BRANCH}))},[e,t]),null===u||c)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:null};if(u.error)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:u.error};var p=u.active,h=u.stale,m=u.important;return{loading:c,active:null!=p?p:[],stale:null!=h?h:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:f,error:null}},nQ=function(e){var t=e.branch,n=nK(t,e.switchMode),r=n.loading,i=n.active,o=n.important,a=n.stale,l=n.handleSwitchBranch,c=n.handleCreateBranch,s=(0,L._)((0,Q.useState)(!1),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(""),2),p=f[0],h=f[1],m=(0,L._)((0,Q.useState)(!1),2),g=m[0],v=m[1];return(0,O.tZ)(n7,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:t,query:p,setQuery:h,onSwitchBranch:l,createBranchLoading:g,createBranch:(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:return v(!0),[4,c(p)];case 1:return e.sent(),h(""),v(!1),[2]}})}),loading:r})},n0=function(e){var t=e.onClick,n=e.children,r=(0,Q.useRef)(null),i=(0,L._)((0,nJ.XZ)(r,!1),4),o=i[0],a=i[1],l=i[2],c=i[3];return(0,nJ.Ym)(a,r),(0,O.tZ)(nY,{ref:r,role:"menuitem",css:n$.menuItem,onClick:function(e){c(),t(e)},onKeyDown:l,tabIndex:o,children:n})},n1=function(e){var t=e.branch;return(0,O.BX)(V.G,{css:n$.branchMetadata,children:[(0,O.tZ)(nH,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,O.tZ)(W.xv,{color:"dimmer",variant:"small",children:(0,nA.lb)(t.commit.author.date)})]})},n2=function(e){var t=e.branch,n=e.current,r=e.onSwitchBranch,i=(0,Q.useMemo)(function(){return(0,ti.p3)(t,n)},[t,n]);return(0,O.BX)(n0,{onClick:function(){return r(t)},children:[(0,O.tZ)(W.xv,{multiline:!1,children:(0,O.tZ)(nq.Lr,{name:t.name,remote:t.type===ti.HO.REMOTE?t.remote:null,current:i})}),(0,O.tZ)(n1,{branch:t})]})},n3=function(e,t){return t.filter(function(t){return(0,ti.Qj)(t).toLowerCase().includes(e.toLowerCase())})},n4=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<t.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[a]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<n.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[l]})}return i},n8=function(e){var t=e.item,n=e.current,r=e.onSwitchBranch;return"heading"===t.type?(0,O.tZ)(V.G,{css:n$.paddedX,children:(0,O.tZ)(W.xv,{multiline:!1,variant:"small",color:"dimmest",css:q.l0.fontWeight.medium,children:t.title})}):"divider"===t.type?(0,O.tZ)(V.G,{css:n$.divider,children:(0,O.tZ)(nR.R,{})}):(0,O.tZ)(V.G,{children:(0,O.tZ)(n2,{branch:t.branch,current:n,onSwitchBranch:r})})},n6=function(e){var t=e.items,n=e.current,r=e.onSwitchBranch,i=(0,Q.useRef)(null),o=(0,nE.MG)({overscan:10,count:t.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n,r;return null!==(n=void 0===(r=t[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==n?n:0}});return(0,O.tZ)(nJ.uP,{options:{direction:"vertical"},children:(0,O.tZ)("div",{css:n$.body,ref:i,children:(0,O.tZ)("ul",{css:n$.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,O.tZ)("div",{css:n$.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,O.tZ)(n8,{item:t[e.index],current:n,onSwitchBranch:r})},e.key)})})})})},n5=function(e){var t=e.query,n=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,c=e.createBranchLoading,s=e.createBranch,u=e.loading,d=(0,Q.useMemo)(function(){return n4(r,i,o)},[r,i,o]),f='Create Branch "'.concat(t,'"'),p=(0,Q.useMemo)(function(){return(0,N._)(r).concat((0,N._)(i),(0,N._)(o)).some(function(e){return e.name===t})},[t,r,i,o]);return(0,O.tZ)(V.G,{css:n$.menu,children:(0,O.tZ)("form",{onSubmit:function(e){e.preventDefault(),s()},css:n$.form,children:u?(0,O.tZ)(V.G,{css:n$.loadingContainer,children:(0,O.tZ)(j.Z,{})}):(0,O.BX)(O.HY,{children:[(0,O.tZ)(V.G,{css:n$.searchContainer,children:(0,O.tZ)(nB.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,O.tZ)(V.G,{css:n$.paddedX,children:(0,O.tZ)(nR.R,{})}),d.length>0?(0,O.tZ)(n6,{items:d,current:a,onSwitchBranch:l}):null,p||""===t?null:(0,O.BX)(V.G,{css:n$.padded,children:[(0,O.tZ)(ey.zx,{text:f,size:"small",iconLeft:c?(0,O.tZ)(j.Z,{}):(0,O.tZ)(nP.Z,{}),stretch:!0,css:n$.createBranchButton,disabled:c||!(0,ti.Dc)(t),type:"submit"}),(0,ti.Dc)(t)?null:(0,O.tZ)(W.xv,{variant:"small",css:n$.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},n7=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,c=e.setQuery,s=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,f=e.loading,p=(0,Q.useMemo)(function(){return n3(l,r)},[l,r]),h=(0,Q.useMemo)(function(){return n3(l,i)},[l,i]),m=(0,Q.useMemo)(function(){return n3(l,o)},[l,o]);return(0,O.BX)(nI.xo,{label:"View Branches",placement:"bottom",isOpen:t,onOpenChange:function(e){n(e)},offset:16,children:[function(e){var n=e.onClick,r=(0,tl._)(e,["onClick"]);return(0,O.tZ)(ey.zx,{variant:"nofill",text:(0,O.BX)(W.xv,(0,eh._)((0,ep._)({multiline:!1,variant:"small",css:n$.selector},r),{children:[(0,O.tZ)(nq.Lr,{name:a.name,remote:a.type===ti.HO.REMOTE?a.remote:null,icon:!0}),t?(0,O.tZ)(tk.Z,{}):(0,O.tZ)(tC.Z,{})]})),size:"small",stretch:!0,alignment:"start",css:n$.fullWidth,onClick:n})},(0,O.tZ)(n5,{query:l,setQuery:c,filteredImportant:p,filteredActive:h,filteredStale:m,current:a,onSwitchBranch:s,createBranchLoading:u,createBranch:d,loading:f})]})},n9=n(3488),re=n(20379),rt=n(10055),rn=n(15323);function rr(){var e,t,n,r,i,o=(0,L._)((0,Q.useState)(!1),2),a=o[0],l=o[1],c=(0,J.Z)().git,s=(t=(e=(0,L._)((0,Q.useState)(!1),2))[0],n=e[1],r=(0,J.Z)().git,(0,Q.useEffect)(function(){return r.onBusyChange(n)},[r]),t),u=n_(),d=(0,tF.Z)((i=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return u(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return u(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var f=!!d&&d.hasRemotes,p=s||a||null===d;function h(){return(h=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(c.isBusy()||p)return[2];if(l(!0),!f)return[3,2];return[4,c.fetch()];case 1:(e=t.sent()).error?u(e.error):(0,nj.J)("remote-fetched"),t.label=2;case 2:return[4,c.refreshProfiles()];case 3:return t.sent(),c.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,O.tZ)(X.hU,{alt:f?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return h.apply(this,arguments)},disabled:p,children:p?(0,O.tZ)(j.Z,{}):(0,O.tZ)(rn.Z,{})})}var ri=(0,H.X)({container:[q.l0.height(36),q.l0.px(8),q.l0.py(4),q.l0.rowWithGap(8),q.l0.backgroundColor.backgroundDefault,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.zIndex(1),{borderBottom:"1px solid ".concat(q.TV.outlineDimmer)}],left:[q.l0.rowWithGap(4),q.l0.align.center,q.l0.flex.growAndShrink(1)],right:[q.l0.rowWithGap(8),q.l0.align.center],back:{marginLeft:-4}}),ro=function(e){var t=e.openSettings;return(0,O.BX)(V.G,{css:ri.container,children:[(0,O.BX)(V.G,{css:ri.left,children:[(0,O.tZ)(re.Z,{size:16}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,O.BX)(V.G,{css:ri.right,children:[(0,O.tZ)(rf,{openSettings:t}),(0,O.tZ)(rr,{})]})]})},ra=function(e){var t=e.branch,n=e.switchMode,r=e.openSettings;return(0,O.BX)(V.G,{css:ri.container,children:[(0,O.tZ)(V.G,{css:ri.left,children:(0,O.tZ)(nQ,{branch:t,switchMode:n})}),(0,O.BX)(V.G,{css:ri.right,children:[(0,O.tZ)(rf,{openSettings:r}),(0,O.tZ)(rr,{})]})]})},rl=function(e){var t=e.onBack;return(0,O.BX)(V.G,{css:ri.container,children:[(0,O.BX)(V.G,{css:ri.left,children:[(0,O.tZ)(ru,{onBack:t,alt:"Back"}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,O.tZ)(V.G,{css:ri.right})]})},rc=function(e){var t=e.switchMode,n=e.openSettings;return(0,O.BX)(V.G,{css:ri.container,children:[(0,O.BX)(V.G,{css:ri.left,children:[(0,O.tZ)(rd,{switchMode:t}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,O.BX)(V.G,{css:ri.right,children:[(0,O.tZ)(rf,{openSettings:n}),(0,O.tZ)(rr,{})]})]})};function rs(e){var t=e.mode,n=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({mode:b.SETTINGS})};switch(t){case b.DASHBOARD:return(0,O.tZ)(ro,{openSettings:o});case b.BRANCH:case b.CURRENT_BRANCH:if(null===n)throw Error("Tried to show branch in header, but branch is null");return(0,O.tZ)(ra,{branch:n,switchMode:r,openSettings:o});case b.SETTINGS:return(0,O.tZ)(rl,{onBack:i});case b.COMMIT:return(0,O.tZ)(rc,{switchMode:r,openSettings:o});default:return(0,O.BX)(V.G,{css:ri.container,children:[(0,O.tZ)(V.G,{css:ri.left}),(0,O.tZ)(V.G,{css:ri.right})]})}}function ru(e){var t=e.onBack,n=e.alt;return(0,O.tZ)(X.hU,{css:ri.back,alt:n,size:28,onClick:t,children:(0,O.tZ)(n9.Z,{})})}function rd(e){var t=e.switchMode;return(0,O.tZ)(ru,{css:ri.back,onBack:function(){return t({mode:b.CURRENT_BRANCH})},alt:"Back to current branch"})}function rf(e){var t=e.openSettings;return(0,O.tZ)(X.hU,{alt:"Settings",size:24,onClick:t,children:(0,O.tZ)(rt.Z,{})})}var rp=n(31718),rh=(0,H.X)({checkboxLabel:q.l0.rowWithGap(8)});function rm(){var e=(0,Q.useId)(),t=(0,L._)((0,Q.useState)(!0),2),n=t[0],r=t[1],i=(0,L._)((0,Q.useState)(!1),2),o=i[0],a=i[1],l=n_(),c=(0,J.Z)().git;function s(){return(s=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(o)return[2];return a(!0),[4,c.init({initialCommit:n,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(a(!1),l(e.error)):(c.forceRefresh(),(0,nj.J)("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,O.tZ)(j.Z,{}):(0,O.tZ)(ny.Z,{}),colorway:"primary",loading:o,onClick:function(){return s.apply(this,arguments)}}),(0,O.BX)(V.G,{css:rh.checkboxLabel,tag:"label",children:[(0,O.tZ)(rp.X,{id:e,checked:n,onChange:function(e){return r(e)},size:"small"}),(0,O.tZ)(W.xv,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var rg=n(54300),rv=n(7935),ry=n(32622),rb=n(32134),rw=n(27840),rZ=n(96674);function rx(){var e,t=(0,tF.Z)((e=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){return[2,{connectedToGithub:rC(e),error:null}]})}),function(t){return e.apply(this,arguments)}));return null==t||t.error?null:t.connectedToGithub}function rC(e){return e.hasProfile(ti.rG.GITHUB)}function rk(e){var t=e.label,n=e.allowReconnect,r=e.callback,i=e.useV2App,o=(0,L._)((0,Q.useState)(!1),2),a=o[0],l=o[1],c=(0,J.Z)().git,s=rx(),u=(0,t3.Z)(),d=(0,rb.v)({onAuth:function(){(0,nj.J)("github-user-connected"),l(!1),c.refreshProfiles({preferredProvider:ti.rG.GITHUB}),null==r||r()},onClose:function(){return l(!1)},useV2App:i});return s&&!(void 0!==n&&n)?(0,O.tZ)(ey.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,O.tZ)(rw.Z,{}),disabled:!0}):(0,O.tZ)(ey.zx,{text:a||null===s?"Connecting...":u?"Visit account page to connect to GitHub":void 0===t?"Connect to GitHub":t,colorway:"primary",iconLeft:a?(0,O.tZ)(j.Z,{}):(0,O.tZ)(rZ.Z,{}),loading:a,onClick:function(){if(u){ry.X.openExternalUrl("/account#connected-services");return}l(!0),d()}})}var rS=n(47549);function r_(e){return!!e&&("string"==typeof e?e.includes(rS.Kd):e.fetch.includes(rS.Kd))}function rT(e){return e.endsWith(".git")?e.slice(0,-4):e}function rE(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return r_(t)?rT(t):null}function rR(e){var t="string"==typeof e?e:e.fetch;if(r_(t)){var n=(t=rT(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}var rD=(0,H.X)({body:[q.l0.p(4),q.l0.colWithGap(8),q.l0.borderRadius(0,0,8,8)],remedies:[q.l0.flex.row,q.l0.align.center,q.l0.justify.end,q.l0.flex.wrap,{gap:"8px"}]});function rI(e){var t=e.description,n=e.remedies,r=e.error;return(0,O.BX)(eb.Tg,{css:rD.body,elevated:!0,children:[(0,O.tZ)(W.xv,{children:t}),(0,O.BX)(V.G,{css:rD.remedies,children:[n,(0,O.tZ)(ey.zx,{text:"Dismiss",iconLeft:(0,O.tZ)(rv.Z,{}),onClick:r.dismiss})]})]})}function rB(e){var t,n=e.error,r=(0,tF.Z)((t=(0,tM._)(function(e){var t,r,i,o,a,l,c,s,u,d;return(0,tX.Jh)(this,function(f){switch(f.label){case 0:switch(n.type){case ti.aq.UNKNOWN_NOT_GIT:return[3,1];case ti.aq.UNKNOWN:return[3,2];case ti.aq.CHANNEL_CLOSED:return[3,3];case ti.aq.NOT_INITIALIZED:return[3,4];case ti.aq.UNAUTHENTICATED:return[3,5];case ti.aq.INDEX_FILE_CORRUPT:return[3,7];case ti.aq.UNKNOWN_REMOTE:return[3,8];case ti.aq.UNKNOWN_REF:return[3,9];case ti.aq.INDEX_LOCKED:return[3,10];case ti.aq.NO_COMMITS:return[3,11];case ti.aq.PATH_MATCHED_NO_FILES:return[3,12];case ti.aq.USER_NOT_CONFIGURED:return[3,13];case ti.aq.INVALID_REFERENCE:return[3,14];case ti.aq.BRANCH_ALREADY_EXISTS:return[3,15];case ti.aq.MERGE_CONFLICT:return[3,16];case ti.aq.UPSTREAM_NOT_SET:return[3,17];case ti.aq.HEAD_DETACHED:return[3,18];case ti.aq.DIRTY_WORKTREE:return[3,19];case ti.aq.PROTECTED_BRANCH:return[3,20];case ti.aq.PUSH_REJECTED:return[3,21];case ti.aq.REMOTE_ALREADY_EXISTS:return[3,22];case ti.aq.TIMEOUT:return[3,23];case ti.aq.ALREADY_INITIALIZED:return[3,24]}return[3,25];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,26];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,26];case 3:return t="The command was interrupted. Please try again.",r=null,[3,26];case 4:return t="There isn't a Git repository in the Repl's root directory.",r=null,[3,26];case 5:return[4,e.getRemotes()];case 6:if((i=f.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,c=void 0;try{for(s=i.remotes.values()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)if(d=u.value,r_(d)){o=!0;break}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(o){if(rC(e))return t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,O.tZ)(rk,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,26];return t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,O.tZ)(rk,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,26]}}return t="Failed to authenticate with the remote.",r=null,[3,26];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,26];case 8:return t="The remote specified isn't configured.",r=null,[3,26];case 9:return t="Remote ref of current branch is missing, publish your branch or restore the remote branch",r=null,[3,26];case 10:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,26];case 11:return t="There are no commits in the repository.",r=null,[3,26];case 12:return t="The path specified didn't match any files.",r=null,[3,26];case 13:return t="There isn't any user information configured for Git.",r=null,[3,26];case 14:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,26];case 15:return t="The branch specified already exists.",r=null,[3,26];case 16:return t="There was an unexpected merge conflict.",r=null,[3,26];case 17:return t="The upstream branch isn't set.",r=null,[3,26];case 18:return t="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,26];case 19:return t="There are uncommitted changes.",r=null,[3,26];case 20:return t="This operation cannot be performed on a protected branch.",r=null,[3,26];case 21:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,26];case 22:return t="The remote specified already exists.",r=null,[3,26];case 23:return t="The remote operation timed out.",r=null,[3,26];case 24:return t="There is already a Git repository in the Repl's root directory.",r=null,[3,26];case 25:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,26];case 26:return[2,{description:t,remedies:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[n],{refresh:!1});if(!r)return(0,O.tZ)(rI,{description:null,remedies:null,error:n});if(r.error)return(0,O.tZ)(rI,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var i=r.description,o=r.remedies;return(0,O.tZ)(rI,{description:i,remedies:o,error:n})}var rA=(0,H.X)({errorNotification:[{pointerEvents:"all"},q.l0.p(1),q.l0.backgroundColor.accentNegativeDimmer,q.l0.borderRadius(8),q.l0.shadow(3)],header:[q.l0.py(4),q.l0.px(8),q.l0.display.flex,q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.color.accentNegativeStrongest],headerText:[q.l0.rowWithGap(4),q.l0.align.center],errorType:[q.l0.font.code,{opacity:.75}],body:[q.l0.pt(4),q.l0.pb(8),q.l0.px(8),q.l0.colWithGap(8),q.l0.backgroundColor.backgroundHigher,q.l0.borderRadius(0,0,8,8)]});function rP(e){var t=e.error;return(0,O.BX)(V.G,{css:rA.errorNotification,children:[(0,O.BX)(V.G,{css:rA.header,children:[(0,O.BX)(V.G,{css:rA.headerText,children:[(0,O.tZ)(rg.Z,{}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case ti.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case ti.aq.UNKNOWN:return"Unknown Git Error";case ti.aq.NOT_INITIALIZED:case ti.aq.UNAUTHENTICATED:case ti.aq.INDEX_FILE_CORRUPT:case ti.aq.UNKNOWN_REMOTE:case ti.aq.UNKNOWN_REF:case ti.aq.INDEX_LOCKED:case ti.aq.NO_COMMITS:case ti.aq.PATH_MATCHED_NO_FILES:case ti.aq.USER_NOT_CONFIGURED:case ti.aq.INVALID_REFERENCE:case ti.aq.BRANCH_ALREADY_EXISTS:case ti.aq.MERGE_CONFLICT:case ti.aq.HEAD_DETACHED:case ti.aq.DIRTY_WORKTREE:case ti.aq.PUSH_REJECTED:case ti.aq.PROTECTED_BRANCH:case ti.aq.REMOTE_ALREADY_EXISTS:case ti.aq.ALREADY_INITIALIZED:case ti.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,O.tZ)(W.xv,{css:rA.errorType,multiline:!1,children:t.type})]}),(0,O.tZ)(V.G,{css:rA.body,children:(0,O.tZ)(rB,{error:t})})]})}var rG=(0,H.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},q.l0.position.absolute,q.l0.top(0),q.l0.bottom(0),q.l0.left(0),q.l0.right(0),q.l0.p(8),q.l0.colWithGap(16),q.l0.zIndex(10)]});function rL(){var e=(0,nw.Dv)(nS,{store:nC()});return(0,O.tZ)(V.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:rG.errorList,children:e.map(function(e){return(0,O.tZ)(rP,{error:e},e.id)})})}function rN(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function rO(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var rU=n(58532),rM=n(4733),rX=n(14116),rF=n(379);function rW(){var e=(0,e$._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return rW=function(){return e},e}var rV={},rH=(0,eK.Ps)(rW()),rz=function(e){return"repl-".concat(e)},rj=function(e){var t=e.replId,n=e.branch;return"repl-".concat(t,"/").concat(n)},rq=(a=(0,tM._)(function(e){var t,n,r,i,o,a,l,c;return(0,tX.Jh)(this,function(s){switch(s.label){case 0:return t=e.git,r=rz(n=e.replId),i="".concat(n,"@ssh.v1.replit.dev:."),[4,t.getRemotes()];case 1:if((o=s.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if(!((null===(a=o.remotes.get(r))||void 0===a?void 0:a.fetch)!==i))return[3,3];return[4,t.setRemoteURL({remote:r,url:i})];case 2:if((l=s.sent()).error)return[2,l];s.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,t.addRemote({name:r,url:i,fetch:!0})];case 5:if((c=s.sent()).error&&c.error!==ti.aq.REMOTE_ALREADY_EXISTS)return[2,c];return[2,{error:null,remote:{name:r,url:i}}]}})}),function(e){return a.apply(this,arguments)}),rJ=n(43627),rY=n(69792),r$=(0,H.X)({modalContainer:[q.l0.colWithGap(24)],statusText:[q.l0.display.flex,q.l0.flex.row,q.l0.textAlign.left],settingsButton:[q.l0.reset.button,q.l0.linkStyle,q.l0.fontWeight.medium,q.l0.textAlign.left,q.l0.ml(4)]}),rK=function(e){var t=e.onViewSettingsClick;return(0,O.tZ)("button",{css:r$.settingsButton,onClick:t,children:"Settings view."})};function rQ(e){var t,n,r,i,o,a,l=e.branch,c=e.onViewSettingsClick,s=e.performPaneOperation,u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(!1),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)(null),2),v=g[0],y=g[1],b=(0,L._)((0,Q.useState)(!1),2),w=b[0],Z=b[1],x=(0,rY.e)({controlName:rJ.r}),C=(t={variables:{id:(0,eY.Z)()},skip:!x},n=(0,ep._)({},rV,t),eQ.a(rH,n)).data,k=x&&(null==C?void 0:null===(i=C.repl)||void 0===i?void 0:i.__typename)==="Repl"&&(null===(o=C.repl.project)||void 0===o?void 0:o.id)||!1,S=n_(),_=(0,J.Z)().git,T=(0,tF.Z)((r=(0,tM._)(function(e){var t,n,r,i,o,a,l;return(0,tX.Jh)(this,function(c){switch(c.label){case 0:return[4,e.isInitialized()];case 1:if((t=c.sent()).error)return S(t.error),tV({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}];if(!t.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((n=c.sent()).error)return tV({context:"publish-branch-button-get-remotes",gitService:e,result:n}),S(n.error),[2,n];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,L._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null}(n.remotes),[4,e.status()];case 3:if((i=c.sent()).error)return S(i.error),tV({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,ti.C)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=c.sent()).error?(tV({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),S(l.error)):l.exists&&y("".concat(r,"/").concat(o)),c.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[S],{keepStaleResult:!1});if((0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!(w&&v))return[3,2];return[4,_.setBranchUpstream({upstream:v})];case 1:(e=t.sent()).error&&(tV({context:"publish-branch-button-set-branch-upstream",gitService:_,result:e,data:{upstream:v}}),S(e.error)),Z(!1),y(null),t.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[_,S,w,v]),null==T?void 0:T.error)return null;var E=T?T.remote:null,R=null===T,D=l.type!==ti.HO.LOCAL||!E||w;function I(){return(I=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!E||d)return[2];if(v)return m(!0),[2];return f(!0),[4,_.push({publish:{remote:E}})];case 1:return(e=t.sent()).error?(f(!1),S(e.error),tV({context:"publish-branch-button-push",gitService:_,result:e,data:{remote:E}})):(_.forceRefresh(),(0,nj.J)("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var B="".concat(E,"/").concat(l.name);return(a=d?"Pushing to '".concat(B,"'..."):l.type!==ti.HO.LOCAL?"Branch has already been pushed to '".concat(B,"'"):R?"Checking if branch ".concat(l.name," can be pushed..."):E?"Push branch as '".concat(B,"'"):"No remotes to push to",k&&T&&!E)?(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{iconLeft:(0,O.tZ)(rF.D,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){s({operation:"open",pane:{type:"project"}})},iconRight:(0,O.tZ)(rX.Z,{})}),(0,O.tZ)(W.xv,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,O.BX)(O.HY,{children:[v?(0,O.tZ)(rU.u,{isOpen:h,onRequestClose:function(){return m(!1)},children:(0,O.BX)(V.G,{css:r$.modalContainer,children:[(0,O.tZ)(W.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,O.tZ)(W.xv,{children:"Upstream branch '".concat(v,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,O.tZ)(ey.zx,{text:"Set upstream to '".concat(v,"'"),onClick:function(){v&&(Z(!0),m(!1))}})]})}):null,R||E?null:(0,O.tZ)(e8.E,{text:(0,O.tZ)(V.G,{css:r$.statusText,children:(0,O.BX)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,O.tZ)(rK,{onViewSettingsClick:c})]})}),colorway:"warning",closable:!1}),(0,O.tZ)(ey.zx,{text:a,iconLeft:R||d?(0,O.tZ)(j.Z,{}):(0,O.tZ)(rM.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:R||d,disabled:D})]})}var r0=n(27060),r1=(0,H.X)({remoteUrl:[{border:"none"},q.l0.height("auto"),q.l0.py(4),q.l0.px(8)]});function r2(e){var t=e.branch,n=e.remotes,r=(0,L._)((0,Q.useMemo)(function(){if(t.type===ti.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=rE(e),i=rR(e),o=r_(r);return[r,i,o]},[t,n]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,O.tZ)(el.Z,{css:r1.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,O.tZ)(rZ.Z,{}):void 0,iconRight:(0,O.tZ)(r0.Z,{}),variant:"outlined",size:"small"}):null}var r3=n(84680),r4=n(78421),r8=(0,H.X)({warning:[q.l0.align.start],header:[q.l0.fontWeight.bold]});function r6(){return(0,O.BX)(O.HY,{children:[(0,O.tZ)(e8.E,{css:r8.warning,icon:(0,O.tZ)(rg.Z,{}),colorway:"warning",text:(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{css:r8.header,children:"Can't push or pull from GitHub"}),(0,O.tZ)("br",{}),(0,O.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,O.tZ)(rk,{})]})}var r5=n(2447),r7=(0,H.X)({text:[q.l0.flex.shrink(1)]});function r9(e){var t=e.date,n=(0,L._)((0,Q.useState)(null),2),r=n[0],i=n[1];return((0,Q.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,r5.Z)(t,e,{addSuffix:!0})),i(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),i(null)}}},[t]),r)?(0,O.BX)(W.xv,{css:r7.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function ie(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,O.tZ)(O.HY,{children:o.map(function(e){return(0,O.tZ)(e8.E,{text:e,colorway:"warning",icon:(0,O.tZ)(rg.Z,{})},e)})}):null}var it=(0,H.X)({divider:[q.l0.mx(8)]});function ir(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(n){var o=(0,eV.Z)("commit",n);r="".concat(n," ").concat(o," to pull")}if(t){var a=(0,eV.Z)("commit",t);i="".concat(t," ").concat(a," to push")}return(0,O.BX)(W.xv,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,O.tZ)("span",{children:r}):null,r&&i?(0,O.tZ)("span",{css:it.divider,children:""}):null,i?(0,O.tZ)("span",{children:i}):null]})}var ii=(0,H.X)({container:[q.l0.flex.grow(1)],branch:[q.l0.mr(4),q.l0.color.foregroundDefault,q.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[q.l0.color.foregroundDimmest],text:[q.l0.ml(4),q.l0.color.foregroundDimmest]});function io(e){var t=e.upstream,n=e.remotes,r=(0,Q.useMemo)(function(){return function(e,t){var n=null,r=null;if(e instanceof Map){var i=(0,ti.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=rE(a)}else n=t,r=rE(e);return r&&r_(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,O.BX)(W.xv,{css:ii.container,variant:"small",multiline:!1,children:[r?(0,O.tZ)("a",{css:ii.branch,href:r,target:"_blank",children:t}):(0,O.tZ)("span",{css:ii.branch,children:t}),(0,O.tZ)("span",{css:ii.divider,children:""}),(0,O.tZ)("span",{css:ii.text,children:"upstream"})]})}function ia(e){return il.apply(this,arguments)}function il(){return(il=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){tW.$e(function(e){e.setTag("gitPane",!0),tW.Tb(Error("Remote update operation timed out"))}),e({error:ti.aq.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})).apply(this,arguments)}var ic=(0,H.X)({container:[q.l0.borderRadius(8)],loading:[q.l0.height(64),eH.p.backgroundPulse(),q.l0.borderRadius(8)],header:[q.l0.py(4),q.l0.px(8),q.l0.rowWithGap(8),q.l0.align.center,q.l0.flex.shrink(1),q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[q.l0.px(8),q.l0.pt(8),q.l0.pb(12),q.l0.colWithGap(8)],buttons:[q.l0.rowWithGap(8),q.l0.flex.grow(1)],sync:[q.l0.flex.grow(1)],pullPush:[q.l0.flex.row],pull:[q.l0.pr(12),q.l0.borderRadius(8,0,0,8),q.l0.border({color:q.TV.outlineDefault,direction:"right"})],push:[q.l0.borderRadius(0,8,8,0)]});function is(e){var t=e.remotes,n=e.gotoPendingState,r=n_(),i=function(e){var t,n=e.onError,r=e.onPullConflicts,i=(0,L._)((0,Q.useState)(!1),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(!1),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(!1),2),h=p[0],m=p[1],g=(0,J.Z)().git,v=(0,tF.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y;return(0,tX.Jh)(this,function(b){switch(b.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:ti.Tt.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=b.sent()).error)return[2,o];if(a=o.state,o.type!==ti.y5.NORMAL)return[2,{error:ti.aq.INVALID_STATE}];return(a===ti.yG.DIRTY_WORKTREE||a===ti.yG.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=b.sent()).error)return[2,l];if(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,p=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,!c)return[2,{error:ti.aq.HEAD_DETACHED}];if(i.ahead=d,i.behind=p,!s)return[3,7];return i.upstream=s,i.hasUnpulledCommits=p>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((h=b.sent()).error)return[2,h];return i.lastFetched=h.lastFetched,[4,e.canMergeBranches(c,s)];case 4:if((m=b.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(ti.rG.GITHUB))return[3,6];if(!(g=(0,ti.CH)(s)))return[2,{error:ti.aq.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((v=b.sent()).error)return[2,v];if(!(y=v.remotes.get(g)))return[2,{error:ti.aq.INVALID_REFERENCE}];r_(y)&&(i.needGitHubConnection=!0),b.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?ti.Tt.MERGE:ti.Tt.REBASE),b.label=7;case 7:return[2,(0,eh._)((0,ep._)({},i),{error:null})]}})}),function(e){return t.apply(this,arguments)}));if(!v)return{type:"loading"};if(v.error||!v.upstream)return{type:"error",error:v.error};if(!v.upstream)return{type:"noUpstream"};var y=v.upstream,b=v.hasUnpulledCommits,w=v.hasUnpushedCommits,Z=v.hasRemoteMergeConflict,x=v.pullMode,C=v.canPull,k=v.canPush,S=v.workTreeDirty,_=v.needGitHubConnection,T=v.ahead,E=v.behind,R=v.lastFetched;if(_)return{type:"needGitHubConnection",upstream:y};var D=o||c||d||h,I=!y||_||D,B=!C||D,A=!k||D,P=!C&&!k||Z||D;function G(){return(G=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(I)return[2];return a(!0),[4,ia(g.fetch())];case 1:return e=t.sent(),g.forceRefresh(),a(!1),e.error?n(e.error):(0,nj.J)("remote-fetched"),[2]}})})).apply(this,arguments)}function N(){return(N=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(B)return[2];return s(!0),[4,ia(g.pull({mode:x,allowConflicts:!0}))];case 1:return e=t.sent(),s(!1),e.error?n(e.error):(e.hasConflicts&&r(),g.forceRefresh(),(0,nj.J)("upstream-pulled")),[2]}})})).apply(this,arguments)}function O(){return(O=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(A)return[2];return f(!0),[4,ia(g.push())];case 1:return e=t.sent(),g.forceRefresh(),f(!1),e.error?n(e.error):(0,nj.J)("upstream-pushed"),[2]}})})).apply(this,arguments)}function U(){return(U=(0,tM._)(function(){var e,t;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(P)return[2];if(m(!0),!C)return[3,2];return[4,ia(g.pull({mode:x}))];case 1:if((e=r.sent()).error)return n(e.error),m(!1),[2];(0,nj.J)("upstream-pulled"),r.label=2;case 2:if(!k)return[3,4];return[4,g.push()];case 3:if((t=r.sent()).error)return n(t.error),m(!1),[2];(0,nj.J)("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return G.apply(this,arguments)},fetching:o,fetchDisabled:I,lastFetched:R,pull:function(){return N.apply(this,arguments)},pulling:c,pullDisabled:B,pullMode:x,canPull:C,push:function(){return O.apply(this,arguments)},pushing:d,pushDisabled:A,canPush:k,sync:function(){return U.apply(this,arguments)},syncing:h,syncDisabled:P,upstream:y,hasUnpulledCommits:b,hasUnpushedCommits:w,hasRemoteMergeConflict:Z,workTreeDirty:S,ahead:T,behind:E}}({onError:r,onPullConflicts:n}),o="error"===i.type?i.error:null;return((0,Q.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,O.tZ)(eb.Tg,{css:ic.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,O.BX)(eb.Tg,{css:ic.container,elevated:!0,children:[(0,O.BX)(V.G,{css:ic.header,children:[(0,O.tZ)(io,{upstream:i.upstream,remotes:t}),(0,O.tZ)(ey.zx,{css:ic.fetch,text:"Fetch",iconLeft:(0,O.tZ)(rn.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,O.tZ)(V.G,{css:ic.body,children:(0,O.tZ)(r6,{})})]}):(0,O.BX)(eb.Tg,{css:ic.container,elevated:!0,children:[(0,O.BX)(V.G,{css:ic.header,children:[(0,O.tZ)(io,{upstream:i.upstream,remotes:t}),(0,O.tZ)(r9,{date:i.lastFetched}),(0,O.tZ)(ey.zx,{css:ic.fetch,text:"Fetch",iconLeft:i.fetching?(0,O.tZ)(j.Z,{}):(0,O.tZ)(rn.Z,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,O.BX)(V.G,{css:ic.body,children:[(0,O.tZ)(ie,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,O.tZ)(ir,{ahead:i.ahead,behind:i.behind}),(0,O.BX)(V.G,{css:ic.buttons,children:[(0,O.tZ)("div",{css:ic.sync,children:(0,O.tZ)(tO.u,{tooltip:"Pull & push the latest changes",children:(0,O.tZ)(ey.zx,{css:ic.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,O.tZ)(j.Z,{}):(0,O.tZ)(r3.Z,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,O.BX)(V.G,{css:ic.pullPush,children:[(0,O.tZ)(ey.zx,{css:ic.pull,text:"Pull",iconLeft:i.pulling?(0,O.tZ)(j.Z,{}):(0,O.tZ)(z.Z,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,O.tZ)(ey.zx,{css:ic.push,text:"Push",iconLeft:i.pushing?(0,O.tZ)(j.Z,{}):(0,O.tZ)(r4.Z,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var iu=function(e,t,n){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.add(s.hash)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var u=!0,d=!1,f=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var m=p.value;r.add(m.hash)}}catch(e){d=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}return e.filter(function(e){return!r.has(e.hash)})},id=n(84e3),ip=n(918),ih=(0,H.X)({path:[q.l0.rowWithGap(8),q.l0.flex.growAndShrink(1),q.l0.align.center],source:[q.l0.color.foregroundDimmest],sourceArrow:[q.l0.mx(8)]});function im(e){var t=e.path,n=e.prefix,r=e.source,i=e.onClick;return(0,O.BX)(V.G,{css:ih.path,children:[(0,O.tZ)(F.Z,{path:t}),(0,O.BX)(W.xv,{multiline:!1,children:[(0,O.tZ)(nq.yx,{path:t,prefix:n,onClick:i}),r?(0,O.BX)("span",{css:ih.source,children:[(0,O.tZ)("span",{css:ih.sourceArrow,children:""}),(0,O.tZ)(nq.yx,{path:r})]}):null]})]})}var ig=(0,H.X)({container:[q.l0.colWithGap(8)],buttons:[q.l0.rowWithGap(8),q.l0.justify.end],restoringBoth:[q.l0.colWithGap(12)],listContainer:[q.l0.colWithGap(4)],list:[q.l0.px(4),q.l0.colWithGap(2)]});function iv(e){var t=e.show,n=e.files,r=e.pathMap,i=e.callback,o=(0,ty.Z)(i),a=(0,Q.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,Q.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,O.tZ)(rU.u,{isOpen:t,onRequestClose:l,children:t?(0,O.BX)(V.G,{css:ig.container,children:[(0,O.BX)(W.h4,{level:2,children:["Discard ",(0,eV.Z)("Change",n.length)]}),(0,O.tZ)(iy,{files:n,pathMap:r}),(0,O.BX)(V.G,{css:ig.buttons,children:[(0,O.tZ)(ey.zx,{text:"Cancel",iconLeft:(0,O.tZ)(id.Z,{}),onClick:l}),(0,O.tZ)(ey.zx,{text:"Discard ".concat((0,eV.Z)("Change",n.length)),iconLeft:(0,O.tZ)(ip.Z,{}),colorway:"negative",onClick:a})]})]}):null})}function iy(e){var t=e.files,n=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.type.worktree===ti.hF.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,O.BX)(V.G,{css:ig.listContainer,children:[(0,O.tZ)(W.xv,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,O.tZ)(ib,{files:i,pathMap:n})]}):r.length&&!i.length?(0,O.BX)(V.G,{css:ig.listContainer,children:[(0,O.tZ)(W.xv,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,O.tZ)(ib,{files:r,pathMap:n})]}):(0,O.BX)(V.G,{css:ig.restoringBoth,children:[r.length?(0,O.BX)(V.G,{css:ig.listContainer,children:[(0,O.BX)(W.h4,{level:3,children:["Tracked ",(0,eV.Z)("File",r.length)]}),(0,O.tZ)(W.xv,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,O.tZ)(ib,{files:r,pathMap:n})]}):null,i.length?(0,O.BX)(V.G,{css:ig.listContainer,children:[(0,O.BX)(W.h4,{level:3,children:["Untracked ",(0,eV.Z)("File",i.length)]}),(0,O.tZ)(W.xv,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,O.tZ)(ib,{files:i,pathMap:n})]}):null]})}function ib(e){var t=e.files,n=e.pathMap,r=(0,Q.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,O.tZ)(V.G,{children:(0,O.BX)("ul",{css:ig.list,children:[r.map(function(e){var t;return(0,O.tZ)("li",{children:(0,O.tZ)(im,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)}),t.length<=20?null:(0,O.tZ)("li",{children:(0,O.BX)(W.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,eV.Z)("file",t.length-20)]})})]})})}function iw(e){var t=(0,L._)((0,Q.useState)(function(){return{show:!1,files:[]}}),2),n=t[0],r=t[1];return{openRestoreConfirmationModal:(0,Q.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,Q.useMemo)(function(){return(0,O.tZ)(iv,(0,eh._)((0,ep._)({},n),{pathMap:e}))},[n,e])}}var iZ=n(6696),ix=(0,H.X)({actionsIndex:[q.l0.height(24),q.l0.align.center,q.l0.borderRadius(4)],actionsWorktree:[q.l0.height(24),q.l0.flex.row,q.l0.align.center,q.l0.borderRadius(4)],unstage:[q.l0.height(24),q.l0.width(24),q.l0.borderRadius(2)],stage:[q.l0.px(12),q.l0.height(24),q.l0.width(24),q.l0.borderRadius(2)],discard:[q.l0.pl(16),q.l0.pr(12),q.l0.height(24),q.l0.width(24),q.l0.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[q.l0.height("75%"),q.l0.width(1),q.l0.backgroundColor.outlineStronger]});function iC(e){var t=e.file,n=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,L._)((0,Q.useState)(!1),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1];function p(){return(p=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({reset:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function h(){return(h=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({add:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==n)return[2];return f(!0),[4,i(t.path)];case 1:return e.sent(),f(!1),[2]}})})).apply(this,arguments)}return a=a||d||c,"index"===n?(0,O.tZ)(eb.Tg,{elevated:!0,css:ix.actionsIndex,children:(0,O.tZ)(X.hU,{css:ix.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return p.apply(this,arguments)},disabled:a,children:c?(0,O.tZ)(j.Z,{}):(0,O.tZ)(iZ.Z,{})})}):(0,O.BX)(eb.Tg,{elevated:!0,css:ix.actionsWorktree,children:[(0,O.tZ)(X.hU,{css:ix.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:d?(0,O.tZ)(j.Z,{}):(0,O.tZ)(ip.Z,{css:ix.discardIcon})}),(0,O.tZ)("div",{css:ix.divider}),(0,O.tZ)(X.hU,{css:ix.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:c?(0,O.tZ)(j.Z,{}):(0,O.tZ)(nP.Z,{})})]})}var ik=(0,H.X)({modifiedFile:[q.l0.py(2),q.l0.rowWithGap(4),q.l0.align.center]});function iS(e){var t,n=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,c=e.onFilePathClick,s=null==a?void 0:a.get(n.path),u=null===(t=n.source)||void 0===t?void 0:t.path,d="index"===r?n.type.index:n.type.worktree,f=(0,ef.Z)(function(){if(d!==ti.hF.DELETED)return function(){return c({path:n.path})}},[n.path,c,d]);return(0,O.BX)(V.G,{css:ik.modifiedFile,children:[(0,O.tZ)(im,{path:n.path,prefix:s,source:u,onClick:f}),(0,O.tZ)(t_,{type:d}),(0,O.tZ)(iC,{file:n,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var i_=(0,H.X)({actions:[q.l0.rowWithGap(2),q.l0.backgroundColor.backgroundHighest,q.l0.borderRadius(8)],buttonDiscard:[q.l0.borderRadius(8,0,0,8)],buttonStage:[q.l0.borderRadius(0,8,8,0)],divider:[q.l0.my(8),q.l0.width(1),q.l0.backgroundColor.outlineStronger]});function iT(e){var t=e.type,n=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,L._)((0,Q.useState)(!1),2),l=a[0],c=a[1],s=(0,L._)((0,Q.useState)(!1),2),u=s[0],d=s[1];function f(){return p.apply(this,arguments)}function p(){return(p=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(o)return[2];return c(!0),[4,n({all:"index"!==t})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function h(){return(h=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==t)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===t?(0,O.tZ)(ey.zx,{text:"Unstage All",iconLeft:l?(0,O.tZ)(j.Z,{}):(0,O.tZ)(iZ.Z,{}),onClick:f,disabled:o,loading:l,size:"small"}):(0,O.BX)(V.G,{css:i_.actions,children:[(0,O.tZ)(ey.zx,{css:i_.buttonDiscard,text:"Discard All",iconLeft:u?(0,O.tZ)(j.Z,{}):(0,O.tZ)(ip.Z,{}),onClick:function(){return h.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,O.tZ)("div",{css:i_.divider}),(0,O.tZ)(ey.zx,{css:i_.buttonStage,text:"Stage All",iconLeft:l?(0,O.tZ)(j.Z,{}):(0,O.tZ)(nP.Z,{}),onClick:f,disabled:o,loading:l,size:"small"})]})}var iE=(0,H.X)({list:[q.l0.pt(4),q.l0.pb(8),q.l0.colWithGap(4)],listFolded:[q.l0.py(4)],header:[q.l0.px(8),q.l0.rowWithGap(4),q.l0.align.center],headerFoldable:[q.l0.py(4),q.l0.pl(4),q.l0.pr(8),q.l0.rowWithGap(4),q.l0.align.center],headerText:[q.l0.flex.grow(1)],body:[q.l0.px(8),q.l0.maxHeight("25vh"),q.l0.overflowY("auto")]});function iR(e){var t,n=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,c=e.foldable,s=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,f=(0,L._)((0,Q.useState)(!1),2),p=f[0],h=f[1],m=(0,Q.useRef)(null),g=(0,Q.useRef)(null),v=(0,nE.MG)({count:n.length,getScrollElement:function(){return g.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),y=v.getVirtualItems();return s&&p?(0,O.tZ)(V.G,{css:iE.listFolded,children:(0,O.BX)(V.G,{css:s?iE.headerFoldable:iE.header,children:[(0,O.tZ)(iD,{files:n,type:r,setFolded:h,foldable:!0,folded:!0}),(0,O.tZ)(iT,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,O.BX)(V.G,{innerRef:m,css:iE.list,children:[(0,O.BX)(V.G,{css:s?iE.headerFoldable:iE.header,children:[(0,O.tZ)(iD,{files:n,type:r,setFolded:h,foldable:s}),(0,O.tZ)(iT,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,O.tZ)(V.K.div,{ref:g,css:iE.body,children:(0,O.tZ)("div",{style:{minHeight:v.getTotalSize()},children:(0,O.tZ)("div",{style:{transform:"translateY(".concat(null===(t=y[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:y.map(function(e){var t=n[e.index];return(0,O.tZ)("div",{"data-index":e.index,children:(0,O.tZ)(iS,{file:t,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},t.path)},e.key)})})})})]})}function iD(e){var t=e.files,n=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,eV.Z)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,O.BX)(O.HY,{children:[(0,O.tZ)(X.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,O.tZ)(tC.Z,{})}),(0,O.tZ)(W.xv,{css:iE.headerText,multiline:!1,children:c})]}):(0,O.BX)(O.HY,{children:[o?(0,O.tZ)(X.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,O.tZ)(tk.Z,{color:q.TV.foregroundDimmest})}):null,(0,O.tZ)(W.xv,{css:iE.headerText,color:"dimmest",multiline:!1,children:c})]})}var iI=n(73551),iB=[{"& > span:first-child":[q.l0.flex.grow(1),q.l0.textAlign.left]},{"& > span":[q.l0.flex.shrink(1)]}],iA=(0,H.X)({buttonFolded:[iB,q.l0.height("auto"),q.l0.py(8),q.l0.fontWeight.medium],buttonUnfolded:[iB,q.l0.height("auto"),q.l0.py(8),q.l0.fontWeight.medium,q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"}),q.l0.borderRadius(8,8,0,0)],container:[q.l0.flex.grow(1),q.l0.borderRadius(8)],lists:[q.l0.borderRadius(0,0,8,8)],divider:[q.l0.height(1),q.l0.minHeight(1),q.l0.width("100%"),q.l0.backgroundColor.outlineDimmer],autoStageMessage:[q.l0.pt(4),q.l0.pb(8),q.l0.px(4),q.l0.center],noChangesMessage:[q.l0.py(16),q.l0.px(4),q.l0.center],buttonText:[q.l0.flex.grow(1)],details:[q.l0.rowWithGap(4),q.l0.fontWeight.normal,q.l0.color.foregroundDimmest]});function iP(e){var t,n,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,s=(0,L._)((0,Q.useState)(!1),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(!1),2),p=f[0],h=f[1],m=(0,L._)((0,Q.useState)(!1),2),g=m[0],v=m[1],y=(0,Q.useMemo)(function(){return(0,iI.w)(r.changes.map(function(e){return e.path}))},[r]),b=(0,L._)((0,Q.useMemo)(function(){var e=[],t=[],n=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==ti.hF.UNMODIFIED&&t.push(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]},[r.changes]),2),w=b[0],Z=b[1],x=w.length>0&&Z.length>0,C=iw(y),k=C.openRestoreConfirmationModal,S=C.restoreConfirmationModal,_=(0,Q.useCallback)((t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return h(!0),[4,i(e)];case 1:return t.sent(),h(!1),[3,4];case 2:return[4,i(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[i]),T=(0,Q.useCallback)((n=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return v(!0),[4,k(Z)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return v(!1),[3,8];case 4:if("string"==typeof e){if(!(n=Z.find(function(t){return t.path===e})))throw v(!1),Error("Could not find file in worktree list");t=[n]}else t=Z.filter(function(t){return e.includes(t.path)});return[4,k(t)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:v(!1),r.label=8;case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),[k,o,Z]);return u?(0,O.tZ)(iG,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c,folded:!0}):0===w.length&&0===Z.length?(0,O.BX)(V.G,{style:{opacity:c?.725:void 0},css:iA.container,children:[(0,O.tZ)(iG,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,O.tZ)(eb.Tg,{css:iA.lists,elevated:!0,children:(0,O.tZ)(V.G,{css:iA.noChangesMessage,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,O.BX)(O.HY,{children:[(0,O.BX)(V.G,{style:{opacity:c?.725:void 0},css:iA.container,children:[(0,O.tZ)(iG,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,O.BX)(eb.Tg,{css:iA.lists,elevated:!0,children:[0===w.length?null:(0,O.tZ)(iR,{type:"index",files:w,stageFiles:_,restoreFiles:T,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||p||g}),x?(0,O.tZ)("div",{css:iA.divider}):null,0===Z.length?null:(0,O.BX)(O.HY,{children:[(0,O.tZ)(iR,{type:"worktree",files:Z,stageFiles:_,restoreFiles:T,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||p||g}),x?null:(0,O.tZ)(V.G,{css:iA.autoStageMessage,children:(0,O.tZ)(W.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),S]})}function iG(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,O.tZ)(ey.zx,{css:n?iA.buttonFolded:iA.buttonUnfolded,text:"Review Changes",secondaryText:(0,O.tZ)(iL,{folded:n,changeCount:i,stagedCount:o}),onClick:function(){return r(!n)},iconRight:n?(0,O.tZ)(tC.Z,{}):(0,O.tZ)(tk.Z,{}),disabled:void 0!==a&&a,size:"small"})}function iL(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var i=n>0,o=r>0;return i||o?(0,O.BX)("span",{css:iA.details,children:[i?(0,O.BX)("span",{children:[n," ",(0,eV.Z)("change",n)]}):null,i&&o?(0,O.tZ)("span",{children:"/"}):null,o?(0,O.BX)("span",{children:[r," staged"]}):null]}):(0,O.tZ)("span",{css:iA.details,children:(0,O.tZ)("span",{children:"no changes"})})}var iN=n(54236),iO=n(28949),iU=n(97432),iM=n(14074),iX=n(23271),iF=n(85551),iW=n(41844),iV=n(31252),iH=n(10126),iz={height:32,width:"100%",resize:"none",border:"none"},ij={width:"100%",resize:"none",border:"none"},iq=(0,H.X)({surface:[q.l0.p(8),q.l0.colWithGap(12),q.l0.borderRadius(0,0,8,8)],button:[q.l0.height("auto"),q.l0.py(8),q.l0.fontWeight.medium,q.l0.borderRadius(8,8,0,0),q.l0.justify.start,q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[q.l0.display.inlineFlex,q.l0.rowWithGap(4)],subjectField:[q.l0.colWithGap(8)],subjectFieldHeader:[q.l0.flex.row,q.l0.center,q.l0.justify.spaceBetween],bodyField:[q.l0.colWithGap(8)],subjectInput:iz,bodyInput:ij,subjectInputDisabled:[iz,{opacity:.5}],bodyInputDisabled:[ij,{opacity:.5}],required:[q.l0.color.accentNegativeStronger],keyCombo:[q.l0.display.inlineFlex,q.l0.rowWithGap(4),q.l0.flex.grow(1),q.l0.align.center],keyComboText:[q.l0.fontWeight.normal,q.l0.color.foregroundDimmest]});function iJ(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,L._)((0,Q.useState)(!0),2),l=a[0],c=a[1],s=(0,L._)((0,Q.useState)(!1),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(!1),2),p=f[0],h=f[1],m=(0,Q.useRef)(null),g=(0,Q.useRef)(null),v=(0,em._)(t.split("\n\n")),y=v[0],b=void 0===y?"":y,w=v.slice(1).join("\n\n"),Z=(0,iU.d)();function x(e,t){i((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var C=(0,iV.gf)(iW.CN.gitCommit.id);return(0,iH.ow)(iW.CT,p),(0,iV.Il)(function(){return[iW.CN.gitCommit.id,{run:function(){null==o||o()},scope:iW.CT,bubble:!1}]},[o]),(0,O.BX)(V.G,{children:[(0,O.tZ)(ey.zx,{css:iq.button,text:(0,O.BX)("span",{css:iq.requiredText,children:[(0,O.tZ)("span",{children:"Message"}),l?(0,O.tZ)(iK,{}):null]}),secondaryText:Z||!C?void 0:(0,O.BX)("span",{css:iq.keyCombo,children:[(0,O.tZ)("span",{css:iq.keyComboText,children:"Commit:"}),(0,O.tZ)(iV.bM,{keyCombo:C,small:!0})]}),iconRight:l?(0,O.tZ)(tC.Z,{}):(0,O.tZ)(tk.Z,{}),onClick:function(){return c(function(e){return!e})},size:"small"}),(0,O.BX)(eb.Tg,{css:iq.surface,elevated:!0,children:[(0,O.tZ)(iY,{ref:m,value:b,compact:l,disabled:r,onChange:function(e){x(e,w)},onNewline:function(){if(l)c(!1),d(!0);else{if(!g.current)return;g.current.focus(),g.current.setSelectionRange(0,0)}},onFocus:function(){h(!0)},onBlur:function(){h(!1)}}),l&&!w?null:(0,O.tZ)(i$,{ref:g,value:w,compact:l,disabled:r,onChange:function(e){if(x(b,e),l&&!e){var t;null===(t=m.current)||void 0===t||t.focus()}else l&&c(!1)},onBackspaceWhenEmpty:function(){m.current&&m.current.focus()},onFocus:function(){u&&d(!1),h(!0)},onBlur:function(){h(!1)},autoFocus:u})]})]})}var iY=(0,Q.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,c=e.onNewline,s=e.onFocus,u=e.onBlur,d=(0,iN.Un)(),f=(0,J.Z)().container,p=(0,iN.sg)({onResponse:function(e){var t;null==l||l(e||""),null===(t=g.current)||void 0===t||t.focus()}}),h=p.sendMessage,m=p.loading,g=(0,Q.useRef)(null),v=(0,iO.Z)().ref;function y(){return(y=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:return[4,f.exec("git","diff")];case 1:return[2,e.sent().output||""]}})})).apply(this,arguments)}function b(){return(b=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[2];return[4,function(){return y.apply(this,arguments)}()];case 1:return e=t.sent(),h("You are a helpful robot that conducts code reviews","Based on this diff: ".concat(e," can you write a helpful summary of changes in this commit? Only write two sentences.")),[2]}})})).apply(this,arguments)}return(0,O.BX)(V.G,{css:iq.subjectField,children:[i?null:(0,O.BX)(V.G,{css:iq.subjectFieldHeader,children:[(0,O.tZ)(W.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,O.BX)("span",{css:iq.requiredText,children:[(0,O.tZ)("span",{children:"Summary"}),(0,O.tZ)(iK,{})]})}),(0,O.tZ)(iX.T,{iconLeft:m?(0,O.tZ)(j.Z,{}):(0,O.tZ)(iF.Z,{}),text:"Summarize with AI",onClick:function(){return b.apply(this,arguments)}})]}),(0,O.tZ)(eg.B,{ref:i?t:(0,iM.l)(t,v,g),css:a?iq.subjectInputDisabled:iq.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:s,onBlur:u})]})}),i$=(0,Q.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,c=e.onChange,s=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,f=(0,iO.Z)().ref;return(0,O.BX)(V.G,{css:iq.bodyField,children:[i?null:(0,O.tZ)(W.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,O.tZ)(eg.B,{ref:i?t:(0,iM.l)(t,f),css:a?iq.bodyInputDisabled:iq.bodyInput,placeholder:"Description of your commit...",value:n,disabled:a,onChange:function(e){return null==c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function iK(){return(0,O.tZ)(tO.u,{tooltip:"This field is required.",placement:"top",children:(0,O.tZ)("span",{css:iq.required,children:"*"})})}var iQ=(0,H.X)({commitArea:[q.l0.colWithGap(8)]});function i0(e){var t=e.status,n=e.onStagedFileClick,r=e.defaultMessage,i=(0,L._)((0,Q.useState)(t),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(null!=r?r:""),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(0),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(!1),2),h=p[0],m=p[1],g=n_();(0,Q.useEffect)(function(){return a(t)},[t]);var v=(0,J.Z)().git;if(!o||!o.changes.length)return(0,O.tZ)(V.G,{css:iQ.commitArea,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var y=o.changes.length,b=o.changes.filter(function(e){return e.staged}).length;function w(){return(w=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(h)return[2];return f(function(e){return e+1}),[4,v.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,v.status()];case 2:return(n=r.sent()).error?(tV({context:"commit-area-status",gitService:v,result:n,data:{opts:e}}),g(n.error)):a(n),v.forceRefresh(),[3,4];case 3:g(t.error),tV({context:"commit-area-stage-files",gitService:v,result:t,data:{opts:e}}),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function Z(){return(Z=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(h)return[2];return f(function(e){return e+1}),[4,v.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,v.status()];case 2:return(n=r.sent()).error?(tV({context:"commit-area-status",gitService:v,result:n,data:{files:e}}),g(n.error)):a(n),v.forceRefresh(),[3,4];case 3:tV({context:"commit-area-restore-files",gitService:v,result:t,data:{files:e}}),g(t.error),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,tM._)(function(){var e,t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(""===c||h||0===y||d>0)return[2];if(m(!0),0!==b)return[3,2];return[4,v.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,v.commit({message:c})];case 3:if(!(e=n.sent()).error)return[3,4];return m(!1),g(e.error),tV({context:"commit-area-commit",gitService:v,result:e,data:{message:c}}),[3,6];case 4:return(0,nj.J)("commit-created",{hasDescription:-1!==c.trim().indexOf("\n\n")}),[4,v.status()];case 5:t=n.sent(),m(!1),t.error?(g(t.error),tV({context:"commit-area-status",gitService:v,result:t,data:{message:c}})):(s(""),a(t)),v.forceRefresh(),n.label=6;case 6:return[2]}})})).apply(this,arguments)}var k="Nothing to commit";if(h)k="Committing...";else if(b>0&&b<y){var S=(0,eV.Z)("change",b);k="Commit ".concat(b," staged ").concat(S)}else y>0&&(k="Stage and commit all changes");var _=!c||0===y||d>0||h;return(0,O.BX)(V.G,{css:iQ.commitArea,children:[(0,O.tZ)(iJ,{message:c,disabled:h,onMessageChange:s,onCommitShortcut:x}),(0,O.tZ)(iP,{status:o,stageFiles:function(e){return w.apply(this,arguments)},restoreFiles:function(e){return Z.apply(this,arguments)},onStagedFileClick:n,disabled:h}),_?(0,O.tZ)(tO.u,{tooltip:d>0?"Changes in progress":0===y?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,O.tZ)(ey.zx,{text:k,onClick:x,disabled:_,loading:h,colorway:"primary",iconLeft:(0,O.tZ)(rw.Z,{}),stretch:!0})}):(0,O.tZ)(ey.zx,{text:k,onClick:x,disabled:_,loading:h,colorway:"primary",iconLeft:(0,O.tZ)(rw.Z,{}),stretch:!0})]})}var i1=/\s\(#(\d+)\)$/,i2=/^Revert "(.+)"/,i3=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function i4(e){var t=i2.exec(e.subject),n=i3.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=i1.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var i8=/\B#\d+\b/g,i6=/^Merged? pull request (#\d+\b)/,i5=/^Merge branch '(.+)'/,i7=/into (.+)$/;function i9(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(i8);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return i1.test(e.subject)&&(n=e.subject.replace(i1,"").trim()),!n&&i6.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:i4(e)}}}if(i6.test(e.subject)){var i,o=i6.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:i4(e)}}if(i5.test(e.subject)){var a=i5.exec(e.subject);if(a){var l=i7.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var oe=n(59140),ot={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(q.TV.purpleStrongest),borderRadius:"50%"},on=(0,H.X)({markerContainer:[q.l0.display.flex,q.l0.align.center,q.l0.justify.center,q.l0.minHeight(20),q.l0.minWidth(20)],commitMarker:[q.l0.height(4),q.l0.width(4),q.l0.backgroundColor.foregroundDefault,q.l0.borderRadius("full")],collapsedMarkerIconDot:[q.l0.height(3),q.l0.width(3),q.l0.backgroundColor.foregroundDimmer,q.l0.borderRadius("full")],collapsedMarkerIconContainer:[q.l0.display.flex,q.l0.align.center,q.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[q.l0.display.flex,q.l0.align.center,q.l0.justify.center,q.l0.height(20),q.l0.width(20),q.l0.backgroundColor.backgroundHighest,q.l0.borderRadius("full")],revertMarker:[q.l0.display.flex,q.l0.height(20),q.l0.width(20),q.l0.backgroundColor.orangeDimmest,q.l0.borderRadius("full"),q.l0.align.center,q.l0.justify.center],mergeMarker:[q.l0.display.flex,q.l0.height(20),q.l0.width(20),q.l0.backgroundColor.purpleDimmest,q.l0.borderRadius("full"),q.l0.align.center,q.l0.justify.center],mergeMarkerIconContainer:[q.l0.position.relative,q.l0.height(9),q.l0.width(13)],mergeMarkerIconLeft:[(0,ep._)({},ot),q.l0.left(0)],mergeMarkerIconRight:[(0,ep._)({},ot),q.l0.right(0)],boundaryMarker:[q.l0.height(6),q.l0.width(6),q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius("full"),{border:"1px solid ".concat(q.TV.backgroundHighest)}]});function or(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,O.tZ)(oi,{});case"revert":return(0,O.tZ)(oo,{});case"merge":return(0,O.tZ)(oa,{});case"boundary":return(0,O.tZ)(ol,{});case"collapsed":return(0,O.tZ)(oc,{})}}(e.type);return t?(0,O.tZ)("div",{css:on.markerContainer,children:t}):null}function oi(){return(0,O.tZ)("div",{css:on.commitMarker})}function oo(){return(0,O.tZ)("div",{css:on.revertMarker,children:(0,O.tZ)(ip.Z,{size:12,color:q.TV.orangeStrongest})})}function oa(){return(0,O.tZ)("div",{css:on.mergeMarker,children:(0,O.BX)("div",{css:on.mergeMarkerIconContainer,children:[(0,O.tZ)("div",{css:on.mergeMarkerIconLeft}),(0,O.tZ)("div",{css:on.mergeMarkerIconRight})]})})}function ol(){return(0,O.tZ)("div",{css:on.boundaryMarker})}function oc(){return(0,O.tZ)("div",{css:on.collapsedMarker,children:(0,O.BX)("div",{css:on.collapsedMarkerIconContainer,children:[(0,O.tZ)("div",{css:on.collapsedMarkerIconDot}),(0,O.tZ)("div",{css:on.collapsedMarkerIconDot}),(0,O.tZ)("div",{css:on.collapsedMarkerIconDot})]})})}var os=[q.l0.position.absolute,q.l0.left(0),q.l0.width(18)],ou=(0,H.X)({connectorSegmentBorderSolid:[os,{borderRight:"1px solid ".concat(q.TV.outlineDimmest)}],connectorSegmentBorderDashed:[os,{borderRight:"1px dashed ".concat(q.TV.outlineDimmest)}]});function od(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,c=void 0!==l&&l,s=e.hideBottom,u=void 0!==s&&s;if(c&&u)return null;if(n===i&&!c&&!u)return(0,O.tZ)(op,{top:0,bottom:0,dashed:n&&i});var d=c?null:(0,O.tZ)(of,{start:"top",joint:a,dashed:n}),f=u?null:(0,O.tZ)(of,{start:"bottom",joint:a,dashed:i});return(0,O.BX)(O.HY,{children:[d,f]})}function of(e){var t,n,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(t={},(0,tr._)(t,r,0),(0,tr._)(t,"height","50%"),t):(n={},(0,tr._)(n,r,0),(0,tr._)(n,r===i?"height":i,8),n);return(0,O.tZ)(op,(0,eh._)((0,ep._)({},a),{dashed:void 0!==o&&o}))}function op(e){var t=e.top,n=e.bottom,r=e.height,i=e.dashed;return(0,O.tZ)("div",{css:void 0!==i&&i?ou.connectorSegmentBorderDashed:ou.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var oh=(0,H.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[nD.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[q.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[q.l0.mt(4),q.l0.mb(8),q.l0.p(8),q.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[q.l0.position.relative]});function om(e){var t=e.boundaryTop,n=e.boundaryBottom,r=void 0!==n&&n,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,c=void 0===l?"top":l,s=e.marker,u=e.header,d=e.unfoldedContent,f=e.children,p=e.className,h=(0,L._)((0,Q.useState)(!0),2),m=h[0],g=h[1];return(0,O.BX)(V.G,{className:p,css:q.l0.position.relative,children:[(0,O.tZ)(od,{boundaryTop:void 0!==t&&t,boundaryBottom:r,joint:c,hideTop:void 0!==i&&i,hideBottom:a}),s?(0,O.tZ)(ov,{joint:c,children:s}):null,d?(0,O.BX)(V.G,{css:oh.containerInteractive,role:"button",tabIndex:0,onClick:function(){g(!m)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&g(!m)},children:[m?(0,O.tZ)("div",{css:oh.nodeFoldedIconContainer,children:(0,O.tZ)(tC.Z,{})}):(0,O.tZ)("div",{css:oh.nodeUnFoldedIconContainer,children:(0,O.tZ)(tk.Z,{})}),(0,O.BX)(V.G,{css:oh.nodeContentContainer,children:[u?(0,O.tZ)(V.G,{css:oh.nodeHeader,children:u}):null,f?(0,O.tZ)(V.G,{children:f}):null]})]}):(0,O.tZ)(V.G,{css:oh.container,children:(0,O.BX)(V.G,{css:oh.nodeContentContainer,children:[u?(0,O.tZ)(V.G,{css:oh.nodeHeader,children:u}):null,f?(0,O.tZ)(V.G,{children:f}):null]})}),!d||m?null:(0,O.BX)(V.G,{css:oh.unfoldedContentContainer,children:[a?null:(0,O.tZ)(op,{top:0,bottom:0,dashed:r}),(0,O.tZ)(eb.Tg,{css:oh.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var og=(0,H.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function ov(e){var t=e.joint,n=e.children;return(0,O.tZ)("div",{css:og[void 0===t?"top":t],children:n})}var oy=(0,H.X)({container:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.justify.spaceBetween,q.l0.height("100%")],textContainer:[q.l0.rowWithGap(4),q.l0.center],text:[q.l0.flex.shrink(0)]});function ob(e){var t=e.text,n=(0,tl._)(e,["text"]);return(0,O.tZ)(om,(0,ep._)({marker:(0,O.tZ)(or,{type:"boundary"}),joint:"center",header:(0,O.BX)(V.G,{css:oy.container,children:[(0,O.tZ)(nR.R,{}),(0,O.BX)(V.G,{css:oy.textContainer,children:[(0,O.tZ)(oe.Z,{size:12,color:q.TV.foregroundDimmest}),(0,O.tZ)(W.xv,{css:oy.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,O.tZ)(nR.R,{})]})},n))}var ow=(0,H.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:q.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:q.TV.space2},"> dd":{marginLeft:q.TV.space12,paddingBottom:q.TV.space2}},listHeader:[q.l0.fontWeight.medium],content:[q.l0.colWithGap(8)],description:[q.l0.colWithGap(8)],commitList:[q.l0.colWithGap(2),q.l0.pl(4)]}),oZ=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},ox=function(e){var t=e.hash;return(0,O.tZ)(tx.q,{size:"small",iconLeft:(0,O.tZ)(eZ.Z,{}),textToCopy:t,text:t.slice(0,7),tooltipSuccessText:"Hash copied!"})},oC=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,O.tZ)(tO.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,O.tZ)(ey.zx,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,O.tZ)(j.Z,{}):(0,O.tZ)(ip.Z,{})})})},ok=function(e,t){return!(e.name===t.name&&e.email===t.email)},oS=function(e,t){return!(6e4>Math.abs(e-t))};function o_(e){var t=e.commit,n=e.info,r=ok(t.committer,t.author),i=oS(t.author.date,t.committer.date),o=oZ(t,void 0===n?null:n),a=o.hideBody,l=o.merge,c=o.revert;return(0,O.BX)(V.G,{css:ow.content,children:[a?null:(0,O.BX)(V.G,{css:ow.description,children:[(0,O.tZ)(W.xv,{children:(0,O.tZ)(nq.uJ,{body:t.body})}),(0,O.tZ)(nR.R,{css:q.l0.backgroundColor.outlineDimmer})]}),(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{css:ow.listHeader,multiline:!1,children:"Author"}),(0,O.BX)("dl",{css:ow.definitionList,children:[(0,O.tZ)("dt",{children:"Name:"}),(0,O.tZ)("dd",{children:t.author.name}),(0,O.tZ)("dt",{children:"Email:"}),(0,O.tZ)("dd",{children:t.author.email})]})]}),r?(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{css:ow.listHeader,multiline:!1,children:"Committer"}),(0,O.BX)("dl",{css:ow.definitionList,children:[(0,O.tZ)("dt",{children:"Name:"}),(0,O.tZ)("dd",{children:t.committer.name}),(0,O.tZ)("dt",{children:"Email:"}),(0,O.tZ)("dd",{children:t.committer.email})]})]}):null,(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{css:ow.listHeader,multiline:!1,children:"Commit"}),(0,O.BX)("dl",{css:ow.definitionList,children:[i?(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"Authored:"}),(0,O.tZ)("dd",{children:(0,O.tZ)(nA.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,O.tZ)("dt",{children:"Committed:"}),(0,O.tZ)("dd",{children:(0,O.tZ)(nA.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"Date:"}),(0,O.tZ)("dd",{children:(0,O.tZ)(nA.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,O.tZ)("dt",{children:"Hash:"}),(0,O.tZ)("dd",{children:(0,O.tZ)(ox,{hash:t.hash})}),l&&"pull-request"===l.type?(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"PR:"}),(0,O.BX)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"Merged:"}),(0,O.tZ)("dd",{children:l.source}),l.target?(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"Into:"}),(0,O.tZ)("dd",{children:l.target})]}):null]}):null,c?(0,O.BX)(O.HY,{children:[(0,O.tZ)("dt",{children:"Reverted:"}),(0,O.tZ)("dd",{children:c.hash})]}):null]})]}),l&&"simple"===l.type?(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{css:ow.listHeader,multiline:!1,children:"Merged"}),(0,O.BX)(V.G,{css:ow.commitList,children:[(0,O.tZ)(W.xv,{multiline:!1,children:l.a}),(0,O.tZ)(W.xv,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{css:ow.listHeader,multiline:!1,children:"Merged"}),(0,O.tZ)(V.G,{css:ow.commitList,children:l.parents.map(function(e,t){return(0,O.tZ)(W.xv,{multiline:!1,children:e},t)})})]}):null]})}var oT=(0,H.X)({authorContainer:[q.l0.rowWithGap(8),q.l0.align.center],headerText:[q.l0.rowWithGap(4),q.l0.flex.row,q.l0.align.stretch,q.l0.fontWeight.medium,q.l0.flex.wrap],headerContainer:[q.l0.colWithGap(4),q.l0.align.start,q.l0.justify.start],button:[q.l0.reset.button,q.l0.linkStyle,q.l0.color.foregroundDefault,q.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),oE=function(e){var t=e.author;return(0,O.BX)(V.G,{css:oT.authorContainer,children:[(0,O.tZ)(nH,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,O.tZ)(nA.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},oR=function(e){var t=e.children;return(0,O.tZ)(W.xv,{css:oT.headerText,multiline:!1,maxLines:1,children:t})},oD=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,O.tZ)(V.G,{css:oT.headerContainer,children:(0,O.tZ)(tO.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,O.tZ)("button",{css:oT.button,onClick:function(){return n(t.hash)},children:r})})})};function oI(e){var t=e.commit,n=(0,tl._)(e,["commit"]);return(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"commit"}),header:(0,O.tZ)(oR,{children:(0,O.tZ)(nq.Zr,{subject:t.subject})}),unfoldedContent:(0,O.tZ)(o_,{commit:t})},n),{children:(0,O.tZ)(oE,{author:t.author})}))}var oB=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,tl._)(e,["commit","onViewCommitClick"]);return(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"commit"}),header:(0,O.tZ)(oD,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,O.tZ)(oR,{children:(0,O.tZ)(nq.Zr,{subject:t.subject})})})},r),{children:(0,O.tZ)(oE,{author:t.author})}))};function oA(e){var t,n=e.commit,r=e.info,i=(0,tl._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"merge"}),header:(0,O.BX)(oR,{children:[(0,O.tZ)(nq.ST,{text:"merged"}),(0,O.tZ)(oG,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,O.tZ)(o_,{commit:n,info:r})},i),{children:(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[t?(0,O.tZ)(W.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,O.tZ)(nq.Zr,{subject:t})}):null,(0,O.tZ)(oE,{author:n.author})]})}))}var oP=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,tl._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"merge"}),header:(0,O.tZ)(oD,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,O.BX)(oR,{children:[(0,O.tZ)(nq.ST,{text:"merged"}),(0,O.tZ)(oG,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[t?(0,O.tZ)(W.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,O.tZ)(nq.Zr,{subject:t})}):null,(0,O.tZ)(oE,{author:n.author})]})}))};function oG(e){var t=e.info,n=e.hash,r=e.subject,i=(0,O.tZ)("span",{css:q.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"pull request"}),(0,O.tZ)(nq.$8,{id:t.id}),t.reverts&&t.reverts.pr?(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"-"}),(0,O.tZ)(nq.po,{text:"reverts"}),(0,O.tZ)(nq.$8,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"branch"}),(0,O.tZ)(nq.Lr,{name:t.source})]});return(0,O.BX)(O.HY,{children:[(0,O.tZ)(nq.Lr,{name:t.source}),(0,O.tZ)("span",{children:"into"}),(0,O.tZ)(nq.Lr,{name:t.target})]});case"simple":return(0,O.BX)(O.HY,{children:[(0,O.tZ)(nq.kb,{hash:t.a}),(0,O.tZ)(r3.Z,{css:{alignSelf:"center"},size:12}),(0,O.tZ)(nq.kb,{hash:t.b})]});case"octopus":return(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"commit"}),(0,O.tZ)(nq.kb,{hash:n}),(0,O.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function oL(e){var t=e.commit,n=e.info,r=(0,tl._)(e,["commit","info"]);return(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"revert"}),header:(0,O.BX)(oR,{children:[(0,O.tZ)(nq.po,{text:"reverted"}),(0,O.tZ)(nq.kb,{hash:n.hash}),(0,O.tZ)(nq.Zr,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,O.tZ)(o_,{commit:t,info:n})},r),{children:(0,O.tZ)(oE,{author:t.author})}))}var oN=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,tl._)(e,["commit","info","onViewCommitClick"]);return(0,O.tZ)(om,(0,eh._)((0,ep._)({marker:(0,O.tZ)(or,{type:"revert"}),header:(0,O.tZ)(oD,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,O.BX)(oR,{children:[(0,O.tZ)(nq.po,{text:"reverted"}),(0,O.tZ)(nq.kb,{hash:n.hash}),(0,O.tZ)(nq.Zr,{subject:n.subject,quoted:!0})]})})},i),{children:(0,O.tZ)(oE,{author:t.author})}))},oO=(0,H.X)({body:[q.l0.flex.growAndShrink(1)],virtualItem:[q.l0.position.absolute,q.l0.top(0),q.l0.left(0),q.l0.width("100%"),q.l0.overflow("hidden")],virtualList:[q.l0.position.relative]}),oU=function(){return 60};function oM(e){var t=e.items,n=(0,Q.useRef)(null),r=(0,nE.MG)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:oU});return(0,O.tZ)("div",{ref:n,css:oO.body,children:(0,O.tZ)("div",{css:oO.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,O.tZ)("div",{css:oO.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,O.tZ)(oX,{items:t,index:e.index})},e.key)})})})}function oX(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,O.tZ)(ob,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,O.tZ)(oF,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function oF(e){var t=e.commit,n=e.onViewCommitClick,r=(0,tl._)(e,["commit","onViewCommitClick"]),i=i9(t);if(i)return n?(0,O.tZ)(oP,(0,ep._)({info:i,commit:t,onViewCommitClick:n},r)):(0,O.tZ)(oA,(0,ep._)({info:i,commit:t},r));var o=i4(t);return o?n?(0,O.tZ)(oN,(0,ep._)({info:o,commit:t,onViewCommitClick:n},r)):(0,O.tZ)(oL,(0,ep._)({info:o,commit:t},r)):n?(0,O.tZ)(oB,(0,ep._)({commit:t,onViewCommitClick:n},r)):(0,O.tZ)(oI,(0,ep._)({commit:t},r))}var oW=(0,eW.F4)({from:{opacity:0},to:{opacity:1}}),oV=(0,H.X)({loadingView:[{animation:"".concat(oW," 0.125s 0.25s linear backwards")},q.l0.flex.grow(1),q.l0.display.flex,q.l0.center]});function oH(){return(0,O.tZ)(V.G,{css:oV.loadingView,children:(0,O.tZ)(j.Z,{size:48})})}var oz=(0,H.X)({view:[q.l0.pt(4),q.l0.pb(8),q.l0.px(4),q.l0.colWithGap(8),q.l0.flex.grow(1)],sectionContainer:[q.l0.colWithGap(8)],section:[q.l0.pt(8),q.l0.pb(16),q.l0.px(8),q.l0.colWithGap(8),q.l0.border({color:q.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.justify.spaceBetween],reviewChangesHeader:[q.l0.rowWithGap(8),q.l0.align.center],headerText:[q.l0.fontWeight.medium],replMergingHeader:[q.l0.rowWithGap(8),q.l0.align.center],switchToBranch:[q.l0.p(4),q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.mt(0),q.l0.mb(0)]});function oj(e){var t,n,r,i,o,a=e.status,l=e.remotes,c=e.branch,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,f=e.gotoPendingState,p=e.current,h=void 0!==p&&p,m=e.performPaneOperation,g=h?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,v=h?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,y=(t=n_(),r=(0,tF.Z)((n=(0,tM._)(function(e){var t,n,r,i,o,a,l,s,u;return(0,tX.Jh)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((t=d.sent()).error)return tV({context:"use-branch-commits",gitService:e,result:t}),[2,{error:t.error}];if(!t.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!c)return[2,{error:null}];if(!(!c.tracking||0===g&&0===v))return[3,3];return n=(0,ti.bF)(c,!0),[4,e.log({max:100,revRange:n})];case 2:if((r=d.sent()).error)return tV({context:"use-branch-commits",gitService:e,result:r,data:{branch:c,behind:g,ahead:v,revision:n}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,ti.bF)(c),[4,Promise.all([e.log({max:100,revRange:c.name}),e.log({max:100,revRange:"".concat(c.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(c.name)})])];case 4:if(o=d.sent(),l=(a=(0,L._)(o,3))[0],s=a[1],u=a[2],l.error)return tV({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:c,behind:g,ahead:v,remoteBranch:i}}),[2,{error:l.error}];if(s.error)return tV({context:"use-branch-commits-only-remote",gitService:e,result:s,data:{branch:c,behind:g,ahead:v,remoteBranch:i}}),[2,{error:s.error}];if(u.error)return tV({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:c,behind:g,ahead:v,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:s.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c,g,v]),(0,Q.useMemo)(function(){if(!r)return null;if(r.error)return t(r.error),{error:r.error};var e=r.log,n=r.onlyRemote,i=r.onlyLocal;return n||i?(e&&(e=iu(e,null!=n?n:[],null!=i?i:[])),{log:e,onlyRemote:n,onlyLocal:i,error:null}):{log:e,error:null}},[t,r])),b=!!l&&l.size>0,w=(null==c?void 0:c.type)===ti.HO.LOCAL,Z=(0,Q.useMemo)(function(){if(!y||y.error)return[];var e=[],t=y.log,n=void 0===t?[]:t,r=y.onlyRemote,i=void 0===r?[]:r,o=y.onlyLocal,a=void 0===o?[]:o,l=n.length>0,c=i.length>0,s=a.length>0;return c&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,N._)(oq(i,u)))),s&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,N._)(oq(a,u)))),l&&((c||s)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,N._)(oq(n,u)))),e},[y,u]);return c?(0,O.BX)(V.G,{css:oz.view,children:[(0,O.BX)(V.G,{css:oz.sectionContainer,children:[w?(0,O.tZ)(V.G,{css:oz.section,children:(0,O.tZ)(rQ,{performPaneOperation:m,branch:c,onViewSettingsClick:d})}):null,h&&!w&&l&&b?(0,O.BX)(V.G,{css:oz.section,children:[(0,O.BX)(V.G,{css:oz.remoteUpdatesHeader,children:[(0,O.tZ)(W.xv,{css:oz.headerText,multiline:!1,children:"Remote Updates"}),(0,O.tZ)(r2,{branch:c,remotes:l})]}),(0,O.tZ)(is,{remotes:l,gotoPendingState:f})]}):null,h&&a?(0,O.BX)(V.G,{css:oz.section,children:[(0,O.tZ)(V.G,{css:oz.reviewChangesHeader,children:(0,O.tZ)(W.xv,{css:oz.headerText,multiline:!1,children:"Commit"})}),(0,O.tZ)(i0,{status:a,onStagedFileClick:s})]}):null]}),y?(0,O.tZ)(oM,{items:Z}):(0,O.tZ)(oH,{})]}):(0,O.tZ)("div",{children:"No branch"})}function oq(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function oJ(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var oY=(0,H.X)({branch:[nD.gU.nofill,q.l0.py(12),q.l0.px(8),q.l0.colWithGap(2),q.l0.justify.center,q.l0.borderRadius(8),q.l0.flex.shrink(1)],branchMetadata:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.flex.shrink(1)]});function o$(e){var t=e.branch,n=e.current,r=e.onClick;return(0,O.BX)(V.G,{css:oY.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,ti.bF)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,O.tZ)(W.xv,{multiline:!1,children:(0,O.tZ)(nq.Lr,{name:t.name,remote:t.type===ti.HO.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,O.tZ)(oK,{branch:t})]})}function oK(e){var t=e.branch;return(0,O.BX)(V.G,{css:oY.branchMetadata,children:[(0,O.tZ)(nH,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,O.tZ)(nA.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var oQ=(0,H.X)({expandButton:[{verticalAlign:"middle"},q.l0.justify.spaceBetween],branchListContainer:[q.l0.display.flex],topRow:[q.l0.p(4),q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},q.l0.justify.spaceBetween,q.l0.borderRadius(8,8,0,0)],branchList:[q.l0.borderRadius(8)],branchListFoldable:[q.l0.borderRadius(0,0,8,8)]});function o0(e){var t=e.name,n=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=e.switchBranch,s=(0,L._)((0,Q.useState)(!!a&&void 0!==l&&l),2),u=s[0],d=s[1],f=(0,Q.useMemo)(function(){return n.map(function(e){return(0,O.tZ)(o$,{branch:e,current:(0,ti.p3)(e,i),onClick:function(){return c(e)}},(0,ti.Qj)(e))})},[n,i,c]);return u?(0,O.tZ)(ey.zx,{css:oQ.expandButton,text:t,iconRight:(0,O.tZ)(tC.Z,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,O.BX)(V.G,{css:oQ.branchListContainer,children:[(0,O.tZ)(ey.zx,{css:oQ.topRowInteractive,text:t,iconRight:(0,O.tZ)(tk.Z,{}),onClick:function(){return d(!0)},size:"big"}),(0,O.tZ)(eb.Tg,{css:oQ.branchListFoldable,elevated:!0,children:f})]}):(0,O.BX)(V.G,{css:oQ.branchListContainer,children:[(0,O.tZ)(V.G,{css:oQ.topRow,children:(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,O.tZ)(eb.Tg,{css:oQ.branchList,elevated:!0,children:f})]})}var o1=(0,H.X)({container:[q.l0.p(8),q.l0.colWithGap(8),q.l0.borderRadius(8)],buttonContainer:[q.l0.rowWithGap(4)],button:[q.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function o2(){var e=(0,L._)((0,Q.useState)(!0),2),t=e[0],n=e[1],r=(0,L._)((0,Q.useState)(""),2),i=r[0],o=r[1],a=(0,L._)((0,Q.useState)(!1),2),l=a[0],c=a[1],s=n_(),u=(0,J.Z)().git;function d(){n(!0),o("")}function f(){return p.apply(this,arguments)}function p(){return(p=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(t||!i||l)return[2];return c(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(s(e.error),c(!1)):(u.forceRefresh(),c(!1),o(""),n(!0),(0,nj.J)("branch-created")),[2]}})})).apply(this,arguments)}if(t)return(0,O.tZ)(ey.zx,{text:"Create Branch",iconLeft:(0,O.tZ)(nP.Z,{}),onClick:function(){return n(!1)}});var h=!i||!(0,ti.Dc)(i);return(0,O.BX)(eb.Tg,{css:o1.container,elevated:!0,children:[(0,O.tZ)(o3,{value:i,onChange:o,onSubmit:f,onCancel:d,disabled:l}),(0,O.BX)(V.G,{css:o1.buttonContainer,children:[(0,O.tZ)(ey.zx,{css:o1.button,text:"Cancel",onClick:d,disabled:l}),(0,O.tZ)(ey.zx,{css:o1.button,text:"Create Branch",colorway:"primary",iconLeft:(0,O.tZ)(nP.Z,{}),onClick:f,loading:l,disabled:h})]})]})}function o3(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,ti.dC)(e)&&(null==r||r(e))}return(0,O.tZ)(eg.II,{value:t,css:n?o1.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null==i||i(),n();break;case"Escape":null==o||o(),n();break;case" ":if(""===t){n();break}a(t+"-"),n()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function o4(e){var t,n,r=e.currentBranch,i=e.switchMode,o=n_(),a=(0,J.Z)().git,l=(0,L._)((0,Q.useState)(null),2),c=l[0],s=l[1],u=(0,tF.Z)((t=(0,tM._)(function(e){var t,n,r,i,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w;return(0,tX.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.listBranches()];case 1:if((t=Z.sent()).error)return o(t.error),tV({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=Z.sent()).error)return o(n.error),[2,n];r=t.branches,i=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find(function(t){return(0,ti.Pi)(t,e)});t&&i.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,p=[],h=[],m=!0,g=!1,v=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,i.has(w)||(w.commit.author.date>f?p.push(w):h.push(w))}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}return[2,{active:p,stale:h,important:Array.from(i),error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(n=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(null!==c)return[2];return(0,ti.Pi)(r,e)&&i({mode:b.CURRENT_BRANCH}),s(e),[4,a.switchBranch(e)];case 1:return(t=n.sent()).error?(o(t.error),tV({context:"dashboard-view",gitService:a,result:t,data:{branch:e.name}}),s(null)):(a.forceRefresh(),(0,nj.J)("branch-switched")),[2]}})}),function(e){return n.apply(this,arguments)});if((0,Q.useEffect)(function(){null!==c&&(0,ti.Pi)(r,c)&&(s(null),i({mode:b.CURRENT_BRANCH}))},[r,c,i]),!u||null!==c)return(0,O.tZ)(oH,{});if(u.error)return(0,O.tZ)("div",{children:u.error});var f=u.active,p=u.stale,h=u.important;return(0,O.tZ)(V.G,{css:[q.l0.colWithGap(8)],children:(0,O.BX)(V.G,{css:[q.l0.pb(8),q.l0.px(8),q.l0.colWithGap(16)],children:[r?(0,O.BX)(V.G,{css:q.l0.colWithGap(8),children:[(0,O.tZ)(o0,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,O.tZ)(o2,{})]}):null,(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,css:oz.switchToBranch,children:"Switch Branch"}),0===h.length?null:(0,O.tZ)(o0,{branches:h,current:r,name:"Important",switchBranch:d,foldable:!0}),0===f.length?null:(0,O.tZ)(o0,{branches:f,current:r,name:"Active",switchBranch:d,foldable:!0}),0===p.length?null:(0,O.tZ)(o0,{branches:p,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function o8(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please checkout a branch."})]})}function o6(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function o5(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,O.tZ)(W.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var o7=(0,H.X)({container:[q.l0.colWithGap(16),q.l0.p(8),q.l0.pt(16)],fakePaneHeader:[q.l0.px(8),q.l0.py(4),q.l0.rowWithGap(8),q.l0.backgroundColor.backgroundDefault,q.l0.align.center,{borderBottom:"1px solid ".concat(q.TV.outlineDimmer)}]});function o9(e){var t=e.onFileClick,n=e.status;return(0,O.BX)(V.G,{children:[(0,O.tZ)(ae,{}),(0,O.BX)(V.G,{css:o7.container,children:[(0,O.tZ)(e8.E,{colorway:"orange",icon:(0,O.tZ)(rg.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,O.BX)(V.G,{css:oz.section,children:[(0,O.tZ)(V.G,{css:oz.reviewChangesHeader,children:(0,O.tZ)(W.xv,{css:oz.headerText,multiline:!1,children:"Commit"})}),(0,O.tZ)(i0,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function ae(){var e,t=n_(),n=(0,tF.Z)((e=(0,tM._)(function(e){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(n=r.sent()).error&&(tV({context:"unborn-branch-view-status",gitService:e,result:n}),t(n.error)),[2,n]}})}),function(t){return e.apply(this,arguments)}),[t]);return(null==n?void 0:n.error)?null:(0,O.tZ)(V.G,{css:o7.fakePaneHeader,children:(null==n?void 0:n.branch)?(0,O.tZ)(nq.Lr,{name:n.branch,current:!0,heading:!0}):null})}var at=function(e){var t,n=(0,tF.Z)((t=(0,tM._)(function(t){var n,r,i;return(0,tX.Jh)(this,function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:if((n=o.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:ti.aq.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:ti.aq.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,Q.useMemo)(function(){return n?n.error?{error:n.error}:n:null},[n])},an=n(90632),ar=n(16865),ai=[{"& > span:first-child":[q.l0.flex.grow(1),q.l0.textAlign.left]},{"& > span":[q.l0.flex.shrink(1)]}],ao=(0,H.X)({container:[q.l0.colWithGap(16)],splitOrUnisonContainer:[q.l0.colWithGap(8),q.l0.display.flex,q.l0.flex.row,q.l0.flex.wrap,q.l0.align.center,q.l0.justify.spaceBetween],emphasizedText:[q.l0.fontWeight.medium],buttonFolded:[ai,q.l0.height("auto"),q.l0.py(8),q.l0.fontWeight.medium],buttonUnfolded:[ai,q.l0.height("auto"),q.l0.py(8),q.l0.fontWeight.medium,q.l0.borderRadius(8,8,0,0)],buttonGroupItem:[q.l0.width(64),q.l0.height(32)],textContainer:[q.l0.mt(8),q.l0.overflow("break-all")]}),aa=function(e){var t=e.children;return(0,O.tZ)(V.G,{css:ao.splitOrUnisonContainer,children:t})},al=function(e){var t=e.value,n=e.onChange;return(0,O.BX)(tZ.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,O.tZ)(V.G,{css:ao.buttonGroupItem,children:(0,O.tZ)(tZ.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,O.tZ)(V.G,{css:ao.buttonGroupItem,children:(0,O.tZ)(tZ.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},ac=function(e){var t=e.value,n=e.onChange;return(0,O.tZ)(X.hU,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,O.tZ)(an.Z,{}):(0,O.tZ)(ar.Z,{})})},as=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,O.BX)(W.xv,{css:ao.textContainer,children:["Showing"," ",(0,O.BX)("span",{css:ao.emphasizedText,children:[n," changed ",(0,eV.Z)("file",n),"."]})]}):(0,O.BX)(W.xv,{css:ao.textContainer,children:["Showing"," ",(0,O.BX)("span",{css:ao.emphasizedText,children:[t," of ",n," changed ",(0,eV.Z)("file",n),"."]})]})},au=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,c=e.setFolded,s=(0,Q.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,O.BX)(V.G,{css:ao.container,children:[(0,O.tZ)(nB.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,O.BX)(aa,{children:[(0,O.tZ)(as,{files:s.length,totalFiles:r}),i.length>0?(0,O.tZ)(al,{value:o,onChange:function(e){return a(e)}}):null]}),s.map(function(e){var t;return(0,O.tZ)(tN,{folded:null===(t=l[e.id])||void 0===t||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:o},e.id)})]})},ad=(0,H.X)({metaContainer:[q.l0.rowWithGap(4),q.l0.align.center,q.l0.flex.wrap]}),af=function(e){var t=e.author,n=e.committer,r=ok(n,t),i=oS(n.date,t.date);return(0,O.BX)(V.G,{css:ad.metaContainer,children:[r&&i?(0,O.BX)(O.HY,{children:[(0,O.tZ)(nH,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,O.tZ)(W.xv,{variant:"small",children:"authored"}),(0,O.tZ)(nA.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,O.tZ)(W.xv,{variant:"small",children:"and"})]}):null,r&&!i?(0,O.BX)(O.HY,{children:[(0,O.tZ)(nH,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,O.tZ)(W.xv,{variant:"small",children:"authored"}),(0,O.tZ)(W.xv,{variant:"small",children:"and"})]}):null,(0,O.tZ)(nH,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,O.BX)(O.HY,{children:[(0,O.tZ)(W.xv,{variant:"small",children:"authored "}),(0,O.tZ)(nA.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,O.tZ)(W.xv,{variant:"small",children:"and "})]}):null,(0,O.tZ)(W.xv,{variant:"small",children:"committed"}),(0,O.tZ)(nA.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},ap=(0,H.X)({dullText:[q.l0.color.foregroundDimmest],tooltipContainer:[q.l0.display.inlineBlock]}),ah=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,O.tZ)("span",{css:ap.tooltipContainer,children:(0,O.tZ)(tO.u,{tooltip:"View commit",children:(0,O.tZ)("button",{css:[q.l0.reset.button,q.l0.linkStyle,q.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},am=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,O.BX)(W.xv,{variant:"small",children:[(0,O.BX)("span",{css:ap.dullText,children:[n?"Grafted with ":null,t.length," ",(0,eV.Z)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,O.BX)(Q.Fragment,{children:[(0,O.tZ)(ah,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,O.tZ)("span",{css:ap.dullText,children:", "})]},e)})]})},ag=function(e){var t=e.source,n=e.target;return n?(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"branch"}),(0,O.tZ)(nq.Lr,{name:t}),(0,O.tZ)("span",{children:" into "}),(0,O.tZ)(nq.Lr,{name:n})]}):(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{children:"branch"}),(0,O.tZ)(nq.Lr,{name:t})]})},av="gitCommitSubject",ay=(0,eW.iv)([q.l0.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),ab=(0,H.X)({header:[(w={},(0,tr._)(w,"& .".concat(av),ay),(0,tr._)(w,"& .".concat(av," > div"),ay),(0,tr._)(w,"& .".concat(av," p"),ay),w)],markerContainer:[q.l0.display.inlineFlex,q.l0.mr(4)],mergeContainer:[q.l0.rowWithGap(4),q.l0.flex.row,q.l0.flex.wrap,q.l0.align.stretch,q.l0.flex.shrink(0)]}),aw=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,Q.useMemo)(function(){var e,r=null;if((null==t?void 0:t.type)==="pull-request"?r=t.id:n&&(null==n?void 0:n.pr)&&(r=n.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=rR(o))&&void 0!==e?e:void 0}},[t,i,n]);return(0,O.BX)(W.h4,{level:2,variant:"subheadDefault",multiline:!0,css:ab.header,children:[t?(0,O.BX)("span",{css:ab.mergeContainer,children:[(0,O.tZ)("span",{css:ab.markerContainer,children:(0,O.tZ)(or,{type:"merge"})}),(0,O.tZ)(nq.ST,{text:"merged"}),(null==t?void 0:t.type)==="pull-request"?(0,O.BX)(O.HY,{children:["PR ",(0,O.tZ)(nq.$8,{id:t.id,hash:!0}),(null==n?void 0:n.pr)?(0,O.BX)(O.HY,{children:[(0,O.tZ)(nq.po,{text:"reverts"})," ",(0,O.tZ)(nq.$8,{id:n.pr,hash:!0})]}):null]}):null,(null==t?void 0:t.type)==="branch"?(0,O.tZ)(O.HY,{children:(0,O.tZ)(ag,{source:t.source,target:t.target})}):null]}):null,n&&!t?(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{css:ab.markerContainer,children:(0,O.tZ)(or,{type:"revert"})}),(0,O.tZ)(nq.po,{text:"reverted"})," ",(0,O.tZ)("button",{css:[q.l0.reset.button,q.l0.linkStyle,q.l0.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&o(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,O.tZ)(nq.Zr,{className:av,subject:r,remoteName:a})]})},aZ=n(99595),ax=function(e){var t,n=n_(),r=(0,tF.Z)((t=(0,tM._)(function(t){var n,r,i,o,a,l;return(0,tX.Jh)(this,function(c){switch(c.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:if(null==(o=c.sent())?void 0:o.error)return tV({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(n=o.files)||void 0===n?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,N._)(a).concat((0,N._)(l)))).map(function(e){var t,n;return{id:(0,ne.v4)(),status:e.type,loading:!1,initial:{filename:(0,ee.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,ee.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,ee.UO)(e.path),path:(0,ee.Il)(e.path),content:""}}})}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,Q.useMemo)(function(){return r?r.error?(n(r.error),null):r:null},[n,r])},aC=(l=(0,tM._)(function(e,t,n,r){var i,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,ee.T3)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})}),function(e,t,n,r){return l.apply(this,arguments)}),ak=(c=(0,tM._)(function(e,t,n){var r,i,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:return i=t.hash,[4,aC(e,n.final.path,n.final.filename,i)];case 1:if(o=l.sent(),a="",!(!t.grafted&&(null===(r=t.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,aC(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,eh._)((0,ep._)({},n),{loading:!1,initial:(0,eh._)((0,ep._)({},n.initial),{content:a}),final:(0,eh._)((0,ep._)({},n.final),{content:o})})]}})}),function(e,t,n){return c.apply(this,arguments)}),aS=(0,H.X)({content:[q.l0.colWithGap(16),q.l0.p(16)],splitContainer:[q.l0.display.flex,q.l0.flex.row,q.l0.flex.shrink(1),q.l0.flex.wrap,q.l0.justify.spaceBetween,q.l0.maxWidth("100%"),q.l0.border({color:q.TV.outlineDimmest,direction:"bottom"}),q.l0.pb(16)]}),a_=function(e){var t,n,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,c=e.remotes,s=e.status,u=(0,Q.useMemo)(function(){return(0,iI.w)(s?s.changes.map(function(e){return e.path}):[])},[s]),d=(0,Q.useMemo)(function(){if(!s)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=s.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==ti.hF.UNMODIFIED&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},[s]),f=(0,aZ.Z)().showConfirm,p=n_(),h=(0,L._)((0,Q.useState)(!1),2),m=h[0],g=h[1],v=(0,L._)((0,Q.useState)(""),2),y=v[0],b=v[1],w=(0,L._)((0,Q.useState)("Split"),2),Z=w[0],x=w[1],C=(0,L._)((0,Q.useState)("Markdown"),2),k=C[0],S=C[1],_=(0,L._)((0,Q.useState)({}),2),T=_[0],E=_[1],R=(0,L._)((0,Q.useState)([]),2),D=R[0],I=R[1],B=oZ(i,o),A=B.hideBody,P=B.merge,G=B.revert,U=i.hash,M=i.subject,X=i.body,F=i.committer,H=i.author,z=i.grafted,j=null!==(n=i.parents)&&void 0!==n?n:[],J=ax(i),Y=(0,Q.useCallback)((0,tM._)(function(){var e,t,n,o=arguments;return(0,tX.Jh)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((t=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(n=a.sent()).error?(p(n.error),tV({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}})):f("Restored commit!"),r.forceRefresh(),[3,4];case 3:p(t.error),tV({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,p,f]),$=iw(u),K=$.openRestoreConfirmationModal,ee=$.restoreConfirmationModal,et=(0,Q.useCallback)((0,tM._)(function(){var e,t,n,r=arguments;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(g(!0),0!==d.length)return[3,2];return[4,Y()];case 1:return i.sent(),g(!1),[2];case 2:return[4,K(d)];case 3:if(!i.sent())return[3,5];return[4,Y()];case 4:i.sent(),i.label=5;case 5:return g(!1),[3,10];case 6:if("string"==typeof e){if(!(n=d.find(function(t){return t.path===e})))throw g(!1),Error("Could not find file in worktree list");t=[n]}else t=d.filter(function(t){return e.includes(t.path)});return[4,K(t)];case 7:if(!i.sent())return[3,9];return[4,Y(e)];case 8:i.sent(),i.label=9;case 9:g(!1),i.label=10;case 10:return[2]}})}),[K,Y,d]);(0,Q.useEffect)(function(){var e;I(null!==(e=null==J?void 0:J.diffs.map(function(e){return(0,eh._)((0,ep._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[J]),(0,Q.useEffect)(function(){null!==J&&J.error&&p(J.error)},[J,p]);var en=(t=(0,tM._)(function(e,t){var n,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:if(E(function(n){var r=(0,ep._)({},n);return r[e]=t,r}),!(n=D.find(function(t){return t.id===e})))return p(ti.aq.INVALID_STATE),tV({context:"commit-view",gitService:r,result:{error:ti.aq.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&n.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,ak(r,i,n)];case 2:return o=l.sent(),I(function(t){var n=(0,N._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=o,n}),[3,4];case 3:return tV({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),p(a),[2];case 4:return[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,O.BX)(V.G,{css:aS.content,children:[(0,O.tZ)(aw,{remotes:c,merge:P,revert:G,subject:M,onViewCommitClick:l}),(0,O.BX)(aa,{children:[(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8),q.l0.align.start,q.l0.flex.shrink(1)],children:[(0,O.tZ)(ox,{hash:U}),(0,O.tZ)(oC,{onClick:function(){return et()},text:"Restore All",loading:m})]}),A?null:(0,O.tZ)(ac,{value:k,onChange:function(e){S(e)}})]}),A?null:(0,O.tZ)(nq.uJ,{body:X,view:k}),(0,O.BX)(V.G,{css:aS.splitContainer,children:[(0,O.tZ)(af,{author:H,committer:F}),(0,O.tZ)(am,{parents:j,grafted:z,onViewCommitClick:l})]}),null!==P?(0,O.tZ)(W.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===J?(0,O.tZ)(oH,{}):(0,O.tZ)(au,{query:y,setQuery:b,totalDiffs:J.diffs.length,diffs:D,splitOrUnified:Z,setSplitOrUnified:x,folded:T,setFolded:en}),ee]})};function aT(e){var t=e.hash,n=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,J.Z)().git,l=n_(),c=at(null!=t?t:"");if(null===c)return(0,O.tZ)(oH,{});if(c.error)return c.error===ti.aq.NOT_INITIALIZED?i({mode:b.CURRENT_BRANCH}):(l(c.error),(c.error===ti.aq.UNKNOWN||c.error===ti.aq.UNKNOWN_NOT_GIT)&&tV({context:"commit-view",gitService:a,result:c,data:{hash:t}})),null;if(null===c.commit)return l(ti.aq.UNKNOWN),null;var s=c.commit,u=i9(s)||i4(s);return(0,O.tZ)(a_,{git:a,commit:s,info:u,onViewCommitClick:r,remotes:n,status:o})}var aE=n(29907),aR=(0,H.X)({container:[q.l0.colWithGap(4)],file:[q.l0.rowWithGap(8),q.l0.align.center],fileLeft:[q.l0.rowWithGap(8),q.l0.flex.grow(1),q.l0.align.center],filePrefix:[q.l0.color.foregroundDimmest]});function aD(e){var t=e.files,n=e.uniquePathMap,r=e.onFileClick,i=[];if(t instanceof Map){var o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,L._)(c.value,2),d=u[0],f=u[1],p=n.get(d);i.push({path:d,prefix:p,resolved:f})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}else{var h=!0,m=!1,g=void 0;try{for(var v,y=t[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var b=v.value,w=n.get(b);i.push({path:b,prefix:w,resolved:!0})}}catch(e){m=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw g}}}return(0,O.tZ)(V.G,{css:aR.container,children:i.map(function(e){var t=e.path,n=e.prefix,i=e.resolved;return(0,O.BX)(V.G,{css:aR.file,children:[(0,O.BX)(V.G,{css:aR.fileLeft,children:[(0,O.tZ)(F.Z,{path:t}),(0,O.tZ)(W.xv,{multiline:!1,children:(0,O.tZ)(nq.yx,{path:t,prefix:n,onClick:function(){return r({path:t,type:"conflict"})}})})]}),i?(0,O.tZ)(rw.Z,{color:q.TV.greenStronger}):(0,O.tZ)(rg.Z,{color:q.TV.orangeStronger})]},t)})})}function aI(e){var t=e.hasConflicts?(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{css:q.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,O.tZ)("br",{}),(0,O.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,O.BX)(O.HY,{children:[(0,O.tZ)("span",{css:q.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,O.tZ)("br",{}),(0,O.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,O.tZ)(e8.E,{colorway:"warning",icon:(0,O.tZ)(rg.Z,{}),text:t})}var aB=(0,H.X)({container:[q.l0.rowWithGap(4),q.l0.align.center,q.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},q.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[q.l0.p(8),q.l0.rowWithGap(4),q.l0.flex.grow(1),q.l0.center,q.l0.borderRadius(8)]});function aA(e){var t,n=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,L._)((0,ti.Tg)(r[0]),2),l=a[0],c=a[1];l&&c&&(t=(0,O.tZ)(eb.Tg,{css:aB.branch,elevated:!0,children:(0,O.tZ)(nq.Lr,{remote:l,name:c,icon:!0,heading:!0})}))}return t||(t=r.map(function(e){return(0,O.tZ)(eb.Tg,{css:aB.branch,elevated:!0,children:(0,O.tZ)(nq.Lr,{name:e,icon:!!i||(0,O.tZ)(tU.Z,{size:16}),heading:!0})},e)})),(0,O.BX)(V.G,{css:aB.container,children:[(0,O.tZ)(V.G,{css:aB.left,children:t}),(0,O.tZ)(ew.Z,{size:24,color:q.TV.foregroundDimmest}),(0,O.tZ)(V.G,{css:aB.right,children:(0,O.tZ)(eb.Tg,{css:aB.branch,elevated:!0,children:(0,O.tZ)(nq.Lr,{name:n,icon:!0,current:!0,heading:!0})})})]})}var aP=(0,H.X)({container:[q.l0.colWithGap(12),q.l0.pt(16),q.l0.pb(8),q.l0.px(8)],fakePaneHeader:[q.l0.p(8),q.l0.rowWithGap(8),q.l0.backgroundColor.backgroundDefault,q.l0.align.center,{borderBottom:"1px solid ".concat(q.TV.outlineDimmer)}],conflictResolution:[q.l0.colWithGap(16)],listContainer:[q.l0.p(8),q.l0.colWithGap(8),q.l0.borderRadius(8)],list:[q.l0.pb(8),q.l0.colWithGap(8)],listDisabled:[{opacity:.5},q.l0.pb(8),q.l0.colWithGap(8)],listHeader:[q.l0.pb(4),q.l0.flex.grow(1),q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"})],listFiles:[q.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},q.l0.rowWithGap(8)],buttons:[q.l0.colWithGap(8)]});function aG(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,L._)((0,Q.useState)(!0),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(!1),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=c||d,h=n_(),m=(0,J.Z)().git,g=(0,Q.useId)(),v=(0,tF.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w;return(0,tX.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.status()];case 1:if((t=Z.sent()).error)return tV({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:ti.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=Z.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=Z.sent()).error)return tV({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:i}}),[2,o];a=o.commits,s=(c=(l=o.branches).length>0)?l:a,u=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,f=!0,p=!1,h=void 0;try{for(m=i[Symbol.iterator]();!(f=(g=m.next()).done);f=!0)if(!(0,L._)(g.value,2)[1]){d=!1;break}}catch(e){p=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return v=(0,iI.w)(t.changes.map(function(e){return e.path})),y=i.size>0,b=u.length>0,w=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:s,branch:n,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:c,allIsResolved:d,uniquePathMap:v,hasConflicts:y,hasOtherChanges:b,isUpstreamPull:w,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,Q.useEffect)(function(){(null==v?void 0:v.error)&&h(v.error)},[null==v?void 0:v.error,h]),!v)return(0,O.tZ)(oH,{});if(v.error)return null;var y=v.refs,b=v.branch,w=v.conflictingFiles,Z=v.otherChangedFiles,x=v.refsAreBranches,C=v.allIsResolved,k=v.uniquePathMap,S=v.hasConflicts,_=v.hasOtherChanges,T=v.isUpstreamPull;function E(){return(E=(0,tM._)(function(){var e,t,n,i,a,l,c,u,d,f,g;return(0,tX.Jh)(this,function(v){switch(v.label){case 0:if(!C||p)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=w.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,N._)(Z)),[4,m.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return h(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=v.sent()).error)return h(f.error),s(!1),[2];return[4,m.mergeContinue()];case 3:if(!(g=v.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return v.sent(),h(g.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function R(){return(R=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(p)return[2];return f(!0),[4,m.mergeAbort()];case 1:return(e=t.sent()).error?(h(e.error),f(!1),tV({context:"merging-view-abort",gitService:m,result:e,data:{branch:b}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var D=T?"Complete in-progress pull":"Complete in-progress merge";return S&&(D=T?"Resolve pull conflicts":"Resolve merge conflicts"),(0,O.BX)(V.G,{children:[(0,O.BX)(V.G,{css:aP.fakePaneHeader,children:[(0,O.tZ)(aE.Z,{}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:D})]}),(0,O.BX)(V.G,{css:aP.container,children:[(0,O.tZ)(aA,{branch:b,refs:y,refsAreBranches:x,isUpstreamPull:T}),(0,O.tZ)(aI,{hasConflicts:S}),(0,O.BX)(eb.Tg,{css:aP.listContainer,elevated:!0,children:[(0,O.BX)(V.G,{css:aP.list,children:[(0,O.tZ)(V.G,{css:aP.listHeader,children:(0,O.tZ)(W.xv,{css:q.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,O.tZ)(V.G,{css:aP.listFiles,children:S?(0,O.tZ)(aD,{files:w,uniquePathMap:k,onFileClick:n}):(0,O.tZ)(W.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),_?(0,O.BX)(V.G,{css:o?aP.list:aP.listDisabled,children:[(0,O.tZ)(V.G,{css:aP.listHeader,children:(0,O.tZ)(W.xv,{css:q.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,O.tZ)(V.G,{css:aP.listFiles,children:(0,O.tZ)(aD,{files:Z,uniquePathMap:k,onFileClick:n})})]}):null]}),(0,O.BX)(V.G,{css:aP.includeOtherFiles,tag:"label",children:[(0,O.tZ)(rp.X,{id:g,checked:o,onChange:function(e){return a(e)}}),(0,O.tZ)(W.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,O.BX)(V.G,{css:aP.buttons,children:[(0,O.tZ)(ey.zx,{text:T?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:c?(0,O.tZ)(j.Z,{}):(0,O.tZ)(aE.Z,{}),disabled:!C||p,loading:c,onClick:function(){return E.apply(this,arguments)}}),(0,O.tZ)(ey.zx,{text:T?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,O.tZ)(j.Z,{}):(0,O.tZ)(id.Z,{}),disabled:p,loading:d,onClick:function(){return R.apply(this,arguments)}})]})]})]})}var aL=(0,H.X)({container:[q.l0.colWithGap(12),q.l0.pt(16),q.l0.pb(8),q.l0.px(8)],fakePaneHeader:[q.l0.p(8),q.l0.rowWithGap(8),q.l0.backgroundColor.backgroundDefault,q.l0.align.center,{borderBottom:"1px solid ".concat(q.TV.outlineDimmer)}],conflictResolution:[q.l0.colWithGap(16)],listContainer:[q.l0.p(8),q.l0.colWithGap(8),q.l0.borderRadius(8)],list:[q.l0.pb(8),q.l0.colWithGap(8)],listDisabled:[{opacity:.5},q.l0.pb(8),q.l0.colWithGap(8)],listHeader:[q.l0.pb(4),q.l0.flex.grow(1),q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"})],listFiles:[q.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},q.l0.rowWithGap(8)],buttons:[q.l0.colWithGap(8)]});function aN(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,L._)((0,Q.useState)(!0),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(!1),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=c||d,h=n_(),m=(0,J.Z)().git,g=(0,Q.useId)(),v=(0,tF.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h;return(0,tX.Jh)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((t=m.sent()).error)return tV({context:"use-rebasing-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:ti.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,L._)(d.value,2)[1]){a=!1;break}}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return f=(0,iI.w)(t.changes.map(function(e){return e.path})),p=i.size>0,h=o.length>0,[2,{branch:n,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:f,hasConflicts:p,hasOtherChanges:h,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,Q.useEffect)(function(){(null==v?void 0:v.error)&&h(v.error)},[null==v?void 0:v.error,h]),!v)return(0,O.tZ)(oH,{});if(v.error)return null;var y=v.branch,b=v.conflictingFiles,w=v.otherChangedFiles,Z=v.allIsResolved,x=v.uniquePathMap,C=v.hasConflicts,k=v.hasOtherChanges;function S(){return(S=(0,tM._)(function(){var e,t,n,i,a,l,c,u,d,f,g;return(0,tX.Jh)(this,function(v){switch(v.label){case 0:if(!Z||p)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=b.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,N._)(w)),[4,m.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return h(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=v.sent()).error)return h(f.error),s(!1),[2];return[4,m.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(g=v.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return v.sent(),h(g.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function _(){return(_=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(p)return[2];return f(!0),[4,m.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=t.sent()).error?(h(e.error),f(!1),tV({context:"rebasing-view-abort",gitService:m,result:e,data:{branch:y}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var T="Complete in-progress rebase";return C&&(T="Resolve conflicts"),(0,O.BX)(V.G,{children:[(0,O.BX)(V.G,{css:aL.fakePaneHeader,children:[(0,O.tZ)(aE.Z,{}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:T})]}),(0,O.BX)(V.G,{css:aL.container,children:[(0,O.tZ)(aI,{hasConflicts:C}),(0,O.BX)(eb.Tg,{css:aL.listContainer,elevated:!0,children:[(0,O.BX)(V.G,{css:aL.list,children:[(0,O.tZ)(V.G,{css:aL.listHeader,children:(0,O.tZ)(W.xv,{css:q.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,O.tZ)(V.G,{css:aL.listFiles,children:C?(0,O.tZ)(aD,{files:b,uniquePathMap:x,onFileClick:n}):(0,O.tZ)(W.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),k?(0,O.BX)(V.G,{css:o?aL.list:aL.listDisabled,children:[(0,O.tZ)(V.G,{css:aL.listHeader,children:(0,O.tZ)(W.xv,{css:q.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,O.tZ)(V.G,{css:aL.listFiles,children:(0,O.tZ)(aD,{files:w,uniquePathMap:x,onFileClick:n})})]}):null]}),(0,O.BX)(V.G,{css:aL.includeOtherFiles,tag:"label",children:[(0,O.tZ)(rp.X,{id:g,checked:o,onChange:function(e){return a(e)}}),(0,O.tZ)(W.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,O.BX)(V.G,{css:aL.buttons,children:[(0,O.tZ)(ey.zx,{text:"commit and continue rebase",colorway:"primary",iconLeft:c?(0,O.tZ)(j.Z,{}):(0,O.tZ)(aE.Z,{}),disabled:!Z||p,loading:c,onClick:function(){return S.apply(this,arguments)}}),(0,O.tZ)(ey.zx,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,O.tZ)(j.Z,{}):(0,O.tZ)(id.Z,{}),disabled:p,loading:d,onClick:function(){return _.apply(this,arguments)}})]})]})]})}var aO=n(94201),aU=n(42965),aM=n(3615),aX=n(7391),aF=(0,H.X)({gitProfileTitle:[q.l0.rowWithGap(8),q.l0.align.center]});function aW(e){var t=e.username,n=e.avatar,r=e.fullName;return(0,O.BX)(V.G,{css:aF.gitProfileTitle,children:[(0,O.tZ)(nL.q,{src:null!=n?n:null,username:t,fullName:r}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var aV=(0,H.X)({list:{"> div:first-child":q.l0.borderRadius(8,8,0,0),"> div:last-child":[q.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[nD.gU.filled,q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.p(12),q.l0.borderRadius(0),q.l0.border({color:q.TV.outlineDefault,direction:"bottom"})],information:[q.l0.colWithGap(4),q.l0.flex.shrink(1)],informationRow:[q.l0.rowWithGap(8),q.l0.align.center],email:[q.l0.flex.shrink(1)],connectToGithubContainer:[q.l0.colWithGap(4),q.l0.p(12),q.l0.backgroundColor.backgroundHigher],divider:[q.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[q.l0.rowWithGap(4),q.l0.align.center],notConnectedText:[q.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function aH(e){var t=e.profiles,n=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,aX.useRouter)(),a=(0,aU.Gv)(o),l=(0,Q.useId)();return(0,O.BX)(aM.E,{name:l,css:aV.list,value:null!=n?n:"",children:[t.map(function(e){t=e.provider===ti.rG.GITHUB?"GitHub":"Default Profile";var t,r=void 0;return e.provider===ti.rG.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,O.tZ)(az,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,O.BX)(V.G,{css:aV.connectToGithubContainer,children:[(0,O.tZ)(V.G,{css:aV.connectToGitHubTitle,children:(0,O.tZ)(aW,{username:"GitHub Account",fullName:"GitHub Account"})}),(0,O.tZ)(W.xv,{color:"dimmest",css:aV.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,O.tZ)(rk,{})]}):null]})}function az(e){var t=e.profile,n=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=t.provider,l=t.name,c=t.username,s=t.email,u=t.avatar,d=(0,Q.useId)();return(0,O.BX)(V.G,{onClick:function(){return o(a)},css:aV.profile,children:[(0,O.BX)(V.G,{css:aV.information,children:[(0,O.BX)(V.G,{css:aV.informationRow,children:[(0,O.tZ)(aW,{username:c,avatar:u,fullName:l}),i?(0,O.tZ)(el.Z,{css:aV.settingsButton,text:"".concat(r," Settings"),iconRight:(0,O.tZ)(r0.Z,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,O.tZ)(W.xv,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,O.BX)(W.xv,{color:"dimmest",css:aV.email,multiline:!1,children:[l," <",s,">"]})]}),(0,O.tZ)(aM.Y,{css:aV.radio,id:d,checked:n,value:a})]})}var aj=(0,H.X)({profileContainer:[q.l0.flex.column]});function aq(){var e,t=(0,J.Z)().git,n=(0,tF.Z)((e=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(n=null==t?void 0:t.provider)&&void 0!==n?n:null,hasGitHub:!e.hasProfile(ti.rG.GITHUB),error:null}]})}),function(t){return e.apply(this,arguments)}));if(!n)return null;if(null!==n.error)return tV({context:"git-profiles",gitService:t,result:{error:n.error}}),null;var r=n.profiles,i=n.current,o=n.hasGitHub;return(0,O.tZ)(V.G,{css:aj.profileContainer,children:(0,O.tZ)(aH,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){t.setCurrentProfile(e),e===ti.rG.REPLIT_DEFAULT?(0,nj.J)("profile-changed",{profile:"replit"}):e===ti.rG.GITHUB&&(0,nj.J)("profile-changed",{profile:"github"})}})})}var aJ=n(34030),aY=n(31089),a$=n(85983),aK=n(82303);function aQ(){var e=(0,e$._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return aQ=function(){return e},e}function a0(){var e=(0,e$._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return a0=function(){return e},e}function a1(){var e=(0,e$._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return a1=function(){return e},e}var a2={},a3=(0,eK.Ps)(aQ());a0();var a4=(0,eK.Ps)(a1()),a8=(0,H.X)({errorText:[q.l0.color.accentNegativeStronger,q.l0.pl(4)]});function a6(e){var t,n,r,i,o=e.remoteName,a=e.updateRemote,l=(0,aZ.Z)().showConfirm,c=(0,J.Z)().git,s=(0,t3.Z)(),u=rx(),d=(0,aY.U)(),f=(0,eY.Z)(),p=(0,Q.useRef)(null),h=(0,Q.useRef)(null),m=(0,L._)((0,Q.useState)(),2),g=m[0],v=m[1],y=(t=(0,ep._)({},a2,{variables:{replId:f}}),eQ.a(a3,t)).data,b=(null==y?void 0:y.repl.__typename)==="Repl"?y.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,Z=b.description,x=b.isPrivate,C=b.url,k=(0,L._)((n=(0,ep._)({},a2,void 0),aK.D(a4,n)),2),S=k[0],_=k[1].loading,T=(0,rb.v)({onAuth:function(){(0,nj.J)("github-user-connected")}}),E=(0,L._)((0,Q.useState)(null==x||x),2),R=E[0],D=E[1],I=(0,L._)((0,Q.useState)(w),2),B=I[0],A=I[1],P=(0,L._)((0,Q.useState)(),2),G=P[0],N=P[1],U=(0,L._)((0,Q.useState)(null!=Z?Z:C&&"Repository for https://replit.com".concat(C)),2),M=U[0],X=U[1],F=(0,L._)((0,Q.useState)(),2),H=F[0],z=F[1],j=function(){N(void 0),z(void 0),v(void 0)},Y=(r=(0,tM._)(function(e){var t,n,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((t=i.sent()).error)return v("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(o))return[3,3];return[4,c.setRemoteURL({remote:o,url:e})];case 2:if((n=i.sent()).error)return v("Error (".concat(n.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),(0,nj.J)("remote-edited"),[2];case 3:return[4,c.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return v("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),(0,nj.J)("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),$=(i=(0,tM._)(function(){var e,t,n,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:if(j(),!B)return[2];if(!(0,ti.GE)(B))return N("Invalid remote name."),[2];return[4,S({variables:{input:{name:B,description:null!=Z?Z:null,homepage:"replit.com".concat(C),isPrivate:R,ownerType:a$.xJ.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="UserError")return v(r.data.createGithubRepo.message),[2];return(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(Y(r.data.createGithubRepo.remoteUrl),(0,nj.J)("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return u?(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,O.tZ)(eg.II,{ref:p,placeholder:"Enter repository name",value:B,onChange:function(e){N(void 0),A(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null===(t=h.current)||void 0===t||t.focus()}}}),(0,O.tZ)(W.xv,{css:a8.errorText,multiline:!1,children:G}),(0,O.tZ)(aO.Z,{height:1}),(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,O.tZ)(eg.B,{ref:h,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=M?M:void 0,onChange:function(e){z(void 0),X(e.target.value)}}),(0,O.tZ)(W.xv,{css:a8.errorText,multiline:!1,children:H}),(0,O.tZ)(aO.Z,{height:1}),(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,O.BX)(tZ.hE,{tag:"fieldset",id:d("privacy"),name:d("privacy"),value:R,onChange:function(e){return D(e)},row:!0,css:[q.l0.width("100%")],children:[(0,O.tZ)(tZ.rK,{id:d("false"),value:!1,text:"Public",icon:(0,O.tZ)(aJ.Z,{})}),(0,O.tZ)(tZ.rK,{id:d("true"),value:!0,text:"Private",icon:(0,O.tZ)(nh.Z,{})})]}),(0,O.tZ)(aO.Z,{height:2}),(0,O.tZ)(ey.zx,{text:_?"Creating Repository on GitHub":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,O.tZ)(rZ.Z,{}),onClick:$,loading:_}),g?(0,O.tZ)(W.xv,{css:a8.errorText,maxLines:2,multiline:!1,children:g}):null]}):s?(0,O.tZ)(V.G,{children:(0,O.tZ)(ey.zx,{colorway:"primary",iconLeft:(0,O.tZ)(rZ.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){ry.X.openExternalUrl("/account#connected-services")}})}):(0,O.tZ)(V.G,{children:(0,O.tZ)(ey.zx,{colorway:"primary",iconLeft:(0,O.tZ)(rZ.Z,{}),text:"Connect to GitHub",onClick:T})})}var a5=(0,eW.iv)(q.l0.border({width:1,color:q.TV.outlineDimmer}),q.l0.borderRadius(8)),a7=(0,eW.iv)(nD.gU.filled,q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center,q.l0.px(8),q.l0.py(4),q.l0.borderRadius(8,8,0,0)),a9=(0,eW.iv)(q.l0.borderRadius(8,8,0,0)),le=(0,eW.iv)(q.l0.borderRadius(8)),lt=(0,eW.iv)(q.l0.p(8)),ln=(0,eW.iv)(q.l0.flex.growAndShrink(1));function lr(e){var t=e.title,n=e.expanded,r=e.content,i=e.onClick;return(0,O.BX)(V.G,{css:a5,children:[(0,O.BX)(V.G,{css:[a7,n?a9:le],onClick:i,children:[(0,O.tZ)(V.G,{css:ln,children:(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,O.tZ)(tk.Z,{size:20}):(0,O.tZ)(tC.Z,{size:20})]}),n?(0,O.tZ)(V.G,{css:lt,children:r}):null]})}var li=(0,eW.iv)(q.l0.rowWithGap(4)),lo=(0,eW.iv)(q.l0.flex.growAndShrink(1)),la=(0,eW.iv)(q.l0.color.accentNegativeStronger,q.l0.pl(4));function ll(e){var t,n=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,J.Z)().git,a=(0,L._)((0,Q.useState)(),2),l=a[0],c=a[1];(0,Q.useEffect)(function(){c(void 0)},[n]);var s=(0,L._)((0,Q.useState)(),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(!1),2),p=f[0],h=f[1],m=(t=(0,tM._)(function(){var e,t,n;return(0,tX.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(h(!0),!(0,ti.LY)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((t=a.sent()).error)throw tV({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") setting ").concat(r," to use ").concat(l," as a remote."));return(0,nj.J)("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((n=a.sent()).error)throw tV({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") adding ").concat(r," ").concat(l," as a remote."));return(0,nj.J)("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return h(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,O.BX)(V.G,{children:[(0,O.tZ)(eg.II,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),c(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&m()}}),u?(0,O.tZ)(W.xv,{variant:"small",css:la,multiline:!1,children:u}):null,l&&l!==n?(0,O.BX)(O.HY,{children:[(0,O.tZ)(aO.Z,{height:1}),(0,O.BX)(V.G,{css:li,children:[(0,O.tZ)(ey.zx,{css:lo,text:"Cancel",iconLeft:(0,O.tZ)(rv.Z,{}),onClick:function(){return c(void 0)}}),(0,O.tZ)(ey.zx,{css:lo,text:p?"Saving":"Save",loading:p,colorway:"primary",iconLeft:(0,O.tZ)(rw.Z,{}),onClick:m})]})]}):null]})}var lc="origin";function ls(){var e,t=(0,tF.Z)((e=(0,tM._)(function(e){var t,n,r,i;return(0,tX.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((t=o.sent()).error)return tV({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:lc,error:t.error}];if(!(r=(0,L._)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1)[0]))return[2,{url:void 0,name:lc,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:lc,error:null}]}})}),function(t){return e.apply(this,arguments)}));return null==t?(0,O.BX)(V.G,{css:q.l0.center,children:[(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,O.tZ)(oH,{})]}):(null==t?void 0:t.error)?null:(0,O.tZ)(lu,{initialRemoteUrl:null==t?void 0:t.url,remoteName:null==t?void 0:t.name})}function lu(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,L._)((0,Q.useState)(t),2),i=r[0],o=r[1],a=(0,L._)((0,Q.useState)(""===t||void 0===t?0:void 0),2),l=a[0],c=a[1],s=function(e){o(e)};return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,O.tZ)(aO.Z,{height:1}),(0,O.tZ)(ll,{remoteName:n,initialRemoteUrl:i,updateRemote:s}),(0,O.tZ)(aO.Z,{height:2}),(0,O.tZ)(lr,{title:"GitHub",expanded:0===l,onClick:function(){return c(function(e){return 0===e?void 0:0})},content:(0,O.tZ)(a6,{remoteName:n,updateRemote:s})})]})}(s=Z||(Z={}))[s.GitHub=0]="GitHub";var ld=(0,eW.iv)(q.l0.px(16));function lf(){return(0,O.BX)(V.G,{css:ld,children:[(0,O.tZ)(aO.Z,{height:2}),(0,O.tZ)(ls,{}),(0,O.tZ)(aO.Z,{height:2}),(0,O.tZ)(lp,{})]})}function lp(){return(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,O.tZ)(aO.Z,{height:1}),(0,O.tZ)(aq,{})]})}var lh=(0,H.X)({gitPane:[q.l0.position.relative,q.l0.display.flex,q.l0.minHeight("100%")],gitPaneContent:[q.l0.flex.growAndShrink(1),q.l0.overflow("auto")]});function lm(e){var t,n=e.isActive,r=e.performPaneOperation,i=(0,nb.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),o=(0,Q.useRef)(),a=(0,L._)((0,Q.useState)(b.CURRENT_BRANCH),2),l=a[0],c=a[1],s=(0,L._)((0,Q.useState)(null),2),u=s[0],d=s[1],f=(0,L._)((0,Q.useState)(null),2),p=f[0],h=f[1],m=(0,L._)((0,Q.useState)(!1),2),g=m[0],v=m[1];lb(void 0!==n&&n);var y=(0,tF.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u;return(0,tX.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=d.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,o=null,a=null,!(r!==ti.y5.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return tV({context:"git-pane-status",gitService:e,result:l,data:{state:n,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((c=d.sent()).error)return tV({context:"git-pane-remotes",gitService:e,result:c,data:{state:n,type:r}}),[2,c];if(o=c.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((s=d.sent()).error)return tV({context:"git-pane-branch",gitService:e,result:s,data:{state:n,type:r}}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return tV({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return t.apply(this,arguments)})),w=!y||y.error?null:y.currentBranch,Z=(0,Q.useCallback)(function(e){switch(c(e),e){case b.DASHBOARD:(0,nj.J)("pane-mode-changed",{mode:"dashboard"});break;case b.BRANCH:(0,nj.J)("pane-mode-changed",{mode:"branch"});break;case b.CURRENT_BRANCH:(0,nj.J)("pane-mode-changed",{mode:"current-branch"});break;case b.SETTINGS:(0,nj.J)("pane-mode-changed",{mode:"settings"})}},[]),x=(0,Q.useCallback)(function(){o.current?(Z(o.current),o.current=void 0):Z(b.CURRENT_BRANCH)},[Z]),C=(0,Q.useCallback)(function(e){var t=function(e){o.current=l,Z(e)};switch(e.mode){case b.DASHBOARD:t(b.DASHBOARD);break;case b.BRANCH:if((0,ti.p3)(e.branch,w)){t(b.CURRENT_BRANCH);break}h(e.branch),t(b.BRANCH);break;case b.CURRENT_BRANCH:t(b.CURRENT_BRANCH);break;case b.SETTINGS:t(b.SETTINGS);break;case b.COMMIT:d(e.hash),t(b.COMMIT)}},[Z,l,w]),k=(0,Q.useCallback)(function(e){var t=e.path,n=e.type,i=(0,$.Dp)({path:t});if("codeEditor"!==i){r({operation:"open",pane:{type:i,data:{path:t}},secondary:!0});return}"conflict"===(void 0===n?"change":n)?r({operation:"open",pane:{type:"codeEditor",data:{path:t}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:t,data:{type:"git",revision:"HEAD"}},right:{path:t,data:{type:"fs"}}}},secondary:!0})},[r]),S=(0,Q.useCallback)(function(e){C({mode:b.COMMIT,hash:e})},[C]),_=(0,Q.useCallback)(function(){v(!0)},[]);if(l===b.BRANCH&&(0,ti.p3)(p,w)&&Z(b.CURRENT_BRANCH),(0,Q.useEffect)(function(){return v(!1)},[y]),g||!y||y.error)return(0,O.tZ)(lg,{children:(null==y?void 0:y.error)?(0,O.tZ)(es.Z,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,O.BX)(O.HY,{children:["Something went wrong. Error: ",(0,O.tZ)("code",{children:y.error})]}),asciiArt:"Computer"}):(0,O.tZ)(oH,{})});switch(y.type){case ti.y5.INITIALIZING:case ti.y5.INTERMEDIATE:case ti.y5.DETACHED_HEAD:return(0,O.tZ)(lg,{children:(0,O.tZ)(lv,{state:y.state,status:y.status,onFileClick:k,gotoPendingState:_})});case ti.y5.NORMAL:if(l===b.BRANCH&&!p||l===b.CURRENT_BRANCH&&!w)return(0,O.tZ)(lg,{header:(0,O.tZ)(rs,{mode:b.DASHBOARD,branch:null,switchMode:C,onBack:x}),children:(0,O.tZ)(o4,{currentBranch:null,switchMode:C})});return(0,O.tZ)(lg,{header:(0,O.tZ)(rs,{mode:l,branch:l===b.CURRENT_BRANCH?w:p,switchMode:C,onBack:x}),children:(0,O.tZ)(ly,{performPaneOperation:r,mode:l,status:y.status,remotes:y.remotes,previewBranch:p,previewCommit:u,currentBranch:w,switchMode:C,onStagedFileClick:k,onViewCommitClick:i?S:void 0,onViewSettingsClick:function(){return C({mode:b.SETTINGS})},gotoPendingState:_})})}}function lg(e){var t=e.header,n=e.children,r=(0,L._)((0,Q.useState)(function(){return(0,nZ.MT)()}),1)[0];return(0,O.tZ)(nx.Provider,{value:r,children:(0,O.BX)(V.G,{css:lh.gitPane,children:[(0,O.tZ)(rL,{}),t,(0,O.tZ)(V.G,{css:lh.gitPaneContent,children:n})]})})}function lv(e){var t=e.state,n=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,nb.P5)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(t){case ti.yG.NOT_INITIALIZED:return(0,O.tZ)(es.Z,{pane:{type:"git"},action:(0,O.tZ)(rm,{})});case ti.yG.ON_UNBORN_BRANCH:return(0,O.tZ)(o9,{onFileClick:r,status:n});case ti.yG.MERGING:return(0,O.tZ)(aG,{onFileClick:r,gotoPendingState:i});case ti.yG.REBASING:return o?(0,O.tZ)(aN,{gotoPendingState:i,onFileClick:r}):(0,O.tZ)(o6,{});case ti.yG.REVERTING:return(0,O.tZ)(o5,{});case ti.yG.CHERRY_PICKING:return(0,O.tZ)(oJ,{});case ti.yG.APPLYING_MAILBOX:return(0,O.tZ)(rN,{});case ti.yG.BISECTING:return(0,O.tZ)(rO,{});case ti.yG.DETACHED_HEAD:return(0,O.tZ)(o8,{});default:return null}}function ly(e){var t=e.mode,n=e.status,r=e.remotes,i=e.previewBranch,o=e.previewCommit,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,s=e.onViewCommitClick,u=e.onViewSettingsClick,d=e.gotoPendingState,f=e.performPaneOperation;switch(t){case b.DASHBOARD:return(0,O.tZ)(o4,{currentBranch:a,switchMode:l});case b.BRANCH:return(0,O.tZ)(oj,{performPaneOperation:f,status:n,branch:i,remotes:r,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d});case b.CURRENT_BRANCH:return(0,O.tZ)(oj,{performPaneOperation:f,status:n,remotes:r,branch:a,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d,current:!0});case b.SETTINGS:return(0,O.tZ)(lf,{});case b.COMMIT:return(0,O.tZ)(aT,{status:n,remotes:r,onViewCommitClick:s,hash:o,switchMode:l});default:(0,nT.Z)(t)}}function lb(e){var t=(0,J.Z)().git;(0,Q.useEffect)(function(){e&&t.forceRefresh()},[e,t])}var lw=U.Dy.Object({type:U.Dy.Literal("git")}),lZ={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,O.tZ)(lm,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.greenStrongest,size:t},children:(0,O.tZ)(ny.Z,{})})},getTitle:function(){return"Git"},description:"Version control for your Repl",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(lw,e)}},lx=n(37968),lC=n(96949),lk=n(76881),lS=n(52589),l_=n(49719);function lT(){var e=(0,lk.uV)();return(0,Q.useCallback)(function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,ep._)({state:l_.BI.current()},r)})},[e])}function lE(e){(0,lC.j)(lS.U3.HISTORY_USED,{action:e,which:"ws"})}function lR(e){var t=e.onClose;return(0,O.tZ)(ey.zx,{text:"Cancel",onClick:function(){lE("historyExplicitlyClosed"),t()}})}var lD=n(92234),lI=(0,eW.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function lB(){var e,t="/replEnvironmentMobile"===(0,aX.useRouter)().pathname,n=(0,l_.bA)(),r=(0,l_._Z)(),i=(0,aY.U)(),o=!n||0===n.count;return(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8),q.l0.align.center,o?lI:null],children:[(0,O.tZ)(lD.Z,{id:i("diffButton"),isOn:null!==(e=null==n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){o||r({comparing:e.target.checked})}}),(0,O.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},q.l0.flex.column,q.l0.align.center],htmlFor:i("diffButton"),children:(0,O.tZ)(W.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function lA(){var e=(0,l_.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,O.tZ)(nA.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}var lP=n(66598);function lG(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,l_.bA)(),c=(0,Q.useMemo)(function(){return[n?q.l0.rowReverseWithGap(4):q.l0.rowWithGap(4),q.l0.align.center]},[n]);if(!l)return null;if(0===l.count)return(0,O.BX)(V.G,{css:c,children:[(0,O.tZ)(lP.Z,{size:24}),(0,O.tZ)(W.xv,{color:a,multiline:!1,children:"Server Authored"})]});var s=l.changes[l.version];if(!l.users)return(0,O.BX)(V.G,{css:c,children:[(0,O.tZ)(nL.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,O.tZ)(W.xv,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[s.userId];return u?(0,O.BX)(V.G,{css:c,children:[(0,O.tZ)(nL.q,{size:24,src:u.image,username:u.username}),i?null:(0,O.tZ)(W.xv,{color:a,multiline:!1,children:u.username})]}):s.timestamp>16546464e5?(0,O.BX)(V.G,{css:c,children:[(0,O.tZ)(lP.Z,{size:24}),i?null:(0,O.tZ)(W.xv,{color:a,multiline:!1,children:"Server Authored"})]}):(0,O.BX)(V.G,{css:c,children:[(0,O.tZ)(nL.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,O.tZ)(W.xv,{color:a,multiline:!1,children:"Unknown"})]})}var lL=n(39031),lN=n(12285),lO=n(4955),lU=n(14105),lM=n(9670),lX=function(e){"use strict";(0,lO._)(n,e);var t=(0,lM._)(n);function n(e){var r;return(0,lN._)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,lU._)(Error)),lF=n(2553);function lW(){var e=(0,e$._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return lW=function(){return e},e}function lV(){var e=(0,e$._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return lV=function(){return e},e}var lH=(0,eK.Ps)(lW());function lz(e,t,n){return new Promise(function(r,i){try{var o,a=e.watchTextFile(t,{onReady:(o=(0,tM._)(function(e){var t,o;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}lV();var lj=lF.I;function lq(){return(lq=(0,tM._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b;return(0,tX.Jh)(this,function(w){switch(w.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.size)return[2,{}];if(n.size>=lj)return[2,"too_many_users"];return[4,e.query({query:lH,variables:{ids:Array.from(n)}})];case 1:if(u=(s=w.sent()).data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,N._)(u.usersByIds)):u.usersByIds,p={},h=!0,m=!1,g=void 0;try{for(v=f[Symbol.iterator]();!(h=(y=v.next()).done);h=!0)p[(b=y.value).id]={id:b.id,username:b.username,image:b.image}}catch(e){m=!0,g=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}return[2,p]}})})).apply(this,arguments)}function lJ(){return(lJ=(0,tM._)(function(e,t,n){var r,i,o;return(0,tX.Jh)(this,function(a){switch(a.label){case 0:var l;return[4,lz(e,n,(l=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){return(t=e.fetchChanges,0===(n=e.version))?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,t){return lq.apply(this,arguments)}(t,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}(x||(x={})).TooManyUsersRequestedError="too_many_users";var lY=n(58988),l$=(0,eW.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function lK(e){var t=e.onCloseHistory,n=(0,aZ.Z)().showError,r=(0,L._)((0,Q.useState)(!1),2),i=r[0],o=r[1],a=(0,L._)((0,Q.useState)(!1),2),l=a[0],c=a[1],s=(0,J.Z)().fs,u=(0,l_.bA)(),d=lT(),f=(0,nb.P5)({controlName:"flag-draft-buffers"}),p=(0,lY.Qk)(),h="Reset",m=!0;function g(){return(g=(0,tM._)(function(){var e,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:if(!u||!s||l)return[2];i.label=1;case 1:var a,h;return i.trys.push([1,3,4,5]),c(!0),lE("versionRestored"),e=u.filePath,[4,(a=u.version+1,lz(s,e,(h=(0,tM._)(function(t){var n,r,i,o,l,c,u,d;return(0,tX.Jh)(this,function(h){switch(h.label){case 0:if(n=t.fetchChanges,r=t.writeChange,a>(i=t.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n(1,i,"")];case 2:if((l=h.sent()).isDisposed)throw new lX("File deleted or removed.");return o=l.result,[3,4];case 3:throw h.sent(),new lX("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(c=(0,em._)(o.slice(a,o.length).reverse()))[0],d=c.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw tW.Tb(e),new lX("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!f||p))return[3,6];return[4,s.flush(new Set([e]))];case 5:h.sent(),h.label=6;case 6:return[2]}})}),function(e){return h.apply(this,arguments)})))];case 2:return i.sent(),t(),[3,5];case 3:if((r=i.sent())instanceof lX)return n(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),c(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(h="No history",m=!0):l||i?(h="Resetting...",m=!0):u.playing?(h="Playing...",m=!0):u.version===u.count-1?(h="Viewing latest",m=!0):(h="Reset editor to here",m=!1):(h="Loading...",m=!0),(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{text:h,disabled:m,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,O.tZ)(lx.Z,{})}),u&&0!==u.count&&(0,O.tZ)(rU.u,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,O.BX)(V.G,{css:q.l0.colWithGap(24),children:[(0,O.tZ)(W.h4,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,O.tZ)(eb.Tg,{elevated:!0,css:[q.l0.px(16),q.l0.py(12),q.l0.borderRadius(8)],children:(0,O.BX)("dl",{css:l$,children:[(0,O.tZ)("dt",{children:"File"}),(0,O.tZ)("dd",{children:u.filePath}),(0,O.tZ)("dt",{children:"Version"}),(0,O.BX)("dd",{children:[u.version+1,(0,O.BX)("span",{css:[q.l0.color.foregroundDimmest],children:[(0,O.tZ)("span",{css:q.l0.mx(8),children:"/"}),u.count]})]}),(0,O.tZ)("dt",{children:"Date"}),(0,O.tZ)("dd",{children:(0,O.tZ)(nA.EK,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,O.tZ)("dt",{children:"Author"}),(0,O.tZ)("dd",{children:(0,O.tZ)(lG,{})})]})}),(0,O.tZ)(e8.E,{icon:(0,O.tZ)(lL.Z,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8),q.l0.justify.end],children:[(0,O.tZ)(ey.zx,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,O.tZ)(ey.zx,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return g.apply(this,arguments)},iconLeft:(0,O.tZ)(lx.Z,{})})]})]})})]})}var lQ=n(67790),l0=(0,Q.forwardRef)(function(e,t){var n=(0,l_.bA)(),r=(0,Q.useRef)(null);(0,Q.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var i=(0,Q.useMemo)(function(){return(0,O.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:q.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(q.TV.foregroundDefault," inset")}}})},[]);return n&&n.count>1?i:null}),l1=(0,Q.forwardRef)(function(e,t){var n=(0,l_.bA)(),r=(0,Q.useMemo)(function(){return(0,O.BX)(O.HY,{children:[(0,O.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,O.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:q.TV.backgroundHighest,borderRadius:"2px"},children:(0,O.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:q.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[t]),i=(0,Q.useMemo)(function(){return(0,O.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,O.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:q.TV.backgroundHighest,borderRadius:"2px"}})})},[t]);return n&&n.count>1?r:i}),l2=["ArrowLeft","ArrowRight","Home","End"];function l3(){var e=(0,l_.bA)(),t=(0,l_._Z)(),n=(0,L._)((0,Q.useState)(!1),2),r=n[0],i=n[1],o=(0,Q.useRef)(null),a=(0,Q.useRef)(null),l=(0,Q.useRef)(null),c=function(e){(0,lQ.A)(o,"--scrubber-transition-time",e)},s=function(e){(0,lQ.A)(o,"--scrubber-progress",e.toString())};return e&&!r&&(s(e.version/(e.count-1)),e.playing?c("50ms"):c("100ms")),(0,Q.useEffect)(function(){if(e&&a.current&&l.current&&!r){var n=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=n.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,f=r.target===n?d/2:r.clientX-l.left,p=null,h=function(n){var r=Math.max(0,Math.min(1,(n-a.left-f)/(u-d)));r!==p&&(p=r,s(r),t({version:Math.round(r*(e.count-1)),playing:!1}))};h(r.clientX);var m=function(e){c("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),r.preventDefault(),r.stopPropagation()}};return n.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){n.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,t,r]),(0,Q.useEffect)(function(){if(e&&l.current&&!r){var n=l.current,i=function(n){if(e&&l2.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=null;switch(n.key){case"ArrowLeft":a=Math.max(0,i-r);break;case"ArrowRight":a=Math.min(o,i+r);break;case"Home":a=0;break;case"End":a=o}null!==a&&(t({version:a,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}},[e,t,r]),(0,Q.useMemo)(function(){return(0,O.BX)(V.G,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,O.tZ)(l1,{ref:a}),(0,O.tZ)(l0,{ref:l})]})},[])}var l4=n(33323);function l8(){var e=(0,l_.bA)(),t=0,n=0;return e&&0!==e.count&&(t=e.version+1,n=e.count),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(4),q.l0.justify.spaceBetween],children:[(0,O.tZ)(W.xv,{css:{minWidth:"2ch",textAlign:"right"},color:e?"default":"dimmer",multiline:!1,children:t}),(0,O.tZ)(W.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,O.tZ)(W.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var l6=n(30286),l5=n(81253);function l7(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function l9(){var e,t,n,r,i=(0,l_.bA)(),o=(0,l_._Z)(),a=(null!==(t=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,l=null!==(n=null==i?void 0:i.version)&&void 0!==n?n:0,c=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,s=!i||0===i.count,u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l7,i=(0,L._)((0,Q.useState)(!1),2),o=i[0],a=i[1],l=(0,Q.useCallback)(function(){t(1)},[t]),c=(0,Q.useCallback)(function(){if(e+1>n){a(!1);return}t(e+1)},[t,e,n]);return(0,Q.useEffect)(function(){if(o){var e=setTimeout(function(){c()},r(n));return function(){return clearTimeout(e)}}},[o,c,r,n]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,f=u.start,p=u.stop;(0,Q.useEffect)(function(){d&&!c?p():!d&&c&&f()},[c,d,f,p]);var h="Loading...";return i&&(d?h="Pause":i.version===i.count-1?h="Play file history from beginning":0===i.version?h="Play file history":i.version>0&&(h="Play file history from here")),(0,O.tZ)(X.hU,{alt:h,size:24,disabled:s,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!c})},children:d?(0,O.tZ)(l6.Z,{}):(0,O.tZ)(l5.Z,{})})}function ce(){return(0,O.BX)(V.G,{css:[q.l0.rowWithGap(4),q.l0.align.center],children:[(0,O.tZ)(l9,{}),(0,O.tZ)(ct,{}),(0,O.tZ)(l8,{}),(0,O.tZ)(cn,{})]})}function ct(){var e=(0,l_.bA)(),t=(0,l_._Z)(),n=!e||0===e.version||0===e.count;return(0,O.tZ)(X.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,O.tZ)(n9.Z,{})})}function cn(){var e=(0,l_.bA)(),t=(0,l_._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,O.tZ)(X.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,O.tZ)(l4.Z,{})})}var cr=n(83989);function ci(e){var t,n,r,i,o,a=e.filePath,l=e.onCloseHistory,c="/replEnvironmentMobile"===(0,aX.useRouter)().pathname,s=c?q.l0.borderRadius(0):q.l0.borderRadius(0,0,8,8),u=(0,l_.bA)(),d=(0,l_._Z)(),f=(0,l_.Ai)(),p=lT(),h=(n=(t=(0,L._)((0,Q.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=t[1],i=(0,J.Z)().fs,o=(0,cr.x)(),(0,Q.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,t,n){return lJ.apply(this,arguments)})(i,o,a).then(function(t){var n=t.data,i=t.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||(t instanceof Error||(t=Error(t)),r({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[a,i,o]),n),m=h.data,g=h.loading,v=h.error;return(0,Q.useEffect)(function(){if(v){p(v,"history2-index",{filePath:a});return}if(m&&!g)return d({filePath:a,changes:m.changes,users:m.users}),lE("historyLoaded"),function(){f()}},[a,m,g,v,p,d,f]),(0,O.BX)(V.G,{css:[q.l0.colWithGap(8),q.l0.p(8),q.l0.zIndex(3),q.l0.overflow("hidden"),s,q.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(q.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,O.BX)(eb.Tg,{css:[q.l0.position.relative,q.l0.colWithGap(4),q.l0.px(12),q.l0.pt(8),q.l0.pb(8),q.l0.align.center,q.l0.borderRadius(8),q.l0.overflow("hidden")],elevated:!0,children:[(0,O.tZ)(l3,{}),(0,O.BX)(V.G,{css:[q.l0.display.flex,q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.width("100%")],children:[(0,O.tZ)(ce,{}),u&&u.count>0?(0,O.BX)(V.G,{css:[q.l0.rowWithGap(4),q.l0.align.center],children:[(0,O.tZ)(lA,{}),g||c?null:(0,O.tZ)(W.xv,{color:"dimmer",multiline:!1,children:""}),(0,O.tZ)(lG,{color:"dimmer",hideName:c,reversed:!0})]}):null]})]}),(0,O.BX)(V.G,{css:[q.l0.display.flex,q.l0.flex.row],children:[(0,O.tZ)(co,{justify:"flex-start",children:(0,O.tZ)(lB,{})}),(0,O.BX)(co,{justify:"flex-end",children:[(0,O.tZ)(lR,{onClose:l}),(0,O.tZ)(lK,{onCloseHistory:l})]})]})]})}function co(e){var t=e.children,n=e.justify;return(0,O.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:q.TV.space8,minWidth:0},children:t})}var ca=n(33083),cl=n(41691),cc=n(38158),cs=n(25907),cu=(0,cc.B)();function cd(e){if(!(e instanceof to.YW))return{compareTo:e.field(cu.state,!1),changed:!1};var t=e.state.field(cu.state,!1),n=e.startState.field(cu.state,!1)!==t;return{compareTo:t,changed:n}}function cf(e,t){e.state.field(cu.state,!1)!==t&&e.dispatch({effects:cu.effect.of(t)})}var cp=to.QQ.define({create:function(){return null},update:function(e,t){var n=cd(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new cs.PO(o,r)}}),ch=null!==(C=globalThis.requestIdleCallback)&&void 0!==C?C:globalThis.requestAnimationFrame,cm=null!==(k=globalThis.cancelIdleCallback)&&void 0!==k?k:globalThis.cancelAnimationFrame,cg=ts.p.line({class:"cm-diff-deleted"}),cv=function(e){"use strict";(0,lO._)(n,e);var t=(0,lM._)(n);function n(e,r){var i;return(0,lN._)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&cm(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(cm(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=ch(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0},n}(ts.l9),cy=to.QQ.define({create:function(){return ts.p.none},update:function(e,t){var n=t.state.field(cp,!1);if(!n)return ts.p.none;var r=cd(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,n=new cv(e.content,function(){return cb(t.state,e.content)});o(0,ts.p.widget({widget:n,side:-1,block:!0}))}()}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}var f=!0,p=!1,h=void 0;try{for(var m,g=n.lines()[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)!function(){var e=m.value;if(e.isDeleted&&o(e.from,cg),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=e.insertions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value,r=new cv(n.content,function(){return cb(t.state,n.content)});o(e.to,ts.p.widget({widget:r,side:1,block:!0}))}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}()}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}return ts.p.set(i,!0)},provide:function(e){return ts.tk.decorations.from(e)}});function cb(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(ca.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l=0;if((0,cl.bW)(a,{style:function(t){return(0,ca.QN)(e,t)}},function(e,n,i){if(e>l){var o=document.createElement("span");o.textContent=t.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),l=n}),l<t.length){var c=document.createElement("span");c.textContent=t.slice(l),r.append(c)}return r}var cw=function(e){"use strict";(0,lO._)(n,e);var t=(0,lM._)(n);function n(e){var r;return(0,lN._)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(ts.SJ),cZ=function(e){"use strict";(0,lO._)(n,e);var t=(0,lM._)(n);function n(e,r){var i;return(0,lN._)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null==e?void 0:null===(n=e.lines)||void 0===n?void 0:n.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r+=s.height;var u=this.piece(s);u.style.position="absolute",u.style.top="-".concat(r,"px"),t.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var d=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,N._)(d)),t},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),(null===n||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(ts.SJ),cx=(0,ts.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=cd(e.state).compareTo,i=e.state.field(cp,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===ts.kH.Text)o(d.from,new cw(f));else if(Array.isArray(d.type)){var p=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(y.type===ts.kH.Text){o(y.from,new cw(f));break}}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return to.Xs.of(n,!0)}var b=!0,w=!1,Z=void 0;try{for(var x,C=t[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value,S=[],_=e.state.doc.lineAt(k.from).number,T=i.line(_);if(T){var E=e.defaultLineHeight,R=T.offset,D=T.isDeleted,I=T.insertions,B=1===_?i.startInsertions():null,A=B?B.length:0,P=B?[]:null;if(!(Array.isArray(k.type)&&k.type.length>=A+(null!==(O=null==I?void 0:I.length)&&void 0!==O?O:0)+1)){if(B&&P){var G=!0,L=!1,N=void 0;try{for(var O,U,M=B[Symbol.iterator]();!(G=(U=M.next()).done);G=!0){var X=U.value;P.push({height:E,left:null,right:X.number})}}catch(e){L=!0,N=e}finally{try{G||null==M.return||M.return()}finally{if(L)throw N}}}if(S.push({height:k.height,left:_,right:D?null:_+R}),I){var F=!0,W=!1,V=void 0;try{for(var H,z=I[Symbol.iterator]();!(F=(H=z.next()).done);F=!0){var j=H.value;S.push({height:E,left:null,right:j.number})}}catch(e){W=!0,V=e}finally{try{F||null==z.return||z.return()}finally{if(W)throw V}}}o(k.from,new cZ(S,P));continue}for(var q=0;q<k.type.length;q++){var J=k.type[q];if((null==J?void 0:J.type)===ts.kH.Text){if(B&&P)for(var Y=0;Y<B.length;Y++){var $,K=B[Y],Q=k.type[q-Y-1];P.push({height:null!==($=null==Q?void 0:Q.height)&&void 0!==$?$:E,left:null,right:K.number})}if(S.push({height:J.height,left:_,right:D?null:_+R}),I)for(var ee=0;ee<I.length;ee++){var et,en=I[ee],er=k.type[q+ee+1];S.push({height:null!==(et=null==er?void 0:er.height)&&void 0!==et?et:E,left:null,right:en.number})}break}}o(k.from,new cZ(S,P))}}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}return to.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(cd(a).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new cw(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return cd(t.state).compareTo?new cZ([{height:0,left:n,right:n}]):new cw(n)}}),cC="#0053A644",ck="#c93c3733",cS=[ts.tk.theme({".cm-diff-inserted":{backgroundColor:cC},".cm-diff-deleted":{backgroundColor:ck},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:cC,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:ck,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),cu.state,cp,cy,cx,(0,ca.mi)({openText:"",closedText:""})],c_=n(4384),cT=function(){"use strict";function e(t){var n=this;(0,lN._)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,p=u.offsetX,h=u.offsetY,m=n.view.coordsAtPos(f),g=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var v=g.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-v)/n.view.defaultLineHeight)*n.view.defaultLineHeight+v,b=i+m.left-t.left+p,w=r+y-t.top+h;e.push({dom:d,x:b,y:w})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,to.gc.TrackDel);if(!c){this.removeElement(l.dom);continue}l.pos=c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();(u=S||(S={}))[u.Insertion=0]="Insertion",u[u.Deletion=1]="Deletion";var cE=function(){"use strict";function e(t){(0,lN._)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,to.gc.TrackDel),d=t.changes.mapPos(s.to,-1,to.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges(function(e,t,i,o){r.set(i,o,n,i!==o?0:1,!0)},!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},t[Symbol.iterator]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),cR="cm-flash-insertion",cD="cm-flash-deletion",cI="cm-flash-element",cB=ts.tk.theme((0,tr._)({},".".concat(cR,", .").concat(cD),{display:"inline-block"})),cA=function(e){"use strict";(0,lO._)(n,e);var t=(0,lM._)(n);function n(){return(0,lN._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(t=this.animation)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===S.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,c_._)(n,[{key:"type",get:function(){return this.classList.contains(cR)?S.Insertion:S.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,lU._)(HTMLElement));customElements.get(cI)||customElements.define(cI,cA);var cP=function(){"use strict";function e(t){(0,lN._)(this,e),this.view=t,this.prevFlashes=new cE(1e3),this.decorations=ts.p.set([]),this.hasRenderedOnce=!1,this.overlay=new cT(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;switch(c.type){case S.Insertion:n.push({from:c.from,to:c.to,value:(s=c.time,ts.p.mark({class:cR,tagName:cI,attributes:{"data-time":s.toString()}}))});break;case S.Deletion:var s,u,d=e.state.wordAt(c.from);d&&n.push({from:d.from,to:c.to,value:(u=c.time,ts.p.mark({class:cD,tagName:cI,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",p=!0,h=!1,m=void 0;try{for(var g,v=t.cursors()[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value,b=y.type,w=y.pos,Z=function(e,t){var n=e===S.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(Z,w)}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}this.prevFlashes=t,this.decorations=ts.p.set(n,!0)},e}(),cG=ts.lg.fromClass(cP,{decorations:function(e){return e.decorations}}),cL=to.Wl.lowest([cB,cG]),cN=n(11515),cO=n(42305),cU=n(28365),cM=n(43561),cX=function(){"use strict";function e(t){(0,lN._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,o){i||(r||(r=o),n===o||(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[to.as.empty(0),null];var r=this.forward[t].newLength;return[to.as.empty(r),null]}var i=t<n?cF(this.forward.slice(t,n)):cF(this.inverted.slice(n,t).reverse()),o=t<n?t:n-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,L._)(this.slice(0,e),1)[0],n=to.xv.of([""]);return t.apply(n).sliceString(0)},(0,c_._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function cF(e){if(0===e.length)return to.as.empty(0);if(1===e.length)return e[0];var t=(0,em._)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}var cW=new cO.j(function(){return(0,ts.CT)()}),cV=[cL,cS];function cH(e){var t,n,r,i=e.filePath,o=(0,l_.bA)(),a=(0,cN.Z)(),l=a.ref,c=a.view;(0,cU.VD)(c),(0,l_._H)(c);var s=lT();t=(0,Q.useMemo)(function(){return(null==o?void 0:o.changes)?new cX(o.changes):null},[null==o?void 0:o.changes]),n=(0,Q.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,Q.useRef)({current:-1,next:0,pending:!1}),(0,Q.useEffect)(function(){if(c)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[c]),(0,Q.useEffect)(function(){if(c&&o&&t){o.comparing?cf(c,n):cf(c,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,c&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,L._)(t.slice(n+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,L._)(t.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?ts.tk.scrollIntoView(a,{yMargin:10}):void 0})}(c,t,e.current,e.next),e.current=e.next))}))}},[c,o,t,n]);var u=cW.use();return(0,O.tZ)("div",{css:cM.ev,children:(0,O.tZ)("div",{css:cM.ac,children:o&&0===o.count?(0,O.tZ)(cz,{}):(0,O.tZ)("div",{css:cM.ac,children:(0,O.tZ)(tg.ZP,{ref:l,css:cM.Mp,filePath:i,extensions:[u,cV],initializing:!o,onException:function(e){s(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function cz(){return(0,O.tZ)("div",{css:[cM.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,O.tZ)("span",{children:"This file has no history."})})}var cj=U.Dy.Object({type:U.Dy.Literal("history"),data:U.Dy.Object({path:U.Dy.Union([U.Dy.String(),U.Dy.Null()])})}),cq={Content:function(e){var t=e.pane,n=e.options;return(0,O.tZ)(cJ,(0,eh._)((0,ep._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,O.tZ)(lx.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,ee.UO)(e.data.path)):"History - no file open"},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(cj,e)}};function cJ(e){var t=e.path,n=e.performPaneOperation,r=(0,L._)((0,Q.useState)(function(){return(0,nZ.MT)()}),1)[0],i=(0,L._)((0,Q.useState)(function(){return(0,nZ.MT)()}),1)[0],o=(0,Y.Mp)({path:t,performPaneOperation:n});(0,K.L5)(function(){if(o)return{commands:o}},[o]);var a=(0,ef.Z)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,O.tZ)(cU.Cl.Provider,{value:r,children:(0,O.tZ)(l_.ox.Provider,{value:i,children:(0,O.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,O.tZ)(Y.HK,{path:t,performPaneOperation:n}),(0,O.tZ)(cH,{filePath:t}),(0,O.tZ)(ci,{filePath:t,onCloseHistory:a})]})})}):null}var cY=n(56466),c$=n(2047),cK=n(37862),cQ=n(75710),c0=n(79484),c1=n(73220),c2=n(30446),c3=n(30826),c4=n.n(c3),c8=n(90831),c6=n(73878),c5=n(572),c7=n(83918),c9=n(6843),se=(0,Q.memo)(c1.Z),st=(0,H.X)({bodyRoot:[q.l0.flex.growAndShrink(1),q.l0.overflowY("auto")],contentRoot:[q.l0.colWithGap(8),q.l0.height("100%"),q.l0.width("100%"),q.l0.overflow("auto"),q.l0.zIndex(2),q.l0.align.center,q.l0.py(16),q.l0.px(16),q.l0.borderRadius(8),(0,tr._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(cQ.j.tabletMin,"px)"),q.l0.px(32))],emptyState:[q.l0.colWithGap(4),q.l0.align.center,{"& button":[{color:q.TV.foregroundDimmer}]}],header:[q.l0.rowWithGap(4),q.l0.height(30),q.l0.width("100%"),q.l0.align.center],markdownContainer:[q.l0.width("100%"),{"& .rendered-markdown":[q.l0.flex.column,q.l0.center],"& .rendered-markdown > *":[q.l0.maxWidth(840),q.l0.width("100%")],"& .rendered-markdown > table":q.l0.maxWidth("100%")}],paneRoot:[q.l0.position.relative,q.l0.display.flex,q.l0.flex.column,q.l0.overflowY("hidden"),q.l0.height("100%"),q.l0.width("100%")]});function sn(e){var t,n,r=(0,J.Z)().fs,i=(0,L._)((t=(0,Q.useRef)(!1),n=(0,Q.useRef)(null),[(0,cK.Z)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),o=i[0],a=i[1],l=(0,Q.useRef)(null),c=(0,c$.T)(),s=e.path,u=e.performPaneOperation,d=(0,Q.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:s}}}),u({operation:"commit"})},[u,s]);(0,K.L5)(function(){return{commands:[{match:c9.pl,data:{label:"Open in Editor",icon:(0,O.tZ)(an.Z,{}),type:"action",run:d}}]}},[d]);var f=e.isHidden,p=(0,c5.p5)();(0,Q.useEffect)(function(){if(!f){var e=c4()(function(e){(0,c8.Z)(e,{behavior:c?"auto":"smooth",scrollMode:"if-needed"})},100),t=c4()(function(t){if(s===(null==t?void 0:t.path)&&t&&!a.current){var n=l.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.dataset.sourcepos;if(!f)throw Error("Expected data source pos on selected element");var p=(0,L._)(f.split("-"),2),h=p[0],m=p[1],g=(0,L._)(h.split(":").map(Number),2),v=g[0],y=g[1],b=(0,L._)(m.split(":").map(Number),2),w=b[0],Z=b[1];if(i>=v&&o>=y&&(i<w||i===w&&o<=Z))return d}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}(l.current,t.position):null;n&&e(n)}},200),n=p.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[p,f,c,s]);var h=(0,L._)((0,Q.useState)(null),2),m=h[0],g=h[1];(0,Q.useEffect)(function(){return g(null),r.watchTextFile(s,{onReady:function(e){g(e.initialContent.toString())},onChange:function(e){g(e.latestContent)},onMoveOrDelete:function(e){e.eventType===c6.kS.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[s,r,u]);var v=(0,c0.yx)(),y=v.isAiCalloutVisible,b=v.handleDismiss;return(0,O.BX)(V.G,{css:st.paneRoot,children:[(0,O.tZ)(Y.HK,{path:e.path,performPaneOperation:u,children:m&&m.trim().length?(0,O.tZ)(c7.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,O.tZ)(an.Z,{})}):null}),y?(0,O.tZ)(c0.ZP,{filePath:e.path,onDismiss:b,performPaneOperation:e.performPaneOperation}):null,(0,O.tZ)(V.G,{css:st.bodyRoot,children:(0,O.tZ)(sr,{ref:o,content:m,fs:r,markdownContainerRef:l,openInEditor:d,path:s})})]})}var sr=(0,Q.forwardRef)(function(e,t){var n=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===n?(0,O.tZ)(si,{}):(0,O.tZ)(V.G,{css:st.contentRoot,innerRef:t,children:(0,O.tZ)(V.G,{innerRef:i,css:st.markdownContainer,children:n.trim().length?(0,O.tZ)(se,{path:a,source:n,fs:r,sourcePos:!0}):(0,O.tZ)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,O.BX)(V.G,{css:st.emptyState,innerRef:t,children:[(0,O.tZ)(W.xv,{color:"dimmer",children:(0,O.tZ)("i",{children:"This file is empty"})}),(0,O.tZ)(ey.zx,{text:"Open in Editor",iconLeft:(0,O.tZ)(an.Z,{}),onClick:o,variant:"nofill"})]})})})})});function si(){var e=(0,L._)((0,Q.useState)(!1),2),t=e[0],n=e[1];return(0,Q.useEffect)(function(){var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[]),t?(0,O.tZ)(c2.Z,{}):null}var so=U.Dy.Object({type:U.Dy.Literal("markdown"),data:U.Dy.Object({path:U.Dy.String({minLength:1})})}),sa={Content:function(e){var t=e.pane,n=e.options;return(0,O.tZ)(sn,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,O.tZ)(cY.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,ee.UO)(e.data.path):"Markdown"},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(so,e)}},sl=U.Dy.Object({type:U.Dy.Literal("media"),data:U.Dy.Object({path:U.Dy.String()})}),sc={Content:function(e){var t=e.pane,n=e.options;return(0,O.tZ)(ss,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,O.tZ)(F.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,ee.UO)(e.data.path)},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(sl,e)}};function ss(e){var t=e.path,n=e.performPaneOperation,r=(0,J.Z)().fs,i=(0,Y.Mp)({path:t,performPaneOperation:n}),o=i?(0,N._)(i):[],a=(0,Q.useCallback)(function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})},[n,t]),l={match:c9.pl,data:{label:"Open in Editor",icon:(0,O.tZ)(an.Z,{}),type:"action",run:function(){a()}}};return(0,ee.B4)(t)&&o.push(l),(0,K.L5)(function(){if(i)return{commands:o}},[i]),(0,O.BX)(O.HY,{children:[(0,O.tZ)(Y.HK,{path:t,performPaneOperation:n,children:(0,O.tZ)(c7.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,O.tZ)(an.Z,{})})}),(0,O.tZ)(Y.VY,{centered:!0,children:(0,O.tZ)(tE.Z,{filePath:t,fs:r})})]})}var su=n(59905),sd=n(93948),sf=U.Dy.Object({type:U.Dy.Literal("neon")}),sp={Content:function(e){var t=e.options;return(0,O.tZ)(sd.Z,{performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.blueStrongest,size:t},children:(0,O.tZ)(su.Z,{})})},getTitle:function(){return"PostgreSQL"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",category:$.hc.CloudServices,decode:function(e){return M.B4.Decode(sf,e)}},sh=n(78719),sm=n(54129),sg=n(17601),sv=n(36259),sy=n(31940),sb=n(19602),sw=n(70145),sZ=n(9834),sx=n.n(sZ),sC=n(39268),sk=n(22630),sS=(0,H.X)({self:[q.l0.p(12),q.l0.colWithGap(16)],devUrl:[q.l0.rowWithGap(4),q.l0.align.center],url:[q.l0.color.accentPositiveStronger,q.l0.fontSize("small"),q.l0.focusRing,{"&:hover":[q.l0.cursor.pointer,q.l0.color.accentPositiveStrongest]}],secondaryUrl:[q.l0.color.foregroundDimmest,q.l0.fontSize("small"),q.l0.focusRing,{"&:hover":[q.l0.cursor.pointer,q.l0.color.accentPrimaryStrongest]}],section:[q.l0.colWithGap(4)],portHeader:[q.l0.rowWithGap(8),q.l0.align.baseline],openPort:[q.l0.color.accentPositiveStronger],localPortIcon:[q.l0.color.foregroundDefault,q.l0.px(4),{flex:"0 0 auto",marginLeft:"auto"}],internalMessage:[q.l0.flex.shrink(1),{marginLeft:"auto",span:q.l0.color.foregroundDimmest}],portStatus:[q.l0.py(0),q.l0.px(4)],newPort:[q.l0.color.foregroundDefault,q.l0.rowWithGap(4),q.l0.align.center,q.l0.my(1),q.l0.borderRadius(16),q.l0.height(20)],externalPortButton:[{"&":[q.l0.height(20),q.l0.borderRadius(16),q.l0.color.foregroundDefault]}],externalPortPopup:[{"&":[q.l0.height(20),q.l0.p(6),q.l0.borderRadius(16),q.l0.color.foregroundDefault],"& > span":[q.l0.fontSize(12)],"& > svg":[q.l0.mr(4)]}],textButton:[q.l0.cursor.pointer,q.l0.reset.button,q.l0.color.accentPrimaryStronger,q.l0.focusRing,q.l0.hover(q.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[q.l0.height(20),q.l0.my(1)],newPortClose:q.l0.mr(4),portActionItem:[q.l0.fontSize(q.TV.fontSizeDefault),q.l0.viewStyle,q.l0.height(32),q.l0.px(16),q.l0.py(8),q.l0.flex.row,q.l0.align.center,q.l0.color.foregroundDefault,q.l0.backgroundColor.backgroundDefault,nD.gU.listItem,{":not([disabled])":{":hover":{backgroundColor:q.TV.backgroundHigher}}}]});function s_(e){var t,n,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,c=(0,J.Z)().ports.updateDotReplitPortsMapping,s=(t=(0,J.Z)().ports,n=(0,sm.Z)(t.portsState),r=new Set(null==n?void 0:n.map(function(e){var t;return null!==(t=(0,sw.OD)(e.configuration))&&void 0!==t&&t}).filter(Boolean)),Array.from(sw.UK).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,O.tZ)(V.G,{css:q.l0.flex.row,children:void 0!==o&&0!==o?(0,O.tZ)(ey.zx,{css:sS.externalPortButton,iconRight:(0,O.tZ)(rv.Z,{}),text:":".concat(o),size:"small",onClick:function(){i&&(c(i,void 0,a),null==l||l())}}):(0,O.tZ)(sg.ZE,{cssProps:[sS.externalPortPopup],label:"Set external port",onAction:function(e){if(i){var t=s.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(c(i,t.externalPort,a),null==l||l())}},children:s.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,O.tZ)(sg.ck,{"aria-label":String(n),children:(0,O.BX)(V.G,{css:t?q.l0.color.foregroundDefault:q.l0.color.foregroundDimmest,children:[":",n]})},String(n))})})})}function sT(e){var t=e.portState,n=null;switch(t.configuration.type){case sw.DL.MISCONFIGURED:n=(0,O.tZ)(tO.u,{tooltip:"Port misconfigured",delay:"default",children:(0,O.tZ)(rg.Z,{})});break;case sw.DL.CONFIG_MISSING:n=(0,O.tZ)(tO.u,{tooltip:"Configuration missing",delay:"default",children:(0,O.tZ)(rg.Z,{})});break;case sw.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,O.tZ)(rg.Z,{});break;case sw.DL.FORWARDED:n=(0,O.tZ)(ew.Z,{});case sw.DL.INTERNAL_ONLY:}return(0,O.tZ)("span",{css:sS.localPortIcon,children:n})}function sE(e){var t=e.portState,n=e.width,r=(0,sw.VZ)(t.configuration)?"localhost":"0.0.0.0";return(0,O.BX)(sC.sg,{width:n||130,children:[(0,O.BX)(W.xv,{css:t.isOpen&&sS.openPort,children:[r,":",t.configuration.localPort]}),(0,O.tZ)(sT,{portState:t})]})}function sR(e){var t=e.portState,n=e.openWebview,r=e.openVncOutput,i=e.width;if(t.configuration.type===sw.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,O.tZ)(sC.sg,{width:i||180,children:(0,O.tZ)(e8.E,{css:sS.portStatus,icon:(0,O.tZ)(rg.Z,{}),text:"No ports available"})});var o=!!n&&t.isOpen&&t.configuration.type===sw.DL.FORWARDED,a=!!r&&t.configuration.isVnc;return(0,O.BX)(sC.sg,{width:i||180,children:[t.configuration.isVnc?(0,O.tZ)(e8.E,{css:sS.portStatus,icon:(0,O.tZ)(lL.Z,{}),text:"VNC Ports do not require external port"}):(0,O.tZ)(s_,{localPort:t.configuration.localPort,externalPort:(0,sw.OD)(t.configuration),isLocalhost:(0,sw.VZ)(t.configuration)}),o?(0,O.tZ)(X.hU,{alt:"Open in Webview",onClick:n,css:q.l0.color.foregroundDefault,children:(0,O.tZ)(sv.Z,{})}):null,a?(0,O.tZ)(X.hU,{alt:"View VNC output",onClick:r,css:q.l0.color.foregroundDefault,children:(0,O.tZ)(sv.Z,{})}):null]})}function sD(e){var t,n=e.portState;return n.isOpen?(0,O.BX)(O.HY,{children:[(0,O.tZ)(sC.sg,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,O.tZ)(sC.sg,{width:100,children:n.processInfo.pid})]}):(0,O.tZ)(sC.sg,{width:100})}function sI(e){var t=e.portState,n=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,O.tZ)(r0.Z,{})},{label:"Remove port config",key:"REMOVE",icon:(0,O.tZ)(sb.Z,{})}];return t.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,O.tZ)(sv.Z,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,O.tZ)(sv.Z,{})}),(0,O.tZ)(sC.sg,{width:30,last:!0,children:(0,O.tZ)(sg.ZE,{cssProps:[q.l0.height(22),q.l0.width(22),q.l0.color.foregroundDefault,{background:"transparent"}],menuCssProps:[{li:[q.l0.p(0)],"li > div":[q.l0.pl(6),q.l0.rowWithGap(4),q.l0.align.center]}],items:r,icon:(0,O.tZ)(sy.Z,{}),onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:r.map(function(e){return(0,O.tZ)(sg.ck,{children:(0,O.BX)(V.G,{css:sS.portActionItem,children:[e.icon?e.icon:(0,O.tZ)(V.G,{css:[q.l0.width(16)]}),(0,O.tZ)(W.xv,{multiline:!1,children:e.label})]})},e.key)})})})}function sB(e){var t=e.portState,n=e.portAction;return(0,O.BX)(sC.X2,{children:[(0,O.tZ)(sE,{portState:t}),(0,O.tZ)(sR,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})},openVncOutput:function(){n({type:"OPEN_VNC_OUTPUT",payload:{portState:t}})}}),(0,O.tZ)(sD,{portState:t}),(0,O.tZ)(sI,{portState:t,onAction:n})]},t.configuration.localPort)}(d=_||(_={})).OPEN_WEBVIEW="OPEN_WEBVIEW",d.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",d.EXTERNAL_LINK="EXTERNAL_LINK",d.REMOVE="REMOVE";var sA=function(e){var t=e.text,n=e.onClick;return(0,O.tZ)("button",{css:sS.textButton,onClick:n,children:t})};function sP(e){var t,n=e.openDotReplit,r=(0,L._)((0,Q.useState)(!1),2),i=r[0],o=r[1],a=(0,L._)((0,Q.useState)(),2),l=a[0],c=a[1],s=null===(t=(0,J.Z)().ports.portsState.current)||void 0===t?void 0:t.some(function(e){return e.configuration.localPort===l});return i?(0,O.BX)(sC.X2,{children:[(0,O.BX)(sC.sg,{width:130,children:[(0,O.tZ)(X.hU,{css:sS.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,O.tZ)(rv.Z,{})}),(0,O.tZ)(eg.II,{css:sS.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return c(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,O.tZ)(sC.sg,{children:s?(0,O.tZ)(e8.E,{css:sS.portStatus,colorway:"warning",text:"Local port already exists"}):(0,O.tZ)(s_,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,O.BX)(sC.X2,{children:[(0,O.tZ)(sC.sg,{width:130,children:(0,O.tZ)(ey.zx,{css:sS.newPort,iconLeft:(0,O.tZ)(nP.Z,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,O.tZ)(sC.sg,{children:(0,O.BX)(W.xv,{variant:"small",children:["This port config is saved in the"," ",(0,O.tZ)(sA,{text:".replit file",onClick:n}),"."," "]})})]})}function sG(e){var t,n=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,eY.Z)(),c=(0,sk.J_)({replId:l,container:a,ports:o}),s=(0,aZ.Z)().showError,u=(0,J.Z)().ports,d=u.portsState,f=u.removeDotReplitPortsMapping,p=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var t=(0,sw.OD)(e.payload.portState.configuration);if(!(null==c?void 0:c.presentationUrl)){s("URL not available.");return}var n=(0,sk.hw)(null==c?void 0:c.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":f(e.payload.portState.configuration.localPort,(0,sw.OD)(e.payload.portState.configuration))}};return(0,O.BX)(V.G,{css:sS.self,children:[(null==c?void 0:c.presentationUrl)?(0,O.BX)(O.HY,{children:[(0,O.BX)(V.G,{css:sS.section,children:[(0,O.tZ)(W.xv,{children:"Dev URL:"}),(0,O.BX)(V.G,{css:sS.devUrl,children:[(0,O.tZ)(sx(),{legacyBehavior:!0,href:c.presentationUrl,passHref:!0,children:(0,O.tZ)("a",{css:sS.url,target:"_blank",children:c.presentationUrl})}),(0,O.tZ)(tx.m,{textToCopy:c.presentationUrl})]})]}),(0,O.tZ)(nR.R,{})]}):null,(0,O.BX)(V.G,{css:sS.section,children:[(0,O.BX)(V.G,{css:sS.portHeader,children:[(0,O.tZ)(W.xv,{children:"Ports"}),(0,O.tZ)(sx(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,O.tZ)("a",{css:sS.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,O.BX)(sC.iA,{children:[(0,O.BX)(sC.X2,{children:[(0,O.tZ)(sC.sg,{header:!0,width:130,children:"Internal Port"}),(0,O.tZ)(sC.sg,{header:!0,width:180,children:"External Port"}),(0,O.tZ)(sC.sg,{header:!0,width:100,children:"Name"}),(0,O.tZ)(sC.sg,{header:!0,width:100,children:"Pid"})]}),d.current&&(null===(t=d.current)||void 0===t?void 0:t.length)>0?d.current.map(function(e){return(0,O.tZ)(sB,{portState:e,portAction:p},e.configuration.localPort)}):null,(0,O.tZ)(sP,{openDotReplit:n})]})]})]})}var sL=U.Dy.Object({type:U.Dy.Literal("networking")}),sN={Content:function(e){var t,n=e.options.performPaneOperation,r=(0,aZ.Z)().showError,i=(0,J.Z)(),o=i.fs,a=i.container,l=i.ports;return(0,O.tZ)(sG,{openDotReplit:(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){return n({operation:"open",pane:{type:"webview",data:e?{portType:"local",port:e}:void 0},secondary:!0}),[2]})}),function(e){return t.apply(this,arguments)}),openVncOutput:(0,tM._)(function(){return(0,tX.Jh)(this,function(e){return n({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var t=e.size;return(0,O.tZ)(sh.Z,{size:t})},getTitle:function(){return"Networking"},description:"Configure web server ports for your Repl",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(sL,e)}},sO=n(13),sU=n(54328),sM=U.Dy.Object({type:U.Dy.Literal("objectStorage")}),sX={Content:sU.Z,Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.tealStrongest,size:t},children:(0,O.tZ)(sO.Z,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your Repl",category:$.hc.CloudServices,decode:function(e){return M.B4.Decode(sM,e)}},sF=n(89313),sW=n(32681),sV=n.n(sW),sH=n(71724),sz=n(93503),sj=(0,H.X)({create:[q.l0.colWithGap(8),q.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[q.l0.position.absolute,q.l0.top(8),q.l0.left("50%"),{transform:"translateX(-50%)"}]});function sq(e){var t=e.data,n=e.onSave,r=(0,Q.useRef)(null),i=(0,Q.useRef)(null),o=(0,J.Z)().fs,a=(0,aZ.Z)(),l=a.showError,c=a.showConfirm,s=(0,L._)((0,Q.useState)(!1),2),u=s[0],d=s[1],f=(0,cK.Z)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,Q.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=sV()({canvas:e,data:t}),a=function(){return n(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[t,n,r]),(0,O.BX)(O.HY,{children:[(0,O.tZ)("canvas",{css:sj.canvas,ref:function(e){r.current=e,f(e)},tabIndex:0}),(0,O.tZ)(rU.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,O.tZ)(sH.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var t="".concat(e,".png"),n=i.current.curFrame().toPNG();o.writeFile(t,t9.Z.from(n)).then(function(e){if(e.error){l("Failed to write to file ".concat(t));return}c("Successfully exported to ".concat(t)),d(!1)})}})})]})}function sJ(e){var t,n=e.activeFile,r=(0,J.Z)().fs,i=(0,L._)((0,Q.useState)(!0),2),o=i[0],a=i[1],l=(0,L._)((0,Q.useState)(null),2),c=l[0],s=l[1],u=(0,aZ.Z)().showError,d=n.endsWith(".kbmsprite");(0,Q.useEffect)(function(){var e=!1;function t(){return(t=(0,tM._)(function(){var t,i,o;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:return[4,r.readFile(n)];case 1:if(t=l.sent(),a(!1),e)return[2];if(t.error)return u("failed to read ".concat(n)),[2];return o=(i=t.content.toString())&&JSON.parse(i),s(d?(0,sz.C)(o):o),[2]}})})).apply(this,arguments)}return!function(){t.apply(this,arguments)}(),function(){e=!0}},[r,n,u,d]);var f=(0,Q.useCallback)((t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[3,2];return[4,(0,sz.u)(e)];case 1:e=t.sent(),t.label=2;case 2:return[4,r.writeFile(n,t9.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&u("Failed to save ".concat(n,", please try again")),[2]}})}),function(e){return t.apply(this,arguments)}),[r,n,u,d]);return o?(0,O.tZ)(j.Z,{}):c?(0,O.tZ)(sq,{data:c,onSave:f}):(0,O.tZ)(sY,{onCreate:function(e){return s(e)}})}function sY(e){var t=e.onCreate,n=(0,L._)((0,Q.useState)(""),2),r=n[0],i=n[1],o=(0,L._)((0,Q.useState)(""),2),a=o[0],l=o[1],c=Number(r),s=Number(a);return(0,O.BX)(V.G,{css:sj.create,children:[(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,O.tZ)(eg.II,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,O.tZ)(eg.II,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,O.tZ)(ey.zx,{text:"Create",disabled:!(c>0&&s>0),onClick:function(){t({width:Math.ceil(c),height:Math.ceil(s)})}})]})}var s$=U.Dy.Object({type:U.Dy.Literal("pedit"),data:U.Dy.Object({path:U.Dy.String()})}),sK={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,O.tZ)(sQ,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,O.tZ)(sF.Z,{size:t})},getTitle:function(e){return(0,ee.UO)(e.data.path)},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(s$,e)}};function sQ(e){var t=e.path,n=e.performPaneOperation,r=(0,Y.Mp)({path:t,performPaneOperation:n});return(0,K.L5)(function(){if(r)return{commands:r}},[r]),(0,O.BX)(O.HY,{children:[(0,O.tZ)(Y.HK,{path:t,performPaneOperation:n}),(0,O.tZ)(Y.VY,{children:(0,O.tZ)(sJ,{activeFile:t})})]})}var s0=n(62667),s1=n(64771),s2=n(65559),s3=(0,H.X)({badge:[q.l0.backgroundColor.backgroundHighest,q.l0.borderRadius(4),{padding:"0 0.35em"}],container:[q.l0.p(8),q.l0.colWithGap(8)],header:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.py(4),q.l0.justify.spaceBetween,q.l0.flex.grow(1),q.l0.pr(16),q.l0.height(24)],result:[q.l0.borderRadius(4),q.l0.overflow("hidden")],problems:[q.l0.px(6),q.l0.py(6)],item:[nD.gU.listItem,q.l0.reset.button,q.l0.justify.spaceBetween,q.l0.px(8),q.l0.py(4),q.l0.overflow("hidden"),q.l0.cursor.pointer,q.l0.borderRadius(4),{"&:focus-visible":[q.l0.focusRing],"&:hover, &:focus-visible":[q.l0.backgroundColor.backgroundHighest]}],itemMain:[q.l0.flex.growAndShrink(1)],itemSecondary:[q.l0.color.foregroundDimmest],flex:[q.l0.rowWithGap(8),q.l0.align.center],message:[q.l0.flex.shrink(1),q.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function s4(e){var t=e.isActive,n=e.performPaneOperation,r=(0,L._)((0,Q.useState)({}),2),i=r[0],o=r[1],a=(0,s2.nC)(),l=(0,K.dr)(),c=(0,Q.useCallback)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,t=r.value;if("codeEditor"===t[1].type){var n=l(t[0]);if(n&&"codeEditor"===n.type){var i=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);i&&a&&o(function(e){return(0,eh._)((0,ep._)({},e),(0,tr._)({},i,a))})}}}()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},[l,a]);return((0,Q.useEffect)(function(){t&&c()},[t,c]),(0,K.L5)(function(){return{type:"problems",updateProblems:function(e,t){o(function(n){return(0,eh._)((0,ep._)({},n),(0,tr._)({},e,t))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,O.tZ)(V.G,{css:s3.container,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,O.tZ)(eb.Tg,{elevated:!0,css:s3.result,children:(0,O.tZ)(eM.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,O.BX)(V.G,{css:s3.header,children:[(0,O.BX)(V.G,{css:s3.flex,children:[(0,O.tZ)(F.Z,{path:e}),(0,O.tZ)(W.xv,{children:e})]}),(0,O.tZ)(V.G,{css:s3.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,O.tZ)(V.G,{css:s3.problems,children:i[e].map(function(t,r){var i=t.range.start.line+1,o=t.range.start.character;return(0,O.tZ)(s1.Z,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,O.tZ)(es.Z,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}var s8=U.Dy.Object({type:U.Dy.Literal("problems")}),s6={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,O.tZ)(s4,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,O.tZ)(s0.Z,{size:t})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(s8,e)}},s5=n(18454),s7=n(98514),s9=n(1567),ue=n(21885),ut=n(89774),un=(0,eW.iv)([q.l0.focusRing,q.l0.display.flex,q.l0.center,q.l0.borderRadius(4),q.l0.backgroundColor.backgroundRoot,q.l0.color.foregroundDefault,q.l0.cursor.pointer,q.l0.p(4),(T={transition:"background-color 0.2s",border:"none"},(0,tr._)(T,q.wl.hover,[q.l0.backgroundColor.backgroundHigher]),(0,tr._)(T,":focus",{outline:"none"}),T)]),ur=function(e){var t=e.onClick;return(0,O.tZ)(tO.u,{tooltip:"Search",placement:"bottom-start",children:(0,O.tZ)("button",{"aria-label":"Search",onClick:t,css:un,children:(0,O.tZ)(ut.Z,{size:16})})})},ui=n(16642),uo=n(29574),ua=n(12666),ul=n(44629),uc=n(78371),us=n(13502),uu=n(71049),ud=n(85234),uf=n.n(ud),up=(0,nZ.cn)(0),uh=(0,nZ.cn)(function(e){return e(up)<=uu.Bk?"compact":"normal"}),um={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},ug=(0,eW.iv)([q.l0.position.absolute,q.l0.left(8),q.l0.right(0),q.l0.zIndex(5)]);function uv(e){var t=e.lineNumber,n=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,Q.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,Q.useMemo)(function(){var e,t=null==a?void 0:a._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),c=(0,Q.useRef)(""),s=(0,Q.useRef)(!1),u=(0,Q.useRef)(null),d=(0,L._)((0,Q.useState)(64),2),f=d[0],p=d[1],h=(0,Q.useRef)(null),m=(0,Q.useCallback)(function(e){return p(e.height)},[p]),g=(0,iN.WR)({onCode:function(e){if(null===e){c.current="";return}c.current!==e&&(s.current&&(r.write(um.CURSOR_RESTORE),r.write(um.ERASE_TO_END_OF_SCREEN)),r.write(um.CURSOR_SAVE),r.write(um.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(um.COLOR_RESET),s.current=!0,c.current=e)}}),v=g.sendMessage,y=g.stopMessage,b=g.getCode,w=g.loading,Z=g.completed,x=g.error,C=g.clearError,k=(0,Q.useCallback)(function(){(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),y(),s.current&&(r.write(um.CURSOR_RESTORE),r.write(um.ERASE_TO_END_OF_SCREEN),r.write(um.COLOR_RESET)),o()},[r,y,o]);(0,Q.useEffect)(function(){return r.onData(function(){y(),o()}).dispose},[r,y,o]);var S=(0,uu.U1)({id:uf()(),inputRef:h,loading:w,onSubmit:function(){I?D():((0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),B())},onClose:k}),_=S.value,T=S.setValue,E=S.onKeyDown,R=S.escPressed,D=(0,Q.useCallback)(function(){var e,t=null===(e=b())||void 0===e?void 0:e.code;if(!s.current||!t){k();return}r.write(um.CURSOR_RESTORE),r.write(um.ERASE_TO_END_OF_SCREEN),r.write(um.COLOR_RESET),i(t),(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),o()},[r,b,o,k,i]),I=Z&&u.current===_,B=(0,Q.useCallback)(function(){u.current=_,(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),v({message:_})},[v,_]),A=l.height*(t+1)+8,P="top";A+f>n&&(P="bottom",A=n-l.height*(t+1)+4);var G=(0,iN.Un)(),N=(0,L._)((0,Q.useState)(function(){return(0,nZ.MT)()}),1)[0],U=(0,nw.b9)(up,{store:N}),M=(0,nw.Dv)(uh,{store:N}),F=(0,cK.Z)(function(e){return U(e.width)});return(0,O.tZ)(V.G,{css:ug,style:{top:"top"===P?A:void 0,bottom:"bottom"===P?A:void 0},children:(0,O.BX)(uu.If,{requestMeasure:m,type:"generateCode",isCodeMirrorPocket:!1,error:x,clearError:C,innerRef:F,children:[(0,O.tZ)(uu.II,{value:_,inputRef:h,onChange:function(e){return T(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:E,autoFocus:!0}),(0,O.BX)(uu.$_,{children:[(0,O.BX)(O.HY,{children:[(0,O.tZ)(uu.Xs,{type:"generateCode"}),Z?(0,O.tZ)(X.hU,{alt:"Rerun the same prompt",onClick:function(){return B()},size:12,colorway:"grey",children:(0,O.tZ)(rn.Z,{})}):null]}),I?(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),k()}}),(0,O.tZ)(ey.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:D,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,O.tZ)(uu.k4,{escPressed:R,connecting:!G,loading:w,disabled:!_||!_.trim(),promptPresentation:"normal"===M,onClick:function(){w?((0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:_}),y()):((0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),B())}})]})]})})}var uy=n(75982);function ub(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose,i=(0,J.Z)().ports,o=(0,Q.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,Q.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,O.tZ)(uy.ms,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:t.length>0?{portType:"local",port:t[0].configuration.localPort}:void 0}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===t.length&&o(t[0].configuration.localPort)},onDoExposePort:function(){1===t.length&&a(t[0].configuration.localPort)}})}var uw=n(487),uZ=n(24810),ux=n(73660),uC=n(56738),uk="\x1b[200~",uS="\x1b[201~",u_=n(70108),uT=(0,eW.iv)([q.l0.height("100%"),q.l0.overflow("hidden"),{"& .xterm":[q.l0.pl(8),q.l0.pt(8),q.l0.pb(4),q.l0.height("100%")]}]),uE=(0,H.X)({container:[q.l0.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:uT,xtermWithBorderRadius:[uT,{"& .xterm-viewport":[q.l0.borderRadius(0,0,8,8)]}]}),uR=(0,eW.iv)([q.l0.position.absolute,q.l0.flex.row,q.l0.top(8),q.l0.right(8),q.l0.height(30),q.l0.align.center,q.l0.zIndex(8),{opacity:0}]);function uD(e){var t,n,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,c=e.openSearchAndReplace,s=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,f=e.currentPromptLineNumber,p=e.onOpenGeneratePrompt,h=e.onCloseGeneratePrompt,m=e.searchState,g=e.setSearchState,v=(0,uo.Gn)("accessibleTerminal").preferences.accessibleTerminal,y=(0,nb.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),b=(0,nb.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),w=!y&&b,Z=(0,ua.dF)(null!==(t=null==i?void 0:i.cgroup)&&void 0!==t?t:void 0);r&&m.isSearching&&(n=(0,O.tZ)(ui.R,{searchValue:m.searchText,setSearchValue:function(e){g({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return g({isSearching:!1})}})),!r||m.isSearching||w||(n=(0,O.tZ)(ur,{onClick:function(){return g({isSearching:!1})}}));var x=(0,aU.T3)(),C=(0,uc.av)().onContextMenu,k=(0,us.j)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:s,openShellSearch:function(e){g({isSearching:!0,searchText:e})},openSearchAndReplace:c,openGeneratePrompt:p});(0,Q.useEffect)(function(){null==r||r.fit()},[r,Z]);var S=(0,L._)((0,Q.useState)(0),2),_=S[0],T=S[1],E=(0,cK.Z)(function(e){T(e.height)},{type:"throttle",wait:200});return(0,O.BX)(V.G,{className:l,innerRef:E,css:uE.container,onKeyDown:function(e){"f"===e.key&&(0,s9.jh)(e)&&(g({isSearching:!0,searchText:""}),e.preventDefault())},children:[!v&&(0,O.tZ)(ul.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,O.BX)(V.G,{css:[q.l0.coverContainer,q.l0.flex.column],onClick:function(){d&&(h(),null==r||r.focus())},children:[(0,O.tZ)(V.G,{css:[x?uE.xterm:uE.xtermWithBorderRadius,q.l0.flex.growAndShrink(1),w&&d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return C(e,{command:k})}}),(0,O.tZ)(ub,{portsOpenedByThisShell:Z,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),w&&r&&d?(0,O.tZ)(uv,{lineNumber:f,paneHeight:_,shell:r,sendToShellChannel:o,onClose:function(){h(),r.focus()}}):null,r?(0,O.BX)(V.G,{className:"controls",css:uR,children:[n,w?null:(0,O.tZ)(ue.Z,{onClick:r.clear})]}):null,r?null:(0,O.tZ)("code",{css:[q.l0.color.foregroundDimmest,q.l0.coverContainer,q.l0.p(8),q.l0.font.code],children:"Loading..."})]})}var uI=n(31417),uB=n(45077),uA=n(40703),uP=n(92943),uG=n(67827),uL=n(37475),uN=(0,eW.iv)([q.l0.position.relative,q.l0.height("100%")]),uO=new TextEncoder;function uU(e){var t,n,r,i,o=e.shellId,a=e.paneId,l=e.performPaneOperation,c=e.emitPaneMetrics,s=e.isActive,u=e.currentUser,d=e.onExit,f=(0,uL.Am)().flagPid2ShellMuxed,p=(0,uP.Z)(),h=(0,J.Z)().fs,m=(0,ty.Z)(o),g=(0,Q.useRef)(!1),v=(0,Q.useRef)(null),y=(0,L._)((0,Q.useState)("loading"),2),b=y[0],w=y[1],Z=(0,L._)((0,Q.useState)(void 0),2),x=Z[0],C=Z[1],k=(0,L._)((0,Q.useState)(0),2),S=k[0],_=k[1],T=(0,L._)((0,Q.useState)(!1),2),E=T[0],R=T[1],D=(0,Q.useRef)(!1),I=(0,ty.Z)(b),B=u.id,A=(0,Q.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:(0,$.Dp)(e),data:e}})},[l]),P=(0,Q.useCallback)(function(e,t){l({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[l]),G=(0,Q.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[l]),N=(0,iN.bD)({onSession:function(e){l({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,U=(0,L._)((0,iN.Ni)(),1)[0],M=(0,Q.useCallback)((t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){return(0,lC.j)(lC.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:U,user_model_selection:U,message_content:e,message_source:"shell"}),N({kind:"message",message:e,intent:iN.$h.EXPLAIN,model:"advanced"===U?iN.BY.ADVANCED:iN.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[U,N]),X=(0,ux.K)(),F=(0,Q.useRef)(null),W=(0,Q.useRef)(""),H=(0,u_.bW)({onFTCSState:function(e){var t=e.state;t===u_.qj.CommandExecuted&&(D.current=!0),t===u_.qj.CommandFinished&&(D.current=!1),F.current=t},onOpenGeneratePrompt:function(){D.current||R(!0)},onUpdateCurrentPromptLineNumber:_}),z=(0,Q.useCallback)(function(e,t){if(t.startsWith("A")){var n=t.replace(/^A;/,"");X("user:shell:exec",{command:n}),(0,lC.j)(lC.U3.SHELL_COMMAND_EVALED,{context:n,replId:null==p?void 0:p.id,api:"pid2",pwd:W.current})}if(t.startsWith("B")){var r=t.replace(/^B;/,"");W.current=r}},[X,p,W]),j=(0,L._)((0,uC.Z)({openFile:A,listFiles:h.listFiles,openWebview:P,onInBandOSCMessages:(i={},(0,tr._)(i,u_.Ch,H),(0,tr._)(i,82,z),i),performPaneOperation:l,emitPaneMetrics:c}),2),q=j[0],Y=j[1],ee=(0,Q.useId)(),et="scope-shell-".concat(ee);(0,iH.ow)(et,s),(0,iV.Il)(function(){return[u_.CH.id,{run:function(){D.current||R(!0)},scope:et,bubble:!1}]},[R]),(0,K.Wk)(function(){return q},[q]);var en=(0,uG.U)(function(e){var t;return t=(0,tM._)(function(t){return(0,tX.Jh)(this,function(n){return e.shellExec.resize.rpc({id:m.current,userId:B,processViewId:a,size:t}),[2]})}),function(e){return t.apply(this,arguments)}},[m,B,a]);(0,uA.C)((n=(0,tM._)(function(e,t){var n,r,i,o,l,c,s,u,d,f,p,h,g;return(0,tX.Jh)(this,function(y){switch(y.label){case 0:if(n=t.addCleanup,!q)return[2];return[4,e.shellExec.connect.stream({id:m.current,userId:B,processViewId:a})];case 1:i=(r=L._.apply(void 0,[y.sent(),3]))[0],o=r[1],l=r[2],n(l),c=q.getSize(),null==en||en(c),v.current=i,s=!1,u=!1,y.label=2;case 2:y.trys.push([2,7,8,13]),f=(0,uI._)(o),y.label=3;case 3:return[4,f.next()];case 4:if(!(s=!(p=y.sent()).done))return[3,6];if(!(h=p.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code)return q.clear(),[3,6];if("NO_PROCESS_MATCHING_ID"===h.payload.code||"PROCESS_IS_NOT_RUNNING"===h.payload.code)return[3,6];throw Error("[".concat(h.payload.code,"]: ").concat(h.payload.message))}"output"===h.payload.$kind&&q.write(h.payload.output),y.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return g=y.sent(),u=!0,d=g,[3,13];case 8:if(y.trys.push([8,,11,12]),!(s&&null!=f.return))return[3,10];return[4,f.return()];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(u)throw d;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[q,m,en,B,a]),(0,uA.C)((r=(0,tM._)(function(e,t){var n,r,i,o,a,l,c,s,u,p,h,v,y;return(0,tX.Jh)(this,function(b){switch(b.label){case 0:return n=t.addCleanup,[4,e.shellExec.monitor.subscribe({id:m.current})];case 1:i=(r=L._.apply(void 0,[b.sent(),2]))[0],o=r[1],n(o),a=!1,l=!1,b.label=2;case 2:b.trys.push([2,10,11,16]),s=(0,uI._)(i),b.label=3;case 3:return[4,s.next()];case 4:if(!(a=!(u=b.sent()).done))return[3,9];if(!(p=u.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code)return[3,9];if("NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,8];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}if(w("Loading"!==(h=p.payload).state?"ready":"loading"),"NotStarted"!==h.state&&h.cgroupPath&&C({cgroup:h.cgroupPath}),!("Finished"===h.state&&!1===g.current))return[3,8];if(g.current=!0,o(),f)return[3,6];return d(),[4,e.shellExec.cleanStoredState.rpc({id:m.current})];case 5:b.sent(),b.label=6;case 6:if(!(f&&1===Object.keys(null!==(v=h.userIdsToProcessViewIds)&&void 0!==v?v:{}).length))return[3,8];return d(),[4,e.shellExec.cleanStoredState.rpc({id:m.current})];case 7:b.sent(),b.label=8;case 8:return a=!1,[3,3];case 9:return[3,16];case 10:return y=b.sent(),l=!0,c=y,[3,16];case 11:if(b.trys.push([11,,14,15]),!(a&&null!=s.return))return[3,13];return[4,s.return()];case 12:b.sent(),b.label=13;case 13:return[3,15];case 14:if(l)throw c;return[7];case 15:return[7];case 16:return[2]}})}),function(e,t){return r.apply(this,arguments)}),[m,d,f]);var er=(0,uG.U)(function(e){var t;return t=(0,tM._)(function(t){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:return n=t.id,[4,e.shellExec.disconnect.rpc({id:n,processViewId:a,userId:B})];case 1:if(r.sent(),!(!f&&"ready"===I.current))return[3,4];return g.current=!0,[4,e.shellExec.kill.rpc({id:n})];case 2:return r.sent(),[4,e.shellExec.cleanStoredState.rpc({id:n})];case 3:r.sent(),r.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}},[f,I,a,B]),ei=(0,ty.Z)(er);(0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:return[4,null===(e=ei.current)||void 0===e?void 0:e.call(ei,{id:m.current})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return function(){!function(){e.apply(this,arguments)}()}},[ei,m]),(0,Q.useEffect)(function(){if(q){var e=q.onData(function(e){var t,n=uO.encode(e);null===(t=v.current)||void 0===t||t.push({$kind:"stdin",stdin:n})}),t=q.onResize(function(e){null==en||en(e)});return function(){e.dispose(),t.dispose()}}},[q,a,en]),(0,Q.useEffect)(function(){return function(){v.current=null}},[]);var eo=(0,Q.useCallback)(function(e){if(!v.current)return!1;var t=uO.encode(e);return v.current.push({$kind:"stdin",stdin:t}),!0},[]);(0,uZ.Z)({sendInput:eo,paste:function(e){return!!q&&(q.paste(e),!0)}});var ea=(0,L._)((0,Q.useState)({isSearching:!1}),2),el=ea[0],ec=ea[1],es=(0,Q.useMemo)(function(){return[{match:c9.pl,data:{type:"action",label:"Clear Shell",icon:(0,O.tZ)(sb.Z,{}),run:function(){return null==q?void 0:q.clear()}}},{match:c9.pl,data:{type:"action",label:"Find in Shell",icon:(0,O.tZ)(ut.Z,{}),run:function(){var e;ec({isSearching:!0,searchText:null!==(e=null==q?void 0:q._term.getSelection())&&void 0!==e?e:""})}}}]},[q]);return(0,K.L5)(function(){return{commands:es,type:"shell"}},[es]),(0,O.tZ)(V.G,{css:uN,children:(0,O.tZ)(uD,{shell:q,shellMetadata:x,shellRef:Y,performPaneOperation:l,currentPromptLineNumber:S,isGeneratePromptVisible:E,sendToShellChannel:eo,openSearchAndReplace:G,openAIWithMessage:M,onOpenGeneratePrompt:function(){D.current||((0,lC.j)(lC.U3.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),R(!0))},onCloseGeneratePrompt:function(){return R(!1)},searchState:el,setSearchState:ec})})}var uM=n(28670),uX=n(93632),uF=n(6829),uW=n(9164),uV=n(44794),uH=n(64888),uz=n(53941),uj=(0,H.X)({wrapper:[q.l0.height("100%"),q.l0.flex.column],headerWrapper:[q.l0.flex.growAndShrink(0),q.l0.align.center,q.l0.justify.spaceBetween,q.l0.rowWithGap(4),q.l0.px(4),q.l0.border({direction:"bottom",color:q.TV.outlineDimmest}),q.l0.height(28)],headerGroupLeft:[q.l0.rowWithGap(4),q.l0.align.center,q.l0.flex.grow(1),q.l0.flex.shrink(1)],headerGroupRight:[q.l0.rowWithGap(4),q.l0.align.center,q.l0.flex.shrink(0)],failureWrapper:[q.l0.p(8),q.l0.color.accentNegativeStronger],avatarWrapper:[q.l0.flex.growAndShrink(0),q.l0.rowWithGap(4),q.l0.align.center],terminalWrapper:[q.l0.height("100%"),q.l0.flex.growAndShrink(1)],shellListButton:[q.l0.viewStyle,q.l0.reset.button,q.l0.p(2),q.l0.height(22),q.l0.rowWithGap(4),q.l0.width("100%"),q.l0.maxWidth(600),q.l0.align.center,nD.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonText:[q.l0.font.code,q.l0.flex.shrink(1),{fontSize:q.TV.fontSizeSmall,whiteSpace:"nowrap",overflow:"hidden"}],shellListItem:[q.l0.display.flex,q.l0.borderRadius(),q.l0.px(8),q.l0.py(2),q.l0.align.center,q.l0.rowWithGap(4),q.l0.color.foregroundDefault,q.l0.cursor.pointer,q.l0.maxWidth(600),{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(q.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:nD.vb.interactiveBackground},"&[data-selected]":{backgroundColor:nD.vb.interactiveBackgroundActive},"&[aria-disabled]":{color:q.TV.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[q.l0.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}]});function uq(e){if("Running"!==e.state)return"";var t=e.cwd,n=e.command,r="";return t&&(r+=t.replace(/^\/home\/runner/,"~")),n&&(t&&(r+=": "),r+=n),r}function uJ(e){var t,n=(0,uL.Am)().flagPid2ShellMuxed,r=(0,uF.x)(),i=(0,L._)((0,Q.useState)({state:"loading"}),2),o=i[0],a=i[1],l=(0,ty.Z)(o),c=(0,Q.useRef)(!1),s=(0,L._)((0,Q.useState)(null),2),u=s[0],d=s[1],f=(0,Q.useRef)(!1),p=(0,uG.U)(function(e){var t;return t=(0,tM._)(function(t){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(f.current)return[2];return f.current=!0,[4,e.shellExec.spawn.rpc((0,ep._)({cmd:"bash",cwd:null==t?void 0:t.cwd},(null==t?void 0:t.initialCmd)?{initialCmd:t.initialCmd}:void 0))];case 1:return(n=r.sent()).ok?(a({state:"connected",id:n.payload.id}),c.current=!0):(tW.$e(function(e){e.setTag("service","pid2-shell"),tW.Tb(n.payload)}),a({state:"errored"})),f.current=!1,[2]}})}),function(e){return t.apply(this,arguments)}},[]);(0,uA.C)((t=(0,tM._)(function(t,r){var i,o,s,u,f,h,m,g,v,y,b,w;return(0,tX.Jh)(this,function(Z){switch(Z.label){case 0:if(i=r.addCleanup,!p)return[2];return[4,t.shellExec.monitorAll.subscribe({})];case 1:s=(o=L._.apply(void 0,[Z.sent(),2]))[0],u=o[1],i(u),f=!1,h=!1,Z.label=2;case 2:Z.trys.push([2,7,8,13]),g=function(){var t=y.value;if(!t.ok){if("UNEXPECTED_DISCONNECT"===t.payload.code)return"break";throw Error("[".concat(t.payload.code,"]: ").concat(t.payload.message))}var r=t.payload.processes;if(d(r),!n&&"exiting"===l.current.state)return{v:void 0};if("connected"===l.current.state){var i=l.current.id;r.find(function(e){return e.id===i})||p()}if(n||"loading"!==l.current.state||p({cwd:e.initialPwd,initialCmd:e.initialCmd}),n&&"connected"!==l.current.state){if(!1===c.current&&(void 0!==e.initialPwd||void 0!==e.initialCmd))return p({cwd:e.initialPwd,initialCmd:e.initialCmd}),{v:void 0};var o=r.filter(function(e){var t;return"NotStarted"!==e.state&&0===Object.keys(null!==(t=e.userIdsToProcessViewIds)&&void 0!==t?t:{}).length});0===o.length?p():a({state:"connected",id:o[0].id})}},v=(0,uI._)(s),Z.label=3;case 3:return[4,v.next()];case 4:if(!(f=!(y=Z.sent()).done))return[3,6];if(b=g(),"object"===(0,uB._)(b))return[2,b.v];if("break"===b)return[3,6];Z.label=5;case 5:return f=!1,[3,3];case 6:return[3,13];case 7:return w=Z.sent(),h=!0,m=w,[3,13];case 8:if(Z.trys.push([8,,11,12]),!(f&&null!=v.return))return[3,10];return[4,v.return()];case 9:Z.sent(),Z.label=10;case 10:return[3,12];case 11:if(h)throw m;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[p,n,l,e.initialPwd,e.initialCmd]);var h=(0,Q.useMemo)(function(){var e;if("connected"===o.state)return null!==(e=null==u?void 0:u.find(function(e){return e.id===o.id}))&&void 0!==e?e:void 0},[u,o]),m=(0,Q.useCallback)(function(){a({state:"exiting"}),n||e.performPaneOperation({operation:"remove",pane:{id:e.paneId}})},[n,e]),g=(0,uG.U)(function(e){return(0,tM._)(function(){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(!(t=null==h?void 0:h.id))return[3,3];return[4,e.shellExec.kill.rpc({id:t})];case 1:return n.sent(),[4,e.shellExec.cleanStoredState.rpc({id:t})];case 2:n.sent(),n.label=3;case 3:return[2]}})})},[null==h?void 0:h.id]);return(0,O.BX)(V.G,{css:uj.wrapper,children:[n?(0,O.BX)(V.G,{css:uj.headerWrapper,children:[(0,O.tZ)(V.G,{css:uj.headerGroupLeft,children:u&&u.length>0?(0,O.tZ)(uW.ZE,{onAction:function(e){a({state:"connected",id:e})},trigger:(0,O.BX)(uV.z,{css:uj.shellListButton,children:[(0,O.tZ)(tC.Z,{size:12}),(0,O.tZ)(V.G,{css:uj.shellListButtonText,children:h?uq(h):"Shells"}),(0,O.tZ)(uY,{userIdsToProcessViewIds:h&&"NotStarted"!==h.state?h.userIdsToProcessViewIds:void 0})]}),items:u,children:function(e){return(0,O.BX)(uH.sN,{id:e.id,css:uj.shellListItem,children:[(0,O.tZ)(W.xv,{css:uj.shellListItemText,children:uq(e)}),(0,O.tZ)(uY,{userIdsToProcessViewIds:e&&"NotStarted"!==e.state?e.userIdsToProcessViewIds:void 0})]})}}):null}),(0,O.BX)(V.G,{css:uj.headerGroupRight,children:[(0,O.tZ)(X.hU,{alt:"New Shell",onClick:function(){null==p||p()},children:(0,O.tZ)(nP.Z,{color:q.TV.foregroundDimmest})}),(0,O.tZ)(X.hU,{alt:"Kill Shell",disabled:void 0===h,onClick:function(){null==g||g()},children:(0,O.tZ)(uz.Z,{color:q.TV.foregroundDimmest})}),h&&"Running"===h.state&&!1===h.isHealthy?(0,O.tZ)(tO.u,{tooltip:"The nix environment failed to build. Check if your replit.nix is configured properly. For more information look into /run/replit/env/error.",children:(0,O.tZ)(rg.Z,{color:q.TV.accentNegativeDefault})}):null]})]}):null,(0,O.BX)(V.G,{css:uj.terminalWrapper,children:["loading"===o.state?(0,O.tZ)(uX.Z,{}):null,r&&"connected"===o.state?(0,O.tZ)(uU,(0,eh._)((0,ep._)({},e),{shellId:o.id,currentUser:r,onExit:m}),o.id):null,"errored"===o.state?(0,O.tZ)(V.G,{css:uj.failureWrapper,children:"Failed to load the Shell."}):null]})]})}function uY(e){var t=e.userIdsToProcessViewIds,n=(0,eu.aG)(),r=(0,Q.useMemo)(function(){var e;return null!==(e=Object.keys(null!=t?t:{}).map(function(e){return parseInt(e,10)}).map(function(e){return n.find(function(t){return t.id===e})}).filter(Boolean))&&void 0!==e?e:[]},[t,n]);return 0===r.length?null:(0,O.tZ)(V.G,{css:uj.avatarWrapper,children:r.map(function(e){return(0,O.tZ)(uM.Z,{user:e,size:16},e.id)})})}var u$=U.Dy.Object({type:U.Dy.Literal("shell"),data:U.Dy.Optional(U.Dy.Object({initialPwd:U.Dy.Optional(U.Dy.String()),initialCmd:U.Dy.Optional(U.Dy.String())}))}),uK={Content:function(e){var t,n,r,i=e.pane,o=e.options,a=(0,uL.iM)(),l=(0,uL.Am)();return a&&(l.flagPid2ShellMuxed||l.flagPid2Shell)?(0,O.tZ)(uJ,{paneId:o.paneId,isActive:o.isActive,initialPwd:null===(n=i.data)||void 0===n?void 0:n.initialPwd,initialCmd:null===(r=i.data)||void 0===r?void 0:r.initialCmd,performPaneOperation:o.performPaneOperation,emitPaneMetrics:o.emitPaneMetrics}):(0,O.tZ)(uQ,{isActive:o.isActive,initialPwd:null===(t=i.data)||void 0===t?void 0:t.initialPwd,performPaneOperation:o.performPaneOperation,emitPaneMetrics:o.emitPaneMetrics})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.blueStrongest,size:t},children:(0,O.tZ)(s7.Z,{})})},getTitle:function(){return"Shell"},description:"Directly access your Repl through a command line interface (CLI)",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(u$,e)}};function uQ(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,S,_,T,E,R=e.isActive,D=e.initialPwd,I=e.performPaneOperation,B=e.emitPaneMetrics,A=(0,J.Z)(),P=A.container,G=A.fs,N=(0,L._)((0,Q.useState)(!1),2),U=N[0],M=N[1],X=(0,L._)((0,Q.useState)(void 0),2),F=X[0],W=X[1],V=(0,Q.useCallback)(function(e){I({operation:"open",secondary:!0,pane:{type:(0,$.Dp)(e),data:e}})},[I]),H=(0,Q.useCallback)(function(e){I({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[I]),z=(0,iN.bD)({onSession:function(e){I({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,j=(0,L._)((0,iN.Ni)(),1)[0],q=(0,Q.useCallback)((t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){return(0,lC.j)(lC.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:j,user_model_selection:j,message_content:e,message_source:"shell"}),z({kind:"message",message:e,intent:iN.$h.EXPLAIN,model:"advanced"===j?iN.BY.ADVANCED:iN.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[j,z]),Y=(0,Q.useCallback)(function(e,t){I({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[I]),ee=(0,L._)((0,Q.useState)(0),2),et=ee[0],en=ee[1],er=(0,L._)((0,Q.useState)(!1),2),ei=er[0],eo=er[1],ea=(0,L._)((r=(n={container:P,initialPwd:D,onOutput:(0,Q.useCallback)(function(){M(!0)},[M]),onShellMetadata:W,openFile:V,performPaneOperation:I,emitPaneMetrics:B,listFiles:G.listFiles,openWebview:Y,onOpenGeneratePrompt:function(){(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),eo(!0)},onUpdateCurrentPromptLineNumber:function(e){en(e)}}).onShellKey,i=n.onOutput,o=n.onShellMetadata,a=n.container,l=n.initialPwd,c=n.openFile,s=n.performPaneOperation,u=n.emitPaneMetrics,d=n.listFiles,f=n.openWebview,p=n.onOpenGeneratePrompt,h=n.onUpdateCurrentPromptLineNumber,m=(0,u_.bW)({onOpenGeneratePrompt:p,onUpdateCurrentPromptLineNumber:h}),v=(g=(0,L._)((0,uC.Z)({openFile:c,listFiles:d,openWebview:f,onInBandOSCMessages:(0,tr._)({},u_.Ch,m),performPaneOperation:s,emitPaneMetrics:u}),2))[0],y=g[1],w=(b=(0,L._)((0,Q.useState)(null),2))[0],Z=b[1],x=(0,ty.Z)(o),(0,Q.useEffect)(function(){return a.openChannel({service:"shell"},function(e){var t=e.channel;return Z(t),t.onCommand(function(e){if(e.shellMetadata){var t;null===(t=x.current)||void 0===t||t.call(x,e.shellMetadata)}}),function(){Z(null)}})},[a,x]),C=(0,ux.K)({channelId:null==w?void 0:w.id}),k=(0,Q.useRef)(!1),S="",_="",T="",E=(0,Q.useCallback)(function(e){if(!w||!v)return!1;var t=a.client();if(!w||"open"!==w.status||t.getConnectionState()!==uw.em.CONNECTED)return!1;var n=e.startsWith(uk)&&e.endsWith(uS)?e.slice(uk.length,e.length-uS.length):e;return w.send({input:n}),!0},[v,w,a]),(0,uZ.Z)({sendInput:E,paste:function(e){return!!v&&(v.paste(e),!0)}}),(0,Q.useEffect)(function(){if(w&&v){var e=v.onKey(function(e){var t=e.key,n=e.domEvent;if("\r"===t){var i=_;_.endsWith(S)&&S.length>0&&(i=_.slice(0,-S.length)),C("user:shell:output:clean",{output:i,command:T}),C("user:shell:exec",{command:S}),C("user:shell:output",{output:_}),T=S,S="",_=""}else S+=t;r&&r(n)}),t=a.client(),n=v.onData(function(e){E(e)});w.onCommand(function(e){e.hint?v.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(v.write(e.output),null==i||i(e.output),_+=e.output)});var o=function(){w&&"open"===w.status&&t.getConnectionState()===uw.em.CONNECTED&&w.send({resizeTerm:v.getSize()})};if(l&&!k.current){var c=l.replace(/"/g,'\\"');w.send({input:'cd "'.concat(c,'"\n')}),k.current=!0}var s=v.onResize(o);return o(),function(){e.dispose(),n.dispose(),s.dispose()}}},[w,v,r,i,o,a,E,l]),[v,y,E]),3),el=ea[0],ec=ea[1],es=ea[2],eu=(0,Q.useMemo)(function(){return[{type:"action",label:"Clear Shell",icon:(0,O.tZ)(sb.Z,{}),run:function(){return null==el?void 0:el.clear()}},{type:"action",label:"Find in Shell",icon:(0,O.tZ)(ut.Z,{}),run:function(){var e;em({isSearching:!0,searchText:null!==(e=null==el?void 0:el._term.getSelection())&&void 0!==e?e:""})}}]},[el]);(0,K.Wk)(function(){return el},[el]),(0,K.L5)(function(){if(el&&U)return{actions:eu,type:"shell",exec:function(e){es(e+"\n")}}},[el,es,U,eu]);var ed=(0,Q.useId)(),ef="scope-shell-".concat(ed);(0,iH.ow)(ef,R),(0,iV.Il)(function(){return[u_.CH.id,{run:function(){(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),eo(!0)},scope:ef,bubble:!1}]},[eo]);var ep=(0,L._)((0,Q.useState)({isSearching:!1}),2),eh=ep[0],em=ep[1];return(0,O.tZ)(uD,{shell:el,shellMetadata:F,sendToShellChannel:es,shellRef:ec,performPaneOperation:I,openSearchAndReplace:H,openAIWithMessage:q,currentPromptLineNumber:et,isGeneratePromptVisible:ei,onOpenGeneratePrompt:function(){(0,lC.j)(lC.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell"}),eo(!0)},onCloseGeneratePrompt:function(){return eo(!1)},searchState:eh,setSearchState:em})}var u0=n(55621);function u1(){var e=(0,e$._)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return u1=function(){return e},e}function u2(){var e=(0,e$._)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return u2=function(){return e},e}function u3(){var e=(0,e$._)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u3=function(){return e},e}function u4(){var e=(0,e$._)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u4=function(){return e},e}function u8(){var e=(0,e$._)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u8=function(){return e},e}function u6(){var e=(0,e$._)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u6=function(){return e},e}function u5(){var e=(0,e$._)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return u5=function(){return e},e}function u7(){var e=(0,e$._)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return u7=function(){return e},e}var u9={},de=(0,eK.Ps)(u1()),dt=(0,eK.Ps)(u2()),dn=(0,eK.Ps)(u3(),de),dr=(0,eK.Ps)(u4(),de),di=(0,eK.Ps)(u8(),dt),da=(0,eK.Ps)(u6(),dt),dl=(0,eK.Ps)(u5()),dc=(0,eK.Ps)(u7());function ds(){var e=(0,e$._)(["\n  query UnitTests($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          writeTests {\n            isAuthorized\n          }\n        }\n        ioTests {\n          id\n          name\n          input\n          output\n          name\n          type\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ds=function(){return e},e}var du={},dd=(0,eK.Ps)(ds(),de,dt),df=n(7420),dp=(0,eW.iv)(q.l0.width("100%"),q.l0.display.flex,q.l0.justify.center),dh=function(e){var t=e.onClick,n=e.hasTests;return(0,O.tZ)("div",(0,eh._)((0,ep._)({},n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{}),{css:dp,children:(0,O.tZ)(df.Z,{filled:!1,border:!1,size:"small",Icon:rn.Z,onClick:t,disabled:n,children:"Switch test type"})}))},dm=n(11006),dg=n(82549),dv=(0,eW.iv)({editor:[q.l0.position.absolute,q.l0.width("100%"),q.l0.height("100%"),{overflow:"auto",".loader":[q.l0.height("100%"),q.l0.width("100%"),q.l0.zIndex(5)]}]}),dy=to.q6.define();function db(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,i=e.skeleton,o=e.language,a=e.skeletonClosingBracket,l=e.indentSize,c=(0,cN.Z)(),s=c.ref,u=c.view,d=(0,Q.useRef)(i?"".concat(i,"\n"):""),f=a?"\n".concat(a):"",p=" ".repeat(void 0===l?2:l);return(0,Q.useEffect)(function(){if(u&&u.state.doc.length){var e=d.current;d.current=i?"".concat(i,"\n"):"",u.dispatch({changes:{from:0,to:e.length-1,insert:i},annotations:[to.YW.addToHistory.of(!1),dy.of(!0)]})}},[u,i]),(0,Q.useEffect)(function(){if(u){var e=to.yy.changeFilter.of(function(e){return!!e.annotation(dy)||[-1,d.current.length,e.startState.doc.length-f.length,e.startState.doc.length+1]}),i=ts.tk.updateListener.of(function(e){var t=e.state.doc.slice(d.current.length,e.state.doc.toString().length-f.length).toString();if(t!=="".concat(p).concat(r,"\n").concat(p)?n(t):n(""),e.docChanged&&e.state.doc.length===d.current.length+f.length){var i="\n"+p;u.dispatch({changes:{from:d.current.length-1,insert:"\n"+p},selection:{anchor:d.current.length+i.length-1},annotations:[dy.of(!0)]})}}),o="".concat(d.current).concat(p).concat(r,"\n").concat(f);u.dispatch({changes:{from:0,to:u.state.doc.length,insert:o},effects:to.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:to.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=u.state.doc.toString().length;u.dispatch({changes:{from:d.current.length,to:t-f.length,insert:e},annotations:to.YW.addToHistory.of(!1)})}},focus:function(){return u.focus()}})}},[n,o,u,f,t,r,p]),(0,O.tZ)("div",{css:dv,children:(0,O.tZ)(tg.ZP,{ref:s,language:o,indentSize:2,fontSize:14,indentIsSpaces:!0})})}var dw=n(84531);function dZ(e){var t,n,r,i,o,a,l=e.isOpen,c=e.meta,s=e.language,u=e.hasMetadata,d=e.onClose,f=(0,eY.Z)(),p=(0,aZ.Z)().showConfirm,h=(0,L._)((0,Q.useState)(null),2),m=h[0],g=h[1],v=(0,L._)((0,Q.useState)(!0),2),y=v[0],b=v[1],w=(0,L._)((0,Q.useState)((null==c?void 0:c.initialization)||""),2),Z=w[0],x=w[1],C=(0,L._)((0,Q.useState)((null==c?void 0:c.imports)||""),2),k=C[0],S=C[1],_=(0,L._)((0,Q.useState)((null==c?void 0:c.setup)||""),2),T=_[0],E=_[1],R=(0,L._)((0,Q.useState)((null==c?void 0:c.tearDown)||""),2),D=R[0],I=R[1],B=(0,L._)((t=(0,ep._)({},u9,{onError:function(e){return g(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?g(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:f}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:de});return t?(0,eh._)((0,ep._)({},t),{meta:(0,ep._)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),p("Setup saved!"),d()))}}),aK.D(dn,t)),2),A=B[0],P=B[1],G=(0,L._)((n=(0,ep._)({},u9,{onError:function(e){return g(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?g(t.message):"ReplUnitTestMeta"===t.__typename&&(p("Imports updated!"),d()))}}),aK.D(dr,n)),2),N=G[0],U=G[1],M=(0,dw.x)(s),X=k!==(null==c?void 0:c.imports)||Z!==(null==c?void 0:c.initialization)||T!==(null==c?void 0:c.setup)||D!==(null==c?void 0:c.tearDown),F=P.loading||U.loading;return(0,O.tZ)(rU.u,{isOpen:l,onRequestClose:d,maxWidth:872,children:(0,O.BX)(V.G,{css:[q.l0.colWithGap(24)],children:[(0,O.tZ)(W.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,O.tZ)(dx,{unitTestsLib:M,onChange:S,language:s,initialValue:null!==(r=null==c?void 0:c.imports)&&void 0!==r?r:""}),(0,O.tZ)(V.G,{onClick:function(){return b(!y)},css:{cursor:"pointer"},children:(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8),q.l0.align.center],children:[(0,O.tZ)(W.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,O.tZ)(dg.Z,{color:"var(--foreground-default)",size:20,rotate:y?270:0})]})}),y?null:(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.tZ)(dC,{unitTestsLib:M,onChange:x,language:s,initialValue:null!==(i=null==c?void 0:c.initialization)&&void 0!==i?i:""}),(0,O.tZ)(dk,{unitTestsLib:M,onChange:E,language:s,initialValue:null!==(o=null==c?void 0:c.setup)&&void 0!==o?o:""}),(0,O.tZ)(dS,{unitTestsLib:M,onChange:I,language:s,initialValue:null!==(a=null==c?void 0:c.tearDown)&&void 0!==a?a:""})]}),(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween],children:[(0,O.tZ)(W.xv,{css:[q.l0.color.accentNegativeStronger],children:m}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(12)],children:[(0,O.tZ)(ey.zx,{disabled:F,onClick:d,text:"Cancel"}),(0,O.tZ)(ey.zx,{colorway:"primary",disabled:!X||F,onClick:function(){(0,lC.j)(lC.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),u?N({variables:{input:{initialization:Z,imports:k,setup:T,tearDown:D,replId:f}}}):A({variables:{input:{initialization:Z,imports:k,setup:T,tearDown:D,replId:f}}})},iconLeft:(0,O.tZ)(rw.Z,{}),text:"".concat(F?"Saving...":"Save")})]})]})]})})}function dx(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1];(0,Q.useEffect)(function(){a&&(a.setValue(i),a.focus())},[a,i]);var c=t.defaultImports().trim();return(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,O.tZ)(el.Z,{iconLeft:(0,O.tZ)(dm.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,O.tZ)(V.G,{css:[q.l0.borderRadius(8),q.l0.height(200),q.l0.position.relative],children:(0,O.tZ)(db,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:"",indentSize:0})})})]})}function dC(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1];(0,Q.useEffect)(function(){a&&a.setValue(i)},[a,i]);var c=t.classConstructorName();return(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,O.tZ)(el.Z,{iconLeft:(0,O.tZ)(dm.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),c?(0,O.BX)(W.xv,{children:["Hint: constructor name is ",(0,O.tZ)("code",{children:c}),"."]}):null,(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,O.tZ)(V.G,{css:[q.l0.borderRadius(8),q.l0.height(200),q.l0.position.relative],children:(0,O.tZ)(db,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:l,language:r,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function dk(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1];(0,Q.useEffect)(function(){a&&a.setValue(i)},[a,i]);var c=t.setupIntro().trim();return(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,O.tZ)(el.Z,{iconLeft:(0,O.tZ)(dm.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,O.tZ)(V.G,{css:[q.l0.borderRadius(8),q.l0.height(200),q.l0.position.relative],children:(0,O.tZ)(db,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function dS(e){var t=e.unitTestsLib,n=e.onChange,r=e.language,i=e.initialValue,o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1];(0,Q.useEffect)(function(){a&&a.setValue(i)},[a,i]);var c=t.tearDownIntro().trim();return(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,O.tZ)(el.Z,{iconLeft:(0,O.tZ)(dm.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,O.tZ)(V.G,{css:[q.l0.borderRadius(8),q.l0.height(200),q.l0.position.relative],children:(0,O.tZ)(db,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:l,language:r,skeleton:c,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var d_=function(e){var t=e.language,n=e.meta,r=(0,L._)((0,Q.useState)(!1),2),i=r[0],o=r[1];return(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{iconLeft:(0,O.tZ)(rt.Z,{}),onClick:function(){return o(!0)},text:"Setup"}),(0,O.tZ)(dZ,{language:t,isOpen:i,onClose:function(){return o(!1)},hasMetadata:!!(null==n?void 0:n.id),meta:n})]})},dT=n(28393),dE=n(84864),dR=n(64206),dD={success:(0,eW.iv)({":not([disabled])":{borderColor:q.TV.accentPositiveStrongest}}),error:(0,eW.iv)({":not([disabled])":{borderColor:q.TV.accentNegativeStrongest}}),warning:(0,eW.iv)({":not([disabled])":{borderColor:q.TV.yellowStrongest}}),default:void 0,loading:void 0},dI={success:(0,eW.iv)([{color:q.TV.accentPositiveStrongest}]),error:(0,eW.iv)([{color:q.TV.accentNegativeStrongest}]),warning:(0,eW.iv)([{color:q.TV.yellowStrongest}]),default:void 0,loading:void 0},dB={success:(0,O.tZ)(rw.Z,{}),error:(0,O.tZ)(dR.Z,{}),warning:(0,O.tZ)(rg.Z,{}),default:void 0,loading:(0,O.tZ)(j.Z,{})},dA=function(e){var t=dB[e.state];return(0,O.BX)(V.G,{css:[dI[e.state],q.l0.rowWithGap(4)],children:[Q.isValidElement(t)?Q.cloneElement(t,{size:12}):null,(0,O.tZ)(W.xv,{variant:"small",multiline:!1,children:e.message})]})},dP=(0,eW.iv)("display:grid;grid-gap:",q.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),dG=function(e){var t,n=e.id,r=e.label,i=e.status,o=e.description,a=e["aria-describedby"],l=e.error,c=e.isValid,s=e.touched,u=e.value,d=e.warning,f=e.successText,p=(0,tl._)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),h=(0,aY.U)(),m=n||h("input"),g=i&&h("status"),v=o?h("description"):void 0,y=[g,v,a].filter(Boolean).join(" "),b=!(t={description:o,error:l,isValid:c,touched:s,value:u,warning:d,successText:f}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,O.BX)("div",{css:dP,children:[(0,O.tZ)("label",{htmlFor:m,className:"label",children:(0,O.tZ)(W.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})}),i?(0,O.tZ)(W.xv,{multiline:!1,variant:"small",color:"dimmer",css:[q.l0.textAlign.right],className:"status",children:i}):null,(0,O.tZ)(eg.II,(0,eh._)((0,ep._)({id:m,className:"input",value:u,css:[dD[(null==b?void 0:b.state)||"default"]]},p),{"aria-describedby":y,"aria-invalid":(null==b?void 0:b.state)==="error"})),(0,O.tZ)("div",{id:v,className:"validation",css:[dI[(null==b?void 0:b.state)||"default"]],"aria-live":(null==b?void 0:b.state)!=="default"?"polite":void 0,children:b?(0,O.tZ)(dA,(0,ep._)({},b)):null})]})},dL=n(78272),dN=n(1053),dO=n(76330),dU="\x1b[0;31m",dM="\x1b[0m",dX=["","","","","","","","","","","","","","","",""];function dF(e){var t=e.name,n=e.failureMessage,r=e.stack;return"	".concat(dU).concat(t).concat(dM,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var dW=function(e){var t,n,r=e.language,i=e.unitTests,o=e.onResult,a=e.trackingContext,l=e.getRunnerOutput,c=(0,L._)((0,Q.useState)(!1),2),s=c[0],u=c[1],d=(0,J.Z)(),f=d.container,p=d.packager,h=d.fs,m=null,g=l(),v=g&&void 0!==g.startBlock&&void 0!==g.endBlock&&void 0!==g.writeOutputToBlock&&void 0!==g.writeErrorToBlock,y=function(){u(!1),(0,dO.WT)(h),m&&(m.stopLogSpinner(),m.finish(),m=null)},b=(t=(0,tM._)(function(){var e,t,n,l,c,d,b,w,Z,x,C,k,S,_,T,E,R,D,I,B,A,P,G,L;return(0,tX.Jh)(this,function(O){switch(O.label){case 0:if(s)return[2];if(t=null,m={startLogSpinner:function(e){if(t)throw Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=e,r=0;return t=setInterval(function(){var e=dX[++r%dX.length];if(!m)throw Error("Expected logger");m.clearLine(),m.logMessage(e+" "+n)},100),function(e){n=e}},stopLogSpinner:function(){t&&clearInterval(t),t=null},finish:function(){if(v&&e){var t;null==g||null===(t=g.endBlock)||void 0===t||t.call(g,e)}},logMessage:function(t){var n,r;if(v&&e){null==g||null===(r=g.writeOutputToBlock)||void 0===r||r.call(g,e,t);return}null==g||null===(n=g.write)||void 0===n||n.call(g,t)},logError:function(t){if(v&&e){var n;null==g||null===(n=g.writeErrorToBlock)||void 0===n||n.call(g,e,t)}},clearLogs:function(){var e;v||(null==g||null===(e=g.clear)||void 0===e||e.call(g),null==m||m.logMessage("\r\n"))},clearLine:function(){if(!m)throw Error("Expected logger");m.logMessage("\x1b[1K\r")}},!i)throw Error("Run button should not be active if there are no tests");return u(!0),(0,lC.j)(lC.U3.REPL_UNIT_TEST_USED,{trackingData:{context:a},action:"ranTests"}),m.clearLogs(),v&&(e=null==g?void 0:null===(n=g.startBlock)||void 0===n?void 0:n.call(g,dN.kH.UNIT_TEST).id),[4,(l=(0,dw.x)(r)).buildAndRunTests((0,ep._)({container:f,fs:h,packager:p,logger:m},i))];case 1:if(c=O.sent(),m.stopLogSpinner(),m.clearLine(),m.clearLogs(),null!==c.error)return m.logMessage("".concat(dU).concat(c.error).concat(dM,"\r\n")),y(),i.tests.map(function(e){return{testId:e.id,didPass:!1}}),[2];if(d=c.result.passed?[]:c.result.failures.map(function(e){return l.parseTestResultName(e.name)}),b=[],w=i.tests.map(function(e){return l.getProperTestName(e.name)}),(Z=d.filter(function(e){return!w.includes(e)})).length)C=Z[0],k=c.result.failures[0].stack,m.logMessage(dF({name:C,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),m.logError("Testing failed"),(x=b).push.apply(x,(0,N._)(i.tests.map(function(e){return{testId:e.id,didPass:!1}})));else{S=!0,_=!1,T=void 0;try{for(E=i.tests[Symbol.iterator]();!(S=(R=E.next()).done);S=!0){if(D=R.value,I=l.getProperTestName(D.name),B=d.indexOf(I),A=-1===B,b.push({testId:D.id,didPass:A}),A){m.logMessage("	".concat("\x1b[0;32m").concat(I).concat(dM,"\r\n\r\n"));continue}P=c.result.failures[B].stack,m.logMessage(dF({name:I,failureMessage:D.failureMessage,stack:P})),m.logError('Test "'.concat(I,'" failed'))}}catch(e){_=!0,T=e}finally{try{S||null==E.return||E.return()}finally{if(_)throw T}}}if(o(b),G=i.tests.length,c.result.passed)return m.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(G,"/").concat(G,"  ").concat(dM,"\r\n")),y(),[2];return L=G-c.result.failures.length,m.logMessage("".concat("\x1b[48;5;88m","  ").concat(L,"/").concat(G," passed, see errors above  ").concat(dM)),y(),[2]}})}),function(){return t.apply(this,arguments)}),w=(n=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){try{b()}catch(e){tW.$e(function(t){t.setTag("unittestsrun","true"),tW.Tb(e)}),m&&(m.logMessage("\r\n".concat(dU," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(dM,"\r\n")),m.logError("Running tests failed")),y()}return[2]})}),function(){return n.apply(this,arguments)});return i&&i.tests.length>0?(0,O.tZ)(V.G,{children:(0,O.tZ)(ey.zx,{disabled:s,colorway:"primary",iconLeft:(0,O.tZ)(dL.Z,{}),onClick:w,text:s?"Running tests...":"Run tests"})}):null},dV=(0,H.X)({root:q.l0.colWithGap(16),list:[q.l0.colWithGap(8),q.l0.align.center],test:[q.l0.width("100%"),q.l0.p(8),q.l0.border({width:1,color:q.TV.outlineDimmest}),q.l0.borderRadius(4),{'&[data-status="passed"]':[{borderColor:q.TV.accentPositiveDefault},q.l0.backgroundColor.accentPositiveDimmer],'&[data-status="failed"]':[{borderColor:q.TV.accentNegativeDefault},q.l0.backgroundColor.accentNegativeDimmer]}]});function dH(e){var t,n,r=e.isOpen,i=e.test,o=e.language,a=e.onClose,l=e.trackingContext,c=(0,eY.Z)(),s=(0,aZ.Z)().showConfirm,u=(0,L._)((0,Q.useState)(null),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(""),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)(""),2),v=g[0],y=g[1],b=(0,L._)((0,Q.useState)(""),2),w=b[0],Z=b[1],x=(0,L._)((t=(0,ep._)({},u9,{onError:function(e){return Z(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?Z(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:c}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:dt});return t?(0,eh._)((0,ep._)({},t),{tests:(0,N._)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),s("Test created!"),a()))}}),aK.D(di,t)),2),C=x[0],k=x[1],S=(0,L._)((n=(0,ep._)({},u9,{onError:function(e){return Z(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?Z(t.message):"ReplUnitTest"===t.__typename&&(s("Test updated!"),a()))}}),aK.D(da,n)),2),_=S[0],T=S[1],E=(0,dE.Y)("",function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0});(0,Q.useEffect)(function(){E.setValue((null==i?void 0:i.name)||"",{preventTouch:!0}),y((null==i?void 0:i.failureMessage)||""),m((null==i?void 0:i.code)||""),d&&d.setValue((null==i?void 0:i.code)||"")},[i,d]),(0,Q.useEffect)(function(){Z("")},[h,Z]);var R=(0,dw.x)(o),D="".concat(R.getCommentChar()," Enter code here"),I=!i||i.name!==E.value||i.code!==h||i.failureMessage!==v,B=k.loading||T.loading,A=R.testIntro(E.value||""),P=R.hasClosingBrackets()?R.getClosingBrackets():"",G=(0,L._)((0,Q.useState)(!1),2),U=G[0],M=G[1],X=function(){d&&(d.setValue("  "+R.exampleTest.code),d.focus()),m(R.exampleTest.code)};return(0,O.tZ)(rU.u,{isOpen:r,onRequestClose:a,maxWidth:872,children:(0,O.BX)(V.G,{css:[q.l0.colWithGap(24)],children:[(0,O.tZ)(W.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.tZ)("label",{htmlFor:"name",children:(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,O.tZ)(dG,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:E.value,isValid:E.isValid,error:E.error,warning:E.warning,touched:E.touched,onChange:function(e){E.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(4)],children:[(0,O.BX)(dT.Z,{isOpen:U,onClickOutside:function(){return M(!1)},placement:"bottom-end",children:[(0,O.tZ)(ey.zx,{iconLeft:(0,O.tZ)(an.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){if([D,R.exampleTest.code].includes(h.trim())){X();return}M(!0)}}),(0,O.BX)(V.G,{children:["This will overwrite your current test. Are you sure?",(0,O.BX)(V.G,{css:[q.l0.rowWithGap(4),q.l0.pt(8)],children:[" ",(0,O.tZ)(ey.zx,{text:"No, go back",size:"small",iconLeft:(0,O.tZ)(rv.Z,{}),onClick:function(){M(!1)}}),(0,O.tZ)(ey.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,O.tZ)(rw.Z,{}),onClick:function(){X(),M(!1)}})]})]})]}),(0,O.tZ)(el.Z,{iconLeft:(0,O.tZ)(ec.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,O.tZ)(V.G,{css:[q.l0.borderRadius(8),q.l0.height(200),q.l0.position.relative],children:(0,O.tZ)(db,{skeleton:A,skeletonClosingBracket:P,language:o,editorRef:f,onChange:m,placeholder:D})})})]}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,O.tZ)(eg.II,{value:v,onChange:function(e){return y(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween],children:[(0,O.tZ)(W.xv,{css:[q.l0.color.accentNegativeStronger],multiline:!1,children:w}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(12)],children:[(0,O.tZ)(ey.zx,{text:"Cancel",onClick:a}),(0,O.tZ)(ey.zx,{text:"".concat(B?"Creating test...":"Create test"),iconLeft:(0,O.tZ)(nP.Z,{}),colorway:"primary",disabled:!I||B,onClick:function(){if(!E.validate()){if(h.length<=0){Z("Test cannot be empty");return}i?(_({variables:{input:{name:E.value,code:h,failureMessage:v,testId:i.id}}}),(0,lC.j)(lC.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"modifiedTest"})):(C({variables:{input:{name:E.value,code:h,failureMessage:v,replId:c}}}),(0,lC.j)(lC.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"addedTest"}))}}})]})]})]})})}function dz(e){var t,n=e.testId,r=e.onClose,i=(0,aZ.Z)().showConfirm,o=(0,eY.Z)(),a=(0,L._)((t=(0,ep._)({},u9,{onError:function(e){return d(e.message)},update:function(e,t){var a,l=null===(a=t.data)||void 0===a?void 0:a.deleteReplUnitTest;l&&("UserError"===l.__typename?d(l.message):"ReplUnitTest"===l.__typename&&n&&(e.modify({id:e.identify({__typename:"Repl",id:o}),fields:{unitTests:function(e,t){var r=t.readField,i=e.tests.filter(function(e){return r("id",e)!==n});return(0,eh._)((0,ep._)({},e),{tests:(0,N._)(i)})}}}),(0,lC.j)(lC.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),i("Test deleted!"),r()))}}),aK.D(dl,t)),2),l=a[0],c=a[1],s=(0,L._)((0,Q.useState)(""),2),u=s[0],d=s[1];return(0,O.tZ)(rU.u,{isOpen:!!n,onRequestClose:r,children:(0,O.BX)(V.G,{css:[q.l0.colWithGap(24)],children:[(0,O.tZ)(W.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,O.tZ)(W.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center],children:[(0,O.tZ)(W.xv,{css:[q.l0.color.accentNegativeStronger],children:u}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(12),q.l0.justify.end],children:[(0,O.tZ)(ey.zx,{text:"Cancel",disabled:c.loading,onClick:r}),(0,O.tZ)(ey.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,O.tZ)(sb.Z,{}),disabled:c.loading,onClick:function(){if(!n)throw Error("Expected a testId");l({variables:{testId:n}})}})]})]})]})})}var dj=function(e){var t,n=e.unitTests,r=e.isAddingTest,i=e.onClose,o=e.language,a=e.canWrite,l=e.trackingContext,c=void 0===l?"default":l,s=e.getRunnerOutput,u=(0,L._)((0,Q.useState)(r),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(null),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)(null),2),v=g[0],y=g[1],b=(0,eY.Z)(),w=(0,L._)((t=(0,ep._)({},u9,void 0),aK.D(dc,t)),1)[0],Z=(null==n?void 0:n.tests)||[];return(0,O.BX)(V.G,{css:dV.root,children:[(0,O.tZ)(dW,{language:o,unitTests:n,onResult:function(e){w({variables:{input:{replId:b,results:e},replId:b}})},getRunnerOutput:s,trackingContext:c}),Z.length>0?(0,O.tZ)(V.G,{css:dV.list,children:Z.map(function(e){var t,n,r;return(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)==="ReplUnitTestLastRun"&&(n=null===(r=e.lastRun.status)||void 0===r?void 0:r.toLowerCase()),(0,O.tZ)(V.G,{css:dV.test,"data-status":n,children:(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center,q.l0.p(8),q.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,O.tZ)(W.xv,{multiline:!1,children:e.name}),a?(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8)],children:[(0,O.tZ)(X.hU,{onClick:function(){m(e)},alt:"Edit",children:(0,O.tZ)(sF.Z,{})}),(0,O.tZ)(X.hU,{onClick:function(){y(e.id)},alt:"Delete",children:(0,O.tZ)(sb.Z,{})})]}):null]})},e.id)})}):(0,O.BX)(V.G,{css:[q.l0.colWithGap(8),q.l0.align.center],children:[(0,O.tZ)(W.xv,{css:[q.l0.textAlign.center],children:"Looks like you dont have any tests yet!"}),a?(0,O.tZ)(ey.zx,{text:"Add test",onClick:function(){return f(!0)},iconLeft:(0,O.tZ)(nP.Z,{})}):null]}),(0,O.tZ)(dH,{isOpen:d||!!h||r,test:h,language:o,onClose:function(){m(null),f(!1),i&&i()},trackingContext:c}),(0,O.tZ)(dz,{testId:v,onClose:function(){return y(null)}})]})},dq=n(48424),dJ=function(e){var t,n,r,i,o,a,l=e.onBack,c=e.getRunnerOutput,s=(0,eY.Z)(),u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=(0,dq.Z)(),h=p.language,m=p.isLoading,g=(t=(0,ep._)({},du,{variables:{replId:s}}),eQ.a(dd,t)),v=null===(n=g.data)||void 0===n?void 0:n.getRepl,y=(0,O.tZ)(e8.E,{colorway:"negative",icon:(0,O.tZ)(rg.Z,{}),text:"The unit test feature is deprecated and will be removed in September. Please move your tests to a unit test library like Jest (JavaScript) or unittest (python)."});if(g.loading||m)return(0,O.tZ)(V.G,{css:[q.l0.backgroundColor.backgroundDefault,q.l0.flex.row,q.l0.align.center,q.l0.justify.center,q.l0.p(16)],children:(0,O.tZ)(j.Z,{})});if(!v||"Repl"!==v.__typename)return(0,O.BX)(V.G,{css:[q.l0.p(16)],children:[y,(0,O.tZ)(W.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})]});if(!h)return(0,O.BX)(V.G,{css:[q.l0.p(16)],children:[y,(0,O.tZ)(W.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})]});var b=!!((null===(r=v.unitTests)||void 0===r?void 0:r.tests)&&v.unitTests.tests.length>0);return(null==v?void 0:null===(o=v.authorizations)||void 0===o?void 0:null===(i=o.writeTests)||void 0===i?void 0:i.isAuthorized)?(0,O.BX)(V.G,{css:[q.l0.colWithGap(16),q.l0.align.center],children:[y,(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.align.center,{width:"100%"}],children:[(0,O.tZ)(u0.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,O.tZ)(X.hU,{alt:"Add test",size:32,onClick:function(){return f(!0)},children:(0,O.tZ)(nP.Z,{})})]}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(8),q.l0.maxWidth(256),{width:"80%"}],children:[(0,O.tZ)(d_,{language:h,meta:(null===(a=v.unitTests)||void 0===a?void 0:a.meta)||null}),(0,O.tZ)(dj,{isAddingTest:d,unitTests:(null==v?void 0:v.unitTests)||null,onClose:function(){return f(!1)},language:h,canWrite:!0,trackingContext:"default",getRunnerOutput:c}),l?(0,O.tZ)(dh,{hasTests:b,onClick:l}):null]})]}):(0,O.BX)(V.G,{css:[q.l0.colWithGap(16)],children:[y,(0,O.tZ)(W.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,O.tZ)(V.G,{css:{width:"100%",overflowY:"auto"},children:(0,O.tZ)(dj,{unitTests:(null==v?void 0:v.unitTests)||null,language:h,isAddingTest:!1,canWrite:!1,trackingContext:"default",getRunnerOutput:c})})]})},dY=(0,H.X)({container:[q.l0.p(8),$.F3]}),d$=U.Dy.Object({type:U.Dy.Literal("unitTests")}),dK={Content:function(e){var t=e.options,n=(0,s2.nC)(),r=(0,K.dr)();function i(){var e=n().find(function(e){var t=(0,L._)(e,2);return"runnerOutput"===(t[0],t[1].type)});if(e)return e[0]}return(0,O.tZ)(V.G,{css:dY.container,children:(0,O.tZ)(dJ,{getRunnerOutput:function(){var e=i();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var n=r(e);if((null==n?void 0:n.type)==="runnerOutput")return n}}})})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:q.TV.greenStrongest,size:t},children:(0,O.tZ)(rw.Z,{})})},getTitle:function(){return"Unit Tests"},description:"Write and run code-driven tests to verify expected behavior",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(d$,e)}},dQ=n(47),d0=n(77537),d1=n(38935),d2=n(57997),d3=(0,H.X)({toolButton:[q.l0.display.inlineBlock],actionContent:[q.l0.width(450),q.l0.maxWidth("100%"),q.l0.colWithGap(16)],diagnosisContent:[q.l0.p(8),q.l0.colWithGap(8)]});function d4(e){var t=e.vncUrl,n=e.onRetry,r=e.openNetworkingTool,i=null!=(0,ua.vU)(d2.Y8),o=(0,O.tZ)(ey.zx,{iconLeft:(0,O.tZ)(rn.Z,{}),text:"Refresh connection",onClick:n});return i?(0,O.tZ)(es.Z,{pane:{type:"vnc"},action:(0,O.BX)(V.G,{css:d3.actionContent,children:[(0,O.tZ)(e8.E,{colorway:"warning",text:(0,O.BX)(O.HY,{children:["There was an error connecting to the server",t?(0,O.BX)(O.HY,{children:[" at ",(0,O.tZ)("br",{}),t]}):""]})}),t?(0,O.tZ)(eM.Q,{headerContent:"Diagnosis",children:(0,O.tZ)(V.G,{css:d3.diagnosisContent,children:(0,O.tZ)(d1.ZP,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,O.tZ)(es.Z,{pane:{type:"vnc"},bodyText:(0,O.BX)(W.xv,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your Repl, and check the"," ",(0,O.tZ)(ey.zx,{css:d3.toolButton,text:"Networking tool",iconLeft:(0,O.tZ)(sh.Z,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}(f=E||(E={})).Connecting="Connecting",f.Connected="Connected",f.Disconnected="Disconnected",f.Errored="Errored";var d8=(0,H.X)({root:[q.l0.position.relative,q.l0.height("100%"),q.l0.width("100%")],target:[q.l0.height("100%"),q.l0.width("100%")],overlay:[q.l0.coverContainer,q.l0.backgroundColor.backgroundDefault,{"&:empty":[q.l0.display.none]}],audio:[q.l0.position.absolute,q.l0.bottom(0),q.l0.right(0),{padding:"0.2em"}]});function d6(e){var t,r,i,o,a=e.fs,l=e.secrets,c=e.container,s=e.openNetworkingTool,u=(0,L._)((0,Q.useState)(null),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(void 0),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)(!1),2),v=g[0],y=g[1],b=(0,L._)((0,Q.useState)("Connecting"),2),w=b[0],Z=b[1],x=(0,L._)((0,Q.useState)(null),2),C=x[0],k=x[1],S=(0,L._)((0,Q.useState)(!1),2),_=S[0],T=S[1],E=(0,L._)((0,Q.useState)(!1),2),R=E[0],D=E[1],I=(0,Q.useRef)(0),B=(0,Q.useRef)(!1),A=(r=(t=(0,L._)((0,Q.useState)(null),2))[0],i=t[1],o=(0,d0.Z)(c),(0,Q.useEffect)(function(){if(!r){if(c.getConnectionState()===d2.em.CONNECTED){if(!o)return;i((0,sk.hw)(o.replace("http","ws"),d2.Y8).toString());return}return c.onConnectionStateChanged(function(e){e===d2.em.CONNECTED&&o&&i((0,sk.hw)(o.replace("http","ws"),d2.Y8).toString())})}},[o,r,c]),{vncUrl:r}).vncUrl;(0,lC.j)(lC.U3.VNC_OPENED),(0,Q.useEffect)(function(){return B.current=!0,function(){B.current=!1}},[]);var P=(0,L._)((0,Q.useState)(null),2),G=P[0],N=P[1],U=(0,Q.useRef)(function(){return null});(0,Q.useEffect)(function(){U.current()},[G]);var M=(0,cK.Z)(function(e){return N(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),X=(0,Q.useRef)(function(e){});(0,Q.useEffect)(function(){X.current(R)},[R]),(0,Q.useEffect)(function(){if(!d){var e=!1;return n.e(994).then(n.bind(n,30994)).then(function(t){e||f(t)}),function(){e=!0}}},[d]),(0,Q.useEffect)(function(){"Disconnected"===w&&setTimeout(function(){Z("Connecting")},Math.random()*(Math.pow(2,I.current)-1)*1e3)},[w]),(0,Q.useEffect)(function(){if("Disconnected"===w){var e=setTimeout(function(){Z("Connecting")},Math.random()*(Math.pow(2,I.current)-1)*1e3);return function(){clearTimeout(e)}}},[w]);var F=(0,eY.Z)();return(0,Q.useEffect)(function(){if(A&&C&&d&&"Connecting"===w){I.current++;var e=d.default,t=c.getConnectionMetadata(),n={credentials:{username:null==t?void 0:t.token,password:null!=h?h:""}};(0,lC.j)(lC.U3.VNC_CONNECTED);var r=new e(C,A,n);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){I.current=0,Z("Connected")},o=function(e){var t=e.detail.capabilities.audio;T(void 0!==window.MediaSource&&!!t)},a=function(e){if(U.current=function(){return null},X.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var t=c.getConnectionMetadata(),n=t?(0,dQ.he)(t.token):null;(0,lC.j)(lC.U3.VNC_ERRORED,{vncUrl:A,replId:F,cluster:null==n?void 0:n.cluster}),Z("Errored");return}Z("Disconnected")},s=function(){var e,t=function(){y(!0)};(e=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,l.read()];case 1:if(!(e=n.sent().get("VNC_PASSWORD")))return t(),[2];return m(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return tW.Tb(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",s),U.current=function(){return r._windowResize()},T(!1),D(!1),X.current=function(t){t?((0,lC.j)(lC.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){B.current||(U.current=function(){return null},X.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,C,c,A,a,h,w,F,l]),(0,O.BX)("div",{"data-cy":"vnc",css:d8.root,children:[_?(0,O.BX)("label",{css:d8.audio,children:["\uD83C\uDFA7"," ",(0,O.tZ)("input",{type:"checkbox",checked:R,onChange:function(e){return D(e.target.checked)}})]}):null,(0,O.tZ)("div",{ref:function(e){M(e),k(e)},css:d8.target,"data-cy":"vnc-output-".concat(w.toLowerCase())}),(0,O.BX)("div",{css:d8.overlay,children:["Connecting"===w?(0,O.tZ)(es.Z,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===w?(0,O.tZ)(es.Z,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===w?(0,O.tZ)(d4,{vncUrl:A,onRetry:function(){return Z("Connecting")},openNetworkingTool:s}):null]}),(0,O.tZ)(rU.u,{isOpen:v,onRequestClose:function(){return y(!1)},children:(0,O.tZ)(sH.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return y(!1)},onConfirm:function(e){m(e),y(!1)}})})]})}var d5=U.Dy.Object({type:U.Dy.Literal("vnc")}),d7=(0,H.X)({container:[q.l0.flex.growAndShrink(1)]}),d9={Content:function(e){var t=e.options.performPaneOperation,n=(0,J.Z)(),r=n.fs,i=n.container,o=n.secrets,a=(0,Q.useCallback)(function(){return t({operation:"open",secondary:!0,pane:{type:"networking"}})},[t]);return(0,O.tZ)(V.G,{css:d7.container,children:(0,O.tZ)(d6,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var t=e.size;return(0,O.tZ)(sv.Z,{size:t})},getTitle:function(){return"Output"},description:"View your Repl's desktop screen output",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(d5,e)}},fe=n(237),ft=n(96601),fn=n(13556),fr=n(53250),fi=n(68220),fo=n(54108);function fa(){var e=(0,e$._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return fa=function(){return e},e}var fl={},fc=(0,eK.Ps)(fa());function fs(e){var t=e.event,n=t.input,r=t.output,i=t.error,o=t.start,a=t.end,l=t.cached,c=(0,L._)((0,Q.useState)(!0),2),s=c[0],u=c[1],d=(0,Q.useCallback)(function(){return u(function(e){return!e})},[]),f="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),p=r.trimEnd();return(0,O.BX)(V.G,{css:[(0,fi.ec)(i?"negative":"positive"),l?{opacity:.75}:void 0,q.l0.borderRadius(8)],children:[(0,O.BX)(V.G,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[q.l0.rowWithGap(4),q.l0.justify.spaceBetween,q.l0.py(4),q.l0.px(8),q.l0.font.code,q.l0.cursor.pointer],children:[(0,O.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",f]}),(0,O.BX)("span",{css:[q.l0.color.foregroundDimmer,q.l0.flex.shrink(0)],children:[i?(0,O.tZ)("span",{css:[q.l0.mr(16)],children:i}):null,l?(0,O.tZ)("span",{children:"CACHED"}):(0,O.BX)("span",{children:[a-o," ms"]})]})]}),s?null:(0,O.tZ)(V.G,{css:[q.l0.px(2),q.l0.pb(2),q.l0.borderRadius(0,0,8,8)],children:(0,O.tZ)(eb.Tg,{elevated:!0,css:[q.l0.p(8),q.l0.borderRadius(8)],children:(0,O.tZ)(fr.Z,{code:p})})})]})}var fu=n(44134),fd=n(63483),ff=n(69746);function fp(e){var t=e.t,n=e.children;return(0,O.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,O.BX)(W.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,O.tZ)("span",{children:n})]})}var fh=n(70624),fm=n(59855),fg=(0,H.X)({container:[q.l0.colWithGap(8),q.l0.height("100%"),q.l0.position.relative],controls:[q.l0.colWithGap(8),q.l0.px(4),q.l0.pb(8),q.l0.backgroundColor.backgroundDefault],filters:[q.l0.rowWithGap(4),q.l0.justify.spaceBetween]}),fv=(0,H.X)({in:[q.l0.color.greenStrongest],out:[q.l0.color.redStrongest],error:[q.l0.color.magentaStrongest]}),fy=[q.l0.flex.row,q.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],fb=(0,H.X)({clickable:(0,N._)(fy),clickableHighlighted:(0,N._)(fy).concat([q.l0.backgroundColor.accentPositiveDimmer]),inner:[q.l0.flex.grow(1),q.l0.rowWithGap(4),q.l0.maxWidth("100%")],log:[q.l0.flex.growAndShrink(1),{opacity:.5}],row:[q.l0.my(4),q.l0.mx(4)],timestamp:[q.l0.fontSize(13),{cursor:"pointer"}]});function fw(e){var t,n=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,Q.useMemo)(function(){return r.highlightOnly&&(0,fm.cF)(n,r)},[r,n]),l=null!==(t=n.cmd.channel)&&void 0!==t?t:0,c=(0,Q.useMemo)(function(){var e=(0,ep._)({},n.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[n]),s=i?n.timestamp-i:n.timestamp,u=(0,L._)((0,ff.Z)(!0),2),d=u[0],f=u[1];return(0,O.BX)(V.G,{css:fb.row,children:[(0,O.tZ)(V.G,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:a?fb.clickableHighlighted:fb.clickable,children:(0,O.BX)(V.G,{css:fb.inner,children:[(0,O.tZ)(W.xv,{className:"icon",multiline:!1,children:"in"===n.dir?(0,O.tZ)(V.G,{css:fv.in,children:""}):"out"===n.dir?(0,O.tZ)(V.G,{css:fv.out,children:""}):(0,O.tZ)(V.G,{css:fv.error,children:""})}),(0,O.tZ)(W.xv,{className:"link",multiline:!1,children:(0,O.BX)("code",{children:["#",l," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,O.tZ)(W.xv,{css:fb.log,multiline:!1,children:(0,O.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:c.formatted})}),null!=s&&(0,O.tZ)(V.G,{style:{opacity:.5},onClick:function(){o(n.timestamp)},children:(0,O.tZ)(W.xv,{css:fb.timestamp,multiline:!1,children:n.timestamp===i?"(reference)":(0,O.BX)(O.HY,{children:[s.toFixed(0)," ms"]})})})]})}),!d&&(0,O.tZ)(O.HY,{children:void 0!==c.cleaned&&(0,O.tZ)(fh.g,{name:"cmd",src:c.cleaned})})]})}var fZ=(0,H.X)({listContainer:[q.l0.position.relative,q.l0.height("100%")],listScroller:[q.l0.overflow("auto"),q.l0.coverContainer],listBox:[q.l0.width("100%"),q.l0.position.relative],listItem:[q.l0.position.absolute,q.l0.top(0),q.l0.left(0),q.l0.width("100%")]}),fx=(0,Q.memo)(function(e){var t=e.logs,n=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,Q.useRef)(null),a=(0,nE.MG)({count:t.length,getScrollElement:function(){return o.current},getItemKey:function(e){return t[e].id},estimateSize:function(){return 30},overscan:10});return(0,O.tZ)("div",{css:fZ.listContainer,children:(0,O.BX)("div",{ref:o,css:fZ.listScroller,children:[(0,O.tZ)("div",{css:fZ.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,c=e.start,s=t[o];return s?(0,O.tZ)("div",{"data-index":o,ref:a.measureElement,css:fZ.listItem,style:{transform:"translateY(".concat(c,"px)")},children:(0,O.tZ)(fw,{log:s,filters:n,timeRef:r,setTimeRef:i})},l):null})}),(0,O.tZ)("div",{className:"bottom-anchor"})]})})}),fC=function(e){var t=e.filters,n=e.updateFilters;return(0,O.BX)(V.G,{css:q.l0.colWithGap(4),children:[(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,O.tZ)(eg.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,L._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(e){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,O.tZ)(eg.II,{id:"channels",onChange:function(e){n({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,O.tZ)(aM.E,{css:q.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8)],children:[(0,O.tZ)(aM.Y,{id:e.val,value:e.val}),(0,O.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,O.tZ)(W.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,O.tZ)(aM.E,{css:q.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8)],children:[(0,O.tZ)(aM.Y,{id:e.val,value:e.val}),(0,O.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},fk=n(86201),fS=n(65117),f_=(0,H.X)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[q.l0.flex.shrink(1)],copyable:[q.l0.rowWithGap(2)]}),fT=n(82973),fE=n(93539),fR=n(26726),fD=n(87885),fI=n(96505),fB=n(49500),fA=n(6069),fP=n(67887);function fG(){var e=(0,e$._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return fG=function(){return e},e}function fL(){var e=(0,e$._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return fL=function(){return e},e}var fN={},fO=(0,eK.Ps)(fG()),fU=(0,eK.Ps)(fL(),fO),fM=(0,eW.iv)([q.l0.colWithGap(16),q.l0.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),fX=n(47726),fF=n(10777);function fW(e){var t=e.sessionId,n=(0,L._)((0,Q.useState)(!1),2),r=n[0],i=n[1],o=(0,L._)((0,Q.useState)(""),2),a=o[0],l=o[1],c=(0,L._)((0,Q.useState)(!1),2),s=c[0],u=c[1],d=(0,aZ.Z)().showConfirm,f=(0,aY.U)();return null==t?(0,O.tZ)(V.G,{children:(0,O.tZ)(W.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,O.BX)(V.G,{css:[q.l0.colWithGap(8)],children:[(0,O.BX)(W.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,O.tZ)(W.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(16)],children:[(0,O.tZ)(eg.B,{id:f("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8)],children:[(0,O.tZ)(rp.X,{id:f("issueInRecording"),checked:s,onChange:function(e){return u(e)}}),(0,O.tZ)("label",{htmlFor:f("issueInRecording"),children:(0,O.tZ)(W.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,O.tZ)(ey.zx,{onClick:function(){var e=uf()();i(!0),(0,fF.fc)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:s,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var fV=n(94622),fH=n(86283),fz=n(47136),fj=n(65034),fq=(0,H.X)({root:[q.l0.colWithGap(16)],row:[q.l0.rowWithGap(8)]});function fJ(e){var t=e.event;return(0,O.tZ)(V.G,{children:(0,O.tZ)(eM.Q,{headerContent:(0,O.BX)(V.G,{css:fq.row,children:[(0,O.tZ)(W.xv,{children:t.id}),(0,O.tZ)(tx.m,{textToCopy:t.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,O.tZ)(fr.Z,{code:JSON.stringify(t,null,2),language:"json"})})})}var fY={"Session state":function(){var e=(0,iN.aV)();return(0,O.tZ)(fA.Z,{json:e})},"File context":function(){var e=(0,iN.Tt)(),t=(0,s2.AA)(),n=(0,L._)((0,iN.Ni)(),1)[0],r=(0,iN.Bk)(),i=(0,J.Z)(),o=i.fs,a=i.dotReplit,l=(0,fH.G)(o,a),c=(0,L._)((0,Q.useState)(null),2),s=c[0],u=c[1];return(0,Q.useEffect)(function(){var i=!1;function o(){return(o=(0,tM._)(function(){var o;return(0,tX.Jh)(this,function(a){switch(a.label){case 0:return[4,l({modelType:"advanced"===n&&r()?iN.BY.ADVANCED:iN.BY.BASIC,filePreferences:e,recentFiles:t()})];case 1:if(o=a.sent(),i)return[2];return u(o),[2]}})})).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){i=!0}},[t,e,n,r,l]),(0,O.tZ)(fA.Z,{json:s})},"Inject session":function(e){var t,n=e.performPaneOperation,r=(0,eY.Z)(),i=(0,iN.K6)(),o=(t=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(o){switch(o.label){case 0:return[4,i({replId:r,sessionType:iN.FF.AGENT_SESSION,seededAiFirstEventContents:e})];case 1:return t=o.sent(),null==n||n({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:null==t?void 0:t.id}}}),[2]}})}),function(e){return t.apply(this,arguments)}),a=(0,Q.useMemo)(function(){return{EditFile:{contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Edit file",planStepId:"",message:"Edited a file index.ts",toolData:{$kind:"fileEditData",fileEditData:{filePath:"index.ts",diff:"--- /index.js\n+++ /index.js\n@@ -8,7 +8,7 @@\n const app = express();\n console.log(`Files: index.js, node_modules, package.json, package-lock.json, replit.nix`);\n const PORT = process.env.PORT || 3000;\n-app.listen(PORT, () => {\n+    console.log(`Files: index.js, node_modules, package.json, package-lock.json, replit.nix`);\n     console.log(`Server is running on port ${PORT}`);\n     \n     // Display the list of files extracted from ls command output"}}}}},Packager:{contents:{$kind:"agentTimelineEventContents",agentTimelineEventContents:{toolName:"Packager",planStepId:"",message:"Installing a few dependencies",toolData:{$kind:"packagerInstallData",packagerInstallData:{inputLanguage:"python",inputPackages:["numpy","pandas"],output:"Installing numpy, pandas...",isExecuting:!1,processId:""}}}}}}},[]);return(0,O.BX)(V.G,{children:["Seed with:"," ",Object.entries(a).map(function(e){var t=(0,L._)(e,2),n=t[0],r=t[1];return(0,O.tZ)(ey.zx,{text:n,onClick:function(){return o(r)}},n)})]})},"Session Events":function(){var e,t,n=(0,iN.dL)(),r=(0,L._)((0,Q.useState)(null!==(t=null===(e=n[0])||void 0===e?void 0:e.id)&&void 0!==t?t:null),2),i=r[0],o=r[1],a=(0,iN.rC)(i);return(0,O.BX)(V.G,{css:fq.root,children:[(0,O.tZ)(fj.P,{label:"Select a session",selectedKey:i,onSelectionChange:function(e){"string"==typeof e&&o(e)},children:n.map(function(e){return(0,O.tZ)(fz.m9,{id:e.id,label:e.title||"untitled"},e.id)})}),(0,O.tZ)(V.G,{children:null==a?void 0:a.events.map(function(e){return(0,O.tZ)(fJ,{event:e},e.id)})})]})}},f$=n(2763),fK=n(49500),fQ=(0,H.X)({view:[q.l0.pt(16),q.l0.px(12),q.l0.colWithGap(12)],uploadMessage:[q.l0.flex.growAndShrink(1),q.l0.width("100%")]}),f0=n(42401),f1=(0,H.X)({container:[q.l0.py(8),q.l0.px(12),q.l0.colWithGap(12)],toggleRow:[q.l0.rowWithGap(8)]}),f2=n(24006),f3=n(52927),f4=n(64988),f8=n(41086);function f6(e){var t,n,r,i,o,a,l=(0,L._)((0,Q.useState)(null),2),c=l[0],s=l[1],u=(t=e.logs,n=(0,L._)((0,Q.useState)(),2)[1],i=(r=(0,Q.useMemo)(function(){if(!t)return{subscribe:function(){return function(){}},getSnapshot:function(){return null}};var e=f8.y$.from(t);return{subscribe:function(t){return e.subscribe({next:t,error:function(e){n(function(){throw e})}})},getSnapshot:function(){return t.current}}},[t])).subscribe,o=r.getSnapshot,a=(0,Q.useSyncExternalStore)(i,o,o),t?a:void 0),d=null!==c?u[u.length-c-1]:null,f=(0,cN.Z)(),p=f.ref,h=f.view;(0,Q.useEffect)(function(){h&&h.dispatch({changes:{from:0,to:h.state.doc.length,insert:d?d.data:""}})},[d,h]);var m=(0,Q.useRef)(c);return(0,Q.useEffect)(function(){m.current=c},[c]),(0,Q.useEffect)(function(){return e.logs.subscribe(function(e){var t=m.current;(null===t||e.length-2===t)&&s(e.length-1)})},[e.logs]),(0,O.BX)(V.G,{css:po.outputs,children:[(0,O.BX)(V.G,{css:po.outputsL,children:[(0,O.tZ)(V.G,{css:po.logHeader,children:d?null==d?void 0:d.name:null}),(0,O.tZ)(V.G,{css:po.logData,children:(0,O.tZ)(tg.ZP,{ref:p,language:"json",readOnly:!0})})]}),(0,O.BX)(V.G,{css:po.outputsR,children:[(0,O.tZ)(V.G,{css:po.logsHeader,children:(0,O.tZ)(ey.zx,{size:"small",text:"Clear",disabled:!u.length,onClick:e.onClear})}),(0,O.tZ)(V.G,{css:po.logsList,children:u.map(function(e,t){var n=u.length-t-1;return(0,O.tZ)("code",{role:"button",tabIndex:0,className:c===n?"selected":void 0,onClick:function(){s(n)},onKeyDown:function(e){"Enter"===e.key&&s(n)},children:e.name},n)})})]})]})}var f5=to.Py.define(),f7=to.Py.define(),f9=to.Py.define(),pe=ts.tk.theme({"&":{border:"1px solid ".concat(q.TV.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(q.TV.outlineDefault)}}),pt=new cO.j(function(e,t){return[pe,to.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(f5)&&(e=l.value),l.is(f9)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(n){return[ts.lg.define(function(){var n,r,i=void 0;return{update:(n=(0,tM._)(function(n){var o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k,S,_,T,E,R,D,I,B,A,P,G,N,O,U,M,X,F,W,V;return(0,tX.Jh)(this,function(H){switch(H.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,c=void 0;try{for(s=n.transactions[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){d=u.value,f=!0,p=!1,h=void 0;try{for(m=d.effects[Symbol.iterator]();!(f=(g=m.next()).done);f=!0){var z;(v=g.value).is(f5)&&v.value&&(o=v.value),v.is(f7)&&(null==r||r.push((z=v.value,JSON.parse(z,function(e,t){return"object"==typeof t&&"Uint8Array"===t.type&&void 0!==t.data?new Uint8Array(t.data):t})))),v.is(f9)&&(null==i||i())}}catch(e){p=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(!o)return[2];switch(y=o.service,b=o.procedure,w=o.type,Z=e.client[y][b][w],x=void 0,C=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Z(o.input)];case 2:return k=H.sent(),t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:pn(k)}),n.view.dispatch({effects:f9.of(null)}),[3,9];case 3:return[4,Z(null!==(S=o.input)&&void 0!==S?S:void 0)];case 4:return T=(_=L._.apply(void 0,[H.sent(),3]))[0],E=_[1],R=_[2],r=T,x=E,i=R,[3,9];case 6:return I=(D=L._.apply(void 0,[H.sent(),2]))[0],B=D[1],x=I,i=B,[3,9];case 7:return[4,Z(null!==(A=o.input)&&void 0!==A?A:void 0)];case 8:return G=(P=L._.apply(void 0,[H.sent(),2]))[0],N=P[1],r=G,i=N,[3,9];case 9:if(!x)return[3,22];O=!1,U=!1,H.label=10;case 10:H.trys.push([10,15,16,21]),X=(0,uI._)(x),H.label=11;case 11:return[4,X.next()];case 12:if(!(O=!(F=H.sent()).done))return[3,14];W=F.value,t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:pn(W)}),C++,H.label=13;case 13:return O=!1,[3,11];case 14:return[3,21];case 15:return V=H.sent(),U=!0,M=V,[3,21];case 16:if(H.trys.push([16,,19,20]),!(O&&null!=X.return))return[3,18];return[4,X.return()];case 17:H.sent(),H.label=18;case 18:return[3,20];case 19:if(U)throw M;return[7];case 20:return[7];case 21:n.view.dispatch({effects:f9.of(null)}),H.label=22;case 22:return r=void 0,x=void 0,i=void 0,[2]}})}),function(e){return n.apply(this,arguments)})}}),ts.tk.editable.from(n,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),f2.V.compute([n,"doc"],function(e){var t,r;return e.doc.length?null:(null===(t=e.field(n))||void 0===t?void 0:t.type)==="stream"||(null===(r=e.field(n))||void 0===r?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),ts.$f.of([{key:"Tab",run:function(e){var t;return!e.state.doc.length&&(e.dispatch({changes:null!==(t=e.state.facet(f2.V)[0])&&void 0!==t?t:void 0}),!0)}}]),ts.mH.of(function(t){var r=function(){if(e){var n=pi(t.state.doc.toString());if(n){var r=n.type,i=n.service,o=n.procedure,a=n.input;r&&i&&o&&t.dispatch({effects:f5.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:t.state.doc.length,insert:""}:void 0})}}},i=function(){t.dispatch({effects:f7.of(t.state.doc.toString()),changes:{from:0,to:t.state.doc.length,insert:""}})},o=function(){var r,i=t.state.field(n),o=new Set,a=t.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null===(r=pi(a))||void 0===r?void 0:r.type)&&o.add("Send")),o},a=pl.create({enabled:o(),onSend:function(){null==t.state.field(n)?r():i(),t.focus()},onClose:function(){t.dispatch({effects:[f9.of(null),f5.of(null)],changes:{from:0,to:t.state.doc.length,insert:""}})},onClear:function(){t.dispatch({changes:{from:0,to:t.state.doc.length,insert:""}}),t.focus()}});return{dom:a,top:!1,update:function(e){if((0,f4.aU)(e,n,"doc")){var t=e.state.field(n);pl.update(a,function(e){return(0,eh._)((0,ep._)({},e),{enabled:o(),inProgress:t?"".concat(t.type,": ").concat(t.service,".").concat(t.procedure):void 0})})}}}})]}})]});function pn(e){return JSON.stringify(e,function(e,t){return t instanceof Uint8Array?Array.from(t):t},2)}var pr=["rpc","stream","subscribe","upload"];function pi(e){try{t=JSON.parse(e)}catch(e){return null}var t,n=0,r=null,i=null,o=null;try{for(;n<3;){var a=Object.keys(t)[0];if(void 0===a)throw Error("expected key");if(0===n&&(r=a),1===n&&(i=a),2===n){if(pr.includes(a))o=a;else throw Error("expected procedure type")}t=t[a],n++}return{type:o,service:r,procedure:i,input:t}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var po=(0,H.X)({buttons:[q.l0.p(4),q.l0.rowWithGap(4)],status:[q.l0.p(4),q.l0.pb(0)],outputs:[q.l0.rowWithGap(0),q.l0.flex.growAndShrink(1),q.l0.border({width:1,color:q.TV.outlineDefault}),{marginTop:"4px"}],logHeader:[q.l0.align.start,q.l0.justify.center,q.l0.height("37px"),q.l0.display.flex,q.l0.p(4),q.l0.border({width:1,color:q.TV.outlineDefault,direction:"bottom"})],logData:[q.l0.display.block,q.l0.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[q.l0.display.flex,q.l0.align.end,q.l0.p(4),q.l0.border({width:1,color:q.TV.outlineDefault,direction:"bottom"})],logsList:[q.l0.display.block,q.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsL:[q.l0.display.flex,q.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsR:[q.l0.display.flex,q.l0.border({width:1,color:q.TV.outlineDefault,direction:"left"}),q.l0.width("40%"),q.l0.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(q.TV.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:q.TV.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),pa=["Send","Close","Clear"],pl=new f3.J(function(e){return(0,O.BX)(V.G,{children:[(0,O.tZ)(V.G,{css:po.status,children:(0,O.BX)(W.xv,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,O.BX)(O.HY,{children:["In progress - ",e.inProgress]}):null]})}),(0,O.tZ)(V.G,{css:po.buttons,children:Object.values(pa).map(function(t){return(0,O.tZ)(ey.zx,{size:"small",disabled:!e.enabled.has(t),text:t,onClick:function(){switch(t){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},t)})})]})}),pc=n(76848),ps=n(21781),pu=(0,H.X)({wrapper:[q.l0.p(4)],list:[q.l0.colWithGap(4)],runningWorkflowListItem:[q.l0.rowWithGap(4),q.l0.align.center]});(p=R||(R={})).Repl="repl",p.Pid2="pid2",p.Pid2Repl="pid2Repl",p.Logs="logs",p.LSP="lsp",p.AI="ai",p.GhostwriterChat="aiChat",p.Git="git",p.History2="history2",p.Metadata="metadata",p.Override="override",p.DDRum="rum",p.CommandBar="commandBar",p.Workflows="workflows";var pd=(D={},(0,tr._)(D,"repl",function(){var e,t,n,r,i,o,a,l,c,s=(0,eY.Z)(),u=(e=(0,ep._)({},fN,{variables:{replId:s}}),eQ.a(fU,e)).data,d=(null==u?void 0:u.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(u.repl)):void 0;return d&&(delete d.__typename,null===(t=d.user)||void 0===t||delete t.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(r=d.source)||void 0===r||delete r.__typename,null===(o=d.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(c=d.source)||void 0===c||null===(l=c.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,O.BX)(V.G,{css:fM,children:[(0,O.tZ)(fP.Z,{replId:s}),(0,O.tZ)("div",{children:d?(0,O.tZ)(fA.Z,{json:d}):null})]})}),(0,tr._)(D,"pid2",function(){var e,t=(0,J.Z)(),n=t.fs,r=t.container,i=null===(e=r.getContext())||void 0===e?void 0:e.repl,o=(0,uL.r9)(),a="/home/runner/".concat(null==i?void 0:i.slug,"/.local/bin/pid2"),l=(0,L._)((0,Q.useState)("unknown"),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(null),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(null),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)(null),2),v=g[0],y=g[1],b=(0,L._)((0,Q.useState)(null),2),w=b[0],Z=b[1],x=(0,uG.U)(function(e){return(0,tM._)(function(){var t,n;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:return s("loading"),t=setTimeout(function(){s("unhealthy")},5e3),[4,r.exec("stat","-c","%N",a)];case 1:return(n=i.sent()).error?f("LocalPid2 not installed: ".concat(n.output)):f("LocalPid2 installed: ".concat(n.output)),e.healthCheck.ping.rpc({}).then(function(e){m(e.payload),clearTimeout(t),e.ok?s("ok"):s("unhealthy")}).catch(function(){clearTimeout(t),s("unhealthy")}),[2]}})})});return(0,O.BX)(V.G,{css:fQ.view,children:[(0,O.BX)(W.h4,{level:3,children:["Is pid2 enabled? ",o?"Yes":"No"]}),(0,O.tZ)(ey.zx,{text:"Ping pid2 (state: ".concat(c,")"),colorway:"ok"===c?"green":"unhealthy"===c?"red":"grey",disabled:!x,onClick:function(){null==x||x()}}),h?(0,O.tZ)("code",{children:JSON.stringify(h,null,2)}):null,d?(0,O.tZ)("code",{children:d}):null,(0,O.tZ)(ey.zx,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!i)return[2];return e="",[4,(0,f$.w)(i,r,n,function(t){y(e+=t+"\n")})];case 1:return t.sent(),[2]}})})}),v?(0,O.tZ)("pre",{css:fQ.uploadMessage,children:v}):null,(0,O.tZ)(ey.zx,{colorway:"red",text:"Delete uploaded pid2",onClick:(0,tM._)(function(){var e,t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(!i)return[2];return[4,r.exec("rm","-f","/home/runner/bin/pid2")];case 1:return e=n.sent(),[4,r.exec("rm","-f",a)];case 2:if(t=n.sent(),e.error)return Z("".concat(e.error,": ").concat(e.output)),[2];if(t.error)return Z("".concat(t.error,": ").concat(t.output)),[2];return Z("uploaded pid2 deleted"),[2]}})})}),w?(0,O.tZ)("pre",{css:fQ.uploadMessage,children:w}):null,(0,O.tZ)(ey.zx,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=o,fK.log("window.pid2: ",o)}})]})}),(0,tr._)(D,"pid2Repl",function(){var e=(0,L._)((0,Q.useState)(function(){return new f8.vU([])}),1)[0],t=(0,Q.useCallback)(function(t){return e.update(function(e){return[t].concat((0,N._)(e))})},[e]),n=(0,L._)((0,Q.useState)(null),2),r=n[0],i=n[1];(0,uA.C)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=pt.use(r,t);return(0,O.BX)(O.HY,{children:[(0,O.tZ)(tg.ZP,{language:"json",hideGutter:!0,extensions:o}),(0,O.tZ)(f6,{logs:e,onClear:function(){return e.set([])}})]})}),(0,tr._)(D,"logs",function(e){var t=e.isHidden,n=(0,L._)((0,ff.Z)(!1),2),r=n[0],i=n[1],o=(0,L._)((0,Q.useState)(null),2),a=o[0],l=o[1],c=(0,fm.gd)(),s=(0,fm.qc)(),u=(0,fm.$G)(),d=(0,fm.mN)(),f=(0,fm.Ay)(),p=(0,fm._t)();return t?null:(0,O.BX)(V.G,{css:fg.container,children:[(0,O.BX)(V.G,{css:fg.controls,children:[(0,O.tZ)(ey.zx,{colorway:s?void 0:"positive",onClick:u,text:s?"Stop logging goval":"Start logging goval"}),(0,O.BX)(V.G,{css:fg.filters,children:[(0,O.tZ)(ey.zx,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,O.tZ)(ey.zx,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,O.tZ)(X.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,O.tZ)(z.Z,{})}),(0,O.tZ)(ey.zx,{colorway:"negative",onClick:function(){return p()},text:"Clear logs"})]}),r?(0,O.tZ)(fC,{filters:d,updateFilters:function(e){f((0,ep._)({},d,e))}}):null]}),(0,O.tZ)(fx,{logs:c,filters:d,timeRef:a,setTimeRef:l})]})}),(0,tr._)(D,"lsp",fh.L),(0,tr._)(D,"ai",fn.ho),(0,tr._)(D,"aiChat",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isHidden,n=e.performPaneOperation;return t?null:(0,O.tZ)(V.G,{children:(0,O.BX)(fV.mQ,{children:[(0,O.tZ)(fV.td,{"aria-label":"Tabs",children:Object.keys(fY).map(function(e){return(0,O.tZ)(fV.OK,{children:e},e)})}),(0,O.tZ)(fV.nP,{children:Object.entries(fY).map(function(e){var t=(0,L._)(e,2),r=t[0],i=t[1];return(0,O.tZ)(fV.x4,{children:(0,O.tZ)(i,{performPaneOperation:n})},r)})})]})})}),(0,tr._)(D,"git",function(){var e,t=(0,L._)((0,Q.useState)([]),2),n=t[0],r=t[1],i=(e=(0,ep._)({},fl,void 0),eQ.a(fc,e)).data,o=(0,sm.Z)(fo.e);return(0,Q.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,N._)(e)).slice(0,100)})},[o]),(0,O.BX)(V.G,{css:[q.l0.p(8)],children:[(0,O.BX)(eb.Tg,{elevated:!0,css:[q.l0.borderRadius(8),q.l0.p(8),q.l0.mb(8)],children:[(0,O.tZ)("span",{children:"Git Service Connection Info"}),(0,O.tZ)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,O.tZ)(V.G,{css:[q.l0.colWithGap(4)],children:n.length?n.map(function(e){return(0,O.tZ)(fs,{event:e},e.key)}):"No events yet..."})]})}),(0,tr._)(D,"history2",function(){var e=(0,aY.U)()("toggleIsShowingChanges"),t=(0,sm.Z)(l_.BI)(),n=(0,sm.Z)(l_.Jp)(),r=(0,L._)((0,ff.Z)(!1),2),i=r[0],o=r[1];if(!t)return null;var a=t.filePath,l=t.changes,c=t.users,s=t.version,u=t.playing,d=t.count,f=l[s];if(!f)return(0,O.BX)(V.G,{children:[(0,O.BX)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,O.tZ)("pre",{children:JSON.stringify(t,null,2)})]});var p=null==c?void 0:c[f.userId],h=f.timestamp,m=i&&n?function(e,t){try{return(0,fd.ed)(e,t).op}catch(e){return e}}(f.changes,n.state.doc.sliceString(0)):null;return(0,O.BX)(V.G,{css:[q.l0.colWithGap(16),q.l0.p(4)],children:[(0,O.BX)(V.G,{css:[q.l0.colWithGap(4)],children:[(0,O.tZ)(fp,{t:"File",children:(0,O.tZ)("pre",{children:a})}),(0,O.BX)(fp,{t:"Version",children:[s," / ",d-1]}),(0,O.tZ)(fp,{t:"Playing",children:(0,O.tZ)(fu.Z,{children:u?"true":"false"})}),(0,O.tZ)(fp,{t:"Date",children:(0,O.tZ)(nA.EK,{date:h})})]}),p?(0,O.BX)(V.G,{children:[(0,O.tZ)(fp,{t:"Author",children:p.username}),(0,O.BX)(V.G,{css:[q.l0.pl(8),q.l0.colWithGap(4)],children:[(0,O.tZ)(fp,{t:"ID",children:p.id}),(0,O.tZ)(fp,{t:"Name",children:p.username}),(0,O.tZ)(fp,{t:"Image",children:(0,O.tZ)("a",{href:p.image,children:p.image})})]})]}):null,(0,O.BX)(V.G,{css:[q.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,O.tZ)(lD.Z,{id:e,isOn:i,onChange:o}),(0,O.tZ)("label",{htmlFor:e,children:"Changes"})]}),f?null:"No changes",i&&f?(0,O.tZ)(O.HY,{children:(0,O.BX)(V.G,{children:[(0,O.tZ)(fp,{t:"Changeset",children:(0,O.tZ)("pre",{children:JSON.stringify(f,null,2)})}),n?(0,O.tZ)(O.HY,{children:(0,O.BX)(V.G,{css:[q.l0.mt(4)],children:[(0,O.tZ)(fp,{t:"OT",children:(0,O.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,O.tZ)("p",{children:(0,O.BX)("small",{children:["Note that the OT value is translated ",(0,O.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,tr._)(D,"metadata",function(){var e=(0,J.Z)().container;(0,fS.Z)(e);var t=e.getConnectionMetadata();if(!t)return(0,O.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,i='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,O.BX)("div",{css:f_.root,children:[(0,O.BX)(V.G,{css:f_.copyable,children:[(0,O.BX)(W.xv,{css:f_.command,multiline:!1,children:["conman Repl command: ",(0,O.tZ)(fu.Z,{children:i})]}),(0,O.tZ)(X.hU,{alt:"Copy to clipboard",onClick:function(){return(0,ev.Z)(i)},children:(0,O.tZ)(fk.Z,{})})]}),(0,O.BX)("div",{children:["metadata:",(0,O.tZ)("pre",{children:JSON.stringify(t,null,2)})]}),(0,O.tZ)("br",{}),(0,O.tZ)("br",{}),(0,O.BX)("div",{children:["parsed token:",(0,O.tZ)("pre",{children:JSON.stringify((0,dQ.he)(t.token),null,2)})]}),(0,O.tZ)("br",{}),(0,O.tZ)("br",{})]})}),(0,tr._)(D,"override",function(){var e=(0,L._)((0,Q.useState)(fT.Z.get("gurl","string")||""),2),t=e[0],n=e[1],r=(0,L._)((0,Q.useState)(""),2),i=r[0],o=r[1],a=(0,fD.U_)(),l=(0,fI.mC)(),c=""===t?"null":JSON.stringify((0,fE.t)(t),null,2);return(0,O.BX)(V.G,{css:[q.l0.pt(16),q.l0.px(12),q.l0.colWithGap(12)],children:[(0,O.BX)(V.G,{css:[q.l0.colWithGap(12)],children:[(0,O.tZ)(fR.ZP,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,O.BX)("pre",{children:["metadata override preview:",c]}),(0,O.BX)(V.G,{css:[q.l0.rowWithGap(12)],children:[(0,O.tZ)(df.Z,{color:"positive",onClick:function(){fT.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,O.tZ)(df.Z,{color:"yellow",onClick:function(){fT.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,O.tZ)(df.Z,{color:"orange",onClick:function(){fT.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"}),(0,O.tZ)(df.Z,{color:"red",onClick:function(){fT.Z.set("gurl","ws://localhost:4560"),window.location.reload()},children:"Switch to localhost & reload"})]}),(0,O.tZ)("div",{children:fT.Z.get("gurl","string")?"currently in localStorage: ".concat(fT.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,O.tZ)("p",{children:"Gurl order of precedence:"}),(0,O.BX)("ol",{style:{margin:12},children:[(0,O.tZ)("li",{children:"gurl in localStorage (set above)"}),(0,O.BX)("li",{children:["If in development webapp and a theres a response from",(0,O.tZ)("code",{children:"https://localhost:4563"})," or",(0,O.BX)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,O.BX)("li",{children:["default is ",(0,O.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,O.tZ)("hr",{css:[q.l0.my(16),{borderColor:q.TV.outlineDefault}]}),(0,O.BX)(V.G,{css:[q.l0.colWithGap(12)],children:[(0,O.tZ)(W.xv,{multiline:!1,children:"Override Database"}),(0,O.tZ)(fR.ZP,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,O.tZ)(V.G,{css:[q.l0.rowWithGap(8)],children:(0,O.tZ)(df.Z,{color:"positive",onClick:function(){a(i)},children:"Override Postgres connection string"})})]}),(0,O.tZ)(df.Z,{onClick:function(){window.ldClient=l,fB.log("window.ldClient: ",l)},children:"Assign LD client to window for testing"})]})}),(0,tr._)(D,"rum",function(){var e,t=null===(e=fX.v.getInternalContext())||void 0===e?void 0:e.session_id,n=fX.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,i=(0,L._)((0,Q.useState)(null!=t),2),o=i[0],a=i[1];return(0,O.tZ)(V.G,{css:[q.l0.colWithGap(16),q.l0.p(4)],children:r?(0,O.BX)(O.HY,{children:[(0,O.tZ)(ey.zx,{onClick:o?function(){fX.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,fF.Oo)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,ep._)({},o&&eH.p.backgroundPulse(q.TV.redDimmest,q.TV.redDimmer))}),o?(0,O.tZ)(fW,{sessionId:t}):null]}):(0,O.tZ)(ey.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,tr._)(D,"commandBar",function(){var e=(0,f0.v)(),t=(0,f0.O)();return(0,O.tZ)(V.G,{css:f1.container,children:(0,O.BX)(V.G,{css:f1.toggleRow,children:[(0,O.tZ)(lD.Z,{id:"toggleCommandBarMatchScoresVisiblity",isOn:e,onChange:t}),(0,O.tZ)(W.xv,{children:"Show match scores in Command Bar"})]})})}),(0,tr._)(D,"workflows",function(){var e=(0,L._)((0,Q.useState)([]),2),t=e[0],n=e[1],r=(0,L._)((0,Q.useState)(void 0),2),i=r[0],o=r[1],a=(0,pc.Oo)(),l=(0,pc.D)(),c=(0,pc.QF)();(0,Q.useEffect)(function(){var e,t,r=null!==(t=null==l?void 0:l.map(function(e){return{id:e.name}}))&&void 0!==t?t:[];n(r),o(null===(e=r[0])||void 0===e?void 0:e.id)},[l]);var s=(0,uG.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]),u=(0,uG.U)(function(e){return function(t){var n=t.runId;e.workflows.stopRun.rpc({runId:n})}},[]);return(0,O.BX)(V.G,{css:pu.wrapper,children:[(0,O.BX)(V.G,{children:[(0,O.tZ)(fj.P,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:t,children:function(e){return(0,O.tZ)(fz.m9,{label:e.id},e.id)}}),(0,O.tZ)(ey.zx,{onClick:(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:if(!i||!s)return[2];return[4,s({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),c?(0,O.tZ)(V.G,{children:Object.entries(c).map(function(e){var t=(0,L._)(e,2),n=t[0],r=t[1];return(0,O.BX)(V.G,{css:pu.runningWorkflowListItem,children:[n," step: ",r.step,r.step===ps.KX.RUNNING?(0,O.tZ)(ey.zx,{text:"Stop",onClick:function(){null==u||u({runId:n})}}):null]},n)})}):null,(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{children:"Run State"}),(0,O.tZ)(fA.Z,{json:c})]}),(0,O.BX)(V.G,{children:[(0,O.tZ)(W.xv,{children:"Config"}),(0,O.tZ)(fA.Z,{json:a})]})]})}),D),pf=Object.values(R),pp=(0,H.X)({surface:[q.l0.colWithGap(8),q.l0.p(4),q.l0.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[q.l0.flex.growAndShrink(1),q.l0.overflow("auto")],content:[q.l0.flex.growAndShrink(1),q.l0.height("100%")]});function ph(e){var t=e.paneOptions,n=(0,L._)((0,Q.useState)("repl"),2),r=n[0],i=n[1],o=pf.map(function(e){return(0,O.tZ)(ey.zx,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,O.BX)(eb.Tg,{background:"default",css:pp.surface,children:[(0,O.tZ)(V.G,{css:pp.tabs,children:o}),(0,O.tZ)(V.G,{css:pp.tab,children:Object.entries(pd).map(function(e){var n=(0,L._)(e,2),i=n[0],o=n[1];return(0,O.tZ)(V.G,{css:pp.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,O.tZ)(o,{isHidden:t.isHidden||r!==i,performPaneOperation:t.performPaneOperation})},i)})})]})}var pm=U.Dy.Object({type:U.Dy.Literal("adminPanel")}),pg={Content:function(e){var t=e.options;return(0,O.tZ)(ph,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.redStronger,size:t},children:(0,O.tZ)(ft.Z,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:$.hc.Other,decode:function(e){return M.B4.Decode(pm,e)}},pv=n(10482),py=n(53904),pb=n(27069),pw=n(59978),pZ=n(45151),px=n(21460),pC=n(23261),pk=n(33790),pS=n(34648),p_=n(88300),pT=n(77049),pE=n(46261),pR=new Map,pD=(0,H.X)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function pI(e){var t=e.scrolledAmount,n=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,O.BX)(O.HY,{children:[t>0&&(0,O.tZ)("div",{css:pD.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&t<n&&(0,O.tZ)("div",{css:pD.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var pB=n(38799),pA=n(15179),pP=n(27598),pG=(0,H.X)({root:[q.l0.colWithGap(8)],header:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.height(36)],description:[q.l0.flex.column,q.l0.gap(8)],divider:[q.l0.backgroundColor.outlineDimmer],package:[q.l0.p(4),q.l0.flex.row,q.l0.align.center,q.l0.border({color:"transparent"}),q.l0.justify.spaceBetween,{"&:hover":{backgroundColor:q.TV.backgroundHighest}}],packageList:[q.l0.maxHeight(220),q.l0.overflowY("auto")],packageMetadata:[q.l0.flex.row,q.l0.flex.growAndShrink(1),q.l0.align.center,q.l0.overflow("hidden"),q.l0.mr(8)],packageName:[q.l0.truncate,q.l0.flex.growAndShrink(1),q.l0.mx(8),{"> a":[q.l0.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[q.l0.flex.column,q.l0.gap(8)],packager:[q.l0.backgroundColor.backgroundHigher,q.l0.borderRadius(4),q.l0.overflow("hidden")],packagerHeader:[q.l0.pl(4),q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.flex.growAndShrink(1)],packagerHeaderTitle:[q.l0.truncate,q.l0.flex.shrink(1)],packagerEmptyState:[q.l0.p(8),q.l0.align.center,q.l0.backgroundColor.backgroundOverlay,q.l0.borderRadius(0,0,4,4),q.l0.color.foregroundDimmest],shadow:{position:"absolute",left:0,width:"100%",height:10,'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, rgba(2, 2, 3, 0.32))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, rgba(2, 2, 3, 0.32))"}}});function pL(e){var t,n,r,i,o,a,l=e.pkg,c=e.uninstall,s=(0,p_.ZR)(),u=(n=(0,p_.ZR)(),r=(0,J.Z)(),o=(i=(0,L._)((0,Q.useState)(null!==(t=pR.get("".concat(null==n?void 0:n.id,":").concat(l.name)))&&void 0!==t?t:null),2))[0],a=i[1],(0,Q.useEffect)(function(){if((null==n?void 0:n.id)&&l.name){var e,t=l.name;if(!pR.has(t)){var i=(0,pE.C)(n.id),o=!1;return(e=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:n.id,name:t,services:r})];case 1:if((e=l.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,o)return[2];return pR.set("".concat(n.id,":").concat(t),null!=e?e:null),a(null!=e?e:null),[2]}})}),function(){return e.apply(this,arguments)})(),function(){o=!0}}}},[null==n?void 0:n.id,l.name]),o),d=(0,Q.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var t=document.createElement("DIV");return t.innerHTML=e,(t.textContent||t.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),f=(0,pS.Z)((null==u?void 0:u.license)||l.license),p=(0,Q.useMemo)(function(){if(u){var e;return(0,eh._)((0,ep._)({},u),{version:null!==(e=null==u?void 0:u.version)&&void 0!==e?e:l.spec,name:(null==s?void 0:s.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:f,description:d})}return l},[null==s?void 0:s.id,d,u,f,l]),h=(0,pT.cW)(),m=(0,pT.B2)(),g=(0,Q.useMemo)(function(){return h.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,h]),v=(0,Q.useMemo)(function(){return!!(null!==m&&m.pkgs.find(function(e){return e.name===l.name}))},[m]);return(0,O.BX)(V.G,{css:pG.package,tag:"li",children:[(0,O.BX)(V.G,{css:pG.packageMetadata,children:[(0,O.tZ)(px.Z,{}),(0,O.BX)(W.xv,{css:pG.packageName,children:[p.name,p.homepageURL?(0,O.tZ)("a",{href:p.homepageURL,target:"_blank",children:(0,O.tZ)(r0.Z,{})}):null]}),p.version?(0,O.tZ)(W.xv,{color:"dimmer",children:p.version}):null]}),(0,O.BX)(V.G,{css:[q.l0.flex.row,q.l0.gap(4),q.l0.align.center],children:[p.description||p.license?(0,O.tZ)(tO.u,{tooltip:(0,O.BX)("div",{children:[(0,O.tZ)("div",{children:p.description}),p.license?(0,O.tZ)(W.xv,{variant:"small",color:"dimmer",children:p.license}):null]}),children:(0,O.tZ)(lL.Z,{})}):null,(0,O.tZ)(X.hU,{alt:"Uninstall",disabled:v||g,onClick:function(){c()},children:(0,O.tZ)(sb.Z,{})})]})]})}function pN(e){var t=e.onAddPackage,n=e.name,r=e.id,i=e.addText;return(0,O.BX)(V.G,{css:pG.packagerHeader,children:[(0,O.tZ)(W.xv,{css:pG.packagerHeaderTitle,id:r,children:n}),(0,O.tZ)(X.hU,{alt:i,onClick:t,children:(0,O.tZ)(nP.Z,{})})]})}function pO(e){var t=e.packages,n=e.labelId,r=(0,p_.ZR)(),i=(0,pT.Wx)(),o=(0,Q.useRef)(null),a=(0,nE.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:15,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,L._)((0,Q.useState)(0),2),c=l[0],s=l[1],u=(0,L._)((0,Q.useState)(0),2),d=u[0],f=u[1],p=a.getTotalSize();return r?(0,O.tZ)(V.G,{css:q.l0.position.relative,innerRef:function(e){e&&f(e.offsetHeight)},children:(0,O.BX)(V.G,{innerRef:o,css:pG.packageList,onScroll:function(e){s(e.target.scrollTop)},children:[(0,O.tZ)(pI,{scrolledAmount:c,scrollableAmount:p-d,hideEnd:!0}),(0,O.tZ)(V.G,{style:{height:p},tag:"ul","aria-labelledby":n,children:a.getVirtualItems().map(function(e){var n=t[e.index];return(0,O.tZ)(pL,{pkg:n,uninstall:function(){i({id:r.id,pkg:n})}},n.name)})})]})}):null}var pU=new Map;function pM(e){var t=e.onAddPackage,n=e.openFile,r=(0,p_.ZR)(),i=(0,pT.te)(null==r?void 0:r.id),o=(0,Q.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0})},[i]),a=(0,Q.useId)(),l=(0,Q.useCallback)(function(){t(null==r?void 0:r.id)},[t,null==r?void 0:r.id]),c=(null==r?void 0:r.id)==="nix",s=(0,Q.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,pP.XZ)(),d=(0,L._)((0,Q.useState)(r?pU.get(r.id):void 0),2),f=d[0],p=d[1];return((0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e,t,n,i,o,a,l;return(0,tX.Jh)(this,function(c){switch(c.label){case 0:if(!s||!r)return[2];e=!0,t=!1,n=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),i=s[Symbol.iterator](),c.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in c.sent())return pU.set(r.id,a),p(a),[3,5];c.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=c.sent(),t=!0,n=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,s]),r)?(0,O.BX)(V.G,{css:pG.packagerRoot,children:[(0,O.tZ)(V.G,{css:pG.packager,children:(0,O.tZ)(eM.Q,{defaultExpanded:!0,headerContent:(0,O.tZ)(pN,{id:a,name:r.name,addText:"Add new ".concat(c?"dependency":"package"),onAddPackage:l}),children:(0,O.BX)(O.HY,{children:[(0,O.tZ)(pA.iz,{css:pG.divider}),o.length>0?(0,O.tZ)(pO,{packages:o,labelId:a}):(0,O.BX)(V.G,{css:pG.packagerEmptyState,children:["No ",c?"dependencies":"packages"," found"]})]})})}),(0,O.tZ)(ey.zx,{colorway:"primary",variant:"outlined",text:"Add new ".concat(c?"dependency":"package"),iconLeft:(0,O.tZ)(nP.Z,{}),onClick:l}),f?(0,O.tZ)(ey.zx,{variant:"nofill",text:"Open ".concat(f),iconLeft:(0,O.tZ)(px.Z,{}),onClick:function(){(0,lC.j)(lS.U3.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:f}),n({path:f})}}):null]}):null}function pX(e){var t=e.configs,n=e.description,r=e.title,i=e.openFile,o=(0,tl._)(e,["configs","description","title","openFile"]);return(0,O.BX)(V.G,{children:[(0,O.tZ)(V.G,{css:pG.header,children:(0,O.tZ)(W.h4,{variant:"subheadDefault",level:2,children:r})}),(0,O.BX)(V.G,{css:pG.root,children:[(0,O.tZ)(pB.M,{color:"dimmer",css:pG.description,children:n}),t.length>0?t.map(function(e){return(0,O.tZ)(pk.Z,{config:e,children:(0,O.tZ)(pM,(0,ep._)({openFile:i},o))},e.id)}):null]})]})}function pF(e){var t=(0,pw.I)().configs,n=(0,Q.useMemo)(function(){return t.find(function(e){return"nix"===e.id})},[t]);return n?(0,O.tZ)(pX,(0,eh._)((0,ep._)({title:"System Dependencies",description:(0,O.BX)("span",{children:["Add additional support to your environment with"," ",(0,O.tZ)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[n]})):null}var pW=n(14694),pV=n(16832);function pH(e){var t=e.openFile,n=e.openConsole,r=e.openNixTab,i=(0,pw.I)().configs,o=(0,Q.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,L._)((0,Q.useState)({mode:"Overview"}),2),l=a[0],c=a[1];switch((0,pC.D)(lS.U3.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,O.tZ)(pV._,{children:(0,O.tZ)(pX,{title:"Manage Imports",configs:o,openFile:t,onAddPackage:function(e){c({mode:"Search",initialPackager:e})},description:(0,O.BX)(O.HY,{children:[(0,O.tZ)(W.xv,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===o.length?(0,O.tZ)(W.xv,{color:"dimmest",children:(0,O.BX)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,O.tZ)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,O.tZ)(pW.o,{onBack:function(){return c({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:n})}}var pz=n(5272),pj=(0,H.X)({systemModules:[q.l0.flex.column,q.l0.gap(8)],sectionHeader:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.height(36)]});function pq(e){var t=e.openFile,n=e.openConsole,r=(0,py._)().modules,i=(0,L._)((0,Q.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,pC.D)(lS.U3.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,O.BX)(pV._,{children:[(0,O.BX)(V.G,{children:[(0,O.tZ)(V.G,{css:pj.sectionHeader,children:(0,O.tZ)(W.h4,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,O.BX)(V.G,{css:pj.systemModules,children:[(0,O.tZ)(pB.M,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your Repl."}),(0,O.tZ)(pz.Z,{modules:r}),(0,O.tZ)(ey.zx,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,O.tZ)(nP.Z,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,O.tZ)(ey.zx,{text:"Open .replit",variant:"nofill",iconLeft:(0,O.tZ)(lP.Z,{}),onClick:function(){t({path:".replit"})}})]})]}),(0,O.tZ)(pF,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:t}),(0,O.tZ)(el.Z,{href:ed.TT.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,O.tZ)(r0.Z,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,O.tZ)(pW.z,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:n})}}var pJ=n(27843);(h=I||(I={})).Import="import",h.Nix="nix";var pY=(0,H.X)({root:[q.l0.overflow("hidden"),q.l0.flex.growAndShrink(1)],systemModules:[q.l0.flex.column,q.l0.gap(8)],sectionHeader:[q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.height(36)],loading:[q.l0.center,q.l0.flex.growAndShrink(1)],content:[q.l0.flex.growAndShrink(1),q.l0.overflowY("auto")]});function p$(e){var t,n=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,pw.I)(),a=o.configs,l=o.loading,c=(0,py._)(),s=c.modules,u=c.configs,d=(0,pb.Z)(),f=(0,Q.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,p=(0,L._)((0,Q.useState)(f?void 0===i?"import":i:"nix"),2),h=p[0],m=p[1];return((0,Q.useEffect)(function(){f||m("nix")},[f,l]),a&&s&&u&&d&&!l)?("import"===h?t=(0,O.tZ)(pH,{openFile:n,openConsole:r,openNixTab:function(){return m("nix")}}):"nix"===h&&(t=(0,O.tZ)(pq,{openFile:n,openConsole:r})),(0,O.BX)(V.G,{css:pY.root,children:[(0,O.tZ)(pZ.g,{tabs:[{value:"import",label:"Imports",icon:(0,O.tZ)(px.Z,{})},{value:"nix",label:"System (Advanced)",icon:(0,O.tZ)(pJ.Z,{})}],value:h,onClick:function(e){m(e.value)}}),(0,O.tZ)(V.G,{css:pY.content,children:t})]})):(0,O.tZ)(pV.Gu,{})}var pK=n(30116),pQ=U.Dy.Object({type:U.Dy.Literal("dependencies"),initialTab:U.Dy.Optional(U.Dy.Union([U.Dy.Literal("import"),U.Dy.Literal("nix")]))}),p0={Content:function(e){var t=e.options.performPaneOperation,n=e.pane.initialTab,r=(0,Q.useCallback)(function(e){return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[t]),i=(0,Q.useCallback)(function(){t({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[t]);return(0,O.tZ)(p$,{openFile:r,openConsole:i,initialTab:n})},Icon:function(e){var t=e.size;return(0,O.tZ)(pv.Z,{size:t})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:pK.h.WorkspaceFeatures,decode:function(e){return M.B4.Decode(pQ,e)}},p1=n(43769),p2=n(76399),p3=n(37701),p4=n(80902),p8=n(13387),p6=n(61663),p5=n(26996),p7=n(23802),p9=n(22192);n(76068);var he=n(68417),ht=function(e){return"color-mix(in srgb, ".concat(te.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},hn=q.nC.min(440),hr=(0,eW.F4)({"0%":{opacity:0},"100%":{opacity:1}}),hi=(0,p9.$)(["animationDelay"]),ho=hi.styleTokens,ha=hi.cssVars,hl=(0,H.X)({root:[q.l0.reset.button,nD.gU.filled,q.l0.borderRadius(4),q.l0.align.center,q.l0.p(6),q.l0.color.blurpleDefault,q.l0.cursor.pointer,q.l0.align.start,(A={},(0,tr._)(A,hn,[q.l0.rowWithGap(4),q.l0.align.center]),(0,tr._)(A,nD.dj.interactiveBackground,ht(.1)),(0,tr._)(A,nD.dj.interactiveBackgroundActive,ht(.2)),(0,tr._)(A,"opacity",0),(0,tr._)(A,"animationName",hr),(0,tr._)(A,"animationDuration","800ms"),(0,tr._)(A,"animationFillMode","forwards"),(0,tr._)(A,"animationTimingFunction","ease-out"),(0,tr._)(A,"animationDelay",ho.animationDelay),(0,tr._)(A,"&.unsupported",(B={},(0,tr._)(B,nD.dj.interactiveBackground,te.TV.orangeDimmer),(0,tr._)(B,nD.dj.interactiveBackgroundActive,te.TV.orangeStronger),B)),A)],iconText:q.l0.rowWithGap(4)});function hc(e){(0,iN.Zb)();var t=void 0;return(0,O.BX)(V.G,{className:"",css:hl.root,onClick:e.onClick,style:(0,tr._)({},ha.animationDelay,20*e.index+"ms"),children:[(0,O.BX)(V.G,{css:hl.iconText,children:[(0,Q.cloneElement)(e.icon,{size:16,color:te.TV.blurpleDefault}),(0,O.tZ)(W.xv,{variant:"small",children:e.title})]}),(0,O.tZ)(W.xv,{variant:"small",color:"dimmer",children:null!=t?t:e.description})]})}var hs=(0,H.X)({root:[q.l0.flex.growAndShrink(1),q.l0.position.relative,q.l0.overflow("auto"),q.l0.display.block],content:[q.l0.py(32),q.l0.px(32),q.l0.center,q.l0.colWithGap(12),q.l0.minHeight("100%")],header:[q.l0.colWithGap(8),q.l0.align.center,q.l0.maxWidth(370),q.l0.textAlign.center],buttons:[q.l0.colWithGap(8),(0,tr._)({},hn,[q.l0.align.center])],mobileWrapper:[q.l0.p(48),q.l0.center],mobileText:[q.l0.textAlign.center],titleWrapper:[q.l0.rowWithGap(4),q.l0.align.center]});function hu(e){var t,n,r,i,o,a=e.onPromptClick,l=(t=(0,L._)((0,s2.Bx)(),1)[0],n=(0,nb.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),r=(0,aU.T3)(),i=n&&r,o=(0,iN.$g)(),(0,Q.useMemo)(function(){var e,n=t?p8.$R.from(t):null,r=null!=t?t:"index.js",a=[{icon:(0,O.tZ)(p7.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,O.tZ)(ft.Z,{}),title:"Debug",description:t?"Find bugs in ".concat(t):"Fix the price updating logic",action:"DEBUG"},{icon:(0,O.tZ)(p5.Z,{}),title:"Explain",description:"How does ".concat(r," work?"),action:"EXPLAIN",promptToFill:"How does ".concat(r," work?")},{icon:(0,O.tZ)(p5.Z,{}),title:"Ask replit.com",description:"How do I deploy a ".concat(null!==(e=null==n?void 0:n.name)&&void 0!==e?e:"python"," project?"),action:"REPLIT_DOCS"}];return i&&o?[{icon:(0,O.tZ)(iF.Z,{}),title:"Agent Mode",description:"Let the agent work for you",action:"AGENT",promptToFill:""}]:i?(0,N._)(a).concat([{icon:(0,O.tZ)(iF.Z,{}),title:"Agent Mode",description:"Let the agent work for you",action:"AGENT",promptToFill:""}]):a},[i,t,o])),c=(0,aX.useRouter)(),s=(0,aU.S7)(c,"hideChatInput");return a?s?(0,O.tZ)(V.G,{css:hs.mobileWrapper,children:(0,O.tZ)(W.xv,{css:hs.mobileText,children:"Ask AI below for help setting up new projects, answering questions about your code, and assisting your thinking."})}):(0,O.tZ)(V.G,{css:hs.root,children:(0,O.BX)(V.G,{css:hs.content,children:[(0,O.BX)(V.G,{css:hs.header,children:[(0,O.tZ)(he.R,{advanced:!0,showUsername:!1}),(0,O.BX)(V.G,{css:hs.titleWrapper,children:[(0,O.tZ)(W.xv,{variant:"subheadBig",children:"Replit AI"}),(0,O.tZ)(p6.C,{})]}),(0,O.tZ)(W.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,O.tZ)(V.G,{css:hs.buttons,children:l.map(function(e,t){return(0,eW.az)(hc,(0,eh._)((0,ep._)({},e),{index:t,key:e.action,onClick:function(){var t,n=null!==(t=e.promptToFill)&&void 0!==t?t:e.description;(0,lC.j)(lC.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),a({intent:e.action,value:n})}}))})})]})}):null}var hd=n(36608),hf=n(25414),hp=n(57785),hh=n(86908),hm=n(47423),hg=U.Dy.Object({type:U.Dy.Literal("ghostwriterChat"),data:U.Dy.Optional(U.Dy.Object({sessionId:U.Dy.Optional(U.Dy.String()),initialPromptEditorValue:U.Dy.Optional(U.Dy.String())}))}),hv=(0,H.X)({root:[q.l0.center,q.l0.flex.growAndShrink(1),q.l0.p(16)]});function hy(){return(0,O.tZ)(V.G,{css:hv.root,children:(0,O.tZ)(W.xv,{children:"AI is disabled for this team"})})}var hb={Content:function(e){var t,n,r,i,o,a=e.pane.data,l=e.options,c=(0,nb.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),s=l.performPaneOperation,u=(0,Q.useCallback)(function(e){s({operation:"open",pane:"string"==typeof e?(0,Y.$E)(e):{type:(0,$.Dp)(e),data:e},secondary:!0})},[s]),d=(0,J.Z)(),f=d.fs,p=d.dotReplit,h=d.secrets,m=(t=(0,s2.AA)(),n=(0,hh.T)(),(0,Q.useCallback)((r=(0,tM._)(function(e){var r,i,o,a,l;return(0,tX.Jh)(this,function(c){switch(c.label){case 0:return[4,f.listFiles()];case 1:if((r=c.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!n(e)}),!e)return[3,3];return[4,(0,hm.Rz)(e,o)];case 2:return l=c.sent(),[3,4];case 3:l=(0,hp.Z)(o,{existing:t(),getKey:function(e){return e}}).map(function(e){return{path:e}}),c.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[f,n,t])),g=(0,fH.G)(f,p),v=(0,s2._3)(),y=(0,hf.Ds)(),b=(0,eY.Z)(),w=(0,Q.useMemo)(function(){return{openFile:u,listFiles:f.listFiles,findFiles:m,getFileContext:g,codeInsertObservable:y,addSecretEntries:h.addEntries,performPaneOperation:s,isInAgentMode:!1}},[u,f.listFiles,m,g,y,h.addEntries,s]),Z=(0,L._)((0,Q.useState)(null),2),x=Z[0],C=Z[1],k=(i=(0,aX.useRouter)().query.aiPaneSessionId)&&"string"==typeof i?i:null,S=(0,Q.useRef)(null!==(o=null==a?void 0:a.sessionId)&&void 0!==o?o:k),_=(0,Q.useRef)(null);S.current&&(_.current=S.current===p1.Bg?{type:"mostRecent"}:{type:"session",id:S.current}),(0,K.Wk)(function(){return x},[x]);var T=(0,L._)((0,Q.useState)(null==a?void 0:a.initialPromptEditorValue),2),E=T[0],R=T[1];(0,Q.useEffect)(function(){(null==a?void 0:a.initialPromptEditorValue)&&R(null==a?void 0:a.initialPromptEditorValue),x&&E&&(x.setValue(E),R(void 0))},[E,x,null==a?void 0:a.initialPromptEditorValue]);var D=(0,nb.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),I=(0,iN.Fv)(),B=(0,ty.Z)(null==a?void 0:a.sessionId),A=(0,Q.useCallback)(function(e){B.current!==e&&s({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}})},[s,B]),P=(0,Q.useRef)(null);return((0,Q.useEffect)(function(){var e;null===(e=P.current)||void 0===e||e.updateActiveSessionId(null==a?void 0:a.sessionId)},[null==a?void 0:a.sessionId]),(0,p3.v)().isTeamWithAiDisabled)?(0,O.tZ)(hy,{}):c?(0,O.tZ)(hd.Z,{textVariant:"headerDefault",showImage:!0}):(0,O.BX)(O.HY,{children:[(0,O.tZ)(p4.S,{ref:P,inputRef:C,initialSession:_.current,recentFilesObservable:v,workspace:w,replId:b,renderEmptyState:function(e){return(0,O.tZ)(hu,(0,ep._)({},e))},onEnterAgentMode:D?I:void 0,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:A}),(0,O.tZ)(p2.Z,{})]})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:q.TV.blurpleStrongest,size:t},children:(0,O.tZ)(iF.Z,{})})},getTitle:function(){return"AI"},description:"Use Replit AI to set up your Repl, answer questions about your code, and assist your thinking",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(hg,e)}},hw=n(91372),hZ=n(24374),hx=n(63411),hC=n(51619),hk=n(27099),hS=n(97801),h_=n(41520),hT=n(46142),hE=n(69896),hR=n(41968),hD=n(18898),hI=n(46867),hB=n(30582),hA=n(56729),hP=n(85995),hG=n(87387),hL=n(21390),hN=n(32373);function hO(){var e=(0,e$._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return hO=function(){return e},e}function hU(){var e=(0,e$._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return hU=function(){return e},e}var hM={},hX=(0,eK.Ps)(hO()),hF=(0,eK.Ps)(hU());function hW(e){var t=e.disabled,n=(0,hB.Z)(),r=n.openInVSCode,i=n.onConfirmConfig,o=n.isConfigModalOpen,a=n.closeConfigModal;return(0,O.BX)(eb.Tg,{css:hz.connectInstructions,elevated:!0,children:[(0,O.BX)(V.G,{css:hz.connectHeader,children:[(0,O.tZ)(W.h4,{level:3,children:"Connect to VS Code"}),(0,O.tZ)(W.xv,{color:"dimmer",children:"One-click SSH setup will launch VS Code and configure keys for you."})]}),(0,O.tZ)(ey.zx,{text:t?"SSH Key Setup Required":"Launch VS Code",iconLeft:(0,O.tZ)(hk.Z,{}),css:hz.launchVSCodeButton,disabled:t,onClick:function(){(0,lC.j)(lC.U3.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane"}),r()}}),(0,O.tZ)(rU.u,{isOpen:o,onRequestClose:a,centered:!0,children:(0,O.tZ)(h_.Z,{onConfirm:i})})]})}function hV(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort,i=(0,hI.Z)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(n,"@").concat(t);return(0,O.BX)(eb.Tg,{css:hz.connectInstructions,elevated:!0,children:[(0,O.BX)(V.G,{css:hz.connectHeader,children:[(0,O.tZ)(W.h4,{level:3,children:"Connect manually"}),(0,O.tZ)(W.xv,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,O.tZ)(hT.Z,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,lC.j)(lC.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function hH(e){var t=e.onPurchaseComplete,n=e.org,r=e.sshAuthz,i=(0,L._)((0,Q.useState)(!1),2),o=i[0],a=i[1];return r.code===a$.RO.RequiresActiveSubscription&&(null==n?void 0:n.type)!==a$.a4.Team?(0,O.BX)(V.G,{css:hz.requireSubscription,children:[(0,O.BX)(W.h4,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",hG.we," Members."]}),(0,O.BX)(W.xv,{children:["With SSH, you can access your Repl's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,O.tZ)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,O.tZ)(ey.zx,{onClick:function(){return a(!0)},text:"Join Replit ".concat(hG.we),iconLeft:(0,O.tZ)(hx.Z,{}),colorway:"blurple"}),(0,O.tZ)(hP.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:t,analyticsContext:{upgrade:{context:"cycles_page"}}})]}):(0,O.tZ)(e8.E,{colorway:"warning",text:r.message})}var hz=(0,H.X)({manageKeys:[q.l0.flex.row,q.l0.justify.spaceBetween],tabContainer:[q.l0.colWithGap(8),q.l0.p(8)],requireSubscription:[q.l0.colWithGap(16)],connectEmptyState:[q.l0.colWithGap(8),q.l0.center,q.l0.border({color:q.TV.outlineDefault,width:1,style:"dashed"}),q.l0.borderRadius(4),q.l0.py(24),q.l0.px(12)],connectHeader:[q.l0.colWithGap(4)],connectInstructions:[q.l0.colWithGap(12),q.l0.p(8),q.l0.borderRadius(4)],connectContainer:[q.l0.colWithGap(16),q.l0.py(8)],launchVSCodeButton:[q.l0.borderRadius(8)]});function hj(e){var t=e.legacyKeys,n=e.openFile,r=(0,eY.Z)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,L._)((0,Q.useState)(function(){return!fT.Z.get(i,"boolean")}),2),a=o[0],l=o[1],c=(0,Q.useRef)(!1);return((0,Q.useEffect)(function(){return fT.Z.get(i,"boolean")||l(!0),function(){c.current&&fT.Z.set(i,!0)}},[i]),t&&0!==t.length&&a)?(0,O.tZ)(V.G,{children:(0,O.tZ)(hZ.u,{colorway:"warning",iconLeft:(0,O.tZ)(rg.Z,{}),text:"Don't see your SSH keys here? We're moving from Repl-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){n(hD.J),c.current=!0}})}):null}function hq(e){var t,n,r,i,o,a,l=(o=(0,ep._)({},hM,void 0),eQ.a(hF,o)),c=l.data,s=l.loading,u=(0,L._)((0,Q.useState)(!1),2),d=u[0],f=u[1],p=(0,L._)((0,Q.useState)(0),2),h=p[0],m=p[1],g=(n=(t=(0,L._)((0,Q.useState)(null),2))[0],r=t[1],i=(0,J.Z)().fs,(0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tX.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readFile(hD.J)];case 1:if((e=t.sent()).error===c6.Df.NotFound||e.error===c6.Df.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,hN.Z)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),n),v=(0,hA.Z)();if(s||!v)return(0,O.tZ)(es.Z,{pane:{type:"ssh"},loading:!0,maxWidth:450});var y=v.sshHostname,b=v.sshUser,w=v.sshPort,Z=c&&(null===(a=c.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===c.currentUser.publicSshKeys.__typename?c.currentUser.publicSshKeys.keys:[],x=Z.length>=hL.R,C=0===Z.length;return(0,O.BX)(fV.mQ,{selectedIndex:h,onSelectionChange:m,children:[(0,O.BX)(fV.td,{children:[(0,O.tZ)(fV.OK,{iconLeft:(0,O.tZ)(hx.Z,{}),children:"Connect"}),(0,O.tZ)(fV.OK,{iconLeft:(0,O.tZ)(hC.Z,{}),children:"Keys"})]}),(0,O.BX)(fV.nP,{children:[(0,O.tZ)(fV.x4,{children:(0,O.BX)(V.G,{css:hz.tabContainer,children:[(0,O.tZ)(W.h4,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,O.tZ)(W.xv,{color:"dimmer",children:"SSH allows you to connect to a Repl from another machine or IDE."}),(0,O.BX)(V.G,{css:hz.connectContainer,children:[(0,O.tZ)(hW,{disabled:C}),C?(0,O.BX)(V.G,{css:hz.connectEmptyState,children:[(0,O.tZ)(hC.Z,{size:24,color:q.TV.foregroundDimmest}),(0,O.tZ)(W.xv,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,O.tZ)(ey.zx,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){m(1)}})]}):(0,O.tZ)(hV,{sshHostname:y,sshPort:w,sshUser:b})]}),(0,O.tZ)(hE.s,{})]})}),(0,O.tZ)(fV.x4,{children:(0,O.BX)(V.G,{css:hz.tabContainer,children:[(0,O.BX)(V.G,{css:hz.manageKeys,children:[(0,O.tZ)(W.h4,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,O.tZ)(tO.u,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!x,children:(0,O.tZ)(ey.zx,{text:"Add SSH key",colorway:"primary",size:"small",disabled:x,iconLeft:(0,O.tZ)(nP.Z,{}),onClick:function(){return f(!0)}})})]}),(0,O.tZ)(W.xv,{color:"dimmer",children:"Add authorized keys to configure SSH access to this Repl."}),(0,O.tZ)(hj,{legacyKeys:g,openFile:e.openFile}),(0,O.tZ)(hR.A,{keys:Z}),(0,O.tZ)(rU.u,{isOpen:d,onRequestClose:function(){return f(!1)},centered:!0,children:(0,O.tZ)(hS.r,{onConfirm:function(){return f(!1)}})})]})})]})]})}function hJ(e){var t,n,r,i=(n={variables:{replId:(0,eY.Z)()}},r=(0,ep._)({},hM,n),eQ.a(hX,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,O.tZ)(es.Z,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,O.tZ)(V.G,{children:(0,O.tZ)(W.xv,{children:"This Repl is private and your subscription expired. Please reload for further action."})});var c=o.repl.authorizations.connectUsingSsh;return c.isAuthorized?(0,O.tZ)(hq,(0,ep._)({},e)):(0,O.tZ)(hH,{sshAuthz:c,org:null!==(t=o.repl.org)&&void 0!==t?t:void 0,onPurchaseComplete:function(){l()}})}var hY=U.Dy.Object({type:U.Dy.Literal("ssh")}),h$=(0,H.X)({root:[q.l0.height("100%"),q.l0.overflowY("auto"),$.F3],header:[q.l0.rowWithGap(8)],container:[q.l0.colWithGap(8),q.l0.flex.grow(1)],wrapper:[q.l0.flex.grow(1),q.l0.py(8),q.l0.position.relative]}),hK={Content:function(e){var t=e.options;return(0,O.tZ)(V.G,{css:h$.root,children:(0,O.tZ)(V.G,{css:h$.container,children:(0,O.tZ)(V.G,{css:h$.wrapper,children:(0,O.tZ)(hJ,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,Y.$E)(e),secondary:!0})}})})})})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:q.TV.yellowStrongest,size:t},children:(0,O.tZ)(hw.Z,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(hY,e)}},hQ=n(24126),h0=(0,H.X)({unavailable:[q.l0.p(8)]}),h1=U.Dy.Object({type:U.Dy.Literal("workflows")}),h2={Content:function(e){var t=e.options.isActive;return(0,nb.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0})?(0,O.tZ)(hQ.Z,{isActive:t}):(0,O.tZ)(V.G,{css:h0.unavailable,children:(0,O.tZ)(W.xv,{children:"Workflows is not available."})})},Icon:function(e){var t=e.size;return(0,O.tZ)(dL.Z,{size:t})},getTitle:function(){return"Workflows"},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(h1,e)}},h3=n(97381),h4=n(1716),h8=n(56632),h6=n(63740),h5=function(){var e=(0,L._)((0,Q.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},h7=function(e){var t,n=e.ours,r=e.theirs,i=(0,L._)(h5(),2),o=i[0],a=i[1],l=(0,tF.Z)((t=(0,tM._)(function(e){var t,i,o,a,l,c,s;return(0,tX.Jh)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:n}),null!==r?e.log({max:100,revRange:"".concat(n,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(n)}):null])];case 1:if(t=u.sent(),o=(i=(0,L._)(t,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!==(c=null==a?void 0:a.commits)&&void 0!==c?c:[],ours:null!==(s=null==l?void 0:l.commits)&&void 0!==s?s:[]}]}})}),function(e){return t.apply(this,arguments)}),[n,r,o]);return[(0,Q.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:iu(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},h9=function(){var e,t=(0,J.Z)().git,n=(0,L._)((0,Q.useState)({loading:!1,error:null}),2),r=n[0],i=n[1];return[(0,Q.useCallback)((e=(0,tM._)(function(e){var n,r,o,a,l;return(0,tX.Jh)(this,function(c){switch(c.label){case 0:return n=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,t.pull({mode:ti.Tt.MERGE,allowConflicts:a,experimental_override_remote:{name:n,branch:r}})];case 1:return(l=c.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),t.forceRefresh()),[2]}})}),function(t){return e.apply(this,arguments)}),[t]),r]},me=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x=e.selectedReplId,C=(t=null!=x?x:null,(r=(0,tF.Z)((n=(0,tM._)(function(e){var n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2,{hasStarted:!1,error:null,remote:null}];return[4,rq({git:e,replId:t})];case 1:if((n=r.sent()).error)return[2,{hasStarted:!0,error:n.error}];return[2,{hasStarted:!0,error:null,remote:n.remote}]}})}),function(e){return n.apply(this,arguments)}),[t]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),k=(0,L._)(h9(),2),S=k[0],_=k[1],T=(0,L._)((o=(i=(0,L._)(h5(),2))[0],a=i[1],[(0,tF.Z)((l=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),E=T[0],R=T[1],D=(0,L._)((s=(c=(0,L._)(h5(),2))[0],u=c[1],[(0,tF.Z)((d=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,e.status()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return d.apply(this,arguments)}),[s]),u]),1)[0],I=(0,L._)(h7({ours:"main",theirs:x?rj({replId:x,branch:"main"}):null}),2),B=I[0],A=I[1],P=(0,L._)((p=(f={remoteName:x?rz(x):null,onCompleted:function(){R(),A()}}).remoteName,h=f.onCompleted,g=(m=(0,L._)((0,Q.useState)(!1),2))[0],v=m[1],b=(y=(0,L._)(h5(),2))[0],w=y[1],(0,tF.Z)((Z=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:if(!p)return[2,{error:null}];return v(!0),[4,e.fetch({remote:p})];case 1:return t=n.sent(),v(!1),null==t.error&&h(),[2,t]}})}),function(e){return Z.apply(this,arguments)}),[p,b]),[g,w]),2);return{state:E,status:D,commits:B,isFetching:P[0],refetch:P[1],remote:C,pull:{state:_,doPull:function(e){"Success"===C.state&&S((0,eh._)((0,ep._)({},e),{remote:C.remote.name}))}}}},mt=Q.createContext(null);function mn(){var e=(0,Q.useContext)(mt);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var mr=n(37731),mi=n(46954),mo=n(91174);function ma(){var e=(0,e$._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return ma=function(){return e},e}function ml(){var e=(0,e$._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return ml=function(){return e},e}var mc=(0,eK.Ps)(ma()),ms=(0,eK.Ps)(ml()),mu=n(22583);function md(){var e=(0,e$._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return md=function(){return e},e}function mf(){var e=(0,e$._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return mf=function(){return e},e}function mp(){var e=(0,e$._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return mp=function(){return e},e}function mh(){var e=(0,e$._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return mh=function(){return e},e}function mm(){var e=(0,e$._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return mm=function(){return e},e}var mg=(0,eK.Ps)(md()),mv=(0,eK.Ps)(mf(),mu.$v),my=(0,eK.Ps)(mp(),mv),mb=(0,eK.Ps)(mh(),mc);function mw(){var e=(0,e$._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return mw=function(){return e},e}function mZ(){var e=(0,e$._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return mZ=function(){return e},e}mm();var mx={},mC=(0,eK.Ps)(mw(),mv),mk=(0,eK.Ps)(mZ(),mC),mS=(0,H.X)({replSelector:[q.l0.minWidth(300)],item:[q.l0.display.grid,q.l0.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}],itemDetails:[q.l0.rowWithGap(8),q.l0.align.center]}),m_={username:"Unknown User",image:""},mT=function(e){var t,n,r=e.replId,i=e.onSelect,o=e.selectedReplId,a=(0,tl._)(e,["replId","onSelect","selectedReplId"]),l=(0,L._)((0,Q.useState)(""),2),c=l[0],s=l[1],u=(0,mi.Z)(c,250),d=(0,aZ.Z)().showError,f=(0,L._)((0,Q.useState)({options:[],mainRepl:null,nextCursor:null}),2),p=f[0],h=f[1],m=(t=(0,ep._)({},mx,{variables:{id:r,replsInput:{count:10,filters:{title:{search:u}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var t,n,r,i=e&&"Repl"===e.repl.__typename&&(null===(t=e.repl.project)||void 0===t?void 0:t.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||d("Something went wrong loading Repls - please try again."),h({mainRepl:null!==(n=null==i?void 0:i.mainRepl)&&void 0!==n?n:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!==(r=null==o?void 0:o.items)&&void 0!==r?r:[]})}}),eQ.a(mk,t)),g=m.loading,v=m.refetch,y=m.networkStatus,b=(n=(0,tM._)(function(){var e,t,n,i,o,a;return(0,tX.Jh)(this,function(l){switch(l.label){case 0:if(!(p.nextCursor&&y!==mr.I.fetchMore))return[3,2];return t=p.options,[4,v({id:r,replsInput:{count:10,filters:{title:{search:u}},cursor:p.nextCursor}})];case 1:(i=(n=l.sent())&&"Repl"===n.data.repl.__typename&&(null===(e=n.data.repl.project)||void 0===e?void 0:e.__typename)==="Project"&&"ReplConnection"===n.data.repl.project.repls.__typename?n.data.repl.project.repls:null)||d("Something went wrong loading Repls - please try again."),a=null!==(o=null==i?void 0:i.items)&&void 0!==o?o:[],h((0,eh._)((0,ep._)({},p),{nextCursor:(null==i?void 0:i.pageInfo.hasNextPage)&&i.pageInfo.nextCursor?i.pageInfo.nextCursor:null,options:t.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),w=(0,ef.Z)(function(){var e=p.mainRepl,t=p.options.filter(function(e){return e.id!==r});return""===u&&e&&e.id!==r?[e].concat((0,N._)(t.filter(function(t){return t.id!==e.id}))):t},[p,r,u]),Z=(0,L._)((0,Q.useState)(!1),2),x=Z[0],C=Z[1];(0,Q.useEffect)(function(){if(!x){var e=w.find(function(e){return e.id===o});e&&(C(!0),""===c&&s(e.title))}},[x,c,o,w]);var k=(0,ty.Z)(i),S=(0,Q.useCallback)(function(e){var t=w.find(function(t){return t.id===e});t&&(k.current(t),s(t.title))},[w,k]);return(0,O.tZ)(mo.C,(0,eh._)((0,ep._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){s(e)},onSelectionChange:S,items:w,selectedKey:o,css:mS.replSelector,loading:g,allowsEmptyCollection:!0,onLoadMore:b,emptyMessage:"No Repls found",maxHeight:200},a),{children:function(e){var t,n,r,i;return(0,O.BX)(fz.Hx,{textValue:e.title,children:[(0,O.tZ)(nL.q,{src:null!==(r=null===(t=e.owner)||void 0===t?void 0:t.image)&&void 0!==r?r:m_.image,username:null!==(i=null===(n=e.owner)||void 0===n?void 0:n.username)&&void 0!==i?i:m_.username,size:24}),(0,O.BX)(V.G,{css:mS.item,children:[(0,O.tZ)(W.xv,{children:e.title}),(0,O.BX)(V.G,{css:mS.itemDetails,children:[(0,O.tZ)(W.xv,{children:e.owner?"@".concat(e.owner.username):""}),p.mainRepl&&p.mainRepl.id===e.id?(0,O.tZ)(rF.D,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},mE=n(67839),mR=n(91620).lW,mD=[{"& > span:first-child-of-type":[q.l0.flex.grow(1),q.l0.textAlign.left]},{"& > span":[q.l0.flex.shrink(1)]},q.l0.height("auto"),q.l0.p(8),q.l0.fontWeight.medium,q.l0.backgroundColor.backgroundHigher,q.l0.flex.row,q.l0.align.center,q.l0.justify.spaceBetween,q.l0.overflow("hidden"),q.l0.cursor.pointer],mI=(0,H.X)({buttonFolded:[mD,q.l0.borderRadius(8)],buttonUnfolded:[mD,q.l0.borderRadius(8,8,0,0)],rowContainer:[q.l0.align.center,q.l0.rowWithGap(8),q.l0.position.relative,q.l0.zIndex(1),q.l0.overflow("hidden")],diffContainer:[q.l0.flex.grow(1),q.l0.borderRadius(8)],bodyContainer:[q.l0.borderRadius(0,0,8,8),q.l0.p(8),q.l0.display.flex,q.l0.flex.row,q.l0.flex.wrap,q.l0.align.center,q.l0.justify.center,q.l0.backgroundColor.backgroundDefault,q.l0.border({color:q.TV.outlineDimmer,direction:"bottom"}),q.l0.border({color:q.TV.outlineDimmer,direction:"left"}),q.l0.border({color:q.TV.outlineDimmer,direction:"right"})],bodyLoading:[q.l0.p(8)],noChangesContainer:[q.l0.py(8),q.l0.px(8),q.l0.center,q.l0.width("100%")],innerContainer:[q.l0.display.flex,q.l0.align.center],splitContainer:[q.l0.p(8),q.l0.display.flex,q.l0.flex.row,q.l0.justify.spaceBetween,q.l0.maxWidth("100%"),q.l0.align.center],splitChild:[q.l0.align.center,q.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[q.l0.width(64),q.l0.height(32)]}),mB=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,O.BX)(V.G,{css:n?mI.buttonFolded:mI.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,O.BX)(V.G,{css:[mI.rowContainer,q.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,O.BX)(O.HY,{children:[(0,O.tZ)(F.Z,{path:o}),(0,O.tZ)(W.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,O.tZ)(ew.Z,{}),(0,O.tZ)(F.Z,{path:a}),(0,O.tZ)(W.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],children:i.final.path})]}):(0,O.BX)(O.HY,{children:[(0,O.tZ)(F.Z,{path:a}),(0,O.tZ)(W.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,O.tZ)(W.xv,{multiline:!1,color:"dimmest",css:[q.l0.fontWeight.normal],children:i.final.path})]}),(0,O.tZ)(tx.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,O.BX)(V.G,{css:mI.rowContainer,children:[(0,O.tZ)(tT,{type:i.status}),(0,O.tZ)(X.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,O.tZ)(tC.Z,{}):(0,O.tZ)(tk.Z,{})})]})]})},mA=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,O.tZ)(tb,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,O.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[ta.p.of(to.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},mP=function(e){return(0,ee.T3)(e)?"media":(0,ee.Mb)(e)?"ot":"binary"},mG=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,O.tZ)(V.G,{css:[{display:"flex",height:"100%"}],children:(0,O.tZ)(tE.A,{content:t,mime:(0,ee.yC)(r)})});case"ot":return(0,O.tZ)(tg.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},mL=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.initial.content===t.final.content)return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,mE.Z)(mR.from(t.initial.content))?"binary":mP(t.initial.filename),o=(0,mE.Z)(mR.from(t.final.content))?"binary":mP(t.final.filename);if("binary"===i||"binary"===o)return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===t.status)switch(o){case"media":return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(V.G,{css:mI.innerContainer,children:(0,O.tZ)(tE.A,{content:t.final.content,mime:(0,ee.yC)(t.final.filename)})})});case"ot":return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,O.tZ)(V.G,{css:mI.noChangesContainer,children:(0,O.tZ)(W.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,O.tZ)(mA,{diff:t,splitOrUnified:n,extensions:r}):(0,O.BX)(V.G,{css:mI.splitContainer,children:[(0,O.tZ)(V.G,{css:mI.splitChild,children:(0,O.tZ)(mG,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,O.tZ)(V.G,{css:mI.splitChild,children:(0,O.tZ)(mG,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},mN=function(e){var t,n=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,L._)((0,Q.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],c=(t=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:if(l((0,eh._)((0,ep._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(n)];case 1:t=i.sent(),l(function(e){return(0,eh._)((0,ep._)({},e),{loading:!1,error:t.error?t.error:null,content:null==t.error?{initial:t.content.base,final:t.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,O.BX)(V.G,{css:mI.diffContainer,children:[(0,O.tZ)(mB,{folded:!a.expanded,setFolded:c,diff:n}),a.expanded?(0,O.BX)(eb.Tg,{css:mI.bodyContainer,elevated:!0,children:[a.error?(0,O.tZ)(e8.E,{colorway:"negative",icon:(0,O.tZ)(rg.Z,{}),text:a.error}):null,a.loading?(0,O.tZ)(V.G,{css:mI.bodyLoading,children:(0,O.tZ)(j.Z,{})}):null,a.content?(0,O.tZ)(mL,{diff:(0,eh._)((0,ep._)({},n),{initial:(0,eh._)((0,ep._)({},n.initial),{content:a.content.initial}),final:(0,eh._)((0,ep._)({},n.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},n.id)};function mO(){return(mO=(0,tM._)(function(e){var t,n;return(0,tX.Jh)(this,function(r){switch(r.label){case 0:return t=e.path,[4,e.fs.readFile(t,{fromDisk:!0})];case 1:if((n=r.sent()).error)return[2,{content:null,error:n.error}];return[2,{content:n.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function mU(e){return mM.apply(this,arguments)}function mM(){return(mM=(0,tM._)(function(e){var t,n,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:if(t=e.file,n=e.fs,r=e.git,"Fs"!==t.type)return[3,2];return[4,function(e){return mO.apply(this,arguments)}({path:t.path,fs:n})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:t.path,revision:t.revision,convertToBase64:(0,ee.T3)(t.path)})]}})})).apply(this,arguments)}function mX(e){return mF.apply(this,arguments)}function mF(){return(mF=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,tX.Jh)(this,function(f){switch(f.label){case 0:return t=e.fs,n=e.git,r=e.base,i=e.head,c=Promise.all,[4,mU({git:n,fs:t,file:i})];case 1:return s=[f.sent()],[4,mU({git:n,fs:t,file:r})];case 2:return[4,c.apply(Promise,[s.concat([f.sent()])])];case 3:if(a=(o=L._.apply(void 0,[f.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!==(u=l.content)&&void 0!==u?u:"",head:null!==(d=a.content)&&void 0!==d?d:""}}]}})})).apply(this,arguments)}(m=P||(P={})).Git="Git",m.Fs="Fs";var mW={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},mV={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function mH(e){switch(e){case ti.hF.UNMODIFIED:return null;case ti.hF.MODIFIED:return ti.yH.MODIFIED;case ti.hF.TYPE_CHANGED:return ti.yH.TYPE_CHANGED;case ti.hF.DELETED:return ti.yH.DELETED;case ti.hF.RENAMED:return ti.yH.RENAMED;case ti.hF.COPIED:return ti.yH.COPIED;case ti.hF.UNTRACKED:case ti.hF.UNMERGED:case ti.hF.ADDED:return ti.yH.ADDED;default:(0,nT.Z)(e)}}var mz=function(e,t){return""===e?t:"".concat(e,"/").concat(t)};function mj(e,t){return t.filter(function(t){var n="".concat(t.final.path,"/").concat(t.final.filename),r="".concat(t.initial.path,"/").concat(t.initial.filename);return n.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}var mq=(0,H.X)({container:[q.l0.colWithGap(16)],topRow:[q.l0.rowWithGap(8),q.l0.align.center,q.l0.justify.spaceBetween],topRowControls:[q.l0.rowWithGap(8)],diffSections:[q.l0.colWithGap(12)],diffs:[q.l0.colWithGap(8)],noChangesContainer:[q.l0.rowWithGap(4),q.l0.align.center]});function mJ(e){var t=e.children,n=e.headerContent;return(0,O.BX)(V.G,{css:mq.container,children:[(0,O.BX)(V.G,{css:mq.topRow,children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Changed Files"}),n]}),t]})}function mY(e){var t,n,r,i,o,a,l,c,s,u=(0,J.Z)(),d=u.fs,f=u.git,p=(0,L._)((0,Q.useState)(""),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)("Split"),2),v=g[0],y=g[1],b=(t={type:"revisionToRevisionDiff",head:e.head,base:e.base},n=(0,eh._)((0,ep._)({},t),{flags:(0,eh._)((0,ep._)({},mW),{nameStatus:!0})}),i=(0,tF.Z)((r=(0,tM._)(function(e){var t,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:return t=function(e){var t,n=e.base,r=null!==(t=e.flags)&&void 0!==t?t:mW,i=["git","diff"];switch(Object.keys(r).forEach(function(e){mV[e]&&i.push(mV[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(n,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",n);break;default:(0,nT.Z)(e)}return i}(n),[4,e.escapeHatchGitExecRead(t.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:ti.aq.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,ef.Z)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,ef.Z)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,t=null!==(e=o.data)&&void 0!==e?e:"",n=(0,ti.qE)(t),r=(0,ti.Bi)(t);return{loading:!1,error:null,data:Array.from(new Set((0,N._)(n).concat((0,N._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var t,n;return{id:(0,ne.v4)(),status:e.type,initial:{filename:(0,ee.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,ee.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path)},final:{filename:(0,ee.UO)(e.path),path:(0,ee.Il)(e.path)}}})}},[o])),w=(0,ef.Z)(function(){var e;return mj(h,null!==(e=b.data)&&void 0!==e?e:[])},[h,b]),Z=(a=(0,tM._)(function(t){return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,mX({git:f,fs:d,base:{type:P.Git,revision:e.base,path:mz(t.initial.path,t.initial.filename)},head:{type:P.Git,revision:e.head,path:mz(t.final.path,t.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return a.apply(this,arguments)}),x=(l=mn().status,c=(0,ef.Z)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,ef.Z)(function(){return c.map(function(e){var t,n,r,i,o=null!==(r=null!==(n=mH(e.type.worktree))&&void 0!==n?n:mH(e.type.index))&&void 0!==r?r:ti.yH.UNKNOWN,a=null!==(i=null===(t=e.source)||void 0===t?void 0:t.path)&&void 0!==i?i:e.path;return{id:(0,ne.v4)(),status:o,initial:{filename:(0,ee.UO)(a),path:(0,ee.Il)(a)},final:{filename:(0,ee.UO)(e.path),path:(0,ee.Il)(e.path)}}})},[c])),C=(0,ef.Z)(function(){return mj(h,x)},[h,x]),k=(s=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){switch(t.label){case 0:return[4,mX({git:f,fs:d,base:{type:P.Git,revision:"HEAD",path:mz(e.initial.path,e.initial.filename)},head:{type:P.Fs,path:mz(e.final.path,e.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return s.apply(this,arguments)});return b.loading?(0,O.tZ)(mJ,{children:(0,O.tZ)(j.Z,{})}):b.error||null==b.data?(0,O.tZ)(mJ,{children:(0,O.tZ)(W.xv,{children:"Something went wrong. Please try another Repl."})}):0===b.data.length&&0===x.length?(0,O.tZ)(mJ,{children:(0,O.BX)(V.G,{css:mq.noChangesContainer,children:[(0,O.tZ)(h6.Z,{}),(0,O.tZ)(W.xv,{children:"No changes to merge"})]})}):(0,O.tZ)(mJ,{headerContent:(0,O.BX)(V.G,{css:mq.topRowControls,children:[(0,O.tZ)(tI,{value:v,onChange:y}),(0,O.tZ)(nB.E,{value:h,onChange:function(e){m(e.target.value)},onClear:function(){m("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,O.BX)(V.G,{css:mq.diffSections,children:[C.length?(0,O.BX)(V.G,{css:mq.diffs,children:[(0,O.tZ)(W.h4,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),C.map(function(e){return(0,O.tZ)(mN,{diff:e,splitOrUnified:v,fetchDiffFileContents:k},e.id)})]}):null,w.length?(0,O.BX)(V.G,{css:mq.diffs,children:[(0,O.tZ)(W.h4,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),w.map(function(e){return(0,O.tZ)(mN,{diff:e,splitOrUnified:v,fetchDiffFileContents:Z},e.id)})]}):null]})})}var m$=function(e){var t=e.selectedRepl,n=e.isMainRepl,r=rj({replId:t.id,branch:"main"}),i="HEAD";return(0,O.tZ)(mY,{base:n?i:r,head:n?r:i})};function mK(){var e=(0,L._)((0,Q.useState)(!1),2),t=e[0],n=e[1],r=(0,J.Z)().fs;return(0,Q.useEffect)(function(){var e=!1,t=r.watchPathStat(".gitignore",{onNewStat:function(t){e||n(!t.exists)},onError:function(){}});return function(){e=!0,t()}},[r]),t?(0,O.tZ)(e8.E,{icon:(0,O.tZ)(lL.Z,{}),text:(0,O.BX)(W.xv,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,O.tZ)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var mQ=(0,H.X)({self:[q.l0.colWithGap(12)]});function m0(e){var t,n=e.selectedRepl,r=(0,tF.Z)((t=(0,tM._)(function(e){var t;return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(t.state!==ti.yG.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return t.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,O.BX)(V.G,{css:mQ.self,children:[(0,O.tZ)(W.h4,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,O.BX)(W.xv,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",n?(0,O.tZ)(sx(),(0,eh._)((0,ep._)({target:"_blank"},(0,p1.aq)(n,{projectPane:!0})),{children:n.title})):"a fork","."]}),i?(0,O.tZ)(e8.E,{icon:(0,O.tZ)(lL.Z,{}),colorway:"negative",text:i}):null]})}var m1=n(37782),m2=n(62699),m3=n(26151),m4=n(88397),m8=n(12467),m6=n(71793);function m5(){var e=(0,e$._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return m5=function(){return e},e}var m7={},m9=(0,eK.Ps)(m5(),m6.C,m6.D);function ge(){return(ge=(0,tM._)(function(e){var t,n,r;return(0,tX.Jh)(this,function(i){switch(i.label){case 0:return t=e.git,n=e.commitMessage,[4,t.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,t.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==ti.yG.DIRTY_INDEX)return[3,4];return[4,t.commit({message:n})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var gt=n(97221),gn=n(34820),gr=(0,H.X)({self:[q.l0.colWithGap(8)],message:[q.l0.rowWithGap(6)],infoIcon:[q.l0.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}});(g=G||(G={})).CannotMerge="CannotMerge",g.NothingToMerge="NothingToMerge",g.OnlyUncommittedChanges="OnlyUncommittedChanges",g.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",g.OnlyCommittedChanges="OnlyCommittedChanges";var gi=function(){var e,t,n=mn(),r=n.commits,i=n.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==ti.y5.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===ti.yG.DIRTY_WORKTREE||i.state===ti.yG.DIRTY_INDEX,a=!!((null==r?void 0:null===(e=r.ours)||void 0===e?void 0:e.length)&&(null==r?void 0:null===(t=r.ours)||void 0===t?void 0:t.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function go(e){var t,n,r,i,o,a,l,c,s,u,d,f,p,h,m,g,v,y,b,w,Z,x,C,k=e.sourceRepl,S=e.destinationRepl,_=e.projectId,T=e.mainReplId,E=e.orgId,R=e.currentUser,D=(0,aZ.Z)().showError,I=(0,aY.U)()("includeUncommittedChanges"),B=(0,L._)((0,Q.useState)(!1),2),A=B[0],P=B[1],G=(0,L._)((n=(t={destinationReplId:S.id,sourceReplId:k.id,onSuccess:function(e){var t=e.didAutoCommit;(0,h4.u)({action:"merge",orgId:E,projectId:_,autoCommitEnabled:t,sourceReplType:k.id===T?"mainRepl":"devRepl",destinationReplType:S.id===T?"mainRepl":"devRepl"})}}).sourceReplId,r=t.destinationReplId,i=t.onSuccess,o=(0,J.Z)().git,a=(0,Q.useRef)(null),c=(l=(0,L._)((0,Q.useState)(!1),2))[0],s=l[1],d=(u=(0,aZ.Z)()).showError,f=u.showConfirm,p=(0,ep._)({},m7,{variables:{id:r}}),h=eQ.a(m9,p),m=(0,Q.useCallback)(function(){if(!h.data)return null;var e=h.data,t=e.repl,n=e.currentUser;if(!n||"Repl"!==t.__typename)return null;if(a.current){if(a.current.replId===t.id&&a.current.currentUserId===n.id)return a.current;a.current.container.close()}var r=(0,m1.ZP)({onUnrecoverableError:function(e){tW.Tb(e,{tags:{projects:!0},extra:{replid:t.id}})}});r.connect({context:(0,m2.U)({repl:t,currentUser:n}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,m8.ZP)({container:r}),o=(0,m3.Z)({container:r,fs:i}),l=(0,m4.ZP)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:t.id,currentUserId:n.id},a.current},[h.data]),(0,Q.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,Q.useCallback)((0,tM._)(function(){var e,t,r,a,l,c,u,p,g,v,y=arguments;return(0,tX.Jh)(this,function(b){switch(b.label){case 0:if(e=(y.length>0&&void 0!==y[0]?y[0]:{autoCommit:!1}).autoCommit,null==(r=(null===(t=h.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?h.data.repl:null))return d("Please try again."),[2];a=r.title,s(!0),b.label=1;case 1:if(b.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return ge.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=b.sent()).error)return d(l.error),[2];b.label=3;case 3:if(!(c=m()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=c.git).getRepositoryState()];case 4:if((p=b.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(p.state!==ti.yG.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,rq({git:u,replId:n})];case 5:if(b.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:rz(n),branch:"main"},allowConflicts:!1,mode:ti.Tt.REBASE})];case 6:if((g=b.sent()).error){switch(g.error){case ti.aq.MERGE_CONFLICT:v="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case ti.aq.DIRTY_WORKTREE:v='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case ti.aq.HEAD_DETACHED:v='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:v='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(v)),[2]}return f("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return b.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return s(!1),[7];case 9:return[2]}})}),[h,m,n,d,f,o,i]),{loading:c}]),2),N=G[0],U=G[1].loading,M=(y=(g={replId:S.id,orgId:E,projectId:_,currentUserId:R.id}).replId,b=g.orgId,w=g.projectId,Z=g.currentUserId,Object.values(null!==(v=(0,gn.RC)({orgId:b,projectId:w})[y])&&void 0!==v?v:{}).filter(function(e){return e.id!==Z})),X=gi(),F="NothingToMerge"===X||"CannotMerge"===X||U,H="Automatic commit for ".concat(k.title);switch(X){case"NothingToMerge":C="You do not have any commits to merge in yet";break;case"CannotMerge":C="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":C="Your changes will be pulled into ".concat(S.title);break;default:(0,nT.Z)(X)}var z=(x=(0,tM._)(function(){return(0,tX.Jh)(this,function(e){switch(e.label){case 0:switch(X){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return D("No changes to merge"),[3,10];case 2:return D("You cannot merge right now"),[3,10];case 3:return[4,N({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,N({autoCommit:!!A&&{message:H}})];case 7:return[4,N({autoCommit:{message:H}})];case 9:(0,nT.Z)(X),e.label=10;case 10:return[2]}})}),function(){return x.apply(this,arguments)});return(0,O.BX)(V.G,{css:gr.self,children:[M.length>0?(0,O.tZ)(e8.E,{icon:(0,O.tZ)(rg.Z,{}),colorway:"orange",text:"".concat(S.title," has active coders (@").concat(M[0].username).concat(M.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,O.tZ)(tO.u,{tooltip:C,isDisabled:null===C,placement:"top",maxWidth:300,children:(0,O.tZ)(ey.zx,{colorway:"primary",text:"Merge changes into ".concat(S.title),disabled:F,onClick:z,loading:U,iconLeft:U?(0,O.tZ)(j.Z,{}):void 0})}),"OnlyUncommittedChanges"===X?(0,O.BX)(V.G,{css:gr.message,children:[(0,O.tZ)(lL.Z,{css:gr.infoIcon}),(0,O.tZ)(W.xv,{color:"dimmer",css:gr.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===X?(0,O.BX)(V.G,{css:gr.message,children:[(0,O.tZ)(rp.X,{id:I,checked:A,onChange:P}),(0,O.tZ)(gt._,{htmlFor:I,children:(0,O.tZ)(W.xv,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,O.tZ)(tO.u,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,O.tZ)(lL.Z,{css:gr.infoIcon})})]}):null]})}var ga=(0,p9.$)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),gl=ga.cssVars,gc=ga.styleTokens,gs=[q.l0.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],gu=(0,H.X)({graph:[q.l0.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,tr._)({},q.nC.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[q.l0.flex.column,q.l0.align.start,q.l0.justify.end,{listStyleType:"none",gridArea:gc["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[q.l0.flex.row,q.l0.py(4),q.l0.rowWithGap(8),{gridArea:gc["segment-grid-area"]}],title:[{gridArea:gc["segment-grid-area"]}],commit:[q.l0.flex.row,q.l0.align.start,q.l0.justify.start,q.l0.pr(8),{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[nD.gU.nofill,q.l0.border({width:0})]}],decoration:[q.l0.position.relative,{height:"100%",width:16}],commitDot:[gs,{backgroundColor:gc["commit-graph-color"]}],commitDotUntracked:[gs,{"&:before":[gs,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(gc["commit-graph-color"])}],border:"2px solid ".concat(q.TV.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:gc["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(gc["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:gc["commit-graph-color"]}}],commitColumn:[q.l0.viewStyle,q.l0.colWithGap(8),q.l0.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:gc["commit-text-foreground"]}],commitDescription:[{color:gc["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[q.l0.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(gc["commit-graph-color"]),borderLeft:"2px solid ".concat(gc["commit-graph-color"]),height:9,width:9}],curveUp:[q.l0.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(gc["commit-graph-color"]),borderRight:"2px solid ".concat(gc["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:gc["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:gc["commit-graph-color"]}],compactLine:[q.l0.height("100%"),q.l0.position.relative,{gridArea:"spacer"},(0,tr._)({},q.nC.min("tabletMin"),{display:"none"})]}),gd=function(e){var t=e.children,n=e.hasLeft,r=e.hasRight;return(0,O.BX)(V.G,{css:gu.graph,children:[t,(0,O.tZ)(gm,{hasLeft:n,hasRight:r}),(0,O.tZ)("div",{css:gu.compactLine,children:(0,O.tZ)("div",{css:gu.decoration,children:(0,O.tZ)("div",{css:gu.fullLine,style:n?(0,tr._)({},gl["commit-graph-color"],q.TV.accentPrimaryDefault):{}})})})]})},gf=function(e){var t,n,r=e.children,i=e.area,o=e.title,a=e.action;if(!Q.Children.count(r))return null;var l="common"===i?(t={},(0,tr._)(t,gl["segment-grid-area"],i),(0,tr._)(t,gl["commit-graph-color"],q.TV.outlineDefault),(0,tr._)(t,gl["commit-text-foreground"],q.TV.foregroundDimmer),(0,tr._)(t,gl["commit-extended-text-foreground"],q.TV.foregroundDimmest),t):(n={},(0,tr._)(n,gl["segment-grid-area"],i),(0,tr._)(n,gl["commit-graph-color"],q.TV.accentPrimaryDefault),(0,tr._)(n,gl["commit-text-foreground"],q.TV.accentPrimaryStrongest),(0,tr._)(n,gl["commit-extended-text-foreground"],q.TV.foregroundDimmest),n);return(0,O.BX)(O.HY,{children:["common"===i?null:(0,O.tZ)(gh,{area:i,children:o}),"common"===i?null:(0,O.tZ)(gp,{area:i,children:a}),(0,O.tZ)(V.G,{style:l,tag:"ol",css:gu.segment,"aria-label":i,children:r})]})},gp=function(e){var t=e.children,n=e.area,r=(0,tr._)({},gl["segment-grid-area"],"action-".concat(n));return(0,O.tZ)(V.G,{style:r,css:gu.action,children:t})},gh=function(e){var t=e.children,n=e.area,r=(0,tr._)({},gl["segment-grid-area"],"title-".concat(n));return(0,O.tZ)(V.G,{style:r,css:gu.title,children:"string"==typeof t?(0,O.tZ)(W.h4,{level:3,variant:"subheadDefault",color:"dimmer",children:t}):t})},gm=function(e){var t=e.hasLeft,n=e.hasRight,r=(0,tr._)({},gl["commit-graph-color"],t?q.TV.accentPrimaryDefault:"transparent"),i=(0,tr._)({},gl["commit-graph-color"],n?q.TV.accentPrimaryDefault:"transparent");return t||n?(0,O.BX)(O.HY,{children:[(0,O.BX)("div",{css:gu.splitLeft,children:[(0,O.BX)("div",{css:gu.decoration,children:[(0,O.tZ)("div",{css:gu.line,"data-line":!0,style:r}),(0,O.tZ)("div",{css:gu.fullLine,"data-full-line":!0,style:r})]}),(0,O.tZ)("div",{css:gu.curveRight,style:i}),(0,O.tZ)("div",{css:gu.sidewaysLine,style:i})]}),(0,O.tZ)("div",{css:gu.splitRight,style:i,children:(0,O.tZ)("div",{css:gu.curveUp})})]}):null},gg=function(e){var t=e.onClick,n=e.children,r=e.className;return t?(0,O.tZ)(ey.Yd,{className:r,onPress:t,css:q.l0.reset.button,children:n}):(0,O.tZ)("div",{className:r,children:n})},gv=function(e){var t=e.message,n=e.description,r=e.type,i=e.onClick;return(0,O.BX)(V.G,{tag:"li",css:gu.commit,"data-interactive":!!i,children:[(0,O.BX)("div",{css:gu.decoration,children:[(0,O.tZ)("div",{css:gu.line}),(0,O.tZ)("div",{css:"working"===r?gu.commitDotUntracked:gu.commitDot})]}),(0,O.BX)(gg,{onClick:i,css:gu.commitColumn,children:[(0,O.tZ)(W.xv,{multiline:!1,css:gu.commitMessage,style:"working"===r?(0,tr._)({},gl["commit-text-foreground"],q.TV.accentPrimaryStronger):{},children:t}),n?(0,O.tZ)(W.xv,{css:gu.commitDescription,children:n}):null]})]})},gy=n(35574),gb=(0,H.X)({input:[q.l0.py(0),q.l0.minHeight(24),q.l0.pl(12)]}),gw=function(){var e,t=(0,J.Z)().git;return(0,Q.useCallback)((e=(0,tM._)(function(e){return(0,tX.Jh)(this,function(n){switch(n.label){case 0:return[4,t.stageFiles({all:!0})];case 1:return n.sent(),[4,t.commit({message:e,allowEmpty:!1})];case 2:return n.sent(),t.forceRefresh(),[2]}})}),function(t){return e.apply(this,arguments)}),[t])},gZ=function(e){var t,n=e.onDone,r=(0,L._)((0,Q.useState)(""),2),i=r[0],o=r[1],a=gw(),l=(0,L._)((0,Q.useState)(!1),2),c=l[0],s=l[1],u=(t=(0,tM._)(function(e){return(0,tX.Jh)(this,function(t){switch(t.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),s(!0),[4,a(i)];case 1:t.sent(),s(!1),t.label=2;case 2:return"Escape"===e.key&&(o(""),n()),[2]}})}),function(e){return t.apply(this,arguments)});return(0,O.tZ)(eg.II,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:c,onBlur:n,css:gb.input})};function gx(){var e=(0,e$._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return gx=function(){return e},e}var gC={},gk=(0,eK.Ps)(gx()),gS=function(){var e=(0,L._)((0,Q.useState)(!1),2),t=e[0],n=e[1];return t?(0,O.tZ)("li",{children:(0,O.tZ)(gZ,{onDone:function(){return n(!1)}})}):(0,O.tZ)(gv,{type:"working",message:"uncommitted changes",onClick:function(){return n(!0)}})},g_=function(e){var t,n,r,i,o,a,l,c,s,u,d,f=(u={variables:{id:e.selectedRepl.id}},d=(0,ep._)({},gC,u),eQ.a(gk,d)).data,p=mn(),h=p.state,m=p.commits,g=(null==h?void 0:h.error)?null:null!==(l=null==h?void 0:h.state)&&void 0!==l?l:null,v=(null==h?void 0:h.error)?null:null!==(c=null==h?void 0:h.type)&&void 0!==c?c:null,y=(null==f?void 0:null===(t=f.repl)||void 0===t?void 0:t.__typename)==="Repl"&&f.repl.title||"Remote",b=v===ti.y5.NORMAL&&g!==ti.yG.CLEAN;if(null==m?void 0:m.error)return(0,O.tZ)(W.xv,{children:m.error});var w=!!(null==m?void 0:null===(n=m.theirs)||void 0===n?void 0:n.length),Z=!!(null==m?void 0:null===(r=m.ours)||void 0===r?void 0:r.length)||b;return(0,O.BX)(gd,{hasLeft:w,hasRight:Z,children:[w?(0,O.tZ)(gf,{area:"left",title:y,children:null==m?void 0:null===(i=m.theirs)||void 0===i?void 0:i.map(function(e){return(0,O.tZ)(gv,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,gy.F)(e.author.date))},e.hash)})}):null,Z?(0,O.BX)(gf,{area:"right",title:"My workspace",children:[b?(0,O.tZ)(gS,{}):null,null==m?void 0:null===(o=m.ours)||void 0===o?void 0:o.map(function(e){return(0,O.tZ)(gv,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,gy.F)(e.author.date))},e.hash)})]}):null,(0,O.tZ)(gf,{area:"common",children:null==m?void 0:null===(a=m.both)||void 0===a?void 0:a.map(function(e){return(0,O.tZ)(gv,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,gy.F)(e.author.date))},e.hash)})})]})},gT=function(e){var t=(0,L._)((0,Q.useState)(function(){return(0,nZ.MT)()}),1)[0];return(0,O.BX)(nx.Provider,{value:t,children:[(0,O.tZ)(rL,{}),(0,O.tZ)(g_,(0,ep._)({},e))]})},gE=(0,H.X)({header:[q.l0.p(8),q.l0.rowWithGap(2),q.l0.border({color:q.TV.outlineDimmest,direction:"bottom"})],headerLeft:[q.l0.rowWithGap(8),q.l0.flex.wrap,q.l0.align.center,{flex:1}],comboBoxAndActions:[q.l0.rowWithGap(8),q.l0.flex.wrap,q.l0.flex.shrink(1)],iconButtonSet:[q.l0.rowWithGap(0),q.l0.align.center],iconButton:[q.l0.color.foregroundDimmer,q.l0.hover(q.l0.color.foregroundDefault)],headerRight:[q.l0.rowWithGap(8),q.l0.pt(4)],swapIcon:[q.l0.color.foregroundDimmest,{rotate:"90deg"}],warnings:[q.l0.colWithGap(12),q.l0.p(8),{"&:empty":q.l0.display.none}],toggle:[q.l0.minWidth(123)],loading:[q.l0.rowWithGap(8),q.l0.justify.center,q.l0.p(8)],buttons:[q.l0.rowWithGap(8)],errorView:[q.l0.rowWithGap(8),q.l0.justify.center],viewSection:[q.l0.px(8),q.l0.py(12),{":not(:last-of-type)":q.l0.border({color:q.TV.outlineDimmest,direction:"bottom"})}]}),gR=function(e){var t=e.selectedRepl,n=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return t?"Loading"===r.state?(0,O.tZ)(j.Z,{}):"Error"===r.state?(0,O.tZ)(W.xv,{children:"Something went wrong, please try again."}):"changes"===i?(0,O.tZ)(m$,{selectedRepl:t,isMainRepl:o}):(0,O.tZ)(gT,{selectedRepl:t,currentRepl:n}):(0,O.tZ)(W.xv,{children:"Select a Repl to compare against your current Repl."})},gD=Q.forwardRef(function(e,t){var n,r,i,o,a,l=e.repl,c=e.project,s=e.openGitPane,u=e.org,d=e.currentUser,f=!!c.mainRepl&&l.id===c.mainRepl.id,p=(0,L._)((0,Q.useState)(f?null:null!==(r=c.mainRepl)&&void 0!==r?r:null),2),h=p[0],m=p[1],g=(0,L._)((0,Q.useState)("changes"),2),v=g[0],y=g[1],b=function(){return y("changes"===v?"commits":"changes")};(0,Q.useEffect)(function(){(0,h4.u)({action:"tabOpened",orgId:u.id,projectId:c.id,tab:v,replType:f?"mainRepl":"devRepl"})},[v,c,u,f]);var w=me({selectedReplId:null!==(i=null==h?void 0:h.id)&&void 0!==i?i:null}),Z=w.isFetching,x=w.refetch,C=w.state,k=w.remote,S=w.pull,_=S.doPull,T=S.state,E=T.error,R=T.loading,D=(null==C?void 0:C.error)?null:null!==(o=null==C?void 0:C.state)&&void 0!==o?o:null;return(0,O.tZ)(mt.Provider,{value:w,children:(0,O.BX)(V.G,{innerRef:t,children:[(0,O.BX)(V.G,{css:gE.header,children:[(0,O.BX)(V.G,{css:gE.headerLeft,children:["changes"===v?(0,O.tZ)(ey.zx,{css:gE.toggle,text:"Changes",iconLeft:(0,O.tZ)(h6.Z,{}),iconRight:(0,O.tZ)(r3.Z,{css:gE.swapIcon}),onClick:b},"toggle"):(0,O.tZ)(ey.zx,{css:gE.toggle,text:"Commits",iconLeft:(0,O.tZ)(tU.Z,{}),iconRight:(0,O.tZ)(r3.Z,{css:gE.swapIcon}),onClick:b},"toggle"),(0,O.tZ)(W.xv,{color:"dimmer",multiline:!0,children:"compared against"}),(0,O.BX)(V.G,{css:gE.comboBoxAndActions,children:[(0,O.tZ)(mT,{"aria-label":"Select a Repl",replId:l.id,selectedReplId:null!==(a=null==h?void 0:h.id)&&void 0!==a?a:null,onSelect:m}),(0,O.BX)(V.G,{css:gE.iconButtonSet,children:[(0,O.tZ)(X.hU,{alt:"Pull",onClick:function(){_({branch:"main"}),(0,h4.u)({action:"pull",orgId:u.id,projectId:c.id,replType:f?"mainRepl":"devRepl"})},disabled:R||f,css:gE.iconButton,children:Z?(0,O.tZ)(j.Z,{}):(0,O.tZ)(oe.Z,{})}),h?(0,O.tZ)(h8.I,(0,eh._)((0,ep._)({alt:"Go to ".concat(h.title),target:"_blank"},(0,p1.aq)(h,{projectPane:!0})),{css:gE.iconButton,children:(0,O.tZ)(r0.Z,{})})):null]})]})]}),(0,O.tZ)(V.G,{css:gE.headerRight,children:(0,O.tZ)(X.hU,{alt:"Fetch",onClick:x,disabled:"Success"!==k.state,css:gE.iconButton,children:Z?(0,O.tZ)(j.Z,{}):(0,O.tZ)(rn.Z,{})})})]}),(0,O.BX)(V.G,{css:gE.warnings,children:[E===ti.aq.DIRTY_WORKTREE?(0,O.tZ)(V.G,{css:gE.errorView,children:(0,O.tZ)(e8.E,{colorway:"negative",icon:(0,O.tZ)(rg.Z,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,E===ti.aq.MERGE_CONFLICT?(0,O.BX)(V.G,{css:gE.errorView,children:[(0,O.tZ)(e8.E,{colorway:"negative",icon:(0,O.tZ)(rg.Z,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,O.tZ)(ey.zx,{text:"Resolve Manually",onClick:function(){s(),_({branch:"main",allowConflicts:!0}),(0,h4.u)({projectId:c.id,orgId:u.id,action:"pullWithConflicts",replType:f?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,D===ti.yG.MERGING?(0,O.tZ)(e8.E,{colorway:"primary",text:"Merge in progress"}):null,D===ti.yG.REBASING?(0,O.tZ)(e8.E,{colorway:"primary",text:"Rebase in progress"}):null,(0,O.tZ)(mK,{})]}),f?(0,O.tZ)(V.G,{css:gE.viewSection,children:(0,O.tZ)(m0,{selectedRepl:null!=h?h:void 0})}):null,!f&&h?(0,O.tZ)(V.G,{css:gE.viewSection,children:(0,O.tZ)(go,{destinationRepl:h,sourceRepl:l,projectId:c.id,mainReplId:null===(n=c.mainRepl)||void 0===n?void 0:n.id,orgId:u.id,currentUser:d})}):null,(0,O.tZ)(V.G,{css:gE.viewSection,children:(0,O.tZ)(gR,{currentRepl:l,selectedRepl:h,remoteResult:k,isMainRepl:f,tab:v})})]})})});function gI(){var e=(0,e$._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return gI=function(){return e},e}var gB={},gA=(0,eK.Ps)(gI(),mb,my,mg,ms),gP=n(9929),gG=n(49205),gL=n(73781),gN=(0,H.X)({container:[q.l0.p(8)],loading:[q.l0.rowWithGap(8),q.l0.justify.center,q.l0.p(16)]});function gO(e){var t,n,r,i=e.isActive,o=e.performPaneOperation,a=(0,gG.Do)(gL.V.id,gL.o.ProjectPane),l=(0,eY.Z)(),c=(0,gP.B)(),s=(t=(0,ep._)({},gB,{variables:{id:l}}),eQ.a(gA,t)),u=s.data,d=s.loading,f=s.error,p=(null==u?void 0:u.repl.__typename)==="Repl"?u.repl:null,h=(null==u?void 0:u.currentUser)?u.currentUser:null,m=(null==p?void 0:null===(n=p.project)||void 0===n?void 0:n.__typename)==="Project"?p.project:null,g=(null==m?void 0:null===(r=m.org)||void 0===r?void 0:r.__typename)==="Org"?m.org:null,v=(0,aZ.Z)().showError,y="error"===c.state?c.error:null;return((0,Q.useEffect)(function(){y&&v(y)},[v,y]),lb(i),d||"loading"===c.state)?(0,O.tZ)(V.G,{css:gN.loading,children:(0,O.tZ)(j.Z,{})}):g&&m?!f&&p&&h?(0,O.tZ)(gD,{ref:a,repl:p,project:m,org:g,openGitPane:function(){return o({operation:"open",pane:{type:"git"}})},currentUser:h}):(0,O.tZ)(V.G,{css:gN.container,children:(0,O.tZ)(W.xv,{children:"Something went wrong, please try again."})}):(0,O.tZ)(V.G,{css:gN.container,children:(0,O.tZ)(W.xv,{children:"This Repl is not a project!"})})}var gU=U.Dy.Object({type:U.Dy.Literal("project")}),gM={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,O.tZ)(gO,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,O.tZ)(h3.Z,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Repls in the Project",category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(gU,e)}},gX=U.Dy.Object({type:U.Dy.Literal("devdocs")}),gF={Content:function(e){return(0,O.tZ)("iframe",{title:"DevDocs",height:"100%",src:"https://devdocs.io"})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.foregroundDimmer,size:t},children:(0,O.tZ)(sv.Z,{})})},getTitle:function(){return"DevDocs"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Documentation for common software platforms & APIs",category:$.hc.Other,decode:function(e){return M.B4.Decode(gX,e)}},gW=n(8366),gV=n(23005),gH=n(73452),gz=n(37633),gj=(0,H.X)({terminalWrapper:[q.l0.display.flex,q.l0.height("100%"),q.l0.p(4),q.l0.borderRadius(4)],terminal:[q.l0.width("100%"),q.l0.height("100%"),{"& .xterm":[q.l0.borderRadius(4)]}]});function gq(e){var t=e.workflowRunState,n=e.currentUserId,r=e.performPaneOperation,i=(0,J.Z)().fs,o=(0,Q.useId)(),a=(0,gz.f)(),l=t.runId,c=t.tasks.findIndex(function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.task)==="shell.exec"}),s=(0,uG.U)(function(e){return function(){return e.workflows.connectToTask.stream({runId:l,taskIdx:c,userId:n,processViewId:o})}},[n,o,l,c]),u=(0,uG.U)(function(e){return function(){return e.workflows.disconnectFromTask.rpc({runId:l,taskIdx:c,userId:n,processViewId:o})}},[l,c,n,o]),d=(0,Q.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,$.Dp)(e),data:e}})},[r]),f=(0,Q.useCallback)(function(e,t){r({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[r]),p=(0,L._)((0,uC.Z)({openFile:d,openWebview:f,listFiles:i.listFiles}),2),h=p[0],m=p[1],g=(0,Q.useRef)(!1),v=(0,Q.useRef)(null);return(0,Q.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e,t,n,r,i,o,a,l,c,u,d;return(0,tX.Jh)(this,function(f){switch(f.label){case 0:if(g.current||!h||!s)return[2];return[4,s()];case 1:n=(t=L._.apply(void 0,[f.sent(),2]))[0],r=t[1],g.current=!0,v.current=n,null===(e=v.current)||void 0===e||e.push({$kind:"resize",size:h.getSize()}),h.clear(),i=!1,o=!1,f.label=2;case 2:f.trys.push([2,7,8,13]),l=(0,uI._)(r),f.label=3;case 3:return[4,l.next()];case 4:if(!(i=!(c=f.sent()).done))return[3,6];if(!(u=c.value).ok){if("UNEXPECTED_DISCONNECT"===u.payload.code||"NO_MATCHING_TASK_STATE"===u.payload.code)return[3,6];throw Error("[".concat(u.payload.code,"] ").concat(u.payload.message))}"output"===u.payload.$kind&&h.write(u.payload.chunk),f.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return d=f.sent(),o=!0,a=d,[3,13];case 8:if(f.trys.push([8,,11,12]),!(i&&null!=l.return))return[3,10];return[4,l.return()];case 9:f.sent(),f.label=10;case 10:return[3,12];case 11:if(o)throw a;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){g.current=!1}},[s,h]),(0,Q.useEffect)(function(){return function(){null==u||u()}},[u]),(0,O.tZ)(V.G,{css:gj.terminalWrapper,style:{background:null==a?void 0:a.background},children:(0,O.tZ)(V.K.div,{css:gj.terminal,ref:m})})}function gJ(e){var t=e.workflowName,n=e.performPaneOperation,r=(0,pc.QF)(),i=(0,uF.x)(),o=(0,Q.useMemo)(function(){if(!r)return null;var e=Object.values(r).filter(function(e){return e.workflow.name===t});return 0===e.length?null:e.sort(function(e,t){return t.startTime-e.startTime})[0]},[t,r]);return o&&i?(0,O.tZ)(gq,{workflowRunState:o,currentUserId:i.id,performPaneOperation:n}):null}var gY=(0,H.X)({root:[q.l0.height("100%"),q.l0.colWithGap(4)],resultWrapper:[q.l0.height("100%"),q.l0.p(8),q.l0.colWithGap(8)],resultInner:[q.l0.flex.growAndShrink(1),q.l0.borderRadius(4),q.l0.backgroundColor.blurpleDimmest,q.l0.border({color:q.TV.blurpleDefault})],scroll:[q.l0.height("100%"),q.l0.overflowY("auto"),{scrollBehavior:"smooth",scrollSnapType:"y mandatory"}]});function g$(e){var t=e.performPaneOperation,n=(0,iN.nU)();return(0,O.tZ)(V.G,{css:gY.scroll,children:null==n?void 0:n.map(function(e,r){return(0,O.tZ)(gV.c,{eventId:e,isLast:r===n.length-1,performPaneOperation:t},e)})})}function gK(e){var t=e.children;return(0,O.BX)(V.G,{css:gY.resultWrapper,children:[(0,O.tZ)(W.xv,{variant:"headerDefault",children:"Plan Results"}),(0,O.tZ)(V.G,{css:gY.resultInner,children:t})]})}function gQ(e){var t=e.result,n=e.performPaneOperation,r=(0,J.Z)(),i=r.container,o=r.ports,a=(0,ua.bg)(o),l=(0,Q.useCallback)(function(e){n({operation:"open",pane:e})},[n]),c=(0,Q.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);if("website"===t.resultType){var s=(0,gH.Cl)({port:t.websitePort,portType:"local"},a);return(0,O.tZ)(gK,{children:(0,O.tZ)(gH.U8,{initialPort:null!=s?s:80,initialPath:t.websiteRoute,openPane:l,openNetworkingTool:c,ports:o,container:i})})}return"shell_command"===t.resultType?(0,O.tZ)(gK,{children:(0,O.tZ)(gJ,{workflowName:t.shellCommandWorkflowName,performPaneOperation:n})}):null}function g0(e){var t=e.performPaneOperation,n=(0,iN.T9)();return n?(0,O.tZ)(V.G,{css:gY.root,children:(0,O.tZ)(gQ,{result:n.data,performPaneOperation:t},n.id)}):(0,O.tZ)(V.G,{css:gY.root,children:(0,O.tZ)(g$,{performPaneOperation:t})})}var g1=U.Dy.Object({type:U.Dy.Literal("agentProgress")}),g2={Content:function(e){return(0,O.tZ)(g0,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var t=e.size;return(0,O.tZ)(e9.Pd.Provider,{value:{color:te.TV.blurpleStrongest,size:t},children:(0,O.tZ)(gW.Z,{})})},getTitle:function(){return"Progress"},category:$.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(g1,e)}},g3=n(60615);function g4(){return{codeEditor:eo.D,webview:fe.R,media:sc,binary:er,pedit:sK,vnc:d9,unitTests:dK,adminPanel:pg,runnerOutput:s5.G,shell:uK,dependencies:p0,envEditor:nv,draw:nf,git:lZ,diff:t0,history:cq,database:tn,neon:sp,markdown:sa,ssh:hK,ghostwriterChat:hb,problems:s6,networking:sN,objectStorage:sX,workflows:h2,project:gM,devdocs:gF,agentProgress:g2,integrations:g3._}}},58988:function(e,t,n){n.d(t,{Qk:function(){return d},el:function(){return u}});var r=n(27387),i=n(96583),o=n(75271),a=n(49853),l=n(6038),c=n(83960),s=(0,a.cn)(!1),u=function(e){var t=(0,l.$X)(s);(0,o.useEffect)(function(){return e.watch(function(e){var n,r;if(e.error){if("NOT_FOUND"===e.error){t(!0);return}t(!1)}t(!(null===(r=e.config)||void 0===r?void 0:null===(n=r.autoSave)||void 0===n?void 0:n.disabled))})},[e,t])},d=function(){return(0,l.Hg)(s)};(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.updateDotReplit([(0,c.Bn)(!t)])];case 1:return[2,n.sent()]}})})},50938:function(e,t,n){n.d(t,{T:function(){return o},u:function(){return a}});var r=n(6038),i=(0,n(49853).cn)(null);function o(){return(0,r.$X)(i)}function a(){return(0,r.Hg)(i)}},66610:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(49853),i=n(75271),o=n(6038),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)(function(){return e(!0)},[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)(function(){n.current||(n.current=!0,t(e))},[t,e])}},21289:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(49853),i=n(6038),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},69536:function(e,t,n){n.d(t,{Nd:function(){return N},OY:function(){return G},Li:function(){return U},bB:function(){return L},BV:function(){return P}});var r=n(66626),i=n(63257),o=n(49853),a=n(25949),l=n(65559),c=n(6038),s=n(14118),u=n(16155),d=n(79685),f=n(42965),p=n(59978),h=n(42564),m=n(48424),g=n(93371),v=n(21285),y=n(85983),b=n(7391),w=n(75271),Z=n(82098),x=n(41733),C=n(21262),k=n(71440),S=n(9122);function _(){var e=(0,C._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return _=function(){return e},e}function T(){var e=(0,C._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,k.Ps)(_()),D=(0,k.Ps)(T(),R),I=(0,o.cn)([]),B=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows","integrations"],A=["ghostwriterChat","deployments"];function P(){return(0,c.Hg)(I)}function G(){return(0,c.XD)(I)}function L(){var e,t,n,i,o,l,C,k=(0,c.$X)(I),_=(o=(null==(i=(t={variables:{replId:(0,u.Z)()}},n=(0,x._)({},E,t),S.a(D,n)).data)?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:o,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},T=_.repl,R=_.currentUser,P=(0,b.useRouter)(),G=(0,f.T3)(),L=(0,s.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),N=(0,s.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),O=!!(null==T?void 0:null===(C=T.authorizations)||void 0===C?void 0:null===(l=C.viewDeploymentConfig)||void 0===l?void 0:l.isAuthorized),U=(0,s.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),M=(0,s.P5)({controlName:"flag-object-storage-pane"}),X=(0,s.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0}),F=(0,s.P5)({controlName:"flag-doc-your-devs"}),W=(0,s.P5)({controlName:"flag-integrations-pane-experiment"}),V=(0,h.J)().hasProject,H=(0,g.cR)(),z=(0,m.Z)().language,j=(0,v.Z)().isTutorial,q=(0,p.I)().configs.some(function(e){return"nix"!==e.id}),J=(0,Z.WG)(),Y=(null==R?void 0:R.isAdmin)||!!P.query.debug,$=(0,a.Se)(),K=(0,d.T)();(0,w.useEffect)(function(){var e=G&&(null==T?void 0:T.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(T&&R){var t=!K,n=!K,i=N||!K&&L,o=[[{type:"shell"},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},t],[{type:"runnerOutput"},!K],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"debugger"},!0],[{type:"tutorial"},j],[{type:"database"},n],[{type:"neon"},i],[{type:"replAuth"},q],[{type:"unitTests"},null!==z],[{type:"preferences"},!0],[{type:"adminPanel"},Y],[{type:"deployments"},O],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},H],[{type:"problems"},U],[{type:"networking"},!0],[{type:"objectStorage"},M],[{type:"workflows"},X],[{type:"project"},V],[{type:"devdocs"},F],[{type:"integrations"},W]];if(G){var a=T.workspaceCta===y.Sy.Submit||T.workspaceCta===y.Sy.Resubmit;o.push([{type:"submitEduRepl"},a])}var l=!0,c=!1,s=void 0;try{for(var u,d=J[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o.push([{type:"extension",data:{extensionId:f.extension.extensionId,installationId:f.extension.installationId,name:f.name||f.extension.manifest.name,icon:f.icon||f.extension.manifest.icon,baseUrl:f.extension.baseUrl,path:f.handler}},!0])}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var p=!0,h=!1,m=void 0;try{for(var g,v=o[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=(0,r._)(g.value,2),w=b[0];b[1]&&(!G||B.includes(w.type))&&e.push(w)}}catch(e){h=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw m}}k(e.map(function(e){return{title:$.getTitle(e),pane:e}}).sort(function(e,t){return A.includes(e.pane.type)?-1:A.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane}))}},[k,G,T,R,q,z,N,L,j,Y,O,H,U,J,$,M,X,K,V,F,W])}var N=8,O=(0,o.cn)(function(e){var t=Array.from(e(l.Yn).values()).flat(),n=e(l.LX),r=(0,i._)(t).concat((0,i._)(n)).sort(function(e,t){return t.lastActiveAt-e.lastActiveAt}),o=[],c=!0,s=!1,u=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=function(){var e=d.value;return o.length===N?"break":(0,a.RX)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(t){return t.type===e.pane.type})&&o.push(e.pane))}();if("break"===p)break}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return o});function U(){return(0,c.yL)(O)}},76848:function(e,t,n){n.d(t,{G8:function(){return I},mj:function(){return A},Fq:function(){return R},am:function(){return E},iM:function(){return H},gG:function(){return F},mh:function(){return en},nR:function(){return S},IV:function(){return V},IP:function(){return z},uL:function(){return Q},Vg:function(){return M},sA:function(){return et},xI:function(){return T},lP:function(){return D},DW:function(){return X},e8:function(){return U},D:function(){return O},Oo:function(){return C},QF:function(){return G},s2:function(){return $}});var r=n(27387),i=n(41733),o=n(96583),a=n(21781),l=n(49853),c=n(6038),s=n(75271),u=n(31417),d=n(66626),f=n(40703),p=n(80951),h=n(41974),m=n(29043),g=n(81202),v=n.n(g),y=n(42943),b=n.n(y),w=n(67827),Z=n(1053),x=(0,l.cn)(void 0);function C(){return(0,c.Hg)(x)}var k=(0,l.cn)(function(e){return void 0===e(x)});function S(){return(0,c.Hg)(k)}var _=(0,l.cn)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,h.Uy)(e(x),n);return t(x,i),r.persist&&e(K).persist(),i});function T(){var e=(0,c.$X)(_);return(0,s.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e?void 0:null===(r=e.workflow)||void 0===r?void 0:r[t];i&&n(i)},{persist:r})},[e])}function E(){var e=(0,c.$X)(_);return(0,s.useCallback)(function(t){return e(function(e){var n;null==e||null===(n=e.workflow)||void 0===n||n.splice(t,1)},{persist:!0})},[e])}function R(){var e=T();return(0,s.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function D(){var e=T();return(0,s.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function I(){var e=T();return(0,s.useCallback)(function(t){return e(t,function(e){var t,n=null!==(t=e.tasks[e.tasks.length-1])&&void 0!==t?t:{};e.tasks.push(n?(0,i._)({},n):{task:"shell.exec",args:"ls"})})},[e])}var B=(0,l.cn)(null,function(e,t,n){var r=t(_,function(e){if(void 0===e)return{workflow:[n]};e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return b()(null==r?void 0:r.workflow),r.workflow.length-1});function A(){return(0,c.$X)(B)}var P=(0,l.cn)(void 0);function G(){return(0,c.Hg)(P)}var L=(0,l.cn)(function(e){var t,n=e(x);return null!==(t=null==n?void 0:n.workflow)&&void 0!==t?t:[]}),N=(0,p.kv)(L,function(e){var t;return null!==(t=null==e?void 0:e.map(function(e,t){return t}))&&void 0!==t?t:[]},v());function O(){return(0,c.Hg)(L)}function U(){return(0,c.Hg)(N)}function M(e){var t,n;return(0,c.Hg)((t=e.workflowIndex,n=e.taskIndex,(0,s.useMemo)(function(){return(0,p.kv)(L,function(e){var r;return e?null===(r=e[t])||void 0===r?void 0:r.tasks[n]:null})},[t,n])))}function X(e){return(0,c.Hg)((0,s.useMemo)(function(){return(0,p.kv)(L,function(t){return t?t[e]:null})},[e]))}function F(){return(0,c.XD)(L)}function W(e){var t=(0,s.useMemo)(function(){return(0,l.cn)(function(t){var n,r=null===(n=t(L)[e])||void 0===n?void 0:n.name;if(!r)return null;var i=t(P);return i?function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.workflow.name===t&&n.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}(i,r):null})},[e]);return(0,s.useMemo)(function(){return(0,p.kv)(t,function(e){return e?e[e.length-1]:null})},[t])}function V(e){return(0,c.Hg)(W(e))}function H(e){return(0,c.XD)(W(e))}function z(e){var t;return(0,c.yL)((t=W(e),(0,s.useMemo)(function(){return(0,p.kv)(t,function(e){return(null==e?void 0:e.step)===a.KX.RUNNING})},[t])))}function j(){return(j=(0,r._)(function(e,t){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null===(n=t.workflow)||void 0===n?void 0:n.length)?{path:"workflows",op:"add",value:JSON.stringify(t)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,m.UG)("Error applying update")];return[2,(0,m.Ok)(null)]}})})).apply(this,arguments)}var q=(0,l.cn)(function(e){var t=e(x);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.workflow[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.name===t.runButton)return l}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}),J=(0,p.kv)(q,function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:null}),Y=(0,l.cn)(function(e){var t=e(P);if(!t)return null;var n=Object.values(t).filter(function(e){return e.step===a.KX.RUNNING});return 0===n.length?null:n});function $(){var e=(0,c.Hg)(J),t=(0,c.Hg)(Y),n=null!==t?Z.Ah.RUNNING:Z.Ah.IDLE,r=(0,w.U)(function(t){return function(){return!!e&&t.workflows.runWorkflow.rpc({workflowId:e})}},[e]),i=(0,w.U)(function(e){return function(){null==t||t.forEach(function(t){e.workflows.stopRun.rpc({runId:t.runId})})}},[t]);return null!==t||null!==e?{run:r,stop:i,step:n}:null}var K=(0,l.cn)({persist:(0,r._)(function(){return(0,o.Jh)(this,function(e){return[2,(0,m.Ok)(null)]})})});function Q(){var e=(0,c.XD)(K);return(0,s.useCallback)(function(){return(0,e().persist)()},[e])}var ee=(0,l.cn)(!1);function et(e){var t=(0,c.$X)(ee);(0,s.useEffect)(function(){t(e)},[t,e]),(0,s.useEffect)(function(){return function(){t(!1)}},[t,e])}function en(e){var t,n,i,a,l=e.dotReplit,p=(0,c.XD)(x),h=(0,c.$X)(x),g=(0,c.XD)(ee);n=(t={onWorkflowsConfigChange:(0,s.useCallback)(function(e){var t=p();t&&g()||v()(e,t)||h(e||{})},[h,p,g]),onRunStateChange:(0,c.$X)(P)}).onWorkflowsConfigChange,i=t.onRunStateChange,(0,f.C)((a=(0,r._)(function(e,t){var a,l;function c(){return(c=(0,r._)(function(){var t,r,i,a,c,s,f,p,h,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.config.subscribe({})];case 1:r=(t=d._.apply(void 0,[o.sent(),2]))[0],i=t[1],l(i),a=!1,c=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(r),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(p=o.sent()).done))return[3,6];if(!(h=p.value).ok)return[3,5];n(h.payload.config),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),c=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(){var t,n,r,a,c,s,f,p,h,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.runState.subscribe({})];case 1:n=(t=d._.apply(void 0,[o.sent(),2]))[0],r=t[1],l(r),a=!1,c=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(n),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(p=o.sent()).done))return[3,6];if(!(h=p.value).ok)return[3,5];i(h.payload.state),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),c=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(n){switch(n.label){case 0:return a=t.signal,l=t.addCleanup,[4,e.workflows.init.rpc({})];case 1:if(n.sent(),a.aborted)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return s.apply(this,arguments)}()])];case 2:return n.sent(),[2]}})}),function(e,t){return a.apply(this,arguments)}),[n,i]);var y=(0,c.yL)(x),b=(0,c.$X)(K);(0,s.useEffect)(function(){b({persist:(0,r._)(function(){var e;return(0,o.Jh)(this,function(t){return(e=y.current)?[2,function(e,t){return j.apply(this,arguments)}(l,e)]:[2,(0,m.UG)("No config found")]})})})},[l,b,y])}},50900:function(e,t,n){n.d(t,{Z:function(){return d},r:function(){return m}});var r=n(27387),i=n(41733),o=n(66626),a=n(96583),l=n(25403);function c(){return(c=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},e)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}var s=n(1567),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,t,n,r){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,t,n,i){var c,u,d;return(0,a.Jh)(this,function(f){switch(f.label){case 0:return u=(c=(0,o._)((0,l.F)(e-1,!1,t),2))[0],d=c[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,i()];case 1:return[2,null===(e=t.sent())||void 0===e?void 0:e.files]}})}))];case 1:return[2,f.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,c=e.col;return{range:(0,l.b)(d,r,i,t),text:o,activate:function(e,t){(0,s.jh)(e)&&n({path:t,line:a,col:c})}}})]}})})).apply(this,arguments)}var p=/[a-zA-Z0-9_\-.[\]$@()]+/,h='", line ';function m(e,t){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,t){var n,r,o,l,s,d,f,m,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.race([t(),(function(e){return c.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(n=a.sent())||0===n.length)return[2,[]];for(r=[],o=0,l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+t]},s=function(){var t=e[o];return o++,t},d=function(){var t=o;s();for(var n="";/\d/.test(l());)n+=s();if(0===n.length)return o=t,null;if(":"!==l())return{line:parseInt(n,10),col:0};s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o--,{line:parseInt(n,10),col:0}):{line:parseInt(n,10),col:parseInt(r,10)}},f=function(){for(var t=o,n=0;n<h.length;n++)s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o=t,null):{line:parseInt(r,10),col:0}},m=function(){var t=o,r="";for("."===l()&&"/"===l(1)&&(r+=s()+s()),("("===l()||"["===l())&&s();o<e.length;){var a=l();if(p.test(a))r+=s();else if("/"===a){if("/"===r[r.length-1])break;r+=s()}else break}var c={line:1,col:0};if(":"===l()){var m=d();m&&(c=m)}else if(e.substring(o,o+h.length)===h){var g=f();g&&(c=g,t--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&n.indexOf(r.substring(2))>=0&&(r=r.substring(2),t+=2);var v=r.replace(u,"$2").replace(/^\.?\//,"").trim();return v&&n.find(function(e){return e===v||e.substring(e.lastIndexOf("/")+1)===v})?(0,i._)({file:v,from:t,to:o},c):null};o<e.length;)(g=m())?r.push(g):s();return[2,r]}})})).apply(this,arguments)}},25403:function(e,t,n){function r(e,t,n,r){var i=n-t;return{start:{x:(t+1)%r.cols,y:e+Math.floor((t+1)/r.cols)},end:{x:(t+i)%r.cols,y:e+Math.floor((t+i)/r.cols)}}}function i(e,t,n){var r,i,o="";do{var a=n.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var c=n.buffer.active.getLine(e+1);r=!!c&&c.isWrapped;var s=n.buffer.active.getLine(e);if(!s)break;o+=s.translateToString(!r&&t).substring(0,n.cols),e++}while(r);return[o,l]}n.d(t,{F:function(){return i},b:function(){return r}})},21781:function(e,t,n){n.d(t,{KX:function(){return o},PX:function(){return a},zY:function(){return D}});var r,i,o,a,l=n(41733),c=n(30509),s=n(74044);(r=o||(o={})).NOT_STARTED="NOT_STARTED",r.RUNNING="RUNNING",r.FINISHED="FINISHED",r.FAILED="FAILED",(i=a||(a={})).NOT_STARTED="NOT_STARTED",i.RUNNING="RUNNING",i.FINISHED="FINISHED",i.FAILED="FAILED",i.ERROR="ERROR";var u=s.Dy.Object({task:s.Dy.Literal("dummy.echo"),args:s.Dy.Optional(s.Dy.String())}),d=s.Dy.Object({task:s.Dy.Literal("dummy.echo")}),f=s.Dy.Object({task:s.Dy.Literal("dummy.print"),args:s.Dy.String()}),p=s.Dy.Object({task:s.Dy.Literal("dummy.print")}),h=s.Dy.Object({task:s.Dy.Literal("dummy.sleep"),args:s.Dy.Optional(s.Dy.Number({minimum:0}))}),m=s.Dy.Object({task:s.Dy.Literal("dummy.sleep")}),g=s.Dy.Object({task:s.Dy.Literal("dummy.pass")}),v=s.Dy.Object({task:s.Dy.Literal("dummy.pass")}),y=s.Dy.Object({task:s.Dy.Literal("dummy.fail")}),b=s.Dy.Object({task:s.Dy.Literal("dummy.fail")}),w=s.Dy.Object({task:s.Dy.Literal("shell.exec"),args:s.Dy.String()}),Z=s.Dy.Object({task:s.Dy.Literal("shell.exec"),cgroupPath:s.Dy.Optional(s.Dy.String()),isInRecoveryMode:s.Dy.Optional(s.Dy.Boolean())}),x=s.Dy.Object({task:s.Dy.Literal("workspace.openWebview"),args:s.Dy.Number({minimum:0})}),C=s.Dy.Object({task:s.Dy.Literal("workspace.openWebview")}),k=s.Dy.Object({task:s.Dy.Literal("packager.installForLanguage"),args:s.Dy.String()}),S=s.Dy.Object({task:s.Dy.Literal("packager.installForLanguage"),hasUserFacingOutput:s.Dy.Boolean()}),_=s.Dy.Object({task:s.Dy.Literal("packager.installForAll")}),T=s.Dy.Object({task:s.Dy.Literal("packager.installForAll"),hasUserFacingOutput:s.Dy.Boolean()}),E=s.Dy.Object({task:s.Dy.Literal("workflow.run"),args:s.Dy.String()}),R=s.Dy.Object({task:s.Dy.Literal("workflow.run"),runId:s.Dy.String()}),D=s.Dy.Union([u,y,g,f,h,_,k,w,E,x]),I=s.Dy.Union([d,b,v,p,m,T,S,Z,R,C]),B=s.Dy.Union([s.Dy.Literal("parallel"),s.Dy.Literal("sequential")]),A=s.Dy.Object({name:s.Dy.String(),mode:s.Dy.Optional(B),tasks:s.Dy.Array(D),author:s.Dy.Optional(s.Dy.Union([s.Dy.Literal("agent"),s.Dy.Number()]))});s.Dy.Object({workflows:s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(A))})}),s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(A))});var P={userIds:s.Dy.Array(s.Dy.Number()),metadata:s.Dy.Optional(I)},G=s.Dy.Union([s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("NOT_STARTED")})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("RUNNING"),startTime:s.Dy.Number()})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("FAILED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("FINISHED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("ERROR"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),message:s.Dy.String()}))]);s.Dy.Record(s.Dy.String(),s.Dy.Object({runId:s.Dy.String(),startTime:s.Dy.Number(),endTime:s.Dy.Optional(s.Dy.Number()),step:s.Dy.Enum(o),tasks:s.Dy.Array(G),workflow:A}))},93322:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},77631:function(e,t,n){n.d(t,{BP:function(){return c},Cd:function(){return l},Iw:function(){return a},X$:function(){return p},Ym:function(){return s},dA:function(){return o},gr:function(){return f},jp:function(){return d},lb:function(){return h},q7:function(){return i},su:function(){return u},tq:function(){return m}});var r=n(47363),i="replit.app",o="flag-electric-stems",a="flag-beautiful-currents",l="flag-object-storage-flexible-buckets",c="flag-operation-neptune",s="flag-pandora-kibble",u="flag-zeus-pantheon",d="flag-rainbow-potato";function f(e){switch(e){case"e2-micro":return[.00833,"6.40"];case"e2-small":return[.0166,"12.80"];case"e2-medium":return[.0333,"25.60"];case"n1-custom-1-4096":return[.0687,"52.80"];case"e2-standard-2":return[.1375,"105.60"];case"e2-standard-4":return[.275,"211.20"];default:return[null,null]}}function p(e){switch(e){case"0.25 vCPU / 1 GiB RAM":return"e2-micro";case"0.5 vCPU / 2 GiB RAM":return"e2-small";case"1 vCPU / 4 GiB RAM":return"e2-medium";case"Dedicated 1 vCPU / 4 GiB RAM":return"n1-custom-1-4096";case"Dedicated 2 vCPU / 8 GiB RAM":return"e2-standard-2";case"Dedicated 4 vCPU / 16 GiB RAM":return"e2-standard-4";default:return null}}function h(e){return -1!==r.y.findIndex(function(t){return t.utc.includes(e)})}var m={gce:"Reserved VM",cloud_run:"Autoscale",extension:"Extension",static:"Static",cron:"Scheduled"}},47363:function(e,t,n){n.d(t,{y:function(){return r}});var r=[{value:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{value:"Atlantic Standard Time",abbr:"AST",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{value:"Azores Standard Time",abbr:"AZOST",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{value:"Azerbaijan Standard Time",abbr:"AZT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{value:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{value:"Alaskan Standard Time",abbr:"AKST",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{value:"Argentina Standard Time",abbr:"ART",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{value:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{value:"Arab Standard Time",abbr:"ARST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{value:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{value:"Afghanistan Standard Time",abbr:"AFT",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{value:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{value:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{value:"Galapagos Time",abbr:"GALT",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["Etc/GMT+6","Pacific/Galapagos"]},{value:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Nur-Sultan (Astana)",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{value:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{value:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{value:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{value:"Central Standard Time",abbr:"CST",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Belize","America/Costa_Rica","America/Chicago","America/El_Salvador","America/Guatemala","America/Indiana/Knox","America/Indiana/Tell_City","America/Managua","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Santa_Isabel","America/Tegucigalpa","America/Winnipeg","CST6CDT"]},{value:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{value:"Central Europe Standard Time",abbr:"CEST",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{value:"Central European Standard Time",abbr:"CEST",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{value:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{value:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{value:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{value:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{value:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!1,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{value:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{value:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{value:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{value:"Eastern Standard Time",abbr:"EST",offset:-5,isdst:!1,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto"]},{value:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{value:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kyiv","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{value:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{value:"Greenland Standard Time",abbr:"GDT",offset:-3,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{value:"Greenwich Daylight Savings Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Lisbon",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Lisbon"]},{value:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{value:"Georgian Standard Time",abbr:"GET",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{value:"Greenwich Mean Time",abbr:"GMT",offset:0,isdst:!1,text:"(UTC) Edinburgh, London",utc:["Europe/Isle_of_Man","Europe/Guernsey","Europe/Jersey","Europe/London"]},{value:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{value:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{value:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{value:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Kolkata","Asia/Calcutta"]},{value:"Israel Standard Time",abbr:"IDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{value:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{value:"Japan Standard Time",abbr:"JST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{value:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+02:00) Kaliningrad",utc:["Europe/Kaliningrad"]},{value:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{value:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{value:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{value:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{value:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old",utc:[]},{value:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{value:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{value:"Singapore Standard Time",abbr:"SST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{value:"Moscow Standard Time",abbr:"MSK",offset:3,isdst:!1,text:"(UTC+03:00) Moscow, St. Petersburg, Volgograd, Minsk",utc:["Europe/Kirov","Europe/Moscow","Europe/Simferopol","Europe/Volgograd","Europe/Minsk"]},{value:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{value:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{value:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{value:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{value:"North Asia East Standard Time",abbr:"NAEST",offset:8,isdst:!1,text:"(UTC+08:00) Irkutsk",utc:["Asia/Irkutsk"]},{value:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{value:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{value:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{value:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{value:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Kathmandu"]},{value:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{value:"Pakistan Standard Time",abbr:"PKT",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{value:"Chile Standard Time",abbr:"CLT",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago"]},{value:"Pacific Standard Time",abbr:"PST",offset:-8,isdst:!1,text:"(UTC-08:00) Pacific Standard Time (US & Canada) California",utc:["America/Los_Angeles","America/Tijuana","America/Vancouver","PST8PDT"]},{value:"Paraguay Standard Time",abbr:"PYT",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{value:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{value:"Samara Time",abbr:"SAMT",offset:4,isdst:!1,text:"(UTC+04:00) Samara, Ulyanovsk, Saratov",utc:["Europe/Astrakhan","Europe/Samara","Europe/Ulyanovsk"]},{value:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{value:"SE Asia Standard Time",abbr:"SEAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{value:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{value:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{value:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{value:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{value:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]},{value:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{value:"Turkey Standard Time",abbr:"TRT",offset:3,isdst:!1,text:"(UTC+03:00) Istanbul",utc:["Europe/Istanbul"]},{value:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{value:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{value:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{value:"UTC-11",abbr:"UTC-11",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{value:"UTC-02",abbr:"UTC-2",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{value:"UTC+12",abbr:"UTC+12",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{value:"US Eastern Standard Time",abbr:"UEDT",offset:-5,isdst:!1,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{value:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson","America/Dawson_Creek","America/Hermosillo","America/Phoenix","America/Whitehorse","Etc/GMT+7"]},{value:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{value:"Coordinated Universal Time",abbr:"UTC",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{value:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{value:"Vladivostok Standard Time",abbr:"VLAT",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{value:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{value:"W. Australia Standard Time",abbr:"AWST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{value:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{value:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{value:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{value:"Yekaterinburg Time",abbr:"YEKT",offset:5,isdst:!1,text:"(UTC+05:00) Yekaterinburg",utc:["Asia/Yekaterinburg"]},{value:"Yakutsk Standard Time",abbr:"YST",offset:9,isdst:!1,text:"(UTC+09:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]}]},49135:function(e,t,n){function r(e){return 15113696===e}function i(e){return 777914===e||r(e)||3944703===e||29762144===e}n.d(t,{v4:function(){return r},xm:function(){return i}})},86333:function(e,t,n){n.d(t,{t:function(){return o}});var r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function o(e,t){var n,o=t||{},a=o.signed,l=o.digitsNumber,c=o.isKib,s=o.isKibNotation;if(n=void 0!==a&&a?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var u=void 0===c||c?1024:1e3,d=Math.floor(Math.log(Math.abs(e))/Math.log(u));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(u,d)).toFixed(void 0===l?2:l))).concat((void 0!==s&&s?r:i)[d])}},2553:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},18068:function(e,t,n){n.d(t,{r:function(){return r},u:function(){return i}});var r="flag-ai-modelfarm-usage-gating",i=function(e){return"https://docs.replit.com/replitai/model-farm/".concat(e,"#installation")}},98433:function(e,t,n){n.d(t,{z2:function(){return l}});var r=n(63257),i=n(93322),o=n(3102),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Enables playing a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.vw).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeRepairHighlight:{id:"codeRepairHighlight",name:"AI Code Repair",description:"Highlights language-related errors that AI can fix for you (available for Python files).",type:"boolean",editorPreferencesKey:"codeRepairHighlight",options:a},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:"Code completion provides inline ghost text suggestions while you code.",type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},chatEngine:{id:"chatEngine",name:"AI Chat Engine",description:"The engine used for chat completion.",type:"select",editorPreferencesKey:"chatEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.ce).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},ghostwriterUseAdvancedModel:{id:"ghostwriterUseAdvancedModel",name:"Use Advanced AI Model",description:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity. This setting can also be changed in AI prompt inputs across the workspace.",type:"boolean",editorPreferencesKey:"ghostwriterUseAdvancedModel",options:a},highlightAiChatInDefaultLayout:{id:"highlightAiChatInDefaultLayout",name:"Highlight AI Chat in Default Layout",description:"Highlight AI chat feature(s) in default workspace layout for new Repls.",type:"boolean",editorPreferencesKey:"highlightAiChatInDefaultLayout",options:a}}},47549:function(e,t,n){n.d(t,{F5:function(){return f},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},jW:function(){return d},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d="https://x.com/",f=/\/$/},11702:function(e,t,n){n.d(t,{p:function(){return r}});function r(e){return(null==e?void 0:e.rootOriginReplUrl)==="/@replit/Blank-Repl"}},1051:function(e,t,n){n.d(t,{Eg:function(){return m},UF:function(){return u},mD:function(){return l},r0:function(){return d},v:function(){return h},xi:function(){return p}});var r=n(41733),i=n(30509),o=n(63257),a=n(4713);function l(e){return e.split(".").pop()}function c(e,t){return e.some(function(e){return e.path===t})}function s(e,t){var n=e.findIndex(function(e){return l(e.path)===l(t)});if(-1===n)return e;var a=(0,i._)((0,r._)({},e[n]),{path:t});return(0,o._)(e.slice(0,n)).concat([a],(0,o._)(e.slice(n+1)))}function u(e){var t=[];return e.forEach(function(e){var n=l(e.path),r=a.ZP.allSupportedByPopularity().find(function(e){return e.ext===n});r&&!t.includes(r.key)&&t.push(r.key)}),t}function d(e){var t=e.files,n=e.language,r=a.ZP.getMainFileName(null!=n?n:"python");if(!r)return t;var i=t;return c(t,r)||(i=s(i,r)),"html"!==n||c(t,"style.css")||(i=s(i,"style.css")),"html"!==n||c(t,"script.js")||(i=s(i,"script.js")),i}var f=["GoogleCloudPlatform","googleapis"];function p(e){return f.includes(e)}var h="b3294059-2b61-4b20-abde-f06b61a9a1b3",m="gcloud"},70593:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i,o=n(27387),a=n(98924),l=n(96583);(r=i||(i={})).CHANNEL_OPENED="CHANNEL_OPENED",r.OUTPUT_RECEIVED="OUTPUT_RECEIVED",r.STDERR_RECEIVED="STDERR_RECEIVED",r.STATE_CHANGED="STATE_CHANGED";var c=n(96082),s=n(69829);function u(e){var t,n=e.container,r=(0,c.ZP)(),u=null,d=!1;function f(){return(f=(0,o._)(function(){return(0,l.Jh)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){r.once(i.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}var p="",h="",m=n.openChannel({service:"exec"},function(e){var t=e.channel,n=!1;return t.onCommand(function(e){if(null!=e.output)p+=e.output,r.emit(i.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,r.emit(i.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!n){n=!0;return}r.emit(i.STATE_CHANGED,{state:e.state,outputBuffer:p,stderrBuffer:h}),e.state===s.api.State.Stopped&&(p="",h="")}}),u=t,r.emit(i.CHANNEL_OPENED,t),function(){u=null}});return{request:(t=(0,o._)(function(e){var t,n,r,i,o,c,u,d,p,h;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.env,n=e.args,i=void 0===(r=e.lifecycle)?s.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(o=e.splitStderr)&&o,u=e.noUserEnv,d=(0,a._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return f.apply(this,arguments)}()];case 1:return h=(p=l.sent()).request({exec:{env:t,args:n,lifecycle:i,splitStderr:c,noUserEnv:null!=u&&u}}),i===s.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(p.send({input:d.stdin}),p.send({inputClose:{}})),[2,h]}})}),function(e){return t.apply(this,arguments)}),onOutput:function(e){return r.on(i.OUTPUT_RECEIVED,e),function(){r.off(i.OUTPUT_RECEIVED,e)}},onStderr:function(e){return r.on(i.STDERR_RECEIVED,e),function(){r.off(i.STDERR_RECEIVED,e)}},onStateChanged:function(e){return r.on(i.STATE_CHANGED,e),function(){r.off(i.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},55905:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(27387),i=n(96583),o=n(25731),a=n(58997);function l(e){var t=e.container,n=e.dotReplit,l=(0,o.u)(null),c=(0,o.u)(null),s=(0,o.u)(null),u=(0,o.u)(null),d=null;function f(){return u.current?Promise.resolve(u.current):new Promise(function(e){var t=u.subscribe(function(n){n&&(t(),e(n))})})}return t.openChannel({service:"toolchain"},function(e){var t=e.channel;u.set(t);var n=t.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");c.current=e.nixModulesChanged.modules,s.current=e.nixModulesChanged.modulesV2}});return t.request({toolchainGetRequest:{}}).then(function(e){var t;l.current=(null===(t=e.toolchainGetResponse)||void 0===t?void 0:t.configs)||null}),t.request({nixModulesGetRequest:{}}).then(function(e){var t;c.current=(null===(t=e.nixModulesGetResponse)||void 0===t?void 0:t.modules)||null}),t.request({nixModuleConfigGetRequest:{}}).then(function(e){var t;s.current=(null===(t=e.nixModuleConfigGetResponse)||void 0===t?void 0:t.modules)||null}),function(){n()}}),{configs:l,modules:c,moduleConfig:s,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var t=l.subscribe(function(n){if(t(),null===n)throw Error("Returned toolchain config should not be null");e(n)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,f()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,f()];case 1:return[4,t.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,t.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var t,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null===(t=o.config)||void 0===t?void 0:t.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var t,r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null===(t=o.config)||void 0===t?void 0:t.modules)||[]).filter(function(t){if(e===t)return!1;var n=t.match(/^(.+)\.nix$/);return(n&&n[1])!==e})).length===r.length)return[2];return[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,t){return(0,r._)(function(){var r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null===(r=o.config)||void 0===r?void 0:r.modules)||[]).map(function(n){return e===n?t:n}),[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){return(0,r._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return e=this,[4,f()];case 1:return t=n.sent(),[2,new Promise(function(n){var r=e.configs.subscribe(function(e){e&&(r(),n(void 0))});t.send({nixModulesBuildRequest:{}})})]}})}).apply(this)}}}}}]);
//# sourceMappingURL=1964-91791dc40f023f9d.js.map