!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="aa6c70e3-ccdd-4b9e-a601-861e821c7904",e._sentryDebugIdIdentifier="sentry-dbid-aa6c70e3-ccdd-4b9e-a601-861e821c7904")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"83fc2cd4"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2957],{47:function(e,n,t){"use strict";t.d(n,{he:function(){return a},rc:function(){return c}});var r=t(69829),o=t(14224),i=t(91620).lW;function a(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var o=window.atob(t);if(o.length<64)throw Error("Invalid token: signed part is too short: "+o.length);var a=o.substring(0,o.length-64);return r.api.token.ReplToken.decode(new i(a,"base64"))}function c(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}o.env.PROXY_SUFFIX,o.env.PROXY_FIREWALL_SUFFIX},14495:function(e,n,t){"use strict";t.d(n,{d:function(){return s},u:function(){return c}});var r=t(27387),o=t(66626),i=t(96583),a=t(75271);function c(){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(){return(0,i.Jh)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var n=function(){document.hidden||(document.removeEventListener("visibilitychange",n),e())};document.addEventListener("visibilitychange",n)})]:[2]})})).apply(this,arguments)}function s(){var e=(0,o._)((0,a.useState)(!1),2),n=e[0],t=e[1];return(0,a.useEffect)(function(){var e=function(){t(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),n}},37782:function(e,n,t){"use strict";t.d(n,{ZP:function(){return v},em:function(){return g.e}});var r=t(27387),o=t(96583),i=t(10777),a=t(47),c=t(14495),u=t(93539),s=t(7391),l=t.n(s),f=t(92756),d=t(57997),h=t(68984),g=t(11346);function v(e){var n,t,s=e.onUnrecoverableError,g=e.onFirewallDenied,v=e.ctx,p={register:function(e,r){return t(),window.addEventListener("online",e),window.addEventListener("offline",r),n=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},t},unregister:t=function(){n&&(n(),n=void 0)}},m=p.register,w=p.unregister;return(0,d.ZP)({fetchConnectionMetadata:h.Z,getOverrideClusterMetadata:u.Z,getDotdevUrl:a.rc,logger:i.kg,onUnrecoverableError:s,onFirewallDenied:g,performance:window.performance,preFetchConnectionMetadata:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(window.performance.clearMarks(f.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(f.Iy.fetchConnectionMetadataPageInvisibleEnd),e=i.kg.timeStart(),window.performance.mark(f.Iy.fetchConnectionMetadataPageInvisibleStart),!("/migrateReplToNix"!==l().pathname))return[3,2];return[4,(0,c.u)()];case 1:n.sent(),n.label=2;case 2:window.performance.mark(f.Iy.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),n.label=3;case 3:return[2]}})}),registerReconnectionMonitor:m,unregisterReconnectionMonitor:w,traceCtx:v})}},43257:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(12285),o=t(4384),i=t(91620).lW,a=function(){function e(n,t){if((0,r._)(this,e),this.asEncoding={},this.asBuffer=null,t&&"string"==typeof n)this.asEncoding[t]=n;else if(null==n)this.asBuffer=i.alloc(0);else if(n instanceof i)this.asBuffer=n;else if("string"==typeof n)this.asEncoding.utf8=n;else if(n instanceof ArrayBuffer)this.asBuffer=i.from(n);else{if(n instanceof e)return n;n instanceof Uint8Array?this.asBuffer=i.from(n):"object"==typeof n&&"object"==typeof n.asEncoding&&null!==n.asEncoding&&(n.asBuffer instanceof i||null===n.asBuffer)&&(this.asBuffer=n.asBuffer||null,"string"==typeof n.asEncoding.base64&&(this.asEncoding={base64:n.asEncoding.base64}),"string"==typeof n.asEncoding.utf8&&(this.asEncoding={utf8:n.asEncoding.utf8}))}}var n=e.prototype;return n.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var n=this.toBuffer().toString(e);return this.asEncoding[e]=n,n},n.toJSON=function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}},n.toBuffer=function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var n=this.asEncoding[e];if("string"==typeof n){var t=i.from(n,e);return this.asBuffer=t,t}}return this.asBuffer=i.alloc(0),this.asBuffer},e.from=function(n,t){return new e(n,t)},e.isBuffer=function(n){return n instanceof e},(0,o._)(e,[{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),e}()},17437:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(63257),o=t(61932);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},t=null,i=null,a=null,c=null;if(n.wait<0)throw Error("wait must be 0 or more");if(n.maxWait){if(n.maxWait<0)throw Error("maxWait must be 0 or more");if(n.maxWait<n.wait)throw Error("maxWait must be higher than wait")}function u(){i&&clearTimeout(i),i=null,c=null,t=null,a=null}function s(){if(!t||!i)throw Error("Expected to call debounced function once before flushing");var n=t,o=c;return u(),e.apply(void 0,(0,r._)(o)).then(function(e){return n.resolve(e),e}).catch(function(e){throw n.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,r=Array(e),u=0;u<e;u++)r[u]=arguments[u];if(t){if(!i)throw Error("Did not expect to have deferred and no timeout");clearTimeout(i)}else t=(0,o.Z)(),a=Date.now();return c=r,i=setTimeout(function(){s()},function(){if(!n.maxWait)return n.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(n.maxWait-e,n.wait)}()),t.promise},{isScheduled:function(){return!!(t&&i)},cancel:function(){if(!i||!t)throw Error("Expected to call debounced function once before cancelling");var e=t;u(),e.reject(Error("Debounced function cancelled"))},flush:s})}},24986:function(e,n,t){"use strict";t.d(n,{F:function(){return i}});var r=t(33799),o=t(80403);function i(e,n){var t=[],i=!0,a=!1,c=void 0;try{for(var u,s=(0,r.Hg)(e.toString(),n.toString())[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,f=l.fromA,d=l.fromB,h=l.toA,g=l.toB;f===h&&t.push({from:f,insert:n.slice(d,g)}),d===g&&t.push({from:f,to:h,insert:""}),f!==h&&d!==g&&t.push({from:f,to:h,insert:n.slice(d,g)})}}catch(e){a=!0,c=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw c}}return o.as.of(t,e.length)}},96082:function(e,n,t){"use strict";t.d(n,{JV:function(){return i},ZP:function(){return o}});var r=t(72100);function o(){return new r.EventEmitter}function i(e,n){return function(t){return e.on(n,t),function(){e.off(n,t)}}}},61932:function(e,n,t){"use strict";function r(){var e,n,t={promise:new Promise(function(t,r){e=t,n=r}),resolve:function(n){t.isFulfilled=!0,e(n)},reject:function(e){t.isFulfilled=!0,n(e)},isFulfilled:!1};return t}t.d(n,{Z:function(){return r}})},34366:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(14224);function o(){var e;return(null===(e=window)||void 0===e?void 0:e.location.hostname)==="firewalledreplit.com"||"1"===r.env.FIREWALL_MODE}},95636:function(e,n,t){"use strict";t.d(n,{DW:function(){return g},GK:function(){return l},Rg:function(){return m},T0:function(){return u},eh:function(){return p},nO:function(){return d}});var r=t(27387),o=t(96583),i=t(85633),a=t(51305),c=t(18293),u="repl.it-web",s=i.g.getTracer(u);function l(e,n){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,n){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,d(a.D.active(),e,n)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function d(e,n,t){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,n,t){var r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=s.startSpan(n,void 0,e),a=i.g.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,t(a)];case 2:return[2,o.sent()];case 3:throw o.sent();case 4:return r.end(),[7];case 5:return[2]}})})).apply(this,arguments)}function g(e,n,t){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e,n,t){var r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,t()];case 1:return[2,o.sent()];case 2:r=s.startSpan(n,void 0,e),a=i.g.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,5,6,7]),[4,t(a,r)];case 4:return[2,o.sent()];case 5:throw o.sent();case 6:return r.end(),[7];case 7:return[2]}})})).apply(this,arguments)}function p(e,n){var t=s.startSpan(n,void 0,e),r=i.g.setSpan(e,t);return{span:t,childCtx:r}}function m(e){var n={};return new c.jf().inject(e,n,{set:function(e,n,t){e[n]=t}}),n}},57997:function(e,n,t){"use strict";t.d(n,{em:function(){return v.e},Y8:function(){return S},ZP:function(){return x}});var r=t(27387),o=t(41733),i=t(30509),a=t(98924),c=t(63257),u=t(96583),s=t(89232),l=t.n(s),f=t(487),d=t(25722);function h(e){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e){var n,t,r,o;return(0,u.Jh)(this,function(i){return n=e.client,t=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var i=n.openChannel({service:"exec"},function(n){var a=n.channel,c="";a.onCommand(function(e){e.output&&(c+=e.output)}),a.request({exec:{args:t,env:r,noUserEnv:null!=o&&o}}).then(function(n){if(n.channelClosed){e({error:"Channel closed",output:c||null});return}if("open"===a.status&&i(),n.error){e({error:n.error,output:c||null});return}e({output:c,error:null})})})})]})})).apply(this,arguments)}var v=t(11346),p=t(96082),m=t(19607),w=t(34366),E=t(39121),b=t(95636),y=t(77275),C=t(69829),_=t(49500),S=5900,O=.1>=Math.random();function M(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function x(e){var n,t=e.fetchConnectionMetadata,s=e.getOverrideClusterMetadata,g=e.getDotdevUrl,x=e.logger,T=e.onFirewallDenied,R=e.onUnrecoverableError,D=e.performance,P=e.preFetchConnectionMetadata,k=e.registerReconnectionMonitor,N=e.unregisterReconnectionMonitor,L=e.crosisTimeout,A=e.crosisWebSocketClass,F=e.traceCtx,I=(0,p.ZP)();I.setMaxListeners(1e3);var B=null,W=new f.KU;W.setUnrecoverableErrorHandler(R),T&&(W.onFirewallDenied=T),W.onDebugLog(function(e){if("breadcrumb"===e.type){n="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,d.n_({category:"crosisV6",message:e.message,data:n});var n,t={replid:null==B?void 0:B.repl.id,language:null==B?void 0:B.repl.language};switch(e.message){case"timeout:hit":x.error("crosis connect timeout",t);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},t);x.error("crosis unrecoverable error",r);break;case"status:retrying":var i=e.data,c=i.error,u=(0,a._)(i,["error"]),s=(0,o._)({errorMessage:c.message},t,u);x.error("crosis retrying",s);break;case"status:connecting":case"status:reconnecting":var l=e.message.split(":")[1];x.info("crosis ".concat(l),(0,o._)({},t,"data"in e?e.data:void 0));break;case"websocket:polling fallback":x.info("crosis polling fallback",(0,o._)({},t))}}});var U=window.location.search.includes("debug=1");U&&W.onDebugLog(function(e){"log"===e.type&&_.log("in"===e.log.direction?"-->":"<--",e.log.channel.service,{cmd:e.log.cmd,channel:e.log.channel})});var Z=function(e){var n=void 0;if(void 0!==F&&e.service){var t="";"string"==typeof e.service?t=e.service:B&&(t=e.service(B)),t&&(n=(0,b.eh)(F,"container.".concat(t,".openChannel")).span)}return n};return{logger:x,performance:D,onPortOpened:function(e){return I.on(v.z.PORT_OPEN,e),function(){I.removeListener(v.z.PORT_OPEN,e)}},onPortClosed:function(e){return I.on(v.z.PORT_CLOSE,e),function(){I.removeListener(v.z.PORT_CLOSE,e)}},onToast:function(e){return I.on(v.z.TOAST,e),function(){I.removeListener(v.z.TOAST,e)}},onConnectionStateChanged:function(e){return W.onConnectionStateChange(e)},connect:function(e){var n,d,h=this,g=e.context,p=e.fetchConnectionMetadataExtras,b=e.getMinimumRetryDelayMs,T=(0,a._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);W.getConnectionState()!==v.e.DISCONNECTED&&W.close(),B=g,k(function(){W.getConnectionState()===v.e.DISCONNECTED&&h.connect((0,o._)({context:g,fetchConnectionMetadataExtras:p,getMinimumRetryDelayMs:b},T))},function(){W.getConnectionState()!==v.e.DISCONNECTED&&h.close({expectReconnect:!0})});var N=this,F=(n=(0,r._)(function(e){var n,t,r,i,a,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(n=e.chan0,t=e.gurl,r=e.isFirst,"open"!==n.status)return[2];return i=x.timeStart({gurl:t}),a=setTimeout(function(){x.error("ping with no response",{gurl:t}),N.connect((0,o._)({context:g,fetchConnectionMetadataExtras:p,getMinimumRetryDelayMs:b},T))},3e4),[4,n.request({ping:{}})];case 1:if(c=u.sent().channelClosed,clearTimeout(a),c)return[2];return r?i("latency to pid1",{type:"startup"}):O&&i("latency to pid1",{type:"periodic"}),setTimeout(function(){return F({chan0:n,gurl:t,isFirst:!1})},1e3),[2]}})}),function(e){return n.apply(this,arguments)}),Z={getNextRetryDelayMs:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return Math.max(M.apply(void 0,(0,c._)(n)),b())},context:g,reuseConnectionMetadata:!0,fetchConnectionMetadata:(d=(0,r._)(function(e){var n,r,a,c,l,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if("function"!=typeof P)return[3,2];return[4,P()];case 1:u.sent(),u.label=2;case 2:if("function"!=typeof s)return[3,4];return[4,s()];case 3:return r=u.sent(),[3,5];case 4:r=null,u.label=5;case 5:if(n=r,e.aborted)return[2,{error:f.gS.Aborted}];a=x.timeStart({hasCustomFetch:!!T.fetchConnectionMetadata}),u.label=6;case 6:if(u.trys.push([6,12,,13]),!T.fetchConnectionMetadata)return[3,8];return[4,T.fetchConnectionMetadata()];case 7:return c=u.sent(),[3,11];case 8:return l={asViewer:g.asViewer,replId:g.repl.id,isLoggedIn:!!g.currentUser},[4,(0,y.j)()];case 9:return[4,t.apply(void 0,[o._.apply(void 0,[(l.requestedPid2Version=u.sent(),l.format=C.api.token.ReplToken.WireFormat.PROTOBUF,l.overrideClusterMetadata=n,l),p])])];case 10:c=u.sent(),u.label=11;case 11:return[3,13];case 12:if(d=u.sent(),e.aborted)return[2,{error:f.gS.Aborted}];switch(d&&d.statusCode){case 400:case 401:case 403:throw new E.cb(d.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return x.warn("Retriable error while fetching connection metadata",{statusCode:d.statusCode,originalMessage:d.message}),[2,{error:f.gS.Retriable}]}throw d;case 13:if(e.aborted)return[2,{error:f.gS.Aborted}];return U&&_.log("connecting",c),a("fetched connection metadata"),[2,(0,i._)((0,o._)({},c),{error:null})]}})}),function(e){return d.apply(this,arguments)})};L&&L>0&&(Z.timeout=L),A?Z.WebSocketClass=A:"undefined"==typeof WebSocket&&(Z.WebSocketClass=l()),(0,w.Z)();var J=D.now(),j=0;W.open(Z,function(e){var n,t=e.channel;U&&_.log("connected",{replId:g.repl.id});var r=t.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var n=!!e.portOpen.forwarded,t=e.portOpen,r=t.address,o=t.cmdline,i=t.cgroup,a=t.pid,c=e.portOpen.port||0;if(8284===c||5901===c)return;I.emit(v.z.PORT_OPEN,{port:c,externalPort:e.portOpen.externalPort,isVnc:c===S,isForwarded:n,address:r,cmdline:o,cgroup:i,pid:a});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var u=e.portClose.port||0,s=e.portClose.address;if(8284===u||5901===u)return;I.emit(v.z.PORT_CLOSE,{port:u,externalPort:e.portClose.externalPort,isVnc:u===S,address:s});break;case"protocolError":R(new m.Z("goval panic").setExtra("message",null!==(f=null===(l=e.protocolError)||void 0===l?void 0:l.text)&&void 0!==f?f:"protocol error"));break;case"toast":var l,f,d,h=null===(d=e.toast)||void 0===d?void 0:d.text;if(!h)break;I.emit(v.z.TOAST,h)}});F({chan0:t,gurl:null===(n=W.getConnectionMetadata())||void 0===n?void 0:n.gurl,isFirst:!0}),window.v6ws=W.ws;var o=D.now()-J;return x.info("connected to pid1",{time:o,reconnectCount:j,replid:g.repl.id,language:g.repl.language}),function(e){var n=e.willReconnect;if(r(),!n){B=null;return}J=D.now(),j++}})},openChannel:function(e,n){var t=Z(e);return W.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var n,t;R(new m.Z("goval panic").setExtra("message",null!==(t=null===(n=e.protocolError)||void 0===n?void 0:n.text)&&void 0!==t?t:"protocol error"))}}),o=n(e);return void 0!==t&&t.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return W.getConnectionState()},exec:(0,r._)(function(){var e,n,t,r=arguments;return(0,u.Jh)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,h({client:W,args:n})]})}),execImmediately:(0,r._)(function(){var e,n,t,r=arguments;return(0,u.Jh)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,h({client:W,args:n,noUserEnv:!0})]})}),execWithEnv:(n=(0,r._)(function(e){var n,t,r,o=arguments;return(0,u.Jh)(this,function(i){for(t=Array((n=o.length)>1?n-1:0),r=1;r<n;r++)t[r-1]=o[r];return[2,h({client:W,args:t,env:e})]})}),function(e){return n.apply(this,arguments)}),close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};W.getConnectionState()!==v.e.DISCONNECTED&&W.close(e)},destroy:function(){W.destroy(),I.removeAllListeners(),N()},client:function(){return W},focus:function(){var e=W.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return W.getConnectionMetadata()},getContext:function(){return B},getDotdevUrl:function(){var e=W.getConnectionMetadata();if(!e||W.getConnectionState()!==v.e.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return g(e)},unrecoverableError:function(e,n){W.destroy(),I.removeAllListeners(),R(n?m.Z.wrap(e).setExtras(n):e)}}}},39121:function(e,n,t){"use strict";t.d(n,{Gs:function(){return o},ZP:function(){return f},cb:function(){return d}});var r,o,i=t(12285),a=t(4955),c=t(66626),u=t(14105),s=t(9670);(r=o||(o={})).NotFound="NotFound",r.NotAllowed="NotAllowed",r.ConcurrentReplLimit="ConcurrentReplLimit",r.FirewallDenied="FirewallDenied",r.LanguageTokenDenied="LanguageTokenDenied",r.RequiresRefresh="RequiresRefresh";var l={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","connect to unfirewalled repl from firewall mode":"FirewallDenied","user is required to refresh":"RequiresRefresh"};function f(e){var n=!0,t=!1,r=void 0;try{for(var o,i=Object.entries(l)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var a=(0,c._)(o.value,2),u=a[0],s=a[1];if(e.message.toLowerCase().includes(u))return s}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}return null}var d=function(e){(0,a._)(t,e);var n=(0,s._)(t);function t(e){return(0,i._)(this,t),n.call(this,"user is required to refresh: "+e)}return t}((0,u._)(Error))},11346:function(e,n,t){"use strict";t.d(n,{e:function(){return i.em},z:function(){return o}});var r,o,i=t(487);(r=o||(o={})).CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",r.PORT_OPEN="PORT_OPEN",r.PORT_CLOSE="PORT_CLOSE",r.TOAST="TOAST"},44816:function(){}}]);
//# sourceMappingURL=2957-b42f7b70a1a823fc.js.map