!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5ed5558b-be4b-436c-91e7-2aab95bfed5d",e._sentryDebugIdIdentifier="sentry-dbid-5ed5558b-be4b-436c-91e7-2aab95bfed5d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"83fc2cd4"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6879],{27463:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(85920)}])},47851:function(e,n,t){"use strict";t.d(n,{gC:function(){return f},LK:function(){return d},jJ:function(){return p}});var r=t(3796),i=t(82973),o=t(96949),a=t(79904),l=t(27840),c=t(19349),u=t(7391),s=["100-days-of-python","100-days-of-python-promo","add-guest-new-user","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","incident-20240219-action-required-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast"],d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(i.Z.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,s.includes(t)))return r},f=function(e){var n=e.challenge,t=s.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",i=(0,c.o)(t),d=i.isDone,p=i.isLoading,f=i.setAsDone,h=(0,u.useRouter)();return p?null:(0,r.tZ)(a.zx,{colorway:d?"primary":"positive",onClick:function(){f(),(0,o.j)(o.U3.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.tZ)(l.Z,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},96725:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(96949),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},92371:function(e,n,t){"use strict";t.d(n,{_V:function(){return E},aP:function(){return R}});var r=t(42516),i=t(41733),o=t(30509),a=t(66626),l=t(3796),c=t(47996),u=t(43769),s=t(97427),d=t(22419),p=t(93245),f=t(36809),h=t(63163),v=t(9834),g=t.n(v),m=t(75271),y=t(46134),b=t(15023),Z=t(24766),x=(0,f.X)({self:[h.l0.rowWithGap(8),h.l0.align.center],dot:[h.l0.width(8),h.l0.height(8),{borderRadius:"50%"}],title:[h.l0.flex.grow(1)]}),w=function(e){var n=e.title,t=e.usage,r=e.resourceUsageType,i=e.icon;return(0,l.BX)(p.G,{css:x.self,children:["string"==typeof i?(0,l.tZ)(b.ZP,{size:16,iconUrl:i,alt:n}):i,(0,l.tZ)(Z.xv,{css:x.title,multiline:!1,children:n}),(0,l.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:(0,y.fZ)(t,{resourceUsageType:r,gibsDisplayAsBytes:!0})})]})},_=t(19602),C=t(66791),k=t(2446),S=(0,f.X)({self:[h.l0.height("100%")],empty:[h.l0.height("100%")]}),I=p.K.a;function R(e){return e?"Repl"===e.__typename?e.title:"DeletedRepl"===e.__typename?"Deleted Repl":void(0,C.Z)(e):"Repl"}var E=function(e){var n,t,p=e.color,f=e.resourceUsageType,h=e.section,v=h.grouped,y=h.percentage,b=h.usage,Z=100*y,x=v?h.count:1,E=v||(null===(t=h.repl)||void 0===t?void 0:t.__typename)!=="Repl"?c.$I:(0,u.aq)(h.repl),G=(0,a._)((0,m.useState)(!1),2),P=G[0],D=G[1];return(0,l.tZ)(d.u,{tooltip:v?(0,l.tZ)(w,{title:"+".concat(x," more"),usage:b,resourceUsageType:f}):(0,l.tZ)(w,{title:R(h.repl),usage:b,resourceUsageType:f,icon:(n=h.repl)?"Repl"===n.__typename?n.iconUrl:"DeletedRepl"===n.__typename?(0,l.tZ)(_.Z,{}):void(0,C.Z)(n):(0,l.tZ)(k.Z,{})}),placement:"top",delay:"none",isOpen:P,maxWidth:400,children:function(e,n){return(0,l.tZ)(g(),(0,o._)((0,i._)({legacyBehavior:!0},E),{passHref:!0,children:(0,l.tZ)(I,{tabIndex:-1,onMouseOver:function(){return D(!0)},onMouseLeave:function(){return D(!1)},ref:n,css:S.self,style:(0,r._)({minWidth:"calc(".concat(100*s.$,"%)"),width:"calc(".concat(Z,"% - 0.9px)"),backgroundColor:p},"&:lastOfType",{width:"".concat(Z,"%")})})}))}})}},97427:function(e,n,t){"use strict";t.d(n,{$:function(){return i},D:function(){return r}});var r=t(63163).tX.categorical,i=.0075},69519:function(e,n,t){"use strict";t.d(n,{b:function(){return i}});var r=t(97427),i=function(e,n,t,i){var o=[],a=0;e.forEach(function(e){var n=Math.max(e.percentage,r.$),t=n-e.percentage;0!==t&&(a+=t),o.push({percentage:n,usage:e.usage,adjusted:0!==t,grouped:!1,repl:e.repl})});var l=0===n?0:Math.max(n,r.$);if(l>0){var c=l-n;c>0&&(a+=c),o.push({percentage:l,adjusted:c>0,usage:t,grouped:!0,count:i})}if(a>0){var u=o.filter(function(e){return!e.adjusted}),s=u.length;if(s>0){var d=a/s,p=!0,f=!1,h=void 0;try{for(var v,g=u[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var m=v.value;m.percentage-=d}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}return o}},96326:function(e,n,t){"use strict";t.d(n,{_:function(){return i}});var r=t(66791),i=function(e){switch(e.__typename){case"UsageOverviewUnitPriceSku":return a(e);case"UsageOverviewMatrixPriceSku":return l(e);case"UsageOverviewStaticDeployments":return o(e);default:(0,r.Z)(e)}},o=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(c)}},a=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(s)}},l=function(e){var n=e.replUsageOverview,t=e.usage,r=e.tierType;return{total:t,limit:0,lineItems:n.map(function(e){return u(e,r)})}},c=function(e){var n,t,r;return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,lastDeployedAt:(null===(n=e.usageRepl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(t=e.usageRepl.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?null===(r=e.usageRepl)||void 0===r?void 0:r.hostingDeployment.currentBuild.timeCreated:void 0}},u=function(e,n){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,matrixTier:{label:e.configName,type:n}}},s=function(e){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl}}},37425:function(e,n,t){"use strict";t.d(n,{S:function(){return T}});var r=t(66626),i=t(3796),o=t(6777),a=t(32622),l=t(6065),c=t(86466),u=t(17601),s=t(58532),d=t(41960),p=t(14548),f=t(24766),h=t(93245),v=t(36809),g=t(29737),m=t(53941),y=t(20379),b=t(10055),Z=t(63163),x=t(85983),w=t(75271),_=t(41733),C=t(21262),k=t(71440),S=t(9122);function I(){var e=(0,C._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return I=function(){return e},e}function R(){var e=(0,C._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var E={},G=(0,k.Ps)(I()),P=(0,k.Ps)(R(),G),D=(0,v.X)({wrapper:[Z.l0.noDragRegion],button:[c.gU.nofill,Z.l0.p(4),Z.l0.viewStyle,Z.l0.reset.button,Z.l0.rowWithGap(2),Z.l0.align.center,Z.l0.color.foregroundDefault,Z.l0.cursor.pointer,Z.l0.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:Z.TV.foregroundDefault}}],surface:[Z.l0.borderRadius(8),Z.l0.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[Z.l0.ml(8)],menuItem:[Z.l0.rowWithGap(8),Z.l0.align.center],accountModal:[Z.l0.overflow("auto"),Z.l0.height("100%")],appVersionWrapper:[Z.l0.py(4),Z.l0.px(8),Z.l0.center,Z.l0.border({color:Z.TV.outlineDimmer,width:1,style:"solid",direction:"top"})]});function T(e){var n,t=e.showName,c=(0,r._)((0,w.useState)(!1),2),v=c[0],C=c[1],k=(0,r._)((0,w.useState)(!1),2),I=k[0],R=k[1],G=(n=(0,_._)({},E,void 0),S.a(P,n)).data,T=null==G?void 0:G.currentUser;if(!T)return null;var A=[{label:"Home",icon:(0,i.tZ)(y.Z,{}),onAction:function(){a.X.openExternalUrl("/"),C(!1)}},{label:"Account",icon:(0,i.tZ)(b.Z,{}),onAction:function(){R(function(e){return!e}),C(!1)}},{label:"Log out",icon:(0,i.tZ)(m.Z,{}),onAction:function(){a.X.logout()}}];return(0,i.BX)(h.G,{css:D.wrapper,children:[(0,i.BX)(d.xo,{isOpen:v,onOpenChange:C,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,i.BX)("button",{onClick:function(){C(function(e){return!e})},css:D.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.tZ)(l.q,{size:24,src:(null==T?void 0:T.image)||null,username:(null==T?void 0:T.username)||"",fullName:(null==T?void 0:T.fullName)||"",showRoleBadge:T.userSubscriptionType===x.HP.HackerPro}),t?(0,i.BX)(h.G,{css:D.username,className:"username",children:["@",null==T?void 0:T.username]}):null,(0,i.tZ)(g.Z,{color:Z.TV.foregroundDimmest,size:12})]}),(0,i.BX)(p.Tg,{elevated:!0,css:D.surface,background:"higher",children:[(0,i.tZ)(u.v2,{label:"Account options",onAction:function(e){var n=A[parseInt(e,10)];n&&n.onAction()},children:A.map(function(e,n){return(0,i.tZ)(u.ck,{"aria-label":e.label,children:(0,i.BX)(h.G,{css:D.menuItem,children:[e.icon,(0,i.tZ)(f.xv,{children:e.label})]})},n)})}),(0,i.tZ)(h.G,{css:D.appVersionWrapper,children:(0,i.tZ)(f.xv,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(a.X.getVersion())})})]})]}),(0,i.tZ)(s.u,{isOpen:I,onRequestClose:function(){return R(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:D.accountModal,children:(0,i.tZ)(o.Z,{})})]})}},51648:function(e,n,t){"use strict";t.d(n,{Z:function(){return ev}});var r,i,o,a,l,c=t(41733),u=t(30509),s=t(66626),d=t(63257),p=t(3796),f=t(79585),h=t(65697),v=t(34925),g=t(11682),m=t(46954),y=t(66177),b=t(27001),Z=t(99595),x=t(43038),w=t(1567),_=t(14074),C=t(35574),k=t(15023),S=t(9602),I=t(86466),R=t(17601),E=t(58532),G=t(82922),P=t(24766),D=t(93245),T=t(36809),A=t(82549),B=t(42427),U=t(59261),O=t(4135),M=t(34030),L=t(10578),X=t(2446),W=t(31940),N=t(19602),z=t(90767),F=t(99356),V=t(63163),H=t(96214),j=t(7391),$=t(75271),q=t(65081),Y=t(16738),J=t(21262),K=t(71440),Q=t(9122),ee=t(82303);function en(){var e=(0,J._)(["\n  fragment DesktopReplsListRepl on Repl {\n    id\n    title\n    iconUrl\n    url\n    description\n    isPrivate\n    timeUpdated\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return en=function(){return e},e}function et(){var e=(0,J._)(["\n  query DesktopReplsSearch(\n    $search: String!\n    $after: String\n    $excludeMultiplayer: Boolean\n    $excludeNotDeployed: Boolean\n    $excludePrivate: Boolean\n    $excludePublic: Boolean\n    $excludeOwned: Boolean\n  ) {\n    currentUser {\n      id\n      paginatedReplSearch(\n        search: $search\n        after: $after\n        excludeMultiplayer: $excludeMultiplayer\n        excludeNotDeployed: $excludeNotDeployed\n        excludePrivate: $excludePrivate\n        excludePublic: $excludePublic\n        excludeOwned: $excludeOwned\n      ) {\n        items {\n          id\n          ...DesktopReplsListRepl\n        }\n        pageInfo {\n          hasNextPage\n          nextCursor\n        }\n      }\n    }\n  }\n  ","\n"]);return et=function(){return e},e}function er(){var e=(0,J._)(["\n  mutation DesktopReplsListDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return er=function(){return e},e}var ei={},eo=(0,K.Ps)(en()),ea=(0,K.Ps)(et(),eo),el=(0,K.Ps)(er()),ec=(0,T.X)({rowUnfocused:{backgroundColor:"transparent"},rowFocused:{backgroundColor:I.vb.interactiveBackground}});function eu(e){var n=e.item,t=e.state,r=(0,$.useRef)(null),i=(0,q.F)({node:n},t,r),o=i.rowProps,a=i.gridCellProps,l=i.isSelected;return(0,$.useEffect)(function(){if(l){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({block:"nearest"})}},[l]),(0,p.tZ)(D.K.li,(0,u._)((0,c._)({},o),{ref:r,css:l?ec.rowFocused:ec.rowUnfocused,children:(0,p.tZ)(D.G,(0,u._)((0,c._)({},a),{children:n.rendered}))}))}function es(e){var n=(0,f.n)(e),t=(0,$.useRef)(null),r=(0,Y.c)(e,n,t).gridProps;return(0,p.tZ)(D.K.ul,(0,u._)((0,c._)({},r),{ref:(0,_.l)(t,e.innerRef),children:(0,d._)(n.collection).map(function(e){return(0,p.tZ)(eu,{item:e,state:n},e.key)})}))}var ed=(0,T.X)({container:[V.l0.flex.shrink(1),V.l0.colWithGap(8),V.l0.height("100%")],searchBarWrapper:[V.l0.flex.shrink(0),V.l0.px(8)],replsListWrapper:[V.l0.flex.shrink(1),V.l0.overflowY("scroll")],headerRow:[V.l0.flex.row,V.l0.align.center,V.l0.justify.spaceBetween,V.l0.px(8)],filterContainer:[V.l0.rowWithGap(8),V.l0.center],replListItemWrapper:[I.gU.listItem,V.l0.px(8),V.l0.py(2),V.l0.flex.row,V.l0.align.center,V.l0.justify.spaceBetween],replListItemInner:[V.l0.rowWithGap(8),V.l0.pl(4),V.l0.align.center,V.l0.flex.shrink(1)],replListItemTexts:[V.l0.flex.shrink(1)],replListItemTitle:[V.l0.mb(0),V.l0.truncate],dropdownItem:[V.l0.rowWithGap(8),V.l0.align.center],dropdownDestructiveItem:[V.l0.rowWithGap(8),V.l0.color.accentNegativeStronger,V.l0.align.center],loadingStateWrapper:[V.l0.align.center,V.l0.pt(8),V.l0.pb(12),V.l0.mx(8),V.l0.textAlign.center]});(r=o||(o={})).Fork="Fork",r.Delete="Delete",(a||(a={})).DeleteRepl="DeleteRepl";var ep=[{value:"Fork",label:"Fork",icon:(0,p.tZ)(O.Z,{})},{value:"Delete",label:"Delete",icon:(0,p.tZ)(N.Z,{}),isDestructive:!0}];function ef(e){var n,t,r=e.repl,i=e.onClick,o=(0,v.g)().fork,a=(0,s._)((0,$.useState)(null),2),l=a[0],u=a[1],d=(0,Z.Z)(),f=d.showConfirm,g=d.showError,m="/replEnvironmentDesktop"===(0,j.useRouter)().pathname,y=(0,s._)((n={variables:{id:r.id},onCompleted:function(){f("Repl scheduled for deletion")},onError:function(e){g((0,x.Z)(e.message))},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())}},t=(0,c._)({},ei,n),ee.D(el,t)),1)[0];return(0,p.BX)(p.HY,{children:[(0,p.BX)(D.G,{css:ed.replListItemWrapper,onClick:function(e){return i(r.url,(0,w.jh)(e))},children:[(0,p.BX)(D.G,{css:ed.replListItemInner,children:[(0,p.tZ)(k.ZP,{size:24,iconUrl:r.iconUrl,alt:r.title}),(0,p.BX)(D.G,{css:ed.replListItemTexts,children:[(0,p.tZ)(P.xv,{variant:"text",css:ed.replListItemTitle,multiline:!1,children:r.title}),(0,p.BX)(P.xv,{variant:"small",color:"dimmer",multiline:!1,children:[r.owner?"".concat(r.owner.username," • "):"","edited"," ",(0,C.F)(r.timeUpdated)]})]})]}),m?null:(0,p.tZ)(R.ZE,{icon:(0,p.tZ)(W.Z,{size:16}),"aria-label":"Repl Actions",placement:"bottom-end",cssProps:[{background:"transparent"}],onAction:function(e){switch(e){case"Fork":o();return;case"Delete":u("DeleteRepl");return}},children:ep.map(function(e){return(0,p.tZ)(R.ck,{textValue:e.label,children:(0,p.BX)(D.G,{css:e.isDestructive?ed.dropdownDestructiveItem:ed.dropdownItem,children:[e.icon,(0,p.tZ)(P.xv,{multiline:!1,children:e.label})]})},e.value)})})]}),(0,p.tZ)(E.u,{isOpen:"DeleteRepl"===l,onRequestClose:function(){return u(null)},centered:!0,children:(0,p.tZ)(h.Z,{delete:y,entityType:"Repl",hideModal:function(){return u(null)}})})]})}(i=l||(l={})).All="All",i.ExcludeMultiplayer="ExcludeMultiplayer",i.ExcludeNotDeployed="ExcludeNotDeployed",i.ExcludePrivate="ExcludePrivate",i.ExcludePublic="ExcludePublic",i.ExcludeOwned="ExcludeOwned";var eh=[{value:"All",title:"All",icon:(0,p.tZ)(U.Z,{})},{value:"ExcludeMultiplayer",title:"My Repls",icon:(0,p.tZ)(z.Z,{})},{value:"ExcludeOwned",title:"Shared",icon:(0,p.tZ)(F.Z,{})},{value:"ExcludePrivate",title:"Public",icon:(0,p.tZ)(M.Z,{})},{value:"ExcludePublic",title:"Private",icon:(0,p.tZ)(X.Z,{})},{value:"ExcludeNotDeployed",title:"Deployed",icon:(0,p.tZ)(B.Z,{})}];function ev(e){var n,t,r,i=e.onClick,o=(0,s._)((0,$.useState)(""),2),a=o[0],l=o[1],f=(0,j.useRouter)(),h="/replEnvironmentDesktop"===f.pathname,Z=(0,m.Z)(a,250),x=(0,$.useRef)(null),w=(0,$.useRef)(null),_=(0,$.useRef)(null),C=(0,$.useRef)(null),k=(0,s._)((0,b.Z)("desktop-app-repls-filter","All"),2),I=k[0],E=k[1],T=(0,s._)((0,$.useState)(null),2),B=T[0],U=T[1],O=B?new Set([B]):new Set,M=(n={variables:{search:function(e){if(!e.startsWith("http"))return null;try{var n=new URL(e),t=window.location.origin;if(n.origin!==t)return null;if(g.hD.test(n.pathname)){var r=n.pathname.split("/");if(3!==r.length)return null;return r[2]}if(g.Q7.test(n.pathname)){var i=n.pathname.split("/");if(6!==i.length)return null;return i[i.length-1]}return null}catch(e){return null}}(Z)||Z,excludeOwned:"ExcludeOwned"===I,excludePublic:"ExcludePublic"===I,excludePrivate:"ExcludePrivate"===I,excludeNotDeployed:"ExcludeNotDeployed"===I,excludeMultiplayer:"ExcludeMultiplayer"===I},ssr:!1,notifyOnNetworkStatusChange:!0},t=(0,c._)({},ei,n),Q.a(ea,t)),X=M.data,W=M.loading,N=M.refetch,z=M.fetchMore,F=null==X?void 0:null===(r=X.currentUser)||void 0===r?void 0:r.paginatedReplSearch,V=null==F?void 0:F.pageInfo,q=null==V?void 0:V.nextCursor,Y=null==V?void 0:V.hasNextPage,J=(null==F?void 0:F.items)||[];if(h){var K=f.query.replUrl;if("string"!=typeof K)throw Error("Expected Repl URL");J=J.filter(function(e){return e.url!==K})}var ee=(0,$.useCallback)(function(){q&&!W&&z({variables:{search:Z,after:q},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult;return(null===(t=e.currentUser)||void 0===t?void 0:t.paginatedReplSearch)&&(null===(r=i.currentUser)||void 0===r?void 0:r.paginatedReplSearch)?(0,u._)((0,c._)({},i),{currentUser:(0,u._)((0,c._)({},i.currentUser),{paginatedReplSearch:(0,u._)((0,c._)({},i.currentUser.paginatedReplSearch),{items:(0,d._)(e.currentUser.paginatedReplSearch.items).concat((0,d._)(i.currentUser.paginatedReplSearch.items)),pageInfo:(0,c._)({},i.currentUser.paginatedReplSearch.pageInfo)})})}):e}})},[z,W,q,Z]),en=(0,y.Z)({onLoadMore:ee,rootMargin:"0px 0px 100px 0px"}).targetRef,et=function(e){var n=J.find(function(n){return n.id===e});if(!n)throw Error("Expected matching Repl");i(n.url)};(0,$.useEffect)(function(){var e;null===(e=w.current)||void 0===e||e.focus()},[w]);var er=0===J.length&&W,eo=0===J.length&&!W;return(0,p.BX)(D.G,{css:ed.container,children:[(0,p.tZ)(D.K.div,{css:ed.searchBarWrapper,ref:x,children:(0,p.tZ)(G.E,{placeholder:"Search Repls",value:a,inputRef:w,onChange:function(e){l(e.target.value)},onClear:function(){l("")},onKeyDown:function(e){if("Enter"===e.key&&B&&et(B),"ArrowDown"===e.key||"ArrowUp"===e.key){var n;e.preventDefault(),null===(n=C.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))}}})}),(0,p.BX)(D.G,{css:ed.headerRow,children:[(0,p.tZ)(P.h4,{level:2,variant:h?"subheadDefault":"subheadBig",children:"Recent"}),(0,p.tZ)(D.G,{css:ed.filterContainer,children:(0,p.tZ)(H.P,{"aria-label":"repl-list-filter-select",id:"repl-list-filter-select",items:eh,selectedItem:eh.find(function(e){return e.value===I})||eh[0],onChange:function(e){E(e.value)}})})]}),(0,p.BX)(D.K.div,{style:h?void 0:{paddingLeft:8,paddingRight:8},css:ed.replsListWrapper,ref:_,children:[(0,p.tZ)(D.G,{children:(0,p.tZ)(es,{"aria-label":"Repls",selectionMode:"single",selectionBehavior:"replace",disallowEmptySelection:!0,items:J,innerRef:C,selectedKeys:O,onSelectionChange:function(e){if("all"!==e){if(0===e.size)throw Error("Expected to have a selected key");U(Array.from(e)[0])}},onAction:function(e){et(e)},children:function(e){var n;return(0,p.tZ)(R.ck,{textValue:e.title,children:(0,p.tZ)(v.b,{forkParams:{trackingData:{forkSource:"desktopAppReplsList"}},onFork:function(){var e;null===(e=_.current)||void 0===e||e.scrollTo({top:0}),N()},repl:e,teamContext:(null===(n=e.owner)||void 0===n?void 0:n.__typename)==="Team"?e.owner.id:void 0,children:(0,p.tZ)(ef,{repl:e,onClick:function(e,n){i(e,n)}})})},e.id)}})}),(0,p.BX)(D.G,{css:ed.loadingStateWrapper,children:[er?(0,p.tZ)(L.Z,{}):null,eo?(0,p.tZ)(P.xv,{variant:"text",color:"dimmest",children:"We couldn't find any Repls matching your search."}):null,Y?(0,p.tZ)(S.hU,{tooltipBehavior:"hidden",alt:"Load more Repls",onClick:ee,ref:en,disabled:W,children:W?(0,p.tZ)(L.Z,{}):(0,p.tZ)(A.Z,{})}):null]})]})]})}},59737:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(66626),i=t(3796),o=t(62279),a=t(32622),l=t(53552),c=t(23666),u=t(75271),s=t(24281),d=t(93245),p=t(63163),f=(0,o.iv)(p.l0.dragRegion);function h(){var e,n,t,o,h,v,g,m,y=(0,s.NJ)(),b=(0,c.Z)(),Z=(e=(0,c.Z)(),t=(n=(0,r._)((0,u.useState)(!1),2))[0],o=n[1],(0,u.useEffect)(function(){if(e)return o(document.hasFocus()),a.X.onFocusChanged(o)},[e]),t),x=(h=(0,c.Z)(),g=(v=(0,r._)((0,u.useState)(!1),2))[0],m=v[1],(0,u.useEffect)(function(){if(h)return a.X.onFullScreenChanged(m)},[h]),g);return y&&b&&!x?(0,i.tZ)(d.G,{css:f,children:(0,i.tZ)("svg",{width:l.TY,height:l.MX-16,children:Z?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)("circle",{cx:15,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:35,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:55,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1})]})})}):null}},53552:function(e,n,t){"use strict";t.d(n,{KN:function(){return i},MX:function(){return o},TY:function(){return r}});var r=70,i=140,o=48},88001:function(e,n,t){"use strict";var r=t(3796),i=t(93245),o=t(36809),a=t(99356),l=t(63163),c=t(85983),u=t(66791),s=[l.l0.backgroundColor.outlineDimmest,l.l0.color.foregroundDefault,l.l0.borderRadius(4),l.l0.align.center,l.l0.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,o.X)({grey:[s,l.l0.backgroundColor.greyDimmest],red:[s,l.l0.backgroundColor.redDimmest],orange:[s,l.l0.backgroundColor.orangeDimmest],yellow:[s,l.l0.backgroundColor.yellowDimmest],lime:[s,l.l0.backgroundColor.limeDimmest],blue:[s,l.l0.backgroundColor.blueDimmest],purple:[s,l.l0.backgroundColor.purpleDimmest],pink:[s,l.l0.backgroundColor.pinkDimmest]});n.Z=function(e){var n,t,o=e.group,l=e.variant,s=void 0===l?"normal":l;switch(o.color){case c.nL.Grey:n=d.grey;break;case c.nL.Red:n=d.red;break;case c.nL.Orange:n=d.orange;break;case c.nL.Yellow:n=d.yellow;break;case c.nL.Lime:n=d.lime;break;case c.nL.Blue:n=d.blue;break;case c.nL.Purple:n=d.purple;break;case c.nL.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,u.Z)(s)}return(0,r.tZ)(i.G,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.tZ)(a.Z,{})})}},82415:function(e,n,t){"use strict";t.d(n,{Kl:function(){return c}});var r=t(21262),i=t(71440),o=t(40613);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a());l(),o.ou,o.M_},48999:function(e,n,t){"use strict";t.d(n,{BB:function(){return F},Dq:function(){return N},E_:function(){return L},F$:function(){return O},_P:function(){return W},lC:function(){return I},px:function(){return V},t:function(){return B}});var r=t(41733),i=t(21262),o=t(71440),a=t(82415),l=t(4029),c=t(33479),u=t(82303),s=t(9122),d=t(76143);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function _(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return _=function(){return e},e}function C(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}var k={},S=(0,o.Ps)(p()),I=(0,o.Ps)(f(),a.Kl,S),R=(0,o.Ps)(h()),E=(0,o.Ps)(v(),R),G=(0,o.Ps)(g(),c.Y),P=(0,o.Ps)(m(),G),D=(0,o.Ps)(y()),T=(0,o.Ps)(b(),D),A=(0,o.Ps)(Z(),I);function B(e){var n=(0,r._)({},k,e);return u.D(A,n)}var U=(0,o.Ps)(x(),a.Kl);function O(e){var n=(0,r._)({},k,e);return s.a(U,n)}var M=(0,o.Ps)(w(),E);function L(e){var n=(0,r._)({},k,e);return s.a(M,n)}var X=(0,o.Ps)(_(),l.a2,P);function W(e){var n=(0,r._)({},k,e);return s.a(X,n)}function N(e){var n=(0,r._)({},k,e);return d.t(X,n)}var z=(0,o.Ps)(C(),T);function F(e){var n=(0,r._)({},k,e);return s.a(z,n)}function V(e){var n=(0,r._)({},k,e);return d.t(z,n)}},32245:function(e,n,t){"use strict";t.d(n,{Z:function(){return G}});var r=t(41733),i=t(30509),o=t(66626),a=t(63257),l=t(3796),c=t(46954),u=t(21262),s=t(71440),d=t(38016),p=t(9122);function f(){var e=(0,u._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},v=(0,s.Ps)(f(),d.op),g=t(9602),m=t(44935),y=t(22893),b=t(24766),Z=t(93245),x=t(36809),w=t(7935),_=t(10578),C=t(89774),k=t(63163),S=t(43133),I=t(75271),R=[k.l0.p(8),k.l0.cursor.pointer],E=(0,x.X)({container:[k.l0.position.relative],rightIcon:[k.l0.position.absolute,k.l0.right(8),k.l0.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[k.l0.width("100%"),k.l0.position.absolute,k.l0.zIndex(1),k.l0.top("100%"),k.l0.left(0),k.l0.backgroundColor.backgroundDefault,k.l0.maxHeight(300),k.l0.overflow("auto"),k.l0.borderRadius(4),k.l0.border({color:k.TV.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(R),activeResult:(0,a._)(R).concat([k.l0.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(k.TV.backgroundHighest," !important")}}]}),G=function(e){var n,t,a=e.inputId,u=e.orgId,s=e.types,d=e.selectedGroups,f=e.value,x=e.setValue,k=e.onSelect,R=e.onClear,G=e.placeholder,P=void 0===G?"Find an existing group...":G,D=(0,o._)((0,I.useState)([]),2),T=D[0],A=D[1],B=(0,c.Z)(f.trim(),250),U=(n=(0,r._)({},h,{variables:{orgId:u,input:{count:10,types:s,filters:{name:{search:B}}}},ssr:!1,skip:!B,fetchPolicy:"cache-and-network",onCompleted:function(e){var n,t,r,i,o;(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:null===(n=t.org)||void 0===n?void 0:n.__typename)==="Org"&&(null==e?void 0:null===(o=e.currentUser)||void 0===o?void 0:null===(i=o.org)||void 0===i?void 0:null===(r=i.groups)||void 0===r?void 0:r.__typename)==="OrgGroupConnection"&&A(e.currentUser.org.groups.items.filter(function(e){return!d.some(function(n){return e.id===n.id})}))}}),p.a(v,n)),O=U.data,M=U.loading,L=U.error,X=O&&O.currentUser&&"Org"!==O.currentUser.org.__typename?O.currentUser.org.message:void 0,W=O&&O.currentUser&&"Org"===O.currentUser.org.__typename&&"OrgGroupConnection"!==O.currentUser.org.groups.__typename?O.currentUser.org.groups.message:void 0,N=null==L?void 0:L.message,z=null!==(t=null!=X?X:W)&&void 0!==t?t:N;return(0,I.useEffect)(function(){0===f.length&&0!==T.length&&A([])},[f.length,T.length]),(0,l.tZ)(Z.G,{css:E.container,children:(0,l.tZ)(S.ZP,{onSelect:function(e){e&&k(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,c=e.isOpen,u=e.highlightedIndex,s=e.getRootProps;return(0,l.BX)(Z.G,(0,i._)((0,r._)({},s({refKey:"innerRef"})),{children:[(0,l.tZ)(m.II,(0,r._)({},n({id:a,ref:null,value:f,onChange:function(e){x(e.currentTarget.value)},placeholder:P,autoComplete:"off"}))),M||0!==f.length?null:(0,l.tZ)(C.Z,{css:E.rightIcon}),M?(0,l.tZ)(Z.G,{css:E.rightIcon,children:(0,l.tZ)(_.Z,{})}):null,!M&&f.length>0?(0,l.tZ)(Z.G,{css:E.rightIcon,children:(0,l.tZ)(g.hU,{css:E.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){x(""),R&&R()},children:(0,l.tZ)(w.Z,{})})}):null,(0,l.BX)(Z.G,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[z?(0,l.tZ)(Z.G,{tag:"ul",css:E.dropdownMenu,children:(0,l.tZ)(Z.G,{tag:"li",css:E.result,children:(0,l.tZ)(y.E,{colorway:"negative",text:z})})}):null,c&&T&&T.length?(0,l.tZ)(Z.G,{css:E.dropdownMenu,children:T.map(function(e,n){return(0,l.tZ)(Z.G,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===u?E.activeResult:E.result,children:(0,l.tZ)(b.xv,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,c&&!M&&B.length>0&&0===T.length?(0,l.tZ)(Z.G,{tag:"ul",css:E.dropdownMenu,children:(0,l.tZ)(Z.G,{tag:"li",css:E.result,children:(0,l.BX)(b.xv,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',f,'"']})})}):null]}))]}))}})})}},38016:function(e,n,t){"use strict";t.d(n,{$h:function(){return v},ad:function(){return p},op:function(){return f}});var r=t(41733),i=t(21262),o=t(71440),a=t(40613),l=t(9122);function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.Ps)(c(),a.M_),f=(0,o.Ps)(u()),h=(0,o.Ps)(s(),f);function v(e){var n=(0,r._)({},d,e);return l.a(h,n)}},40613:function(e,n,t){"use strict";t.d(n,{M_:function(){return u},ou:function(){return c}});var r=t(21262),i=t(71440);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(o()),u=(0,i.Ps)(a());l()},4029:function(e,n,t){"use strict";t.d(n,{R_:function(){return G},a2:function(){return R},np:function(){return I},rt:function(){return k}});var r=t(41733),i=t(21262),o=t(71440),a=t(33479),l=t(40613),c=t(9122);function u(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplCreator on Repl {\n    user {\n      id\n      displayName\n      username\n      image\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplCreator\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function y(){var e=(0,i._)(["\n  query OrgRepls(\n    $orgId: String!\n    $replsInput: OrgReplsInput!\n    $replsCountInput: OrgReplsCountInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          replsCount(input: $replsCountInput)\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},Z=(0,o.Ps)(u()),x=(0,o.Ps)(s()),w=(0,o.Ps)(d()),_=(0,o.Ps)(p()),C=(0,o.Ps)(f()),k=(0,o.Ps)(h()),S=(0,o.Ps)(v(),a.Y,Z,x,w,_,C,k),I=(0,o.Ps)(g(),S),R=(0,o.Ps)(m(),l.M_),E=(0,o.Ps)(y(),R,I);function G(e){var n=(0,r._)({},b,e);return c.a(E,n)}},63299:function(e,n,t){"use strict";var r=t(66626),i=t(3796),o=t(48999),a=t(9164),l=t(22419),c=t(93245),u=t(36809),s=t(27840),d=t(7935),p=t(42427),f=t(89313),h=t(16865),v=t(34030),g=t(10578),m=t(54300),y=t(63163),b=t(85983),Z=t(75271),x=(0,u.X)({scopeSelector:[y.l0.rowWithGap(8),y.l0.justify.end,y.l0.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[y.l0.position.absolute,y.l0.top("50%"),y.l0.left(-4),{transform:"translate(-100%, -50%)"}]}),w=function(e){switch(e){case b.SH.Owner:return{icon:(0,i.tZ)(v.Z,{}),label:"Owner",description:"Full permissions including Repl deletion"};case b.SH.Deployer:return{icon:(0,i.tZ)(p.Z,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case b.SH.Editor:return{icon:(0,i.tZ)(f.Z,{}),label:"Editor",description:"Can edit code and view resources"};case b.SH.Viewer:return{icon:(0,i.tZ)(h.Z,{}),label:"Viewer",description:"Can only view code and fork Repls"};case b.SH.None:return{icon:(0,i.tZ)(d.Z,{}),label:"None",description:"Cannot search, view, or edit Repl"}}},_=function(e){switch(e){case b.SH.Owner:return b.E3.Owner;case b.SH.Deployer:return b.E3.Deployer;case b.SH.Editor:return b.E3.Editor;case b.SH.Viewer:return b.E3.Viewer}};n.Z=function(e){var n,t=e.group,u=e.repl,d=e.options,p=e.onScopeChange,f=e.iconSize,h=void 0===f?24:f,v=(0,r._)((0,Z.useState)(!1),2),C=v[0],k=v[1],S=(0,r._)((0,Z.useState)(d.find(function(e){return e.status===b.w9.Current})),2),I=S[0],R=S[1],E="".concat(u.id,"-role-").concat((0,Z.useId)()),G=I?w(I.role).label:void 0,P=t.permissions.editPermissions,D=u.authorizations.editPermissions.isAuthorized,T=P&&D,A=(0,r._)((0,o.t)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(p(),k(!0),setTimeout(function(){return k(!1)},2e3))}}),2),B=A[0],U=A[1],O=U.data,M=U.loading,L=U.error,X=(null==O?void 0:O.updateOrgGroupScopes)&&"OrgGroup"!==O.updateOrgGroupScopes.__typename?O.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=X?(0,i.tZ)(l.u,{tooltip:X,children:(0,i.tZ)(m.Z,{size:h,color:y.TV.accentNegativeDefault})}):M?(0,i.tZ)(g.Z,{size:h}):C?(0,i.tZ)(s.Z,{size:h,color:y.TV.accentPositiveDefault}):null,(0,i.BX)(c.G,{css:x.scopeSelector,children:[n?(0,i.tZ)(c.G,{css:x.icon,children:n}):null,(0,i.tZ)(l.u,{tooltip:D?"You cannot edit this group's permissions.":"You cannot edit this Repl's permissions.",isDisabled:T,children:(0,i.tZ)(a.ZE,{id:E,label:null!=G?G:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(u.title),onAction:function(e){var n=d.find(function(n){return n.role===e});if(n&&n.role!==(null==I?void 0:I.role)){R(n);var r=n.role===b.SH.None?[]:[{resourceId:u.id,role:_(n.role)}],i=n.role===b.SH.None?[{resourceType:b.v1.Repl,resourceId:u.id}]:[];B({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:d,disallowEmptySelection:!0,isDisabled:!T,children:function(e){var n=w(e.role),r=e.status===b.w9.Unavailable;return(0,i.tZ)(a.sN,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:x.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},39125:function(e,n,t){"use strict";t.d(n,{j:function(){return S3}});var r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A,B,U,O,M,L,X,W,N,z,F,V,H,j=t(66626),$=t(3796),q=t(75271),Y=t(18557),J=t(14118),K=t(93245),Q=t(63163),ee=t(42516),en=t(63257),et=t(62279),er=t(98698),ei=t(78722),eo=t(87508),ea=t(37425),el=t(53552),ec=t(23666),eu=t(16865),es=t(34763),ed=t(22419),ep=t(37488),ef=function(e){var n=e.className;return(0,es.r)().showPrivateUpsell?(0,$.tZ)(ed.u,{tooltip:eh,children:(0,$.tZ)(ep.D,{className:n,iconLeft:(0,$.tZ)(eu.Z,{}),text:"PUBLIC"})}):null},eh="This Repl is publicly visible. Upgrade to make it private.",ev=t(23882),eg=t(65559),em=t(52657);function ey(e){var n=(0,ev.Z)().presence,t=(0,eg.pV)(),r=(0,em.Z)(e);return(0,q.useCallback)(function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===i){n.unfollowUser();return}n.followUser(i);var l=n.getActiveFileForUser(o),c=t();l&&l!==c&&r.current({path:l})},[r,t,n])}var eb=t(16155),eZ=t(96949),ex=t(24281),ew=t(24766),e_=t(22893),eC=t(85995),ek=t(36809),eS=function(){var e=(0,es.r)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,j._)((0,q.useState)(!1),2),i=r[0],o=r[1];return n?(0,$.BX)(K.G,{css:eI.self,children:[(0,$.tZ)(K.G,{tag:"button",css:eI.bannerWrapper,onClick:function(){return o(!0)},children:(0,$.tZ)(e_.E,{icon:(0,$.tZ)(eu.Z,{}),colorway:"yellow",text:"This Repl is publicly visible. Upgrade for unlimited private Repls, better AI, more storage, speed, and more."})}),(0,$.tZ)(eC.Z,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},type:"purchase",contextualUpsell:(0,$.BX)($.HY,{children:[(0,$.tZ)(ew.xv,{variant:"subheadBig",children:"Upgrade for private Repls"}),(0,$.tZ)(ew.xv,{multiline:!0,children:"Keep your code secure and private"})]}),analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})]}):null},eI=(0,ek.X)({bannerWrapper:[Q.l0.cursor.pointer,Q.l0.borderRadius(),Q.l0.textAlign.left],self:[Q.l0.px(12)]}),eR=t(27387),eE=t(41733),eG=t(30509),eP=t(96583),eD=t(43769),eT=t(20622),eA=t(71051),eB=t(21262),eU=t(71440),eO=t(40613),eM=t(38016),eL=t(9122),eX=t(82303);function eW(){var e=(0,eB._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return eW=function(){return e},e}function eN(){var e=(0,eB._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return eN=function(){return e},e}function ez(){var e=(0,eB._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return ez=function(){return e},e}function eF(){var e=(0,eB._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return eF=function(){return e},e}function eV(){var e=(0,eB._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return eV=function(){return e},e}function eH(){var e=(0,eB._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return eH=function(){return e},e}function ej(){var e=(0,eB._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return ej=function(){return e},e}var e$={},eq=(0,eU.Ps)(eW(),eO.M_),eY=(0,eU.Ps)(eN(),eM.op),eJ=(0,eU.Ps)(ez(),eY),eK=(0,eU.Ps)(eF(),eY),eQ=(0,eU.Ps)(eV(),eq,eJ,eK),e0=(0,eU.Ps)(eH(),eQ),e1=(0,eU.Ps)(ej(),eQ),e2=t(88001),e4=t(48999),e5=t(32245),e3=t(63299),e7=t(6065),e6=t(79904),e8=t(39808),e9=t(9164),ne=t(27840),nn=t(29737),nt=t(27060),nr=t(34030),ni=t(20379),no=t(10578),na=t(54300),nl=t(85983),nc=(0,ek.X)({container:[Q.l0.colWithGap(12)],loader:[Q.l0.px(12),Q.l0.align.center,Q.l0.justify.center],headerSection:[Q.l0.colWithGap(2),Q.l0.px(12)],section:[Q.l0.colWithGap(12),Q.l0.px(12)],sectionWithBorders:[Q.l0.colWithGap(12),Q.l0.p(12),Q.l0.border({direction:"top"}),Q.l0.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[Q.l0.fontWeight.medium],subtitle:[Q.l0.rowWithGap(4),Q.l0.fontWeight.medium],nested:[Q.l0.pl(24),Q.l0.colWithGap(12)],item:[Q.l0.rowWithGap(16),Q.l0.align.center,Q.l0.justify.spaceBetween],groupName:[Q.l0.colWithGap(6),Q.l0.justify.center],membership:[Q.l0.rowWithGap(8)],label:[Q.l0.rowWithGap(8)],search:[Q.l0.rowWithGap(8)],searchInput:[Q.l0.flex.growAndShrink(1)],scopeSelector:[Q.l0.pl(24),Q.l0.flex.row,Q.l0.align.center],visibilityRow:[Q.l0.flex.row,Q.l0.justify.spaceBetween],visibilitySelector:[Q.l0.rowWithGap(4),Q.l0.flex.growAndShrink(1),Q.l0.position.relative,Q.l0.justify.start,Q.l0.align.center],selectedOption:[Q.l0.rowWithGap(8),Q.l0.align.center]}),nu=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,$.BX)(K.G,{css:nc.item,children:[(0,$.BX)(K.G,{css:nc.label,children:[(0,$.tZ)(e7.q,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,$.BX)(K.G,{css:nc.groupName,children:[(0,$.BX)(K.G,{css:nc.membership,children:[(0,$.tZ)(ew.xv,{height:"singleLine",children:n.username}),l?(0,$.tZ)(ew.xv,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,$.tZ)(K.G,{children:(0,$.tZ)(e3.Z,{repl:r,group:i,options:o,onScopeChange:a})})]})},ns=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,$.BX)(K.G,{css:nc.item,children:[(0,$.BX)(K.G,{css:nc.label,children:[(0,$.tZ)(e2.Z,{group:t}),(0,$.BX)(K.G,{css:nc.groupName,children:[(0,$.tZ)(ew.xv,{height:"singleLine",children:t.name}),(0,$.BX)(K.G,{css:nc.membership,children:[t.isMember?(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",height:"singleLine",children:(0,eA.Z)("member",t.memberCount,!0)}):null]})]})]}),(0,$.tZ)(K.G,{children:(0,$.tZ)(e3.Z,{repl:n,group:t,options:r,onScopeChange:i})})]})},nd=function(e){var n,t=e.org;return(0,$.tZ)(K.G,{css:nc.item,children:(0,$.BX)(K.G,{css:nc.label,children:[(0,$.tZ)(e7.q,{src:null!==(n=t.image)&&void 0!==n?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,$.BX)(K.G,{css:nc.groupName,children:[(0,$.BX)(ew.xv,{height:"singleLine",children:["Everyone at ",t.name]}),(0,$.tZ)(K.G,{children:null!=t.membersCount?(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",height:"singleLine",children:(0,eA.Z)("member",t.membersCount,!0)}):null})]})]})})},np=function(e){var n,t,r,i,o,a,l,c,u=e.orgId,s=e.selectedGroups,d=e.repl,p=e.onScopeChange,f="group-search-".concat((0,q.useId)()),h=(0,j._)((0,q.useState)(),2),v=h[0],g=h[1],m=(0,j._)((0,q.useState)(""),2),y=m[0],b=m[1],Z=(0,j._)((0,e4.px)(),2),x=Z[0],w=Z[1],_=w.data,C=w.error,k=w.loading,S=_&&(null===(r=_.currentUser)||void 0===r?void 0:null===(t=r.org)||void 0===t?void 0:t.__typename)==="Org"&&"OrgGroup"===_.currentUser.org.group.__typename&&(null===(i=_.currentUser.org.group.replScopeOptions)||void 0===i?void 0:i.__typename)==="OrgGroupReplScopeOptions"?_.currentUser.org.group.replScopeOptions.items[0].options:void 0,I=(null==_?void 0:_.currentUser)&&"Org"!==_.currentUser.org.__typename?_.currentUser.org.message:void 0,R=(null==_?void 0:_.currentUser)&&"Org"===_.currentUser.org.__typename&&"OrgGroup"!==_.currentUser.org.group.__typename?_.currentUser.org.group.message:void 0,E=(null==_?void 0:_.currentUser)&&"Org"===_.currentUser.org.__typename&&"OrgGroup"===_.currentUser.org.group.__typename&&(null===(o=_.currentUser.org.group.replScopeOptions)||void 0===o?void 0:o.__typename)!=="OrgGroupReplScopeOptions"?null===(a=_.currentUser.org.group.replScopeOptions)||void 0===a?void 0:a.message:void 0,G=null!==(c=null!==(l=null!=I?I:R)&&void 0!==l?l:E)&&void 0!==c?c:null==C?void 0:C.message,P=(n=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent(),b(""),g(void 0),[2]}})}),function(){return n.apply(this,arguments)});return(0,$.BX)($.HY,{children:[(0,$.BX)(K.G,{css:nc.search,children:[(0,$.tZ)(K.G,{css:nc.searchInput,children:(0,$.tZ)(e5.Z,{inputId:f,orgId:u,types:[nl._p.Custom,nl._p.SystemIndividual],selectedGroups:s,value:y,setValue:b,onSelect:function(e){g(e),b(e.name),x({variables:{orgId:u,groupId:e.id,input:{replIds:[d.id]}}})},onClear:function(){return g(void 0)},placeholder:"Share with groups or other members"})}),v&&S||k?(0,$.BX)(K.G,{css:nc.scopeSelector,children:[v&&S&&!k?(0,$.tZ)(e3.Z,{group:v,repl:d,options:S,onScopeChange:P}):null,k?(0,$.tZ)(no.Z,{size:24}):null]}):null]}),G?(0,$.tZ)(e_.E,{colorway:"negative",text:G}):null]})},nf=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,j._)((0,q.useState)(),2),l=a[0],c=a[1],u=(0,j._)((n={variables:{input:{id:i.id}}},t=(0,eE._)({},e$,n),eX.D(e1,t)),2),s=u[0],d=u[1],p=d.loading,f=d.error,h="repl-visibility-".concat((0,q.useId)()),v=i.authorizations.editVisibility.isAuthorized,g=i.authorizations.editVisibility.message,m=[{id:"private",icon:(0,$.tZ)(ni.Z,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,$.tZ)(nr.Z,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],y=m.find(function(e){return e.selected}),b=y?(0,$.BX)(K.G,{css:nc.selectedOption,children:[y.icon," ",y.name]}):void 0;return r=f?(0,$.tZ)(ed.u,{tooltip:f.message,children:(0,$.tZ)(na.Z,{size:24,color:Q.TV.accentNegativeDefault})}):p?(0,$.tZ)(no.Z,{size:24}):l?(0,$.tZ)(ne.Z,{size:24,color:Q.TV.accentPositiveDefault}):null,(0,$.BX)(K.G,{css:nc.visibilitySelector,children:[(0,$.tZ)(ed.u,{tooltip:g,isDisabled:v,children:(0,$.tZ)(e9.ZE,{id:h,trigger:(0,$.tZ)(e6.zx,{iconRight:(0,$.tZ)(nn.Z,{}),text:null!=b?b:"Control Repl visibility",disabled:!v}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&s({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,eG._)((0,eE._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(c(!0),setTimeout(function(){return c(!1)},2e3))}})},items:m,disallowEmptySelection:!0,isDisabled:!v,children:function(e){return(0,$.tZ)(e9.sN,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,$.tZ)(K.G,{children:r}):null]})},nh=function(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.replId,f=(0,eT.d)(),h=(0,ec.Z)(),v=(n=(0,eE._)({},e$,{variables:{replId:p}}),eL.a(e0,n)),g=v.data,m=v.loading,y=v.error,b=v.refetch,Z=(null==g?void 0:null===(r=g.repl)||void 0===r?void 0:r.__typename)==="Repl"?g.repl:void 0,x=(null!==(u=null==Z?void 0:null===(i=Z.multiplayerStatus)||void 0===i?void 0:i.groups)&&void 0!==u?u:[]).filter(function(e){return"custom"!==e.group.type}),w=(null!==(s=null==Z?void 0:null===(o=Z.multiplayerStatus)||void 0===o?void 0:o.groups)&&void 0!==s?s:[]).filter(function(e){return"custom"===e.group.type}),_=null!==(d=null==Z?void 0:null===(a=Z.multiplayerStatus)||void 0===a?void 0:a.individuals)&&void 0!==d?d:[],C=x.map(function(e){return e.group}).concat(w.map(function(e){return e.group})).concat(_.map(function(e){return e.group})),k=(t=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,b()];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return(null==y?void 0:y.message)?(0,$.tZ)(K.G,{css:nc.container,children:(0,$.tZ)(e_.E,{colorway:"negative",text:y.message})}):m||!Z?(0,$.tZ)(K.G,{css:nc.loader,children:(0,$.tZ)(no.Z,{})}):(0,$.BX)(K.G,{css:nc.container,children:[(0,$.BX)(K.G,{tag:"header",css:nc.headerSection,children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Share Repl"}),(0,$.BX)(K.G,{css:nc.subtitle,children:[Z.org?(0,$.BX)(ew.xv,{variant:"small",color:"dimmer",children:[Z.org.name," /"]}):null,(0,$.tZ)(ew.xv,{variant:"small",children:Z.title})]})]}),(null===(l=Z.org)||void 0===l?void 0:l.id)&&Z.authorizations.editPermissions.isAuthorized?(0,$.tZ)(K.G,{css:nc.sectionWithBorders,children:(0,$.tZ)(np,{orgId:Z.org.id,selectedGroups:C,repl:Z,onScopeChange:k})}):null,(0,$.BX)(K.G,{css:nc.section,children:[(0,$.tZ)(ew.xv,{variant:"small",css:nc.sectionTitle,children:"Groups with access"}),Z.org?(0,$.tZ)(nd,{org:Z.org}):null,(0,$.tZ)(K.G,{css:nc.nested,children:x.map(function(e){var n=e.group,t=e.options;return(0,$.tZ)(ns,{repl:Z,group:n,options:t,onScopeChange:k},n.id)})}),w.map(function(e){var n=e.group,t=e.options;return(0,$.tZ)(ns,{repl:Z,group:n,options:t,onScopeChange:k},n.id)})]}),_.length>0?(0,$.BX)(K.G,{css:nc.section,children:[(0,$.tZ)(ew.xv,{variant:"small",css:nc.sectionTitle,children:"People with access"}),_.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,$.tZ)(nu,{currentUserId:f,repl:Z,group:n,user:t,options:r,onScopeChange:k},t.id)})]}):null,(null===(c=Z.org)||void 0===c?void 0:c.id)?(0,$.tZ)(K.G,{css:nc.sectionWithBorders,children:(0,$.BX)(K.G,{css:nc.visibilityRow,children:[(0,$.tZ)(nf,{repl:Z,org:Z.org}),h?null:(0,$.tZ)(e8.Z,(0,eG._)((0,eE._)({prefetch:!1},(0,eD.j3)(Z)),{iconRight:(0,$.tZ)(nt.Z,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},nv=t(91466),ng=t(32663),nm=t(55629),ny=t(7283),nb=t(42965),nZ=t(7420),nx=t(55621),nw=t(71711),n_=(0,ek.X)({root:[Q.l0.color.foregroundDefault,Q.l0.p(24),Q.l0.display.grid,{gap:Q.TV.space24}],controls:[Q.l0.display.grid,{gap:Q.TV.space8,gridAutoFlow:"column"}],message:[Q.l0.pb(16)]});function nC(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,$.BX)("div",{css:n_.root,children:[(0,$.tZ)(nx.Z,{level:3,align:"center",children:"Are you sure?"}),(0,$.BX)(nw.Z,{align:"center",children:[(0,$.tZ)("p",{css:n_.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,$.tZ)("p",{children:n})]}),(0,$.BX)("div",{css:n_.controls,children:[(0,$.tZ)(nZ.Z,{onClick:r,children:"Cancel"}),(0,$.tZ)(nZ.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]})]})}var nk=t(58532),nS=t(24374),nI=t(14548),nR=t(99356),nE=t(24200),nG=t(7391),nP=t(97420),nD=t(14709),nT=t.n(nD),nA=t(28109),nB=t(77317);function nU(){var e=(0,eB._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nU=function(){return e},e}var nO={},nM=(0,eU.Ps)(nU(),nB.U4),nL=t(26456);function nX(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.replId,f=(0,nG.useRouter)(),h=(0,nb.Gv)(f),v=(0,nE.aG)(),g=(0,j._)((0,q.useState)(null),2),m=g[0],y=g[1],b=(n=(0,eE._)({},nO,{variables:{replId:p}}),eL.a(nM,n)),Z=b.data,x=b.loading,w=(null==Z?void 0:null===(t=Z.currentUser)||void 0===t?void 0:t.id)||null,_=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,C=(0,ny.Z)({isMobileApp:h,isTeam:!0,replId:p}),k=C.addOrInviteReplMultiplayer,S=C.loadingAddMutation;if(_&&!_.owner)throw Error("Cannot manage members on anon repls");if((null==_?void 0:_.owner)&&(null==_?void 0:_.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var I=(null==_?void 0:null===(r=_.owner)||void 0===r?void 0:r.__typename)==="Team"?_.owner:null,R=!(null==I?void 0:null===(i=I.capabilities)||void 0===i?void 0:i.hasValidSubscription)&&!(null==I?void 0:null===(o=I.capabilities)||void 0===o?void 0:o.isBusinessPlan),E=(null!==(a=null==_?void 0:_.collaborators)&&void 0!==a?a:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),G=null==_?void 0:_.multiplayerInvites,P=(null!==(l=null==_?void 0:_.collaborators)&&void 0!==l?l:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),D=P.length,T=(null!==(c=null==_?void 0:_.collaborators)&&void 0!==c?c:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),A=(null!==(u=null==_?void 0:_.collaborators)&&void 0!==u?u:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),B=A.some(function(e){return e.id===w}),U=T.filter(function(e){return v.some(function(n){return n.id===e.id})}),O=T.filter(function(e){return!v.some(function(n){return n.id===e.id})}),M=null!==(s=null==_?void 0:_.authorizations.editPermissions.isAuthorized)&&void 0!==s&&s,L=null!==(d=null==_?void 0:_.authorizations.inviteGuests.isAuthorized)&&void 0!==d&&d;return x?(0,$.tZ)(nI.Tg,{css:[nm._U.root],background:"default",children:(0,$.BX)(K.G,{css:nm._U.loading,children:[(0,$.tZ)(no.Z,{color:nP.TV.foregroundDimmer}),(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,$.BX)(nI.Tg,{css:nm._U.root,background:"default",children:[(0,$.tZ)(K.G,{css:[nm._U.header,h&&nm._U.header_mobile],children:(0,$.tZ)(K.G,{css:nm._U.titleContainer,children:(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),L?(0,$.tZ)(K.G,{css:nm._U.searchContainer,children:(0,$.tZ)(nL.Z,{existingUsernames:E,onSubmit:function(e){if(!S){if(nT()(e)){y(e);return}k({variables:{input:{replId:p,target:{method:nl.ml.Username,value:e},level:nl.gA.Rw}}})}},isDisabled:x})}):null,!L&&R?(0,$.tZ)(K.G,{css:[Q.l0.px(16)],children:(0,$.tZ)(nS.u,{iconLeft:(0,$.tZ)(nR.Z,{}),text:'You can add people to this Repl by inviting them to the "'.concat(null==I?void 0:I.displayName,'" Friends Team.'),href:"/teams/".concat(null==I?void 0:I.username),target:"_blank"})}):null,(0,$.tZ)(nk.u,{isOpen:!!m,onRequestClose:function(){return y(null)},children:m?(0,$.tZ)(nC,{email:m,onInvite:function(){k({variables:{input:{replId:p,target:{method:nl.ml.Email,value:m},level:nl.gA.Rw}}}),y(null)},onCancel:function(){return y(null)}}):null}),(0,$.BX)(nI.Tg,{css:nm._U.userList,children:[(null==G?void 0:G.length)?(0,$.BX)(K.G,{css:nm._U.userGroup.root,children:[(0,$.tZ)(nm.ln,{title:"Pending Invitations",color:nP.TV.outlineStrongest,count:D}),null==G?void 0:G.map(function(e){return(0,$.tZ)(nA.Z,{canEditMultiplayers:B||!1,email:e.email,isPendingInvitation:!0,replId:p},e.email)})]}):null,P.length?(0,$.BX)(K.G,{css:nm._U.userGroup.root,children:[(0,$.tZ)(nm.ln,{title:"External Guests",color:nP.TV.outlineStrongest,count:null==P?void 0:P.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),P.map(function(e){return(0,$.tZ)(nA.Z,{canEditMultiplayers:B||!1,isPendingInvitation:!1,replId:p,user:e},e.id)})]}):null,U.length?(0,$.BX)(K.G,{css:nm._U.userGroup.root,children:[(0,$.tZ)(nm.ln,{title:"Online Members",color:nP.TV.greenStrongest,count:null==U?void 0:U.length}),U.map(function(e){return(0,$.tZ)(nA.Z,{isPendingInvitation:!1,canEditMultiplayers:!!B,replId:p,user:e},e.id)})]}):null,O.length?(0,$.BX)(K.G,{css:nm._U.userGroup.root,children:[(0,$.tZ)(nm.ln,{title:"Offline Members",color:nP.TV.outlineStrongest,count:null==O?void 0:O.length}),O.map(function(e){return(0,$.tZ)(nA.Z,{isPendingInvitation:!1,canEditMultiplayers:!!B,replId:p,user:e},e.id)})]}):null,A.length?(0,$.BX)(K.G,{css:nm._U.userGroup.root,children:[(0,$.tZ)(nm.ln,{title:"Admins",color:nP.TV.accentPrimaryStronger,count:A.length}),A.map(function(e){return(0,$.tZ)(nA.Z,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:p},e.id)})]}):null,M||x?null:(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var nW=(0,ek.X)({self:[Q.l0.colWithGap(12),Q.l0.py(12),Q.l0.borderRadius(8),Q.l0.align.stretch,Q.l0.flex.growAndShrink(1),Q.l0.maxHeight("calc(100vh - ".concat(Y.Mz+12,"px)")),Q.l0.backgroundColor.backgroundDefault]}),nN=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,$.tZ)(nh,{replId:t}):i?(0,$.tZ)(nX,{replId:t}):(0,$.tZ)(nm.ZP,{replId:t,handleUpgradeTriggered:r}),(0,$.BX)(K.G,{css:nW.self,children:[n,o&&"personal"!==o.type?null:(0,$.tZ)(eS,{}),o?null:(0,$.BX)($.HY,{children:[(0,$.tZ)(nv.R,{}),(0,$.tZ)(ng.Z,{replId:t})]})]})},nz=t(28670),nF=t(75710),nV={owner:"Owner",editor:"Can edit"},nH=t(28393),nj=t(66411),n$=t(11782),nq=t(86466),nY=t(44629),nJ=(0,ek.X)({container:[Q.l0.pl(8),Q.l0.pr(16),Q.l0.py(4),Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.start],button:[Q.l0.display.flex,Q.l0.align.center],img:[Q.l0.width(32),Q.l0.height(32),Q.l0.borderRadius("full"),Q.l0.backgroundColor.white,Q.l0.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[Q.l0.display.flex,Q.l0.flex.column,Q.l0.justify.center,Q.l0.ml(8),Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)]}),nK=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,c=e.isCurrentUser,u=e.onAvatarClick,s=function(){l&&(u({username:t,id:n}),a())};return(0,$.BX)("div",{css:[nJ.container,i&&nq.gU.listItem],style:(0,eE._)({cursor:l?"pointer":"auto"},l&&nq.gU.listItem),role:"button",onClick:s,onKeyDown:s,tabIndex:0,children:[(0,$.BX)("div",{css:nJ.button,children:[(0,$.tZ)(n$.Z,{src:r,alt:"",css:nJ.img,style:{borderColor:o},width:32,height:32}),l?(0,$.BX)(nY.T,{children:["Observe ",t]}):null]}),(0,$.BX)("div",{css:nJ.usernameContainer,children:[(0,$.BX)(ew.xv,{multiline:!1,children:["@",t,c?" (you)":null]}),(0,$.tZ)(ew.xv,{variant:"small",color:"dimmer",multiline:!1,children:i?nV.owner:nV.editor})]})]})};function nQ(){var e=(0,eB._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return nQ=function(){return e},e}function n0(){var e=(0,eB._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return n0=function(){return e},e}var n1={},n2=(0,eU.Ps)(nQ()),n4=(0,eU.Ps)(n0(),n2),n5=(0,ek.X)({loading:[Q.l0.flex.row,Q.l0.justify.center,Q.l0.p(32)],loaded:[Q.l0.colWithGap(8),Q.l0.py(8),Q.l0.maxHeight(330),{overflowY:"auto"}]}),n3=function(e){var n,t=e.replId,r=e.activeUsers,i=e.hideModal,o=e.onAvatarClick,a=(n=(0,eE._)({},n1,{variables:{replId:t}}),eL.a(n4,n)),l=a.data,c=a.loading,u=a.error;if(c)return(0,$.tZ)(K.G,{css:n5.loading,children:(0,$.tZ)(no.Z,{})});if(u)return(0,$.tZ)("div",{children:u.message});if((null==l?void 0:l.repl.__typename)==="Repl"){var s=l.repl,d=l.currentUser,p=s.user,f=p&&r.find(function(e){return e.username===p.username}),h=s.multiplayers.filter(function(e){var n;return e&&(n=e.id,r.some(function(e){return e.id===n}))}).slice(2);return(0,$.tZ)(K.G,{css:n5.loaded,children:(0,$.BX)(K.G,{children:[p?(0,$.tZ)(nK,(0,eG._)((0,eE._)({},p),{color:f?f.color:"transparent",isOwner:!0,hideModal:i,isCurrentUser:p.id===(null==d?void 0:d.id),canClickAvatar:!!f&&p.id!==(null==d?void 0:d.id),onAvatarClick:o})):null,h.map(function(e){if(!e)throw Error("Expected user");var n=r.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==d?void 0:d.id);return(0,$.tZ)(nK,(0,eG._)((0,eE._)({isCurrentUser:e.id===(null==d?void 0:d.id)},e),{canClickAvatar:t,color:n.color,hideModal:i,isOwner:!1,onAvatarClick:o}),"chat-user-list-".concat(e.username))})]})})}return(null==l?void 0:l.repl.__typename)==="ReplRedirect"?(0,$.BX)("div",{children:["This Repl has moved to"," ",(0,$.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):(null==l?void 0:l.repl.__typename)==="SubscriptionExpiredError"?(0,$.BX)("div",{children:["Your subscription has expired.",(0,$.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null},n7=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,eb.Z)(),a=(0,nj.aG)();return(0,$.BX)(nH.Z,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,$.tZ)(n3,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})},n6=(0,ek.X)({root:[Q.l0.flex.row,Q.l0.align.center,Q.l0.backgroundColor.backgroundDefault],userStack:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.px(8),Q.l0.py(4),(0,ee._)({},Q.BC.max(nF.j.mobileMax+100),[Q.l0.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[Q.l0.borderRadius("full"),Q.l0.minWidth(24),Q.l0.height(24),Q.l0.fontSize(10),Q.l0.border({color:Q.TV.outlineDefault})]});function n8(e){var n=(0,j._)((0,q.useState)(!1),2),t=n[0],r=n[1],i=(0,nE.aG)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,$.tZ)(K.G,{css:n6.root,children:(0,$.BX)(K.G,{tag:"ul",css:n6.userStack,"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,$.tZ)("li",{css:n6.userStackListItem,children:(0,$.tZ)(nz.Z,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,$.tZ)("li",{css:n6.userStackListItem,children:(0,$.tZ)(K.G,{children:(0,$.tZ)(n7,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,$.tZ)(nI.Tg,{background:"root",css:n6.overflowContainer,children:(0,$.tZ)(e6.zx,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:n6.overflowButton})})})})}):null]})})}var n9=t(85451),te=t(31252),tn=t(70625),tt=t(83059),tr=t(49853),ti=t(30967),to=(0,tr.cn)(!1),ta=(0,tr.cn)(null,function(e,n,t){if(e(to)){(0,ti.flushSync)(function(){n(tl,null),n(to,!1)});return}t&&n(tl,t),n(to,!0)}),tl=(0,tr.cn)(null),tc=(0,tr.cn)([]),tu=t(24936),ts=t(74044),td=ts.Dy.String();ts.Dy.String();var tp=ts.Dy.Object({width:ts.Dy.Number(),height:ts.Dy.Number()}),tf=ts.Dy.Object({x:ts.Dy.Number(),y:ts.Dy.Number()}),th=ts.Dy.Intersect([tf,tp]),tv=ts.Dy.Object({top:ts.Dy.Number(),bottom:ts.Dy.Number(),left:ts.Dy.Number(),right:ts.Dy.Number()}),tg=ts.Dy.Object({id:ts.Dy.String(),type:ts.Dy.Literal("paneGroup"),panes:ts.Dy.Array(td),percent:ts.Dy.Number(),activeIndex:ts.Dy.Number()}),tm=ts.Dy.Object({id:ts.Dy.String(),type:ts.Dy.Literal("floatingPaneGroup"),panes:ts.Dy.Array(td),activeIndex:ts.Dy.Number(),rect:th}),ty=ts.Dy.Recursive(function(e){return ts.Dy.Object({type:ts.Dy.Literal("split"),stacked:ts.Dy.Boolean(),children:ts.Dy.Array(ts.Dy.Union([tg,e])),percent:ts.Dy.Number()})});ts.Dy.Union([tg,ty]);var tb=ts.Dy.Object({tiling:ts.Dy.Union([ty,tg,ts.Dy.Null()]),floating:ts.Dy.Array(tm)});ts.Dy.Union([ts.Dy.Literal("left"),ts.Dy.Literal("right")]),ts.Dy.Object({inset:ts.Dy.Optional(tv),size:tp,gap:ts.Dy.Number(),headerHeight:ts.Dy.Number()});var tZ=ts.Dy.Union([ts.Dy.Literal("above"),ts.Dy.Literal("below"),ts.Dy.Literal("leftOf"),ts.Dy.Literal("rightOf")]);function tx(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},c=.3*n.width,u=l.x-c/2;if(e.x>=u&&e.x<=u+c){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}ts.Dy.Union([tZ,ts.Dy.Literal("replace")]),ts.Dy.Union([ts.Dy.Literal("up"),ts.Dy.Literal("left"),ts.Dy.Literal("right"),ts.Dy.Literal("down")]);var tw={height:0,width:0};function t_(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function tC(e){return"floatingPaneGroup"!==e.type}var tk=t(78950),tS=t(45077);function tI(e,n){var t=(0,tk._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value;if("paneGroup"===c.type)break;if("number"!=typeof g)throw Error("Expected number");s++,c=c.children[g]}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return u===s?c:null}function tR(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,en._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function tE(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,en._)(r).concat([i]))}(t,n,["tiling"]):null}function tG(e,n){var t=e.tiling,r=e.floating,i=(0,en._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,en._)(o.children));else if(o.id===n)return o}return null}function tP(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,j._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,en._)(o).concat([n])])})}();if("object"===(0,tS._)(i))return i.v}return null}function tD(e,n){var t=tR(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=tP(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function tT(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=(0,j._)(u.value,2),p=d[0],f=d[1];if(p!==n){var h=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:f,direction:r});if(("leftOf"!==r&&"above"!==r||!(h<=0))&&("rightOf"!==r&&"below"!==r||!(h<0))){var v=function(e,n,t){var r=(0,j._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,f,"leftOf"===r||"rightOf"===r?"y":"x");!(v<=0)&&(!o||o.distance>h||o.distance===h&&o.overlap<v)&&(o={key:p,rect:f,distance:h,overlap:v})}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var tA={top:0,bottom:0,left:0,right:0};function tB(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function tU(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating){e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});return}var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=tR(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=tI(e,r);if(!s||!tC(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:c,children:d},tO({id:n.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!c){tO({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});return}var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=u?[s,p]:[p,s];s.percent=100-p.percent,e.tiling={type:"split",stacked:c,children:f,percent:100};return}if(0===r.length)throw Error("Expected relativeTo length");var h=tI(e,t_(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var v=h.children.indexOf(s);h.children.splice(v,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!c){var g=h.children.indexOf(s);tO({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?g+1:g,children:h.children});return}if(!!h.stacked!=!!c){var m={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},y=u?[s,m]:[m,s],b=s.percent;s.percent=100-m.percent;var Z=h.children.indexOf(s);h.children[Z]={type:"split",stacked:c,children:y,percent:b};return}}function tO(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var c=r.reduce(function(e,n){return e+n.percent},0)/r.length,u=100/(100+c);r.forEach(function(e){e.percent=e.percent*u}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:c*u,activeIndex:a})}function tM(e,n){var t=tG(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,en._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function tL(e,n){e.panes.splice(n,1),0===e.activeIndex||n>e.activeIndex||(e.activeIndex=e.activeIndex-1)}function tX(e,n){var t=tR(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");tW(e,["floating",r])}else tL(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1){tL(i,l);return}tW(e,o)}function tW(e,n){var t=(0,tk._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=tI(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=t_(n),c=tI(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var u=c.children.indexOf(o);if(-1===u)throw Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce(function(e,n){return e+n.percent},0);s.forEach(function(e){e.percent=e.percent*d});return}var p=(0,j._)(s,1)[0],f=l.length>1?tI(e,t_(l)):null;if(!f){p.percent=100,e.tiling=p;return}if("split"!==f.type)throw Error("Expected split");var h=f.children.indexOf(c);if(-1===h)throw Error("Expected parentIndex");p.percent=c.percent,f.children[h]=p}function tN(e,n){var t=n.paneGroupPath,r=n.rect,i=tI(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");tW(e,t),tU(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function tz(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:tI(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");tX(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function tF(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=tI(e,t);if(!a||!tC(a))throw Error("Expected leftNode");var l=tI(e,t_(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),p=c-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var v=a.percent+s.percent,g=l.children.slice(c).reduce(function(e,n){return e+n.percent},0);if(r>v-o){if(a.percent=Math.min(g,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var m=r-v,y=u+1;m>0;){var b=l.children[y];if(b.percent>m){b.percent-=m;break}if(m-=b.percent,b.percent=0,y===l.children.length-1)break;y++}return}var Z=a.percent-r;s.percent=s.percent+Z,a.percent=r}function tV(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e.floating[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=!0,u=!1,s=void 0;try{for(var d,p=l.panes[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;n.add(f)}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e.tiling&&function e(t){if("paneGroup"!==t.type)return t.children.forEach(e);var r=!0,i=!1,o=void 0;try{for(var a,l=t.panes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;n.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(e.tiling),n}function tH(){var e=(0,eB._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return tH=function(){return e},e}function tj(){var e=(0,eB._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return tj=function(){return e},e}var t$={},tq=(0,eU.Ps)(tH()),tY=(0,eU.Ps)(tj()),tJ=t(41974),tK=t(38242),tQ=t(29574),t0=t(3702),t1=t(92674),t2=t.n(t1),t4=(0,tr.cn)(!1),t5=(0,tr.cn)({floating:[],tiling:null}),t3=t(81202),t7=t.n(t3),t6=t(57785),t8=t(80951),t9=t(85234),re=t.n(t9),rn=(0,tr.cn)([]),rt=(0,tr.cn)([]),rr=(0,tr.cn)([]),ri={x:0,y:0,width:0,height:0},ro={type:"commands",data:{autoFocus:!1}},ra=(0,t8.xu)(function(e){return(0,tr.cn)({paneId:e,type:"tile",rectAtom:(0,tr.cn)((0,eE._)({},ri)),data:(0,tr.cn)((0,eE._)({},ro)),isHidden:!1,isCommitted:!1})}),rl=(0,tr.cn)(null,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.commit,o=re()(),a=ra(o);return n(e(a).data,t),void 0!==i&&i&&n(a,function(e){return(0,tJ.Uy)(e,function(e){e.isCommitted=!0})}),o}),rc=(0,tr.cn)(function(e){return e(rn).map(function(n){return e(ra(n))})}),ru=(0,tr.cn)(function(e){return e(rc).filter(function(e){return!e.isHidden})}),rs=(0,tr.cn)(function(e){return e(rc).filter(function(e){return e.isHidden})}),rd=(0,tr.cn)(function(e){return e(rr).map(function(n){return e(rf(n))})}),rp=(0,t8.xu)(function(e){return(0,tr.cn)({handleId:e,rect:ri,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),rf=(0,t8.xu)(function(e){return(0,tr.cn)({id:e,rectAtom:(0,tr.cn)((0,eE._)({},ri)),panes:[],path:["tiling"],activeIndex:0})}),rh=(0,tr.cn)(function(){return 32}),rv=(0,tr.cn)({x:0,y:0,width:0,height:0}),rg=(0,tr.cn)({width:0,agentModeWidth:0}),rm=(0,tr.cn)(null,function(e,n,t){n(rg,function(n){return e(t4)?(0,eG._)((0,eE._)({},n),{agentModeWidth:t.width}):(0,eG._)((0,eE._)({},n),{width:t.width})})}),ry=(0,tr.cn)(null,function(e,n,t){n(rg,t)}),rb=(0,tr.cn)(function(e){return e(rg).width}),rZ=(0,tr.cn)(function(e){return e(rg).agentModeWidth}),rx=(0,tr.cn)(function(e){return{width:e(t4)?e(rg).agentModeWidth:e(rg).width}}),rw=t(25949),r_=(0,tr.cn)(null),rC=(0,tr.cn)(null,function(e,n,t){t!==e(r_)&&n(r_,t)}),rk=(0,tr.cn)(null,function(e,n,t){var r=ra(t);e(r).isCommitted||n(r,function(e){return(0,tJ.Uy)(e,function(e){e.isCommitted=!0})})}),rS=(0,tr.cn)(function(e){var n=e(r_);if(!n)return null;var t=e(ra(n)),r=e(t.data);return"markdown"===r.type?r.data.path:(0,rw.Ur)(r)&&r.data.path||null}),rI=(0,tr.cn)(!0),rR=(0,tr.cn)(!1),rE=(0,tr.cn)({tiling:null,floating:[]}),rG=(0,tr.cn)(function(e){return e(t4)?e(t5):e(rE)},function(e,n,t){n(e(t4)?t5:rE,t)}),rP=(0,tr.cn)(function(e){return e(rc).filter(function(n){return(0,rw.Ur)(e(n.data))})}),rD=(0,tr.cn)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(rc)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,rw.Ur)(e(a.data)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),rT=(0,tr.cn)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(rc)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.isCommitted||(0,rw.Ur)(e(a.data))))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),rA=(0,tr.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(ru)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),rB=(0,tr.cn)([]),rU=(0,tr.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(rs)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),rO=(0,tr.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(rc)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),rM=(0,tr.cn)(function(e){return e(rO).length}),rL=(0,tr.cn)(function(e){var n=e(rv);return!!(n.width&&n.height)}),rX=(0,tr.cn)(null),rW=(0,tr.cn)(function(e){var n=e(r_);if(!n)return null;var t=e(ra(n)).rectAtom,r=e(t),i=e(rh);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}),rN=(0,tr.cn)(null,function(e,n,t){var r=e(rc).find(function(n){var r=e(n.data);return(0,rw.Ur)(r)?t===(0,rw.DQ)(r):"markdown"===r.type&&t===r.data.path});r&&(n(rC,r.paneId),n(rk,r.paneId))}),rz=(0,tr.cn)(null);function rF(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function rV(e,n){var t,r,i,o,a,l,c,u,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,(s=Math.min(l=(i.x-r.x)*a,c=(r.x+r.width-i.x)*a,u=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===c?"right":s===u?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function rH(e){return"handle:"+e.leftPath.join(":")}function rj(e){return(0,tt.Z)(function(){return(0,t8.kv)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return!!(e.height===n.height&&e.width===n.width)})},[e])}function r$(e){return(0,tt.Z)(function(){return(0,t8.kv)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return!!(e.x===n.x&&e.y===n.y)})},[e])}var rq=(0,tr.cn)(function(e){return e(rR)?16:6}),rY=(0,tr.cn)(function(e){var n=e(rh),t=e(rx),r=e(rv),i=e(rq);return{headerHeight:n,inset:{top:0,bottom:i+2,left:i+t.width,right:i+2},gap:i,size:{width:r.width,height:r.height}}}),rJ=(0,tr.cn)(null,function(e,n,t){n(rv,t),n(rQ,e(rG))});function rK(e,n){return t7()(e,n)}var rQ=(0,tr.cn)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=ra(r),u=e(c);rK(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,tJ.Uy)(u,function(e){e.paneId=r,e.type=o,e.isHidden=a});rK(u,s)||n(c,s)},i=e(rn),o=e(rt),a=e(rr),l=new Set(i),c=new Set(o),u=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?tA:o,l=[],c=[],u=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},v={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:v,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),c.push.apply(c,(0,en._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,v=o.children.indexOf(t),g=o.children.length,m=o.stacked?a.height:a.width,y=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(m-(r*(g-1)+i*g))*h+i:p=(m-r*(g-1))*h,{width:p,height:f}),b=y.width,Z=y.height,x=function(){var e=a.x,n=a.y;if(0===v)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),w={x:x.x,y:x.y,height:Z,width:b};if(d=w,"paneGroup"===t.type){var _={x:w.x,y:w.y+i,width:w.width,height:w.height-i},C={x:_.x,y:_.y-i,width:_.width,height:i};s.push({id:t.id,rect:C,panes:t.panes,activeIndex:t.activeIndex,path:l}),c.push.apply(c,(0,en._)(t.panes.map(function(e,n){return{paneId:e,rect:_,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,w,(0,en._)(l).concat([r]))});if(0!==v){var k={x:w.x-(o.stacked?0:r),y:w.y-(o.stacked?r:0),width:o.stacked?w.width:r,height:o.stacked?r:w.height},S=t_(l),I=(0,en._)(S).concat([v-1]),R=tI(e,I);if(!R||!tC(R))throw Error("Expected leftNode");var E=void 0;0===R.percent?E="left":0===t.percent&&(E="right"),u.push({parentPath:S,leftPath:I,rightPath:l,stacked:o.stacked,rect:k,snapped:E})}}(n,f,p,["tiling",t])});var g={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=tB(e.rect,{inside:g,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,en._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:c,gutters:u,headers:s,floating:l}}(t,e(rY)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,v=f.map(rH);rK(o,v)||n(rt,v);var g=(0,en._)(d).concat((0,en._)(p)).map(function(e){return e.paneId});rK(i,g)||n(rn,(0,t6.Z)(g,{existing:i,getKey:function(e){return e}}));var m=[];h.forEach(function(t){u.delete(t.id);var r=rf(t.id),i=e(r);m.push(t.id),rK(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,tJ.Uy)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});rK(i,o)||n(r,o)}),rK(a,m)||n(rr,m),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:rH(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=rp(r.handleId);rK(e(i),r)||n(i,r)}),l.forEach(ra.remove),c.forEach(rp.remove),u.forEach(rf.remove);var y=e(r_);y&&l.has(y)&&n(r_,null),n(rG,t)}),r0=(0,tr.cn)(null,function(e,n){n(rn,[]),n(rr,[]),n(rt,[])}),r1=(0,tr.cn)(null,function(e,n){if(!e(t4)){n(r0),n(t4,!0),e(t5).tiling;var t=n(rl,{type:"agentProgress"},{commit:!0}),r={floating:[],tiling:null};tU(r,{id:t2()(),placement:"replace",relativeTo:["tiling"],panes:[t]}),n(rQ,r)}}),r2=(0,tr.cn)(null,function(e,n){e(t4)&&(n(r0),n(t4,!1),n(rQ,e(rE)))}),r4=t(80786),r5=t(21962),r3=t(68140);function r7(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.codeEditorPath,f=e.isHTML,h=e.isStacked,v=e.isExtension,g=e.isInPopup,m=e.showAIPane,y=(t=(n={isStacked:h,isHTML:f,isExtension:v,isInPopup:g,codeEditorPath:p,showAIPane:void 0!==m&&m,isBlankRepl:e.isBlankRepl}).isStacked,r=n.isHTML,i=n.isExtension,o=n.isInPopup,l=void 0===(a=n.codeEditorPath)?"":a,c=n.showAIPane,u=n.isBlankRepl,s={config:{paneId:t2()(),pane:{type:"config",flow:"incompleteConfig"}},codeEditor:{paneId:t2()(),pane:{type:l.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:l}}},output:{paneId:t2()(),pane:{type:r?"webview":"runnerOutput"}},shell:{paneId:t2()(),pane:{type:"shell"}},commands:{paneId:t2()(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:t2()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:t2()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:t2()(),pane:{type:"docs",data:{url:r3.TT.EXTENSIONS}}}},d={},Object.values(s).forEach(function(e){var n=e.paneId,t=e.pane;d[n]=t}),{layout:function(e){var n=e.configId,t=e.codeEditorId,r=e.outputId,i=e.shellId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.ghostwriterId,c=e.isStacked,u=e.isExtension,s=e.isInPopup,d=e.showAIPane,p=e.isBlankRepl;if(s)return{floating:[],tiling:null};var f=p?[n]:[t],h=[r,i];d&&(h.unshift(l),(0,eZ.j)(eZ.U3.AI_PANE_IN_DEFAULT_LAYOUT_SHOWN));var v=c?{type:"split",stacked:!0,percent:100,children:[{id:t2()(),percent:60,type:"paneGroup",panes:f,activeIndex:0},{id:t2()(),percent:40,type:"paneGroup",panes:h,activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:t2()(),percent:55,type:"paneGroup",panes:f,activeIndex:0},{id:t2()(),percent:45,type:"paneGroup",panes:h,activeIndex:0}]};return u&&(v=c?{type:"split",stacked:!0,percent:100,children:[{id:t2()(),percent:40,type:"paneGroup",panes:f,activeIndex:0},{id:t2()(),percent:60,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:t2()(),percent:55,type:"paneGroup",panes:f,activeIndex:0},{id:t2()(),percent:45,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}),{floating:[],tiling:v}}({configId:s.config.paneId,codeEditorId:s.codeEditor.paneId,outputId:s.output.paneId,shellId:s.shell.paneId,commandsId:s.commands.paneId,extensionDevtoolsId:s.extensionDevtools.paneId,extensionDocsId:s.extensionDocs.paneId,ghostwriterId:s.ghostwriter.paneId,isStacked:t,isExtension:i,isInPopup:o,showAIPane:c,isBlankRepl:u}),data:d});return{data:y.data,layout:y.layout,type:"default",sidebarPercent:15}}var r6=(0,tr.cn)(new Map),r8=t(82973),r9=(0,tr.cn)(null),ie=(0,tr.cn)(null,function(e,n,t){r8.Z.set(io(t.popupId),Date.now()+6048e5),r8.Z.set(ii(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=r8.Z.keys().filter(function(e){return e.startsWith(ir)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=r8.Z.get(c);if("number"==typeof u&&u<Date.now()){var s=c.split(":")[1];r8.Z.remove(io(s)),r8.Z.remove(ii(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),it=(0,tr.cn)(function(e){return!!e(r9)}),ir="popup-id-ttl:";function ii(e){return"".concat("popup-id-data:").concat(e)}function io(e){return"".concat(ir).concat(e)}function ia(){var e=(0,eB._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return ia=function(){return e},e}var il={},ic=(0,eU.Ps)(ia());function iu(e,n){return Math.min(Math.max(n.min,e),n.max)}var is=(0,tr.cn)(function(e){var n=e(rv);return iu(e(rb)/n.width*100,{min:0,max:100})}),id=(0,tr.cn)(function(e){var n=e(rv);return iu(e(rZ)/n.width*100,{min:0,max:100})}),ip=(0,tr.cn)(function(e){var n=e(rE),t=e(t5),r=tV(n);if(t){var i=!0,o=!1,a=void 0;try{for(var l,c=tV(t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r.add(u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var s={},d=!0,p=!1,f=void 0;try{for(var h,v=r[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value,m=e(ra(g));s[g]=e(m.data)}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return{layout:n,data:s,sidebarPercent:e(is),agentMode:null!==t.tiling?{isActive:e(t4),layout:t}:void 0,agentModeSidebarPercent:e(id)}}),ih=(0,tr.cn)(null),iv=(0,tr.cn)(null),ig=(0,tr.cn)(null);function im(){return(im=(0,eR._)(function(e,n){var t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===tK.l||void 0===tK.l?void 0:tK.l.mutate({mutation:ic,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:if((null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})).apply(this,arguments)}var iy=(0,tr.cn)(null,(r=(0,eR._)(function(e,n,t){var r,i,o,a,l,c,u;return(0,eP.Jh)(this,function(s){switch(s.label){case 0:if((r=e(iv))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(rL)||(i=e(ip),o=t.replId,a=e(ih),!t.force&&t7()(a,i)))return[2];if(l=e(r9))return n(ie,{popupId:l,state:i}),n(ih,i),[2];return n(ig,c=re()()),[4,function(e,n){return im.apply(this,arguments)}(o,i)];case 1:if(u=s.sent(),e(ig)!==c)return[2];if(n(ig,null),u.retry)return n(iv,{timestamp:Date.now(),retry:!0}),[2];if(!u.success)return n(iv,{timestamp:Date.now(),retry:!1}),[2];return n(ih,i),[2]}})}),function(e,n,t){return r.apply(this,arguments)})),ib=(0,tr.cn)(null),iZ=(0,tr.cn)(null,function(e,n,t){if("end"===t.type){n(ib,null);return}if("update"===t.type){var r=e(ib);if(!r){var i=Error("Expected tilingResize");throw n(rX,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,c=r.resizeDistance,u=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/c*100;n(rQ,(0,tJ.Uy)(u,function(e){tF(e,{leftPath:a,percent:d,snapPercent:s})}));return}var p=e(rG),f=t.stacked?window.innerHeight:window.innerWidth,h=tI(p,t.leftPath);if(!h||!tC(h)){var v=Error("Expected left node");throw n(rX,{error:v,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),v}var g=t_(t.leftPath),m=h.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=tI(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=t_(t);o.length;){var a=tI(e,o);if(!a)break;o=t_(o),"split"===a.type&&a.stacked===r.stacked&&(i=a.percent/100*i)}return i}(n,{splitPath:t}),o=tI(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:g,layout:p,tilingOptions:e(rY)})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(ib,{stacked:t.stacked,leftPath:t.leftPath,startPercent:m,resizeDistance:y,snapPercent:30/f*100,initialLayout:p})});function ix(e){return(0,tt.Z)(function(){return rp(e)},[e])}function iw(e){var n=ix(e);return(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){return e.rect})},[n])}function i_(e){return(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(ib);return!!t&&e===rH({leftPath:t.leftPath})})},[e])}function iC(e){var n=ix(e);return(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){return e.stacked})},[n])}var ik=(0,tr.cn)(null,function(e,n){var t=e(rx);0!==t.width&&(n(rm,(0,eG._)((0,eE._)({},t),{width:0})),n(rQ,e(rG)))}),iS=(0,tr.cn)(null,function(e,n){var t=e(rx),r=t.width>0?0:iM;n(rm,(0,eG._)((0,eE._)({},t),{width:r})),n(rQ,e(rG))}),iI=(0,tr.cn)(null),iR=(0,tr.cn)(null,function(e,n){n(iI,{sidebarWidthStart:e(rx).width})}),iE=(0,tr.cn)(null,function(e,n,t){var r=t.deltaX,i=e(iI);if(i){var o=e(rv),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,e(t4)?o.width/2:iB)))<iL&&!(r>0)){if(iL-a<iU)return;a=0}n(rm,{width:a}),n(rQ,e(rG))}}),iG=(0,tr.cn)(null,function(e,n){if(e(iI)){var t=e(rx);t.width<iL&&(n(rm,{width:0===t.width?0:iL}),n(rQ,e(rG))),n(iI,null)}}),iP=(0,tr.cn)(function(e){return!!e(iI)}),iD=(0,tr.cn)(function(e){var n=e(rR);return e(iP)?{width:n?4:1,height:e(iT).height}:{width:n?6:2,height:24}}),iT=(0,tr.cn)(function(e){var n=e(rv).height,t=e(rx),r=e(rq);return{x:t.width,y:0,height:n-r,width:r}}),iA=(0,tr.cn)(function(e){return e(iT).height}),iB=600,iU=80,iO=(0,tr.cn)(function(e){return e(rx).width}),iM=280,iL=180,iX=(0,tr.cn)(function(e){return e(iO)>0}),iW=(0,tr.cn)(!1);(i=_||(_={})).MAIN="MAIN",i.CODE_SEARCH="CODE_SEARCH",i.AI_CHAT="AI_CHAT";var iN=(0,tr.cn)("MAIN"),iz=(0,tr.cn)(function(e){return e(t4)?"AI_CHAT":e(iN)}),iF=(0,tr.cn)({initialQuery:"",initialReplacement:"",initialIncludeGlob:"",initialExcludeGlob:""}),iV=(0,tr.cn)({focusSearchInput:function(){}}),iH=(0,tr.cn)(function(e){return e(iV)},function(e,n,t){n(iV,{focusSearchInput:t.focusSearchInput})}),ij=(0,tr.cn)(null,function(e,n,t){var r=t.initialQuery,i=void 0===r?"":r,o=t.initialReplacement,a=void 0===o?"":o,l=t.initialIncludeGlob,c=void 0===l?"":l,u=t.initialExcludeGlob,s=void 0===u?"":u,d=e(iX);(i||a||c||s)&&n(iF,{initialQuery:i,initialReplacement:a,initialIncludeGlob:c,initialExcludeGlob:s}),n(iN,"CODE_SEARCH"),d||(n(iW,!0),n(iS)),e(iH).focusSearchInput()}),i$=(0,tr.cn)(null,function(e,n){var t=e(iX),r=e(iW);t&&r&&(n(iW,!1),n(iS)),n(iN,"MAIN")}),iq=(0,tr.cn)(null,function(e,n,t){var r=window.innerWidth,i=Math.floor(t.sidebarPercent)>0?Math.min(t.sidebarPercent/100*r,iB):0;n(ry,{width:i>0?Math.max(iM,i):Math.max(0,i),agentModeWidth:void 0!==t.agentModeSidebarPercent?Math.floor(t.agentModeSidebarPercent)>0?Math.min(t.agentModeSidebarPercent/100*r,r/2):0:.3*r})}),iY=(0,tr.cn)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebarPercent,a=t.type,l=t.agentMode,c=t.agentModeSidebarPercent;Object.entries(r).forEach(function(t){var r=(0,j._)(t,2),i=r[0],o=r[1],a=ra(i);n(a,(0,tJ.Uy)(e(a),function(e){e.isCommitted=!0})),n(e(a).data,o)}),n(rE,i),l&&(n(t5,l.layout),n(t4,l.isActive)),n(iq,{sidebarPercent:o,agentModeSidebarPercent:c}),n(rQ,(null==l?void 0:l.isActive)?l.layout:i),n(rz,a),n(ih,e(ip))}),iJ=(0,tr.cn)(!1),iK=(0,tr.cn)(function(e){return e(iJ)?e(r_):null}),iQ=(0,tr.cn)(null,function(e,n,t){n(rC,t),n(iJ,!0)}),i0=(0,tr.cn)(null,function(e,n,t){n(iJ,!0);var r=tG(e(rG),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(rX,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(rX,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(rC,o)}),i1=(0,tr.cn)(null,function(e,n){e(it)||n(iJ,!1)}),i2=(0,tr.cn)(null,function(e,n,t){e(iK)===t?n(i1):n(iQ,t)}),i4=(0,tr.cn)(null,function(e,n,t){var r=tG(e(rG),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(rX,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(rX,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(i2,o)}),i5=(0,tr.cn)(function(e){var n=e(rv);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}}),i3=(0,tr.cn)(function(e){var n=e(rh),t=e(i5);return{x:t.x,y:t.y,width:t.width,height:n}}),i7=(0,tr.cn)(function(e){var n=e(rh),t=e(i5);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),i6=(0,tr.cn)(null,function(e,n,t){var r=tG(e(rG),t);if(!r)return null;n(rC,r.panes[r.activeIndex])}),i8=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tR(r,t);if(!i)throw Error("Expected pane");var o=!i.paneGroup.panes.some(function(e){return e!==t}),a=t===e(r_),l=tD(r,t),c=(0,tJ.Uy)(r,function(e){try{tX(e,t)}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(rQ,c),o&&e(iJ)&&!e(it)&&n(iJ,!1),a&&(o||n(i6,i.paneGroup.id),o&&l)){do"split"===l.type&&(l=l.children[0]);while("paneGroup"!==l.type);n(i6,l.id)}}),i9=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tR(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,tJ.Uy)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;tX(e,c)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(rQ,a)}}),oe=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tR(r,t);i&&n(rQ,(0,tJ.Uy)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,c=i.paneGroup.panes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;n&&tX(e,u),u===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}))}),on=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tG(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(rX,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,tJ.Uy)(r,function(e){try{i.panes.forEach(function(n){tX(e,n)})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(iJ)&&!e(it)&&n(iJ,!1),n(rQ,a)}),ot=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tR(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(rX,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=re()();n(e(ra(a)).data,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,tJ.Uy)(r,function(e){try{tU(e,{id:re()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(rQ,l),n(rC,a)}),or=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=re()();n(e(ra(i)).data,t.pane);var o=(0,tJ.Uy)(r,function(e){try{tU(e,{id:re()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(rQ,o),i}),oi=(0,tr.cn)(null,function(e,n,t){var r=e(rG);n(rQ,(0,tJ.Uy)(r,function(e){tF(e,{leftPath:t.leftPath,percent:t.percent})}))}),oo=(0,tr.cn)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(rX,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(rG),o=t.panes.map(function(){return re()()}),a=(0,tJ.Uy)(i,function(e){try{tU(e,{id:re()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(rQ,a),t.panes.forEach(function(t,r){var i=o[r];n(e(ra(i)).data,t);var a=(0,rw.b)(t.type)?e(rc).find(function(n){return e(n.data).type===t.type&&n.paneId!==i}):null;a&&n(i8,a.paneId)}),t.commit){var l=!0,c=!1,u=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(rk,p)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}t.makeActive&&n(rC,o[0])}),oa={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},ol=(0,tr.cn)(null,function(e,n,t){n(or,{pane:t.pane,relativeTo:["tiling"],placement:oa[t.edge]})}),oc=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=re()(),o=re()(),a=(0,tJ.Uy)(r,function(e){try{tU(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(rQ,a),n(e(ra(i)).data,t.pane),t.makeActive&&(n(rC,i),t.makeModal&&n(eg.Rq,o)),i}),ou=(0,tr.cn)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(rG);if("tile"===e(ra(r)).type?n(rQ,(0,tJ.Uy)(o,function(e){try{!function(e,n){var t=tR(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=tI(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=tI(e,t_(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=p===f.children.length-1,g=v?(0,en._)(s.slice(0,-1)).concat([p-1]):s,m=v?f.children[p-1].percent-(h-d.percent):h;tF(e,{leftPath:g,percent:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(rX,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(rQ,(0,tJ.Uy)(o,function(e){try{!function(e,n){var t=tR(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(rX,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=tR(o,r),l=e(r_);if(!a)throw Error("Expected pane");if(!l)return;var c=tR(o,l);if(!c)throw Error("Expected active pane");if(c.paneGroup.id!==a.paneGroup.id)return}n(rC,r)}),os=(0,tr.cn)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(rG),i=t.panes.map(function(){return re()()}),o=(0,tJ.Uy)(r,function(e){try{tM(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(rQ,o),t.panes.forEach(function(r,o){var a=i[o];n(e(ra(a)).data,r);var l=(0,rw.b)(r.type)?e(rc).find(function(n){return e(n.data).type===r.type&&n.paneId!==a}):null;l&&n(i8,l.paneId),t.commit&&n(rk,a)}),t.activate&&n(ou,{paneId:(0,j._)(i,1)[0],activate:!0}),i}),od=(0,tr.cn)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.placement,a=e(rG);if(!a.tiling){var l=n(or,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(rC,l),l}if("after"===o.type){var c=tR(a,o.paneId);if(c){var u=(0,j._)(n(os,{panes:[r],paneGroupId:c.paneGroup.id,index:c.index+1,activate:i}),1)[0];return i&&n(rC,u),u}}if("secondary"===o.type&&o.relativeTo){var s=tD(a,o.relativeTo);if(s){if("paneGroup"===s.type){var d=(0,j._)(n(os,{panes:[r],paneGroupId:s.id,activate:i}),1)[0];return i&&n(rC,d),d}var p=n(or,{pane:r,relativeTo:o.relativeTo,placement:"rightOf"});return i&&n(rC,p),p}var f=tR(a,o.relativeTo);if((null==f?void 0:f.paneGroup.type)==="floatingPaneGroup"){var h=e(ra(o.relativeTo)),v=e(h.rectAtom);return n(oc,{rect:{x:v.x+v.width,y:v.y,width:v.width,height:v.height},pane:r,makeActive:i})}}var g=n(or,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(rC,g),g}),op=t(73878),of=(0,tr.cn)(null,function(e,n,t){n(e(ra(t.paneId)).data,t.pane),t.makeActive&&n(ou,{paneId:t.paneId,activate:!0}),t.commit&&n(rk,t.paneId)}),oh=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tR(r,t);if(!i){var o=Error("Expected selectedPane");throw n(rX,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(rf(i.paneGroup.id),function(e){return(0,tJ.Uy)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,c=void 0;try{for(var u,s=i.paneGroup.panes[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=ra(d);n(p,function(e){return(0,tJ.Uy)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}n(rG,(0,tJ.Uy)(r,function(e){try{!function(e,n){var t=tR(e,n);if(!(null==t?void 0:t.paneGroup))throw Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw Error("Expected index");r.activeIndex=i}(e,t)}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(ra(t)).rectAtom).width?n(ou,{paneId:t,activate:!0}):n(rC,t)}),ov=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=tE(r,"topRight");if(!i||!r.tiling){var o=n(or,{pane:t,relativeTo:["tiling"],placement:"replace"});n(rk,o);return}if("paneGroup"===r.tiling.type){var a=n(or,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(rk,a);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var l=r.tiling.stacked,c=n(or,{pane:t,relativeTo:i.path,placement:l?"rightOf":"above"});n(rk,c);return}n(os,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),og=(0,tr.cn)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(rc).find(function(n){return e(n.data).type===r.type});if(o){i&&(n(oh,o.paneId),n(rk,o.paneId));return}n(ov,r)}),om=(0,tr.cn)(null,function(e,n,t){e(rc).find(function(n){var r,i=e(n.data);return"webview"===i.type&&(r=i&&i.data,!t&&!r||!!t&&!!r&&t.port===r.port&&t.portType===r.portType&&t.path===r.path)})||n(ov,{type:"webview",data:t})});(0,tr.cn)(null,function(e,n,t){var r=e(rc).find(function(n){return e(n.data).type===t.type});if(r){var i=e(rG),o=(0,tJ.Uy)(i,function(e){try{tX(e,r.paneId)}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),e}});n(rQ,o)}});var oy=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=(0,tJ.Uy)(r,function(e){var r=tR(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(rX,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=tG(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(rX,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{tX(e,t.paneId),tM(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(rk,t.paneId)}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(rQ,i)}),ob=(0,tr.cn)(null,function(e,n,t){var r=e(r_);if(r){var i=e(rG),o=tR(i,r);if(o){var a=o.paneGroup,l=tT({relativeTo:r,rects:new Map(e(rc).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),c=l?tR(i,l):null;if(c){n(oy,{paneId:r,toPaneGroupId:c.paneGroup.id});return}var u=a.panes.find(function(e){return e!==r});u&&n(rQ,(0,tJ.Uy)(i,function(e){tX(e,r),tU(e,{id:re()(),relativeTo:u,panes:[r],placement:t})}))}}}),oZ=(0,tr.cn)(!1),ox=(0,tr.cn)(null,function(e,n,t){var r=e(rP).map(function(n){return{paneId:n.paneId,path:(0,rw.DQ)(e(n.data))}}).filter(function(e){return t===e.path}),i=[],o=e(rG),a=(0,tJ.Uy)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=tR(e,u);if(!s){var d=Error("Expected pane");throw n(rX,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?tX(e,u):i.push(u)}}catch(e){o=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}}),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(of,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(rQ,a)}),ow=(0,tr.cn)(null,function(e,n,t){var r=t.node.path;if(t.eventType===op.kS.Delete){n(ox,r);return}var i=e(rP).filter(function(n){return(0,rw.DQ)(e(n.data))===r}),o={type:(0,rw.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(of,{paneId:d,pane:o})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}),o_=(0,tr.cn)(null,function(e,n,t){var r=e(r_),i=e(rG);if(r){var o=tR(i,r);if(o){n(os,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length});return}}var a=tE(i,"topLeft");if(a){n(os,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});return}var l=i.floating.length?i.floating[0]:null;if(l){n(os,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});return}n(oo,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),oC=(0,tr.cn)(null,function(e,n){n(o_,[{type:"commands",data:{autoFocus:!0}}])}),ok=(0,tr.cn)(null,function(e,n){var t=e(r_);return!!t&&(n(i8,t),!0)}),oS=(0,tr.cn)(null,function(e,n,t){var r=e(r_);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=tR(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(rG),{paneId:r,dir:t});i&&n(oh,i)}}),oI=(0,tr.cn)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(of,{paneId:r,pane:i});var o=(0,rw.b)(i.type)?e(rc).find(function(n){return e(n.data).type===i.type&&n.paneId!==r}):null;if(o){var a=tR(e(rG),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1){n(of,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});return}n(i8,o.paneId)}}),oR=(0,tr.cn)(null,function(e,n,t){var r=e(e(ra(t.b)).data);n(of,{paneId:t.a,pane:r});var i=tR(e(rG),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1){n(oI,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});return}n(i8,t.b)}),oE=(0,tr.cn)(null,function(e,n,t){var r,i=tE(e(rG),"topRight"),o=null===(r=t.activate)||void 0===r||r,a=e(rc).find(function(n){return e(n.data).type===t.pane.type});if((0,rw.b)(t.pane.type)&&a){n(oh,a.paneId),n(of,{paneId:a.paneId,pane:t.pane,makeActive:o});return}if(!i){n(oo,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:o,commit:t.commit});return}var l=i.paneGroup.panes.find(function(n){var t=e(ra(n));if(t.isHidden)return!1;var r=e(t.data);return!t.isCommitted&&!(0,rw.RX)(r.type)});if(l){n(of,{paneId:l,pane:t.pane,makeActive:o});return}n(os,{panes:[t.pane],paneGroupId:i.paneGroup.id,activate:o,commit:t.commit})}),oG=(0,q.createContext)(null);function oP(e){var n=e.children,t=e.savedLayoutState,r=e.isHTML,i=void 0!==r&&r,o=e.isStacked,a=void 0!==o&&o,l=e.isExtension,c=void 0!==l&&l,u=e.isBlankRepl,s=e.popupId,d=e.initialPane,p=e.enterInAgentMode,f=(0,J.P5)({controlName:"flag-default-layout-ai-pane"}),h=(0,J.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),v=(0,tQ.Gn)("highlightAiChatInDefaultLayout").preferences,g=(0,j._)((0,q.useState)(function(){var e=(0,tr.MT)(),n=null!=t?t:r7({isHTML:i,isStacked:a,isExtension:c,isInPopup:!!s,showAIPane:f&&!1!==v.highlightAiChatInDefaultLayout,isBlankRepl:u});return s&&(e.set(r9,s),e.set(iJ,!0),n=(0,eG._)((0,eE._)({},n),{sidebarPercent:0})),e.set(iY,n),e.set(r6,new Map([])),d&&e.set(oE,{pane:d,commit:!0}),h&&p&&e.set(r1),e}),1)[0];return(0,$.tZ)(oG.Provider,{value:g,children:n})}function oD(){var e=(0,q.useContext)(oG);if(!e)throw Error("Expected store in context");return e}function oT(e){return(0,r4.Dv)(e,{store:oD()})}function oA(e){return(0,t0.b)(e,oD())}var oB=function(e){return(0,r4.b9)(e,{store:oD()})};function oU(e){return(0,r5.lV)((0,q.useCallback)(function(n){return n(e)},[e]),{store:oD()})}var oO=(0,tr.cn)({}),oM=(0,tr.cn)(null),oL=(0,tr.cn)(null,(o=(0,eR._)(function(e,n,t){var r,i,o,a,l,c;return(0,eP.Jh)(this,function(u){switch(u.label){case 0:r=e(oO),n(oO,(0,tJ.Uy)(r,function(e){if(!t.newAssociation){delete e[t.fileExtension];return}e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,null===tK.l||void 0===tK.l?void 0:tK.l.mutate({mutation:tY,variables:{input:t}})];case 2:if((null==(a=u.sent())?void 0:null===(o=a.data)||void 0===o?void 0:null===(i=o.setFiletypeAssociation)||void 0===i?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a?void 0:null===(c=a.data)||void 0===c?void 0:null===(l=c.setFiletypeAssociation)||void 0===l?void 0:l.message));return[3,4];case 3:return u.sent(),n(oO,r),[3,4];case 4:return[2]}})}),function(e,n,t){return o.apply(this,arguments)})),oX=t(86763),oW=t.n(oX),oN=t(95281),oz=t(22192),oF=t(64993),oV=(0,tr.cn)(null),oH=(0,oz.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),oj=oH.cssVars,o$=oH.styleTokens,oq=(0,t8.kv)(oV,function(e){return(0,ee._)({},oj.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(Q.TV.foregroundDefault):"1px solid ".concat(Q.TV.accentPrimaryDefault))},t7()),oY=(0,t8.kv)(oV,function(e){return null==e?void 0:e.rect},t7()),oJ=(0,t8.kv)(oY,function(e){var n;return e?(n={},(0,ee._)(n,oj.width,e.width+"px"),(0,ee._)(n,oj.height,e.height+"px"),n):null},t7()),oK=(0,t8.kv)(oY,function(e){var n;return e?(n={},(0,ee._)(n,oj.x,e.x+"px"),(0,ee._)(n,oj.y,e.y+"px"),n):null},t7()),oQ=(0,t8.kv)(oV,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,ee._)(n,oj.zIndex,oF.M.detachPreview.toString()),(0,ee._)(n,oj.borderRadius,"100%"),(0,ee._)(n,oj.backgroundColor,"transparent"),n):(t={},(0,ee._)(t,oj.zIndex,oF.M.dropPreview.toString()),(0,ee._)(t,oj.borderRadius,"8px"),(0,ee._)(t,oj.backgroundColor,Q.TV.accentPrimaryDimmer),t):null},t7()),o0=(0,t8.kv)(oV,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,ee._)(t,oj.opacity,(.5*e.progress).toString()),(0,ee._)(t,oj.visiblity,"visible"),t):(r={},(0,ee._)(r,oj.opacity,"0.2"),(0,ee._)(r,oj.visiblity,"visible"),r):(n={},(0,ee._)(n,oj.opacity,"0"),(0,ee._)(n,oj.visiblity,"hidden"),n)},t7()),o1=(0,t8.kv)(oV,function(e){return(0,ee._)({},oj.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},t7()),o2=(0,t8.kv)(oV,function(e){return(0,ee._)({},oj.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},t7()),o4=(0,ek.X)({root:[{position:"absolute",pointerEvents:"none",opacity:o$.opacity,width:o$.width,height:o$.height,transform:"translate(".concat(o$.x,", ").concat(o$.y,")"),backgroundColor:o$.backgroundColor,borderRadius:o$.borderRadius,border:o$.border,zIndex:o$.zIndex,visibility:o$.visiblity,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(Q.TV.backgroundHighest,")"),opacity:o$.innerOpacity,transform:"scale(".concat(o$.innerScale,")")}]}),o5=(0,q.memo)(function(){var e=(0,q.useRef)(null);(0,oN.j)(e,oA(oK)),(0,oN.j)(e,oA(oJ)),(0,oN.j)(e,oA(oq)),(0,oN.j)(e,oA(oQ)),(0,oN.j)(e,oA(o0));var n=(0,q.useRef)(null);return(0,oN.j)(n,oA(o1)),(0,oN.j)(n,oA(o2)),(0,$.tZ)("div",{ref:e,css:o4.root,children:(0,$.tZ)("div",{ref:n,css:o4.inner})})}),o3=(0,tr.cn)(null,function(e,n){n(oV,{type:"dropPreview",rect:e(o6)})}),o7=(0,tr.cn)(null,function(e,n,t){n(oV,null),n(oZ,!1),n(oo,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),o6=(0,tr.cn)(function(e){if(e(it))return e(i5);var n=e(rv),t=n.width,r=n.height,i=e(rx),o=e(rq);return{x:Math.round(i.width+o),y:0,width:t-i.width-2*o,height:r-o}}),o8={width:100,height:200},o9={width:200,height:100},ae=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-o9.width/2-i/2,a=(n.height-r)/2-o8.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:o9.width,height:o9.height}},below:{visible:!1,rect:{x:o,y:n.height-o9.height-r,width:o9.width,height:o9.height}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:o8.width,height:o8.height}},rightOf:{visible:!1,rect:{x:n.width-o8.width-r,y:a,width:o8.width,height:o8.height}}}},an=["above","rightOf","leftOf","below","middle"],at=(0,tr.cn)(null),ar=(0,tr.cn)(function(e){var n=e(at);if(!n)return null;var t=tG(e(rG),n.paneGroupId);return t&&t.panes[t.activeIndex]||null});(0,tr.cn)(function(e){var n=e(rv),t=e(rh),r=e(iO),i=e(rq);return{x:n.x+r+i,y:n.y-t-i,width:n.width-r-2*i,height:n.height-i}});var ai=(0,t8.kv)(at,function(e){return null==e?void 0:e.dropPoints}),ao=(0,tr.cn)(null,function(e,n,t){if(!e(iJ)){var r=e(rv),i=tG(e(rG),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(rX,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(ra(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(rh),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x),d=e(rq);n(at,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1,dropPoints:"floating"===a.type?ae({container:r,sidebarWidth:e(iO),gap:d}):null})}}),aa=(0,tr.cn)(null,function(e,n,t){if(!e(iJ)){var r=e(at);if(!r){n(oV,null);return}var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(rG),c=tG(e(rG),o);if(!c){var u=Error("Expected paneGroup");throw n(rX,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=tR(l,s);if(!d){var p=Error("Expected pane");throw n(rX,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),p}var f=ra(s),h=rf(d.paneGroup.id),v=e(rh),g=Math.max(Math.abs(i.x),Math.abs(i.y)),m=g>=50,y=g>0;if(m&&!d.floating){var b=e(f).rectAtom,Z=e(b),x=(0,tJ.Uy)(l,function(e){try{tN(e,{paneGroupPath:d.paneGroupPath,rect:{x:Z.x+i.x,y:Z.y-v+i.y,width:Z.width,height:Z.height+v}})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(rQ,x),n(ac,t.mouse);return}var w=e(h),_=e(f);c.id===e(eg.Rq)&&n(eg.Rq,null);var C="floating"===r.startType?tB({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(rv),minVisibleX:2*v,minVisibleY:v}):{x:a.x+i.x,y:a.y+i.y},k=C.x,S=C.y;if(n(w.rectAtom,function(e){return(0,tJ.Uy)(e,function(e){e.x=k,e.y=S})}),n(_.rectAtom,function(e){return(0,tJ.Uy)(e,function(e){e.x=k,e.y=S+v})}),!m&&!d.floating){var I=r.startPoint,R=1-.7*(1-Math.sqrt(1-Math.pow(g/50,2)));n(oV,{type:"detachPreview",rect:{x:I.x-50,y:I.y-50,width:100,height:100},progress:g/50}),n(at,(0,tJ.Uy)(r,function(e){e.scale=R,e.movedAtAll=e.movedAtAll||y}));return}var E=e(rq);if(r.dropPoints){n(at,function(n){return(0,tJ.Uy)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},u=null,s=null;if(a.length){var d=!0,p=!1,f=void 0;try{for(var h,v=a[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=(0,j._)(h.value,2),m=g[0],y=g[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(rF(l,b)){u=m,s=y;break}}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}if(e.middle.visible=!!s,s){var Z={width:Math.min(100,s.width),height:Math.min(100,s.height)};e.middle.paneId=u,e.middle.rect={x:s.x+s.width/2-Z.width/2,y:s.y-o+(s.height+o)/2-Z.height/2-r,width:Z.width,height:Z.height+o/2}}}else{var x={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},w={width:Math.min(100,x.width),height:Math.min(100,x.height)};e.middle.rect={x:x.x+x.width/2-w.width/2,y:x.height/2-w.height/2,width:w.width,height:w.height},e.middle.visible=!0}var _=null,C=!0,k=!1,S=void 0;try{for(var I,R=an[Symbol.iterator]();!(C=(I=R.next()).done);C=!0){var E=I.value,G=e[E].rect;if(rF(c,G)){_=E;break}}}catch(e){k=!0,S=e}finally{try{C||null==R.return||R.return()}finally{if(k)throw S}}var P=!0,D=!1,T=void 0;try{for(var A,B=an[Symbol.iterator]();!(P=(A=B.next()).done);P=!0){var U=A.value;e[U].visible=!_||U===_}}catch(e){D=!0,T=e}finally{try{P||null==B.return||B.return()}finally{if(D)throw T}}}(n.dropPoints,{paneRects:e(al),container:e(rv),sidebarWidth:e(iO),headerHeight:e(rh),gap:E,mouse:t.mouse})})});return}if(!d.floating)throw Error("Expected floating pane");n(ac,t.mouse)}}),al=(0,tr.cn)(function(e){return e(rc).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),ac=(0,tr.cn)(null,function(e,n,t){var r=e(rh),i=e(rv),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,u=!1,s=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,j._)(d.value,2),h=f[0],v=f[1],g={x:v.x,y:v.y-i,width:v.width,height:i},m={x:g.x-a/2,y:g.y-a/2,width:g.width+a,height:i+a/2};if(rF(l,m))return{dropPreview:g,drop:{type:"insert",paneId:h}};var y={x:v.x,y:v.y-i,width:v.width,height:v.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(rF(l,b)){var Z=rV(l,y);return{dropPreview:Z.rect,drop:{type:"split",relativeTo:h,placement:Z.placement}}}}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}var x=rV(l,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:x.rect,drop:{type:"split",relativeTo:["tiling"],placement:x.placement}}}({views:e(al),container:i,mouse:t,headerHeight:r,sidebarWidth:e(iO),gap:e(rq)}),a=o.drop;n(oV,{type:"dropPreview",rect:o.dropPreview}),n(at,function(e){return(0,tJ.Uy)(e,function(e){e&&(e.drop=a,e.movedAtAll=!0)})})}),au=(0,tr.cn)(null,function(e,n,t){var r=t.delta;if(!e(iJ)){n(oV,null);var i=e(at);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(rG),u=tG(e(rG),o);if(!u){var s=Error("Expected paneGroup");throw n(rX,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],p=tR(c,d);if(!p){var f=Error("Expected pane");throw n(rX,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,tJ.Uy)(c,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=tI(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var c=e(rh),u=tB({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(rv),minVisibleX:2*c,minVisibleY:c}),s=u.x,f=u.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(rk,e)}),"split"===a.type){if(null===t.tiling){var h=re()();try{tU(t,{id:re()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=tR(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;tW(e,o.paneGroupPath),tU(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var v=tR(t,a.paneId);p.paneGroup.panes.forEach(function(e){tz(t,{paneId:e,paneGroupPath:(null==v?void 0:v.paneGroupPath)||["tiling"],activate:!1})})}});n(at,null),n(rQ,h),(null==a?void 0:a.type)==="insert"&&n(oh,d)}}});function as(e){return(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(at);return t&&e===t.paneGroupId?t:null})},[e])}function ad(e){return(0,tt.Z)(function(){return(0,t8.kv)(rG,function(n){return tG(n,e)})},[e])}function ap(e){var n=ad(e);return(0,tt.Z)(function(){return(0,tr.cn)(function(e){if(e(it))return!0;if(!e(iJ))return!1;var t=e(n);if(!t)return!1;var r=e(r_);return!!r&&t.panes.includes(r)})},[n])}function af(e){var n=rf(e);return(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){return"floating"===e.path[0]})},[n])}var ah=(0,tr.cn)(null,function(e,n,t){var r,i,o,a;n(oc,{pane:t,rect:(i=(r=e(rv)).x+r.width,o=r.y+r.height,{width:a=Math.min(800,.8*i),height:.8*o,x:i/2-a/2-r.x,y:16}),makeActive:!0,makeModal:!0})}),av=(0,tr.cn)(null,function(e,n){var t=e(eg.Rq);if(t){var r=tG(e(rG),t);r&&r.panes.forEach(function(e){n(i8,e)})}}),ag=t(35370),am=t(1051),ay=(0,tr.cn)(null,function(e,n,t){var r,i=t.path,o=e(rG),a=(0,eE._)({},t);if(!a.opener){var l=e(oO),c=(0,am.mD)(i);if(c){var u=l[c];if(u){var s=e(rB).find(function(e){return e.extension.extensionId===u.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane){n(ol,{pane:ab(a),edge:null!==(r=a.newPaneEdge)&&void 0!==r?r:"left"});return}var d=tE(o,"topLeft");if(!d){n(or,{pane:ab(a),relativeTo:["tiling"],placement:"replace"});return}var p=e(rc).find(function(n){var t,r=e(n.data);return(0,rw.Ur)(r)?i===(0,rw.DQ)(r):!!((null===(t=a.opener)||void 0===t?void 0:t.paneType)==="extension"&&(0,rw.WQ)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(p&&!a.newTab){var f=e(p.data);if((0,rw.Ur)(f)||"markdown"===f.type){n(oh,p.paneId),n(of,{paneId:p.paneId,pane:ab((0,eE._)({opener:{paneType:f.type}},a))});return}if((0,rw.WQ)(f)){n(oh,p.paneId);return}}var h=d.paneGroup;if(a.newTab){n(os,{panes:[ab(a)],paneGroupId:h.id,activate:!0,commit:!0,index:h.activeIndex+1});return}var v=e(rc).find(function(n){return!n.isCommitted&&((0,rw.Ur)(e(n.data))||"markdown"===e(n.data).type)});if(v){n(of,{paneId:v.paneId,pane:ab(a)}),n(oh,v.paneId);return}var g=e(rP).find(function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,rw.DQ)(t)});if(g){n(of,{paneId:g.paneId,pane:ab(a)}),n(oh,g.paneId);return}var m=h.panes.find(function(n){var t=e(ra(n));return"commands"===e(t.data).type});if(m){n(of,{paneId:m,pane:ab(a)}),n(oh,m);return}n(os,{panes:[ab(a)],paneGroupId:h.id,activate:!0})});function ab(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,ag.gK)(n.toLowerCase()))return{type:"markdown",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,rw.Dp)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var aZ=(0,tr.cn)(null,function(e,n,t){var r,i=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,rw.Dp)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),o=i.length-1,a=e(r_);i.forEach((r=(0,eR._)(function(e,t){return(0,eP.Jh)(this,function(r){return n(od,{pane:e,activate:o===t,placement:{type:"secondary",relativeTo:a}}),[2]})}),function(e,n){return r.apply(this,arguments)}))}),ax=(0,tr.cn)(null,function(e,n,t){var r=t.urls.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{portType:"local",path:n.pathname,port:parseInt(n.port,10)}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;n(om,u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}});(0,tr.cn)({x:0,y:0,width:0,height:0});var aw=(0,tr.cn)(null,function(e,n,t){if(!e(iJ)){var r=e(rv),i=t.pageX,o=t.pageY,a=e(ra(t.over)),l=tx({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(oZ,!0),n(oV,{type:"dropPreview",rect:l})}}),a_=(0,tr.cn)(null,function(e,n,t){if(!e(iJ)){var r=e(rv),i=t.pageX,o=t.pageY,a=t.over,l=e(ra(a)),c=tx({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(oV,null),n(oZ,!1);var u=e(rG);if("newPaneGroup"===t.type){if("middle"===c){var s=tR(u,l.paneId);if(!s)return;n(os,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(oo,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===c){if(d===t.paneId)return;var p=tR(u,l.paneId);if(!p)return;n(oy,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=tR(u,t.paneId);if(!f){var h=Error("Expected pane");throw n(rX,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var v=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!v)return;d=v}var g=(0,tJ.Uy)(u,function(e){try{tX(e,t.paneId),tU(e,{id:re()(),panes:[t.paneId],relativeTo:d,placement:c}),n(rk,t.paneId)}catch(e){throw n(rX,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(rQ,g)}});function aC(e){var n=(0,tt.Z)(function(){return(0,tr.cn)(function(n){return!!n(it)||!!n(iJ)&&n(r_)===e})},[e]);return(0,tt.Z)(function(){return(0,tr.cn)(function(t){if(t(n))return t(i7);var r=t(ra(e));return t(r.rectAtom)})},[e,n])}function ak(e){return(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(at);return t&&e===n(ar)?t:null})},[e])}function aS(e){return(0,tt.Z)(function(){return(0,tr.cn)(function(n){return n(r_)===e})},[e])}function aI(e){return(0,tt.Z)(function(){return(0,tr.cn)(function(n){return n(n(ra(e)).data)})},[e])}function aR(e){return(0,tt.Z)(function(){return(0,t8.kv)(ra(e),function(e){return"floating"===e.type})},[e])}var aE=(0,tr.cn)(null),aG=(0,tr.cn)(function(e){var n=e(aE);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=tR(e(rG),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(ra(n));return[t.paneId,e(t.data)]})}}),aP=(0,tr.cn)(function(e){var n=e(aG);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),aD=(0,tr.cn)(function(e){var n=e(aE);if(!n||"sidebar"===n.target)return null;if(e(iK)===n.paneId)return e(i7);var t=e(ra(n.paneId)),r=e(t.rectAtom),i=e(rh);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),aT=(0,tr.cn)(null,function(e,n,t){var r=e(r_),i=null!=t?t:r;if(i){n(aE,{target:"pane",paneId:i}),i!==r&&n(rC,i);return}var o=tE(e(rG),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a){n(aE,{target:"pane",paneId:a});return}}),aA=(0,tr.cn)(null,function(e,n){var t=e(aE);t&&(n(aE,null),"sidebar"!==t.target&&n(ou,{paneId:t.paneId,activate:!0}))}),aB=(0,tr.cn)(null,function(e,n){if(e(aG)){n(aA);return}var t=e(r_);if(t){n(aT,t);return}var r=tE(e(rG),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i){n(aT,i);return}}),aU=(0,tr.cn)(function(e){return null!==e(aE)}),aO=(0,tr.cn)(null,function(e,n){n(aE,null)}),aM=(0,tr.cn)(null,function(e,n,t){var r=e(r_);if(!(!r||e(iK))){var i=tT({relativeTo:r,rects:new Map(e(rc).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(r_,i),e(aE)&&n(aE,{target:"pane",paneId:i}))}}),aL=(0,tr.cn)(null,function(e,n,t){var r=e(aG);null!==r&&"sidebar"!==r.target&&n(rQ,(0,tJ.Uy)(e(rG),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=tG(e,t),o=tP(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,en._)(o.path).concat([a]),c="down"===r||"right"===r,u=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&c||u&&!c)&&p)){!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,c?"forward":"back");return}var f=(m=tP(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=tI(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=t_(r);if(0===l.length)return null;var c=tI(n,l);if((null==c?void 0:c.type)!=="split")return null;if(c.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var u=c.children.indexOf(a),s=0===u;if(!(u===c.children.length-1&&i||s&&!i)){var d=u+(i?1:-1),p=c.children[d],f=c.children[u];return p?{other:f,node:p,parent:c,path:(0,en._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?c.children.length-1:0;return{parent:c,other:c.children[u],path:(0,en._)(l).concat([h]),node:c.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:m.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));!function(e){if("tiling"!==e[0])throw Error("Expected tiling path")}(h);var v=tI(e,h);if(!v||"floatingPaneGroup"===v.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var g=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value.percent;r+=u}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,v);if("paneGroup"===f.node.type){var m,y,b,Z=(y={start:0,end:100},b=!f.parent.stacked,g.start-y.start<y.end-g.end?b?"above":"rightOf":b?"below":"leftOf");tW(e,(0,en._)(o.path).concat([a])),tU(e,{placement:Z,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var x=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,c=0,u=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value,v={start:l,end:l+h.percent},g=Math.max(0,Math.min(n.end,v.end)-Math.max(n.start,v.start));g>c&&(c=g,o=a,i=n.start-v.start<v.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,g),w=x.index,_=x.placement;tW(e,(0,en._)(o.path).concat([a])),tU(e,{placement:_,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,en._)(f.path).concat([w])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),aX=(0,tr.cn)(null,function(e,n,t){n(iY,r7({isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,isInPopup:t.isInPopup,codeEditorPath:t.entrypoint})),n(iy,{replId:t.replId,force:!0})});(0,tr.cn)(null,function(e,n,t){n(iY,t)});var aW={width:120,height:120},aN=(0,tr.cn)(null),az=(0,tr.cn)(null,function(e,n,t){var r=e(rG);if("end"===t.type){n(aN,null),n(rQ,r);return}if("update"===t.type){var i=e(aN);if(!i){var o=Error("Expected floatingResizeState");throw n(rX,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(rh),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?tw:i,a=(0,eE._)({},e),l=o.height,c=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var u=e.height-r.y;a.height=Math.max(u,l),u<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else if("bottom"===t||"bottomLeft"===t||"bottomRight"===t){var s=e.height+r.y;a.height=Math.max(s,l)}if("right"===t||"bottomRight"===t||"topRight"===t){var d=e.width+r.x;a.width=Math.max(d,c)}else if("left"===t||"bottomLeft"===t||"topLeft"===t){var p=e.width-r.x;a.width=Math.max(p,c),p<c?a.x=e.x+e.width-c:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:aW}),c=i.paneId,u=(0,tJ.Uy)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(c)});if(!t){var r=Error("Expected floating");throw n(rX,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(rQ,u);return}var s=e(rc).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(rX,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(rC,t.paneId),n(aN,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),aF=(0,tr.cn)(null,function(e,n,t){var r=e(rG),i=e(ra(t)),o=i.rectAtom,a=i.type,l=e(o),c=tR(r,t);if(!c){var u=Error("Expected pane");throw n(rX,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"===a){n(rQ,(0,tJ.Uy)(r,function(e){tN(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));return}c.paneGroup.id===e(eg.Rq)&&n(eg.Rq,null);var s=e(rc).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(rh),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return rF(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f){n(rQ,(0,tJ.Uy)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=tI(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(tW(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}tU(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:c.paneGroupPath,to:["tiling"],placement:"leftOf"})}));return}n(rQ,(0,tJ.Uy)(r,function(e){var n=tR(e,f.paneId);c.paneGroup.panes.forEach(function(t){tz(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(oh,c.paneGroup.panes[c.paneGroup.activeIndex])}),aV=1920/1020,aH=(0,tr.cn)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=e(rc).find(function(n){return e(n.data).type===t.type});if(c){n(of,{paneId:c.paneId,pane:t}),l.commit&&n(rk,c.paneId);return}var u=n(oc,{pane:t,rect:(r=e(rv),i=e(rh),{width:o=Math.min(600,r.width),height:a=Math.min(600/aV+i,r.height),x:r.width-o,y:r.height-a})});l.commit&&n(rk,u)}),aj=(0,tr.cn)(null,function(e,n,t){e(rc).filter(function(n){return e(n.data).type===t}).forEach(function(e){return n(i8,e.paneId)})}),a$=(0,tr.cn)(null),aq=(0,tr.cn)(function(e){var n=e(a$);return n&&e(rc).find(function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),aY=(0,tr.cn)(function(e){var n=e(aq);return n&&!n.isHidden?n:null}),aJ=(0,tr.cn)(null,function(e,n,t){n(a$,t);var r="videoPlayer";if(!t){n(aj,r);return}n(aH,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}},{commit:!0})}),aK=(0,tr.cn)(null,function(e,n){var t=e(aq);if(null==t?void 0:t.isHidden){n(oh,t.paneId),n(rk,t.paneId);return}var r=e(a$);r&&n(aJ,r)}),aQ=(0,tr.cn)(function(e){return e(rc).find(function(n){return"tutorial"===e(n.data).type})||null}),a0=(0,tr.cn)(null,function(e,n){var t=e(aQ);if(null==t?void 0:t.isHidden){n(oh,t.paneId);return}n(oo,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0}),n(ik)}),a1=(0,tr.cn)(function(e){return!!(e(at)||e(aN)||e(ib)||e(oZ)||e(iP))}),a2=(0,tr.cn)(function(e){if(e(aU)||e(to))return null;var n=e(r_);if(!n)return null;var t=e(ra(n)),r=e(t.data),i=t.paneId+r.type;return(0,rw.Ur)(r)&&(i+=r.data.path),i}),a4=t(36273),a5=t(20494),a3=t(78290),a7=t(83888),a6=t(42056),a8=(0,tr.cn)(null,function(e,n,t){if(null===t){n(oV,null),n(at,function(e){return e?(0,tJ.Uy)(e,function(e){e.drop=null}):e});return}n(at,function(e){return e?(0,tJ.Uy)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(rv),i=e(rh),o=e(iO),a=e(rq);if("pane"===t.type){var l=e(ra(t.paneId)),c=e(l.rectAtom);n(oV,{type:"dropPreview",rect:{x:c.x,y:c.y-i,width:c.width,height:c.height+i}});return}if("emptyLayout"===t.type){n(oV,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,c=o.width,u=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:c/2,height:u};case"rightOf":return{x:a+c/2,y:l,width:c/2,height:u};case"above":return{x:a,y:l,width:c,height:u/2};case"below":return{x:a,y:l+u/2,width:c,height:u/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});return}n(oV,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(rG).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),a9=(0,oz.$)(["opacity","width","height","transform","pointerEvents"]),le=a9.cssVars,ln=a9.styleTokens,lt=(0,ek.X)({dropPoint:[Q.l0.center,Q.l0.top(0),Q.l0.left(0),Q.l0.position.absolute,{zIndex:oF.M.overlay,cursor:"grabbing",width:ln.width,height:ln.height,transform:ln.transform,opacity:"var(".concat(le.opacity,", 0)"),pointerEvents:ln.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:Q.TV.accentPrimaryStronger}}]}),lr={above:(0,$.tZ)(a7.Z,{}),below:(0,$.tZ)(a4.Z,{}),leftOf:(0,$.tZ)(a5.Z,{}),rightOf:(0,$.tZ)(a3.Z,{}),middle:(0,$.tZ)(a6.Z,{})};function li(e){var n=(0,q.useRef)(null),t=(0,q.useMemo)(function(){return(0,t8.kv)(ai,function(n){return null==n?void 0:n[e]})},[e]),r=(0,q.useMemo)(function(){return(0,t8.kv)(t,function(e){return e?(0,ee._)({},le.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},t7())},[t]);(0,oN.j)(n,oA(r));var i=(0,q.useMemo)(function(){return(0,t8.kv)(t,function(e){var n;return e?(n={},(0,ee._)(n,le.width,e.rect.width+"px"),(0,ee._)(n,le.height,e.rect.height+"px"),n):null},t7())},[t]);(0,oN.j)(n,oA(i));var o=(0,q.useMemo)(function(){return(0,t8.kv)(t,function(e){var n;return n={},(0,ee._)(n,le.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,ee._)(n,le.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},t7())},[t]);return(0,oN.j)(n,oA(o)),n}function lo(){var e=li("middle"),n=oB(a8),t=oU((0,q.useMemo)(function(){return(0,t8.kv)(ai,function(e){var n;return null!==(n=null==e?void 0:e.middle.paneId)&&void 0!==n?n:null})},[]));return(0,$.tZ)(K.G,{css:lt.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,$.tZ)(a6.Z,{size:32})})}function la(e){var n=e.position,t=li(n),r=oB(a8);return(0,$.tZ)(K.G,{css:lt.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,q.cloneElement)(lr[n],{size:32})})}var ll=(0,q.memo)(function(){return(0,$.BX)($.HY,{children:[(0,$.tZ)(la,{position:"above"}),(0,$.tZ)(la,{position:"below"}),(0,$.tZ)(la,{position:"leftOf"}),(0,$.tZ)(la,{position:"rightOf"}),(0,$.tZ)(lo,{})]})});function lc(e){return oT((0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(ra(e));return n(t.data)})},[e]))}function lu(e){var n=e.paneId;return oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){return e(r_)===n})},[n]))}function ls(){var e=oB(rC),n=oB(rk);return(0,tt.Z)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function ld(){return oB(oE)}var lp=(0,tr.cn)(null,function(e,n){n(oZ,!1)});function lf(e){var n=e.paneGroupId,t=oB(ao),r=oB(aa),i=oB(au),o=(0,tt.Z)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){var t;return n===(null===(t=e(at))||void 0===t?void 0:t.paneGroupId)})},[n])),dnd:o}}function lh(){return oB(ay)}function lv(){return{maximizePane:oB(iQ),maximizePaneGroup:oB(i0),restoreMaximizedPaneGroup:oB(i1),toggleMaximizePane:oB(i2),toggleMaximizedPaneGroup:oB(i4)}}function lg(e){var n,t,r=(n=rf(e),{activeIndexAtom:(0,tt.Z)(function(){return(0,tr.cn)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){return e.path},t7())},[n]),panesAtom:(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){return e.panes},t7())},[n]),activeFileAtom:(0,tt.Z)(function(){return(0,tr.cn)(function(e){var t=e(n),r=e(ra(t.panes[t.activeIndex])),i=e(r.data);return(0,rw.Ur)(i)?(0,rw.DQ)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:oA(i),path:oA(o),panes:oA(a),activeTabPaneId:oA((t=rf(e),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(t);return e(ra(n.panes[n.activeIndex])).paneId})},[t])))}}function lm(e){var n,t,r,i,o,a,l,c,u,s,d,p=rj(aC(e)),f=(t=r$(aC(e)),n=ak(e),r=(0,tt.Z)(function(){return(0,t8.kv)(n,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[n]),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(t);return{x:n.x,y:n.y,scale:e(r)}})},[t,r])),h=(i=ak(e),(0,tt.Z)(function(){return(0,t8.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),v=(o=aC(e),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(o),t=e(rv);return{x:Math.round(t.x+n.x),y:Math.round(t.y+n.y)}})},[o])),g=(0,tt.Z)(function(){return(0,t8.kv)(ra(e),function(e){return e.isHidden})},[e]),m=(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(ra(e)),r=e===n(r_);return n(iK)===e?oF.M.maximizedPane:e===n(ar)?oF.M.draggingPane:"floating"===t.type?r?oF.M.floatingPaneActive:oF.M.floatingPane:r?oF.M.tiledPaneActive:oF.M.tiledPane})},[e]),y=(0,tt.Z)(function(){return(0,tr.cn)(function(n){return!!n(at)&&n(ar)!==e&&"floating"!==n(ra(e)).type})},[e]),b=(a=aI(e),(0,tt.Z)(function(){return(0,t8.kv)(a,function(e){return e.type})},[a])),Z=aR(e),x=(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t,r=null===(t=tR(n(rG),e))||void 0===t?void 0:t.paneGroup;return!!r&&r.id===n(eg.Rq)})},[e]),w=aS(e),_=(0,tt.Z)(function(){return(0,tr.cn)(function(n){return n(r_)===e})},[e]),C=(0,tt.Z)(function(){return(0,t8.kv)(ra(e),function(e){return e.isCommitted})},[e]),k=aI(e),S=(l=aR(e),c=aS(e),u=ak(e),(0,tt.Z)(function(){return(0,tr.cn)(function(e){return!e(iJ)&&!!(e(l)||e(c)||e(u))})},[l,c,u])),I=(s=ak(e),(0,tt.Z)(function(){return(0,t8.kv)(s,Boolean)},[s])),R=(d=ak(e),(0,tt.Z)(function(){return(0,t8.kv)(d,function(e){var n;return null!==(n=null==e?void 0:e.movedAtAll)&&void 0!==n&&n})},[d]));return{size:oA(p),transform:oA(f),paneType:oA(b),transformOriginXAtom:oA(h),viewportInset:oA(v),zIndex:oA(m),disableInteractions:oA(a1),animate:oA(y),data:oA(k),isFloating:oA(Z),isModal:oA(x),isActive:oA(w),isActivePane:oA(_),isCommitted:oA(C),isHidden:oA(g),isBeingDragged:oA(I),hasMovedWhileDragging:oA(R),headerHeight:oA(rh),hasBorder:oA(S)}}function ly(e){var n,t,r,i,o,a,l,c,u,s=(t=ap(e),(0,tt.Z)(function(){return(0,tr.cn)(function(n){if(n(t))return n(i3);var r=n(rf(e));return n(r.rectAtom)})},[t,e])),d=rj(s),p=r$(s),f=(r=as(e),(0,tt.Z)(function(){return(0,t8.kv)(r,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[r])),h=(i=as(e),(0,tt.Z)(function(){return(0,t8.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),v=(o=as(e),a=ap(e),l=af(e),n=ad(e),c=(0,tt.Z)(function(){return(0,tr.cn)(function(e){var t=e(r_);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,tt.Z)(function(){return(0,tr.cn)(function(e){return e(a)?oF.M.maximizedHeader:e(o)?oF.M.draggingHeader:e(l)?e(c)?oF.M.floatingHeaderActive:oF.M.floatingHeader:oF.M.tiledHeader})},[o,a,l,c])),g=(u=af(e),(0,tt.Z)(function(){return(0,tr.cn)(function(n){var t=n(at);return!(!t||t.paneGroupId===e||n(u))})},[e,u])),m=ap(e),y=af(e),b=(0,tt.Z)(function(){return(0,tr.cn)(function(n){return n(eg.Rq)===e})},[e]);return{size:oA(d),position:oA(p),scale:oA(f),transformOriginX:oA(h),zIndex:oA(v),animate:oA(g),isMaximized:oA(m),isFloating:oA(y),isModal:oA(b)}}(0,tr.cn)(function(e){return!!e(ib)||e(iP)});var lb=(0,tr.cn)(!1),lZ=(0,tr.cn)(0);function lx(){return{width:oA(iO),isOpen:oA(iX),toggle:oB(iS),content:oA(iz),openCodeSearch:oB(ij),closeCodeSearch:oB(i$),codeSearchData:oA(iF),setCodeSearchBindings:oB(iH)}}var lw=t(87915),l_=t(99743),lC=t(30043),lk=t(98724),lS=t(47423),lI=t(6843),lR=t(80264),lE=t(95184),lG=t(8368),lP=t(60273),lD=t(86908),lT=t(19236),lA=t(69536),lB=t(43257),lU=t(54236),lO=t(13213),lM=t(85551);function lL(e){var n,t=(0,rw.Se)(),r=(0,j._)((0,lU.Ni)(),1)[0],i=(0,lU.bD)({onSession:function(n){e({pane:{type:"ghostwriterChat",data:{sessionId:n}}})}}),o=i.sendMessage,a=i.setSessionId,l=(0,q.useCallback)((n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return(0,eZ.j)(eZ.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:r,user_model_selection:r,message_content:e,message_source:"ask_ai_command_bar"}),[4,o({kind:"message",message:e,intent:lU.$h.EXPLAIN,model:"advanced"===r?lU.BY.ADVANCED:lU.BY.BASIC})];case 1:return n.sent(),a(null),[2]}})}),function(e){return n.apply(this,arguments)}),[r,o,a]);return(0,tt.Z)(function(){return{data:{type:"context",label:"AI",icon:(0,$.tZ)(lM.Z,{}),key:"askAi"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,lI.r0)({defaultScore:lO.L.askAi,matchScoreMultiplier:lO.r.askAi,filterLowMatchScores:!1}),data:{type:"action",label:"Ask AI: ".concat(n),icon:t.Icon({pane:{type:"ghostwriterChat"}}),run:function(){l(n)}}}]:[]}}},[t,l])}var lX=t(89774);function lW(e){var n=(0,rw.Se)();return(0,tt.Z)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,$.tZ)(lX.Z,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,lI.r0)({defaultScore:lO.L.codeSearch,matchScoreMultiplier:lO.r.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}function lN(e){var n,t=e.currentPaneId,r=e.type,i=(0,rw.Se)(),o=oB(oR),a=oB(oh),l=(0,eg.nC)(),c=(0,lT.dr)(),u=t?"Move existing tab here":"Jump to existing tab";return(0,q.useCallback)((n=(0,eR._)(function(e){var n,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A;return(0,eP.Jh)(this,function(B){switch(B.label){case 0:if(n=e.searchQuery,s=l(),!(d=t?s.filter(function(e){return(0,j._)(e,1)[0]!==t}):s).length||!n&&"files"===r)return[2,[]];p=new Map,f=[],h=!0,v=!1,g=void 0;try{for(m=d[Symbol.iterator]();!(h=(y=m.next()).done);h=!0)(b=(0,j._)(y.value,2))[0],Z=b[1],(0,rw.Ur)(Z)&&Z.data.path&&f.push(Z.data.path)}catch(e){v=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(v)throw g}}return[4,(0,lS.Rz)(n,f)];case 1:x=B.sent(),w=!0,_=!1,C=void 0;try{for(k=x[Symbol.iterator]();!(w=(S=k.next()).done);w=!0)I=S.value,p.set(I.path,{score:I.score,ranges:I.ranges})}catch(e){_=!0,C=e}finally{try{w||null==k.return||k.return()}finally{if(_)throw C}}R=[],E=!0,G=!1,P=void 0;try{for(D=function(){var e=(0,j._)(A.value,2),n=e[0],l=e[1],s=(0,rw.ic)(l);if("tools"===r&&!s||"tools"===r&&"commands"===l.type||"files"===r&&s)return"continue";var d=(0,rw.Ur)(l)?l.data.path:null,f=d?p.get(d):null;if("deployments"===l.type){var h=c(n);if((null==h?void 0:h.type)==="deployments"){var v=h.getTabs();if(v)return R.push({match:lI.aZ,data:{type:"context",label:i.getTitle(l),icon:(0,$.tZ)(i.Icon,{pane:l})},commands:function(){return v.map(function(e){return{match:lI.aZ,data:{key:n+e.id,type:"action",label:e.label,icon:(0,$.tZ)(e.Icon,{size:16}),run:function(){a(n),h.setTab(e.id)}}}})}}),"continue"}}var g=d&&f?function(){return{score:f.score,render:(0,lS.xy)({path:d,ranges:f.ranges,description:u})}}:lI.aZ;R.push({match:g,data:{key:n,type:"action",label:i.getTitle(l),icon:i.Icon({pane:l}),run:function(){return t?o({a:t,b:n}):a(n)},description:u}})},T=d[Symbol.iterator]();!(E=(A=T.next()).done);E=!0)D()}catch(e){G=!0,P=e}finally{try{E||null==T.return||T.return()}finally{if(G)throw P}}return[2,R]}})}),function(e){return n.apply(this,arguments)}),[t,l,i,a,o,c,u,r])}function lz(e){var n=(0,rw.Se)(),t=(0,lA.BV)(),r=(0,eg.nC)();return(0,q.useCallback)(function(){var i=r().map(function(e){var n=(0,j._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)!function(){var t=u.value;!((0,rw.b)(t.type)&&i.includes(t.type))&&o.push({match:(0,lG.e)({pane:t,aliases:lP.P.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:n.getTitle(t),description:n.getDescription(t),icon:n.Icon({pane:t}),run:function(){e({pane:t})}}})}()}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return o},[t,e,r,n])}function lF(e){var n=e.currentPaneId,t=e.openPane,r=(0,ev.Z)(),i=r.fs,o=r.container,a=lz(t),l=lN({currentPaneId:n,type:"tools"}),c=lN({currentPaneId:n,type:"files"}),u=(0,q.useCallback)(function(e){var n=e.path;t({pane:{type:(0,rw.Dp)({path:n}),data:{path:n}}})},[t]),s=(0,eg.AA)(),d=(0,lD.T)(),p=lW(t),f=lL(t);return(0,tt.Z)(function(){var e,n,t,r,h=(0,lR.i)({openFile:u,fs:i,shouldHideFile:d,getRecentFiles:s,getCurrentlyOpenFilePanesCommands:c}),v=(0,lE.F)({container:o,openFile:u}),g={data:{type:"context",label:tu.cE,icon:(0,$.tZ)(lk.Z,{})},commands:(e=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,l({searchQuery:e.searchQuery})];case 1:return[2,en._.apply(void 0,[n.sent()]).concat((0,en._)(a()))]}})}),function(n){return e.apply(this,arguments)})},m=(t=(n={fs:i,openFile:u}).openFile,r=n.fs,{match:lI.aZ,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,$.tZ)(lC.Z,{})},commands:function(e){var n=e.searchQuery,i=e.active;return n&&i?[{match:lI.pl,data:{type:"action",description:"Create a new file",label:n,icon:(0,$.tZ)(lw.Z,{path:n}),run:function(){return(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,r.stat(n)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(n,'" already exists')}];return[4,r.writeFile(n,lB.Z.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+n+'"'}];return t({path:n}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Ask AI, search for files & open tools"},commands:function(){return[m,g,p,f].concat((0,en._)([h,v]))}}},[o,i,s,a,l,c,d,u,p,f])}var lV=t(93930),lH="Ask AI & search";function lj(){var e=(0,r4.b9)(ta),n=oB(av),t=(0,r4.Dv)(to);return(0,q.useCallback)(function(r){t||n(),e(r)},[n,t,e])}var l$={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,tn.l2)({cmdOrCtrl:!0,key:"k"})};function lq(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,r4.b9)(tc);(0,q.useEffect)(function(){if(n)return t(function(n){return(0,en._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var lY=(0,ek.X)({surface:[Q.l0.maxHeight("70vh"),Q.l0.borderRadius(8)]}),lJ=(0,q.memo)(function(){var e,n,t,r,i,o,a,l,c,u=(0,r4.Dv)(to),s=lj(),d=(e=ld(),n=oB(ah),t=(0,J.P5)({controlName:"flag-modal-panes"}),r=lz((0,q.useCallback)(function(r){if((0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"Command Bar",tool:r.pane.type}),t){n(r.pane);return}e(r)},[e,n,t])),i=lN({type:"tools"}),o=(0,te.gf)("toggleGlobalCommandBarCommand"),a=(0,tt.Z)(function(){return{type:"context",icon:(0,$.tZ)(lV.Z,{}),label:"",description:lH,keyboardShortcut:o}},[o]),l=(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n,t=e(tc),o={data:{type:"context",label:tu.cE,icon:(0,$.tZ)(lk.Z,{})},commands:(n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,i({searchQuery:e.searchQuery})];case 1:return[2,en._.apply(void 0,[n.sent()]).concat((0,en._)(r()))]}})}),function(e){return n.apply(this,arguments)})};return{data:a,commands:function(){return(0,en._)(t).concat([o])}}})},[r,a,i]),c=(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(l),t=e(tl);return t?[n,t]:n})},[l]),(0,r4.Dv)(c)),p=(0,te.gf)(l$.id);return(0,$.tZ)(nk.u,{hideCloseButton:!0,isOpen:u,onRequestClose:s,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,$.tZ)(nI.Tg,{css:lY.surface,children:(0,$.tZ)(n9.X,{keyboardShortcut:p,onAction:function(){return s()},command:d,autoFocus:!0})})})}),lK=t(78272),lQ=t(20957),l0=t(74457),l1=t(34925),l2=t(56551),l4=t(50045),l5=t(32622),l3=t(40490),l7=t(4135),l6=t(36259),l8=t(45967),l9=t(15323),ce=t(99677),cn=t(77537),ct=t(1053),cr=t(30826),ci=t.n(cr),co=t(4573),ca=t(38975),cl=t(35574),cc=t(15023),cu=t(82383),cs=t(9834),cd=t.n(cs);function cp(){var e=(0,eB._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return cp=function(){return e},e}function cf(){var e=(0,eB._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return cf=function(){return e},e}var ch=(0,eU.Ps)(cp()),cv=(0,eU.Ps)(cf(),ch),cg=(0,ek.X)({root:[Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.px(8),{textDecoration:"none"}],info:[Q.l0.colWithGap(2),Q.l0.flex.growAndShrink(1)],meta:{fontSize:10}});function cm(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,q.useMemo)(function(){return i?ca.Z.match(i,o):null},[i,o]);return(0,$.tZ)(cd(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,$.BX)(K.G,{tag:"a",style:{height:t},css:cg.root,children:[(0,$.tZ)(cc.ZP,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,$.BX)(K.G,{css:cg.info,children:[(0,$.tZ)(co.x,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,$.BX)(ew.xv,{css:cg.meta,color:"dimmest",multiline:!1,children:[n.owner.username," • edited ",(0,cl.F)(n.timeUpdated)]})]})]})})}function cy(){return(cy=(0,eR._)(function(e){var n;return(0,eP.Jh)(this,function(t){switch(t.label){case 0:if(!tK.l)throw Error("Expected apolloClient");return[4,tK.l.query({query:cv,variables:e})];case 1:return[2,(null===(n=t.sent().data.currentUser)||void 0===n?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}var cb=t(98433),cZ=t(10055),cx=t(30231),cw=t(71658),c_=t(14861),cC=t(1056),ck=["isLayoutStacked","fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","completeCodeEngine","codeSuggestion","chatEngine","ghostwriterUseAdvancedModel"],cS=t(35458),cI=t(30582),cR=t(41520),cE=t(6674),cG=t(46867),cP=t(56729),cD=t(54505),cT=t(99595),cA={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,tn.l2)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:lE.q},run:{id:"repl.run",name:"Run Repl",default:(0,tn.l2)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,tn.l2)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,tn.l2)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,ee._)({},nl.Bd.DesktopApp,(0,tn.l2)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,tn.l2)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},cB=Object.values(cA),cU=(0,q.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h=e.isAdmin,v=e.isSubscribed,g=lj(),m=(0,j._)((0,q.useState)(!1),2),y=m[0],b=m[1],Z=(0,eg.AA)(),x=(0,ev.Z)(),w=x.fs,_=x.container,C=x.runner,k=(0,l1.g)(),S=k.fork,I=k.isForking,R=(0,l0.L7)(C),E=(0,lD.T)(),G=lh(),P=oB(oC),D=oB(ok),T=oB(ob),A=oB((n=(0,eg.gv)(),(0,tt.Z)(function(){return(0,tr.cn)(null,function(e,t){var r=n();if(r){t(o_,[r.pane]);var i=e(r_);i&&t(rk,i)}})},[n]))),B=oB(aM),U=oB(oS),O=oB(rk),M=oT(r_),L=oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(r_);if(!n)return null;var t=tR(e(rG),n);return t?t.paneGroup.id:null})},[])),X=oB(aF),W=lv().toggleMaximizePane,N=oB(on),z=oB(i9),F=oB(aO),V=oB(ot),H=(0,lT.Y6)(M),Y=(0,l3.Wd)("replUrl","string"),K=(0,eb.Z)(),Q=(0,ec.Z)(),et=oU(rM),er=ld(),ei=oB(ah),eo=(0,cP.Z)(),ea=(0,cG.Z)(),el=(0,cn.Z)(_),eu=(0,cT.Z)().showNotice,es=(0,cI.Z)(),ed=es.openInVSCode,ep=es.onConfirmConfig,ef=es.isConfigModalOpen,eh=es.closeConfigModal,ey=(0,J.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),ex=(0,lU.Fv)(),ew=(0,lU.lr)(),e_=(0,lU.$g)(),eC=ci()(function(e){return(0,eZ.j)(eZ.U3.PROJECT_RAN,{replId:K,placement:e})},500);(0,te.Il)(function(){return[cA.saveAllFiles.id,function(){w.flush(void 0,op.WL.MANUAL_SAVE)}]},[w]),(0,te.Il)(function(){return[cA.newTab.id,function(){return P()}]},[P]),(0,te.Il)(function(){return[cA.nextTab.id,function(){return U("next")}]},[U]),(0,te.Il)(function(){return[cA.previousTab.id,function(){return U("previous")}]},[U]),(0,te.Il)(function(){return[cA.closeTab.id,function(){return D()||et()>0}]},[D,et]),(0,te.Il)(function(){return[cA.reopenClosedTab.id,function(){return A()}]},[A]),(0,te.Il)(function(){return[cA.moveTabUpGroup.id,function(){return T("above")}]},[T]),(0,te.Il)(function(){return[cA.moveTabRightGroup.id,function(){return T("rightOf")}]},[T]),(0,te.Il)(function(){return[cA.moveTabLeftGroup.id,function(){return T("leftOf")}]},[T]),(0,te.Il)(function(){return[cA.moveTabDownGroup.id,function(){return T("below")}]},[T]),(0,te.Il)(function(){return M?[cA.keepTab.id,function(){return O(M)}]:void 0},[M,O]),(0,te.Il)(function(){return M?[cA.insertPaneGroupUp.id,function(){return V({paneId:M,placement:"above",autoFocus:!0})}]:void 0},[M]),(0,te.Il)(function(){return M?[cA.insertPaneGroupRight.id,function(){return V({paneId:M,placement:"rightOf",autoFocus:!0})}]:void 0},[M]),(0,te.Il)(function(){return M?[cA.insertPaneGroupLeft.id,function(){return V({paneId:M,placement:"leftOf",autoFocus:!0})}]:void 0},[M]),(0,te.Il)(function(){return M?[cA.insertPaneGroupDown.id,function(){return V({paneId:M,placement:"below",autoFocus:!0})}]:void 0},[M]),(0,te.Il)(function(){return[l$.id,function(){return g()}]},[g]);var ek=(0,te.gf)(cA.findFile.id);(0,te.Il)(function(){return[cA.findFile.id,function(){return g(lR.i({openFile:G,fs:w,shouldHideFile:E,getRecentFiles:Z,keyboardShortcut:ek}))}]},[g]);var eS=lN({type:"files"});lq(lR.i({openFile:G,fs:w,shouldHideFile:E,getRecentFiles:Z,getCurrentlyOpenFilePanesCommands:eS,keyboardShortcut:ek}));var eI=(0,te.gf)(cA.searchFileContents.id),eE=lx();(0,te.Il)(function(){return[cA.searchFileContents.id,function(){(0,eZ.j)(eZ.U3.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==H?void 0:H.type)==="codeEditor"&&(n=null===(e=H.getCurrentSelectionText)||void 0===e?void 0:e.call(H)),eE.openCodeSearch({initialQuery:n})}]},[H,g,G]),(0,te.Il)(function(){return M?[cA.toggleFloatPaneGroup.id,function(){return X(M)}]:void 0},[M]),(0,te.Il)(function(){return M?[cA.toggleMaximizePaneGroup.id,function(){return W(M)}]:void 0},[M]),(0,te.Il)(function(){return L?[cA.removePaneGroup.id,function(){N({paneGroupId:L}),F()}]:void 0},[L]),(0,te.Il)(function(){return M?[cA.removeOthersInPaneGroup.id,function(){z(M)}]:void 0},[M]),(0,te.Il)(function(){return[cA.moveFocusUp.id,function(){return B("above")}]},[]),(0,te.Il)(function(){return[cA.moveFocusDown.id,function(){return B("below")}]},[]),(0,te.Il)(function(){return[cA.moveFocusRight.id,function(){return B("rightOf")}]},[]),(0,te.Il)(function(){return[cA.moveFocusLeft.id,function(){return B("leftOf")}]},[]);var eG=(0,J.P5)({controlName:"flag-modal-panes"});lq(lW(function(e){if(eG){ei(e.pane);return}er(e)})),lq(lL(function(e){if(eG){ei(e.pane);return}er(e)})),lq(lE.F({container:_,keyboardShortcut:eI,openFile:G})),(0,te.Il)(function(){if(R!==ct.Ah.OFFLINE)return[cA.run.id,function(){R===ct.Ah.RUNNING&&C.stopRun(),eC("shortcut_cmd_enter"),C.run()}]},[R]);var eD=(0,te.gf)(cA.run.id);return lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(l8.Z,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){l5.X.openNewWindow()}}},{enabled:Q}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(lK.Z,{}),label:"Run",description:"Run Repl",run:function(){C.run()},keyboardShortcut:eD}},{enabled:R===ct.Ah.IDLE}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(lQ.Z,{}),label:"Stop",description:"Stop Repl",run:function(){C.stopRun()}}},{enabled:R===ct.Ah.RUNNING}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(l9.Z,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){_.exec("kill","1")}}},{enabled:h}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(nt.Z,{}),label:"Open development URL",run:function(){if(!el)throw Error("Expected dotdevUrl");window.open(el,"_blank")}}},{enabled:!0}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(l6.Z,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!Y)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(Y);window.open(e,"_blank")}}},{enabled:!Q}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(cS.Z,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,eZ.j)(eZ.U3.OPEN_IN_VSCODE_CLICKED,{source:"command_bar"}),ed()}}},{enabled:!!eo&&v}),lq({match:lI.aZ,data:{type:"action",icon:(0,$.tZ)(cE.Z,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!eo)throw Error("Expected sshConfig");var e=eo.sshPort,n=eo.sshUser,t=eo.sshHostname,r="ssh -i ".concat(ea,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,eZ.j)(eZ.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,cD.Z)(r),eu("Copied SSH command")}}},{enabled:!!eo&&v}),lq((r=(t={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,i=t.onRun,o=(0,em.Z)(i),(0,tt.Z)(function(){return{match:(0,lI.r0)({defaultScore:lO.L.myRepls}),data:{type:"context",label:"My Repls",icon:(0,$.tZ)(cu.Z,{}),description:r},commands:function(e){var n=e.searchQuery,t=e.active;return(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return cy.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,searchQuery:n,run:function(){return o.current(e)}}).repl,i=t.searchQuery,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,$.tZ)(cm,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,$.tZ)(cc.ZP,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[r,o]))),lq({match:(0,lI.r0)({defaultScore:lO.L.fork}),data:{type:"action",label:"Fork",icon:(0,$.tZ)(l7.Z,{}),description:"Fork Repl",run:function(){I||S()}}}),lq({match:(0,lI.r0)({defaultScore:lO.L.createNewRepl}),data:{type:"action",label:"Create",icon:(0,$.tZ)(lC.Z,{}),description:"Create a new Repl",run:function(){b(!0)}}}),lq({match:lI.aZ,data:{type:"action",label:"Enter Agent Mode",icon:(0,$.tZ)(ce.Z,{}),run:function(){ex()}}},{enabled:ey&&!e_}),lq({match:lI.aZ,data:{type:"action",label:"Exit Agent Mode",icon:(0,$.tZ)(ce.Z,{}),run:function(){ew()}}},{enabled:ey&&e_}),a=(0,J.P5)({controlName:"flag-settings-command",default:!1,type:"boolean"}),c=(l=tQ.Gn.apply(void 0,(0,en._)(ck))).preferences,u=l.update,s=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,eZ.j)(eZ.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),u(e)},p=(d=(0,c_.F)()).setActiveTheme,f=d.theme,lq({match:(0,lI.r0)({defaultScore:lO.L.settings,matchScoreMultiplier:lO.r.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,$.tZ)(cZ.Z,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,lI.r0)({defaultScore:lO.L.settings,matchScoreMultiplier:lO.r.settings}),data:{type:"context",label:"Theme",icon:(0,$.tZ)(cC.Z,{}),description:"Change Replit Theme"},commands:function(){return cw.T.map(function(e){return{match:(0,lI.r0)({defaultScore:lO.L.settings,matchScoreMultiplier:lO.r.settings}),data:{type:"action",label:e.title,icon:f.id===e.id?(0,$.tZ)(cx.Z,{}):(0,$.tZ)(cZ.Z,{opacity:0}),description:"Use "+e.title+" theme "+(f.id===e.id?" (current)":""),run:function(){p(e.id)}}}})}},i=Object.values(cb.z2).filter(function(e){return -1!==ck.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,lI.r0)({defaultScore:lO.L.settings,matchScoreMultiplier:lO.r.settings}),data:{type:"context",label:e.name,icon:(0,$.tZ)(cZ.Z,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=c[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,lI.r0)({defaultScore:lO.L.settings,matchScoreMultiplier:lO.r.settings}),data:{type:"action",label:n.title,icon:r?(0,$.tZ)(cx.Z,{}):(0,$.tZ)(cZ.Z,{opacity:0}),description:n.description,run:function(){return(0,eR._)(function(){return(0,eP.Jh)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,s((0,ee._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,en._)(i).concat([r])}},{enabled:a}),(0,$.BX)($.HY,{children:[(0,$.tZ)(l4.Z,{isOpen:y,onRequestClose:function(){return b(!1)},children:(0,$.tZ)(l2.Z,{trackingSource:"createDialog"})}),(0,$.tZ)(nk.u,{isOpen:ef,onRequestClose:eh,centered:!0,children:(0,$.tZ)(cR.Z,{onConfirm:ep})})]})}),cO=t(73581),cM=t(41960),cL=t(91372),cX=t(61984),cW=t(87618),cN=t(49205),cz=t(93371),cF=t(9602),cV=(0,ek.X)({button:[nq.gU.filled,Q.l0.py(4),Q.l0.px(8),Q.l0.color.foregroundDimmest,Q.l0.border({color:Q.TV.outlineDimmest}),{"&:hover":{cursor:"text"}},(0,ee._)({},Q.BC.max(1140),[Q.l0.display.none])],buttonText:[Q.l0.flex.row,Q.l0.gap(8),Q.l0.align.center],iconButton:[nq.gU.filled,Q.l0.width(32),Q.l0.height(32),(0,ee._)({},Q.BC.min(1140),[Q.l0.display.none])]});function cH(){var e=lj(),n=(0,te.gf)(l$.id);return(0,$.BX)($.HY,{children:[(0,$.tZ)(e6.zx,{onClick:function(){return e()},css:cV.button,text:(0,$.BX)("span",{css:cV.buttonText,children:[(0,$.tZ)(ew.xv,{children:lH}),n?(0,$.tZ)(te.bM,{keyCombo:n,fontSize:12}):null]})}),(0,$.tZ)(cF.hU,{alt:lH,onClick:function(){return e()},css:cV.iconButton,children:(0,$.tZ)(lX.Z,{})})]})}var cj=t(27598),c$=t(54821),cq=t(8278),cY=t(35820),cJ=t(42427),cK=t(14116),cQ=t(66791),c0=(0,ek.X)({self:[Q.l0.position.relative,Q.l0.borderRadius(4,0,0,4)],dotWrapper:[Q.l0.position.absolute,Q.l0.top("-3px"),Q.l0.right("-3px"),Q.l0.width("10px"),Q.l0.height("10px"),Q.l0.borderRadius("full"),Q.l0.border({color:Q.TV.backgroundDefault,width:2})],dot:[Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.borderRadius("full")]});function c1(e){var n=e.color;return(0,$.BX)(K.G,{css:c0.self,children:[(0,$.tZ)(cJ.Z,{}),(0,$.tZ)(K.G,{tag:"span",css:c0.dotWrapper,children:(0,$.tZ)(K.G,{tag:"span",css:c0.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var c2=(0,et.iv)([Q.l0.flex.growAndShrink(1),Q.l0.borderRadius(4,0,0,4),(0,ee._)({},Q.BC.max("tabletMin"),{"div span":[Q.l0.display.none],"div svg":[Q.l0.mr(0)]})]),c4=(0,et.iv)([c2,Q.l0.borderRadius()]),c5={base:{self:c2,loading:(0,et.iv)([c2,cY.p.backgroundPulse()])},rounded:{self:c4,loading:(0,et.iv)([c4,cY.p.backgroundPulse()])}};function c3(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,c=(0,$.tZ)(e6.zx,{text:n,iconLeft:t,css:c5[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,$.tZ)(ed.u,{tooltip:a,children:c}):c}function c7(){var e,n,t=(0,cj.kW)(),r=!1,i=!1;switch(t){case c$.z.Ready:case c$.z.Suspended:case c$.z.ProcessingLifecycleCommand:e="Deploy",n=(0,$.tZ)(cJ.Z,{});break;case c$.z.Loading:e="Deploy",n=(0,$.tZ)(cJ.Z,{}),r=!0,i=!0;break;case c$.z.Preparing:e="Preparing",n=(0,$.tZ)(cJ.Z,{}),r=!0,i=!0;break;case c$.z.Deploying:e="Deploying",n=(0,$.tZ)(no.Z,{}),i=!0;break;default:(0,cQ.Z)(t)}var o=ld(),a=(0,J.P5)({controlName:"flag-modal-panes"}),l=oB(ah);return(0,$.tZ)(c3,{text:e,icon:n,onClick:function(){if(t===c$.z.Ready&&(0,eZ.j)(eZ.U3.DEPLOY_PROJECT_SELECTED,{source:"deploy_button"}),a){l({type:"deployments"});return}o({pane:{type:"deployments"}})},disabled:r,loading:i,rounded:!0})}var c6={self:Q.l0.rowWithGap(1),open:(0,et.iv)([Q.l0.borderRadius(0,4,4,0),Q.l0.px(4)])};function c8(){var e,n,t,r=(0,cj.kW)(),i=(0,cj.ev)(),o=(0,cj._U)(),a=(0,cj.XA)().redeployWithNoNewOptions,l=ld(),c=(0,cT.Z)().showError,u=(e=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:if(r===c$.z.Deploying||r===c$.z.Suspended||r===c$.z.ProcessingLifecycleCommand||r===c$.z.Preparing)return l({pane:{type:"deployments"}}),[2];if(d&&(p(void 0),d===nl.Fe.Failed)||i)return l({pane:{type:"deployments",data:{view:cq.k.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a()];case 2:return e.sent(),[3,4];case 3:return c(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),s=(0,j._)((0,q.useState)(void 0),2),d=s[0],p=s[1];(0,q.useEffect)(function(){if(o&&"HostingBuildDeployStatusAction"===o.__typename)switch(o.status){case nl.Fe.Success:case nl.Fe.Failed:p(o.status)}},[o]),(0,q.useEffect)(function(){r===c$.z.Deploying&&p(void 0)},[r]);var f=void 0,h=!1,v=!1;switch(r){case c$.z.Ready:n="Redeploy",t=(0,$.tZ)(cJ.Z,{}),d&&(d===nl.Fe.Success?(t=(0,$.tZ)(c1,{color:Q.TV.accentPositiveDefault}),f="Success"):(t=(0,$.tZ)(c1,{color:Q.TV.accentNegativeDefault}),f="An error occurred"));break;case c$.z.Suspended:n="Redeploy",t=(0,$.tZ)(c1,{color:Q.TV.greyDefault}),f="Deployment suspended";break;case c$.z.Loading:n="Redeploy",t=(0,$.tZ)(cJ.Z,{}),h=!0,v=!0;break;case c$.z.ProcessingLifecycleCommand:n="Redeploy",t=(0,$.tZ)(c1,{color:Q.TV.orangeStronger}),v=!0,f="Updating deployment";break;case c$.z.Preparing:n="Preparing",t=(0,$.tZ)(no.Z,{}),v=!0,h=!0;break;case c$.z.Deploying:n="Deploying",t=(0,$.tZ)(no.Z,{}),v=!0;break;default:(0,cQ.Z)(r)}return i&&(n="Error",t=(0,$.tZ)(c1,{color:Q.TV.accentNegativeDefault}),f=i),(0,$.BX)(K.G,{css:c6.self,children:[(0,$.tZ)(c3,{text:n,icon:t,tooltip:f,onClick:u,disabled:h,loading:v}),(0,$.tZ)(ed.u,{tooltip:"Open Deployments pane",children:(0,$.tZ)(e6.zx,{text:"",iconLeft:(0,$.tZ)(cK.Z,{}),onClick:function(){l({pane:{type:"deployments"}})},css:c6.open})})]})}var c9=function(){var e=ld(),n=(0,J.P5)({controlName:"flag-modal-panes"}),t=oB(ah);return(0,$.tZ)(e6.zx,{text:"Redeploy",iconLeft:(0,$.tZ)(cJ.Z,{}),onClick:function(){if(n){t({type:"deployments"});return}e({pane:{type:"deployments"}})}})};function ue(){var e=(0,cj.hn)(),n=(0,cj.$y)(),t=(0,cj.BU)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,$.tZ)(c8,{}):(0,$.tZ)(c9,{}):(0,$.tZ)(c7,{})}var un=t(12564),ut=t(98924),ur=t(14074),ui=t(46603),uo=t(51648),ua=t(43540),ul=t(1711),uc=t(33718);function uu(){var e=(0,eB._)(['\n  fragment DesktopAppNavMenuCurrentUser on CurrentUser {\n    id\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return uu=function(){return e},e}function us(){var e=(0,eB._)(["\n  query DesktopAppNavMenuTour {\n    currentUser {\n      id\n      ...DesktopAppNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return us=function(){return e},e}var ud={},up=(0,eU.Ps)(uu()),uf=(0,eU.Ps)(us(),up),uh={id:"DesktopAppNavMenu",title:"Native App Navigation",content:function(){return(0,$.tZ)(K.G,{dataCy:"desktop-app-nav-menu-tour",children:(0,$.tZ)(ew.xv,{children:"In the desktop app, you can use this menu to switch between your Repls, create new ones, and open more windows."})})}};function uv(e){var n,t=e.targetElement,r=(0,ua.Z)("workspace","desktop-app-nav-menu"),i=r.shouldDisplay,o=r.register,a=r.dismiss,l=(n=(0,eE._)({},ud,void 0),eL.a(uf,n));return((0,q.useEffect)(function(){if(!l.loading&&(null===(e=l.data)||void 0===e?void 0:e.currentUser)){var e,n=l.data.currentUser,t=n.hasSeenWorkspaceTour,r=n.hasSeenSidebarTour;(t||r)&&o()}},[o,l]),t&&i)?(0,$.BX)($.HY,{children:[(0,$.tZ)(ul.w,{targetElement:t}),(0,$.tZ)(uc.k,{placement:"bottom-start",targetElement:t,activeStep:uh,currentStepIndex:0,done:a,goto:function(){},totalSteps:1,disableAnimation:!0,onClickOutside:a})]}):null}var ug=t(66691),um=(0,ek.X)({button:[Q.l0.viewStyle,Q.l0.reset.button,nq.gU.nofill,Q.l0.flex.row,Q.l0.height(32),Q.l0.width(40),Q.l0.center,Q.l0.color.foregroundDefault,Q.l0.cursor.pointer,Q.l0.borderRadius(),{":hover svg":{fill:nP.TV.foregroundDefault}}],wrapper:[Q.l0.borderRadius(),Q.l0.width(300),Q.l0.maxHeight("60vh"),Q.l0.flex.column],newReplButtonWrapper:[Q.l0.p(8)],newWindowButtonWrapper:[Q.l0.p(8),Q.l0.pt(0)],replsListContainer:[Q.l0.flex.shrink(1),Q.l0.borderRadius("container")]});function uy(){var e=(0,j._)((0,q.useState)(!1),2),n=e[0],t=e[1],r=(0,j._)((0,q.useState)(!1),2),i=r[0],o=r[1],a=(0,nG.useRouter)(),l=(0,j._)((0,ug.Z)(),2),c=l[0],u=l[1];return(0,$.BX)($.HY,{children:[(0,$.BX)(cM.xo,{background:"default",isOpen:n,onOpenChange:function(e){i||t(e)},placement:"bottom start",label:"Navigation menu",noArrow:!0,children:[function(e){var n=e.ref,t=(0,ut._)(e,["ref"]);return(0,$.BX)("button",(0,eG._)((0,eE._)({css:um.button,"data-cy":"global-nav-dropdown-btn",ref:(0,ur.l)(n,u)},t),{children:[(0,$.tZ)(ui.N2,{color:nP.TV.foregroundDefault,size:20}),(0,$.tZ)(nn.Z,{color:nP.TV.foregroundDimmest,size:12})]}))},(0,$.BX)(K.G,{css:um.wrapper,children:[(0,$.tZ)(K.G,{css:um.newReplButtonWrapper,children:(0,$.tZ)(e6.zx,{colorway:"primary",text:"Create a Repl",iconLeft:(0,$.tZ)(lC.Z,{}),onClick:function(){return o(!0)}})}),(0,$.tZ)(K.G,{css:um.newWindowButtonWrapper,children:(0,$.tZ)(e6.zx,{text:"New window",iconLeft:(0,$.tZ)(l8.Z,{}),onClick:function(){l5.X.openNewWindow()}})}),(0,$.tZ)(K.G,{css:um.replsListContainer,children:(0,$.tZ)(uo.Z,{onClick:function(e,n){if(n){l5.X.openWindow(e);return}a.push({pathname:"/replEnvironmentDesktop",query:{replUrl:e}},{pathname:e})}})})]})]}),(0,$.tZ)(l4.Z,{isOpen:i,onRequestClose:function(){return o(!1)},children:(0,$.tZ)(l2.Z,{trackingSource:"createDialog"})}),(0,$.tZ)(uv,{targetElement:c.current})]})}var ub=t(59737),uZ=t(54129),ux=t(3569),uw=t(24886),u_=t(5128),uC=(0,ek.X)({popover:[Q.l0.maxWidth(460),Q.l0.width("100%")],button:[nq.gU.nofill,Q.l0.height(32),Q.l0.flex.growAndShrink(1),Q.l0.align.center,Q.l0.rowWithGap(4),Q.l0.px(6),Q.l0.borderRadius(),Q.l0.color.foregroundDefault]});function uk(e){var n=e.repl,t=e.getDesktopLayoutState,r=e.onDeployClick,i=(0,j._)((0,q.useState)(!1),2),o=i[0],a=i[1];return(0,$.BX)(cM.xo,{isOpen:o,onOpenChange:function(e){a(e),e&&(0,eZ.j)(eZ.U3.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:uC.popover,children:[(0,$.tZ)(K.K.button,{dataCy:"ws-repl-info-container",css:uC.button,onClick:function(){(0,eZ.j)(eZ.U3.REPL_METADATA_OPENED)},children:(0,$.tZ)(u_.Z,{repl:n})}),(0,$.tZ)(uw.Z,{getDesktopLayoutState:t,setIsEditing:a,onDeployClick:r})]})}var uS=t(379),uI=t(7935),uR=t(37655),uE=t(46134),uG=t(26881),uP=t(89313),uD=t(2446),uT=t(31417),uA=t(6038),uB=t(99149),uU=t(40703),uO=t(37475),uM=t(4041);function uL(e,n){var t=100*n;return e.slice(0,uH).filter(function(e){return e>=t}).length}function uX(e){return uL(e,uV)>=uj?"danger":uL(e,uF)>=uj?"warning":"ok"}function uW(e){return Math.round(10*e)/10}function uN(e){return Math.round((e+Number.EPSILON)*100)/100}function uz(e){return e/1024/1024}var uF=.9,uV=1,uH=10,uj=5,u$=ts.Dy.Union([ts.Dy.Literal("ok"),ts.Dy.Literal("warning"),ts.Dy.Literal("danger")]),uq=ts.Dy.Object({cpuUtilizationPercent:ts.Dy.Number(),memoryUsageRssBytes:ts.Dy.Number(),memoryUsageCacheBytes:ts.Dy.Number(),memorySoftLimitBytes:ts.Dy.Number(),memoryHardLimitBytes:ts.Dy.Number(),numVCpu:ts.Dy.Number(),user:ts.Dy.Object({cpuUtilizationPercent:ts.Dy.Number()}),system:ts.Dy.Object({cpuUtilizationPercent:ts.Dy.Number()}),storage:ts.Dy.Object({diskLimitBytes:ts.Dy.Number(),diskUsedBytes:ts.Dy.Number(),diskUsedWorkspaceBytes:ts.Dy.Number(),diskUsedNixBytes:ts.Dy.Number(),scratchDiskLimitBytes:ts.Dy.Number(),scratchDiskUsedBytes:ts.Dy.Number()})});ts.Dy.Object({cpu:ts.Dy.Object({numVCpu:ts.Dy.Number(),utilPercent:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number()),status:u$,user:ts.Dy.Object({utilPercent:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number())}),system:ts.Dy.Object({utilPercent:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number())})}),memory:ts.Dy.Object({softLimitBytes:ts.Dy.Number(),hardLimitBytes:ts.Dy.Number(),usageBytes:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number()),status:u$,rss:ts.Dy.Object({usageBytes:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number())}),cache:ts.Dy.Object({usageBytes:ts.Dy.Number(),recentUtilPercents:ts.Dy.Array(ts.Dy.Number())})}),storage:ts.Dy.Object({usedBytes:ts.Dy.Number(),totalBytes:ts.Dy.Number(),scratchUsedBytes:ts.Dy.Number(),scratchTotalBytes:ts.Dy.Number(),nixUsedBytes:ts.Dy.Number(),workspaceUsedBytes:ts.Dy.Number()})});var uY={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},uJ=(0,tr.cn)(uY),uK=(0,tr.cn)(!0),uQ=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function u0(e,n){e.unshift(n),e.pop()}var u1=(0,tr.cn)(null,function(e,n,t){n(uJ,function(e){return(0,tJ.Uy)(e,function(e){var n,r,i,o,a,l,c,u,s,d,p,f,h,v;c=e.cpu,u=e.memory,s=e.storage,c.numVCpu=t.numVCpu,c.utilPercent=uQ(t.cpuUtilizationPercent,!0),c.recentUtilPercents.unshift(c.utilPercent),c.status=uX(c.recentUtilPercents),d=c.user,p=c.system,d.utilPercent=uQ(t.user.cpuUtilizationPercent),u0(d.recentUtilPercents,d.utilPercent),p.utilPercent=uQ(t.system.cpuUtilizationPercent),u0(p.recentUtilPercents,p.utilPercent),u.softLimitBytes=t.memorySoftLimitBytes,u.hardLimitBytes=t.memoryHardLimitBytes,u.usageBytes=t.memoryUsageRssBytes,f=u.usageBytes/u.softLimitBytes*100,u0(u.recentUtilPercents,f),u.status=uX(u.recentUtilPercents),h=u.rss,v=u.cache,h.usageBytes=t.memoryUsageRssBytes,u0(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),v.usageBytes=t.memoryUsageCacheBytes,u0(v.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),s.usedBytes=(null===(n=t.storage)||void 0===n?void 0:n.diskUsedBytes)||0,s.totalBytes=(null===(r=t.storage)||void 0===r?void 0:r.diskLimitBytes)||1073741824,s.scratchUsedBytes=(null===(i=t.storage)||void 0===i?void 0:i.scratchDiskUsedBytes)||0,s.scratchTotalBytes=(null===(o=t.storage)||void 0===o?void 0:o.scratchDiskLimitBytes)||1073741824,s.nixUsedBytes=(null===(a=t.storage)||void 0===a?void 0:a.diskUsedNixBytes)||0,s.workspaceUsedBytes=(null===(l=t.storage)||void 0===l?void 0:l.diskUsedWorkspaceBytes)||0})})}),u2=(0,t8.kv)(uJ,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),u4=(0,t8.kv)(uJ,function(e){return"ok"!==e.memory.status?e.memory.status:null}),u5=(0,tr.cn)(function(e){var n=e(u4);if(n)return{type:"ram_alert",status:n};var t=e(u2);return t?{type:"cpu_alert",status:t}:null}),u3=(0,tr.cn)(function(e){for(var n=e(uJ),t=n.cpu,r=n.memory,i=0,o=["danger","warning"];i<o.length;i++){var a=o[i];if(t.status===a||r.status===a)return"danger"}return"ok"}),u7=(0,t8.kv)(uJ,function(e){var n=uW((0,uE.$s)(e.memory.softLimitBytes));return{numVCpu:uW(e.cpu.numVCpu),ramTotalGB:n}},t7()),u6=(0,t8.kv)(uJ,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,i=n.user,o=n.system,a=uN(n.utilPercent),l=uN(i.utilPercent),c=uN(o.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:c,recentSystemUtilPercents:o.recentUtilPercents}},t7()),u8=(0,t8.kv)(uJ,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,i=n.cache,o=n.rss,a=n.softLimitBytes,l=n.usageBytes,c=uz(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(uN(uz(l)))/c)),currentRssInBytes:1048576*Math.round(uN(uz(o.usageBytes))),currentCacheInBytes:1048576*Math.round(uN(uz(i.usageBytes))),recentUtilPercents:r,recentRssUtilPercents:o.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},t7()),u9=(0,t8.kv)(uJ,function(e){var n=e.storage;return{replUsedInMib:uz(n.usedBytes),scratchUsedInMib:uz(n.scratchUsedBytes),nixUsedInMib:uz(n.nixUsedBytes),workspaceUsedInMib:uz(n.workspaceUsedBytes)}},t7()),se=(0,t8.kv)(uJ,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:uz(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},t7()),sn=(0,t8.kv)(uJ,function(e){return e.cpu.numVCpu}),st=(0,t8.kv)(uJ,function(e){return uz(e.memory.softLimitBytes)}),sr=(0,t8.kv)(uJ,function(e){return uz(e.storage.totalBytes)});function si(){return(0,uA.Hg)(sr)}var so=(0,t8.kv)(uJ,function(e){return uz(e.storage.usedBytes)});function sa(){return(0,uA.Hg)(so)}var sl=t(34293),sc=t(30197),su=K.K.span,ss=(0,ek.X)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(Q.TV.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function sd(e){var n=e.label,t=e.children,r=(0,j._)(t,2),i=r[0],o=r[1],a=(0,j._)((0,q.useState)(!1),2),l=a[0],c=a[1],u=(0,j._)((0,q.useState)(!1),2),s=u[0],d=u[1],p=(0,q.useRef)(!1);return(0,q.useEffect)(function(){s&&(p.current=!0);var e=setTimeout(function(){c(s)},200);return function(){clearTimeout(e)}},[s]),(0,$.BX)(cM.xo,{label:n,isOpen:l,onOpenChange:function(){return c(!l)},placement:"right",offset:16,children:[(0,$.tZ)(su,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onClick:function(){return c(!0)},onKeyDown:function(e){"Enter"===e.key&&c(!0)},tabIndex:0,css:ss.triggerWrapper,children:i}),(0,$.tZ)(su,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:o})]})}function sp(e){return e>sc.lb?"".concat((0,uE.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,uE.p6)(e)).toLocaleString()," MiB")}uG.kL.register(uG.jn,uG.Gu);var sf=(0,ek.X)({sectionPadding:[Q.l0.py(4),Q.l0.px(12)],rowSpacing:[Q.l0.rowWithGap(8),Q.l0.justify.spaceBetween,Q.l0.align.center]}),sh=(0,ek.X)({wrapper:[Q.l0.borderRadius(4),Q.l0.border({color:Q.TV.outlineDimmer}),Q.l0.overflow("hidden")],rowSection:[sf.sectionPadding,sf.rowSpacing],hoverRowSection:[sf.sectionPadding,sf.rowSpacing,{":hover":{backgroundColor:Q.TV.backgroundHigher}}],hoverColumnSection:[sf.sectionPadding,Q.l0.colWithGap(8),{":hover":{backgroundColor:Q.TV.backgroundHigher}}],sectionHeading:[Q.l0.fontWeight.bold],alignedRow:[Q.l0.rowWithGap(8),Q.l0.align.center],alignedSpaceBetweenRow:[sf.rowSpacing],detailContent:[Q.l0.p(8),Q.l0.colWithGap(8),Q.l0.width(260)],detailSectionsWrapper:[Q.l0.borderRadius(4),Q.l0.border({color:Q.TV.outlineDimmer}),Q.l0.overflow("hidden")],warningText:[Q.l0.color.orangeStronger],dangerText:[Q.l0.color.redStronger],chartWrapper:[Q.l0.width(22),Q.l0.height(18),Q.l0.borderRadius(2)],indentAgain:[Q.l0.pl(24)]});function sv(e){var n=e.editResourcesAuthz,t=e.onEditCompute,r=(0,uA.Hg)(u7);return(0,$.BX)(K.G,{css:sh.wrapper,children:[(0,$.BX)(K.G,{css:sh.rowSection,children:[(0,$.tZ)(ew.xv,{css:sh.sectionHeading,children:"Compute"}),(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.BX)(ew.xv,{color:"dimmer",children:[r.numVCpu," vCPU, ",r.ramTotalGB," GiB RAM"]}),n.isAuthorized?(0,$.tZ)(cF.hU,{onClick:t,alt:"Edit compute",children:(0,$.tZ)(uP.Z,{})}):(0,$.tZ)(cF.hU,{disabled:!0,alt:n.message,children:(0,$.tZ)(uD.Z,{})})]})]}),(0,$.tZ)(nv.R,{}),(0,$.tZ)(sg,{}),(0,$.tZ)(sm,{})]})}function sg(){var e=(0,uA.Hg)(u6);return(0,$.tZ)(sy,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function sm(){var e=(0,uA.Hg)(u8);return(0,$.tZ)(sy,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:sp(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:sp(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function sy(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.detailText,a=e.detailRows;return(0,$.BX)(sd,{label:"Compute details",children:[(0,$.BX)(K.G,{css:sh.hoverRowSection,children:[(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.tZ)(ew.xv,{children:n}),(0,$.tZ)(sb,{status:r})]}),(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:t}),(0,$.tZ)(K.G,{css:sh.chartWrapper,children:(0,$.tZ)(sZ,{data:i,colorAreaUnderLine:!0})})]})]}),(0,$.BX)(K.G,{css:sh.detailContent,children:[(0,$.tZ)(ew.xv,{children:o}),(0,$.tZ)(K.G,{css:sh.detailSectionsWrapper,children:a.map(function(e,n){return(0,$.BX)(K.G,{css:sh.rowSection,children:[(0,$.tZ)(ew.xv,{children:e.title}),(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:e.displayValue}),(0,$.tZ)(K.G,{css:sh.chartWrapper,children:(0,$.tZ)(sZ,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function sb(e){var n=e.status;return"warning"===n?(0,$.BX)($.HY,{children:[(0,$.tZ)(na.Z,{color:Q.TV.orangeStronger}),(0,$.tZ)(ew.xv,{css:sh.warningText,children:"Near limit"})]}):"danger"===n?(0,$.BX)($.HY,{children:[(0,$.tZ)(na.Z,{color:Q.TV.redStronger}),(0,$.tZ)(ew.xv,{css:sh.dangerText,children:"At limit"})]}):null}function sZ(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,c_.F)().values,a=n.map(function(e,n){return{x:-n,y:e}}),l=uF-.05,c=uV-.02;return(0,$.tZ)(sl.x1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,u=o.global.orangeDefault,s=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(l-.08,a),i.addColorStop(l+.08,u),i.addColorStop(c-.08,u),i.addColorStop(c,s),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,u=t.chartArea;if(u){var s=i.createLinearGradient(u.left,0,u.right,0),d=sx(o.global.blueDimmest),p=sx(o.global.orangeDimmest),f=sx(o.global.redDimmest);return a.forEach(function(e,t){if(s){var r=1-t/(n.length-1);e.y<100*l?s.addColorStop(r,d):e.y<100*c?s.addColorStop(r,p):s.addColorStop(r,f)}}),s}}}]}})}function sx(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function sw(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,uA.Hg)(se);if(!r)return null;var i="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===n?"CPU":"RAM",a="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,uE.$s)(1048576*r.ramQuotaMiBs)," GiB RAM")," limit of the free plan ").concat(uj," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,$.BX)(K.G,{css:s_.dialogContainer,children:[(0,$.tZ)(na.Z,{color:Q.TV.orangeStrongest}),(0,$.BX)(ew.xv,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,$.tZ)(ew.xv,{color:"dimmer",children:a}),(0,$.tZ)(K.G,{css:s_.chartWrapper,children:(0,$.tZ)(sZ,{data:i,showHorizontalGridLines:!0})}),(0,$.tZ)(e6.zx,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,eZ.j)(eZ.U3.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var s_=(0,ek.X)({dialogContainer:[Q.l0.p(8),Q.l0.colWithGap(8)],chartWrapper:[Q.l0.height(67),Q.l0.backgroundColor.backgroundRoot,Q.l0.borderRadius(12),Q.l0.py(12),Q.l0.px(16)]}),sC=function(){var e=(0,es.r)(),n=e.showResourcesUpsell,t=e.refetch,r=(0,j._)((0,q.useState)(!1),2),i=r[0],o=r[1];return n?(0,$.BX)($.HY,{children:[(0,$.tZ)(ed.u,{tooltip:sk,children:(0,$.tZ)(ep.D,{css:sS.pill,text:"CPU/RAM LIMITED",onClick:function(){return o(!0)}})}),(0,$.tZ)(eC.Z,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",onPurchaseComplete:function(){return t()},contextualUpsell:(0,$.BX)($.HY,{children:[(0,$.tZ)(ew.xv,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,$.BX)(ew.xv,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and ",(0,uE.$s)(sc.CU)," ","GiB of storage"]})]}),analyticsContext:{upgrade:{context:"repl_resources"}}})]}):null},sk="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",sS=(0,ek.X)({pill:[Q.l0.cursor.pointer]}),sI=t(48155),sR=t(63411),sE=t(25722),sG=t(3615),sP=t(31089),sD=t(62695);function sT(){var e=(0,eB._)(["\n  fragment EditComputeOptions on Repl {\n    devComputeOptions {\n      sku\n      status\n      cost\n      displayName\n      description\n    }\n  }\n"]);return sT=function(){return e},e}function sA(){var e=(0,eB._)(["\n  query EditComputeDialog($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        ...EditComputeOptions\n      }\n    }\n  }\n  ","\n"]);return sA=function(){return e},e}function sB(){var e=(0,eB._)(["\n  mutation EditCompute($input: BoostRepl2Input!) {\n    boostRepl2(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoostRepl2Result {\n        repl {\n          ... on Repl {\n            id\n            ...EditComputeOptions\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return sB=function(){return e},e}var sU={},sO=(0,eU.Ps)(sT()),sM=(0,eU.Ps)(sA(),sO),sL=(0,eU.Ps)(sB(),sO);function sX(e){var n,t,r=e.onEditComplete,i=(0,eb.Z)(),o=(0,j._)((0,q.useState)([]),2),a=o[0],l=o[1],c=(0,j._)((0,q.useState)(null),2),u=c[0],s=c[1],d=(0,j._)((0,q.useState)(null),2),p=d[0],f=d[1],h=(0,cT.Z)().showError,v=(0,sP.U)(),g=(n=(0,eE._)({},sU,{variables:{replId:i},onCompleted:function(e){if((null==e?void 0:e.repl.__typename)!=="Repl"){h("Failed to load Repl");return}var n=e.repl.devComputeOptions.find(function(e){return e.status===nl.Mf.Current});if(!n){sE.uT("Missing currentBoost for repl ".concat(i));return}l(e.repl.devComputeOptions),s(n),f(n.sku)}}),eL.a(sM,n)).loading,m=(0,j._)((0,q.useState)(!1),2),y=m[0],b=m[1],Z=(0,j._)((t=(0,eE._)({},sU,{onError:function(e){sE.Tb(e),h(e.message)},onCompleted:function(e){(null==e?void 0:e.boostRepl2.__typename)!=="BoostRepl2Result"&&h(e.boostRepl2.message),setTimeout(function(){r()},3e3)}}),eX.D(sL,t)),1)[0];return g?(0,$.tZ)(K.G,{css:sz.loadingWrapper,children:(0,$.tZ)(no.Z,{})}):(0,$.BX)(K.G,{css:sz.root,children:[(0,$.tZ)(sG.E,{tag:"fieldset",name:v("pickAmount"),value:null!=p?p:nl.Xb.Boost_4cpu_8ram,onChange:function(e){f(e.target.value)},css:sz.radioGroup,children:a.map(function(e){return(0,$.tZ)(sN,{checked:p===e.sku,option:e,isCurrentOption:(null==u?void 0:u.sku)===e.sku},e.sku)})}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",css:sz.explanationText,children:"You will only be charged for the time this Repl is active"}),(0,$.tZ)(e6.zx,{css:sz.submitButton,colorway:"primary",text:y?(0,$.tZ)(no.Z,{}):"Apply change",disabled:(null==u?void 0:u.sku)===p||y,onClick:function(){p&&(b(!0),Z({variables:{input:{replId:i,setting:sW(p)}}}))}})]})}var sW=function(e){switch(e){case nl.Xb.Boost_4cpu_8ram:return nl.jU.Off;case nl.Xb.Boost_8cpu_16ram:return nl.jU.Boost_8cpu_16ram;case nl.Xb.Boost_16cpu_32ram:return nl.jU.Boost_16cpu_32ram;case nl.Xb.Boost_32cpu_64ram:return nl.jU.Boost_32cpu_64ram;default:(0,cQ.Z)(e)}};function sN(e){var n=e.checked,t=e.option,r=e.isCurrentOption;return(0,$.tZ)("label",{htmlFor:t.sku,css:[sF.base,n?sF.checked:sF.unchecked],children:(0,$.BX)(K.G,{children:[(0,$.tZ)(nY.T,{children:(0,$.tZ)(sG.Y,{id:t.sku,value:t.sku,disabled:"unavailable"===t.status})}),(0,$.BX)(K.G,{css:"unavailable"===t.status?sz.disabledOption:sz.optionContainer,children:[(0,$.BX)(K.G,{css:sz.optionHeader,children:[(0,$.tZ)(ew.xv,{css:sz.optionDisplayText,children:t.displayName}),(0,$.BX)(K.G,{css:sz.optionPriceAndStatus,children:[(0,$.tZ)(ew.xv,{children:t.cost}),r?(0,$.tZ)(ne.Z,{size:16}):null]})]}),(0,$.tZ)(ew.xv,{color:"dimmer",children:t.description})]})]})})}var sz=(0,ek.X)({root:[Q.l0.p(8),Q.l0.colWithGap(16)],explanationText:[Q.l0.textAlign.center],submitButton:[Q.l0.borderRadius(4)],radioGroup:[Q.l0.colWithGap(8)],disabledOption:[Q.l0.flex.growAndShrink(1),{opacity:.5}],optionContainer:[Q.l0.flex.growAndShrink(1)],optionHeader:[Q.l0.rowWithGap(32),Q.l0.align.center,Q.l0.justify.spaceBetween],optionDisplayText:[Q.l0.fontWeight.bold],optionPriceAndStatus:[Q.l0.rowWithGap(6),Q.l0.align.center],loadingWrapper:[Q.l0.p(16),Q.l0.align.center,Q.l0.justify.center]}),sF=(0,ek.X)({base:[Q.l0.position.relative,Q.l0.flex.growAndShrink(1),Q.l0.p(8),(C={border:"1px solid "+Q.TV.outlineDimmest,cursor:"pointer",flexBasis:0,transition:"transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)"},(0,ee._)(C,(0,sD.et)("mobileMax"),[Q.l0.py(8),Q.l0.colWithGap(4)]),(0,ee._)(C,"&:focus-within",{borderColor:Q.TV.outlineStrongest}),C),Q.l0.borderRadius(4)],checked:[[(0,ee._)({backgroundColor:Q.TV.accentPrimaryDimmest,borderColor:Q.TV.accentPrimaryStronger},(0,sD.et)("mobileMax"),{transform:"scale(1.02)",boxShadow:Q.TV.shadow1})]],unchecked:[nq.gU.outlined]});function sV(){var e=(0,eB._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return sV=function(){return e},e}function sH(){var e=(0,eB._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return sH=function(){return e},e}var sj={},s$=(0,eU.Ps)(sV()),sq=(0,eU.Ps)(sH()),sY=t(65697),sJ=t(17608),sK=t(19602);function sQ(){var e=(0,eB._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return sQ=function(){return e},e}var s0={},s1=(0,eU.Ps)(sQ()),s2=t(17437);function s4(e){return e>sc.lb?"".concat((0,uE.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,uE.p6)(e)).toLocaleString()," MiB")}function s5(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function s3(e){var n,t,r,i=e.isTeamRepl,o=e.isReplOwner,a=sa(),l=si(),c=(n=(0,eE._)({},s0,void 0),eL.a(s1,n)),u=c.data,s=c.refetch,d=(null==u?void 0:null===(t=u.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(u.currentUser.storageInfo.accountStorageUtilization.total):0,p=(null==u?void 0:null===(r=u.currentUser)||void 0===r?void 0:r.userSubscriptionType)===nl.HP.HackerPro?sc.CU:sc.tC,f=(0,q.useMemo)(function(){return(0,s2.Z)(function(){return s()},{wait:12e4,maxWait:3e5})},[s]);return(0,q.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,f()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),f.isScheduled()&&f.flush()}},[f,a,l,s]),(0,$.BX)(K.G,{css:sh.wrapper,children:[(0,$.BX)(K.G,{css:sh.rowSection,children:[(0,$.tZ)(ew.xv,{css:sh.sectionHeading,children:"Storage"}),o?(0,$.tZ)(K.G,{css:sh.alignedRow,children:(0,$.tZ)(ew.xv,{color:"dimmer",children:s4(d)})}):null]}),(0,$.tZ)(nv.R,{}),o?(0,$.tZ)(s7,{accountUsedInBytes:d,accountQuotaInBytes:p}):(0,$.tZ)(s6,{isReplOwner:o,isTeamRepl:i})]})}function s7(e){var n=e.accountUsedInBytes,t=e.accountQuotaInBytes,r=(0,j._)((0,q.useState)(!1),2),i=r[0],o=r[1],a=s5(n,t),l=(0,uA.Hg)(u9),c=l.replUsedInMib,u=l.scratchUsedInMib,s=l.nixUsedInMib,d=l.workspaceUsedInMib,p=[{title:"Total",usageDisplayText:"".concat(s4(n)),percentOfUsage:null},{title:"This Repl",usageDisplayText:"".concat(s4(1048576*c)),percentOfUsage:s5(1048576*c,n)},{title:"Workspace",usageDisplayText:"".concat(s4(1048576*d)),percentOfUsage:null,indentAgain:!0},{title:"Nix packages",usageDisplayText:"".concat(s4(1048576*s)),percentOfUsage:null,indentAgain:!0,nix:!0},{title:"Scratch disk",usageDisplayText:"".concat(s4(1048576*u)),percentOfUsage:s5(1048576*u,n)}];return(0,$.BX)($.HY,{children:[(0,$.BX)(sd,{label:"Storage details",children:[(0,$.BX)(K.G,{css:sh.hoverColumnSection,children:[(0,$.BX)(K.G,{css:sh.alignedSpaceBetweenRow,children:[(0,$.BX)(ew.xv,{children:[s4(t)," included"]}),(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.BX)(ew.xv,{color:"dimmer",multiline:!1,children:[Math.min(a,100),"%"]}),(0,$.tZ)(de,{percentage:a})]})]}),n>t?(0,$.BX)(K.G,{css:sh.alignedSpaceBetweenRow,children:[(0,$.tZ)(ew.xv,{children:"Additional usage"}),(0,$.tZ)(ew.xv,{color:"dimmer",children:s4(n-t)})]}):null]}),(0,$.BX)(K.G,{css:sh.detailContent,children:[(0,$.tZ)(ew.xv,{children:"Your account storage usage."}),(0,$.tZ)(K.G,{css:sh.detailSectionsWrapper,children:p.map(function(e,n){return(0,$.BX)(K.G,{css:sh.rowSection,children:[(0,$.BX)(K.G,{css:sh.alignedRow,children:[n>0?(0,$.tZ)(K.G,{css:e.indentAgain&&sh.indentAgain,children:(0,$.tZ)(sJ.Z,{color:Q.TV.outlineDefault,size:16})}):null,(0,$.tZ)(ew.xv,{children:e.title})]}),e.nix?(0,$.tZ)(K.G,{css:sh.alignedRow,children:(0,$.tZ)(cF.hU,{onClick:function(){return o(!0)},alt:"Delete Nix packages",disabled:s<1,children:(0,$.tZ)(sK.Z,{})})}):null,(0,$.BX)(K.G,{css:sh.alignedRow,children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,$.BX)(ew.xv,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,$.tZ)(dn,{isOpen:i,onClose:function(){return o(!1)}})]})}function s6(e){var n=e.isReplOwner,t=e.isTeamRepl,r=sa(),i=si(),o=1048576*r,a=s5(o,1048576*i);return(0,$.BX)(K.G,{css:sh.rowSection,children:[(0,$.BX)(K.G,{css:sh.alignedRow,children:[n?(0,$.tZ)(sJ.Z,{color:Q.TV.outlineDefault,size:16}):null,(0,$.tZ)(ew.xv,{children:"This Repl"})]}),(0,$.BX)(ew.xv,{color:"dimmer",children:[s4(o)," ",t?"(".concat(a,"% of total)"):null]})]})}var s8=(0,ek.X)({bar:[Q.l0.width(1.5),Q.l0.height(7),Q.l0.borderRadius(1)]}),s9=(0,ek.X)({wrapper:[Q.l0.rowWithGap(1)],dimBar:[s8.bar,Q.l0.backgroundColor.greyDimmest],blueBar:[s8.bar,Q.l0.backgroundColor.blueStronger],yellowBar:[s8.bar,Q.l0.backgroundColor.yellowStronger],redBar:[s8.bar,Q.l0.backgroundColor.redStronger]});function de(e){var n=e.percentage,t=Math.round(n/10),r=(0,en._)(Array(7).fill(s9.blueBar)).concat((0,en._)([,,].fill(s9.yellowBar)),[s9.redBar]);return(0,$.tZ)(K.G,{css:s9.wrapper,children:r.map(function(e,i){var o=n>100?s9.blueBar:r[i];return(0,$.tZ)(K.G,{css:i<t?o:s9.dimBar},i)})})}var dn=function(e){var n=e.onClose,t=e.isOpen,r=(0,ev.Z)().container;return(0,$.tZ)(nk.u,{isOpen:t,onRequestClose:n,children:(0,$.tZ)(sY.Z,{name:"Nix Packages",description:"this Repl's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},dt=t(87387),dr=(0,ek.X)({replResourcesContainer:[Q.l0.p(8),Q.l0.colWithGap(8)],headerContainer:[Q.l0.rowWithGap(8)],trialButton:[Q.l0.borderRadius(4)],headerAndSubheaderContainer:[Q.l0.colWithGap(4)],editComputeContainer:[Q.l0.rowWithGap(8),Q.l0.p(8),Q.l0.align.center],loadingStateWrapper:[Q.l0.center,Q.l0.p(16)],ctaWrapper:[Q.l0.colWithGap(8)]});function di(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b=e.onRequestUpgrade,Z=(o=(0,eE._)({},sj,void 0),eL.a(s$,o)),x=Z.data,w=Z.loading,_=(a={variables:{replId:(0,eb.Z)()}},l=(0,eE._)({},sj,a),eL.a(sq,l)),C=_.data,k=_.loading,S=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:null,I=(null==S?void 0:null===(c=S.org)||void 0===c?void 0:c.id)!==void 0&&(null==S?void 0:null===(u=S.org)||void 0===u?void 0:u.type)==="team",R=(null==S?void 0:null===(s=S.owner)||void 0===s?void 0:s.__typename)==="Team"||I,E=(null==S?void 0:null===(d=S.owner)||void 0===d?void 0:d.id)===(null==x?void 0:null===(p=x.currentUser)||void 0===p?void 0:p.id),G=null==x?void 0:null===(f=x.currentUser)||void 0===f?void 0:f.userSubscriptionType,P=(null==x?void 0:null===(v=x.currentUser)||void 0===v?void 0:null===(h=v.paymentMethod)||void 0===h?void 0:h.__typename)==="PaymentMethod"&&null!==x.currentUser.paymentMethod.id,D=null==x?void 0:null===(m=x.currentUser)||void 0===m?void 0:null===(g=m.userSubscription)||void 0===g?void 0:g.isTrial,T=E&&("HACKER_PRO"!==G||D&&!P)&&!I,A=(0,es.r)().showResourcesUpsell,B=null==S?void 0:null===(y=S.authorizations)||void 0===y?void 0:y.editResources,U=(0,j._)((0,q.useState)(!1),2),O=U[0],M=U[1],L=(0,uA.Hg)(uK);return w||k||L||!B?(0,$.tZ)(K.G,{css:dr.loadingStateWrapper,children:(0,$.tZ)(no.Z,{})}):O?(0,$.BX)(K.G,{children:[(0,$.BX)(K.G,{css:dr.editComputeContainer,children:[(0,$.tZ)(cF.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return M(!1)},dataCy:"edit-compute-back-button",children:(0,$.tZ)(sI.Z,{})}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Edit compute"})]}),(0,$.tZ)(sX,{onEditComplete:function(){return M(!1)}})]}):(0,$.BX)(K.G,{css:dr.replResourcesContainer,children:[(0,$.BX)(K.G,{css:dr.headerAndSubheaderContainer,children:[(0,$.BX)(K.G,{css:dr.headerContainer,children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Resources"}),(0,$.tZ)(da,{resourceTier:(t=(n={isTeamRepl:R,isReplOwner:E,plan:G}).isTeamRepl,r=n.isReplOwner,i=n.plan,t?"team":r&&"HACKER_PRO"===i?"member":r&&null===i?"free":"hidden"),isOnTrial:D,showResourcesUpsell:A})]}),(0,$.tZ)(ew.xv,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,$.tZ)(sv,{editResourcesAuthz:B,onEditCompute:function(){M(!0)}}),I?null:(0,$.tZ)(s3,{isTeamRepl:R,isReplOwner:E}),T?(0,$.BX)(K.G,{css:dr.ctaWrapper,children:[(0,$.tZ)(e6.zx,{colorway:"blurple",iconLeft:(0,$.tZ)(sR.Z,{}),text:"Join Replit ".concat(dt.we),onClick:function(){return b()},css:dr.trialButton}),(0,$.BX)(ew.xv,{css:Q.l0.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,uE.$s)(sc.CU)," GiB Storage"]})]}):null]})}function da(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,$.tZ)(sC,{}):(0,$.tZ)(uS.D,{text:"Free",colorway:"grey"});case"member":if(t)return(0,$.tZ)(uS.D,{text:"".concat(dt.we," Trial"),colorway:"blue"});return(0,$.tZ)(uS.D,{text:"".concat(dt.we),colorway:"purple"});case"team":return(0,$.tZ)(uS.D,{text:"Team",colorway:"green"});default:return null}}function dl(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w=e.repl,_=e.currentUser,C=(0,j._)((0,q.useState)(!1),2),k=C[0],S=C[1],I=(0,j._)((0,q.useState)("resources"),2),R=I[0],E=I[1],G=(0,es.r)(),P=G.showResourcesUpsell,D=G.refetch,T=(0,j._)((0,q.useState)(!1),2),A=T[0],B=T[1],U=(r=(n={repl:w,currentUser:_,onAlert:function(e){E(e),S(!0)}}).repl,i=n.currentUser,o=n.onAlert,a=(0,uA.yL)(u5),l=(0,nG.useRouter)(),c=(0,ev.Z)().runner,u=(0,J.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),d=(s=(0,j._)((0,q.useState)(!1),2))[0],p=s[1],f=(null===(t=r.owner)||void 0===t?void 0:t.__typename)==="User"&&r.owner.id===(null==i?void 0:i.id),h=null==i?void 0:i.userSubscriptionType,g=(v=(0,ua.Z)("announcement","resources-upgrade-modal")).shouldDisplay,m=v.register,y=v.dismiss,(0,q.useEffect)(function(){!(0,nb.Gv)(l)&&f&&null===h&&u&&m()},[u,f,m,l,h]),Z=(b=(0,j._)((0,q.useState)(!0),2))[0],x=b[1],(0,q.useEffect)(function(){var e=setTimeout(function(){x(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,q.useEffect)(function(){if(c&&!d)return c.onStateChanged(function(e){e!==ct.Ah.RUNNING||d||p(!0)})},[c,d]),(0,q.useEffect)(function(){if(!(Z||(0,nb.Gv)(l))&&g&&d)return a.subscribe(function(e){e&&o(e.type)})},[a,m,Z,u,f,o,l,g,h,d]),{dismissAlert:y}).dismissAlert,O=function(){U(),S(!1),E("resources")};return(0,$.BX)($.HY,{children:[(0,$.BX)(cM.xo,{isOpen:k,onOpenChange:function(e){S(e),e&&(0,eZ.j)(eZ.U3.REPL_RESOURCES_OPENED),e||"cpu_alert"!==R&&"ram_alert"!==R||O()},placement:"bottom start",label:"Repl resources",noArrow:!0,css:du.popover,children:[P?(0,$.BX)(e6.Yd,{"aria-label":"Repl resources","aria-expanded":k,"data-cy":"repl-resources-button",css:du.resourcesUpsell,children:[(0,$.tZ)(uR.Z,{size:16}),(0,$.tZ)(ew.xv,{css:du.resourcesUpsellText,children:"CPU/RAM LIMITED"}),(0,$.tZ)(dc,{})]}):(0,$.tZ)(cF.hU,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":k,dataCy:"repl-resources-button",css:du.button,children:(0,$.BX)(K.G,{css:du.buttonWrapper,children:[(0,$.tZ)(uR.Z,{size:16}),(0,$.tZ)(dc,{})]})}),(0,$.BX)(K.G,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===R?(0,$.tZ)(di,{onRequestUpgrade:function(){return B(!0)}}):null,"cpu_alert"===R||"ram_alert"===R?(0,$.BX)(K.G,{css:du.alertDialogWrapper,children:[(0,$.tZ)(cF.hU,{onClick:O,alt:"Close",css:du.alertDialogCloseButton,children:(0,$.tZ)(uI.Z,{})}),(0,$.tZ)(sw,{alertDialogType:R,onRequestUpgrade:function(){return B(!0)}})]}):null]})]}),(0,$.tZ)(eC.Z,{isOpen:A,onClose:function(){return B(!1)},onPurchaseComplete:function(){return D()},type:"purchase",contextualUpsell:P?(0,$.BX)($.HY,{children:[(0,$.tZ)(ew.xv,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,$.BX)(ew.xv,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,uE.$s)(sc.CU)," GiB of storage"]})]}):void 0,analyticsContext:{upgrade:{context:"repl_resources"}}})]})}function dc(){var e=(0,uA.Hg)(u3);return"ok"===e?null:(0,$.BX)($.HY,{children:[(0,$.tZ)(K.G,{css:dh.base}),(0,$.tZ)(K.G,{css:"warning"===e?dh.warningColors:dh.dangerColors})]})}var du=(0,ek.X)({popover:[Q.l0.width(360)],buttonWrapper:[Q.l0.position.relative],button:[Q.l0.height(32),Q.l0.width(32),Q.l0.borderRadius()],resourcesUpsellText:[Q.l0.fontSize(12)],resourcesUpsell:[(0,e6.uW)({size:12,variant:"nofill"}),(0,uS.E)({colorway:"yellow",clickable:!0,iconLeft:!0,iconRight:!1,variant:"muted"}),Q.l0.px(4),Q.l0.height(24),Q.l0.borderRadius(),Q.l0.position.relative,(0,ee._)({},Q.BC.max("tabletMax"),{span:{display:"none"}})],alertDialogWrapper:[Q.l0.position.relative],alertDialogCloseButton:[Q.l0.position.absolute,Q.l0.top(8),Q.l0.right(8),Q.l0.zIndex(1)]}),ds=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},dd=(0,et.F4)(ds(Q.TV.orangeDefault)),dp=(0,et.F4)(ds(Q.TV.redDefault)),df={position:"absolute",width:8,height:8,borderRadius:"50%",top:-4,right:-4,outline:"2px solid "+Q.TV.backgroundRoot,borderStyle:"solid"},dh=(0,ek.X)({base:[df,{backgroundColor:Q.TV.backgroundRoot}],warningColors:[df,{backgroundColor:Q.TV.orangeStronger,animation:"".concat(dd," 2s infinite"),outlineColor:"transparent"}],dangerColors:[df,{backgroundColor:Q.TV.redStronger,animation:"".concat(dp," 2s infinite"),outlineColor:"transparent"}]}),dv=t(76399);function dg(e,n){e.preventDefault();var t={x:e.pageX,y:e.pageY},r={x:0,y:0};n.start&&n.start({mouse:t,shiftKey:e.shiftKey});var i=function(e){var i={x:e.pageX,y:e.pageY};r={x:i.x-t.x,y:i.y-t.y},n.move({delta:r,shiftKey:e.shiftKey,mouse:i})},o=null,a=function(e){e.preventDefault(),o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){i(e)})},l=function(){o&&cancelAnimationFrame(o),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),document.removeEventListener("touchcancel",l),n.end&&n.end({delta:r,shiftKey:e.shiftKey})};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l),document.addEventListener("touchcancel",l)}var dm=t(2047),dy=t(82549),db=(0,oz.$)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),dZ=db.cssVars,dx=db.styleTokens,dw=(0,ek.X)({root:[Q.l0.center,Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),(k={transform:"translate(".concat(dx.transformX,", ").concat(dx.transformY,")"),width:dx.width,height:dx.height,cursor:dx.cursor,zIndex:dx.zIndex},(0,ee._)(k,Q.BC.canHover,[{"&:hover":{zIndex:oF.M.gutterHovered}}]),(0,ee._)(k,"&:hover .blanket",{transform:"scale(".concat(dx.hoverScaleX,", ").concat(dx.hoverScaleY,")")}),(0,ee._)(k,"& .icon",{transform:"rotate(".concat(dx.rotation,")")}),(0,ee._)(k,"&:active .blanket",[Q.l0.height("200vh"),Q.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,ee._)(k,"&:not(:active):hover > .grip",(0,ee._)({},dZ.gripColor,Q.TV.foregroundDefault)),k)],blanket:Q.l0.coverContainer,grip:[Q.l0.borderRadius(4),{width:dx.gripWidth,height:dx.gripHeight,visibility:dx.gripVisibility,background:dx.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]});function d_(e){var n=(0,q.useRef)(null),t=(0,dm.T)(),r=oT(rR);(0,oN.j)(n,e.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ee._)(n,dZ.width,t+"px"),(0,ee._)(n,dZ.height,r+"px"),n}),(0,oN.j)(n,e.position,function(e){var n,t=e.x,r=e.y;return n={},(0,ee._)(n,dZ.transformX,Math.round(t)+"px"),(0,ee._)(n,dZ.transformY,Math.round(r)+"px"),n}),(0,oN.j)(n,e.rotation,function(e){return(0,ee._)({},dZ.rotation,e+"deg")}),(0,oN.j)(n,e.gripIsHidden,function(e){return(0,ee._)({},dZ.gripVisibility,e?"hidden":"visible")}),(0,oN.j)(n,e.length,function(e){return(0,ee._)({},dZ.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")});var i=r?3:2;return(0,oN.j)(n,e.isStacked,function(e){var n;return n={},(0,ee._)(n,dZ.cursor,e?"row-resize":"col-resize"),(0,ee._)(n,dZ.hoverScaleX,(e?1:i).toString()),(0,ee._)(n,dZ.hoverScaleY,(e?i:1).toString()),n}),(0,oN.j)(n,e.isActive,function(e){var n;return n={},(0,ee._)(n,dZ.gripColor,e?"radial-gradient(circle, ".concat(Q.TV.accentPrimaryDefault," calc(100% - 48px), transparent)"):Q.TV.outlineDimmest),(0,ee._)(n,dZ.zIndex,(e?oF.M.gutterActive:oF.M.gutter).toString()),n}),(0,oN.j)(n,e.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,ee._)(n,dZ.gripWidth,t+"px"),(0,ee._)(n,dZ.gripHeight,r+"px"),n}),n}var dC=(0,q.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w=(d=ix(n=e.handleId),f=rj(p=iw(n)),h=r$(p),v=i_(n),g=(t=ix(n),(0,tt.Z)(function(){return(0,t8.kv)(t,function(e){return!!e.snapped})},[t])),m=iC(n),y=(r=rj(iw(n)),i=iC(n),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(r),t=n.width,o=n.height;return e(i)?t:o})},[r,i])),b=(o=ix(n),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(o),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?r?0:270:0})},[o])),Z=(a=iC(n),l=i_(n),c=rj(iw(n)),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(c),t=n.width,r=n.height,i=e(l),o=e(a),u=e(rR);return o?{width:i?t:24,height:u?6:2}:{height:i?r:24,width:u?6:2}})},[c,a,l])),x=(u=rj(iw(n)),s=iC(n),(0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(u),t=n.width,r=n.height;return(e(s)?t:r)<24})},[u,s])),{handle:oA(d),size:oA(f),position:oA(h),isActive:oA(v),isSnapped:oA(g),isStacked:oA(m),length:oA(y),rotation:oA(b),gripSize:oA(Z),gripIsHidden:oA(x)}),_=d_(w),C=oB(iZ),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,q.useRef)(e),t=oB(oi),r=oU(rG);return(0,q.useCallback)(function(i){if(i.snapped){t({leftPath:i.leftPath,percent:n.current});return}Promise.resolve(r()).then(function(r){var o=tI(r,i.leftPath);if(!o||!tC(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),S=(0,q.useRef)(null),I=(0,uZ.Z)(w.isSnapped);return(0,$.BX)(K.G,{innerRef:_,css:dw.root,onDoubleClick:function(){k(w.handle.current)},onPointerDown:function(e){dg(e,{start:function(){var e=w.handle.current;S.current=document.activeElement,C({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){C({type:"update",moveDelta:e.delta})},end:function(){var e,n;C({type:"end"}),null===(n=S.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,$.tZ)(K.G,{className:"blanket",css:dw.blanket}),I?(0,$.tZ)(dy.Z,{className:"icon"}):(0,$.tZ)(K.G,{className:"grip",css:dw.grip})]})}),dk=(0,q.memo)(function(){var e,n,t=d_((e=rj(iT),n=r$(iT),{size:oA(e),position:oA(n),isActive:oA(iP),length:oA(iA),gripSize:oA(iD),isStacked:oA(lb),gripIsHidden:oA(lb),rotation:oA(lZ)})),r={start:oB(iR),update:oB(iE),end:oB(iG)},i=lx().toggle,o=(0,q.useRef)(null);return(0,$.BX)(K.G,{innerRef:t,css:dw.root,onDoubleClick:function(){i()},onPointerDown:function(e){dg(e,{start:function(){o.current=document.activeElement,r.start()},move:function(e){var n=e.delta;r.update({deltaX:n.x})},end:function(){var e,n;r.end(),null===(n=o.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,$.tZ)(K.G,{className:"blanket",css:dw.blanket}),(0,$.tZ)(K.G,{className:"grip",css:dw.grip})]})}),dS=t(45883),dI=function(e){var n;null===(n=e.focus)||void 0===n||n.call(e)};function dR(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?dI:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,c=e.boundary,u=(0,q.useRef)(null);return(0,q.useEffect)(function(){if(u.current){var e=u.current,r=function(r){if(n(r)){if(l)d=(0,en._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),d=(0,en._)(o)}if(0!==d.length){var u=document.activeElement;if(e.contains(u)){if(l){if(c){var s=null==u?void 0:u.closest(c);u=(null==u?void 0:u.closest(l))||(null==s?void 0:s.querySelector(l))}else u=null==u?void 0:u.closest(l)}if(l&&(!u||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var d,p,f=null===(p=document.activeElement)||void 0===p?void 0:p.querySelector(l);f?i(f):i(d[0]);return}if(!u){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var h=d.findIndex(function(e){return e===u});if(-1===h){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var v=t({event:r,children:d,activeIndex:h,activeElement:u});!a&&(v<0||v>d.length-1)||(i(v<0?d[d.length-1]:v>d.length-1?d[0]:d[v]),r.stopPropagation(),r.preventDefault())}}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[c,n,t,i,u,l,a]),u}var dE=t(1567),dG=t(91026),dP=t(33323),dD=t(16633),dT=t(49070),dA=t(62922),dB=t(12394),dU=t(47385),dO=(0,ek.X)({self:[Q.l0.position.relative,Q.l0.flex.shrink(1),Q.l0.width("100%")],iconWrapper:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.right(0),Q.l0.height("100%"),Q.l0.p(4)]}),dM=(0,q.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,ut._)(e,["onClear"]);return(0,$.BX)(K.G,{css:dO.self,children:[(0,$.tZ)(dU.w,(0,eE._)({ref:n},i)),((null===(t=i.value)||void 0===t?void 0:t.length)||0)>0?(0,$.tZ)(K.G,{css:dO.iconWrapper,children:(0,$.tZ)(cF.hU,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(Q.TV.backgroundHighest," !important")}},children:(0,$.tZ)(uI.Z,{})})}):null]})});dM.displayName="SearchInput";var dL=t(53366),dX=(0,ek.X)({self:[Q.l0.width(32),Q.l0.height(32)],queryPill:[Q.l0.display.inline,Q.l0.fontSize(Q.TV.fontSizeDefault)],popover:[{"& > .popover-control-container":Q.l0.mr(0)}]});function dW(e){var n=e.text;return(0,$.tZ)(uS.D,{css:dX.queryPill,text:0===n.length?"⎵":n})}function dN(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,$.BX)(K.G,{css:[Q.l0.colWithGap(24)],children:[(0,$.BX)(ew.xv,{children:["Replace ",(0,$.tZ)(dW,{text:n})," with ",(0,$.tZ)(dW,{text:t})," ","in ",(0,eA.Z)("match",r,!0),"?"]}),(0,$.tZ)(ew.xv,{children:"This operation cannot be undone!"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.justify.end],children:[(0,$.tZ)(e6.zx,{onClick:function(){return i()},text:"Cancel"}),(0,$.tZ)(e6.zx,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,eA.Z)("match",r,!0)),iconLeft:(0,$.tZ)(dL.Z,{})})]})]})}function dz(e){var n,t=e.disabled,r=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,c=e.onReplace,u=e.buttonProps,s=(0,j._)((0,q.useState)(!1),2),d=s[0],p=s[1],f=(n=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return p(!1),(0,eZ.j)(eZ.U3.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&c(),[2]}})}),function(){return n.apply(this,arguments)}),h=(0,q.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,$.tZ)(K.G,{css:dX.popover,children:(0,$.BX)(nH.Z,{isOpen:d,maxWidth:400,showArrow:!0,children:[(0,$.tZ)(e6.zx,(0,eG._)((0,eE._)({},u),{text:"Replace all",disabled:t||r,onClick:function(){p(function(e){return!e})}})),(0,$.tZ)(dN,{query:i,replacement:o,numMatches:h,onCancel:function(){return p(!1)},onConfirm:f})]})})}var dF=t(29460),dV=t(17857),dH=t(54455),dj=t(41026),d$=(0,ek.X)({self:[Q.l0.width("fit-content"),Q.l0.display.inlineBlock,Q.l0.color.accentNegativeDefault,Q.l0.fontWeight.bold]});function dq(e){var n=e.content;return(0,$.tZ)($.HY,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,en._)(e).concat([(0,$.tZ)(K.K.span,{css:d$.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var dY=K.K.span,dJ="SearchMatch";function dK(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}(a=S||(S={})).HIGHLIGHT="highlight",a.REMOVE="remove",a.ADD="add",a.TEXT="text";var dQ=(0,ek.X)((I={self:[Q.l0.width("fit-content"),Q.l0.display.inline,Q.l0.cursor.pointer,{"&:focus-visible":[Q.l0.focusRing]},Q.l0.mx(1),Q.l0.px(2),Q.l0.borderRadius(4)]},(0,ee._)(I,"highlight",[Q.l0.backgroundColor.accentPrimaryDimmest,dK(Q.TV.accentPrimaryDimmer)]),(0,ee._)(I,"remove",[Q.l0.backgroundColor.accentNegativeDimmest,dK(Q.TV.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,ee._)(I,"add",[Q.l0.backgroundColor.accentPositiveDimmest,dK(Q.TV.accentPositiveDimmer)]),(0,ee._)(I,"hiddenTextWrapper",[Q.l0.display.inlineBlock,Q.l0.mx(2),{"& > div":[Q.l0.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,ee._)(I,"firstHiddenTextWrapper",[Q.l0.ml(0)]),(0,ee._)(I,"lastHiddenTextWrapper",[Q.l0.mr(0)]),I));function d0(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,$.tZ)($.HY,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var c=t[l],u=c.start+c.length;o.push({start:a,end:c.start,type:"text"});var s=n.substring(c.start,u);i.length>0&&i!==s?(o.push({start:c.start,end:u,type:"remove"}),o.push({start:-1,end:u,type:"add"})):o.push({start:c.start,end:u,type:"highlight",matchIndex:l}),a=u}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var c=e.start,u=e.end,s=e.type,d="".concat(c,"-").concat(u),p=u-c;if("text"===s){var f=r[t+1];if(0===t&&p>50)return(0,$.BX)(q.Fragment,{children:[(0,$.tZ)(dY,{css:[dQ.hiddenTextWrapper,dQ.firstHiddenTextWrapper],children:(0,$.tZ)(cF.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(u-50)},children:(0,$.tZ)(dj.Z,{})})},d),(0,$.tZ)("span",{children:n.substring(u-50,u)})]},d);if(t===r.length-1&&p>50)return(0,$.BX)(q.Fragment,{children:[(0,$.tZ)("span",{children:n.substring(c,c+50)}),(0,$.tZ)(dY,{css:[dQ.hiddenTextWrapper,dQ.lastHiddenTextWrapper],children:(0,$.tZ)(cF.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,$.tZ)(dj.Z,{})})},d)]},d);if(f&&p>100)return(0,$.BX)(q.Fragment,{children:[(0,$.tZ)("span",{children:n.substring(c,c+50)}),(0,$.tZ)(dY,{css:dQ.hiddenTextWrapper,children:(0,$.tZ)(cF.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,$.tZ)(dj.Z,{})})},d),(0,$.tZ)("span",{children:n.substring(u-50,u)})]},d)}var h=-1===c?i:n.substring(c,u);if("text"===s)return(0,$.tZ)(q.Fragment,{children:h},d);var v=null,g=r[t-1];return"add"===s&&(null==g?void 0:g.type)==="remove"&&(v=n.substring(g.start,g.end)),(0,$.tZ)(d1,{content:h,type:s,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(u)}},d)})})}function d1(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,ut._)(e,["content","type","isRegex","replacement","query","removedText"]),c=n,u=void 0;switch(t){case"highlight":u="Matched text ".concat(c);break;case"remove":u="Removed text ".concat(c);break;case"add":if(u="Added text ".concat(c),r&&null!==a)try{c=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,$.tZ)(K.K.span,(0,eG._)((0,eE._)({css:[dQ.self,dQ[t]],tabIndex:0,"aria-label":u,role:"button","data-nav":dJ},l),{children:"add"===t?(0,$.tZ)(dq,{content:c}):c}))}var d2="SearchLine",d4="--search-line-number-width",d5=(0,ek.X)({self:[Q.l0.rowWithGap(8),Q.l0.align.stretch,Q.l0.overflow("hidden"),Q.l0.cursor.pointer,Q.l0.borderRadius(4),{"&:focus-visible":[Q.l0.focusRing],"&:hover, &:focus-visible":[Q.l0.backgroundColor.backgroundHighest]}],content:[Q.l0.font.code,Q.l0.maxWidth("100%"),Q.l0.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[Q.l0.display.inlineBlock,Q.l0.color.foregroundDimmest,Q.l0.mr(8),Q.l0.pl(8)],lineNumber:[Q.l0.display.inlineBlock,Q.l0.textAlign.right,{width:"var(".concat(d4,")")}]});function d3(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,ut._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),c=(0,tt.Z)(function(){return function(e){(0,eZ.j)(eZ.U3.SEARCH_PANE_RESULT_CLICKED,(0,eE._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),u=(0,tt.Z)(function(){return function(){var e=r.length>0?r[0]:null;c(e?e.start+e.length:0)}},[r,c]);return(0,$.BX)(K.G,{tabIndex:0,css:d5.self,"data-nav":d2,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},onClick:u,children:[(0,$.tZ)(K.G,{css:d5.lineNumberWrapper,children:(0,$.tZ)(K.G,{tag:"span",css:d5.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,$.tZ)("pre",{css:d5.content,children:(0,$.tZ)(d0,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:c})})]})}var d7=t(58591),d6=(0,ek.X)({self:[Q.l0.flex.row,Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.justify.center,Q.l0.pt(8),Q.l0.pb(8),Q.l0.width("100%"),Q.l0.flex.wrap],text:[Q.l0.display.block,Q.l0.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function d8(e){var n=e.error;return(0,$.BX)(K.G,{css:d6.self,children:[(0,$.tZ)(na.Z,{}),(0,$.tZ)(ew.xv,{css:d6.text,multiline:!1,children:n})]})}function d9(e){return Math.log(e)*Math.LOG10E+1|0}var pe=t(61989),pn=t(44705),pt="SearchFileNav",pr="SearchFileHeaderNav",pi="SearchQueryNav",po="SearchQueryTogglesNav",pa=parseInt(nP.Wx.space24,10)+10,pl=(0,ek.X)({header:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.rowWithGap(6),Q.l0.flex.growAndShrink(1),Q.l0.overflow("hidden")],headerParentPathText:[Q.l0.flex.shrink(1e7)],headerFileNameText:[Q.l0.flex.shrink(1)],headerMatchesCountPill:[Q.l0.height(20),Q.l0.flex.shrink(0)],accordionWrapper:[Q.l0.mx(4),Q.l0.border({direction:"top",color:nP.TV.outlineDimmest})],accordionChildren:[Q.l0.p(4)],linesWrapper:[Q.l0.overflow("hidden"),Q.l0.borderRadius(4),Q.l0.font.code],padding:Q.l0.pb(4)});function pc(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,c=e.onFileLineClicked,u=e.searchResultBackgroundColor,s=(0,ut._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,tQ.Gn)("fontSize").preferences.fontSize,p=(0,q.useRef)(null),f=(0,tt.Z)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),h=(0,tt.Z)(function(){var e=t[t.length-1];if(!e)return{};var n=d9(e.lineNumber),r=(0,pn.$)(d);return(0,ee._)({fontSize:d,lineHeight:r},d4,"".concat(n,"ch"))},[t,d]);return(0,$.tZ)(nI.Tg,{css:pl.accordionWrapper,style:h,"data-nav":pt,innerRef:p,children:(0,$.tZ)(pe.Q,{expanded:void 0===o||o,onClick:function(){a(p.current)},headerProps:{"data-nav":"".concat(pr," ").concat(d2," ").concat(i?"".concat(pi," ").concat(po):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:u}},headerContent:(0,$.BX)(K.G,{css:pl.header,children:[(0,$.tZ)(lw.Z,{path:n,size:16}),(0,$.tZ)(ew.xv,{css:pl.headerFileNameText,multiline:!1,children:(0,ag.UO)(n)}),(0,$.tZ)(ew.xv,{color:"dimmest",css:pl.headerParentPathText,multiline:!1,children:(0,ag.Il)(n).replace(/^\.\//,"")}),(0,$.tZ)(uS.D,{variant:"muted",text:"".concat(f," ").concat((0,eA.Z)("match",f)),css:pl.headerMatchesCountPill})]}),children:(0,$.tZ)(K.G,{css:pl.accordionChildren,children:(0,$.tZ)(K.G,{css:pl.linesWrapper,children:t.map(function(e){return(0,$.tZ)(d3,(0,eG._)((0,eE._)({},e,s),{path:n,dedentBy:r,onFileLineClicked:c}),e.lineNumber)})})})})})}var pu=t(7300),ps=t(5189),pd=t(20904),pp=(0,ek.X)({container:[Q.l0.p(4),Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.spaceBetween,Q.l0.border({direction:"bottom",color:Q.TV.outlineDimmest})],actions:[Q.l0.display.flex,Q.l0.rowWithGap(4)]});function pf(e){var n="collapse"===e.collapseExpandAllState;return(0,$.BX)(K.G,{css:pp.container,children:[(0,$.BX)(ew.xv,{color:"dimmer",children:[e.totalCount," results in ",(0,eA.Z)("file",e.fileCount,!0)]}),(0,$.BX)(K.G,{css:pp.actions,children:[(0,$.tZ)(cF.hU,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,$.tZ)(pd.Z,{})}),(0,$.tZ)(cF.hU,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,$.tZ)(pu.Z,{}):(0,$.tZ)(ps.Z,{})})]})]})}var ph=(0,et.F4)({from:{opacity:0},to:{opacity:1}}),pv=(0,ek.X)({listWrapper:[Q.l0.overflowY("auto"),Q.l0.flex.grow(1),{contain:"strict"}],list:[Q.l0.width("100%"),Q.l0.position.relative],listItem:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.width("100%")],resultCount:[Q.l0.p(4),Q.l0.pb(8),Q.l0.color.foregroundDimmer],resultRow:[{animation:"".concat(ph," 120ms linear forwards")}]});function pg(e){var n,t,r,i,o,a,l,c=e.results,u=e.error,s=e.paneRef,d=e.onFileLineClicked,p=e.onOpenSearchPane,f=e.searchResultBackgroundColor,h=(0,ut._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),v=(0,tt.Z)(function(){return c.filter(function(e){return e.lines.length>0})},[c]),g=(0,tt.Z)(function(){return v.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[v]),m=(0,j._)((0,q.useState)({}),2),y=m[0],b=m[1],Z=(0,q.useRef)(null),x=(0,dH.MG)({count:v.length,getScrollElement:function(){return Z.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*d9(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return pa+20+24.39*t+2*t}(v[e].lines,null==s?void 0:null===(n=s.current)||void 0===n?void 0:n.offsetWidth)},overscan:3}),w=x.getVirtualItems(),_=(0,q.useRef)(null),C=(0,q.useCallback)(function(e){var n=Z.current;if(n&&_.current!==e){if(e.matches('[data-nav*="'.concat(pr,'"]'))){e.focus();return}var t=e.closest('[data-nav="'.concat(pt,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(pr,'"]'));if(!r){e.focus();return}var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;_.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),_.current===e&&(e.focus(),_.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),k=(n=(0,q.useCallback)(function(e){return"Tab"===e.key},[]),t=(0,q.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),dR((0,eG._)((0,eE._)({},{selector:'[data-nav*="'.concat(pr,'"]'),boundary:'[data-nav*="'.concat(pt,'"]')}),{isValid:n,move:t}))),S=(r=(0,q.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),i=(0,q.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),dR((0,eG._)((0,eE._)({},{selector:'[data-nav*="'.concat(d2,'"]'),focus:C}),{isValid:r,move:i}))),I=(o=(0,q.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),a=(0,q.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),dR((0,eG._)((0,eE._)({},{selector:'[data-nav*="'.concat(dJ,'"]'),focus:C}),{isValid:o,move:a}))),R=(0,dV.l)(k,S,I),E=(0,tt.Z)(function(){return v.length===Object.keys(y).length&&Object.values(y).every(Boolean)},[y,v.length]),G=null;return v.length>0?G=(0,$.BX)($.HY,{children:[(0,$.tZ)(pf,{fileCount:v.length,totalCount:g,collapseExpandAllState:E?"expand":"collapse",onToggleCollapseExpandAll:function(){E?b({}):b(v.reduce(function(e,n){return(0,eG._)((0,eE._)({},e),(0,ee._)({},n.path,!0))},{}))},onStartNewSearch:p}),(0,$.tZ)(K.K.div,{ref:Z,css:pv.listWrapper,children:(0,$.tZ)(K.G,{css:pv.list,style:{height:x.getTotalSize()},children:(0,$.tZ)(K.G,{css:pv.listItem,style:{transform:"translateY(".concat(null===(l=w[0])||void 0===l?void 0:l.start,"px)")},innerRef:R,children:w.map(function(e){var n,t=v[e.index],r=t.path;return(0,$.tZ)(K.K.div,{"data-index":e.index,ref:x.measureElement,css:pv.resultRow,children:(0,$.tZ)(pc,(0,eG._)((0,eE._)({},t,h),{scrollOffset:null===(n=w[0])||void 0===n?void 0:n.start,onFileLineClicked:d,isFirst:0===e.index,expanded:!0!==y[r],searchResultBackgroundColor:f,onClick:function(e){if(b(function(e){return(0,eG._)((0,eE._)({},e),(0,ee._)({},r,!(r in e)||!e[r]))}),Z.current&&e){var n,t,i=Math.floor(null!==(t=null===(n=w[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0),o=Math.floor(Z.current.scrollTop),a=e.offsetTop+i;a>o||Z.current.scrollTo({top:a-1})}}}))},e.key)})})})})]}):u===d7.f.EMPTY_RESULTS&&(G=(0,$.tZ)(dB.Z,{pane:{type:"searchReplace"},headerText:u})),(0,$.BX)($.HY,{children:[u&&u!==d7.f.EMPTY_RESULTS?(0,$.tZ)(d8,{error:u}):null,G]})}var pm=t(44793);function py(e){return(0,q.useMemo)(function(){return(0,en._)((0,pm.Eu)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var pb=t(41060);function pZ(){return(pZ=(0,eR._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,eP.Jh)(this,function(s){switch(s.label){case 0:if(t=e.container,r=e.fileList,0===(i=(0,ut._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:R.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:R.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,en._)((0,pb.PR)((0,eG._)((0,eE._)({},i),{context:1,mode:"files"}))))];case 2:if((c=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===c.error?R.NO_MATCHES:c.error}];o=(null===(l=c.output)||void 0===l?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,p,f,h,v,g,m,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:R.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,en._)((p=(d=i).replacement,f=d.query,h=d.isRegex,v=d.isCaseSensitive,g=d.isMatchingWholeWords,m=["sd"],y=[f.indexOf("\n")>=0?"m":"e",v?"c":"i"],g&&y.push("w"),m.push("--flags",y.join("")),h||m.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),m.push(f,p),m)).concat((0,en._)(o)))];case 4:if((u=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:u.error}];return[2,{success:!0}]}})})).apply(this,arguments)}(l=R||(R={})).QUERY_EMPTY="The query is empty",l.QUERY_SAME="The query is the same as replacement",l.NO_MATCHES="No matches were found to replace",l.RG_EMPTY="Ripgrep didn't return a response",l.NOT_MOUNTED="Component wasn't mounted";var px=t(487),pw=t(40523),p_=t(5438),pC=t(32581),pk="SearchQueryControlsNav",pS="SearchQueryExcludeNav",pI="SearchQueryControlsColumnNav",pR=(0,et.F4)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),pE=Q.nC.min(360),pG=(0,ek.X)({self:[Q.l0.height("100%"),Q.l0.width("100%"),Q.l0.overflow("hidden"),Q.l0.px(4),Q.l0.container()],filesIncludeExcludeWrapper:[Q.l0.colWithGap(8),Q.l0.pt(8),Q.l0.mt(6),Q.l0.border({direction:"top",color:Q.TV.outlineDimmest}),(0,ee._)({},pE,[Q.l0.rowWithGap(6),Q.l0.align.start,Q.l0.mt(0),{border:"none"}])],inputWithLabel:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(1)],inputLabelText:[{userSelect:"none"},Q.l0.color.foregroundDimmest,Q.l0.truncate,{fontSize:Q.TV.fontSizeSmall}],inputLabel:[Q.l0.flex.shrink(1),Q.l0.m(0),{lineHeight:1}],input:[Q.l0.viewStyle,Q.l0.border(),{blockSize:Q.TV.space32,"::placeholder":{color:Q.TV.foregroundDimmest},"&:hover::placeholder":{color:Q.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:Q.TV.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[Q.l0.rowWithGap(2),Q.l0.align.center,(0,ee._)({order:2},pE,[{order:1," > *":Q.l0.height("100%")}])],closeWrapper:[Q.l0.rowWithGap(2),Q.l0.align.center,(0,ee._)({order:1},pE,{order:2," > *":Q.l0.height("100%")})],results:[Q.l0.position.relative,{flex:"1 1 auto"}],searchWrapper:[Q.l0.pb(4),Q.l0.rowWithGap(4),{flex:"0 1 auto"}],expandCollapseButton:[Q.l0.height(32)],searchInputAndOptionsWrapper:(0,ee._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},pE,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[Q.l0.ml(24),Q.l0.pl(4),Q.l0.pb(6)],replaceInputWrapper:[Q.l0.colWithGap(6),Q.l0.pt(8),Q.l0.border({direction:"top",color:Q.TV.outlineDimmest}),(0,ee._)({},pE,[Q.l0.rowWithGap(4),Q.l0.pt(0),Q.l0.align.center,{border:"none"}])],horizontalLine:[Q.l0.mt(2),Q.l0.mb(8),Q.l0.height(1),Q.l0.borderRadius(2),Q.l0.width("100%"),Q.l0.backgroundColor.backgroundHigher],loadingBar:[Q.l0.position.absolute,Q.l0.mt(2),Q.l0.height(1),Q.l0.borderRadius(2),Q.l0.width("100%"),Q.l0.backgroundColor.accentPrimaryDimmer,{animation:"".concat(pR," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function pP(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,c=e.isMatchingWholeWords,u=e.setIsMatchingWholeWords,s=e.isCollapsed,d=e.setIsCollapsed,p=e.executeSearch,f=e.searchInputRef,h=e.onCloseRequested,v=e.onMoveRequested,g=e.moveDestination;return(0,$.BX)(K.G,{css:pG.searchWrapper,children:[(0,$.tZ)(cF.hU,{onClick:function(){return d(function(e){return!e})},alt:s?"Show replacement options":"Hide replacement options",css:pG.expandCollapseButton,children:s?(0,$.tZ)(dP.Z,{}):(0,$.tZ)(nn.Z,{})}),(0,$.BX)(K.G,{css:pG.searchInputAndOptionsWrapper,children:[(0,$.tZ)(dM,{"data-nav":"".concat(pi," ").concat(pk),ref:f,autoSize:!0,placeholder:"Search",value:t,css:pG.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,dE.jh)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),p())}}),(0,$.BX)(K.G,{css:pG.optionsWrapper,children:[(0,$.tZ)(dF.Z,{alt:"case sensitive","data-nav":"".concat(pk," ").concat(pI),icon:(0,$.tZ)(dG.Z,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,$.tZ)(dF.Z,{alt:"regular expressions","data-nav":"".concat(pk," ").concat(pI),icon:(0,$.tZ)(dD.Z,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,$.tZ)(dF.Z,{alt:"whole words","data-nav":"".concat(pk," ").concat(pI),icon:(0,$.tZ)(dA.Z,{}),checked:c,onClick:function(){return u(function(e){return!e})}}),(0,$.tZ)(cF.hU,{onClick:v,alt:"Move to ".concat("pane"===g?"tab":"sidebar"),children:"pane"===g?(0,$.tZ)(cK.Z,{}):(0,$.tZ)(dT.Z,{})})]}),(0,$.tZ)(K.G,{css:pG.closeWrapper,children:h?(0,$.tZ)(cF.hU,{onClick:h,alt:"Close",children:(0,$.tZ)(uI.Z,{})}):null})]})]})}function pD(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,c=e.setIncludeGlob,u=e.excludeGlob,s=e.setExcludeGlob,d=e.replace,p=e.results;return(0,$.BX)(K.G,{css:pG.replacementWrapper,children:[(0,$.BX)(K.G,{css:pG.replaceInputWrapper,children:[(0,$.tZ)(dM,{"data-nav":"".concat(pi," ").concat(pk," ").concat(pS),autoSize:!0,placeholder:"Replacement",value:t,css:pG.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,$.tZ)(K.G,{css:pG.optionsWrapper,children:(0,$.tZ)(dz,{query:i,replacement:t,results:p,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(pk," ").concat(po," ").concat(pI)}})})]}),(0,$.BX)(K.G,{css:pG.filesIncludeExcludeWrapper,children:[(0,$.BX)(K.G,{css:pG.inputWithLabel,id:"filesToInclude",children:[(0,$.tZ)("label",{htmlFor:"filesToIncludeInput",css:pG.inputLabel,children:(0,$.tZ)(ew.xv,{css:pG.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,$.tZ)(dM,{id:"filesToIncludeInput","data-nav":"".concat(pi," ").concat(pk),autoSize:!0,value:l,css:pG.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){c(e),n({initialIncludeGlob:e})},onClear:function(){c(""),n({initialIncludeGlob:""})}})]}),(0,$.BX)(K.G,{css:pG.inputWithLabel,id:"filesToExclude",children:[(0,$.tZ)("label",{htmlFor:"filesToExcludeInput",css:pG.inputLabel,children:(0,$.tZ)(ew.xv,{css:pG.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,$.tZ)(dM,{id:"filesToExcludeInput","data-nav":"".concat(pk," ").concat(pS),autoSize:!0,value:u,css:pG.input,onChange:function(e){s(e),n({initialExcludeGlob:e})},onClear:function(){s(""),n({initialExcludeGlob:""})}})]})]})]})}function pT(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A,B,U,O,M,L,X,W,N=e.isActive,z=e.initialQuery,F=void 0===z?"":z,V=e.initialReplacement,H=void 0===V?"":V,Y=e.initialIncludeGlob,Q=void 0===Y?"":Y,ee=e.initialExcludeGlob,et=void 0===ee?"":ee,er=e.searchInputRef,ei=e.onDataChanged,eo=e.onFileLineClicked,ea=e.onOpenSearchPane,el=e.onCloseRequested,ec=e.onMove,eu=e.moveDestination,es=e.searchResultBackgroundColor,ed=(0,j._)((0,q.useState)(F),2),ep=ed[0],ef=ed[1],eh=(0,j._)((0,q.useState)(H),2),eg=eh[0],em=eh[1],ey=(0,j._)((0,q.useState)(!1),2),eb=ey[0],ex=ey[1],ew=(0,j._)((0,q.useState)(!1),2),e_=ew[0],eC=ew[1],ek=(0,j._)((0,q.useState)(!1),2),eS=ek[0],eI=ek[1],eG=(0,j._)((0,q.useState)(!0),2),eD=eG[0],eT=eG[1],eA=(0,j._)((0,q.useState)(et),2),eB=eA[0],eU=eA[1],eO=(0,j._)((0,q.useState)(Q),2),eM=eO[0],eL=eO[1],eX=py(eB),eW=py(eM),eN=(0,q.useRef)(null),ez=(t=(n={query:ep,isRegex:eb,isCaseSensitive:e_,isMatchingWholeWords:eS,excludeGlobs:eX,includeGlobs:eW}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,u=void 0===(c=n.excludeGlobs)?[]:c,d=(s=(0,ev.Z)()).container,p=s.dotReplit,f=(0,pw.n)(p),h=(0,J.P5)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),g=(v=(0,j._)((0,q.useState)([]),2))[0],m=v[1],b=(y=(0,j._)((0,q.useState)(null),2))[0],Z=y[1],w=(x=(0,j._)((0,q.useState)(t.length>0),2))[0],_=x[1],C=(0,tt.Z)(function(){return(0,en._)(u).concat((0,en._)(f||[]),(0,en._)(pC.hD))},[u,f]),k=d.getConnectionState(),S=(0,q.useMemo)(function(){return(0,p_.Z)({container:d,onError:function(e){return Z(e)},onUpdate:function(e){return m(e)},onLoadingStateChange:function(e){return _(e)},isStreaming:!0,trackLatency:h})},[]),(0,q.useEffect)(function(){k===px.em.CONNECTED&&S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:C})},[k,S,t,r,i,o,l,C,f]),{loading:w,error:b,data:g,search:function(){return S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:C})}}),eF=ez.loading,eV=ez.error,eH=ez.data,ej=ez.search;(0,dS.Z)(function(){""!==ep&&(0,eZ.j)(eZ.U3.SEARCH_PANE_USED,{action:"search",isRegex:eb,isCaseSensitive:e_,hasIncludes:eW.length>0,hasExcludes:eX.length>0})},[ep,eW,eX,eb,e_],1e3);var e$=(R=(I={replacement:eg,query:ep,isRegex:eb,isCaseSensitive:e_,isMatchingWholeWords:eS,excludeGlobs:eX,includeGlobs:eW,fileList:eV?void 0:eH}).query,E=I.replacement,G=I.fileList,P=(0,ut._)(I,["query","replacement","fileList"]),D=(0,ev.Z)().container,A=(T=(0,j._)((0,q.useState)(!1),2))[0],B=T[1],O=(U=(0,j._)((0,q.useState)(null),2))[0],M=U[1],X=(L=(0,j._)((0,q.useState)(!1),2))[0],W=L[1],{replace:(0,q.useCallback)((0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return W(!0),M(null),[4,function(e){return pZ.apply(this,arguments)}((0,eE._)({container:D,query:R,replacement:E,fileList:null==G?void 0:G.map(function(e){return e.path})},P))];case 1:return(e=n.sent()).success||M(e.errorMessage),W(!1),B(e.success),[2,e]}})}),[D,R,E,G,P]),loading:X,error:O,data:A}),eq=e$.loading,eY=e$.replace,eJ=(0,q.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ei||ei({initialQuery:ep,initialReplacement:eg,initialIncludeGlob:eM,initialExcludeGlob:eB},e)},[ei,ep,eg,eB,eM]),eK=(0,q.useCallback)(function(){ec({query:ep,replacement:eg,includeGlob:eM,excludeGlob:eB})},[ec,ep,eg,eM,eB]);(0,q.useLayoutEffect)(function(){ef(F),em(H),eL(Q),eU(et)},[F,H,Q,et]);var eQ=dR({selector:'[data-nav*="'.concat(pi,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(pi,'"]')),r=e.target.matches("[data-nav*=".concat(pr,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e0=dR({selector:'[data-nav*="'.concat(po,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(po,'"]')),r=e.target.matches("[data-nav*=".concat(pr,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e1=dR({selector:'[data-nav*="'.concat(pI,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(po,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(pI,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(po,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),e2=dR({selector:'[data-nav*="'.concat(pS,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(pS,'"]')),r=e.target.matches("[data-nav*=".concat(pi,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e4=dR({selector:'[data-nav*="'.concat(pk,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(pI,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),e5=(0,ur.l)(eQ,e0,e1,e2,e4),e3=(0,q.useCallback)(function(e){"Escape"===e.key&&(null==el||el())},[el]);return(0,$.BX)(K.G,{css:pG.self,innerRef:e5,onKeyDown:e3,children:[(0,$.tZ)(pP,{isActive:N,query:ep,setQuery:ef,updateData:eJ,isRegex:eb,isCaseSensitive:e_,isMatchingWholeWords:eS,setIsRegex:ex,setIsCaseSensitive:eC,setIsMatchingWholeWords:eI,isCollapsed:eD,setIsCollapsed:eT,executeSearch:ej,searchInputRef:er,onCloseRequested:el,onMoveRequested:eK,moveDestination:eu}),eD?null:(0,$.tZ)(pD,{replacement:eg,setReplacement:em,updateData:eJ,query:ep,replaceLoading:eq,search:ej,includeGlob:eM,setIncludeGlob:eL,excludeGlob:eB,setExcludeGlob:eU,replace:eY,results:eH}),(0,$.BX)(K.G,{css:pG.results,children:[eF?(0,$.tZ)(K.G,{css:pG.loadingBar},ep):null,0===ep.length&&0===eH.length?(0,$.tZ)(dB.Z,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,$.tZ)(pg,{isRegex:eb,query:ep,replacement:eg,include:eM,exclude:eB,results:eH,error:eV,paneRef:eN,onOpenSearchPane:ea,onFileLineClicked:eo,searchResultBackgroundColor:es})]})]})}var pA=(0,ek.X)({container:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.minWidth(iL)]});function pB(){var e=(0,q.useRef)(null),n=lh(),t=ld(),r=lx(),i=r.closeCodeSearch,o=r.codeSearchData,a=r.setCodeSearchBindings,l=(0,uZ.Z)(o);(0,q.useEffect)(function(){a({focusSearchInput:function(){setTimeout(function(){var n,t;null===(n=e.current)||void 0===n||n.select(),null===(t=e.current)||void 0===t||t.focus()},50)}})},[a,e]);var c=(0,q.useCallback)(function(e){n({path:e.path,line:e.lineNumber,col:e.columnNumber})},[n]),u=(0,q.useCallback)(function(){t({pane:{type:"searchReplace"}})},[t]),s=(0,q.useCallback)(function(e){t({pane:{type:"searchReplace",data:{initialQuery:e.query,initialReplacement:e.replacement,initialIncludeGlob:e.includeGlob,initialExcludeGlob:e.excludeGlob}}}),i()},[t,i]);return(0,$.tZ)(K.G,{css:pA.container,children:(0,$.tZ)(pT,(0,eG._)((0,eE._)({},l),{isActive:!0,searchInputRef:e,onFileLineClicked:c,onOpenSearchPane:u,onCloseRequested:i,onMove:s,moveDestination:"pane",searchResultBackgroundColor:nP.TV.backgroundRoot}))})}var pU=t(37862),pO=t(53731),pM=t(19349),pL=t(5297),pX=t(78156),pW=t(83576),pN=t(21285),pz=t(16372),pF=t(2972);function pV(){var e=(0,eB._)(["\n  query ReplEnvironmentDesktopSidebarContent {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return pV=function(){return e},e}var pH={},pj=(0,eU.Ps)(pV(),pF.$),p$=t(37493),pq=t(78660),pY=t(17546),pJ=t(76143);function pK(){var e=(0,eB._)(["\n  query workspaceMultiplayersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n      fullName\n    }\n  }\n"]);return pK=function(){return e},e}var pQ={},p0=(0,eU.Ps)(pK()),p1=t(2553),p2={type:"context",icon:(0,$.tZ)(lX.Z,{}),label:"",description:"Search"},p4=(0,et.iv)([Q.l0.top(0),Q.l0.left(0),Q.l0.width("100%"),Q.l0.zIndex(3),{"& > div:first-of-type > div:first-of-type":[Q.l0.pl(0),Q.l0.pr(0),Q.l0.pt(0)]},{'& [role="listbox"]':[Q.l0.pl(8),Q.l0.position.absolute,Q.l0.top(40),Q.l0.height("calc(100% - ".concat(40,"px)")),Q.l0.left(0),Q.l0.width("100%"),Q.l0.zIndex(3),Q.l0.backgroundColor.backgroundRoot]},{'& [role="option"] > div':[Q.l0.borderRadius(8)]}]);function p5(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b=(e=(0,ev.Z)().fs,n=(0,eg.AA)(),t=(0,lD.T)(),i=r=lh(),o=(0,eg.AA)(),a=(0,eg.lv)(),l=(0,q.useCallback)(function(){var e=a(),n=o().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recently opened",icon:(0,$.tZ)(l_.Z,{})},commands:function(e){var t=e.searchQuery;return(0,lR.w)({paths:n,searchQuery:t,run:function(e){i({path:e})}})}}},[o,a,i]),c=(0,pq.s6)(pY.Y.SidebarSearch),u=ld(),d=lz(s=(0,q.useCallback)(function(e){(0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"Sidebar Search",tool:e.pane.type}),u(e)},[u])),p=lW(s),f=lL(s),h=ey(lh()),v=(0,nj.aG)(),m=(0,j._)((g=(0,eE._)({},pQ,void 0),pJ.t(p0,g)),1)[0],y=(0,tt.Z)(function(){return{data:{type:"context",label:"Multiplayers",icon:(0,$.tZ)(nR.Z,{})},commands:(0,eR._)(function(){var e,n,t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:if(!v.length)return[2,[]];return[4,m({variables:{ids:v.map(function(e){return e.id}).slice(0,p1.I)}})];case 1:if(!(e=i.sent().data))return[2,[]];return n=v.reduce(function(e,n){return e[n.id]=n.color,e},{}),t=e.currentUser,r=e.usersByIds.filter(function(e){return e.id!==(null==t?void 0:t.id)}).map(function(e){return{match:lI.pl,data:{type:"action",label:e.username,icon:(0,$.tZ)(K.G,{style:{border:"2px solid",borderColor:n[e.id],borderRadius:"50%",width:20,height:20},children:(0,$.tZ)(e7.q,{size:16,src:e.image,username:e.username,fullName:e.fullName})}),run:function(){return h({username:e.username,id:e.id})}}}}),v.length>p1.I&&r.push({match:lI.pl,data:{type:"action",label:"+".concat(v.length-p1.I," more"),icon:(0,$.tZ)(nR.Z,{}),run:function(){}}}),[2,r]}})})}},[v,h,m]),(0,tt.Z)(function(){var i={data:{type:"context",label:tu.cE,icon:(0,$.tZ)(lk.Z,{})},commands:d},o=(0,lR.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return o.match=void 0,{data:p2,commands:function(){return[l(),o,i,y,p,f,{data:{type:"group",key:"extensions"},commands:(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(c.map((t=(0,eR._)(function(n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,p$.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}]}}},[e,d,l,t,r,n,y,p,f,c]));return(0,$.tZ)(K.G,{css:p4,children:(0,$.tZ)(n9.X,{command:b,openOnInput:!0,compact:!0})})}function p3(e){var n=e.sections,t=e.id,r=n.findIndex(function(e){return e.id===t});if(-1===r)throw Error("");var i=n[r],o=i.height;i.height=0;var a=n.slice(r),l=n.slice(0,r).reverse(),c=!0,u=!1,s=void 0;try{for(var d,p=(0,en._)(a).concat((0,en._)(l))[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;if(0!==f.height){f.height+=o;return}}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}}var p7=(0,q.createContext)(void 0);function p6(){var e=(0,q.useContext)(p7);if(!e)throw Error("Expected store in context");return e}function p8(e){var n=p6();return(0,r4.Dv)(e,{store:n})}var p9=function(e){var n=p6();return(0,r4.b9)(e,{store:n})};function fe(e){var n=(0,j._)((0,q.useState)(function(){return(0,tr.MT)()}),1)[0];return(0,$.tZ)(p7.Provider,{value:n,children:e.children})}var fn=(0,tr.cn)({}),ft=(0,tr.cn)(null,function(e,n,t){n(fn,function(e){return(0,tJ.Uy)(e,function(e){e[t.id]=t.preferredHeight})})}),fr=(0,t8.O4)("replEnvironmentDesktopSidebarSections",[]),fi=(0,tr.cn)(null,function(e,n,t){try{n(fr,t)}catch(e){sE.Tb(e)}}),fo=(0,tr.cn)(0);function fa(e,n){return e.map(function(e){return{id:e.id,height:e.percent/100*n}})}var fl=(0,tr.cn)(null,function(e,n,t){var r=t.height-36*t.sections.length;n(fo,t.height);var i=e(fr);if(i.length!==t.sections.length){n(fi,fa(t.sections,r));return}for(var o=[],a=i.map(function(e){return e.height}).reduce(function(e,n){return e+n},0),l=0;l<i.length;l++){if((null===(c=i[l])||void 0===c?void 0:c.id)!==(null===(u=t.sections[l])||void 0===u?void 0:u.id)){n(fi,fa(t.sections,r));return}var c,u,s=i[l];o.push((0,eG._)((0,eE._)({},s),{percent:0===a?0:s.height/a*100}))}n(fi,fa(o,r))}),fc=(0,t8.kv)(fr,function(e){return e.map(function(e){return e.id})},t7()),fu=(0,tr.cn)(null,function(e,n,t){n(fo,t),n(fi,function(e){return(0,tJ.Uy)(e,function(e){var n=e.reduce(function(e,n){return e+n.height},0),r=t-36*e.length-n,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(u.height>0){var s=0===n?0:u.height/n;u.height=Math.max(0,u.height+r*s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}),fs=(0,tr.cn)(null,function(e,n,t){var r=e(fr),i=e(fn)[t],o=r.find(function(e){return e.id===t});if(!o)throw Error("");if(0===o.height){n(fr,(0,tJ.Uy)(r,function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex(function(e){return e.id===r});if(-1===i)throw Error("Expected sectionIndex");var o=n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),a=e.totalHeight-o,l=n[i];if(a>0){l.height=a;return}var c=n.slice(i+1).find(function(e){return e.height>0})||n.slice(0,i).reverse().find(function(e){return e.height>0});if(c){if(void 0!==t&&t<c.height){l.height=t,c.height-=t;return}l.height=c.height,c.height=0}}({sections:n,id:t,totalHeight:e(fo),headerHeight:36,preferredHeight:i})}));return}n(ft,{id:o.id,preferredHeight:o.height}),n(fr,(0,tJ.Uy)(r,function(e){return p3({sections:e,id:t})}))});function fd(e){return p8((0,tt.Z)(function(){return(0,tr.cn)(function(n){var t;return(null===(t=n(fr).find(function(n){return n.id===e}))||void 0===t?void 0:t.height)===0})},[e]))}var fp=(0,tr.cn)(null),ff=(0,tr.cn)(null,function(e,n,t){var r=e(fr);if("start"===t.type){var i=r.find(function(e){return e.id===t.id});if(!i)throw Error("");n(fp,{id:t.id,heightStart:i.height,sectionStart:r});return}var o=e(fp);if(!o)throw Error("");if("update"===t.type){var a=e(fo);n(fr,(0,tJ.Uy)(o.sectionStart,function(e){var n=o.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),i=n.findIndex(function(e){return e.id===t});if(-1===i)throw Error("Expected sectionIndex");var o=r+n.slice(i).reduce(function(e,n){return e+n.height},0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),u=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var s=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var v=f.value;if(0!==v.height){if(v.height<u){u-=v.height,v.height=0;continue}v.height-=u;break}}}catch(e){d=!0,p=e}finally{try{s||null==h.return||h.return()}finally{if(d)throw p}}return}var g=n[i+1];if(e.height>=0){a.height=e.height,g&&(g.height+=u);return}var m=a.height;a.height=0;var y=-1*e.height,b=!0,Z=!1,x=void 0;try{for(var w,_=n.slice(0,i).reverse()[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var C=w.value;if(C.height>y){m+=y,C.height-=y;break}m+=C.height,y-=C.height,C.height=0}}catch(e){Z=!0,x=e}finally{try{b||null==_.return||_.return()}finally{if(Z)throw x}}g&&(g.height+=m)}({headerHeight:36,totalHeight:a,sections:e,id:o.id,height:n})}));return}n(fr,(0,tJ.Uy)(r,function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||p3({sections:e,id:a.id})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})),n(fp,null)}),fh=(0,tr.cn)(function(e){return!!e(fp)});function fv(e){var n=e.id;return p8((0,tt.Z)(function(){return(0,tr.cn)(function(e){var t;return(null===(t=e(fp))||void 0===t?void 0:t.id)===n})},[n]))}var fg=t(67790),fm=t(98817),fy=function(e){return(0,et.iv)({"body *":{cursor:"".concat(e," !important")}})},fb=(0,et.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),fZ={"n-resize":fy("n-resize"),"ne-resize":fy("ne-resize"),"nesw-resize":fy("nesw-resize"),"s-resize":fy("s-resize"),"se-resize":fy("se-resize"),"sw-resize":fy("sw-resize"),"e-resize":fy("e-resize"),"ew-resize":fy("ew-resize"),"row-resize":fy("row-resize"),"col-resize":fy("col-resize"),grabbing:fy("grabbing")};function fx(e){var n=e.cursor;return(0,$.tZ)(et.xB,{styles:[fb,fZ[n]]})}var fw=t(68307),f_=t(79527),fC=t(40919),fk=t(33162),fS=t(83619),fI={root:Q.l0.px(4),rowWrap:(0,et.iv)([Q.l0.borderRadius(8)]),row:(0,et.iv)([nq.gU.nofill,Q.l0.rowWithGap(8),Q.l0.p(4),Q.l0.minHeight(32),Q.l0.align.center,{transition:"initial"}]),icon:(0,et.iv)([Q.l0.position.relative,{"& > svg":Q.l0.color.foregroundDimmer}]),textWrap:[Q.l0.colWithGap(2),Q.l0.flex.growAndShrink(1)],heading:[Q.l0.flex.growAndShrink(1),{opacity:.5}],text:[Q.l0.flex.growAndShrink(1)]};function fR(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,a=e.dragRef;return(0,$.tZ)(K.G,{css:fI.root,children:(0,$.tZ)(nI.Tg,{elevated:r,css:fI.rowWrap,"data-search-item-surface":!0,children:(0,$.BX)(nI.Tg,{innerRef:a,css:fI.row,children:[(0,$.tZ)(K.G,{css:fI.icon,children:t}),(0,$.BX)(K.G,{css:fI.textWrap,children:[o?(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",css:fI.heading,multiline:!1,children:o}):null,(0,$.tZ)(ew.xv,{multiline:!1,css:fI.text,color:(null==i?void 0:i.length)?"dimmest":"default",children:(null==i?void 0:i.length)?(0,$.tZ)(fk.xK,{style:{color:Q.TV.foregroundDimmest},matchStyle:{fontWeight:Q.TV.fontWeightBold,color:Q.TV.foregroundDefault},source:n,matches:i.map(function(e){return{column:e.from,length:e.to-e.from}})}):n})]})]})})})}var fE={root:(0,et.iv)([Q.l0.position.absolute,Q.l0.borderRadius(8),Q.l0.minWidth(100),{"[data-search-item-surface]":Q.l0.shadow(2)}])};function fG(e){var n=e.pane,t=e.x,r=e.y,i=(0,rw.Se)(),o=i.Icon({pane:n,size:20}),a=i.getTitle(n);return(0,$.tZ)(K.G,{css:fE.root,style:{transform:"translate(".concat(t,"px, ").concat(r,"px)")},children:(0,$.tZ)(fR,{active:!0,icon:o,title:a})})}function fP(){var e=(0,fC.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getSourceClientOffset();return t?(0,$.BX)($.HY,{children:[(0,$.tZ)(fx,{cursor:"grabbing"}),(0,$.tZ)(fG,{pane:n.pane,x:t.x,y:t.y})]}):null}var fD=(0,et.iv)({position:"fixed",pointerEvents:"none",zIndex:oF.M.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"});function fT(){var e=(0,f_.f)(function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}}),n=e.isDragging,t=e.itemType===fw.z.NewPane;return n&&t?(0,$.tZ)("div",{css:fD,children:(0,$.tZ)(fP,{})}):null}var fA=(0,q.createContext)({toolTourMap:{}}),fB=function(e){return(0,q.useContext)(fA).toolTourMap[e.type]},fU=function(e){var n=e.children;return(0,$.tZ)(fA.Provider,{value:{toolTourMap:{}},children:n})},fO=t(82098),fM=t(61663),fL=(0,et.iv)([Q.l0.fontSize(13)]);function fX(e){var n=e.name,t=(0,ut._)(e,["name"]),r=(0,te.gf)(n.id),i=(0,ex.NJ)();if(!r)return null;var o=(0,te.Ih)(r,i);return""===o.trim()?null:(0,$.tZ)(uS.D,(0,eG._)((0,eE._)({},t),{text:(0,$.tZ)(ew.xv,{css:fL,color:"dimmest",children:o})}))}var fW={searchReplace:cA.searchFileContents,shell:cA.showShell,runnerOutput:cA.showConsole,docs:cA.showDocs,ghostwriterChat:cA.showReplitAi,preferences:cA.showSettings,git:cA.showGit},fN=t(41895),fz={38:20,32:16,20:14},fF=(0,oz.$)(["background"]),fV=fF.cssVars,fH=fF.styleTokens,fj=(0,ek.X)({toolListItemTextWrapper:[Q.l0.flex.growAndShrink(1),Q.l0.rowWithGap(4),Q.l0.align.center],aiUpsellPill:[{lineHeight:10},Q.l0.height(16)],toolListItemText:[{textAlign:"left",fontSize:13}],coloredToolRecentItem:[Q.l0.viewStyle,Q.l0.reset.button,Q.l0.colWithGap(4),Q.l0.cursor.pointer,Q.l0.center,{border:"none"," .icon":nq.gU.listItem,"&:hover":[Q.l0.color.foregroundDefault],"&:active .frame":{opacity:.5},"&:focus-visible .icon":[{boxShadow:"0 0 0 2px currentColor",outline:"2px solid transparent",outlineOffset:"4px"}]}],coloredToolListItem:[Q.l0.viewStyle,Q.l0.reset.button,nq.gU.listItem,Q.l0.borderRadius(4),Q.l0.rowWithGap(6),Q.l0.cursor.pointer,Q.l0.align.center,Q.l0.pl(1),Q.l0.pr(4),Q.l0.height(24),Q.l0.color.foregroundDimmer,Q.l0.hover(Q.l0.color.foregroundDefault),{"&:active .frame":{opacity:.5}}],recentItemTooltip:[Q.l0.fontSize(13),{lineHeight:1}],listItemTooltip:[Q.l0.fontSize(13),{lineHeight:1}],listItemPill:[Q.l0.height(18)],titlePillsContainer:[Q.l0.rowWithGap(4),Q.l0.align.center],loadingToolListItem:[Q.l0.borderRadius(4),Q.l0.height(24),cY.p.backgroundPulse(Q.TV.backgroundDefault,Q.TV.backgroundHigher)]});function f$(e){var n=e.children,t=e.className,r=e.pill;return(0,$.BX)(K.G,{css:fj.toolListItemTextWrapper,children:[(0,$.tZ)(ew.xv,{className:t,css:fj.toolListItemText,multiline:!1,children:n}),r]})}var fq=(0,ek.X)({root:[nq.gU.filled,Q.l0.position.relative,Q.l0.center,Q.l0.borderRadius(8),{"> svg":{filter:"drop-shadow(0 0 3px rgba(255, 255, 255, 0.5))"}},{background:fH.background,border:"none","& img":[Q.l0.borderRadius(8)]}],listView:[Q.l0.position.relative,Q.l0.center,Q.l0.borderRadius(4),{background:fH.background,border:"none","& img":[Q.l0.borderRadius(8)]}],hovered:{backgroundColor:nq.vb.interactiveBackgroundActive,"& > svg":Q.l0.color.foregroundDefault},active:[nq.gU.filled["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":active"],{"& > svg":Q.l0.color.foregroundDimmer}],focused:[{boxShadow:"0 0 0 2px "+Q.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px"}]});function fY(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor,l=void 0===a?Q.TV.backgroundDefault:a;return(0,$.BX)(K.G,{className:r,css:fq.listView,style:(0,ee._)({width:o,height:o},fV.background,l),children:[(0,q.cloneElement)(t,{size:fz[o]}),n?(0,$.tZ)(fN.B,{color:n}):null]})}function fJ(e){var n=e.pane,t=e.onClick,r=e.dragRef,i=e.buttonRef,o=e.onKeyDown,a=e.tabIndex,l=(0,rw.Se)(),c=l.Icon({pane:n,size:20}),u=l.getTitle(n),s=(0,nE.b2)({paneType:n.type}),d=fB(n),p=(0,dV.l)(null==d?void 0:d.buttonRef,i,r),f=(0,q.useCallback)(function(e){t(e),null==d||d.dismissTour()},[t,d]),h=void 0;return"ghostwriterChat"===n.type&&(h=Q.TV.blurpleDimmest),(0,$.tZ)(ed.u,{delay:"none",tooltip:(0,$.tZ)(ew.xv,{css:fj.recentItemTooltip,children:u}),children:(0,$.tZ)("button",{css:fj.coloredToolRecentItem,onClick:f,ref:p,onKeyDown:o,tabIndex:a,children:(0,$.tZ)(fY,{className:"icon",indicator:s,size:32,backgroundColor:h,children:c})})})}function fK(e){var n,t=e.pane,r=e.onClick,i=e.dragRef,o=e.buttonRef,a=e.onKeyDown,l=e.tabIndex,c=(0,rw.Se)(),u=c.Icon({pane:t,size:20}),s=c.getTitle(t),d=(0,nE.b2)({paneType:t.type}),p=fB(t),f=(0,dV.l)(null==p?void 0:p.buttonRef,o,i),h=(0,q.useCallback)(function(e){r(e),null==p||p.dismissTour()},[r,p]),v=fW[t.type],g=void 0,m="ghostwriterChat"===t.type;m&&(g=Q.TV.blurpleDimmest);var y=(0,rw.MX)(t),b=null===(n=c.getTitlePill)||void 0===n?void 0:n.call(c,t);return(0,$.tZ)(ed.u,{tooltip:(0,$.tZ)(f0,{description:y,pane:t,iconBackgroundColor:g}),placement:"right-start",isDisabled:!y,maxWidth:300,children:(0,$.BX)("button",{css:fj.coloredToolListItem,onClick:h,ref:f,onKeyDown:a,tabIndex:l,children:[(0,$.tZ)(fY,{indicator:d,size:20,backgroundColor:g,children:u}),(0,$.tZ)(f$,{className:"text",pill:m?(0,$.tZ)(fM.A,{}):null,children:s}),(0,$.BX)(K.G,{css:fj.titlePillsContainer,children:[v?(0,$.tZ)(fX,{css:fj.listItemPill,name:v}):null,null!=b?(0,$.tZ)(uS.D,(0,eE._)({css:fj.listItemPill},b)):null]})]})})}var fQ=(0,ek.X)({container:[Q.l0.colWithGap(4),Q.l0.width("100%"),Q.l0.p(2)],titleRow:[Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.spaceBetween],titleAndIcon:[Q.l0.rowWithGap(6),Q.l0.align.center],titlePill:[Q.l0.height("auto"),{lineHeight:"auto"}]});function f0(e){var n=e.description,t=e.pane,r=e.iconBackgroundColor,i=(0,rw.Se)(),o=i.getTitle(t),a=i.Icon({pane:t,size:20});return n?(0,$.BX)(K.G,{css:fQ.container,children:[(0,$.tZ)(K.G,{css:fQ.titleRow,children:(0,$.BX)(K.G,{css:fQ.titleAndIcon,children:[(0,$.tZ)(fY,{className:"icon",size:20,backgroundColor:r,children:a}),(0,$.tZ)(ew.xv,{children:o})]})}),(0,$.tZ)(ew.xv,{multiline:!0,children:n})]}):null}function f1(){return(0,$.tZ)(K.G,{css:fj.loadingToolListItem})}var f2=t(97676),f4=function(e){var n={action:"opened"};switch(sE.n_({category:"dock",message:"Opened ".concat(e)}),(0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"Sidebar Dock",tool:e}),e){case"git":return(0,eZ.j)(eZ.U3.GIT_FEATURE_USED,{action:"pane-opened",source:"git-pane"});case"envEditor":return(0,eZ.j)(eZ.U3.ENV_EDITOR_USED,n);case"database":return(0,eZ.j)(eZ.U3.DATABASE_USED,{action:"opened",type:"ReplitKV",provider:"replit"});case"neon":return(0,eZ.j)(eZ.U3.DATABASE_USED,{action:"opened",type:"PostgreSQL",provider:"neon"});case"replAuth":return(0,eZ.j)(eZ.U3.AUTH_SIDEBAR_USED,n);case"unitTests":return(0,eZ.j)(eZ.U3.REPL_UNIT_TEST_USED,n);case"debugger":return(0,eZ.j)(eZ.U3.DEBUGGER_USED,n);case"extensionStore":return(0,eZ.j)(eZ.U3.EXTENSION_STORE_VIEWED,{source:"tools-sidebar"})}};function f5(e){var n=e.pane,t=e.variant,r=ld(),i=oB(lp),o=(0,j._)((0,f2.c)({type:fw.z.NewPane,item:function(){return{type:fw.z.NewPane,pane:n,grid:!0}},end:function(){i()}}),3),a=o[1],l=o[2],c=(0,q.useRef)(null),u=(0,j._)((0,fm.XZ)(c,!1),4),s=u[0],d=u[1],p=u[2],f=u[3];return((0,fm.Ym)(d,c),(0,fS.K)(l),"recent"===(void 0===t?"default":t))?(0,$.tZ)(fJ,{pane:n,dragRef:a,buttonRef:c,tabIndex:s,onKeyDown:p,onClick:function(){f(),r({pane:n}),f4(n.type)}}):(0,$.tZ)(fK,{pane:n,dragRef:a,buttonRef:c,tabIndex:s,onKeyDown:p,onClick:function(){f(),r({pane:n}),f4(n.type)}})}var f3=t(39031),f7=(0,ek.X)({sectionTitle:[Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.justify.start],sectionTitleText:[Q.l0.fontWeight.medium,Q.l0.fontSize(10),Q.l0.pl(8),{lineHeight:1}]});function f6(e){var n=e.title,t=e.description;return(0,$.BX)(K.G,{role:"heading","aria-level":3,css:f7.sectionTitle,children:[(0,$.tZ)(ew.xv,{css:f7.sectionTitleText,color:"dimmest",children:n}),t?(0,$.tZ)(ed.u,{tooltip:t,placement:"right",children:(0,$.tZ)(f3.Z,{size:12,color:Q.TV.foregroundDimmest})}):null]})}var f8=(0,ek.X)({container:[Q.l0.rowWithGap(4),Q.l0.align.center],inlineButton:[Q.l0.height(Q.TV.space24),Q.l0.p(4)]});function f9(){var e=ld();return(0,$.BX)(K.G,{css:f8.container,children:[(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",children:"None installed."}),(0,$.tZ)(e6.zx,{size:"small",variant:"nofill",css:f8.inlineButton,onClick:function(){e({pane:{type:"extensionStore",data:{page:"store"}},commit:!0}),(0,eZ.j)(eZ.U3.EXTENSION_STORE_VIEWED,{source:"tools-sidebar"})},text:"Visit the store",iconRight:(0,$.tZ)(cx.Z,{})})]})}var he=[rw.hc.CloudServices,rw.hc.WorkspaceFeatures,rw.hc.Collaboration,rw.hc.Other,rw.hc.WorkspaceExtensions],hn=(E={},(0,ee._)(E,rw.hc.CloudServices,"Replit-native and third-party services which your Repl can interact with"),(0,ee._)(E,rw.hc.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,ee._)(E,rw.hc.Collaboration,"Communication tools for working with collaborators"),(0,ee._)(E,rw.hc.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),E),ht=(0,ek.X)({categorySection:[Q.l0.colWithGap(6)],sectionContent:[Q.l0.pl(8)],sectionContentLoading:[Q.l0.pl(8),Q.l0.colWithGap(4)]});function hr(){var e,n=(0,lA.BV)(),t=(e=(0,rw.Se)(),(0,q.useMemo)(function(){return function(e,n){var t=(a={},(0,ee._)(a,rw.hc.CloudServices,[]),(0,ee._)(a,rw.hc.Collaboration,[]),(0,ee._)(a,rw.hc.WorkspaceFeatures,[]),(0,ee._)(a,rw.hc.WorkspaceExtensions,[]),(0,ee._)(a,rw.hc.Other,[]),a),r=!0,i=!1,o=void 0;try{for(var a,l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,s=n.getCategory(u);["extensionStore","extensionDevtools","integrations"].includes(u.type)?t[s].unshift(u):t[s].push(u)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(n,e)},[n,e]));return 0===n.length?(0,$.tZ)(ho,{}):(0,$.tZ)($.HY,{children:he.map(function(e){return(0,$.BX)(K.G,{css:ht.categorySection,children:[(0,$.tZ)(f6,{title:e,description:hn[e]}),(0,$.tZ)(hi,{categoryName:e,panes:t[e]})]},e)})})}function hi(e){var n=e.categoryName,t=e.panes,r=(0,fO.Yn)();if(n===rw.hc.WorkspaceExtensions){if(!r)return(0,$.BX)(K.G,{css:ht.sectionContentLoading,children:[(0,$.tZ)(f1,{}),(0,$.tZ)(f1,{})]});if(1===t.length)return(0,$.tZ)(K.G,{css:ht.sectionContent,children:(0,$.tZ)(f9,{})})}return(0,$.tZ)(K.G,{role:"toolbar",css:ht.sectionContent,"aria-label":"".concat(n," Tools"),"aria-orientation":"vertical",children:t.map(function(e){return(0,$.tZ)(f5,{pane:e},"extension"===e.type?e.data.installationId:e.type)})})}function ho(){return(0,$.BX)(K.G,{css:ht.categorySection,children:[(0,$.tZ)(f6,{title:"Loading tools…"}),(0,$.BX)(K.G,{css:ht.sectionContentLoading,children:[(0,$.tZ)(f1,{}),(0,$.tZ)(f1,{}),(0,$.tZ)(f1,{}),(0,$.tZ)(f1,{})]})]})}(c=G||(G={})).Files="files",c.Dock="dock";var ha=(0,ek.X)({recentRow:[Q.l0.rowWithGap(6),Q.l0.overflowX("auto"),Q.l0.px(8),Q.l0.pt(4),{backgroundColor:"transparent"}],fadeLeft:[Q.l0.position.absolute,Q.l0.height(32),Q.l0.width(8),Q.l0.left(0),{background:"linear-gradient(to right, ".concat(Q.TV.backgroundRoot,", transparent)")}],fadeRight:[Q.l0.position.absolute,Q.l0.height(32),Q.l0.width(16),Q.l0.right(0),{background:"linear-gradient(to left, ".concat(Q.TV.backgroundRoot,", transparent)")}],emptyRecentTool:[Q.l0.width(32),Q.l0.height(32),Q.l0.border({color:Q.TV.outlineDimmest,style:"dashed"}),Q.l0.borderRadius(4)],noRecentToolsFade:[Q.l0.position.absolute,Q.l0.height(32),Q.l0.width(16),Q.l0.right(0),{background:"linear-gradient(to left, ".concat(Q.TV.backgroundRoot,", transparent)")}]});function hl(){var e,n,t,r=(e=(0,lA.BV)(),n=(0,lA.Li)(),t=(0,uZ.Z)(n),(0,q.useMemo)(function(){return t.filter(function(n){return e.some(function(e){return e.type===n.type})})},[t,e]));return(0,$.tZ)(nI.Tg,{elevated:!0,css:ha.recentRow,"aria-orientation":"horizontal",style:{overflowX:0===r.length?"hidden":void 0},children:r.length>0?(0,$.BX)($.HY,{children:[(0,$.tZ)(fm.uP,{options:{direction:"horizontal",loopAround:!0},children:r.map(function(e){return(0,$.tZ)(f5,{pane:e,variant:"recent"},"extension"===e.type?e.data.installationId:e.type)})}),(0,$.tZ)(K.G,{css:ha.fadeLeft}),(0,$.tZ)(K.G,{css:ha.fadeRight})]}):(0,$.BX)($.HY,{children:[Array.from({length:lA.Nd},function(e,n){return(0,$.tZ)(K.G,{css:ha.emptyRecentTool},n)}),(0,$.tZ)(K.G,{css:ha.noRecentToolsFade})]})})}var hc=(0,ek.X)({sectionsContainer:[Q.l0.colWithGap(12)],recentSection:[Q.l0.position.relative,Q.l0.colWithGap(4)],allSection:[Q.l0.colWithGap(6)]}),hu={title:"Tools",content:(0,$.tZ)(function(){var e=fd(G.Dock),n=(0,lA.BV)(),t=n.length,r=p9(ft);return(0,q.useEffect)(function(){r({id:G.Dock,preferredHeight:Math.min(300,40*t)})},[t,r]),(0,$.tZ)(fU,{panes:n,isCollapsed:e,children:(0,$.BX)(K.G,{css:hc.sectionsContainer,children:[(0,$.tZ)(fT,{}),(0,$.BX)(K.G,{css:hc.recentSection,children:[(0,$.tZ)(f6,{title:"Recent"}),(0,$.tZ)(hl,{})]}),(0,$.tZ)(fm.uP,{options:{direction:"vertical",loopAround:!0},children:(0,$.tZ)(hr,{})})]})})},{})},hs=t(26978),hd=t(78371),hp=t(99704),hf=t(8629),hh=t(84232),hv=t(81321),hg=t(3960),hm=t(13490),hy=t(72106),hb=t(1252),hZ=t(70657),hx=t(86201),hw=t(78121),h_=t(61010),hC=t(77402),hk=t(98514),hS=t(99319),hI=t(77244),hR=t(66554),hE=t(80075);function hG(e){return{match:lI.pl,data:{type:"action",label:"Rename",icon:(0,$.tZ)(uP.Z,{}),run:e}}}function hP(e){return[{label:"Copy file path",icon:(0,$.tZ)(hx.Z,{}),run:function(){return(0,cD.Z)(e)}},{label:"Copy link",icon:(0,$.tZ)(hC.Z,{}),run:function(){return(0,cD.Z)((0,hI.dr)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:lI.pl,data:{type:"action",label:n,icon:t,run:r}}})}function hD(e){return{match:lI.pl,data:{type:"action",icon:(0,$.tZ)(sK.Z,{color:Q.TV.redDefault}),label:"Delete",run:e}}}function hT(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,$.tZ)(n$.Z,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var hA=/[*]{2}\/[*]\.([a-z0-9.]+)/,hB=t(60873),hU=t(47874),hO=t(35680),hM=t(79718),hL=t(31940),hX=t(83191),hW=t(36670),hN=t(86433);function hz(e){var n=e.filetree,t=(0,eb.Z)(),r=(0,nE.OM)(),i=(0,nE.t9)(),o=(0,q.useRef)(null),a=(0,q.useRef)(null),l=oB(ol),c=(0,hB.Z)(),u=(0,q.useCallback)(function(){var e=[{icon:(0,$.tZ)(hO.Z,{}),label:hX.st.UploadFile.text,run:function(){o.current&&(o.current.click(),(0,hR.Z)({replId:t,action:"uploaded",fileType:op.Tv.File}))}}];return c&&e.push({icon:(0,$.tZ)(hM.Z,{}),label:hX.st.UploadFolder.text,run:function(){a.current&&(a.current.click(),(0,hR.Z)({replId:t,action:"uploaded",fileType:op.Tv.Directory}))}}),e.push({icon:(0,$.tZ)(a5.Z,{}),label:hX.st.OpenPane.text,run:function(){l({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{icon:(0,$.tZ)(hU.Z,{}),label:hX.st.DownloadZip.text,run:function(){return(0,hN.R)(t)}},{icon:i?(0,$.tZ)(h_.Z,{}):(0,$.tZ)(eu.Z,{}),label:i?hX.st.HideHiddenFiles.text:hX.st.ShowHiddenFiles.text,run:function(){r(!i)}}),n.getExpandedDirs()&&e.push({icon:(0,$.tZ)(pu.Z,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,en._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(lX.Z,{})},commands:function(){return e.map(function(e){return{match:lI.pl,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[i,r,t,c,l,n]),s=(0,hd.av)().openContextMenu,d=(0,q.useRef)(null);return(0,$.BX)($.HY,{children:[(0,$.tZ)(cF.hU,{alt:"menu",tooltipBehavior:"hidden",ref:d,onClick:function(){return d.current&&s({target:d.current,command:u()})},children:(0,$.tZ)(hL.Z,{})}),(0,$.tZ)(hW.Q,{fileUploadInputRef:o,dirUploadInputRef:a,uploadFiles:n.upload})]})}var hF=q.createContext(null),hV=hF.Provider,hH=(0,ek.X)({root:Q.l0.coverContainer,inner:[Q.l0.coverContainer,Q.l0.pl(8)],loader:[Q.l0.justify.start,Q.l0.position.absolute,{top:2,left:16,overflow:"hidden"}]}),hj=(0,ek.X)({root:[Q.l0.rowWithGap(4),Q.l0.align.center],text:[Q.l0.fontWeight.medium,{fontSize:13}]}),h$=(0,ek.X)({root:[Q.l0.rowWithGap(4),Q.l0.pr(2)]}),hq={files:{title:(0,$.tZ)(function(){return(0,$.BX)(K.G,{css:hj.root,children:[(0,$.tZ)(ew.xv,{css:hj.text,children:"Files"}),(0,$.tZ)(hh.m,{})]})},{}),controls:(0,$.tZ)(function(){var e=(0,q.useContext)(hF),n=(0,j._)((0,q.useState)(!1),2),t=n[0],r=n[1],i=fd(G.Files),o=p9(fs);if(!e)throw Error("Expected filetree");return(0,q.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,$.BX)(K.G,{css:h$.root,style:{opacity:t?1:0},children:[(0,$.tZ)(cF.hU,{dataCy:"filetree-add-file",alt:"New file",tooltipPlacement:"top",onClick:function(){i&&o(G.Files),e.create(op.Tv.File)},children:(0,$.tZ)(pd.Z,{})}),(0,$.tZ)(cF.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){i&&o(G.Files),e.create(op.Tv.Directory)},children:(0,$.tZ)(hs.Z,{})}),(0,$.tZ)(hz,{filetree:e})]})},{}),content:(0,$.tZ)(function(){var e=(0,q.useContext)(hF),n=(0,j._)((0,q.useState)(!!(null==e?void 0:e.hasLocalCache)),2),t=n[0],r=n[1];if(!e)throw Error("Expected filetree");return(0,q.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,$.BX)(K.G,{"data-cy":"sidebar-filetree-section",css:hH.root,children:[t?null:(0,$.tZ)(K.G,{css:hH.loader,style:{opacity:t?0:1},children:(0,$.tZ)(hf.Z,{path:hy.Ql})}),(0,$.tZ)(K.G,{css:hH.inner,style:{opacity:t?1:0},children:(0,$.tZ)(hp.s,{store:e.store})})]})},{})},dock:hu},hY={root:(0,et.iv)([Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.height(36),{userSelect:"none"}]),header:(0,et.iv)([Q.l0.reset.button,Q.l0.height("100%"),Q.l0.focusRing,Q.l0.borderRadius(4),Q.l0.ml(8),Q.l0.flex.growAndShrink(1),Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.cursor.pointer,Q.l0.position.relative]),title:(0,et.iv)([Q.l0.fontWeight.medium,{fontSize:13}]),border:(0,et.iv)([Q.l0.position.absolute,Q.l0.top(0),Q.l0.right(0),Q.l0.width("calc(100% - ".concat(Q.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:Q.TV.outlineDimmest}]),content:(0,et.iv)([Q.l0.flex.growAndShrink(1),Q.l0.overflowY("auto"),Q.l0.scrollbar.hidden])},hJ=(0,q.memo)(function(e){var n=fd(e.id),t=p9(fs),r=hq[e.id],i=r.title,o=r.controls;return(0,$.BX)(K.G,{css:hY.root,children:[(0,$.BX)(K.G,{id:"sidebar-section-header-".concat(e.id),tag:"button",onClick:function(){(0,eZ.j)(eZ.U3.WS_SIDEBAR_SECTION_TOGGLED,{section:e.id,action:n?"open":"close"}),t(e.id)},css:hY.header,"aria-expanded":!n,"aria-controls":"sidebar-section-content-".concat(e.id),dataCy:"sidebar-section-content-".concat(e.id),children:[(0,$.tZ)(dP.Z,{rotate:n?0:90,color:Q.TV.foregroundDimmer}),"string"==typeof i?(0,$.tZ)(ew.xv,{css:hY.title,multiline:!1,children:i}):q.cloneElement(i,{collapsed:n})]}),o||null]})}),hK=(0,q.memo)(function(e){var n=hq[e.id].content,t=fd(e.id);return(0,$.tZ)(K.G,{id:"sidebar-section-content-".concat(e.id),inert:t?"true":void 0,css:[hY.content,"files"===e.id?Q.l0.position.relative:{}],children:(0,$.tZ)(K.G,{css:Q.l0.pb(8),children:n})})}),hQ={root:(0,et.iv)([Q.l0.position.relative,Q.l0.height(0),Q.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,et.iv)([Q.l0.position.relative,Q.l0.height(8),Q.l0.top(-4)])},h0=(0,q.memo)(function(e){var n=p9(ff),t=fv({id:e.id});return(0,$.tZ)(K.G,{css:hQ.root,onPointerDown:function(t){dg(t,{start:function(){n({type:"start",id:e.id})},move:function(e){n({type:"update",delta:e.delta.y})},end:function(e){n({type:"end",delta:e.delta.y})}})},children:(0,$.tZ)(K.G,{style:t?{transform:"scaleY(100)"}:void 0,css:hQ.hoverArea})})});function h1(e){var n,t,r,i=(0,q.useRef)(null),o=(0,dm.T)(),a=fv({id:e.id}),l=p8(fh),c=(n=e.id,t=p6(),r=(0,tt.Z)(function(){return(0,tr.cn)(function(e){var t;return 36+((null===(t=e(fr).find(function(e){return e.id===n}))||void 0===t?void 0:t.height)||0)})},[n]),(0,t0.b)(r,t));return(0,q.useEffect)(function(){return(0,fg.A)(i,"height",c.current+"px"),c.subscribe(function(e){(0,fg.A)(i,"height",e+"px")})},[c]),(0,$.BX)(K.G,{innerRef:i,style:{zIndex:a?2:void 0,position:"relative",transition:o||l?void 0:"height 120ms ease-out"},children:[e.border?(0,$.tZ)(K.G,{css:hY.border}):null,(0,$.tZ)(hJ,{id:e.id}),(0,$.tZ)(hK,{id:e.id}),e.resizable?(0,$.tZ)(h0,{id:e.id}):null]})}var h2=t(56091),h4=(0,ek.X)({root:[Q.l0.pl(8),Q.l0.pt(4),Q.l0.rowWithGap(2),Q.l0.align.center],cta:[Q.l0.flex.growAndShrink(1)]});function h5(){var e,n,t=(e=(0,eE._)({},pH,void 0),eL.a(pj,e)),r=t.data,i=t.loading,o=(0,pM.o)("ghostwriter-repl-resources-cta"),a=o.isLoading,l=o.isDone,c=o.setAsDone,u=(0,h2.Cq)(),s=u===r3.x0||void 0===u;if(i||a||!(null==r?void 0:r.currentUser))return null;var d=(0,pX.d)({user:r.currentUser}),p=d.plan,f=d.showUpgradeCta;if(!s||!f)return null;if(p.name!==dt.we)return l?null:(0,$.BX)(K.G,{css:h4.root,children:[(0,$.tZ)(K.G,{dataCy:"workspace-sidebar-upgrade-cta",css:h4.cta,children:(0,$.tZ)(pL.Z,{style:{borderRadius:4},context:"workspace_sidebar",stretch:!0})}),(0,$.tZ)(cF.hU,{onClick:function(){return c()},tooltipBehavior:"hidden",alt:"Hide",children:(0,$.tZ)(uI.Z,{})})]});var h=(null===(n=p.trial)||void 0===n?void 0:n.cancelsAt)?"Trial ends ".concat((0,pO.V)(p.trial.cancelsAt)):void 0;return(0,$.tZ)(K.G,{css:h4.root,children:(0,$.tZ)(K.G,{css:h4.cta,children:(0,$.tZ)(pL.Z,{style:{borderRadius:4},colorway:"blurple",context:"workspace_sidebar",text:h})})})}var h3=(0,et.F4)({from:{opacity:0},to:{opacity:1}}),h7={container:(0,et.iv)([Q.l0.position.absolute,Q.l0.colWithGap(4),Q.l0.top(0),Q.l0.left(0),Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.minWidth(iL),{animation:"".concat(h3," 0.2s ease-in-out")}]),header:(0,et.iv)([Q.l0.pl(8),{zIndex:3}]),content:(0,et.iv)([Q.l0.flex.growAndShrink(1)]),footer:(0,et.iv)([Q.l0.colWithGap(8),Q.l0.pb(8)],{zIndex:2}),help:(0,et.iv)([Q.l0.flex.growAndShrink(1),Q.l0.justify.center,{button:Q.l0.borderRadius(4)}]),newTabWrapper:[Q.l0.pl(8),Q.l0.pt(4),Q.l0.flex.growAndShrink(1)],newTabButton:[Q.l0.border({color:Q.TV.outlineDimmest,width:1})]};function h6(){return(0,$.tZ)(K.G,{css:h7.footer,children:(0,$.tZ)(h5,{})})}var h8=(0,q.memo)(function(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A,B,U,O,M,L,X=(e=(0,eb.Z)(),t=(n=(0,j._)((0,q.useState)(null),2))[0],r=n[1],i=lh(),o=(0,hg.L)(),a=(0,lD.T)(!0),l=(0,q.useCallback)(function(e){return!a(e.filename)},[a]),c=(0,ev.Z)().fs,u=(0,tQ.Gn)("multiselectModifierKey").preferences,s=oB(rN),d="cmdOrCtrlKey"===u.multiselectModifierKey?"cmdOrCtrlKey":"altKey",p=(0,eg.AA)(),f=(0,q.useCallback)(function(e){return(0,hm.mn)(e,p)},[p]),h=(0,J.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),v=(0,hd.av)().onContextMenu,g=(0,eb.Z)(),m=(0,ev.Z)().fs,y=lh(),b=oB(ol),Z=oT(rB),x=(0,pq.s6)(pY.Y.FiletreeContextMenu),w=oT(oO),_=oB(oL),C=(0,J.P5)({controlName:"flag-open-with-default",type:"boolean",default:!1}),k=oB(oM),S=(0,q.useCallback)(function(e){if(C){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=w[t];i&&i.extensionId===n&&i.fileHandlerId===r||k(e)}},[k,C,w]),I=(0,J.P5)({controlName:"flag-draft-buffers"}),R=(0,q.useCallback)(function(e,n){var t,r=e.path,i=[{data:{type:"group",key:"rename"},commands:function(){return[hG(function(){return n.rename(r)})]}}];(0,ag.Mb)(r)&&I&&i.push({data:{type:"group",key:"saveFile"},commands:function(){var e;return[(e=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,m.flush(new Set([r]),op.WL.MANUAL_SAVE)];case 1:return e.sent(),[2]}})}),{match:lI.pl,data:{type:"action",label:"Save file",icon:(0,$.tZ)(hw.Z,{}),run:e}})]}}),i.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:op.Tv.File,path:n}],o=!0,a=!1,l=void 0;try{for(var c,u=t()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=(0,j._)(c.value,2),d=s[0],p=s[1];p!==op.Tv.Directory&&d!==n&&i.push({path:d,type:p})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var f=i.length,h=1===f?"Open":"Open ".concat(f," files");return[{label:h,icon:(0,$.tZ)(eu.Z,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:h+" in split",icon:(0,$.tZ)(a5.Z,{}),run:function(){var e=(0,tk._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:lI.pl,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:y})}});var o=function(e){var n=function(e){var n=r[e],i=(0,hZ.P)(n.glob);if(!i||!i.exec(t))return"continue";var l=hA.exec(n.glob),c=n.icon?n.icon:n.extension.manifest.icon,u=n.name?n.name:n.extension.manifest.name,d=c?(0,hE.Vh)(n.extension.baseUrl,c):null;s.push({match:lI.pl,data:{type:"action",icon:d?(0,$.tZ)(hT,{size:16,name:u,iconUrl:d}):(0,$.tZ)(eu.Z,{}),label:"Open with "+u,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,c=(0,am.mD)(t),u=c?i[c]:null,s=[];for(var d in r)n(d);return u&&c&&s.length&&s.push({match:lI.pl,data:{icon:(0,$.tZ)(sK.Z,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:c,newAssociation:null})}}}),s}({path:r,handlers:Z,filetypeAssociations:w,requestAssociateFiletype:S,associateFiletype:_,openFile:y});return o.length&&i.push({data:{type:"group",key:"extensions"},commands:function(){return o}}),i.push({data:{type:"group",key:"copy"},commands:function(){return hP(r)}}),i.push((t=(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,hb.Z)(r,m)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,hR.Z)({replId:g,action:"duplicated",fileType:op.Tv.File}),n.rename(e),[2]}})}),{match:lI.pl,data:{type:"action",label:"Duplicate file",icon:(0,$.tZ)(cE.Z,{}),run:t}})),i.push((0,hS.H4)(r,m)),i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[hD(function(){return n.deleteNodes(e)})]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:op.Tv.File}}],[4,Promise.all(x.map((t=(0,eR._)(function(n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,p$.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[y,S,_,g,x,Z,w,m,I]),E=(0,nE.OM)(),G=(0,nE.t9)(),P=(0,q.useCallback)(function(e,n){var t,r=e.path,i=r===hy.Ql,o=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[hG(function(){return n.rename(e.path)})]}}];return o.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:lI.pl,data:{type:"action",icon:(0,$.tZ)(lX.Z,{}),label:"Search this directory",run:function(){b({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),o.push.apply(o,(0,en._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,$.tZ)(pd.Z,{}),run:function(){return t(op.Tv.File)}},{label:"Add folder",icon:(0,$.tZ)(hs.Z,{}),run:function(){return t(op.Tv.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:lI.pl,data:{type:"action",label:n,icon:t,run:r}}})))),o.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:lI.pl,data:{type:"action",label:"Open shell here",icon:(0,$.tZ)(hk.Z,{}),run:function(){b({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),i||o.push({data:{type:"group",key:"copy"},commands:function(){return hP(r)}}),n.getExpandedDirs()&&o.push({match:lI.pl,data:{icon:(0,$.tZ)(pu.Z,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,en._)(e))}}}),i||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[hD(function(){return n.deleteNodes(e)})]}}),i&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:lI.pl,data:{type:"action",label:(G?"Hide":"Show")+" hidden files",icon:G?(0,$.tZ)(h_.Z,{}):(0,$.tZ)(eu.Z,{}),run:function(){E(!G)}}}]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:op.Tv.Directory}}],[4,Promise.all(x.map((t=(0,eR._)(function(n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,p$.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[G,E,x,b]),D=(0,q.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(lX.Z,{})},commands:function(){return e.type===op.Tv.Directory?P(e,n):R(e,n)}}},[R,P]),T=(0,nE.xz)(),A=(0,hp.p)({fs:c,filter:l,fontSize:13,onFileDoubleClick:function(e,n){s(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===d?(0,dE.jh)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===op.Tv.File&&i({opener:{paneType:(0,rw.Dp)({path:e.path})},path:e.path})},multiselectModifierKey:d,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return v(e,{command:D(n,A)})},autocomplete:f,localCacheKey:h?e+":sidebar":void 0,onFileRenameStart:T,onFileRenameEnd:function(){return T(null)}}),B=(0,hv.C)(),(0,q.useEffect)(function(){return A.setFileStatus(B)},[A,B]),U=(0,eg.Y_)(),(0,q.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:if(null===e)return A.select(null),[2];return[4,A.select({path:e,type:op.Tv.File})];case 1:if(n.sent(),U.current!==e)return[2];return A.scrollToPath(e),[2]}})})).apply(this,arguments)}return e(U.current),U.subscribe(e)},[U,A]),O=lx(),M=(0,eg.rE)(),L=(0,eg.p9)(),(0,q.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return O.isOpen.current||O.toggle(),O.closeCodeSearch(),[4,A.select({path:e,type:op.Tv.File})];case 1:return n.sent(),A.scrollToPath(e),L(null),[2]}})})).apply(this,arguments)}return e(M.current),M.subscribe(e)},[M,L,A,O]),{filetree:A,activeModal:t,closeModal:function(){return r(null)}}),W=X.filetree,N=X.activeModal,z=X.closeModal,F=(0,nj.HQ)();return(0,q.useEffect)(function(){return W.setPresenceState(F.current),F.subscribe(W.setPresenceState)},[W,F]),(0,$.BX)(hV,{value:W,children:[(0,$.tZ)(h9,{}),(0,$.BX)(nk.u,{isOpen:!!N,onRequestClose:z,children:[(null==N?void 0:N.type)==="conflicts"?(0,$.tZ)(pW.Z,{paths:N.data.conflicts.map(function(e){return e.path}),onCancel:z,onConfirm:function(){var e=N.data;"move"===e.type?W.move({nodes:e.nodes,to:e.to,overwrite:!0}):W.upload({files:e.files,parentPath:e.to,overwrite:!0}),z()}}):null,(null==N?void 0:N.type)==="deleteNode"?(0,$.tZ)(sY.Z,(0,eG._)((0,eE._)({},(0,pz.B)(N.data.nodes)),{delete:function(){return N.data.confirm()},hideModal:z})):null]})]})}),h9=(0,q.memo)(function(){var e,n,t,r,i=p8(fc),o=(e=p9(fl),n=p9(fu),t=(0,q.useRef)(null),(0,q.useEffect)(function(){t.current&&e({height:t.current.getBoundingClientRect().height,sections:[{id:G.Files,percent:60},{id:G.Dock,percent:40}]})},[e]),r=(0,pU.Z)(function(e){e&&n(e.height)},{wait:100,type:"debounce"}),(0,ur.l)(r,t)),a=(0,cN.Do)(cO.Q.id,cO.y.Sidepane),l=(0,pN.Z)().isTutorial,c=i[i.length-1];return(0,$.BX)(K.G,{innerRef:l?null:a,css:h7.container,children:[(0,$.tZ)(K.G,{css:h7.header,children:(0,$.tZ)(p5,{})}),(0,$.tZ)(K.G,{css:h7.content,innerRef:o,children:i.map(function(e,n){return(0,$.tZ)(h1,{id:e,resizable:e!==c,border:0!==n},e)})}),(0,$.tZ)(h6,{})]})}),ve=t(67646),vn={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,tn.l2)({cmdOrCtrl:!0,shift:!0,key:"b"})},vt=(0,oz.$)(["width","sidebarVisibility","mainContentVisibility","codeSearchContentVisibility"]),vr=vt.cssVars,vi=vt.styleTokens,vo=(0,ek.X)({sidebar:[Q.l0.height("100%"),Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.flex.row,Q.l0.flex.growAndShrink(1),Q.l0.overflow("auto"),{width:vi.width,visibility:vi.sidebarVisibility}],mainContent:[{visibility:vi.mainContentVisibility}],codeSearchContent:[{visibility:vi.codeSearchContentVisibility}],aiChatContent:[Q.l0.width("100%"),Q.l0.pl(8),Q.l0.pr(4),Q.l0.pb(8),Q.l0.colWithGap(4)]});function va(){var e=lx(),n=(0,uZ.Z)(e.content),t=(0,j._)((0,q.useState)(null),2),r=t[0],i=t[1];(0,q.useEffect)(function(){return null==r?void 0:r.focus()},[r]);var o=(0,ev.Z)().secrets,a=ld(),l=(0,q.useCallback)(function(){a({pane:{type:"agentProgress"},commit:!0,activate:!0})},[a]);return n!==_.AI_CHAT?null:(0,$.BX)(K.G,{css:vo.aiChatContent,children:[(0,$.tZ)(ve.v,{inputRef:i,onViewPlan:l,addSecretEntries:o.addEntries}),(0,$.tZ)(dv.Z,{})]})}var vl=(0,q.memo)(function(){var e=(0,q.useRef)(null),n=(0,q.useRef)(null),t=(0,q.useRef)(null),r=lx();return(0,oN.j)(e,r.width,function(e){return(0,ee._)({},vr.width,e+"px")}),(0,oN.j)(e,r.isOpen,function(e){return(0,ee._)({},vr.sidebarVisibility,e?"visible":"hidden")}),(0,oN.j)(n,r.content,function(e){return(0,ee._)({},vr.mainContentVisibility,e===_.MAIN?"visible":"hidden")}),(0,oN.j)(t,r.content,function(e){return(0,ee._)({},vr.codeSearchContentVisibility,e===_.CODE_SEARCH?"visible":"hidden")}),(0,$.BX)($.HY,{children:[(0,$.BX)(K.G,{css:vo.sidebar,innerRef:e,children:[(0,$.tZ)(K.G,{css:vo.mainContent,innerRef:n,children:(0,$.tZ)(fe,{children:(0,$.tZ)(h8,{})})}),(0,$.tZ)(K.G,{css:vo.codeSearchContent,innerRef:t,children:(0,$.tZ)(pB,{})}),(0,$.tZ)(va,{})]}),(0,$.tZ)(dk,{})]})}),vc=t(27030),vu=t(56632),vs=t(44236),vd=t(33479);function vp(){var e=(0,eB._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return vp=function(){return e},e}var vf={},vh=(0,eU.Ps)(vp(),vs.a,vd.Y),vv=t(47136),vg=t(67129),vm=t(89253),vy=t(97463),vb=t(94668),vZ=t(44935),vx=(0,ek.X)({field:[Q.l0.display.grid,{gridTemplateAreas:'\n      "label label"\n      "input icon-right"\n      "description description"\n      ',gridTemplateColumns:"1fr 32px"}]}),vw=q.forwardRef(function(e,n){var t=e.dataCy,r=e.children,i=(0,ut._)(e,["dataCy","children"]),o=(0,eE._)({"data-cy":t,ref:n},i);return(0,$.tZ)(vg.U,(0,eG._)((0,eE._)({},o),{children:r}))});function v_(e){var n=e.label,t=e.description,r=e.errorMessage,i=e.isLoading,o=(0,ut._)(e,["label","description","errorMessage","isLoading"]),a=(0,j._)((0,q.useState)(!1),2),l=a[0],c=a[1],u=(0,q.useRef)(null);return(0,q.useEffect)(function(){var e=u.current;if(e){var n=function(){c(!0)};e.addEventListener("mouseenter",n);var t=function(){c(!1)};return e.addEventListener("mouseleave",t),function(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",t)}}},[u]),(0,$.tZ)(vw,(0,eG._)((0,eE._)({},o),{css:vx.field,children:function(e){var o=e.isEmpty;return(0,$.BX)($.HY,{children:[(0,$.tZ)(vm._,{style:{gridArea:"label"},children:n}),(0,$.tZ)(vZ.II,{"aria-busy":i,style:{gridArea:"input /input / icon-right / icon-right",paddingRight:32}}),(0,$.tZ)(nI.Tg,{elevated:!0,style:{gridArea:"icon-right",alignSelf:"center",justifySelf:"center"},innerRef:u,children:o?(0,$.tZ)($.HY,{children:i?(0,$.tZ)(no.Z,{}):(0,$.tZ)(lX.Z,{})}):(0,$.tZ)(cF.hU,{alt:"Clear field",children:l?(0,$.tZ)(uI.Z,{}):i?(0,$.tZ)(no.Z,{}):(0,$.tZ)(uI.Z,{})})}),t?(0,$.tZ)(vb.FE,{style:{gridArea:"description"},children:t}):null,(0,$.tZ)(vy.cp,{children:r})]})}}))}var vC=t(47483),vk=function(e){var n=e.children,t=(0,q.useRef)(null),r=(0,q.useRef)(null);return(0,q.useEffect)(function(){var e=function(e){var n,r,i=e.target;if(i&&"ArrowUp"===e.key){var o=t.current;o&&(null===(n=i.parentElement)||void 0===n?void 0:n.firstElementChild)===i&&(null===(r=o.querySelector("input"))||void 0===r||r.focus())}},n=r.current;if(n)return n.addEventListener("keydown",e,!1),function(){return n.removeEventListener("keydown",e,!1)}},[r,t]),(0,$.tZ)(vC.Bt.Provider,{value:{ref:r,"aria-label":"Search Results"},children:(0,$.tZ)(vg.V.Provider,{value:{ref:t,onKeyDown:function(e){if("ArrowDown"===e.key){var n;e.preventDefault(),null===(n=r.current)||void 0===n||n.focus()}}},children:n})})},vS=t(34820),vI=t(28065),vR=t(77876),vE=t(73781),vG=t(76733),vP=(0,ek.X)({self:[Q.l0.display.grid,Q.l0.p(4),{gap:4,alignItems:"stretch"}],list:[Q.l0.maxHeight(640)],listItem:[vv.oB.item,Q.l0.px(8),Q.l0.height(28),{span:Q.l0.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[Q.l0.height(28),Q.l0.px(6),Q.l0.transition.none],currentReplIcon:[Q.l0.color.foregroundDimmer],tourWrapper:[Q.l0.p(8)]});function vD(e){var n=e.label,t=e.icon,r=(0,ut._)(e,["label","icon"]);return(0,$.BX)(vv.Hx,(0,eG._)((0,eE._)({css:vP.listItem},r),{textValue:n,children:[(0,$.tZ)(vv.fH,{css:vP.listItemLabel,children:n}),(0,$.tZ)(vI.jS,{size:16,children:t})]}))}var vT=q.forwardRef(function(e,n){var t,r,i,o,a,l,c,u,s,d,p,f=(0,eb.Z)(),h=(0,j._)((0,q.useState)(""),2),v=h[0],g=h[1],m=(0,cN.e$)(vE.V.id,vE.o.Forks),y=(t=(0,eE._)({},vf,{variables:{id:f,input:{}},notifyOnNetworkStatusChange:!0}),eL.a(vh,t)),b=y.refetch,Z=(0,cT.Z)(),x=Z.showConfirm,w=Z.showError,_=(0,j._)((0,vR.F)({onFork:function(){x("Repl forked, redirecting...")},onError:function(){w("Error creating fork - please try again")}}),2),C=_[0],k=_[1].loading;(0,dS.Z)(function(){b({input:{filters:{title:{search:v}}},id:f})},[v],300);var S=(null===(r=y.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?y.data.repl.project:null,I=(null===(i=y.previousData)||void 0===i?void 0:i.repl.__typename)==="Repl"?null===(o=y.previousData.repl.project)||void 0===o?void 0:o.repls.items:null,R=null!==(s=null==S?void 0:S.mainRepl)&&void 0!==s?s:(null===(a=y.previousData)||void 0===a?void 0:a.repl.__typename)==="Repl"&&null!==(u=null===(l=y.previousData.repl.project)||void 0===l?void 0:l.mainRepl)&&void 0!==u?u:null,E=(null===(c=y.data)||void 0===c?void 0:c.repl.__typename)==="Repl"?y.data.repl:null,G=(0,vS.RC)({orgId:e.org.id,projectId:e.projectId}),P=(0,cN.$2)();return(0,$.BX)("div",{css:vP.self,ref:n,children:[(0,$.BX)(vk,{children:[(0,$.tZ)(v_,{"aria-label":"Search Repls in Project",placeholder:"Search by Repl title...",onChange:g,isLoading:y.loading,autoFocus:!0}),(0,$.tZ)(vv.wb,{isLoading:y.loading,items:null!==(p=null!==(d=null==S?void 0:S.repls.items)&&void 0!==d?d:I)&&void 0!==p?p:[],css:vP.list,children:function(e){var n;return(0,$.tZ)(vD,(0,eG._)((0,eE._)({icon:e.id===f?(0,$.tZ)(ed.u,{tooltip:"You are here",placement:"right",children:(0,$.tZ)(ne.Z,{css:vP.currentReplIcon})}):void 0,isDisabled:e.id===f,id:e.id,label:e.title},(0,eD.aq)(e)),{sessions:null!==(n=G[e.id])&&void 0!==n?n:[]}),e.id)}})]}),(0,$.tZ)(nv.R,{}),(0,$.BX)(K.G,{children:[(0,$.tZ)(e8.Z,(0,eG._)((0,eE._)({alignment:"start"},(0,ux.RF)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,$.tZ)(nt.Z,{}),text:"Project dashboard",variant:"nofill",css:vP.listButtonLink})),(0,$.BX)(e9.ZE,{elevated:!1,placement:"right top",trigger:(0,$.tZ)(e6.zx,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:k?(0,$.tZ)(no.Z,{}):(0,$.tZ)(lC.Z,{}),loading:k,css:vP.listButtonLink}),children:[E?(0,$.tZ)(e9.sN,{label:"From here (".concat(E.title,")"),isDisabled:k,onAction:function(){C({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:E})}}):null,E&&R&&E.id!==R.id?(0,$.tZ)(e9.sN,{label:"From main Repl (".concat(R.title,")"),isDisabled:!R||k,onAction:function(){R&&C({orgId:e.org.id,repl:R,forkSource:"projectHeaderMenu"})}}):null]}),m.isActive&&P?(0,$.tZ)("div",{css:vP.tourWrapper,children:(0,$.tZ)(vG.O,{content:P.content,title:P.title,onDismiss:m.next,onCurrentStepChange:m.goto,currentStepIndex:vE.V.steps.findIndex(function(e){return e.id===vE.o.Forks}),totalSteps:vE.V.steps.length})}):null]})]})}),vA=t(23802),vB=function(e){return(0,uS.E)({colorway:e,clickable:!0,iconLeft:!0,iconRight:!1,variant:"muted"})},vU=[(0,e6.uW)({size:12,variant:"nofill"}),Q.l0.px(4),Q.l0.height(24),Q.l0.borderRadius(),Q.l0.position.relative],vO=(0,ek.X)({default:[vB("grey")].concat((0,en._)(vU)),running:[vB("blurple")].concat((0,en._)(vU)),waiting:[vB("blurple")].concat((0,en._)(vU))});function vM(){var e=(0,J.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),n=(0,lU._V)().sessionId,t=(0,J.P5)({controlName:"flag-agent-mode-always-available",logFlagToAnalytics:!1}),r=(0,lU.Fv)(),i=(0,lU.$g)();return!(e&&(n||t))||i?null:(0,$.tZ)(e6.Yd,{"aria-label":"Enter Agent Mode",css:vO.default,onPress:r,children:(0,$.tZ)(vA.Z,{size:16})})}var vL=(0,ek.X)({root:[Q.l0.rowWithGap(8),Q.l0.align.center]});function vX(e){return(0,$.BX)(K.G,{css:vL.root,children:[(0,$.tZ)(ew.xv,{multiline:!1,variant:"small",children:e.text}),(0,$.tZ)(te.bM,{fontSize:10,keyCombo:e.shortcut})]})}var vW=(0,ek.X)({root:[Q.l0.height(32),Q.l0.width(32),Q.l0.center,Q.l0.borderRadius(),{"& > div":{opacity:.75,transition:"opacity 0.1s"},"&:hover > div":{opacity:1}}],iconContainer:[Q.l0.flex.row,Q.l0.align.center,{height:14,width:16,border:"1px solid ".concat(Q.TV.foregroundDefault),borderRadius:Q.TV.borderRadius2}],icon:[{height:"100%",borderRight:"1px solid ".concat(Q.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}]}),vN=(0,ek.X)({projectLinkTooltip:[Q.l0.maxWidth(400),Q.l0.flex.shrink(2)],projectLink:[Q.l0.px(6),Q.l0.noDragRegion,Q.l0.flex.growAndShrink(1)],inheritanceChevron:[Q.l0.color.outlineStrongest,{marginInline:-1}]}),vz=(0,ek.X)({buttonWrapper:[Q.l0.position.relative],button:[Q.l0.height(32),Q.l0.width(32),Q.l0.borderRadius()]});function vF(){var e=lx(),n=(0,uZ.Z)(e.isOpen),t=e.toggle;(0,te.Il)(function(){return[vn.id,function(){return t()}]},[t]);var r=(0,te.gf)(vn.id),i=(n?"Close":"Open")+" sidebar",o=(0,j._)((0,q.useState)(!1),2),a=o[0],l=o[1],c=r?(0,$.tZ)(vX,{shortcut:r,text:i}):i;return(0,$.tZ)(K.G,{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,$.tZ)(cF.hU,{alt:i,css:vW.root,"aria-label":"Toggle sidebar","aria-expanded":n,tooltipContents:c,tooltipPlacement:"bottom-start",onClick:function(){t(),l(!1)},children:(0,$.BX)(K.G,{css:vW.iconContainer,children:[(0,$.tZ)(K.G,{css:vW.icon,style:{width:n&&!a||!n&&a?"40%":"20%",backgroundColor:n?Q.TV.foregroundDefault:"transparent"}}),(0,$.tZ)(K.G,{})]})})})}function vV(e){var n=e.org,t=n?(0,ux._Q)({id:n.id,slug:n.slug}):void 0,r=t?t.home.href:"/home",i=t?t.home.as:"/~";return(0,$.tZ)(vu.I,{"aria-label":"Home",alt:"Home",dataCy:"home-button",css:vz.button,href:r,as:i,children:(0,$.tZ)(K.G,{css:vz.buttonWrapper,children:(0,$.tZ)(ni.Z,{size:16})})})}function vH(e){var n=e.org;return(0,ec.Z)()?(0,$.tZ)(uy,{}):(0,$.tZ)(vV,{org:n})}var vj=(0,ek.X)({root:[Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.start],rootWithGap:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.justify.start],replInfo:[Q.l0.flex.shrink(1),Q.l0.flex.row,Q.l0.maxWidth(530),Q.l0.align.center,{"& > span":[Q.l0.viewStyle,Q.l0.flex.shrink(1)]},Q.l0.noDragRegion]});function v$(e){var n=e.repl,t=e.currentUser,r=ld(),i=(0,vc.k)(),o=(0,uO.iM)(),a=oU(ip),l=(0,j._)((0,q.useState)(!1),2),c=l[0],u=l[1],s=(0,cN.e$)(vE.V.id,vE.o.Welcome),d=(0,cN.e$)(vE.V.id,vE.o.Forks,{onEnter:function(){u(!0)},onExit:function(){u(!1)}});return(0,$.BX)(K.G,{css:vj.root,children:[(0,$.tZ)(ub.Z,{}),(0,$.tZ)(K.G,{css:Q.l0.noDragRegion,children:(0,$.tZ)(vF,{})}),(0,$.tZ)(K.G,{css:Q.l0.noDragRegion,children:(0,$.tZ)(vH,{org:n.org||void 0})}),n.project&&n.org?(0,$.BX)($.HY,{children:[(0,$.tZ)(ed.u,{tooltip:"Project forks",css:vN.projectLinkTooltip,isOpen:!c&&void 0,children:(0,$.BX)(cM.xo,{buttonRef:s.tourRef,label:"Project Menu",isOpen:c,onOpenChange:function(e){u(e),e&&s.isActive?s.next():!e&&d.isActive&&d.next()},noArrow:!0,placement:"bottom start",children:[(0,$.tZ)(e6.zx,{text:n.project.title,variant:"nofill",css:vN.projectLink}),(0,$.tZ)(vT,{org:n.org,projectId:n.project.id,ref:d.tourRef})]})}),(0,$.tZ)(dP.Z,{size:12,css:vN.inheritanceChevron})]}):null,(0,$.BX)(K.G,{css:vj.rootWithGap,children:[(0,$.tZ)(K.G,{css:vj.replInfo,children:(0,$.tZ)(uk,{repl:n,getDesktopLayoutState:a,onDeployClick:function(){r({pane:{type:"deployments"}})}})}),(0,$.tZ)(K.G,{css:Q.l0.noDragRegion,children:(0,$.tZ)(dl,{repl:n,currentUser:t})}),(0,$.tZ)(K.G,{css:Q.l0.noDragRegion,children:(0,$.tZ)(vM,{})}),(null==t?void 0:t.isFirewallMode)?(0,$.tZ)(K.G,{css:[Q.l0.noDragRegion,Q.l0.pl(8)],children:(0,$.tZ)(un.Z,{isWorkspace:!0})}):null,i&&o?(0,$.tZ)(ed.u,{tooltip:"Pid2 Enabled",children:(0,$.tZ)(uS.D,{variant:"filled",text:"Pid2",colorway:"green"})}):null]})]})}var vq=t(11006),vY=t(96725),vJ=t(47126);function vK(){var e=(0,eB._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return vK=function(){return e},e}function vQ(){var e=(0,eB._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return vQ=function(){return e},e}var v0={},v1=(0,eU.Ps)(vK()),v2=(0,eU.Ps)(vQ()),v4="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651",v5="https://linkedin.com/sharing/share-offsite",v3=t(42310),v7=t(45093),v6=t(67492),v8=t(41749),v9=t(9),ge=t(48873),gn=function(e){var n,t,r,i,o,a,l,c=e.lessonSlug,u=e.courseSlug,s=(0,cT.Z)().showConfirm;if(!c||!u)return null;var d=(0,ge.QW)(u),p=(0,ge.qv)(u,c);if(!p)return null;var f=p.ordinalLabel,h=(0,ge.tD)(d.socialSharingText,p),v="".concat(h," ").concat(d.sharableLink),g=(0,v3.Z)({text:h,url:d.sharableLink}),m=(n=({url:d.sharableLink}).url,"".concat(v5,"?url=").concat(encodeURIComponent(n))),y=(r=(t={url:d.sharableLink,hashtag:d.socialHashtag}).url,i=t.hashtag,o=t.redirectBackTo,(a=new URLSearchParams).append("href",r),o&&a.append("redirect_uri",o),i&&(i.startsWith("#")||(i="#".concat(i)),a.append("hashtag",i)),l=a.toString(),"".concat(v4,"&").concat(l)),b=[{url:g,icon:v8.Z,base:v3.c,cta:"Share on Twitter",color:v9.Z.brands.twitter},{url:m,icon:v6.Z,base:v5,cta:"",color:v9.Z.brands.linkedin},{url:y,icon:v7.Z,base:v4,cta:"",color:v9.Z.brands.facebook}];return(0,$.BX)(K.G,{children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(16),Q.l0.align.center,Q.l0.pr(24)],children:[(0,$.tZ)(K.G,{css:{fontSize:48},children:"\uD83E\uDD73"}),(0,$.BX)(ew.xv,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",f,"!"]})]}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",css:[Q.l0.py(12)],multiline:!1,children:"Share your progress"}),(0,$.BX)(K.G,{css:[Q.l0.position.relative,Q.l0.borderRadius(8),Q.l0.backgroundColor.backgroundHigher,Q.l0.py(8),Q.l0.px(12)],children:[(0,$.tZ)(K.G,{css:Q.l0.pr(16),children:v}),(0,$.tZ)(cF.hU,{css:[Q.l0.position.absolute,Q.l0.top(8),Q.l0.right(8)],alt:"Copy",size:18,tooltipBehavior:"hidden",onClick:function(){s("Copied to clipboard!"),(0,cD.Z)(v),(0,vY.l)({action:"copied_share_text",lessonSlug:c,courseSlug:u,origin:"lesson_complete_modal"})},children:(0,$.tZ)(cE.Z,{size:16})})]}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(16),Q.l0.justify.center,Q.l0.pt(16),Q.l0.align.center],children:[(0,$.tZ)(e8.Z,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(u,"/hub")}),(0,$.tZ)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:b.map(function(e){var n=e.url,t=e.icon,r=e.base,i=e.cta,o=e.color;return(0,$.tZ)(e6.zx,{css:[{backgroundColor:o,color:"white"}],onClick:function(){window.open(n,"_blank"),(0,eZ.j)(eZ.U3.EXTERNAL_LINK_VIEWED,{url:r,placement:"lesson-complete-modal",campaign:u,lessonSlug:c})},text:i,iconLeft:(0,$.tZ)(t,{})},n)})})]})]})};function gt(e){var n=e?1560:1400;return(0,ek.X)({desktopButton:(0,ee._)({},Q.BC.max(n),[Q.l0.display.none]),mobileButton:(0,ee._)({},Q.BC.min(n),[Q.l0.display.none])})}var gr=function(e){var n,t=e.lesson,r=(0,cT.Z)().showError,i=(0,vJ.$0)().fireCircularBurstFrom,o=(0,q.useRef)(null),a=(0,dm.T)(),l=(0,j._)((0,q.useState)(!1),2),c=l[0],u=l[1],s=(0,es.r)().showPrivateUpsell,d=(0,j._)((n=(0,eE._)({},v0,{onError:function(){return r("Something went wrong")},onCompleted:function(e){var n,l;(null===(n=e.completeUserCourseLesson)||void 0===n?void 0:n.__typename)!=="UpdatedUserCourseLesson"?r((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===t.id?(o.current&&!a&&i({element:o.current}),u(!0)):r("Something went wrong")}}),eX.D(v2,n)),2),p=d[0],f=d[1].loading,h="Lesson completed \uD83C\uDF89",v="Mark lesson completed",g=function(){(0,vY.l)({action:"completed",lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug}),p({variables:{input:{userLessonId:t.id}}})};return(0,$.BX)($.HY,{children:[null!==t.timeCompleted?(0,$.BX)($.HY,{children:[(0,$.tZ)(e6.zx,{ref:o,disabled:!0,text:h,colorway:"primary",css:gt(s).desktopButton}),(0,$.tZ)(ed.u,{tooltip:h,css:gt(s).mobileButton,children:(0,$.tZ)(e6.zx,{ref:o,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,$.BX)($.HY,{children:[(0,$.tZ)(e6.zx,{onClick:g,text:f?"Verifying…":v,colorway:"primary",loading:f,css:gt(s).desktopButton}),(0,$.tZ)(ed.u,{tooltip:v,css:gt(s).mobileButton,children:(0,$.tZ)(e6.zx,{iconLeft:(0,$.tZ)(ne.Z,{}),onClick:g,text:"",colorway:"primary",loading:f})})]}),(0,$.tZ)(nk.u,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,$.tZ)(gn,{lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug})})]})};function gi(e){var n,t=e.lesson,r=(n="tutorial",oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){return e(rc).find(function(t){return!t.isHidden&&e(t.data).type===n})})},[n]))),i=oB(a0),o=(0,es.r)().showPrivateUpsell,a="Show tutorial",l=(0,$.tZ)(vq.Z,{}),c=function(){return i()};return r?(0,$.tZ)(gr,{lesson:t}):(0,$.BX)($.HY,{children:[(0,$.tZ)(e6.zx,{colorway:"primary",iconLeft:l,text:a,css:gt(o).desktopButton,onClick:c}),(0,$.tZ)(ed.u,{tooltip:a,css:gt(o).mobileButton,children:(0,$.tZ)(e6.zx,{colorway:"primary",iconLeft:l,text:"",onClick:c})})]})}var go=t(63769),ga=t(56250);function gl(){var e=(0,eB._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    url\n    username\n    image\n    ...LayoutHeaderAvatarDropdownCurrentUser\n  }\n  ","\n"]);return gl=function(){return e},e}function gc(){var e=(0,eB._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    workspaceCta\n    org {\n      id\n      type\n    }\n    authorizations {\n      viewPermissions {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return gc=function(){return e},e}function gu(){var e=(0,eB._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return gu=function(){return e},e}var gs={},gd=(0,eU.Ps)(gl(),go.z),gp=(0,eU.Ps)(gc(),v1),gf=(0,eU.Ps)(gu(),gp,ga.s,gd),gh=t(53941),gv=t(29424),gg=t(30286),gm=t(90),gy=t(3710),gb=(0,ek.X)({prePlanWrapper:[Q.l0.mx(4),Q.l0.flex.growAndShrink(1),Q.l0.overflow("hidden"),{whiteSpace:"nowrap"}],button:[nq.gU.filled,Q.l0.height(32),Q.l0.px(8),{border:"none"},Q.l0.borderRadius(4),Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.spaceBetween,Q.l0.flex.growAndShrink(1)],popoutWrapper:[Q.l0.py(8),Q.l0.px(16),Q.l0.maxWidth(420)],planLoading:[Q.l0.rowWithGap(6),Q.l0.align.center],textWrapper:[Q.l0.rowWithGap(4),Q.l0.flex.growAndShrink(1)],countText:[Q.l0.mr(4)],stepText:[Q.l0.overflow("hidden"),Q.l0.textAlign.left,{flex:1,whiteSpace:"nowrap",textOverflow:"ellipsis"}],stepPopoutFallbackWrapper:[Q.l0.p(16)]});function gZ(){var e,n,t=(0,gy.C)(),r=(0,lU.$C)(),i=null==t?void 0:t.agentPlan,o=(0,j._)((0,q.useState)(!1),2),a=o[0],l=o[1];if(!i)return(0,$.tZ)(K.G,{css:gb.prePlanWrapper,children:r?(0,$.BX)(K.G,{css:gb.planLoading,children:[(0,$.tZ)(ew.xv,{children:"Waiting for a plan"}),(0,$.tZ)(no.Z,{color:Q.TV.blurpleStronger})]}):(0,$.tZ)(ew.xv,{children:"Waiting for user input"})});if(i.requiresApproval)return(0,$.tZ)(K.G,{css:gb.prePlanWrapper,children:"Waiting for approval"});var c=i.step.subSteps.length,u=i.step.subSteps.findIndex(function(e){return e.status===lU.UL.STEP_IN_PROGRESS||e.status===lU.UL.STEP_FAILED}),s=i.step.subSteps.every(function(e){return e.status===lU.UL.STEP_COMPLETE}),d=i.step.subSteps.some(function(e){return e.status===lU.UL.STEP_FAILED}),p=null!==(n=null===(e=i.step.subSteps[u])||void 0===e?void 0:e.name)&&void 0!==n?n:"";return s?p="Plan Completed!":d&&(p="Plan Failed"),(0,$.BX)(cM.xo,{isOpen:a,onOpenChange:l,label:"Plan Details",children:[(0,$.BX)(e6.Yd,{css:gb.button,children:[(0,$.BX)(K.G,{css:gb.textWrapper,children:[(0,$.BX)(ew.xv,{css:gb.countText,style:{color:d?Q.TV.redStronger:Q.TV.blurpleStronger},children:[s?c:u+1," / ",c]}),(0,$.tZ)(ew.xv,{css:gb.stepText,children:p})]}),(0,$.tZ)(nn.Z,{})]}),(0,$.tZ)(K.G,{css:gb.popoutWrapper,children:t?(0,$.tZ)(gm.ZP,{agentPlan:t.agentPlan,sessionId:t.sessionId}):(0,$.tZ)(K.G,{children:"Plan is not ready yet"})})]})}var gx=t(8366),gw=(0,oz.$)(["width"]),g_=gw.cssVars,gC=gw.styleTokens,gk=(0,ek.X)({root:[Q.l0.width("100%"),Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.justify.spaceBetween],left:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.pr(4),{width:gC.width}],iconButtonSurface:[Q.l0.width(32),Q.l0.height(32),Q.l0.borderRadius(4),Q.l0.position.relative,{"& > button":Q.l0.coverContainer}],right:[Q.l0.rowWithGap(4),Q.l0.align.center]});function gS(e){var n,t=(0,lU.qH)(),r=(0,lU.ue)(),i=(0,lU.lr)(),o=(0,j._)((0,q.useState)(!1),2),a=o[0],l=o[1],c=(0,q.useCallback)((n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:if(!t)return[3,2];return l(!0),[4,r({sessionId:t.sessionId,runState:e})];case 1:n.sent(),l(!1),n.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),[t,r]),u=(0,q.useRef)(null);return(0,oN.j)(u,e.sidebarWidth,function(e){return(0,ee._)({},g_.width,e-12+"px")}),(0,$.BX)(K.G,{css:gk.root,innerRef:u,children:[(0,$.BX)(K.G,{css:gk.left,children:[(0,$.tZ)(nI.Tg,{elevated:!0,css:gk.iconButtonSurface,children:(0,$.tZ)(cF.hU,{alt:"Exit agent mode",onClick:function(){return i()},children:(0,$.tZ)(gh.Z,{})})}),(0,$.tZ)(gZ,{}),(0,$.tZ)(gI,{active:t,disabled:null===t||a,onPauseAgent:function(){return c(lU.FL.AGENT_STATE_PAUSED)},onUnpauseAgent:function(){return c(lU.FL.AGENT_STATE_RUNNING)}})]}),(0,$.BX)(K.G,{css:gk.right,children:[e.isProgressPaneOpen?null:(0,$.tZ)(nI.Tg,{elevated:!0,css:gk.iconButtonSurface,children:(0,$.tZ)(cF.hU,{alt:"View Agent Progress",onClick:e.onViewProgressPane,children:(0,$.tZ)(gx.Z,{})})}),(0,$.tZ)(nI.Tg,{css:gk.iconButtonSurface,children:(0,$.tZ)(cF.hU,{alt:"New pane",onClick:e.onNewSplit,children:(0,$.tZ)(gv.Z,{})})})]})]})}function gI(e){var n=e.active,t=e.onPauseAgent,r=e.onUnpauseAgent,i=(0,ut._)(e,["active","onPauseAgent","onUnpauseAgent"]),o=(0,lU.zl)(),a=(0,lU.k2)(),l="";switch(a.status){case lU.FL.AGENT_STATE_RUNNING:l="Pause";break;case lU.FL.AGENT_STATE_PAUSED:case lU.FL.AGENT_STATE_PAUSING:default:l="Run"}return(o&&(l="Approve plan to start agent"),a.status===lU.FL.AGENT_STATE_UNKNOWN)?null:(0,$.tZ)(nI.Tg,{elevated:!0,css:gk.iconButtonSurface,children:(0,$.tZ)(cF.hU,(0,eG._)((0,eE._)({},i),{alt:l,onClick:function(){switch(null==n?void 0:n.agentStatus){case lU.FL.AGENT_STATE_RUNNING:return t();case lU.FL.AGENT_STATE_PAUSED:case lU.FL.AGENT_STATE_PAUSING:default:return r()}},disabled:o,children:a?(0,$.tZ)(gR,{state:a.status}):null}))})}function gR(e){switch(e.state){case lU.FL.AGENT_STATE_RUNNING:return(0,$.tZ)(gg.Z,{});case lU.FL.AGENT_STATE_PAUSED:case lU.FL.AGENT_STATE_PAUSING:default:return(0,$.tZ)(lK.Z,{})}}var gE=(0,et.F4)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),gG=(0,et.F4)({from:{opacity:0},to:{opacity:1}}),gP={root:(0,et.iv)([Q.l0.width("100%"),Q.l0.top(0),Q.l0.left(0),Q.l0.py(8),Q.l0.px(12),Q.l0.position.absolute,Q.l0.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(gE," 0.2s ease-in-out, ").concat(gG," 0.2s ease-in-out")},animation:"".concat(gG," 0.2s ease-in-out")}]),center:(0,et.iv)([Q.l0.noDragRegion,Q.l0.position.relative,Q.l0.rowWithGap(8),Q.l0.align.center]),right:(0,et.iv)([Q.l0.rowWithGap(6),Q.l0.align.center,Q.l0.justify.end]),socialGroup:(0,et.iv)([Q.l0.rowWithGap(1),Q.l0.align.stretch,Q.l0.borderRadius(),Q.l0.noDragRegion,{overflow:"hidden"}]),invitePopover:(0,et.iv)([Q.l0.width(400)]),privatePill:(0,et.iv)([(0,ee._)({},Q.BC.max(1300),{display:"none"})]),inviteButton:(0,et.iv)((0,en._)((0,e6.uW)({size:16})).concat([nq.gU.filled,(0,ee._)({borderTopLeftRadius:0,borderBottomLeftRadius:0},Q.BC.max("tabletMax"),{svg:[Q.l0.mr(0)],span:[Q.l0.display.none]})])),searchButton:(0,et.iv)([Q.l0.height(32),Q.l0.width(32)]),commandButton:[Q.l0.flex.growAndShrink(1),(0,ee._)({},Q.BC.max("tabletMax"),{"div span":[Q.l0.display.none],"div svg":[Q.l0.mr(0)]})],rightIconButtons:(0,et.iv)([Q.l0.flex.row])},gD={windowsOSRoot:(0,et.iv)([gP.root,Q.l0.dragRegion,{paddingRight:el.KN}])};function gT(e){var n,t,r,i,o,a=e.repl,l=(0,j._)((0,q.useState)(!1),2),c=l[0],u=l[1],s=(0,cN.e$)(cO.Q.id,cO.y.Share),d=(0,j._)((0,q.useState)(!1),2),p=d[0],f=d[1],h=ld(),v=ey(lh()),g=(0,cz.cR)(),m=(0,q.useRef)(null),y=(0,q.useRef)(null),b=(0,q.useRef)(c&&(null==s?void 0:s.isActive));(0,q.useEffect)(function(){!b.current||(null==s?void 0:s.isActive)||u(!1),b.current=c&&(null==s?void 0:s.isActive)},[s,c]),(0,q.useEffect)(function(){if(null==s?void 0:s.isActive){if(c&&y.current){null==s||s.tourRef(y.current);return}s.tourRef(m.current)}},[s,c,y]);var Z=(null===(n=a.owner)||void 0===n?void 0:n.__typename)==="Team",x=a.authorizations.viewPermissions.isAuthorized,w=(null===(t=a.org)||void 0===t?void 0:t.type)==="team"?"Access":"Invite",_=!!((null==a?void 0:null===(i=a.authorizations)||void 0===i?void 0:null===(r=i.viewDeploymentConfig)||void 0===r?void 0:r.isAuthorized)&&!g);(0,te.Il)(function(){return[cA.toggleInviteDialog.id,function(){return u(function(e){return!e})}]},[u]);var C=(0,te.gf)(cA.toggleInviteDialog.id);return lq({match:lI.pl,data:{type:"action",label:"Invite",icon:(0,$.tZ)(nR.Z,{}),description:"Open invite dialog",keyboardShortcut:C,run:function(){u(!0)}}}),(0,$.BX)($.HY,{children:[(null==a?void 0:a.lesson)?(0,$.tZ)(gi,{lesson:a.lesson}):null,(0,$.tZ)(cH,{}),(0,$.BX)(nI.Tg,{css:gP.socialGroup,background:"root",children:[(0,$.tZ)(n8,{onAvatarClick:v}),x?(0,$.tZ)($.HY,{children:(0,$.tZ)(K.G,{innerRef:m,css:{"&:only-child .invite-button":[Q.l0.borderRadius()]},children:(0,$.BX)(cM.xo,{isOpen:c,placement:"bottom end",label:w,css:gP.invitePopover,onOpenChange:function(e){if(c&&!p){u(!1);return}e&&(0,eZ.j)(eZ.U3.INVITE_MODAL_OPENED,{replId:a.id,source:"replEnvironment"}),u(e)},noArrow:!0,children:[(0,$.BX)(e6.Yd,{css:gP.inviteButton,className:"invite-button",children:[(0,$.tZ)(cW.Z,{}),(0,$.tZ)(ew.xv,{children:w}),(0,$.tZ)(ef,{css:gP.privatePill})]}),(0,$.tZ)("div",{ref:y,children:(0,$.tZ)(nN,{handleUpgradeTriggered:function(e){return f(e)},replId:a.id,isTeamRepl:Z,org:null!==(o=a.org)&&void 0!==o?o:void 0})})]})})}):null]}),_&&a?(0,$.tZ)(K.G,{children:(0,$.tZ)(ue,{})}):null,g?(0,$.tZ)(e6.zx,{text:"Extension Devtools",iconLeft:(0,$.tZ)(cX.Z,{}),onClick:function(){h({pane:{type:"extensionDevtools"}})}}):null]})}function gA(e){var n=e.currentUser,t=(0,nG.useRouter)(),r=(0,ec.Z)(),i=ld(),o=lj(),a=(0,J.P5)({controlName:"flag-no-workspace-notifications",default:!1}),l=(0,te.gf)(l$.id),c=[{type:"button",key:"shortcuts",onClick:function(){o(),(0,eZ.j)(eZ.U3.KEYBOARD_SHORTCUTS_OPENED)},content:(0,$.BX)($.HY,{children:[(0,$.tZ)(cL.Z,{}),(0,$.tZ)(ew.xv,{children:"Shortcuts"}),l?(0,$.tZ)(te.bM,{keyCombo:l,small:!0}):null]})}],u=(0,$.tZ)(ei.Z,{extraItems:c,onDocsClick:function(e){e.preventDefault(),i({pane:{type:"docs",data:{url:null}}})}});return(0,$.tZ)($.HY,{children:r?(0,$.BX)($.HY,{children:[u,(0,$.tZ)(ea.S,{})]}):(0,$.BX)($.HY,{children:[(0,$.BX)(K.G,{css:gP.rightIconButtons,children:[a?null:(0,$.tZ)(eo.Z,{pathname:t.pathname,showCount:!1}),u]}),(0,$.tZ)(er.Z,{currentUser:n})]})})}function gB(){var e=(0,cN.e$)(cO.Q.id,cO.y.Run),n=(0,te.gf)(cA.run.id),t=(0,ev.Z)().runner;return(0,$.tZ)(K.G,{innerRef:e.tourRef,dataCy:"ws-run-btn",onClick:function(){(null==e?void 0:e.isActive)&&e.next()},css:gP.center,children:(0,$.tZ)(l0.ZP,{runner:t,disableTooltip:null==e?void 0:e.isActive,shortcut:n})})}var gU=(0,q.memo)(function(){var e,n,t,r=(e={variables:{id:(0,eb.Z)()},context:{noBatch:!0}},n=(0,eE._)({},gs,e),eL.a(gf,n)).data,i=(null==r?void 0:r.repl.__typename)==="Repl"?r.repl:null,o=null==r?void 0:r.currentUser,a=(0,ec.Z)(),l=(0,ex.Cl)(),c=(0,lU.$g)(),u=oB(ol),s=ld(),d=(t="agentProgress",oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){return e(rc).some(function(n){return e(n.data).type===t})})},[t]))),p=lx();return i&&o?(0,$.tZ)(K.G,{tag:"header",style:{display:c?"block":void 0},css:a&&l?gD.windowsOSRoot:gP.root,children:c?(0,$.tZ)(gS,{onViewProgressPane:function(){return s({pane:{type:"agentProgress"}})},isProgressPaneOpen:d,onNewSplit:function(){return u({edge:"right",pane:{type:"commands",data:{autoFocus:!1}}})},sidebarWidth:p.width}):(0,$.BX)($.HY,{children:[(0,$.tZ)(v$,{repl:i,currentUser:o}),(0,$.tZ)(gB,{}),(0,$.BX)(K.G,{css:gP.right,children:[(0,$.tZ)(gT,{repl:i}),(0,$.tZ)(gA,{currentUser:o})]})]})}):null}),gO=t(47495),gM=t(34525);function gL(){var e=(0,eg.WU)(),n=oU(rA),t=oU(rU),r=oU(ip),i=oB(od),o=oB(ou),a=oB(of),l=oU(rD),c=oU(rT),u=oT(iJ);return(0,q.useCallback)(function(s){var d=s.pane,p=s.activate,f=s.updateOnReveal,h=e(),v=(0,rw.Ur)(d)?l():c();if(v||(v=function(e){var n,t,r,i,o=e.panes,a=e.pane;if((0,rw.Ur)(a)){var l,c,u=a.data.path;return null!==(c=null===(l=o.find(function(e){var n=(0,j._)(e,2)[1];return(0,rw.Ur)(n)&&n.data.path===u}))||void 0===l?void 0:l[0])&&void 0!==c?c:null}return(0,rw.WQ)(a)?null!==(t=null===(n=o.find(function(e){var n=(0,j._)(e,2)[1];return!!(0,rw.WQ)(n)&&n.data.installationId===a.data.installationId&&n.data.path===a.data.path&&n.data.filePath===a.data.filePath}))||void 0===n?void 0:n[0])&&void 0!==t?t:null:(0,rw.b)(a.type)&&null!==(i=null===(r=o.find(function(e){return(0,j._)(e,2)[1].type===a.type}))||void 0===r?void 0:r[0])&&void 0!==i?i:null}({panes:(0,en._)(n()).concat((0,en._)(t())),pane:d})),v&&h){var g,m,y=r().layout,b=null===(g=tR(y,h))||void 0===g?void 0:g.paneGroup,Z=null===(m=tR(y,v))||void 0===m?void 0:m.paneGroup;if(!u||(null==b?void 0:b.id)===(null==Z?void 0:Z.id))return(void 0===f||f)&&a({paneId:v,pane:d}),o({paneId:v,activate:p}),v}var x=s.placement;return u&&null!=h?x={type:"after",paneId:h}:(null==x?void 0:x.type)!=="secondary"||x.relativeTo||(x={type:"secondary",relativeTo:h}),i({pane:d,activate:p,placement:x})},[e,l,c,u,i,n,t,r,o,a])}var gX={base:(0,et.iv)([Q.l0.position.absolute,Q.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:nF.H.duration,transitionTimingFunction:nF.H.timingFunction}]),floating:(0,et.iv)([{borderColor:Q.TV.outlineDimmest},Q.l0.shadow(2)]),dragging:(0,et.iv)([{borderColor:Q.TV.outlineStronger},Q.l0.shadow(3)]),active:(0,et.iv)([{borderColor:Q.TV.outlineDimmer}])},gW=(0,q.memo)(function(e){var n=lm(e.paneId),t=(0,uZ.Z)(n.isFloating),r=(0,uZ.Z)(n.isActive),i=(0,uZ.Z)(n.isBeingDragged),o=(0,uZ.Z)(n.hasBorder),a=(0,uZ.Z)(n.headerHeight);return o&&t?(0,$.tZ)(K.G,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(a,"px + 2px)"),top:-(a+1)},css:[gX.base,t&&gX.floating,r&&gX.active,i&&gX.dragging]}):null}),gN=K.K.div,gz=(0,et.iv)([Q.l0.width("100%"),Q.l0.position.absolute,Q.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),gF=(0,et.iv)([Q.l0.height("100%"),Q.l0.position.absolute,Q.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),gV=(0,et.iv)([Q.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function gH(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var gj={topLeft:(0,et.iv)([Q.l0.top(0),Q.l0.left(0),gH("topLeft")]),topRight:(0,et.iv)([Q.l0.top(0),Q.l0.right(0),gH("topRight")]),bottomLeft:(0,et.iv)([Q.l0.bottom(0),Q.l0.left(0),gH("bottomLeft")]),bottomRight:(0,et.iv)([Q.l0.bottom(0),Q.l0.right(0),gH("bottomRight")])};function g$(e){var n=e.edge,t=e.size,r=e.onPointerDown;return"top"===n||"bottom"===n?(0,$.tZ)(gN,{onPointerDown:r,style:(0,ee._)({height:t},n,-t),css:gz}):"right"===n||"left"===n?(0,$.tZ)(gN,{onPointerDown:r,style:(0,ee._)({width:t},n,-t),css:gF}):(0,$.tZ)(gN,{onPointerDown:r,style:{height:t,width:t,cursor:"topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize"},css:[gV,gj[n]]})}var gq=["bottom","right","left","bottomRight","bottomLeft"],gY=(0,q.memo)(function(e){var n=oB(az);return(0,$.tZ)($.HY,{children:gq.map(function(t){return(0,$.tZ)(g$,{size:8,edge:t,onPointerDown:function(r){dg(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),gJ=["top","right","left","topRight","topLeft"],gK=(0,q.memo)(function(e){var n=oB(az);return(0,$.tZ)($.HY,{children:gJ.map(function(t){return(0,$.tZ)(g$,{size:8,edge:t,onPointerDown:function(r){dg(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),gQ=(0,oz.$)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","interactionBlanketDisplay","pointerEvents","userSelect","borderTopLeftRadius","borderTopRightRadius"]),g0=gQ.cssVars,g1=gQ.styleTokens,g2=(0,ek.X)({root:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.container("pane"),{borderTopLeftRadius:g1.borderTopLeftRadius,borderTopRightRadius:g1.borderTopRightRadius,borderBottomLeftRadius:4,borderBottomRightRadius:4,transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate(".concat(g1.transformX,", ").concat(g1.transformY,") scale(").concat(g1.scale,")"),transformOrigin:"".concat(g1.transformOriginX," top"),width:g1.width,height:g1.height,transitionDuration:g1.transitionDuration,"--fixed-position-offset-x":g1.fixedPositionOffsetX,"--fixed-position-offset-y":g1.fixedPositionOffsetY}],container:[Q.l0.position.relative,Q.l0.width("100%"),Q.l0.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:g1.userSelect}],interactionBlanket:[Q.l0.coverContainer,{zIndex:1,display:g1.interactionBlanketDisplay}]}),g4=(0,q.memo)(function(e){var n,t,r,i,o,a,l=e.paneId,c=(0,rw.Se)().Content,u=lm(l),s=(0,uZ.Z)(u.isHidden),d=(0,uZ.Z)(u.data),p=(0,uZ.Z)(u.isActive),f=(0,uZ.Z)(u.isCommitted);(0,eg.Np)(l,d);var h=(n=gL(),t=oB(of),r=oB(rk),i=oB(i8),(0,tt.Z)(function(){return function(e){switch(e.operation){case"commit":r(l);return;case"open":n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:l}:{type:"after",paneId:l}});return;case"replace":t({paneId:l,pane:e.pane});return;case"remove":i(l);return;default:(0,cQ.Z)(e)}}},[r,l,t,i,n])),v=(o=(0,ev.Z)().container,a=(0,uM.Z)({container:o,service:"panetracker"}).channel,(0,q.useCallback)(function(e,n){a&&a.send({paneMetricsTracker:{pane:e,flow:n}})},[a]));return(0,$.tZ)(c,{pane:d,options:{paneId:l,isHidden:s,performPaneOperation:h,isActive:p,isCommitted:f,emitPaneMetrics:v}})}),g5=(0,ek.X)({overlay:[Q.l0.coverContainer,Q.l0.position.fixed,Q.l0.backgroundColor.backgroundOverlay,Q.l0.zIndex(oF.M.floatingPane)]});function g3(){var e=oB(av);return(0,q.useEffect)(function(){var n=function(n){"Escape"===n.key&&e()};return document.addEventListener("keydown",n,!0),function(){document.removeEventListener("keydown",n,!0)}},[e]),(0,$.tZ)(K.G,{onClick:e,css:g5.overlay})}var g7=(0,q.memo)(function(e){var n,t,r,i,o,a,l=e.paneId,c=(0,dm.T)(),u=ls(),s=(t=({paneId:l}).paneId,i=(r=(0,j._)((0,gO.L)({accept:[op.Tv.File,fw.z.Pane,fw.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===fw.z.Pane){a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});return}if("nodes"===e.type){var i=(0,rw.ME)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===fw.z.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2))[0].isOver,o=r[1],a=(n=oB(oV),(0,q.useEffect)(function(){i||n(null)},[i,n]),{drag:oB(aw),drop:oB(a_)}),o),d=lm(l),p=(0,uZ.Z)(d.isActive),f=(0,uZ.Z)(d.isFloating),h=(0,uZ.Z)(d.isModal),v=(0,uZ.Z)(d.paneType),g=(0,ec.Z)(),m=(0,ex.NJ)(),y=(0,ex.Cl)(),b=(0,ex.Vm)(),Z=(m||y)&&g?Y.Mz:0,x=(0,q.useRef)(null);(0,oN.j)(x,d.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ee._)(n,g0.width,t+"px"),(0,ee._)(n,g0.height,r+"px"),n}),(0,oN.j)(x,d.transform,function(e){var n,t=e.x,r=e.y,i=e.scale;return n={},(0,ee._)(n,g0.transformX,Math.round(t)+"px"),(0,ee._)(n,g0.transformY,Math.round(r)+"px"),(0,ee._)(n,g0.scale,i.toString()),n}),(0,oN.j)(x,d.transformOriginXAtom,function(e){return(0,ee._)({},g0.transformOriginX,e)}),(0,oN.j)(x,d.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,ee._)(n,g0.fixedPositionOffsetX,-t+"px"),(0,ee._)(n,g0.fixedPositionOffsetY,-r-Z+"px"),n}),(0,oN.j)(x,d.isHidden,function(e){return{opacity:e?"0":"1",visibility:e?"hidden":"visible"}}),(0,oN.j)(x,d.animate,function(e){return(0,ee._)({},g0.transitionDuration,e&&c?"140ms":"0ms")}),(0,oN.j)(x,d.zIndex,function(e){return{"z-index":e.toString()}}),(0,oN.j)(x,d.disableInteractions,function(e){var n;return n={},(0,ee._)(n,g0.interactionBlanketDisplay,e?"block":"none"),(0,ee._)(n,g0.userSelect,e?"none":"auto"),(0,ee._)(n,g0.pointerEvents,e?"none":"auto"),n});var w=b?void 0:{"& iframe":{pointerEvents:g1.pointerEvents}},_=p?void 0:function(){u(l,{commit:"codeEditor"!==v})},C=(0,lT.u1)();return(0,$.BX)($.HY,{children:[h&&p?(0,$.tZ)(g3,{}):null,(0,$.tZ)(lT.Xq,{value:l,children:(0,$.tZ)(nI.Tg,{role:"tabpanel",id:l,"aria-labelledby":"tab-".concat(l),innerRef:(0,ur.l)(x,f?void 0:s),css:g2.root,elevated:!0,children:(0,$.BX)(gM.Z,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,tt.Z)(function(){return{paneType:v}},[v]),children:[(0,$.tZ)(gW,{paneId:l}),(0,$.BX)(K.G,{css:g2.container,onMouseDown:_,onContextMenu:_,innerRef:function(e){return C(l,e)},style:w,children:[(0,$.tZ)(K.G,{tabIndex:-1}),(0,$.tZ)(g4,{paneId:l})]}),f&&!h?(0,$.tZ)(gY,{paneId:l}):null,(0,$.tZ)(K.G,{css:g2.interactionBlanket})]},l)})})]})}),g6=t(11195),g8=t(84238),g9=t(47767),me=(0,tr.cn)([]);function mn(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,r4.b9)(me);(0,q.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,en._)(e).concat((0,en._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function mt(){var e=(0,r4.Dv)(me);return(0,q.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,c=o.value,u=c.shortcut,s=c.run;!!u.cmdOrCtrlKey==!!(0,dE.jh)(n)&&!!u.altKey==!!n.altKey&&!!u.shiftKey==!!n.shiftKey&&(null===(l=u.key)||void 0===l?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(u))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var mr=t(59140),mi=t(60366),mo=(0,et.F4)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),ma=(0,ek.X)({root:[Q.l0.color.foregroundDimmest,Q.l0.position.relative,Q.l0.width("100%"),Q.l0.height("100%"),{overflow:"hidden"}],arrows:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.flex.row,Q.l0.flex.wrap,Q.l0.width("200%"),Q.l0.height("200%"),{animationName:mo,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[Q.l0.width("50%"),Q.l0.height("50%"),Q.l0.center]});function ml(e){var n=e.delay,t=e.duration;return(0,$.tZ)(K.G,{css:ma.root,children:(0,$.BX)(K.G,{css:ma.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,$.tZ)(K.G,{css:ma.arrow,children:(0,$.tZ)(mr.Z,{size:12})}),(0,$.tZ)(K.G,{css:ma.arrow,children:(0,$.tZ)(sI.Z,{size:12})}),(0,$.tZ)(K.G,{css:ma.arrow,children:(0,$.tZ)(cx.Z,{size:12})}),(0,$.tZ)(K.G,{css:ma.arrow,children:(0,$.tZ)(mi.Z,{size:12})})]})})}var mc=t(93158),mu=(0,ek.X)({root:[Q.l0.position.relative],circle:[Q.l0.top(-6),Q.l0.right(-6),Q.l0.minWidth(12),Q.l0.borderRadius(8),Q.l0.position.absolute,Q.l0.backgroundColor.backgroundHighest,Q.l0.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:Q.TV.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function ms(e){var n=e.count,t=(0,ut._)(e,["count"]);return(0,$.BX)(K.G,{css:mu.root,children:[(0,$.tZ)(uI.Z,(0,eE._)({},t)),(0,$.tZ)(K.G,{css:[mu.circle,mu.count],children:n})]})}function md(){return(0,$.BX)(K.G,{css:mu.root,children:[(0,$.tZ)(uI.Z,{}),(0,$.tZ)(K.G,{css:mu.circle,children:(0,$.tZ)(cx.Z,{size:6})})]})}function mp(e){var n=e.run;return{match:lI.pl,data:{type:"action",label:"Keep open",icon:(0,$.tZ)(mc.Z,{}),run:n}}}function mf(e){var n=e.paneId,t=e.paneGroupId,r=(0,rw.Se)(),i=lc(n),o=oB(i8),a=oB(oe),l=oB(i9),c=oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){var t=tR(e(rG),n);return t?t.paneGroup.panes.findIndex(function(e){return e===n}):null})},[n])),u=oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=tG(e(rG),t);return n?n.panes.length:null})},[t]));return(0,tt.Z)(function(){var e=r.getTitle(i),t=[{match:lI.pl,data:{type:"action",label:"Close "+e,icon:(0,$.tZ)(uI.Z,{}),run:function(){o(n)}}}];return u&&u>1&&(null!==c&&c<u-1&&t.push({match:lI.pl,data:{type:"action",label:"Close to the right",icon:(0,$.tZ)(md,{}),run:function(){a(n)}}}),t.push({match:lI.pl,data:{type:"action",label:"Close all other tabs",icon:(0,$.tZ)(ms,{count:u-1}),run:function(){l(n)}}})),t},[r,i,u,c,o,n,a,l])}var mh=function(e){return{data:e,match:lI.pl}},mv=t(27217),mg=new Map([["left",{label:"Move Left",icon:(0,$.tZ)(sI.Z,{})}],["right",{label:"Move Right",icon:(0,$.tZ)(cx.Z,{})}],["up",{label:"Move Up",icon:(0,$.tZ)(mi.Z,{})}],["down",{label:"Move Down",icon:(0,$.tZ)(mr.Z,{})}]]),mm=t(19379),my=new Map([["leftOf",{label:"Move Left",icon:(0,$.tZ)(sI.Z,{})}],["rightOf",{label:"Move Right",icon:(0,$.tZ)(cx.Z,{})}],["above",{label:"Move Up",icon:(0,$.tZ)(mi.Z,{})}],["below",{label:"Move Down",icon:(0,$.tZ)(mr.Z,{})}]]),mb=t(34294),mZ=t(10155),mx=t(128),mw=t(10126),m_=new Map([["leftOf",{commandId:cA.insertPaneGroupUp.id,label:"Insert Left",icon:(0,$.tZ)(a5.Z,{})}],["rightOf",{commandId:cA.insertPaneGroupRight.id,label:"Insert Right",icon:(0,$.tZ)(a3.Z,{})}],["above",{commandId:cA.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,$.tZ)(a7.Z,{})}],["below",{commandId:cA.insertPaneGroupDown.id,label:"Insert Down",icon:(0,$.tZ)(a4.Z,{})}]]),mC=t(66038),mk=function(e){return{data:e,match:lI.pl}};function mS(e){var n,t,r,i,o,a,l,c,u=e.paneId,s=(n=(0,rw.Se)(),t=(0,lA.OY)(),r=oB(oI),(0,q.useCallback)(function(){return{data:{type:"context",label:tu.cE,icon:(0,$.tZ)(lk.Z,{})},commands:function(){return t().map(function(e){return{match:lI.pl,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:u,pane:e})}}}})}}},[t,n,r,u])),d=(i=(0,eg.AA)(),o=(0,eg.lv)(),a=oB(oI),(0,q.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,$.tZ)(l_.Z,{})},commands:function(e){var t=e.searchQuery;return(0,lR.w)({paths:n,searchQuery:t,run:function(e){a({paneId:u,pane:{type:(0,rw.Dp)({path:e}),data:{path:e}}})}})}}},[i,a,u,o])),p=(l=(0,ev.Z)().fs,c=oB(oI),(0,tt.Z)(function(){return{match:lI.pl,data:{type:"context",label:"Files",icon:(0,$.tZ)(mc.Z,{})},commands:function(e){var n=e.searchQuery,t=e.active;return(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,lR.w)({paths:e.files,searchQuery:n,run:function(e){c({paneId:u,pane:{type:(0,rw.Dp)({path:e}),data:{path:e}}})}})]}})})()}}},[l,c,u]));return(0,tt.Z)(function(){return{match:lI.pl,data:{type:"context",label:"Change tab",icon:(0,$.tZ)(mC.Z,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[d(),p,s()]:[]}}},[d,s,p])}var mI=(0,et.iv)(Q.l0.center,{fontSize:Q.TV.fontSizeSmall,border:"1px solid",borderColor:Q.TV.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},Q.l0.borderRadius(8));function mR(e){return(0,$.tZ)(K.G,{css:mI,children:(0,$.tZ)(K.G,{css:{lineHeight:1},children:e.count})})}var mE=(0,ek.X)({overlay:[Q.l0.align.end,Q.l0.p(16),Q.l0.position.absolute,Q.l0.overflow("hidden"),Q.l0.zIndex(oF.M.overlay)],surface:[Q.l0.position.relative,Q.l0.borderRadius(8),Q.l0.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:Q.TV.outlineDefault,opacity:0},Q.l0.shadow(3)],innerSurface:[Q.l0.flex.growAndShrink(1),Q.l0.borderRadius(8)]}),mG=(0,ek.X)({root:[Q.l0.colWithGap(8),Q.l0.p(8),{borderTop:"1px solid",borderColor:Q.TV.outlineDimmer}],row:[Q.l0.rowWithGap(2),Q.l0.align.center,Q.l0.justify.spaceBetween],hint:[Q.l0.rowWithGap(4)]});function mP(){var e=(0,tn.zb)();return(0,$.BX)(K.G,{css:mG.root,children:[(0,$.BX)(K.G,{css:mG.row,children:[(0,$.tZ)(ew.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,$.BX)(K.G,{css:mG.hint,children:[(0,$.tZ)(te.bM,{keyCombo:"".concat(e),small:!0}),(0,$.tZ)(g9.ir,{text:(0,$.tZ)(ml,{duration:6e3,delay:6e3})})]})]}),(0,$.BX)(K.G,{css:mG.row,children:[(0,$.tZ)(ew.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,$.BX)(K.G,{css:mG.hint,children:[(0,$.tZ)(te.bM,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,$.tZ)(g9.ir,{text:(0,$.tZ)(ml,{duration:6e3,delay:1500})})]})]})]})}var mD=(0,q.memo)(function(){var e=function(){var e=oT(iJ),n=oT(aD);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:Q.TV.accentPrimaryStronger,borderRadius:Q.TV.borderRadius6,boxShadow:Q.TV.shadow3,transitionProperty:"transform, height, width",transitionDuration:nF.H.duration,transitionTimingFunction:nF.H.timingFunction};return(0,eE._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=oB(aO),t=(0,g8.Z)(n,[]);return(0,q.useEffect)(function(){var e=setTimeout(function(){(0,fg.A)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,$.tZ)(g6.MT,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,$.tZ)(K.G,{style:e,css:mE.overlay,children:(0,$.tZ)(nI.Tg,{innerRef:t,elevated:!0,css:mE.surface,children:(0,$.tZ)(nI.Tg,{css:mE.innerSurface,elevated:!0,children:(0,$.tZ)(mU,{})})})})})}),mT={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},mA={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},mB=Object.keys(mT),mU=(0,q.memo)(function(){var e=oB(aM),n=oB(aL),t=oB(aA),r=oT(iJ);mn({key:"Escape"},{run:function(){t()}}),mn(mB.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(mT[n.key])},enabled:!r}),mn(mB.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:mA[e.key]})},enabled:!r});var i=oT(aP);return i&&"sidebar"!==i.target?(0,$.tZ)(mO,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function mO(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A,B,U,O,M,L,X,W,N,z,F,V,H,q,Y,K,Q,et,er,ei,eo,ea,el,ec,eu,es,ed,ep,ef,eh,ev,eg,em,ey,eb,ex,ew,e_,eC,ek,eS,eI,eR,eP,eD,eT,eB,eU,eO=oT(iJ),eM=oB(aO),eL=oB(aA),eX=(eb=e.paneGroupId,o=(n={paneId:ex=e.paneId,paneGroupId:eb}).paneId,a=n.paneGroupId,l=(0,rw.Se)(),c=lc(o),u=(0,lT.Y6)(o),s=(t=lm(o),r=(0,uZ.Z)(t.isCommitted),i=oB(rk),r?void 0:mp({run:function(){return i(o)}})),d=mf({paneId:o,paneGroupId:a}),ew=(0,tt.Z)(function(){var e,n,t,r=l.getTitle(c),i=null!==(n=null==u?void 0:null===(e=u.actions)||void 0===e?void 0:e.map(mh))&&void 0!==n?n:[],o=null!==(t=null==u?void 0:u.commands)&&void 0!==t?t:[],a=(0,en._)(i).concat((0,en._)(o),[{data:{type:"group",key:"pane-close"},commands:function(){return[s].concat((0,en._)(d)).filter(Boolean)}}]);return{match:lI.pl,data:{type:"context",label:r,icon:(0,$.tZ)(l.Icon,{pane:c})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?a:[]}}},[c,u,l,s,d]),eC=(e_={paneId:ex,paneGroupId:eb}).paneGroupId,ek=e_.paneId,eS=oT((0,tt.Z)(function(){return(0,tr.cn)(function(e){var n=e(rd),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map(function(n){return[n,e(e(ra(n)).data)]}),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),eI=(0,rw.Se)(),eR=oB(ou),eP=oB(os),eD=mS({paneId:ek}),eT=(0,tt.Z)(function(){var e=eS.tiling,n=eS.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:lI.pl,data:{type:"action",label:"New tab",icon:(0,$.tZ)(lC.Z,{}),run:function(){eP({paneGroupId:eC,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[eD,{match:lI.pl,data:{type:"context",label:(0,eA.Z)("Tab",t),icon:(0,$.tZ)(mR,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,en._)(e).concat((0,en._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,j._)(e,2),t=n[0],r=n[1];return{match:lI.pl,data:{type:"action",label:eI.getTitle(r),icon:(0,$.tZ)(eI.Icon,{pane:r}),run:function(){eR({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[eD,r]},[eS,eI,eR,eP,eC,eD]),es=(p={paneGroupId:eb,paneId:ex}).paneGroupId,ep=(g=(f={paneId:ed=p.paneId,paneGroupId:es}).paneId,m=ly(f.paneGroupId),y=(0,uZ.Z)(m.isMaximized),b=(0,uZ.Z)(m.isFloating),Z=!y&&!b,x=(h=(0,mw.xF)(),v=oB(ot),(0,tt.Z)(function(){return(0,en._)(m_.entries()).map(function(e){var n,t,r=(0,j._)(e,2),i=r[0],o=r[1],a=o.commandId,l=o.label,c=o.icon;return{match:lI.pl,data:{label:l,icon:c,type:"action",keyboardShortcut:null!==(t=null===(n=h.get(a))||void 0===n?void 0:n.shortcut)&&void 0!==t?t:void 0,run:function(){v({placement:i,paneId:g,autoFocus:!0}),(0,eZ.j)(eZ.U3.WS_SPLIT_USED,{action:"opened",placement:i})}}}})},[h,v,g])),(0,tt.Z)(function(){return Z?[{match:lI.pl,data:{type:"context",label:"Add pane",icon:(0,$.tZ)(mx.Z,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?x:[]}}]:[]},[Z,x])),ef=(w=lm(ed),_=oT(iJ),C=(0,uZ.Z)(w.isFloating),k=!_&&!C,S=oB(ob),(0,tt.Z)(function(){var e=(0,en._)(my.entries()).map(function(e){var n=(0,j._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:lI.pl,data:{label:i,icon:o,type:"action",run:function(){S(t)}}}});return k?[{match:lI.pl,data:{type:"context",label:"Move tab",icon:(0,$.tZ)(mm.Z,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[k,S])),eh=(I=ly(es),R=(0,uZ.Z)(I.isMaximized),E=(0,uZ.Z)(I.isFloating),G=!R&&!E,P=oB(aL),(0,tt.Z)(function(){var e=(0,en._)(mg.entries()).map(function(e){var n=(0,j._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:lI.pl,data:{label:i,icon:o,type:"action",run:function(){P({direction:t})}}}});return G?[{match:lI.pl,data:{type:"context",label:"Move group",icon:(0,$.tZ)(mv.Z,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[G,P])),ev=(T=(D=lv()).maximizePaneGroup,A=D.restoreMaximizedPaneGroup,B=ly(es),U=(0,uZ.Z)(B.isMaximized),O=oT(it),M=(0,te.gf)(cA.toggleMaximizePaneGroup.id),(0,tt.Z)(function(){return U?O?[]:[{match:lI.pl,data:{type:"action",label:"Restore",icon:(0,$.tZ)(mZ.Z,{}),run:function(){return A()},keyboardShortcut:M}}]:[{match:lI.pl,data:{type:"action",label:"Maximize",icon:(0,$.tZ)(mb.Z,{}),run:function(){return T({paneGroupId:es})},keyboardShortcut:M}}]},[U,M,O,A,T,es])),eg=(L=oB(on),X=oB(aO),W=oT(it),N=(0,te.gf)(cA.removePaneGroup.id),(0,tt.Z)(function(){return W?[]:[{match:lI.pl,data:{type:"action",label:"Close",icon:(0,$.tZ)(uI.Z,{}),run:function(){X(),L({paneGroupId:es})},keyboardShortcut:N}}]},[X,L,W,N,es])),em=(F=(z={paneId:ed,paneGroupId:es}).paneId,V=z.paneGroupId,H=oB(aF),q=ly(V),Y=(0,uZ.Z)(q.isMaximized),K=(0,uZ.Z)(q.isFloating),Q=(0,te.gf)(cA.toggleFloatPaneGroup.id),(0,tt.Z)(function(){return Y?[]:[{match:lI.pl,data:{type:"action",label:K?"Unfloat":"Float",icon:K?(0,$.tZ)(a6.Z,{}):(0,$.tZ)(l8.Z,{}),keyboardShortcut:Q,run:function(){H(F)}}}]},[F,H,Q,K,Y])),ey=(er=ly((et={paneId:ed,paneGroupId:es}).paneGroupId),ei=lm(et.paneId),eo=lg(et.paneGroupId),ea=oU(rO),el=oB(ie),ec=(0,uZ.Z)(er.isMaximized),eu=(0,J.P5)({controlName:"flag-popout-pane"}),(0,tt.Z)(function(){return!eu||ec?[]:[{match:lI.pl,data:{type:"action",label:"New window",icon:(0,$.tZ)(gv.Z,{}),run:function(){var e=t2()(),n=ea().filter(function(e){var n=(0,j._)(e,1)[0];return eo.panes.current.includes(n)});el({popupId:e,state:{sidebarPercent:0,type:"saved",layout:{floating:[],tiling:{id:t2()(),type:"paneGroup",percent:100,activeIndex:eo.activeIndex.current,panes:eo.panes.current}},data:n.reduce(function(e,n){var t=(0,j._)(n,2),r=t[0],i=t[1];return(0,eG._)((0,eE._)({},e),(0,ee._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(ei.size.current.height,"px,width=").concat(ei.size.current.width,"px")),(0,eZ.j)(eZ.U3.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,j._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,j._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,j._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,j._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[eu,ec,eo.activeIndex,eo.panes,ea,el,ei.size])),eB=(0,tt.Z)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,en._)(ep).concat((0,en._)(ef),(0,en._)(eh),(0,en._)(ev),(0,en._)(em),(0,en._)(ey),(0,en._)(eg))}}]},[ep,ef,eh,ev,em,ey,eg]),(0,tt.Z)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[ew].concat((0,en._)(eT),(0,en._)(eB))}}},[ew,eT,eB])),eW=(0,tQ.Gn)("fontSize").preferences;return(0,$.tZ)(n9.X,{iconBreadcrumbs:!0,command:eX,onAction:function(){return eM()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),eL();return}(0,dE.jh)(e)&&e.preventDefault()},footer:eO?null:(0,$.tZ)(mP,{}),fontSize:null!==(eU=eW.fontSize)&&void 0!==eU?eU:14,compact:!0,minimalInputBar:!0})}var mM={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,tn.l2)({cmdOrCtrl:!0,key:"j"})};function mL(){var e=oB(aB),n=oT(aU);return((0,te.Il)(function(){return[mM.id,function(){return e()}]},[e]),n)?(0,$.tZ)(mD,{}):null}var mX=t(93696);function mW(){var e=(0,ev.Z)().presence,n=(0,j._)((0,q.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,q.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function mN(){var e=(0,eB._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return mN=function(){return e},e}var mz={},mF=(0,eU.Ps)(mN());function mV(e){var n,t,r=(n={variables:{userIds:e.slice(0,p1.I)},skip:0===e.length},t=(0,eE._)({},mz,n),eL.a(mF,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var mH={root:(0,et.iv)([Q.l0.rowWithGap(4),Q.l0.align.center]),text:(0,et.iv)([Q.l0.flex.shrink(1),Q.l0.align.center]),username:(0,et.iv)([Q.l0.flex.shrink(2),Q.l0.maxWidth(140),Q.l0.truncate])};function mj(){var e=mW();return 0===e.length?null:1===e.length?(0,$.tZ)(m$,{user:e[0]}):(0,$.BX)(ew.xv,{variant:"small",color:"dimmest",css:mH.text,multiline:!1,children:[e.length," users are observing you"]})}function m$(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=mV([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,$.BX)(K.G,{css:mH.root,children:[(0,$.tZ)(e7.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,$.tZ)(ew.xv,{variant:"small",color:"dimmer",css:mH.username,multiline:!1,children:r}),(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",css:mH.text,multiline:!1,children:"is observing you"})]})}var mq={root:(0,et.iv)([Q.l0.rowWithGap(4),Q.l0.align.center]),text:(0,et.iv)([Q.l0.flex.shrink(1),Q.l0.align.center]),username:(0,et.iv)([Q.l0.flex.shrink(2),Q.l0.maxWidth(140),Q.l0.truncate])};function mY(e){var n=e.id,t=e.username,r=e.color,i=mV([n]),o=(0,ev.Z)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,$.BX)(K.G,{css:mq.root,children:[(0,$.tZ)(e7.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,$.tZ)(ew.xv,{css:mq.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,$.tZ)(ew.xv,{css:mq.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,$.tZ)(cF.hU,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,$.tZ)(uI.Z,{})})]})}var mJ=(0,ek.X)({root:[Q.l0.px(4),Q.l0.rowWithGap(8),Q.l0.height("100%"),Q.l0.border({color:Q.TV.outlineDimmest,direction:"bottom"}),Q.l0.highRes({borderBottomWidth:.5}),Q.l0.align.center]});function mK(e){var n,t,r,i=e.paneId,o=lc(i),a=(n=(0,mX.Z)(),t=lu({paneId:i}),n&&t?n:null),l=(r=mW(),lu({paneId:i})&&r.length>0?r:null),c=(0,rw.Ur)(o)?o.data.path:null,u=null;return(a&&(u=(0,$.tZ)(mY,{id:a.id,username:a.username,color:a.color})),null!==u||l)?(0,$.BX)(K.G,{css:mJ.root,children:[l&&c?(0,$.tZ)(mj,{}):null,u]}):null}var mQ=(0,ek.X)({handle:[Q.l0.flex.growAndShrink(1),Q.l0.minWidth(16),Q.l0.height("100%"),{borderBottom:"1px solid ".concat(Q.TV.outlineDimmest)},Q.l0.highRes({borderBottomWidth:.5})]});function m0(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=lf({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=lv().toggleMaximizedPaneGroup,l=ly(n),c=(0,uZ.Z)(l.isMaximized),u=ls();return o?(0,$.tZ)(K.G,{onDoubleClick:function(){a({paneGroupId:n})},title:c?"Double click to restore.":"Double click to maximize. Drag to move.",css:mQ.handle,style:{cursor:c?void 0:i?"grabbing":"grab"},onPointerDown:function(e){u(t),!c&&"button"in e&&0===e.button&&dg(e,{start:o.start,move:o.update,end:o.end})}}):null}var m1=(0,et.iv)([Q.l0.flex.row,Q.l0.width("100%"),Q.l0.height("100%")]),m2=(0,et.iv)([Q.l0.pl(6),Q.l0.rowWithGap(6),Q.l0.height("100%"),Q.l0.align.center,Q.l0.border({direction:"bottom",color:Q.TV.outlineDimmest}),Q.l0.highRes({borderBottomWidth:.5})]),m4=(0,et.iv)([Q.l0.fontSize(13)]);function m5(e){var n=e.headerId,t=e.paneId,r=lc(t),i=(0,rw.Se)(),o=i.getTitle(r),a=i.Icon({pane:r,size:16});return(0,$.BX)(K.G,{css:m1,children:[(0,$.BX)(K.G,{css:m2,children:[a,(0,$.tZ)(ew.xv,{css:m4,children:o})]}),(0,$.tZ)(m0,{paneGroupId:n,activeTabPaneId:t})]})}var m3=t(33501),m7=t(90831),m6=t(79484),m8=t(4322),m9=(0,tr.cn)(null),ye=function(){return(0,uA.Hg)(m9)},yn=function(){var e=(0,uA.$X)(m9),n=ye(),t=(0,q.useCallback)(function(n){return new Promise(function(t){e({paths:n,onCallback:function(n){t(n),e(null)}})})},[e]);return(0,q.useMemo)(function(){return{isShown:null!==n,show:t}},[n,t])},yt=(0,oz.$)(["fontStyle","iconOpacity","tabTitleContainerPaddingRight","closeButtonOpacity","unsavedChanges","closeIconDisplay"]),yr=yt.cssVars,yi=yt.styleTokens,yo=K.K.div,ya=(0,et.iv)([Q.l0.display.inlineFlex,Q.l0.height("100%"),Q.l0.flex.row,Q.l0.align.center,Q.l0.position.relative,Q.l0.minWidth(Q.TV.space96),{userSelect:"none","& > span":[{"& > *":Q.l0.height("100%")},Q.l0.display.flex,Q.l0.flex.grow(1),Q.l0.flex.row,Q.l0.align.center,Q.l0.height("100%")]}]),yl=(0,et.iv)([Q.l0.position.relative,Q.l0.cursor.pointer,Q.l0.align.center,Q.l0.rowWithGap(6),Q.l0.px(6),Q.l0.focusRing,Q.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),yc=(0,ek.X)({rootDragging:[Q.l0.width(0),Q.l0.visibility.hidden],root:[(0,ee._)({":not(:last-of-type)":[Q.l0.border({direction:"right",color:Q.TV.outlineDimmest}),Q.l0.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},Q.l0.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},Q.l0.highRes({width:"calc(100% + 0.5px)"})]},Q.BC.canHover,[(P={},(0,ee._)(P,yr.closeButtonOpacity,0),(0,ee._)(P,"&:hover",(0,ee._)({},yr.closeButtonOpacity,1)),P)])],notificationDot:[Q.l0.top(3),Q.l0.right(0)],tabBaseDefault:[ya,Q.l0.color.foregroundDimmer,{backgroundColor:"transparent"}],tabBaseActive:[ya,Q.l0.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+nq.vb.surfaceBackground,"data-pane-tab-primary-button":[Q.l0.transition.none,Q.l0.hover({boxShadow:"0 1px 0 0 "+nq.vb.interactiveBackground})]}],tabTitleContainer:[Q.l0.rowWithGap(8),Q.l0.align.baseline,Q.l0.position.relative,{paddingRight:yi.tabTitleContainerPaddingRight}],tabTitle:[Q.l0.truncate,Q.l0.maxWidth(180),Q.l0.display.inlineBlock,Q.l0.fontSize(13),{fontStyle:yi.fontStyle,"::after":{display:"block",content:"attr(title)",height:"0",fontStyle:"normal",color:"transparent",overflow:"hidden",visibility:"hidden"}}],uniquePath:[Q.l0.truncate,Q.l0.maxWidth(180),Q.l0.display.inlineBlock,Q.l0.fontSize(12),Q.l0.color.foregroundDimmest,{fontStyle:yi.fontStyle}],tabIcon:[Q.l0.width(16),Q.l0.height(16),Q.l0.position.relative,{opacity:yi.iconOpacity}],button:[Q.l0.position.relative,Q.l0.cursor.pointer,Q.l0.align.center,Q.l0.rowWithGap(6),Q.l0.px(6),Q.l0.focusRing,nq.gU.listItem,Q.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}],buttonDefault:[nq.gU.listItem,yl],buttonActive:[yl],activeLine:[Q.l0.height(1),Q.l0.top(0),Q.l0.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:Q.TV.accentPrimaryDefault},Q.l0.highRes({left:-.5,width:"calc(100% + 1px)"})],closeWrapper:[Q.l0.height("100%"),{button:[Q.l0.width(20),Q.l0.height("100%"),Q.l0.borderRadius(0),Q.l0.color.foregroundDimmer,(A={},(0,ee._)(A,Q.BC.canHover,[(T={},(0,ee._)(T,yr.unsavedChanges,"block"),(0,ee._)(T,yr.closeIconDisplay,"none"),(0,ee._)(T,"&:hover",(D={},(0,ee._)(D,yr.unsavedChanges,"none"),(0,ee._)(D,yr.closeIconDisplay,"block"),D)),T)]),(0,ee._)(A,"paddingBottom",3),A)]}],unsavedChangesContainer:[{display:yi.unsavedChanges}],closeIconContainer:[{display:yi.closeIconDisplay}],displayNone:[Q.l0.display.none],displayBlock:[Q.l0.display.block],unsavedChangesIndicator:[Q.l0.width(8),Q.l0.height(8),Q.l0.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]}),yu=(0,q.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d=e.paneId,p=e.paneGroupId,f=e.isActive,h=e.selectTab,v=e.removePane,g=e.openTool,m=e.dragGroup,y=(0,cT.Z)(),b=y.hideMessage,Z=y.showNotice,x=(0,ev.Z)().fs,w=yn().show,_=lm(d),C=(0,uZ.Z)(_.isCommitted),k=oB(rk),S=lc(d),I=(0,rw.Se)(),R=I.getTitle(S),E=I.Icon({pane:S,size:16}),G=(0,uZ.Z)(_.isActivePane),P=(0,nE.b2)({paneType:S.type}),D="codeEditor"===S.type,T="ghostwriterChat"===S.type,A=(0,m8.Z)(x,D?S.data.path:null),B=(0,eg.t4)((0,rw.Ur)(S)?S.data.path:null),U=void 0;(0,rw.Ur)(S)&&S.data.path&&(U=S.data.path);var O=(0,dm.T)(),M=(0,q.useRef)(null),L=(0,j._)((0,f2.c)({type:fw.z.Pane,item:function(){var e,n=(null===(e=M.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:fw.z.Pane,paneId:d,width:n}},collect:function(e){return{isDragging:e.isDragging()}}}),2),X=L[0].isDragging,W=L[1],N=oB(oZ);(0,q.useEffect)(function(){return N(X)},[N,X]);var z=lf({paneGroupId:p}).dnd,F=z&&m?function(e){1!==e.button&&dg(e,{start:z.start,move:z.update,end:z.end})}:void 0;(0,q.useEffect)(function(){f&&M.current&&(0,m7.Z)(M.current,{behavior:O?"auto":"smooth",scrollMode:"if-needed"},!0)},[f,O,M]);var V=(t=(n={paneId:d,paneGroupId:p}).paneId,r=n.paneGroupId,i=(0,lT.dr)(),o=oD(),a=(0,q.useCallback)(function(e){var n=o.get(ra(e));return{pane:o.get(n.data),isCommitted:n.isCommitted}},[o]),l=oB(rk),c=mS({paneId:t}),u=mf({paneId:t,paneGroupId:r}),s=(0,rw.Se)(),(0,q.useCallback)(function(){var e,n,r,o=a(t),d=o.isCommitted,p=o.pane,f=i(t),h=null!==(n=null==f?void 0:null===(e=f.actions)||void 0===e?void 0:e.map(mk))&&void 0!==n?n:[],v=null!==(r=null==f?void 0:f.commands)&&void 0!==r?r:[],g=d?mp({run:function(){return l(t)}}):null;return{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(s.Icon,{pane:p})},commands:function(){return(0,en._)(h).concat((0,en._)(v),[{data:{type:"group",key:"secondary"},commands:function(){return[g,c].concat((0,en._)(u)).filter(Boolean)}}])}}},[i,s,a,l,t,c,u])),H=(0,hd.av)().onContextMenu,Y=(0,q.useRef)(!1),J=(0,q.useMemo)(function(){if(f&&!C)return function(){Y.current&&k(d)}},[k,f,C,d]),K=(0,nE.Wl)(),Q=(0,nE.ho)(),ee=function(e){if(void 0===e?sE.n_({category:"pane",message:"Tab closed: "+S.type}):sE.n_({category:"pane",message:"Tab closed: "+S.type,data:{reason:e}}),(0,eZ.j)(eZ.U3.WS_TAB_CLOSED,{paneType:S.type}),v(d),T&&K){Q(!1),(0,eZ.j)(eZ.U3.AI_PANE_IN_DEFAULT_LAYOUT_DISMISSED);var n=Z((0,$.tZ)(m6.N2,{onPreferencesClick:function(){g({pane:{type:"preferences"}}),b(n)}}),6e3)}},et=function(e){"confirm"===e?ee("save changes"):"discard"===e&&ee("discard changes")};return(0,$.tZ)($.HY,{children:(0,$.tZ)(yo,{ref:M,css:X?yc.rootDragging:yc.root,onAuxClick:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),D&&A?S.data.path&&w([S.data.path]).then(et):ee("middle click"))},onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation())},children:(0,$.tZ)(yf,{innerRef:F?void 0:W,hasUnsavedChanges:A,uniquePath:B,title:R,icon:"commands"!==S.type?E:void 0,isActive:f,isActivePane:G,italicizeTitle:!C&&"commands"!==S.type,tooltip:U,paneId:d,indicatorColor:P,onClick:J,onContextMenu:function(e){return H(e,{command:V()})},onMouseDown:function(){f?Y.current=!0:(sE.n_({category:"pane",message:"Tab clicked: "+S.type}),(0,eZ.j)(eZ.U3.WS_TAB_OPENED,{paneType:S.type}),h(d),Y.current=!1)},onPointerDown:F,onClose:function(){D&&A?S.data.path&&w([S.data.path]).then(et):ee()}})})})}),ys=K.K.button,yd=function(){return(0,$.tZ)(K.G,{css:yc.unsavedChangesIndicator})};function yp(e){var n=e.onClick,t=e.tabIndex,r=e.hasUnsavedChanges,i=r?yc.unsavedChangesContainer:yc.displayNone,o=r?yc.closeIconContainer:yc.displayBlock;return(0,$.tZ)(cF.hU,{onClick:n,alt:r?"Close tab (unsaved changes)":"Close tab",tabIndex:t,size:12,children:(0,$.BX)($.HY,{children:[(0,$.tZ)(K.G,{css:i,children:(0,$.tZ)(yd,{})}),(0,$.tZ)(K.G,{css:o,children:(0,$.tZ)(uI.Z,{})})]})})}function yf(e){var n=e.title,t=e.uniquePath,r=e.hasUnsavedChanges,i=e.onClick,o=e.onContextMenu,a=e.onClose,l=e.isActive,c=e.isActivePane,u=e.italicizeTitle,s=e.innerRef,d=e.icon,p=e.onMouseDown,f=e.onPointerDown,h=e.paneId,v=e.indicatorColor,g=e.tooltip,m=(0,q.useRef)(null),y=(0,j._)((0,fm.XZ)(m,!1),4),b=y[0],Z=y[1],x=y[2],w=y[3];return(0,fm.Ym)(Z,m),(0,$.BX)(nI.Tg,{elevated:l,innerRef:s,css:l?yc.tabBaseActive:yc.tabBaseDefault,children:[(0,$.tZ)(ed.u,{isDisabled:!g,tooltip:g,maxWidth:600,delay:"long",closeDelay:"none",children:(0,$.BX)(ys,{role:"tab",ref:m,tabIndex:b,onKeyDown:x,onMouseDown:p,onClick:function(e){w(),null==i||i(e)},onPointerDown:f,onContextMenu:o,css:l?yc.buttonActive:yc.buttonDefault,"aria-selected":l,"aria-controls":h,id:"tab-".concat(h),"data-pane-tab-primary-button":!0,children:[d?(0,$.tZ)(K.G,{style:(0,ee._)({},yr.iconOpacity,l?"1":"0.6"),css:yc.tabIcon,children:d}):null,(0,$.BX)(K.G,{style:(0,ee._)({},yr.tabTitleContainerPaddingRight,v?"12px":"0px"),css:yc.tabTitleContainer,children:[(0,$.tZ)(ew.xv,{multiline:!1,css:yc.tabTitle,title:n,style:(0,ee._)({},yr.fontStyle,u?"italic":"inherit"),children:n}),t?(0,$.tZ)(ew.xv,{multiline:!1,css:yc.uniquePath,style:(0,ee._)({},yr.fontStyle,u?"italic":"inherit"),children:t}):null,v?(0,$.tZ)(fN.B,{css:yc.notificationDot,color:v}):null]})]})}),(0,$.tZ)(ym,{paneId:h,isActive:l}),c?(0,$.tZ)(K.G,{css:yc.activeLine,"data-active-pane-line":!0}):null,(0,$.tZ)(K.G,{style:{opacity:l?1:yi.closeButtonOpacity},css:yc.closeWrapper,children:(0,$.tZ)(yp,{hasUnsavedChanges:r,onClick:a,tabIndex:Z?0:-1})})]})}var yh=(0,ek.X)({containerOuter:{display:"grid",transition:"grid-template-columns 120ms ease-out"}}),yv=(0,ek.X)({containerOuterHidden:[yh.containerOuter,{gridTemplateColumns:"0fr",visibility:"hidden"}],containerOuterVisible:[yh.containerOuter,{gridTemplateColumns:"1fr",visibility:"visible",height:"100%"}],root:[Q.l0.flex.row,Q.l0.overflow("hidden"),{button:[Q.l0.height("100%"),Q.l0.center,Q.l0.borderRadius(0),Q.l0.width(20),Q.l0.color.foregroundDimmer,Q.l0.hover([Q.l0.color.foregroundDefault])]}]});function yg(e){var n=e.icon,t=e.run,r=e.label,i=e.dataCy;return(0,$.tZ)(cF.hU,{onClick:function(){return t(null)},dataCy:i,alt:r,size:12,children:n})}function ym(e){var n=e.paneId,t=e.isActive,r=(0,lT.Y6)(n),i=null==r?void 0:r.actions;return(null==i?void 0:i.length)?(0,$.tZ)(K.G,{css:t?yv.containerOuterVisible:yv.containerOuterHidden,children:(0,$.tZ)(K.G,{css:yv.root,children:i.map(function(e){var n=e.label,t=(0,ut._)(e,["label"]);return(0,$.tZ)(yg,(0,eE._)({label:n},t),n)})})}):null}var yy=(0,ek.X)({container:[Q.l0.flex.row,Q.l0.align.center,Q.l0.height("100%"),Q.l0.width("100%")],newTabContainer:[Q.l0.height("100%"),Q.l0.pl(4),Q.l0.justify.center,Q.l0.align.center,Q.l0.border({direction:"bottom",color:Q.TV.outlineDimmest}),Q.l0.border({direction:"left",color:Q.TV.outlineDimmest}),{"& > button":[Q.l0.height(24),Q.l0.width(24)]},Q.l0.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],rightActionsContainer:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.pr(4),Q.l0.height(31),Q.l0.highRes(Q.l0.highRes(Q.l0.height(31.5)))],moreActions:[Q.l0.color.foregroundDimmest],tabScrollAreaRoot:[Q.l0.flex.row,Q.l0.align.center,Q.l0.height("100%"),Q.l0.overflowX("hidden"),Q.l0.overflowY("hidden"),{"--scrollbar-size":"6px"}],tabScrollAreaViewport:[Q.l0.height("100%"),{"& > div":{height:"100%",width:"max-content",display:"block !important"}}],tabScrollAreaScrollbar:[Q.l0.display.flex,Q.l0.backgroundColor.backgroundOverlay,Q.l0.height("var(--scrollbar-size)"),Q.l0.flex.column,{touchAction:"none",transition:"background 160ms ease-out",userSelect:"none","&:hover":{backgroundColor:Q.TV.backgroundOverlay}}],tabScrollAreaThumb:[Q.l0.flex.grow(1),Q.l0.backgroundColor.outlineDimmest,Q.l0.borderRadius(4),Q.l0.position.relative,{"&::before":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:"44px",minHeight:"44px"}}],tabContainer:[Q.l0.flex.row,Q.l0.height("100%")],tabPreviewWrap:[Q.l0.p(4)],tabPreview:[Q.l0.borderRadius(4),Q.l0.height("100%"),Q.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(Q.TV.accentPrimaryDimmer)}]});function yb(e){var n,t,r,i,o,a,l=e.headerId,c=oB(oh),u=oB(os),s=oB(oy),d=oB(i8),p=ld(),f=(0,q.useRef)(null),h=lg(l),v=(0,uZ.Z)(h.activeIndex),g=(0,uZ.Z)(h.activeTabPaneId),m=(0,uZ.Z)(h.panes),y=(0,q.useCallback)(function(e){if(f.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=f.current.scrollLeft,r=f.current.scrollWidth;f.current.scrollLeft=Math.max(0,Math.min(r,t+n))}},[]),b=(0,j._)((0,gO.L)({accept:[op.Tv.File,fw.z.Pane,fw.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&C({item:e,panes:m,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==k?void 0:k.index)!==null?null==k?void 0:k.index:m.length;if("nodes"===e.type){var r=(0,rw.ME)(e.nodes);r.length>0&&u({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===fw.z.NewPane){u({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});return}if("paneId"in e){var i=m.includes(e.paneId)?m.length-1:m.length;s({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:l})}}}}),2),Z=b[0],x=b[1],w=(n=({isOver:Z.isOver}).isOver,r=(t=(0,j._)((0,q.useState)(null),2))[0],i=t[1],o=(0,q.useRef)(null),a=(0,q.useRef)([]),(0,q.useEffect)(function(){if(!n){a.current=[],i(null);return}o.current&&(a.current=(0,en._)(o.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:o,hover:(0,q.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===fw.z.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+o/2}).findIndex(function(n){return n>e.sourceClientOffset}),c=-1===r?e.panes.length:e.panes.length-1;i({index:-1===l?c:Math.min(l,c),paneId:t,width:o})}},[]),dropState:r}),_=w.tabContainerRef,C=w.hover,k=w.dropState,S=k?k.index:null;if((null==k?void 0:k.paneId)&&null!==S){var I=m.indexOf(k.paneId);I>-1&&I<S&&S++}var R=k&&null!==S?(0,en._)(m.slice(0,S)).concat([k],(0,en._)(m.slice(S))):m;return(0,$.BX)(K.G,{css:yy.container,innerRef:x,role:"tablist",children:[(0,$.BX)(fm.uP,{children:[(0,$.BX)(m3.fC,{css:yy.tabScrollAreaRoot,onWheel:y,children:[(0,$.tZ)(m3.l_,{css:yy.tabScrollAreaViewport,ref:f,children:(0,$.tZ)(K.G,{innerRef:_,css:yy.tabContainer,children:R.map(function(e,n){return"string"!=typeof e?(0,$.tZ)(K.G,{css:yy.tabPreviewWrap,children:(0,$.tZ)(K.G,{style:{width:e.width},css:yy.tabPreview})},"preview"):(0,$.tZ)(yu,{dragGroup:1===m.length,paneId:e,paneGroupId:l,isActive:v===n,selectTab:c,removePane:d,openTool:p},e)})})}),(0,$.tZ)(m3.LW,{css:yy.tabScrollAreaScrollbar,orientation:"horizontal",children:(0,$.tZ)(m3.bU,{css:yy.tabScrollAreaThumb})})]}),(0,$.tZ)(K.G,{css:yy.newTabContainer,children:(0,$.tZ)(cF.hU,{alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){u({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,$.tZ)(lC.Z,{})})})]}),(0,$.tZ)(m0,{paneGroupId:l,activeTabPaneId:g})]})}var yZ=t(9220);function yx(e){var n=e.headerId,t=e.isMaximized,r=lv(),i=r.maximizePaneGroup,o=r.restoreMaximizedPaneGroup;return t?(0,$.tZ)(cF.hU,{alt:"Restore pane",onClick:o,children:(0,$.tZ)(mZ.Z,{color:Q.TV.foregroundDimmest})}):(0,$.tZ)(cF.hU,{alt:"Maximize pane",onClick:function(){return i({paneGroupId:n})},children:(0,$.tZ)(mb.Z,{color:Q.TV.foregroundDimmest})})}var yw=(0,ek.X)({left:[Q.l0.flex.row,Q.l0.flex.growAndShrink(1),Q.l0.align.center,Q.l0.height("100%"),{border:"none"}],right:[Q.l0.flex.row,Q.l0.border({direction:"bottom",color:Q.TV.outlineDimmest}),Q.l0.highRes({borderBottomWidth:.5})],rightActionsContainer:[Q.l0.rowWithGap(4),Q.l0.align.center,Q.l0.pr(4),Q.l0.height(31),Q.l0.highRes(Q.l0.highRes(Q.l0.height(31.5)))],moreActions:[Q.l0.color.foregroundDimmest]}),y_=(0,q.memo)(function(e){var n=e.headerId,t=ly(n),r=(0,uZ.Z)(t.isMaximized),i=(0,uZ.Z)(t.isModal),o=(0,uZ.Z)(t.isFloating),a=(0,lU.$g)(),l=oB(aF),c=oB(i8),u=lg(n),s=(0,uZ.Z)(u.activeTabPaneId),d=(0,uZ.Z)(u.panes),p=d.length>1,f=oB(aT),h=(0,te.gf)(mM.id),v=(0,$.tZ)(cF.hU,{css:yw.moreActions,onClick:function(){return f(s)},alt:"Pane actions",tooltipBehavior:void 0===h?"hidden":void 0,tooltipPlacement:"left",tooltipContents:h?(0,$.tZ)(te.bM,{fontSize:12,keyCombo:h}):null,children:(0,$.tZ)(dj.Z,{color:Q.TV.foregroundDimmest})}),g=(0,$.tZ)(cF.hU,{alt:"Close pane",onClick:function(){return d.forEach(c)},children:(0,$.tZ)(uI.Z,{color:Q.TV.foregroundDimmest})});return(0,$.BX)($.HY,{children:[(0,$.tZ)(K.G,{css:yw.left,children:i&&!p?(0,$.tZ)(m5,{headerId:n,paneId:s}):(0,$.tZ)(yb,{headerId:n})}),(0,$.tZ)(mK,{paneId:s}),(0,$.tZ)(K.G,{css:yw.right,children:(0,$.BX)(K.G,{css:yw.rightActionsContainer,children:[o?(0,$.tZ)(cF.hU,{alt:"Unfloat",onClick:function(){return l(s)},children:(0,$.tZ)(a6.Z,{color:Q.TV.foregroundDimmest})}):null,a?null:(0,$.tZ)(yx,{isMaximized:r,headerId:n}),i?g:v]})})]})}),yC=(0,oz.$)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration"]),yk=yC.cssVars,yS=yC.styleTokens,yI=(0,et.iv)([Q.l0.borderRadius(4,4,0,0),Q.l0.position.absolute,Q.l0.flex.row,Q.l0.align.center],{transformOrigin:"".concat(yS.transformOriginX," bottom"),top:yS.top,left:yS.left,width:yS.width,height:yS.height,transform:"scale(".concat(yS.scale,")"),transitionDuration:yS.transitionDuration,transitionProperty:"top, left, width, height",transitionTimingFunction:"ease-out",backgroundColor:yZ.o}),yR=(0,q.memo)(function(e){var n=e.headerId,t=(0,dm.T)(),r=lg(n),i=(0,uZ.Z)(r.activeTabPaneId),o=ly(n),a=(0,uZ.Z)(o.isFloating),l=(0,uZ.Z)(o.isModal),c=(0,q.useRef)(null);return(0,oN.j)(c,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ee._)(n,yk.width,t+"px"),(0,ee._)(n,yk.height,r+"px"),n}),(0,oN.j)(c,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,ee._)(n,yk.left,Math.round(t)+"px"),(0,ee._)(n,yk.top,Math.round(r)+"px"),n}),(0,oN.j)(c,o.scale,function(e){return(0,ee._)({},yk.scale,e.toString())}),(0,oN.j)(c,o.transformOriginX,function(e){return(0,ee._)({},yk.transformOriginX,e)}),(0,oN.j)(c,o.animate,function(e){return(0,ee._)({},yk.transitionDuration,e&&t?"140ms":"0ms")}),(0,oN.j)(c,o.zIndex,function(e){return{"z-index":e.toString()}}),(0,$.BX)(nI.Tg,{innerRef:c,css:yI,children:[(0,$.tZ)(y_,{headerId:n}),a&&!l?(0,$.tZ)(gK,{paneId:i}):null]})}),yE=t(38031),yG=t(94988),yP=t(8056),yD=t(59266),yT=t(42354),yA=t(41844),yB=t(18454),yU=t(70108),yO=[vn,l$,mM].concat((0,en._)(cB),(0,en._)(yD.Ic),(0,en._)(yA.bO),[yB.s,yT.x,yU.CH]);function yM(e){var n=(0,yP.O)();return(0,$.tZ)(te.GO,{commands:yO,onChange:n,keybindings:e.keybindings,children:e.children})}var yL=t(97305),yX=t(50013),yW=t(60166),yN=t(78918);function yz(e){var n=e.children,t=(0,tt.Z)(function(){return new yE.z(r8.Z.get("stateCache","object"))},[]);return(0,$.tZ)(yE.d.Provider,{value:t,children:n})}function yF(e){var n,t,r,i,o=e.ui,a=e.repl,l=e.services,c=e.userKeybindings,u=e.children,s=a.id,d=a.language,p=a.config.isExtension,f=null===(r=a.source)||void 0===r?void 0:null===(t=r.release)||void 0===t?void 0:null===(n=t.repl)||void 0===n?void 0:n.id,h=(0,tt.Z)(function(){return{id:s,language:d,replConfigIsExtension:p,sourceReplId:f}},[s,d,p,f]);return(0,$.tZ)(yM,{keybindings:c,children:(0,$.tZ)(rw.kz,{value:o,children:(0,$.tZ)(yz,{children:(0,$.tZ)(yL.Z.Provider,{value:l,children:(0,$.tZ)(yX.Z.Provider,{value:h,children:(0,$.tZ)(yG.$,{replId:a.id,container:l.container,fs:l.fs,dotReplit:l.dotReplit,ports:l.ports,secrets:l.secrets,children:(0,$.tZ)(l1.b,{repl:a,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:(null===(i=a.owner)||void 0===i?void 0:i.__typename)==="Team"?a.owner.id:void 0,children:(0,$.tZ)(yN.Wv,{children:(0,$.tZ)(yW.Z,{children:u})})})})})})})})})}var yV=t(97891),yH=t(14423);function yj(){var e=(0,j._)((0,q.useState)(!1),2),n=e[0],t=e[1],r=(0,j._)((0,q.useState)(null),2),i=r[0],o=r[1],a=oB(og),l=lh(),c=(0,ev.Z)().replspaceApi;return((0,q.useEffect)(function(){if(n)return c.onConfirmSendToken(function(e){e&&e(!0,!1)})},[n,c]),(0,yH.FL)({insertConfigPlugin:function(){return a({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:t,openFile:l,onUpdateState:o}),n)?(0,$.tZ)(yV.Z,{reason:i?yH.$q[i]:"Importing..."}):null}var y$=(0,q.memo)(function(){var e=oT(rW),n=(0,mX.Z)();return e&&n?(0,$.tZ)("div",{css:[Q.l0.position.absolute,Q.l0.width(e.width),Q.l0.height(e.height),Q.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}),yq=t(13080),yY=t(96214),yJ=t(80374),yK=t(46074),yQ=t(31321);function y0(){var e=oB(ow),n=(0,yQ.Z)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,c=n.setSelectedFile,u=n.reviewingPrompt,s=n.onChoice,d=n.local,p=n.remote,f=[Q.l0.minHeight("7em"),Q.l0.maxHeight("50vh"),Q.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,$.tZ)(nk.u,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(24)],children:[(0,$.tZ)(ew.h4,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,$.BX)(ew.xv,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,$.BX)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,$.tZ)(yJ.Z,{}):(0,$.BX)($.HY,{children:[a.length?(0,$.tZ)(yY.P,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){c(e.path)}}):null,i?(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(16),Q.l0.justify.start,Q.l0.align.center,Q.l0.pt(16),Q.l0.p(8),Q.l0.backgroundColor.redDimmest,Q.l0.font.code],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,$.BX)(ew.xv,{multiline:!1,children:["Divergence type: ",null==u?void 0:u.case]})]}):null,(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,$.tZ)(nI.Tg,{elevated:!0,css:[Q.l0.flex.growAndShrink(1),Q.l0.py(8)],children:(0,$.tZ)(K.G,{css:f,children:(0,$.tZ)(yK.q,{diffViewer:d})})}),(0,$.BX)(K.G,{css:[Q.l0.pt(16)],children:[(0,$.tZ)(ew.xv,{css:[Q.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,$.tZ)(e6.zx,{onClick:function(){s("local")},text:"Reset to Mine"})]})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,$.tZ)(nI.Tg,{elevated:!0,css:[Q.l0.flex.growAndShrink(1),Q.l0.py(8)],children:(0,$.tZ)(K.G,{css:f,children:(0,$.tZ)(yK.q,{diffViewer:p})})}),(0,$.BX)(K.G,{css:[Q.l0.pt(16),Q.l0.justify.end],children:[(0,$.tZ)(ew.xv,{css:[Q.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,$.tZ)(e6.zx,{onClick:function(){s("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}function y1(){var e=(0,nE.ev)(),n=(0,nE._o)(),t=(0,ev.Z)().fs,r=function(){n(null)};return(0,$.tZ)(nk.u,{isOpen:!!e,onRequestClose:r,children:e?(0,$.tZ)(sY.Z,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var y2=t(68295);function y4(){var e=(0,eB._)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return y4=function(){return e},e}function y5(){var e=(0,eB._)(["\n  query ManageAccountStorageUtilizationCurrentUser(\n    $input: UsageOverviewUsageByReplInput\n  ) {\n    currentUser {\n      ...UsageBreakdownCurrentUser\n      usageInterval {\n        ... on UsageInterval {\n          __typename\n          resources {\n            developmentStorage {\n              displayName\n              unitPrice\n              allotment\n              usage\n              percentage\n              overageCostsUSD\n              totalRepls\n              usageByReplConnection(input: $input) {\n                ... on UnitPriceReplUsageTypeConnection {\n                  ...UnitPriceReplUsageConnection\n                }\n              }\n            }\n          }\n        }\n        ... on ServiceUnavailable {\n          __typename\n          message\n        }\n        ... on UserError {\n          __typename\n          message\n        }\n        ... on UnauthorizedError {\n          __typename\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y5=function(){return e},e}function y3(){var e=(0,eB._)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return y3=function(){return e},e}function y7(){var e=(0,eB._)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return y7=function(){return e},e}var y6={};y4();var y8=(0,eU.Ps)(y5(),y2.t0,y2._9),y9=(0,eU.Ps)(y3());y7();var be=t(10777),bn=t(31718),bt=t(50261),br=t(50366),bi=function(e,n){var t=e.findIndex(function(e){var t;return(null===(t=e.repl)||void 0===t?void 0:t.id)===n.replId});if(t<br.AX)return{contextReplIndex:t,individualSummaries:e.slice(0,br.AX),groupedSummaries:e.slice(br.AX)};var r=e[t];return{contextReplIndex:br.AX,individualSummaries:e.slice(0,br.AX).concat(r),groupedSummaries:e.slice(br.AX,t).concat(e.slice(t+1))}},bo=t(69519),ba=t(56763),bl=t(92371),bc=t(38865),bu=(0,ek.X)({self:[Q.l0.rowWithGap(8),Q.l0.align.center],dot:[Q.l0.flex.grow(1),Q.l0.width(8),Q.l0.height(8),Q.l0.minWidth(8),Q.l0.maxHeight(8),{borderRadius:"50%"}],title:[Q.l0.flex.grow(1),Q.l0.color.foregroundDefault,(0,ee._)({},(0,sD.EM)("mobileMax"),[Q.l0.flex.shrink(1),Q.l0.truncate])],line:[Q.l0.flex.growAndShrink(1),Q.l0.height(8),Q.l0.width("100%"),(0,ee._)({},(0,sD.EM)("mobileMax"),[Q.l0.flex.shrink(4)])]}),bs=K.K.a,bd=K.K.li,bp=function(e){var n=e.color,t=e.title,r=e.usage,i=e.resourceUsageType,o=e.linkedRepl,a=e.username,l=o?(0,eD.aq)(o):(0,bc.Ru)(a);return(0,$.tZ)(bd,{children:(0,$.tZ)(cd(),(0,eG._)((0,eE._)({legacyBehavior:!0},l),{passHref:!0,children:(0,$.tZ)(bs,{children:(0,$.BX)(K.G,{css:bu.self,children:[(0,$.tZ)("div",{css:bu.dot,style:{backgroundColor:n}}),o?(0,$.tZ)(cc.ZP,{size:16,iconUrl:o.iconUrl,alt:t}):null,(0,$.tZ)(ew.xv,{css:bu.title,multiline:!1,children:t}),(0,$.tZ)(K.G,{css:bu.line,children:(0,$.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,$.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:Q.TV.outlineDefault})})}),(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:(0,uE.fZ)(r,{resourceUsageType:i})})]})})}))})},bf=(0,ek.X)({self:[Q.l0.colWithGap(4)]}),bh=K.K.ul,bv=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,o=e.username,a=e.resourceUsageType,l=n.findIndex(function(e){return e.repl.id===i.replId});return -1===l?(0,$.tZ)(K.G,{css:bf.self,children:(0,$.tZ)(ew.xv,{multiline:!1,children:"No storage usage"})}):(0,$.BX)(bh,{css:bf.self,children:[n.map(function(e,n){return(0,$.tZ)(bp,{color:n===l?Q.TV.accentPrimaryDefault:Q.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,resourceUsageType:a,linkedRepl:e.repl,username:o},n)}),0!==t.length?(0,$.tZ)(bp,{color:Q.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,resourceUsageType:a,username:o}):null]})},bg=[Q.l0.width("100%"),Q.l0.rowWithGap(1),Q.l0.height(16),Q.l0.borderRadius(4),Q.l0.overflow("hidden"),Q.l0.backgroundColor.backgroundHigher],bm={small:(0,ek.X)({bar:[bg,Q.l0.height(10)]}),base:(0,ek.X)({bar:[bg,Q.l0.height(16)]})},by=(0,ek.X)({selfPlaceholder:[Q.l0.width("100%"),Q.l0.rowWithGap(1),Q.l0.height(16),Q.l0.borderRadius(4),Q.l0.overflow("hidden"),Q.l0.backgroundColor.backgroundHigher,cY.p.backgroundPulse(Q.TV.backgroundHigher,Q.TV.backgroundRoot)],barWrapper:[Q.l0.flex.grow(1)],barAndTriggerWrapper:[Q.l0.rowWithGap(8),Q.l0.align.center],self:[Q.l0.colWithGap(8),Q.l0.flex.growAndShrink(1)]}),bb=function(e){var n=e.summary,t=e.context,r=e.username,i=e.resourceUsageType,o=e.overageSummary,a=e.small,l=a?12:24,c=(0,j._)((0,q.useState)(!1),2),u=c[0],s=c[1],d=n.lineItems,p=Math.max(n.total,n.limit),f=bi((0,en._)(d).filter(function(e){return e.percentage>0}).sort(function(e,n){return n.usage-e.usage}),t),h=f.individualSummaries,v=f.groupedSummaries,g=f.contextReplIndex,m=h.filter(function(e){return null!==e.repl&&void 0!==e.repl}),y=v.filter(function(e){return null!==e.repl&&void 0!==e.repl}),b=y.reduce(function(e,n){return e+n.usage},0),Z=0===p?0:b/p,x=(0,bo.b)(m,Z,b,y.length),w=Q.TV.backgroundHigher,_=(0,$.tZ)(cF.hU,{alt:u?"Hide Repls":"Show Repls",size:l,children:u?(0,$.tZ)(ba.Z,{onClick:function(){return s(!u)},size:l}):(0,$.tZ)(nn.Z,{onClick:function(){return s(!u)},size:l})}),C=x.length>0;return(0,$.BX)(K.G,{css:by.self,children:[(0,$.BX)(K.G,{css:by.barAndTriggerWrapper,children:[o||(0,$.tZ)(K.G,{css:by.barWrapper,children:(0,$.tZ)(K.G,{css:a?bm.small.bar:bm.base.bar,style:{backgroundColor:w},children:x.map(function(e,n){return(0,$.tZ)(bl._V,{color:n===g?Q.TV.accentPrimaryDefault:Q.TV.accentPrimaryDimmest,resourceUsageType:i,section:e},n)})})}),C?_:null]}),C&&u?(0,$.BX)($.HY,{children:[(0,$.tZ)(bv,{topRepls:m,groupedRepls:y,groupedTotal:b,context:t,username:r,resourceUsageType:i}),(0,$.tZ)(nv.R,{})]}):null]})},bZ=function(){return(0,$.tZ)(K.G,{children:(0,$.tZ)(K.G,{css:by.selfPlaceholder})})},bx=t(96326),bw=t(44873),b_=(0,ek.X)({storageBarWrapper:[Q.l0.colWithGap(8)],summaryWrapper:[Q.l0.colWithGap(8),Q.l0.align.start],totalSummaryDot:[Q.l0.backgroundColor.backgroundHigher,Q.l0.width(8),Q.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[Q.l0.backgroundColor.accentPrimaryDefault,Q.l0.width(8),Q.l0.height(8),{borderRadius:"50%"}],summaryRow:[Q.l0.rowWithGap(8),Q.l0.justify.start,Q.l0.align.center,Q.l0.fontSize(14),Q.l0.height(14)],summaryRowWrap:[Q.l0.rowWithGap(8),Q.l0.justify.start,Q.l0.align.center,Q.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[Q.l0.color.accentPrimaryStronger],replSummaryUsage:[Q.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[cY.p.backgroundPulse(Q.TV.backgroundHigher,Q.TV.backgroundRoot),{opacity:.5},Q.l0.borderRadius(4),Q.l0.height("100%"),Q.l0.width(78)],replUsagePlaceholder:[cY.p.backgroundPulse(Q.TV.backgroundHigher,Q.TV.backgroundRoot),{opacity:.5},Q.l0.borderRadius(4),Q.l0.height("100%"),Q.l0.width(64)],totalUsagePlaceholder:[cY.p.backgroundPulse(Q.TV.backgroundHigher,Q.TV.backgroundRoot),{opacity:.5},Q.l0.borderRadius(4),Q.l0.height("100%"),Q.l0.width(140)],availablePlaceholder:[cY.p.backgroundPulse(Q.TV.backgroundHigher,Q.TV.backgroundRoot),{opacity:.5},Q.l0.borderRadius(4),Q.l0.height("100%"),Q.l0.width(64)],availableText:[Q.l0.color.foregroundDimmest,(0,ee._)({},Q.BC.max(390),Q.l0.pl(16))]}),bC=function(e){var n,t,r=e.data,i=(0,eb.Z)(),o=(0,j._)((0,q.useState)(!1),2),a=o[0],l=o[1];if((0,q.useEffect)(function(){var e,n,t,o;r&&(null===(n=r.currentUser)||void 0===n?void 0:null===(e=n.usageInterval)||void 0===e?void 0:e.__typename)==="UsageInterval"&&(null===(o=r.currentUser)||void 0===o?void 0:null===(t=o.usageInterval.resources.developmentStorage.usageByReplConnection.items.find(function(e){var n;return(null===(n=e.usageRepl)||void 0===n?void 0:n.id)===i}))||void 0===t?void 0:t.__typename)==="UnitPriceReplUsageType"&&l(!0)},[r,i]),r&&(null===(t=r.currentUser)||void 0===t?void 0:null===(n=t.usageInterval)||void 0===n?void 0:n.__typename)==="UsageInterval"&&a){var c,u=r.currentUser,s=u.username,d=u.isCore,p=r.currentUser.usageInterval.resources.developmentStorage,f=p.usage,h=p.allotment,v=p.usageByReplConnection.items,g=d?dt.we:"Starter",m=(0,bw.L)(h,{resourceUsageType:"GiB",precision:0}),y=Math.max(h-f,0),b="(".concat((0,uE.fZ)(y,{precision:1,resourceUsageType:"GiB"})," available)"),Z=v.map(function(e){return(0,eG._)((0,eE._)({},e),{usage:e.usage*sc.lb})}),x=Z.find(function(e){var n;return(null===(n=e.usageRepl)||void 0===n?void 0:n.id)===i}),w=0!==h?(0,$.tZ)(ew.xv,{css:b_.availableText,multiline:!1,children:b}):null;return(0,$.BX)(K.G,{css:b_.storageBarWrapper,children:[(0,$.tZ)(bb,{context:{replId:i},summary:(0,bx._)({replUsageOverview:Z,usage:f,allotment:h,__typename:"UsageOverviewUnitPriceSku"}),username:s,resourceUsageType:"Bytes"}),(0,$.BX)(K.G,{css:b_.summaryWrapper,children:[(0,$.BX)(K.G,{css:b_.summaryRowWrap,children:[(0,$.BX)(ew.xv,{multiline:!1,children:["Replit ",g," storage: ",m," GiB"]}),w]}),(0,$.BX)(K.G,{css:b_.summaryRow,children:[(0,$.tZ)("div",{css:b_.replSummaryDot}),(0,$.tZ)(ew.xv,{css:b_.replSummaryText,multiline:!1,children:"This Repl:"}),x?(0,$.tZ)(ew.xv,{css:b_.replSummaryUsage,multiline:!1,children:(c=x.usage)>2*sc.lb?"".concat((0,uE.$s)(c).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,uE.p6)(c)).toLocaleString()," MiB")}):(0,$.tZ)(K.G,{css:b_.replUsagePlaceholder})]})]})]})}return(0,$.tZ)(bk,{})},bk=function(){return(0,$.BX)(K.G,{css:b_.storageBarWrapper,children:[(0,$.tZ)(bZ,{}),(0,$.BX)(K.G,{css:b_.summaryWrapper,children:[(0,$.BX)(K.G,{css:b_.summaryRow,children:[(0,$.tZ)(K.G,{css:b_.totalUsagePlaceholder}),(0,$.tZ)(K.G,{css:b_.availablePlaceholder})]}),(0,$.BX)(K.G,{css:b_.summaryRow,children:[(0,$.tZ)(K.G,{css:b_.replSummaryTextPlaceholder}),(0,$.tZ)(K.G,{css:b_.replUsagePlaceholder})]})]})]})},bS=(0,ek.X)({content:[Q.l0.colWithGap(24)],header:[Q.l0.align.center],checkbox:[Q.l0.rowWithGap(8)],footer:[Q.l0.rowWithGap(16),Q.l0.justify.spaceBetween,Q.l0.align.center]});function bI(){var e,n,t,r=(0,ev.Z)().fs,i=(0,j._)((0,q.useState)(null),2),o=i[0],a=i[1],l=(0,eb.Z)(),c=(0,j._)((0,q.useState)(!1),2),u=c[0],s=c[1],d=(0,j._)((0,q.useState)(!1),2),p=d[0],f=d[1],h=(0,j._)((0,q.useState)(!0),2),v=h[0],g=h[1],m=(e={variables:{input:{count:br.AX}}},n=(0,eE._)({},y6,e),eL.a(y8,n)),y=m.data,b=m.loading,Z=(0,q.useId)(),x=(0,J.P5)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),w=(0,q.useRef)(!1),_=si(),C=sa(),k=_>0?C/_:0,S=(0,em.Z)(k),I=null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:t.id,R=(0,em.Z)(null),E=(0,q.useCallback)(function(e){null===_||null===C||"sampling"===e&&u||(a(e),be.kg.info("disk quota exceeded modal displayed",{replid:l,userid:I,currentReportedUtilization:1048576*C,totalReportedReplQuota:1048576*_}),(0,eZ.j)(eZ.U3.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0}))},[u,a,C,l,_,I]);(0,q.useEffect)(function(){var e=setTimeout(function(){g(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,q.useEffect)(function(){if(!p){var e=r.onDiskQuotaExceeded(function(){1024===_?R.current=setTimeout(function(){E("filesystem_service")},3e4):E("filesystem_service")});return function(){e()}}},[r,_,p,E,R]),(0,q.useEffect)(function(){return function(){R.current&&clearTimeout(R.current)}},[R]);var G=(0,uA.Hg)(uK);(0,q.useEffect)(function(){var e;if(!o&&!w.current&&!p&&!u&&x&&!G)return k>.9999&&(w.current=!0,e=setTimeout(function(){w.current=!1,S.current>.9999&&E("sampling")},1e4)),function(){clearTimeout(e)}},[p,u,k,w,o,E,S,x,G]);var P=(0,q.useCallback)(function(){"sampling"===o&&s(!0),a(null)},[o]);return v?null:(0,$.tZ)(nk.u,{isOpen:!!o,onRequestClose:P,children:(0,$.tZ)(K.G,{css:bS.content,children:(0,$.BX)(K.G,{css:bS.content,children:[(0,$.BX)(ew.h4,{css:bS.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,$.tZ)(bt.Z,{size:20})]}),(0,$.tZ)(ew.xv,{children:"To free up space remove files until it's under the limit, delete other Repls, or upgrade your account storage."}),!b&&y?(0,$.tZ)(bC,{data:y}):(0,$.tZ)(bk,{}),"filesystem_service"===o?(0,$.BX)(K.G,{css:bS.checkbox,tag:"label",children:[(0,$.tZ)(bn.X,{id:Z,checked:p,onChange:f}),(0,$.tZ)(ew.xv,{variant:"small",children:"Do not show this message again for this session."})]}):null,(0,$.tZ)(K.G,{children:(0,$.tZ)(e8.Z,{href:"/usage#storage",text:"View Usage"})})]})})})}var bR=t(19621),bE=(0,ek.X)({content:[Q.l0.colWithGap(24)],header:[Q.l0.align.center],checkbox:[Q.l0.rowWithGap(8)]});function bG(){var e=(0,ev.Z)().fs,n=(0,j._)((0,q.useState)(!1),2),t=n[0],r=n[1],i=(0,j._)((0,q.useState)(!1),2),o=i[0],a=i[1],l=(0,q.useId)();(0,q.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var c=(0,q.useCallback)(function(){r(!1)},[r]);return(0,$.tZ)(nk.u,{isOpen:t,onRequestClose:c,children:(0,$.tZ)(K.G,{css:bE.content,children:(0,$.BX)(K.G,{css:bE.content,children:[(0,$.BX)(ew.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,$.tZ)(bR.Z,{color:Q.TV.accentNegativeDefault,size:20})]}),(0,$.BX)(ew.xv,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,$.tZ)(mc.Z,{})," icon on the left."]}),(0,$.tZ)(ew.xv,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,$.BX)(K.G,{css:bE.checkbox,tag:"label",children:[(0,$.tZ)(bn.X,{id:l,checked:o,onChange:a}),(0,$.tZ)(ew.xv,{variant:"small",children:"Do not show this message again for this session."})]}),(0,$.tZ)(e6.zx,{onClick:c,text:"Close"})]})})})}function bP(){var e,n,t,r,i=(t={variables:{replId:(0,eb.Z)()}},r=(0,eE._)({},y6,t),eL.a(y9,r)),o=i.data,a=i.loading,l=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"&&(null===(n=o.repl.owner)||void 0===n?void 0:n.__typename)==="Team";return a&&!o?null:l?(0,$.tZ)(bG,{}):(0,$.tZ)(bI,{})}var bD=t(96432),bT=t(76881),bA=t(49295),bB=t(52758),bU=t(56421),bO=function(e){return(0,$.tZ)(nk.u,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(24)],children:[(0,$.tZ)(ew.h4,{variant:"headerDefault",level:2,css:Q.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,$.tZ)(ew.xv,{children:"Never miss messages from your collaborators if you’re in another tab or window."}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.justify.end],children:[(0,$.tZ)(e6.zx,{onClick:e.onCancel,text:"Deny",iconLeft:(0,$.tZ)(uI.Z,{})}),(0,$.tZ)(e6.zx,{text:"Allow notifications",colorway:"positive",iconLeft:(0,$.tZ)(ne.Z,{}),onClick:e.onConfirm})]})]})})},bM=t(9583),bL=t(11702),bX=(u=(0,eR._)(function(e){var n,t,r,i;return(0,eP.Jh)(this,function(o){switch(o.label){case 0:if(!(0,hI.u9)())return[2,null];return[4,(0,hI.mv)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})}),function(e){return u.apply(this,arguments)});function bW(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g=e.repl;return t=(n=(0,ev.Z)()).fs,r=n.dotReplit,i=oT(rS),o=(0,em.Z)(i),l=(a=(0,j._)((0,q.useState)(!1),2))[0],c=a[1],u=lh(),s=(0,q.useCallback)(function(e){u((0,eG._)((0,eE._)({},e),{opener:e.path.toLowerCase().endsWith(".md")?{paneType:"markdown"}:void 0}))},[u]),d=(0,bL.p)(g),p=oT(rz),f=oT(it),h=(0,lU.$g)(),v=(0,q.useRef)(!1),(0,q.useEffect)(function(){if(l&&!v.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,eG._)((0,eE._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,hI.YM)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,eG._)((0,eE._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,q.useEffect)(function(){if(!l){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,eR._)(function(){var n,i;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:if(!p)return[2];if(o.current)return c(!0),[2];return[4,bX(t)];case 1:if(n=a.sent(),e)return[2];if(n)return s(n),c(!0),[2];if(o.current||"saved"===p||f||h)return c(!0),[2];return[4,(0,bM.W)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||d||s({path:i}),c(!0),[2]}})})).apply(this,arguments)}},[t,s,r,o,p,l,f,d,h]),(0,q.useEffect)(function(){if(p){var e,n=(e=(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return v.current=!0,[4,bX(t)];case 1:return(e=n.sent())&&s(e),v.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}},[p,t,s]),null}var bN=t(15185),bz=t(52697),bF=t(87903),bV=t(1193),bH=t(91476);function bj(){var e=(0,eB._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return bj=function(){return e},e}var b$={},bq=(0,eU.Ps)(bj(),bF.j7),bY=t(16354),bJ=t(2763),bK=t(33628),bQ=t(25357),b0=t(52589);function b1(){return(b1=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var b2=t(68216),b4=t(55992),b5="video.json",b3=(0,b4.join)(pN.V,b5);function b7(){return(b7=(0,eR._)(function(e,n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===op.Tv.File&&e.filename===b5}))return[2,null];return[4,e.readFile(b3)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}var b6=t(77391),b8=t(38337),b9=t(36827),Ze=t(62305),Zn=t(45919),Zt=t(80060),Zr=t(58862),Zi=t(80410),Zo=t(36082),Za=t(95636),Zl=t(47),Zc=t(37782),Zu=t(62699),Zs=t(71793);function Zd(){var e=(0,eB._)(["\n  query ReplEnvironmentServicesConnector($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return Zd=function(){return e},e}var Zp=(0,eU.Ps)(Zd(),Zs.C,Zs.D);function Zf(){return(Zf=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){return[2,Zh(e)]})})).apply(this,arguments)}function Zh(e){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,eR._)(function(e){var n,t,r=arguments;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:n=r.length>1&&void 0!==r[1]?r[1]:1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(e){return Zg.apply(this,arguments)}(e)];case 2:return i.sent(),[3,4];case 3:if(t=i.sent(),n>5)throw t;return setTimeout(function(){Zh(e,n+1)},(Math.pow(2,n)-1)*1e3),[3,4];case 4:return[2]}})})).apply(this,arguments)}function Zg(){return(Zg=(0,eR._)(function(e){var n,t,r,i,o,a;return(0,eP.Jh)(this,function(l){switch(l.label){case 0:if(n=e.replId,t=e.expectedThreads,r=(0,Zc.ZP)({onUnrecoverableError:function(e){throw Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),!tK.l)throw r.destroy(),Error("Expected Apollo Client");return[4,tK.l.query({query:Zp,variables:{id:n}})];case 1:if("Repl"!==(i=l.sent().data).repl.__typename)throw r.destroy(),Error("Failed to query repl info when creating temporary connection");return o=i.currentUser,a=i.repl,[2,new Promise(function(e){r.onConnectionStateChanged(function(i){if(i===Zc.em.CONNECTED){try{var o=null===(a=r.getConnectionMetadata())||void 0===a?void 0:a.token;if(null!=o){var a,l,c=(0,Zl.he)(o),u=null!==(l=c.resourceLimits)&&void 0!==l?l:{},s=u.memory,d=u.threads;be.kg.info("Temporary goval connection created",{label:"replResourcesChange",replid:n,cluster:c.cluster,memory:s,threads:d}),null!=t&&d!==t&&((null!=d?d:0<t)?be.kg.error:be.kg.warn)("Unexpected resource limits",{label:"replResourcesChange",replid:n,expectedThreads:t,actualMemory:s,actualShares:d})}}catch(e){}r.destroy(),e()}}),r.connect({getMinimumRetryDelayMs:function(){return 0},context:(0,Zu.U)({repl:a,currentUser:o})})})]}})})).apply(this,arguments)}function Zm(){var e=(0,eB._)(["\n  fragment BoostMetadata on Repl {\n    id\n    devComputeOptions {\n      sku\n      status\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        userSubscriptionType\n      }\n      ... on Team {\n        id\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n    }\n  }\n"]);return Zm=function(){return e},e}function Zy(){var e=(0,eB._)(["\n  query ResourceUpdatingCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return Zy=function(){return e},e}function Zb(){var e=(0,eB._)(["\n  query ResourceUpdatingBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return Zb=function(){return e},e}var ZZ={},Zx=(0,eU.Ps)(Zm()),Zw=(0,eU.Ps)(Zy()),Z_=(0,eU.Ps)(Zb(),Zx),ZC=t(49135);(s=B||(B={})).Free="free",s.Core="core",s.Team_Pro="team_pro",s.Replit_Dev_Team="replit_dev_team",s.Boost_8cpu_16ram="boost_8cpu_16ram",s.Boost_16cpu_32ram="boost_16cpu_32ram",s.Boost_32cpu_64ram="boost_32cpu_64ram";var Zk={free:1,core:4,team_pro:4,boost_8cpu_16ram:8,boost_16cpu_32ram:16,boost_32cpu_64ram:32,replit_dev_team:16},ZS={free:2048,core:8192,team_pro:8192,boost_8cpu_16ram:16384,boost_16cpu_32ram:32768,boost_32cpu_64ram:65536,replit_dev_team:65536};function ZI(e){if(!e||"Repl"!==e.__typename||!e.owner)return null;var n=e.devComputeOptions.find(function(e){return"current"===e.status});if(!n)return null;var t=function(e){if("Team"===e.__typename){if((0,ZC.v4)(e.id))return"replit_dev_team";if(e.isTeamsPro)return"team_pro"}return"User"===e.__typename&&e.userSubscriptionType===nl.HP.HackerPro?"core":"free"}(e.owner);if(n.sku===nl.Xb.Boost_4cpu_8ram)return t;var r=Zk[t],i=Zk[n.sku];return i&&r&&i>r?function(e){switch(e){case"boost_4cpu_8ram":return"core";case"boost_8cpu_16ram":return"boost_8cpu_16ram";case"boost_16cpu_32ram":return"boost_16cpu_32ram";case"boost_32cpu_64ram":return"boost_32cpu_64ram";default:return"free"}}(n.sku):t}function ZR(){var e=(0,eB._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return ZR=function(){return e},e}var ZE={},ZG=(0,eU.Ps)(ZR()),ZP=t(56850),ZD=t(36413);function ZT(){var e=(0,eB._)(["\n  query TrackResourcesBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return ZT=function(){return e},e}var ZA={},ZB=(0,eU.Ps)(ZT(),Zx),ZU=t(28467),ZO=t(57337),ZM=t(58988),ZL=t(76848),ZX=t(38970);function ZW(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,cT.Z)().showError,o=(0,j._)((0,q.useState)(null),2),a=o[0],l=o[1],c=(0,bF.xT)({variables:{replId:e}}),u=function(){var e,n=null===(e=c.data)||void 0===e?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},s=function(n,t){var r=n.readQuery({query:bF.yi,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,en._)(o).concat([t]):(0,en._)(o.slice(0,a)).concat([t],(0,en._)(o.slice(a+1))),n.writeQuery({query:bF.yi,variables:{replId:e},data:(0,eG._)((0,eE._)({},r),{repl:(0,eG._)((0,eE._)({},r.repl),{annotationAnchors:i})})})},d=(0,j._)((0,bF.AS)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],p=(0,j._)((0,bF.gE)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],f=(0,j._)((0,bF.Rp)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],h=(0,j._)((0,ZX.n)(),1)[0],v=(0,j._)((0,bF.Hj)(),1)[0];(0,bF.Tt)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(s(t,i),r(i))}});var g=(0,j._)((0,q.useState)([]),2),m=g[0],y=g[1];(0,q.useEffect)(function(){var e,n=[];(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,en._)(c.data.repl.annotationAnchors)),a&&n.push((0,eG._)((0,eE._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),y(n)},[c,a]);var b=(0,q.useMemo)(function(){return m.find(function(e){return e.isGeneral})},[m]),Z=(0,q.useMemo)(function(){return m.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[m]),x=function(e){var n=e.annotationAnchor,t=e.annotationMessage;d({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,eG._)((0,eE._)({},u(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,eG._)((0,eE._)({},u(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},w=(0,tt.Z)(function(){return ci()(v,1e3,{trailing:!1})},[v]);return{annotations:m,loading:c.loading,generalThread:b,unreadThreadCount:Z,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:x,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),x({annotationAnchor:(0,eE._)({},a),annotationMessage:r,highlight:i})):p({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,eG._)((0,eE._)({},t),{messages:(0,en._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,eG._)((0,eE._)({},u(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;f({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,eG._)((0,eE._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){w({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){h({variables:{replId:e}})}}}var ZN=function(e){var n=ZW(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,q.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};function Zz(){var e=(0,eB._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return Zz=function(){return e},e}var ZF={},ZV=(0,eU.Ps)(Zz()),ZH=t(70145),Zj=t(11208),Z$=t(73660),Zq=t(76773),ZY=t(65117);function ZJ(){var e=(0,eB._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return ZJ=function(){return e},e}var ZK={},ZQ=(0,eU.Ps)(ZJ());function Z0(){var e=(0,eB._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Z0=function(){return e},e}var Z1=(0,eU.Ps)(Z0());function Z2(){return(Z2=(0,eR._)(function(e){var n,t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(null===tK.l)return[2];return[4,tK.l.query({query:Z1,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)?void 0:null===(n=t.user)||void 0===n?void 0:n.image]}})})).apply(this,arguments)}function Z4(){return"Notification"in window?"true"===r8.Z.get(Z7,"string")?"dismissed":window.Notification.permission:"denied"}function Z5(){return(Z5=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function Z3(){return(Z3=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return Z5.apply(this,arguments)}()];case 1:return e.sent(),Z6(!1),[2]}})})).apply(this,arguments)}var Z7="notifications/dismissedModal";function Z6(e){r8.Z.set(Z7,String(e))}var Z8={};function Z9(e){return xe.apply(this,arguments)}function xe(){return(xe=(0,eR._)(function(e){var n,t,r,i,o,a,l,c,u,s,d;return(0,eP.Jh)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,u=void 0===(c=e.cacheDuration)?0:c,!document.hidden&&document.hasFocus()||"granted"!==Z4()||(s=Date.now(),a in Z8&&Z8[a]+u>s))return[2];if(!o)return[3,2];return[4,function(e){return Z2.apply(this,arguments)}(o)];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),Z8[a]=s,[2]}})})).apply(this,arguments)}function xn(){var e=(0,eB._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return xn=function(){return e},e}var xt=(0,eU.Ps)(xn());function xr(){return(xr=(0,eR._)(function(e){var n;return(0,eP.Jh)(this,function(t){switch(t.label){case 0:if(!tK.l)throw Error("Expected Apollo client");return[4,tK.l.query({query:xt,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}var xi=t(97933);function xo(){var e=(0,eB._)(["\n  subscription StartTeamReplPresenceSession(\n    $input: StartTeamReplPresenceInput!\n  ) {\n    startTeamReplPresenceSession(input: $input)\n  }\n"]);return xo=function(){return e},e}function xa(){var e=(0,eB._)(["\n  mutation UpdateTeamReplPresenceSession($input: UpdateTeamReplPresenceInput!) {\n    updateTeamReplPresence(input: $input)\n  }\n"]);return xa=function(){return e},e}var xl={},xc=(0,eU.Ps)(xo()),xu=(0,eU.Ps)(xa()),xs=t(64566),xd=t(84082);function xp(){var e=(0,eB._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return xp=function(){return e},e}var xf={},xh=(0,eU.Ps)(xp()),xv=t(79685);function xg(e,n){var t=oT(rz),r=oB(od),i=oB(ou),o=oU(rO);(0,te.Il)(function(){if(t)return[e,function(){var e=o().find(function(e){return(0,j._)(e,2)[1].type===n.type});if(e){i({paneId:e[0],activate:!0});return}r({pane:n,activate:!0,placement:{type:"secondary"}})}]},[t,r,i])}var xm=t(21781);function xy(e,n,t){Z9({title:"Agent Update",body:t,tag:"".concat(e,"-").concat(n),icon:"/public/images/ghostwriter/orb.png",cacheDuration:3e5})}function xb(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C,k,S,I,R,E,G,P,D,T,A,B,U,O,M,L,X,W,N,z,F,V,H,$,Y,K,Q,ee,en,et,er,ei,eo,ea,el,ec,eu,es,ed,ep,ef,eh,ey,ex,ew,e_,eC,ek,eS,eI,eD,eT,eA,eB,eU,eO,eM,eW,eN,ez,eF,eV,eH,ej,e$,eq,eY,eJ,eK,eQ,e0,e1,e2,e4,e5,e3,e7,e6,e8,e9,ne,nn,nt,nr,ni,no,na,nl,nc,nu,ns,nd,np,nf,nh,nv,ng,nm,ny,nb,nZ,nx,nw,n_,nC,nk,nS,nI,nR,nD,nT,nA,nB,nU,nO,nM,nL,nX,nW,nN,nz,nF,nV,nH,nj,n$,nq,nY,nJ,nK,nQ,n0,n1,n2,n4,n5,n3,n7,n6,n8,n9,tn,tr,ti,to,ta,tl,tc,tu,ts,td,tp,tf,th,tv,tg,tm,ty,tb,tZ,tx,tw,t_,tC,tk,tS,tI,tR,tE,tG,tP,tD,tT,tA=e.repl,tB=e.currentUser,tU=(0,ev.Z)(),tO=tU.replspaceApi,tM=tU.dotReplit,tL=tU.runner,tX=tU.container;u=(0,ev.Z)().lspnix,s=(0,tQ.Gn)("codeIntelligence").preferences.codeIntelligence,(0,q.useEffect)(function(){if(!s){u.disable();return}u.enable()},[u,s]),d=oT(rS),p=(0,Zj.Z)(d||""),f=(0,Z$.K)(),h=(0,J.P5)({controlName:"flag-lsp-userevents",logFlagToAnalytics:!1}),(0,q.useEffect)(function(){if(h&&p.length)return(0,Zq.uf)(p.map(function(e){return e.onDiagnostics(function(e){f("user:lsp:textDocument/publishDiagnostics",{path:e.path,diagnostics:e.diagnostics})})}))},[h,p,f]),(0,q.useEffect)(function(){if(h&&p.length){var e=new Map,n=(0,Zq.uf)(p.map(function(n){return n.onRequest(function(n){"textDocument/codeAction"!==n.data.method||e.has(n.id)||e.set(n.id,n.data)})})),t=(0,Zq.uf)(p.map(function(n){return n.onResponse(function(n){if(void 0!==n.error||"undefined"===n.result||Array.isArray(n.result)&&0===n.result.length){e.delete(n.id);return}e.has(n.id)&&(f("user:lsp:textDocument/codeAction",{id:n.id,request:e.get(n.id),response:n.result}),e.delete(n.id))})}));return function(){n(),t()}}},[h,p,f]),v=(0,j._)((0,bT.qg)(),1)[0],g=oB(iy),m=(0,tt.Z)(function(){return oW()(g,1e3)},[g]),y=(0,eb.Z)(),(0,q.useEffect)(function(){var e=function(){m({replId:y,force:!1}),m.flush()};if(!v)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[m,y,v]),(0,q.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&m({replId:y,force:!1})};if(!v)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[m,y,v]),(0,q.useEffect)(function(){if(!v){var e=null;return function n(){e=setTimeout(function(){m({replId:y,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[m,y,v]),(0,q.useEffect)(function(){return function(){m({replId:y,force:!1}),m.flush()}},[m,y,v]),(0,bz.Z)(),(0,ZP.Z)(),(0,ZU.Z)({workspaceType:"desktop"}),_=ZI((null==(w=(Z={variables:{replId:b=(0,eb.Z)()}},x=(0,eE._)({},ZA,Z),eL.a(ZB,x)).data)?void 0:w.repl.__typename)==="Repl"?w.repl:void 0),C=(0,uA.Hg)(sn),k=(0,uA.Hg)(st),S=(0,q.useRef)(0),(0,q.useEffect)(function(){var e=setInterval(function(){if(_){var e=Zk[_],n=ZS[_];C!==e||k!==n?(S.current++,2===S.current&&be.kg.error("Repl Resources were less than expected for 1 minute",{replid:b,vCpusExpected:e,vCpusActual:C,ramExpected:n,ramActual:k})):(S.current>2&&be.kg.info("Repl Resources resolved mismatch after ".concat(S.current," minutes"),{replid:b,vCpusExpected:e,vCpusActual:C,ramExpected:n,ramActual:k}),S.current=0)}},6e4);return function(){clearInterval(e)}},[b,_,C,k,S]),(0,q.useEffect)(function(){var e=function(e){"s"===e.key&&(0,dE.jh)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),R=(I=(0,ev.Z)()).container,E=I.presence,(0,q.useEffect)(function(){var e=E.onUserJoin(function(n){var t,r=null===(t=R.getContext())||void 0===t?void 0:t.repl;if(r){var i=n.username;return(function(e){return xr.apply(this,arguments)})(r.id).then(function(e){e&&Z9({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(r.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})}),function(){e()}}})},[E,R]),G=(0,eb.Z)(),P=(0,lU.Ai)(),D=(0,q.useRef)("PRE_PLAN"),(0,q.useEffect)(function(){switch(D.current){case"PRE_PLAN":case"COMPLETED_PLAN":P&&!0===P.requiresApproval&&(xy(G,P.planId,"Plan is waiting for approval"),D.current="WAITS_FOR_APPROVAL");break;case"WAITS_FOR_APPROVAL":P&&!1===P.requiresApproval&&(D.current="EXECUTING_PLAN");break;case"EXECUTING_PLAN":var e=null==P?void 0:P.step.subSteps.every(function(e){return e.status===lU.UL.STEP_COMPLETE});P&&e&&(xy(G,P.planId,"Plan has been completed!"),D.current="COMPLETED_PLAN");break;default:(0,cQ.Z)(D.current)}},[P,G]),T=(0,lU.JL)(),(0,q.useEffect)(function(){return T.subscribe(function(e){if(e){var n=e.contents.contents,t=null;switch(null==n?void 0:n.$kind){case"messageEventContents":t=n.messageEventContents.agentAction;break;case"agentTimelineEventContents":var r,i,o=null==n?void 0:null===(i=n.agentTimelineEventContents)||void 0===i?void 0:i.toolData;(null==o?void 0:o.$kind)==="messageData"&&(t=o.messageData.agentAction)}switch(null==t?void 0:null===(r=t.optionType)||void 0===r?void 0:r.$kind){case"messageButtonAction":xy(G,e.id,"Agent has a question for you");break;case"secretRequestAction":xy(G,e.id,"Agent needs secrets to proceed");break;case"deployRequestAction":xy(G,e.id,"Agent needs your permission to deploy the application")}}})},[T,G]),A=(0,eb.Z)(),B=(0,ev.Z)().container,U={variables:{replId:A},skip:(0,ZY.Z)(B)!==Zc.em.CONNECTED},O=(0,eE._)({},ZK,U),bH.m(ZQ,O),M=(0,ev.Z)().presence,(0,q.useEffect)(function(){return M.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,eZ.j)(b0.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,eZ.j)(b0.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[M]),(0,ZO.Z)(),X=(0,eb.Z)(),N=(W=(0,eE._)({},ZZ,void 0),eL.a(Zw,W)).data,V=(z=(0,eE._)({},ZZ,{variables:{replId:X}}),F=eL.a(Z_,z)).data,H=F.refetch,$=null==N?void 0:null===(L=N.currentUser)||void 0===L?void 0:L.userSubscriptionType,Y=(0,q.useRef)(void 0),(0,q.useEffect)(function(){void 0!==$&&(void 0!==Y.current&&Y.current!==$&&H(),Y.current=$)},[$,H,Y]),K=ZI((null==V?void 0:V.repl.__typename)==="Repl"?V.repl:void 0),Q=(0,q.useRef)(null),(0,q.useEffect)(function(){null!==K&&(null!==Q.current&&Q.current!==K&&(be.kg.info("Repl Resources expected value changed, creating temp goval connection",{replid:X,previousBoost:Q.current,newBoost:K}),(function(e){return Zf.apply(this,arguments)})({replId:X,expectedThreads:Zk[K]}).catch(function(e){sE.Tb(e),be.kg.error("Repl Resources failed to create temp goval connection",{replid:X})})),Q.current=K)},[K,Q,X]),ee=(0,ev.Z)().presence,en=oT(rS),(0,q.useEffect)(function(){ee.updateOpenFile(en)},[ee,en]),er=(et=(0,cT.Z)()).showConfirm,ei=et.showNotice,eo=et.hideMessage,ea=et.showError,el=(0,ev.Z)().container,(0,q.useEffect)(function(){var e=el.onToast(function(e){e.startsWith("PANIC")||ei(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=el.onConnectionStateChanged(function(e){if(n&&(eo(n),n=null),e===Zc.em.CONNECTED){t=!0,n=er("Connected",1500);return}if(t){if(e===Zc.em.CONNECTING){n=ei("Reconnecting");return}if(e===Zc.em.DISCONNECTED){n=ea("Disconnected");return}}});return function(){n&&eo(n),e(),r()}},[el,er,ei,ea,eo]),ec=(0,cT.Z)().showConfirm,eu=(0,ev.Z)().fs,(0,q.useEffect)(function(){var e=eu.registerOnFlushSuccess(function(e,n){if(n===op.WL.MANUAL_SAVE){var t="Saved ".concat(e);ec(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[eu,ec]),es=(0,ev.Z)().runner,ed=oT(rz),ep=(0,xv.T)(),ef=ld(),eh=(0,cz.cR)(),ey=oB(om),ex=oB(ou),ew=oU(rO),e_=(0,q.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=ew().find(function(n){return(0,j._)(n,2)[1].type===e});t&&ex({paneId:t[0],activate:n})},[ew,ex]),eC=(0,q.useCallback)(function(){if(eh){if(ep)return;ef({pane:{type:"runnerOutput"},activate:!1,commit:!0});return}if(ep){ey(),e_("webview",!0);return}ef({pane:{type:"runnerOutput"},activate:!1,commit:!0}),e_("runnerOutput")},[eh,ep,ef,e_,ey]),ek=(0,cN.e$)(cO.Q.id,cO.y.Output),(0,q.useEffect)(function(){if(ed&&(null==ek?void 0:ek.isActive)){var e=setInterval(function(){eC()},200);return function(){clearInterval(e)}}},[null==ek?void 0:ek.isActive,eC,ed]),(0,q.useEffect)(function(){if(ed)return es.onLocalRun(function(){eC()})},[es,eC,ed]),xg(cA.showShell.id,{type:"shell"}),xg(cA.showDocs.id,{type:"docs"}),xg(cA.showGit.id,{type:"git"}),xg(cA.showSettings.id,{type:"preferences"}),xg(cA.showConsole.id,{type:"runnerOutput"}),xg(cA.showReplitAi.id,{type:"ghostwriterChat"}),(0,b8.Z)(),eS=(0,ev.Z)().presence,eI=lh(),(0,q.useEffect)(function(){return eS.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=eS.getFollowedUser();r&&r.id===n.id&&t&&eI({path:t})})},[eS,eI]),eT=(eD=(0,j._)((0,q.useState)(null),2))[0],eA=eD[1],(0,q.useEffect)(function(){return eS.onFollowedUserChanged(eA)},[eS]),(0,q.useEffect)(function(){if(eT){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){eS.unfollowUser()}},[eT]),eB=(0,nE.OM)(),eW=(null==(eM=(eU={variables:{replId:(0,eb.Z)()}},eO=(0,eE._)({},ZE,eU),eL.a(ZG,eO)).data)?void 0:eM.repl.__typename)==="Repl"?eM.repl:null,(0,q.useEffect)(function(){var e;eW&&(null===(e=eW.templateInfo)||void 0===e?void 0:e.label.includes("Blank Repl"))&&eB(!0)},[eB,eW]),eN=oB(aJ),ez=(0,ev.Z)().fs,eF=(0,pN.Z)().isTutorial,eV=(0,em.Z)(eN),(0,q.useEffect)(function(){if(eF){var e=!1,n=ez.watchDir(pN.V,{onChange:function(n){(function(e,n){return b7.apply(this,arguments)})(ez,n).then(function(n){if(!e){if(!n){eV.current(null);return}var t=null;try{t=b2.ku(n)}catch(e){}var r="object"==typeof t&&"string"==typeof t.embedUrl?t.embedUrl:null;eV.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eV.current(null)},onError:function(){eV.current(null)}});return function(){e=!0,n()}}},[ez,eF,eV]),eH=(0,pN.Z)().isTutorial,ej=oB(a0),(0,q.useEffect)(function(){eH&&ej()},[ej,eH]),r=ZN(t=(0,eb.Z)()),n=ZW(t,{onReceiveAnnotationUpdate:function(){}}).annotations,i=(0,q.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n]),o=(0,xi.Z)(),a=(0,nE.Cp)(),(0,q.useEffect)(function(){a({paneType:"chat",indicatorType:r>0?nP.TV.redStronger:void 0})},[a,r]),(0,q.useEffect)(function(){a({paneType:"threadInbox",indicatorType:i>0?nP.TV.redStronger:void 0})},[a,i]),(0,q.useEffect)(function(){a({paneType:"envEditor",indicatorType:o?nP.TV.redStronger:void 0})},[o,a]),(0,Zt.R)({onOpenEnvEditor:function(){tW({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eq={variables:{replId:e$=tA.id},onData:function(e){var n,t,r=null===(t=e.data)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:bF.yi,variables:{replId:e$}},function(e){return(0,tJ.Uy)(e,function(e){null===e||"Repl"!==e.repl.__typename||e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r)})}),e.client.cache.updateQuery({query:bV.Jq,variables:{replId:e$,path:r.path}},function(e){return(0,tJ.Uy)(e,function(e){var n;e&&(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,eG._)((0,eE._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eY=(0,eE._)({},b$,eq),bH.m(bq,eY),eJ=oT(r_),eK=(0,eg.Xo)(),eQ=(0,eg.jY)(),(0,q.useEffect)(function(){eJ?eK(eJ):eQ()},[eK,eQ,eJ]),e0=(0,lT.bS)(),e1=oA(a2),e2=oU(r_),e4=(0,em.Z)(e0),e5=(0,J.P5)({controlName:"flag-modal-panes"})?500:0,(0,q.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=e2();e&&e4.current(e)},e5))},n=null;e(e1.current);var t=e1.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[e1,e4,e2,e5]),e3=oT(oZ),e7=oB(lp),(0,q.useEffect)(function(){var e=function(){e7()};if(e3)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[e3,e7]),(0,Zn.Z)(),e6=ZN((0,eb.Z)()),e8=(0,q.useRef)(0),e9=(0,tQ.Gn)("chatAudioNotification").preferences,(0,q.useEffect)(function(){e9.chatAudioNotification&&e6>e8.current&&new Audio("/public/sounds/pop.mp3").play(),e8.current=e6},[e6,e8,e9]),ne=oT(rz),nn=(0,lT.dr)(),nt=oU(rA),(0,te.Il)(function(){if(ne)return[cA.webviewRefresh.id,function(){var e=nt().filter(function(e){return"webview"===(0,j._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,j._)(i.value,1)[0],l=nn(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[ne,nn,nt]),(0,Ze.Z)(),(0,Zr.Z)(),(0,ZM.el)(tM),(0,bK.m)(!(null===(tT=tA.org)||void 0===tT?void 0:tT.id)),(0,b9.L)(tL),(0,bJ.Y)();var tW=gL();no=(ni={debuggest:(nr=(0,ev.Z)()).debuggest,toolchain:nr.toolchain}).toolchain,na=ni.debuggest,(0,q.useEffect)(function(){function e(e){(null==e?void 0:e.debuggers)&&(null==e?void 0:e.debuggers.length)>0&&na.connect()}e(no.configs.current),no.configs.subscribe(function(n){e(n)})},[no,na]),nc=nl=(0,uZ.Z)(na.mainClient),(0,q.useEffect)(function(){if(nc){var e=nc.onStarted(function(e){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"started",joined:e})}),n=nc.onPaused(function(e){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"paused",reason:e})}),t=nc.onBreakpoint(function(e){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:e,state:nc.state.current})});return function(){e(),n(),t()}}},[nc]),ns=(0,em.Z)(function(e){tW({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})}),nf=null==(np=null==(nd=(0,uZ.Z)(nl?nl.stackFrames:null))?void 0:nd[0])?void 0:null===(nu=np.source)||void 0===nu?void 0:nu.path,nh=null==np?void 0:np.line,(0,q.useEffect)(function(){if(nf&&nh&&nl){var e=(0,bQ.om)(nf);e?ns.current({path:e,line:nh}):nl.stepOut()}},[nl,nf,nh,ns]),(0,q.useEffect)(function(){return sE.YA("replId",tA.id),function(){sE.YA("replId",void 0)}},[tA.id]),(0,b6.Z)({repl:tA,currentUser:tB,container:tX}),nv=(0,eb.Z)(),nm=(ng=(0,ev.Z)()).container,ny=ng.ports,nb=oB(og),nx=(0,j._)((nZ=(0,eE._)({},ZF,void 0),eX.D(ZV,nZ)),1)[0],nw=(0,tQ.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n_=(0,cz.cR)(),nC=(0,q.useCallback)(function(e){e.isForwarded&&(n_||nb({pane:{type:"vnc"}}),nx({variables:{input:{id:nv,isVnc:!0}}}))},[nv,n_,nb,nx]),nk=(0,lU.$g)(),nS=(0,q.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!nk&&(nw&&!n_&&nb({pane:{type:"webview",data:r}}),nx({variables:{input:{id:nv,isServer:!0}}}))},[nb,n_,nk,nv,nx,nw]),(0,q.useEffect)(function(){return ny.portsState.subscribe(oW()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,c=a.isOpen;if(l.isVnc){nC({isForwarded:c});return}var u=l.type===ZH.DL.FORWARDED;nS({isForwarded:u,isOpen:c,data:function(e){var n=e.configuration;if(n.localPort)return{portType:"local",path:"/",port:n.localPort};var t=(0,ZH.OD)(n);if(t)return{portType:"external",path:"/",port:t}}(a)})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[nm,ny.portsState,nS,nC]),(0,ZD.Z)(),nI=(0,J.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0}),nW=(nD=(nR=(0,j._)((0,q.useState)(!1),2))[0],nT=nR[1],nB=(nA=(0,j._)((0,q.useState)(Date.now()),2))[0],nU=nA[1],nM=(nO=(0,j._)((0,q.useState)(Date.now()),2))[0],nL=nO[1],(0,q.useEffect)(function(){var e=function(){nT(!document.hidden),document.hidden?nL(Date.now()):nU(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nX={visibility:nD,visibleTime:nB,hiddenTime:nM}).visibility,nN=nX.visibleTime,nz=nX.hiddenTime,(0,q.useEffect)(function(){nI&&nW&&(nN-nz)/1e3>60&&(0,Zo.K)(Za.T0)},[nI,nW,nz,nN]),nF=(0,ev.Z)().ports,nV=(0,tQ.Gn)("forwardPortsAutomatically").preferences,(0,q.useEffect)(function(){nF.setForwardPortsAutomatically(nV.forwardPortsAutomatically)},[nV.forwardPortsAutomatically,nF]),(0,bY.Z)(tA,tB);var tN=oB(rI),tz=(0,dm.T)();(0,q.useEffect)(function(){tN(!tz)},[tz,tN]);var tF=oB(rR),tV=(0,bN.Z)();(0,q.useEffect)(function(){tF(tV)},[tV,tF]),nj=(0,ev.Z)().presence,n$=(0,eb.Z)(),nq=(0,q.useRef)(!1),nK=(nY=(0,eE._)({},xf,{variables:{replId:n$}}),nJ=eL.a(xh,nY)).data,nQ=nJ.loading,n0=0,(null==nK?void 0:nK.repl.__typename)==="Repl"&&(n0=nK.repl.multiplayers.length,(null===(nH=nK.repl.owner)||void 0===nH?void 0:nH.__typename)==="User"&&(n0+=1)),(0,q.useEffect)(function(){if(!nQ&&!nq.current){var e=nj.onActiveUsersChange(function(){nq.current=!0,e(),(0,eZ.j)(eZ.U3.MULTIPLAYER_REPL_OPENED,{replId:n$,participantsCount:n0,usersOnlineCount:nj.getActiveUsers().length})});return e}},[n$,nQ,n0,nj]);var tH=(0,eg.fg)();(0,q.useEffect)(function(){tO.setWaitForFileClose(tH)},[tO,tH]);var tj=(0,bT.uV)(),t$=oT(rX);(0,q.useEffect)(function(){t$&&tj(t$)},[tj,t$]),n2=(n1=(0,ev.Z)()).packager,n4=n1.toolchain,(0,q.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,eR._)(function(){var e,n,t,r,i,o,a,l,c,u;return(0,eP.Jh)(this,function(s){switch(s.label){case 0:if(!n4.configs.current||!n2)return[2];e=n4.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,n2.listSpecfile(a.id)];case 3:return(l=s.sent()).packages&&l.packages.length>0&&(c=l.packages.map(function(e){return e.name||""})||[],be.kg.info("packager installed packages",{packagerId:a.id,language:a.language,packages:c}),(0,eZ.j)(b0.U3.PACKAGER_PACKAGES_INSTALLED,{packages:c})),[4,function(e){return b1.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return u=s.sent(),t=!0,r=u,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[n2,n4.configs.current]),n5=(0,eg.WU)(),n3=(0,lT.bS)(),(0,q.useEffect)(function(){var e=function(){var e=n5();e&&n3(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[n3,n5]),n7=(0,ev.Z)().runner,n6=(0,nG.useRouter)(),n8=(0,q.useRef)(!!n6.query.run),(0,q.useEffect)(function(){var e=function(){n8.current=!1,n7.run()};if(n8.current){if(n7.getRunState()===ct.Ah.IDLE){e();return}var n=n7.onStateChanged(function(t){t===ct.Ah.IDLE&&(e(),n())});return function(){n()}}},[n7,n6]),n9=(0,J.P5)({controlName:"flag-legacy-team-repo-features"}),tn=((c=(0,xs.Z)((l=(0,eR._)(function(e){var n,t,r,i;return(0,eP.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,!(t!==xd.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return l.apply(this,arguments)})))&&!c.error?c.branchName:null)||null,tr=(0,eb.Z)(),ti=(0,q.useRef)(re()()),ta=(to=(0,j._)((0,q.useState)(""),2))[0],tl=to[1],(0,q.useEffect)(function(){tn&&""===ta&&tl(tn)},[tn,ta]),tc=(0,ev.Z)().container,tu=(0,ZY.Z)(tc),td=(0,j._)((ts=(0,eE._)({},xl,void 0),eX.D(xu,ts)),1)[0],(0,q.useEffect)(function(){var e=!1;if(n9&&tn&&tu===Zc.em.CONNECTED){var n=null;return function t(){td({variables:{input:{sessionId:ti.current,branch:tn}},onCompleted:function(){e||(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[tu,tn,ti,td,n9]),tp=!n9||tu!==Zc.em.CONNECTED||""===ta,tf={variables:{input:{replId:tr,branch:ta,sessionId:ti.current}},skip:tp},th=(0,eE._)({},xl,tf),bH.m(xc,th);var tq=oB(aZ),tY=oB(ax),tK=(0,ev.Z)().fs;return(0,Zi.Z)({fs:tK,openMultipleFiles:tq,openMultipleURLs:tY,waitForFileClose:tH,isMobileWorkspace:!1}),(0,lA.bB)(),(0,ZL.mh)({dotReplit:tM}),tv=(0,ZL.QF)(),tg=ld(),(0,q.useEffect)(function(){tv&&Object.values(tv).forEach(function(e){e.tasks.forEach(function(n,t){var r=e.workflow.tasks[t];n.state===xm.PX.RUNNING&&"workspace.openWebview"===r.task&&tg({pane:{type:"webview",data:{portType:"external",port:r.args}}})})})},[tv,tg]),tm=(0,uO.iM)(),ty=(0,J.P5)({controlName:"flag-pid2-resource-monitoring"}),tb=tm&&ty,tZ=(0,uA.$X)(uK),tx=(0,uA.$X)(u1),tw=(0,q.useRef)(!0),t_=(0,q.useCallback)(function(e){tx(e),tw.current?tw.current=!1:tZ(!1)},[tx,tZ]),tC=(0,ev.Z)().container,tk=(0,uM.Z)({container:tC,service:"replresources",name:"replresources",skip:tb}),(0,q.useEffect)(function(){var e=tk.isConnecting,n=tk.channel;if(!tb&&!e&&n&&"open"===n.status)return n.onCommand(function(e){var n,t=e.replResourcesUpdateNotification;if("replResourcesUpdateNotification"===e.body){var r=null==t?void 0:t.contents;if(r){try{n=JSON.parse(r)}catch(e){}var i=uB.B4.Check(uq,n)?n:null;if(null===i)throw Error("Got wrong shape for resource response");t_(i)}}})}),(0,uU.C)((tS=(0,eR._)(function(e,n){var t,r,i,o,a,l,c,u,s,d,p,f;return(0,eP.Jh)(this,function(h){switch(h.label){case 0:if(t=n.signal,r=n.addCleanup,!tb)return[2];return[4,e.resources.monitor.subscribe({})];case 1:if(o=(i=j._.apply(void 0,[h.sent(),2]))[0],a=i[1],r(a),t.aborted)return[2];l=!1,c=!1,h.label=2;case 2:h.trys.push([2,7,8,13]),s=(0,uT._)(o),h.label=3;case 3:return[4,s.next()];case 4:if(!(l=!(d=h.sent()).done))return[3,6];if(!(p=d.value).ok)return[3,5];t_(p.payload),h.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return f=h.sent(),c=!0,u=f,[3,13];case 8:if(h.trys.push([8,,11,12]),!(l&&null!=s.return))return[3,10];return[4,s.return()];case 9:h.sent(),h.label=10;case 10:return[3,12];case 11:if(c)throw u;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return tS.apply(this,arguments)}),[tb,t_]),tI=(0,lU.F)(),tR=oB(r1),tE=oB(r2),(0,q.useEffect)(function(){return tI.subscribe(function(e){e?tR():tE()})},[tI,tR,tE]),tG=(0,eg.yA)(),tP=(0,nE.Wl)(),tD=(0,nE.ho)(),(0,q.useEffect)(function(){if(tP)return tG.subscribe(function(e){e&&tD(!1)})},[tG,tP,tD]),null}(d=U||(U={})).PRE_PLAN="PRE_PLAN",d.WAITS_FOR_APPROVAL="WAITS_FOR_APPROVAL",d.EXECUTING_PLAN="EXECUTING_PLAN",d.COMPLETED_PLAN="COMPLETED_PLAN";var xZ=t(71724);function xx(){var e,n,t=lh(),r=(0,eg.Xo)(),i=(e=(0,eg.Y_)(),(0,tt.Z)(function(){return function(n){return e.subscribe(n)}},[e])),o=(0,eg.pV)(),a=(0,cT.Z)(),l=oB(od),c=gL(),u=(0,eg.WU)(),s=(0,lT.c4)(),d=oU(ip),p=oB(iY),f=(0,cP.Z)(),h=(0,em.Z)(f),v=(0,uO.Am)().flagPid2Shell,g=(0,q.useCallback)((n=(0,eR._)(function(e){var n,t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:if(t=l({pane:{type:"shell",data:{initialCmd:e+"\n"}},activate:!0,placement:{type:"secondary",relativeTo:u()}}),v)return[2];return[4,s(t)];case 1:if("shell"!==(r=i.sent()).type)throw Error("Expected shell pane binding");return null===(n=r.exec)||void 0===n||n.call(r,e),[2]}})}),function(e){return n.apply(this,arguments)}),[l,u,v,s]),m=(0,q.useCallback)(function(e){c({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:u()}})},[c,u]);return(0,tt.Z)(function(){return{openFile:t,watchActiveFile:i,getActiveFile:o,activatePane:r,toasts:a,execInShell:g,revealOrInsertTool:m,getLayoutState:d,setLayoutState:p,getSshConfig:function(){return h.current}}},[t,i,o,r,a,g,m,d,p,h])}var xw=t(13850),x_=t(18757),xC=t(71554);(p=O||(O={})).RAW="RAW",p.PROXY="PROXY",p.THROW="THROW",p.HANDLER="HANDLER",(f=M||(M={})).GET="GET",f.SET="SET",f.APPLY="APPLY",f.CONSTRUCT="CONSTRUCT",f.ENDPOINT="ENDPOINT",f.RELEASE="RELEASE";var xk=Symbol("Comlink.proxy"),xS=Symbol("Comlink.endpoint"),xI=Symbol("Comlink.releaseProxy"),xR=Symbol("Comlink.thrown"),xE=function(e){return"object"==typeof e&&null!==e||"function"==typeof e},xG=new Map([["proxy",{canHandle:function(e){return xE(e)&&e[xk]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return xP(e,t),[r,[r]]},deserialize:function(e){return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(xT(i),a===xI)return function(){return xL(n,{type:M.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){xD(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=xL(n,{type:M.GET,path:t.map(function(e){return e.toString()})}).then(xM);return l.then.bind(l)}return e(n,(0,en._)(t).concat([a]))},set:function(e,r,o){xT(i);var a=(0,j._)(xO(o),2),l=a[0],c=a[1];return xL(n,{type:M.SET,path:(0,en._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(xM)},apply:function(r,o,a){xT(i);var l=t[t.length-1];if(l===xS)return xL(n,{type:M.ENDPOINT}).then(xM);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,j._)(xA(a),2),u=c[0],s=c[1];return xL(n,{type:M.APPLY,path:t.map(function(e){return e.toString()}),argumentList:u},s).then(xM)},construct:function(e,r){xT(i);var o=(0,j._)(xA(r),2),a=o[0],l=o[1];return xL(n,{type:M.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(xM)}});return o}(e,[],void 0)}}],["throw",{canHandle:function(e){return xE(e)&&xR in e},serialize:function(e){var n=e.value;return[n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function xP(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,eE._)({path:[]},i.data),l=a.id,c=a.type,u=a.path,s=(i.data.argumentList||[]).map(xM);try{var d=u.slice(0,-1).reduce(function(e,n){return e[n]},e),p=u.reduce(function(e,n){return e[n]},e);switch(c){case M.GET:o=p;break;case M.SET:d[u.slice(-1)[0]]=xM(i.data.value),o=!0;break;case M.APPLY:o=p.apply(d,s);break;case M.CONSTRUCT:var f=(0,xC._)(p,(0,en._)(s));o=xU(f);break;case M.ENDPOINT:var h,v=new MessageChannel,g=v.port1,m=v.port2;xP(e,m),h=[g],xB.set(g,h),o=g;break;case M.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,ee._)({value:e},xR,0)}Promise.resolve(o).catch(function(e){return(0,ee._)({value:e},xR,0)}).then(function(e){var t=(0,j._)(xO(e),2),i=t[0],o=t[1];n.postMessage((0,eG._)((0,eE._)({},i),{id:l}),o),c===M.RELEASE&&(n.removeEventListener("message",r),xD(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),xD(n)}}function xD(e){"MessagePort"===e.constructor.name&&e.close()}function xT(e){if(e)throw Error("Proxy has been released and is not useable")}function xA(e){var n,t=e.map(xO);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var xB=new WeakMap;function xU(e){return Object.assign(e,(0,ee._)({},xk,!0))}function xO(e){var n=!0,t=!1,r=void 0;try{for(var i,o=xG[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,j._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var u=(0,j._)(c.serialize(e),2),s=u[0],d=u[1];return[{type:O.HANDLER,name:l,value:s},d]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:O.RAW,value:e},xB.get(e)||[]]}function xM(e){switch(e.type){case O.HANDLER:return xG.get(e.name).deserialize(e.value);case O.RAW:return e.value}}function xL(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,eE._)({id:i},n),t)})}var xX=Symbol("timeout");function xW(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)(0,c.value)()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return n.apply(void 0,(0,en._)(r))}}(e,n[r]));return t}function xN(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(!t.scopes.has(c)){var u="Scope not declared in extension.json: ".concat(c);if(e.flagEnforceScopes)throw e.logger.error(u),Error(u);e.logger.warn("".concat(u,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var xz=ts.Dy.Record(ts.Dy.String(),ts.Dy.String({minLength:1}));function xF(){var e=(0,eB._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return xF=function(){return e},e}function xV(){var e=(0,eB._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return xV=function(){return e},e}function xH(){var e=(0,eB._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return xH=function(){return e},e}function xj(){var e=(0,eB._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return xj=function(){return e},e}function x$(){var e=(0,eB._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return x$=function(){return e},e}function xq(){var e=(0,eB._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return xq=function(){return e},e}function xY(){var e=(0,eB._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return xY=function(){return e},e}function xJ(){var e=(0,eB._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return xJ=function(){return e},e}function xK(){var e=(0,eB._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n    tags {\n      id\n      isOfficial\n    }\n  }\n"]);return xK=function(){return e},e}function xQ(){var e=(0,eB._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return xQ=function(){return e},e}function x0(){var e=(0,eB._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return x0=function(){return e},e}function x1(){var e=(0,eB._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return x1=function(){return e},e}function x2(){var e=(0,eB._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return x2=function(){return e},e}function x4(){var e=(0,eB._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return x4=function(){return e},e}function x5(){var e=(0,eB._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return x5=function(){return e},e}function x3(){var e=(0,eB._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return x3=function(){return e},e}function x7(){var e=(0,eB._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return x7=function(){return e},e}function x6(){var e=(0,eB._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return x6=function(){return e},e}var x8=(0,eU.Ps)(xF()),x9=(0,eU.Ps)(xV()),we=(0,eU.Ps)(xH()),wn=(0,eU.Ps)(xj()),wt=(0,eU.Ps)(x$()),wr=(0,eU.Ps)(xq()),wi=(0,eU.Ps)(xY()),wo=(0,eU.Ps)(xJ()),wa=(0,eU.Ps)(xK()),wl=(0,eU.Ps)(xQ()),wc=(0,eU.Ps)(x0(),wl),wu=(0,eU.Ps)(x1(),wl),ws=(0,eU.Ps)(x2(),x8,x9,we,wn),wd=(0,eU.Ps)(x4(),wl,wt,wr,wi),wp=(0,eU.Ps)(x5(),wl,wt,wr,wi),wf=(0,eU.Ps)(x3()),wh=(0,eU.Ps)(x7(),wo,wa,wc,wu),wv=(0,eU.Ps)(x6(),wo,wa,wc,wu),wg=t(58387);function wm(){var e=(0,eB._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return wm=function(){return e},e}var wy=(0,eU.Ps)(wm()),wb=t(22402);function wZ(e){var n,t;return{registerCommand:(n=(0,eR._)(function(n,t){var r,i,o;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:if(t)return[3,5];e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,p$.V)(r,e)];case 2:return o=a.sent(),[3,4];case 3:throw a.sent();case 4:if(!o.data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,9];case 5:i=n,r=t,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,(0,p$.V)(r,e)];case 7:return o=a.sent(),[3,9];case 8:throw a.sent();case 9:return e.store.set(pq._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,wb.d)(i.commandId),contributions:i.contributions,create:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){return[2,o]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,eR._)(function(n,t){var r,i;return(0,eP.Jh)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in pY.Y)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(pY.Y))),i={id:(0,wb.d)(n.commandId),contributions:n.contributions,create:(a=(0,eR._)(function(n){var r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];return[2,(0,p$.V)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(pq._K,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function wx(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var ww=t(64627),w_=t(29043);function wC(e){var n;return n=(0,eR._)(function(n){var t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,null===tK.l||void 0===tK.l?void 0:tK.l.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var wk=t(55281);function wS(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var wI=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,u=Date.now();u-c>=6e4&&(c=u,l=0);var s=null!==(i=t.manifest.name.trim())&&void 0!==i?i:"Unknown Extension";l<10?(r({content:(0,$.BX)($.HY,{children:[n,(0,$.tZ)("div",{children:(0,$.tZ)(ew.xv,{variant:"small",children:s})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):be.kg.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,c=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}};function wR(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,q.useRef)(null),c=(0,eb.Z)(),u=(0,eT.d)(),s=(0,ev.Z)(),d=(0,q.useRef)(),p=(0,J.P5)({controlName:"flag-extensions-enforce-scopes",default:!1,type:"boolean",logFlagToAnalytics:!1}),f=(0,yN.Ld)(),h=(0,fO.r9)(null==n?void 0:n.installationId),v=(0,c_.F)(),g=(0,q.useRef)(v),m=(0,q.useRef)([]);g.current=v;var y=(0,tt.Z)(function(){return{}},[]),b=(0,ZY.Z)(s.container),Z=(0,j._)((0,q.useState)(!1),2),x=Z[0],w=Z[1];(0,q.useEffect)(function(){b===px.em.CONNECTED&&w(!0)},[b]),(0,q.useEffect)(function(){m.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,q.useEffect)(function(){return function(){d.current&&d.current()}},[]);var _=(0,q.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),C=(0,q.useCallback)(function(){if(l.current&&_()&&n&&h&&u){d.current&&d.current();var e={extension:n,extensionIframe:l.current,services:s,paneId:i,replId:c,flagEnforceScopes:p,getThemeContext:function(){return g.current},onThemeChange:function(e){return m.current.push(e),function(){m.current.splice(m.current.indexOf(e),1)}},store:f,extensionStateAtom:h,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:u,ghostwriter:y};d.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v=e.filePath,g=e.replId,m=e.environmentAPIs,y=e.logger.createLogger({api:"debug"});function b(){return(b=(0,eR._)(function(n){var t,r,i,o;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!==(t=a.sent())&&void 0!==t?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!==(i=a.sent())&&void 0!==i?i:"(unset)",(0,eZ.j)(eZ.U3.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,eR._)(function(){var n,t,i;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null===(n=t.output)||void 0===n?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,eG._)((0,eE._)({filePath:v},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,eR._)(function(e,t){var r,i,o;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:if(r=(0,wk.AH)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return o=lB.Z.from,[4,t.arrayBuffer()];case 2:return i=o.apply(lB.Z,[a.sent()]),[3,4];case 3:i=lB.Z.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,wS(a.sent())]}})})).apply(this,arguments)}function i(){return(i=(0,eR._)(function(e){var t,r,i,o=arguments;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"utf8",r=(0,wk.AH)(e),[4,n.readFile(r)];case 1:var l,c;if((i=a.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(l=i.content,"utf8"===(c=t)?l.toString():"binary"===c?l.toBuffer():l)}]}})})).apply(this,arguments)}function o(){return(o=(0,eR._)(function(e){var t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return t=(0,wk.AH)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,eR._)(function(e){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return t=(0,wk.AH)(e),[4,n.createDir(t)];case 1:return[2,wS(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,eR._)(function(e){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return t=(0,wk.AH)(e),[4,n.deleteDir(t)];case 1:return[2,wS(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,eR._)(function(e){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return t=(0,wk.AH)(e),[4,n.deleteFile(t)];case 1:return[2,wS(r.sent())]}})})).apply(this,arguments)}function u(){return(u=(0,eR._)(function(e,t){var r,i,o;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:return r=(0,wk.AH)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==op.Tv.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,wS(o)]}})})).apply(this,arguments)}function s(){return(s=(0,eR._)(function(e,t){var r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return r=(0,wk.AH)(e),[4,n.copyFile(r,t)];case 1:return[2,wS(i.sent())]}})})).apply(this,arguments)}return xW([xN(e,["read"])],(0,eE._)({readFile:function(e){return i.apply(this,arguments)},readDir:function(e){return o.apply(this,arguments)},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,wk.AH)(e);(0,ag.Mb)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i){r.onChange(e.toString("utf8"));return}r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return xU(function(){a()})},watchDir:function(e,t){var r=(0,wk.AH)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,wk.Oh)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return xU(function(){i()})}},xW([xN(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return c.apply(this,arguments)},copyFile:function(e,n){return s.apply(this,arguments)},move:function(e,n){return u.apply(this,arguments)},watchTextFile:function(e,r){(0,ag.Mb)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i,o=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(xU({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:(i=(0,eR._)(function(e){var n,t,i,o;return(0,eP.Jh)(this,function(a){return n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version,r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})}),function(e){return i.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return xU(function(){o()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function o(){return(o=(0,eR._)(function(e,i){return(0,eP.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,eR._)(function(e){return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,eR._)(function(e){var i;return(0,eP.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}function c(){return(c=(0,eR._)(function(e){var i;return(0,eP.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}return xW([xN(e,["repldb:read"])],(0,eE._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},xW([xN(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return c.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return xU(a.environmentAPIs.watchActiveFile(e))},openFile:(a=e).environmentAPIs.openFile,getActiveFile:function(){return a.environmentAPIs.getActiveFile()}},(l=e.getThemeContext,c=e.onThemeChange,{getCurrentTheme:function(){return l().theme},getCurrentThemeValues:function(){return l().theme.values.global},onThemeChange:function(e){var n=c(e);return xU(function(){n()})},onThemeChangeValues:function(e){var n=c(function(n){return e(n.values.global)});return xU(function(){n()})}}),wI(e,m.toasts),{currentUser:wC(ws),userById:wC(wp),userByUsername:wC(wd),currentRepl:function(e){return wC(wh)((0,eE._)({id:g},e))},replById:wC(wh),replByUrl:wC(wv)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,eR._)(function(e){var r,i,o,a;return(0,eP.Jh)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(i=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!uB.B4.Check(xz,i))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=l.sent(),a=function(){},[2,xU({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var c=n.channel;c.onCommand(function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),c.request({exec:{args:r,env:i,splitStderr:!!o}}).then(function(n){if(n.ok){l({exitCode:0,error:null});return}if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===c.status&&a(),n.error){var r,i,o=Number(null===(i=n.error)||void 0===i?void 0:null===(r=i.match(/-?[0-9]+/g))||void 0===r?void 0:r[0]);l({exitCode:"number"==typeof o?o:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,eE._)({},xW([xN(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(u=e.extension,s=e.paneId,d=e.environmentAPIs,p=!1,{activatePane:function(){s&&(d.activatePane(s),p||(p=!0,(0,eZ.j)(eZ.U3.EXTENSION_USED,{extensionId:u.extensionId,extensionName:u.manifest.name})))}})),{commands:{registerCommand:(f=(0,eR._)(function(n,t){var r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,p$.V)(t,e)];case 2:return r=i.sent(),[3,4];case 3:throw i.sent();case 4:return e.store.set(pq._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return f.apply(this,arguments)}),registerCreateCommand:(h=(0,eR._)(function(n,t){var r,i;return(0,eP.Jh)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in pY.Y)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(pY.Y))),i={id:n.commandId,contributions:n.contributions,create:(a=(0,eR._)(function(n){var r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(xX)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];if(r===xX)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,p$.V)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(pq._K,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return h.apply(this,arguments)})},experimental:(0,eG._)((0,eE._)({},xW([wx(e)],{hasExperimentalApi:function(){return!0}})),{editor:xW([wx(e)],(0,eE._)({},function(){function e(){return(e=(0,eR._)(function(){var e,n,t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,null===tK.l||void 0===tK.l?void 0:tK.l.query({query:wf})];case 1:if(null==(t=i.sent())?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.workspacePreferences)return[2,(0,wg.J)(t.data.currentUser.workspacePreferences)];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:xW([wx(e)],(0,eE._)({},wZ(e))),auth:xW([wx(e)],(0,eE._)({},{getAuthToken:function(){return(0,eR._)(function(){var n,t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===tK.l||void 0===tK.l?void 0:tK.l.query({query:wy,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:xW([wx(e)],(0,eE._)({},wZ(e))),execInShell:e.environmentAPIs.execInShell}),internal:(n=e).store.get(n.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},execInShell:n.environmentAPIs.execInShell,runner:(t=n.services.runner,{getRunState:function(){return t.getRunState()},onStateChanged:function(e){var n=t.onStateChanged(e);return xU(function(){n()})}}),container:(r=n.services.container,{getConnectionState:function(){return r.getConnectionState()},onConnectionStateChanged:function(e){var n=r.onConnectionStateChanged(e);return xU(function(){n()})}}),layout:{revealOrInsertTool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.logger.createLogger({api:"revealOrInsertTool"});if(!n.extension.manifest.tools){t.warn("No tools defined in extension manifest");return}if(n.extension.manifest.tools.length<e+1){t.warn("Tool index out of bounds");return}var r=n.extension.manifest.tools[e],i=r.name||n.extension.manifest.name,o=r.handler;n.environmentAPIs.revealOrInsertTool({extensionId:n.extension.extensionId,installationId:n.extension.installationId,baseUrl:n.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return n.environmentAPIs.getLayoutState()},setLayoutState:function(e){return n.environmentAPIs.setLayoutState(e)}},secrets:(i=n.services.secrets,{setSecret:function(e){var n=e.key,t=e.value;return(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,i.addEntries([{key:n,value:t}])];case 1:return e.sent(),[2,(0,w_.Ok)(!0)]}})})()},getSecret:function(e){return(0,eR._)(function(){var n;return(0,eP.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i.read()];case 1:return[2,w_.Ok.apply(void 0,[t.sent().get(e.key)])];case 2:return n=t.sent(),[2,(0,w_.UG)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,eR._)(function(){return(0,eP.Jh)(this,function(n){return[2,(0,ww.e)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(o=n.services.dotReplit).getConfig,update:o.updateDotReplit},ssh:{getSshConfig:function(){return(0,eR._)(function(){return(0,eP.Jh)(this,function(e){return[2,n.environmentAPIs.getSshConfig()]})})()}},commands:wZ(n)}:null,debug:{info:function(e,n){return y.info(e,n)},warn:function(e,n){return y.warn(e,n)},error:function(e,n){return y.error(e,n)}},handshake:function(e){return b.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=xP(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}(e)}},[u,g,s,_,i,p,f,h,o,c,a,n,t,r,y]);return{isValidExtensionPaneUrl:_,didConnectOnce:x,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,eG._)((0,eE._)({title:r,src:t},x_.Z,e),{ref:(0,ur.l)(l,e.ref),onLoad:function(n){C(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,q.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function wE(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,fO.r9)(n.installationId),i=wR({extension:n,sandboxUrl:(0,hE.Vh)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,$.tZ)("iframe",(0,eE._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var wG=t(40536),wP=t(44510);function wD(){var e=(0,eB._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return wD=function(){return e},e}var wT=(0,eU.Ps)(wD(),wP.R9,wP.gp),wA=(0,ek.X)({container:Q.l0.colWithGap(24),buttonContainer:[Q.l0.rowWithGap(12),Q.l0.justify.end]});function wB(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,$.BX)(K.G,{css:wA.container,children:[(0,$.tZ)(ew.h4,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,$.BX)(ew.xv,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,$.BX)(K.G,{css:wA.buttonContainer,children:[(0,$.tZ)(e6.zx,{onClick:function(){return t()},text:"Cancel"}),(0,$.tZ)(e6.zx,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}function wU(){var e,n,t,r=(0,eb.Z)(),i=(0,eT.d)(),o=(0,ev.Z)().container,a=(0,cn.Z)(o),l=(0,cz.cR)(),c=(0,fO.WF)(),u=ld(),s=(0,wG.Kf)(),d=(0,fO.ot)(),p=(0,wG.dI)();(0,cz.Sp)();var f=(0,fO.Mu)(),h=xx(),v=(0,j._)((0,q.useState)(!1),2),g=v[0],m=v[1];(0,q.useEffect)(function(){r&&i&&p({replId:r,userId:i})},[r,i,p]);var y=(0,pq.c_)(),b=oB(rB);(0,q.useEffect)(function(){b(y)},[y,b]);var Z=oB(oL);n=(e=(0,eE._)({},t$,void 0),eL.a(tq,e)).data,t=oB(oO),(0,q.useEffect)(function(){var e;(null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var x=oT(oM),w=oB(oM),_=function(e){var n,t=e.filterUser;return n=(0,eR._)(function(e){var n,o;return(0,eP.Jh)(this,function(a){switch(a.label){case 0:if(!e.active)return[2,[]];return[4,null===tK.l||void 0===tK.l?void 0:tK.l.query({query:wT,variables:{replId:r,userId:t?i:void 0}})];case 1:if(!(n=a.sent())||n.error||!(o=n.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:lI.pl,data:{type:"action",label:e.name,icon:(0,$.tZ)(cX.Z,{}),description:null!==(n=e.description)&&void 0!==n?n:"",run:function(){e.url&&(e.installation?d({installationId:(0,wb.Ad)(e.installation.id)}):c({replId:r,extensionId:(0,wb.T8)(e.id)}))}}}})]}})}),function(e){return n.apply(this,arguments)}},C=(0,pq.s6)(pY.Y.CommandBar);return lq({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(C.map((t=(0,eR._)(function(n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,p$.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),lq({match:lI.pl,commands:function(e){return e.active||""!==e.searchQuery?[{match:lI.pl,data:{type:"action",label:"Extension Devtools",icon:(0,$.tZ)(lC.Z,{}),description:"Manage and deploy this Repl as an extension",run:function(){u({pane:{type:"extensionDevtools"}})}}},{match:lI.pl,data:{type:"action",label:"URL",icon:(0,$.tZ)(lC.Z,{}),description:"Add an extension by URL",run:function(){m(!0)}}},{match:lI.pl,data:{type:"action",label:"From this Repl",icon:(0,$.tZ)(lC.Z,{}),description:"Load this Repl as an extension",run:function(){a&&s(a)}}},{match:lI.pl,data:{type:"context",label:"My Extensions",icon:(0,$.tZ)(cX.Z,{}),description:"Browse extensions you have created"},commands:_({filterUser:!0})},{match:lI.pl,data:{type:"action",label:"Docs",icon:(0,$.tZ)(xw.Z,{}),description:"Read the Extensions docs",run:function(){u({pane:{type:"docs",data:{url:r3.TT.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,$.tZ)(cX.Z,{}),description:"Manage extensions"}},{enabled:l}),(0,$.BX)($.HY,{children:[(0,$.tZ)(nk.u,{isOpen:g,onRequestClose:function(){return m(!1)},children:(0,$.tZ)(xZ.Z,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return m(!1)},onConfirm:function(e){s(e)}})}),(0,$.tZ)(nk.u,{isOpen:!!x,onRequestClose:function(){return w(null)},children:x?(0,$.tZ)(wB,{fileExtension:x.fileExtension,extensionId:x.extensionId,fileHandlerId:x.fileHandlerId,onCancel:function(){return w(null)},onConfirm:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,Z({fileExtension:x.fileExtension,newAssociation:{extensionId:x.extensionId,fileHandlerId:x.fileHandlerId}})];case 1:return e.sent(),w(null),[2]}})})}):null}),f.map(function(e){return e.manifest.background?(0,$.tZ)(wE,{environmentAPIs:h,extension:e},e.installationId):null})]})}var wO=t(21097),wM=t(21936),wL=t(69792),wX=t(34586),wW=function(e,n){var t=n.checkout,r=n.from,i=n.step;sE.Tb(e,{extra:{checkout:t,from:r,step:i},tags:{checkoutFromQueryParams:!0}})};function wN(){var e=(0,J.P5)({controlName:"flag-legacy-team-repo-features"}),n=(0,l3.Wd)("checkout","string"),t=(0,l3.Wd)("from","string"),r=(0,nG.useRouter)(),i=(0,q.useRef)(!1),o=(0,ev.Z)(),a=o.git,l=o.fs,c=(0,q.useRef)(null),u=(0,cT.Z)(),s=u.hideMessage,d=u.showMessage,p=u.showError,f=(0,q.useCallback)(function(){c.current&&(s(c.current),c.current=null)},[s]);return(0,q.useEffect)(function(){function o(){return(o=(0,eR._)(function(){var o,u;function s(){return(s=(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return c.current=d({content:"Checking out ".concat(n,"..."),type:"notice",time:null}),i.current=!0,[4,a.switchBranch("refs/remotes/origin/".concat(n))];case 1:if((e=r.sent()).error)return wW(e.error,{checkout:n,step:"checkout",from:t}),f(),p("Error checking out ".concat(n,". try using the git pane.")),[2,e];return[2]}})})).apply(this,arguments)}function h(){return(h=(0,eR._)(function(){var e;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return c.current=d({content:"creating ".concat(n," from ").concat(t,"..."),type:"notice",time:null}),i.current=!0,[4,a.createBranch({name:n,startPoint:"refs/remotes/origin/".concat(t),track:!1,checkout:!0})];case 1:if((e=r.sent()).error)return wW(e.error,{checkout:n,step:"create",from:t}),f(),p("Error checking out ".concat(n,". try using the git pane.")),[2,e];return[2]}})})).apply(this,arguments)}return(0,eP.Jh)(this,function(v){switch(v.label){case 0:if(!e||i.current||(i.current=!0,"undefined"===n))return[2];if(!n)return i.current=!0,[2];return c.current=d({content:"fetching...",type:"notice",time:null}),[4,a.fetch()];case 1:if(o=v.sent(),f(),o.error)return wW(o.error,{checkout:n,step:"fetch",from:t}),p("Error fetching. check the git pane for information."),[2,o];if(!t)return[3,3];return[4,function(){return h.apply(this,arguments)}()];case 2:return u=v.sent(),[3,5];case 3:return[4,function(){return s.apply(this,arguments)}()];case 4:u=v.sent(),v.label=5;case 5:if(u)return[2];return[4,l.persist()];case 6:return v.sent(),(0,l3.pg)({router:r,params:[{mode:"delete",key:"checkout"}]}),f(),d({content:"Checked out ".concat(n),type:"confirm",time:1e4}),[2]}})})).apply(this,arguments)}!function(){o.apply(this,arguments)}()},[n,r,a,d,f,p,l,e,t]),(0,$.tZ)(q.Fragment,{})}var wz=t(53156),wF=t(50938),wV=t(11409),wH=t(97687),wj=t(46956);function w$(){var e=(0,nG.useRouter)(),n=(0,nb.S7)(e,"mobileBridge"),t=(0,lU.$g)(),r=lx().toggle,i=(0,wz.Z)(),o=i.isSaving,a=i.isOffline,l=(0,q.useRef)(null),c=(0,wF.T)(),u=ld(),s=lj(),d=(0,ev.Z)().runner,p=(0,wj.B)({runner:d}),f=p.runState,h=p.toggleRunState,v=(0,q.useCallback)(function(e){var n=function(e){switch(e){case wV.Of.OPEN_FILETREE:r();break;case wV.Of.TOGGLE_RUN_STATE:h();break;case wV.Of.TOGGLE_ALLPANES:s();break;case wV.Of.OPEN_NEW_PANE:case wV.Of.TOGGLE_DRAWER:break;default:(0,cQ.Z)(e)}},t=function(e){c(e)},i=function(e){var n=e.type,t=e.messageId;try{u({pane:{type:n}})}catch(e){(0,wH.pl)(t)}};(0,wH.x6)(e,function(e){var r=e.type;switch(r){case wV.cF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case wV.cF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case wV.cF.WORKSPACE_REQUEST_OPEN_PANE:i({messageId:e.id,type:e.paneType});break;default:(0,cQ.Z)(r)}})},[r,h,c,u,s]);return(0,q.useEffect)(function(){if(n){var e={messageType:wV.cF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!1,isSaving:o,isOffline:a,runState:f,activePaneType:null,activePaneFilePath:null,isInAgentMode:t},r=l.current;return(null==r||JSON.stringify(e)!==JSON.stringify(r))&&((0,wH.bG)(e,re()()),l.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[n,v,f,o,a,t,l]),null}var wq=t(88433),wY=t(31797),wJ=t(74945),wK=t(19453),wQ=t(17601),w0=t(55090),w1=t(65894),w2=t(98713),w4=t(21289),w5=t(20597),w3=t(59325),w7=t(72748),w6=t(42704);function w8(e){var n=e.message,t=(0,q.useMemo)(function(){var e=n.timeCreated;return e?(0,w7.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,$.tZ)("div",{className:"resolved-message",children:(0,$.BX)(w6.Ug,{align:"center",spacing:1,children:[r?(0,$.tZ)(w3.Z,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,$.tZ)(ne.Z,{color:"var(--foreground-default)",size:24}),(0,$.BX)(nw.Z,{size:"xsmall",children:["Resolved ",t]})]})})}var w9=(0,et.F4)({"0%":[Q.l0.backgroundColor.foregroundDimmest],"50%":[Q.l0.backgroundColor.foregroundDimmest],"100%":[Q.l0.backgroundColor.foregroundDimmest]}),_e=(0,ek.X)({message:[Q.l0.backgroundColor.backgroundHigher,Q.l0.py(4),Q.l0.px(8),Q.l0.borderRadius(8),Q.l0.fontSize("default"),Q.l0.width("fit-content"),Q.l0.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[Q.l0.minHeight("1em"),Q.l0.display.grid,Q.l0.align.center,{gridAutoFlow:"column",gridGap:Q.TV.space8}],dot:[Q.l0.width(6),Q.l0.height(6),Q.l0.borderRadius(6),Q.l0.display.inlineBlock,Q.l0.backgroundColor.foregroundDimmest,{animation:"".concat(w9," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function _n(e){var n=e.message,t=e.messageStyle,r=(0,q.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,w2.kW)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,w2.kW)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,$.tZ)("div",{children:(0,$.BX)("div",{className:t,css:_e.message,children:[r?(0,$.tZ)(w2.YI,{message:r,codeStyles:{color:Q.TV.orangeStronger,background:Q.TV.backgroundHighest}}):null,i?(0,$.BX)("span",{css:_e.typingIndicator,children:[(0,$.tZ)("span",{css:_e.dot}),(0,$.tZ)("span",{css:_e.dot}),(0,$.tZ)("span",{css:_e.dot})]}):null]})}):null}function _t(e){var n=e.message,t=(0,q.useMemo)(function(){var e=n.timeCreated;return e?(0,w7.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,$.tZ)("div",{className:"resolved-message",children:(0,$.BX)(w6.Ug,{align:"center",spacing:1,children:[r?(0,$.tZ)(w3.Z,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,$.tZ)(ne.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,$.BX)(nw.Z,{size:"xsmall",children:["Unresolved ",t]})]})})}var _r=function(e){var n=new Date(e),t=new Date;return 60>(0,w5.Z)(t,n)?"now":(0,cl.F)(n,!0)},_i=(0,ek.X)({root:[Q.l0.display.grid,Q.l0.backgroundColor.backgroundDefault,Q.l0.color.foregroundDefault,Q.l0.position.relative,{gridTemplateRows:"auto auto",gridRowGap:Q.TV.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[Q.l0.display.flex,Q.l0.align.center,Q.l0.fontSize("small")],messages:[Q.l0.display.grid,{gridRowGap:Q.TV.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[Q.l0.color.foregroundDimmer,{marginRight:"3px"}],time:[Q.l0.color.foregroundDimmest]});function _o(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,$.BX)("div",{css:_i.root,children:[(0,$.BX)("div",{css:_i.messageInfo,children:[(0,$.tZ)("div",{css:_i.avatar,children:(0,$.tZ)(w3.Z,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,$.tZ)("div",{css:_i.username,children:r.username}),(0,$.tZ)("div",{css:_i.time,children:_r(i)})]}),(0,$.tZ)("div",{css:_i.messages,children:t.map(function(e){return(0,$.tZ)(_n,{message:e},e.id)})})]}):null}function _a(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,$.tZ)(_o,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,$.tZ)(w8,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,$.tZ)(_t,{message:t})}return null}var _l=t(43133),_c=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};function _u(){var e=(0,eB._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return _u=function(){return e},e}var _s={},_d=(0,eU.Ps)(_u()),_p=t(28949),_f=t(76684),_h=t(98571),_v=(0,ek.X)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[Q.l0.backgroundColor.backgroundHigher,Q.l0.color.foregroundDefault,Q.l0.borderRadius(8),Q.l0.p(8),Q.l0.fontSize("default"),Q.l0.font.default,Q.l0.overflowY("auto"),Q.l0.maxHeight("calc(".concat(Q.TV.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[Q.l0.display.grid,Q.l0.overflow("hidden"),{paddingTop:"1em",gridRowGap:Q.TV.space4}],mentionSuggestion:[Q.l0.display.grid,Q.l0.align.center,Q.l0.py(8),Q.l0.cursor.pointer,Q.l0.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:Q.TV.space8,'&[data-selected="true"]':[Q.l0.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),_g=q.forwardRef(function(e,n){var t,r,i,o,a=e.annote,l=e.placeholder,c=e.onChangeMessage,u=e.onFinalizeMessage,s=function(){""!==f.trim()&&(u({messageId:Z||re()(),message:f.trim()}),x(null),h(""))},d=null===(o=(t=(0,eE._)({},_s,void 0),eL.a(_d,t)).data)||void 0===o?void 0:null===(i=o.currentUser)||void 0===i?void 0:i.id,p=(0,j._)((0,q.useState)(""),2),f=p[0],h=p[1],v=(0,j._)((0,q.useState)(!1),2),g=v[0],m=v[1],y=(0,q.useRef)(null),b=(0,j._)((0,q.useState)(null),2),Z=b[0],x=b[1],w=(0,w1.Z)(),_=(0,_p.Z)().ref,C=(0,j._)((0,_f.Z)({"@":(r=(0,eR._)(function(e){var n,t;return(0,eP.Jh)(this,function(r){return n=w.filter(function(e){return e.id!==d}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,$.tZ)(w3.Z,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),k=C[0].suggestions,S=C[1],I=(0,_l.Kb)({items:(null==k?void 0:k.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==k?void 0:k.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(k&&n){var t=k.applySuggestion({targetValue:f,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;h(r),setTimeout(function(){y.current&&(y.current.setSelectionRange(i,i),y.current.focus())})}}}),R=I.isOpen,E=I.getInputProps,G=I.getMenuProps,P=I.getItemProps,D=I.highlightedIndex,T=I.getComboboxProps;(0,q.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=r8.Z.get(e,"string");n&&h(n);var t=y.current;return function(){if(t){var n=t.value;if(0===n.length){r8.Z.remove(e);return}r8.Z.set(e,n)}}},[]),(0,q.useEffect)(function(){setTimeout(function(){y.current&&y.current.focus()})},[y]);var A=_c(a).filter(function(e){return e.id!==d}),B="Add a comment";return 1===A.length?B="Reply to @".concat(A[0].username):A.length>1&&(B="Reply"),a.isResolved&&(B="Reply to unresolve this thread"),l&&(B=l),(0,$.BX)("div",{children:[(0,$.BX)("div",(0,eG._)((0,eE._)({css:_v.inputGroup},T()),{children:[(0,$.tZ)("textarea",(0,eE._)({css:_v.inputBox},E({autoFocus:!0,placeholder:B,value:f,onCompositionStart:function(){return m(!0)},onCompositionEnd:function(){return m(!1)},onChange:function(e){var n=e.target.value,t=Z||re()();Z||x(t),h(n),c({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!R&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||g||(e.preventDefault(),s()))},rows:1,ref:function(e){y.current=e,n&&"object"==typeof n&&(n.current=e),S(e),_(e)}}))),(0,$.tZ)(cF.hU,{alt:"Send message",onClick:s,disabled:0===f.length,children:(0,$.tZ)(_h.Z,{})})]})),(0,$.tZ)("div",(0,eG._)((0,eE._)({},G({})),{children:R&&k?(0,$.tZ)("div",{css:_v.mentionSuggestionsContainer,children:k.results.map(function(e,n){return(0,et.az)("div",(0,eG._)((0,eE._)({css:_v.mentionSuggestion,"data-selected":D===n},P({item:e,index:n})),{key:e.value,children:[e.icon,(0,$.tZ)("div",{children:e.value})]}))})}):null}))]})});_g.displayName="ThreadInputForwarded";var _m=["TextMessageContentType","PreviewMessageContentType"],_y=t(61177),_b=(0,ek.X)({generalThread:[Q.l0.pt(0),Q.l0.borderRadius(8,8,0,0),Q.l0.backgroundColor.backgroundDefault,Q.l0.flex.column,Q.l0.flex.growAndShrink(1),Q.l0.overflow("hidden"),Q.l0.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:Q.TV.space8}],messageGroupContainerContainer:[Q.l0.scrollbar.thin,Q.l0.flex.column,Q.l0.height(0),Q.l0.flex.grow(1),Q.l0.overflow("hidden")],messageGroupContainer:[Q.l0.p(12),Q.l0.display.grid,Q.l0.overflowY("auto"),{gridRowGap:Q.TV.space16}],threadInputContainer:[Q.l0.width("100%"),Q.l0.border({color:Q.TV.outlineDimmer,width:1,direction:"top"}),Q.l0.py(8),Q.l0.px(12)]});function _Z(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,c=e.createAnnotationAnchorPlaceholder,u=void 0===c?function(){}:c,s=(0,eb.Z)(),d=(0,q.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,u,s,d,p=a.value;!t||(null==p?void 0:null===(c=p.user)||void 0===c?void 0:c.id)!==(null==t?void 0:null===(u=t.user)||void 0===u?void 0:u.id)||(null==p?void 0:null===(s=p.anchor)||void 0===s?void 0:s.id)!==(null==t?void 0:t.anchorId)||!_m.includes(t.messageType)||!_m.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p?void 0:null===(d=p.anchor)||void 0===d?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,en._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,q.useEffect)(function(){r||u({annotationAnchor:{id:t2()(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]),(0,q.useEffect)(function(){r||u({annotationAnchor:{id:t2()(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]);var p=(0,q.useRef)(null);(0,_y.Z)(n&&r||null);var f=function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)};return((0,q.useEffect)(function(){f()},[p,r]),r)?(0,$.BX)("div",{css:_b.generalThread,onClick:function(){return t(!0)},children:[(0,$.tZ)("div",{css:_b.messageGroupContainerContainer,children:(0,$.tZ)("div",{css:_b.messageGroupContainer,ref:p,children:d.map(function(e){return(0,$.tZ)(_a,{messageGroup:e},e.messages[0].id)})})}),(0,$.tZ)("div",{css:_b.threadInputContainer,children:(0,$.tZ)(_g,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,eZ.j)(eZ.U3.MESSAGE_SENT,{replId:s,source:"chat",newThread:0===r.messages.length})}})})]}):null}function _x(){var e=(0,eB._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return _x=function(){return e},e}var _w={},__=(0,eU.Ps)(_x()),_C=t(50575),_k=t(86866),_S=t(89829),_I=t(55070),_R={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,$.tZ)(_k.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,$.tZ)(_C.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,$.tZ)(_I.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,$.tZ)(ne.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,$.tZ)(l_.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,$.tZ)(_S.Z,{})}},search:{placeholder:"Search threads…"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven’t started any threads yet.",secondary:function(e){return(0,$.BX)($.HY,{children:["Select code and press ",(0,$.tZ)(te.bM,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},_E=t(73307),_G=t(9487),_P=t(66938),_D=t(49638),_T=function(e){var n=(0,_D.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}},_A=t(90632),_B=t(66975),_U=t(48180),_O=function(e){var n,t=e.thread,r=e.onClick,i=t.messages.filter(function(e){return!e.seen}).length,o=null===(n=(0,_G.Vy)(t.path?t:null))||void 0===n?void 0:n.snippet,a=(0,_D.Z)(t.id,null,null).thread,l=(0,w4.kM)(),c=_T(t.id).handleToggleResolved,u={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},s=t.messages[0],d=(0,q.useMemo)(function(){return(null==s?void 0:s.timeCreated)?(0,_U.Y)(s.timeCreated):"some time ago"},[s]);return t.user?(0,$.BX)(nI.Tg,{css:[nq.gU.filled,Q.l0.overflow("hidden"),l===t.id&&{borderColor:Q.TV.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,$.BX)(nI.Tg,{elevated:!0,css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.spaceBetween,Q.l0.flex.grow(1),Q.l0.px(8),Q.l0.py(8)],children:[(0,$.tZ)(K.G,{css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.rowWithGap(4)],children:(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!1,children:u.threadOpened(d,t.user.username)})}),(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.rowWithGap(4)],children:[o&&t.path?(0,$.tZ)(cF.hU,{alt:u.jumpToCode,onClick:function(){return r(t)},children:(0,$.tZ)(_A.Z,{})}):null,t.isResolved?(0,$.tZ)(e6.zx,{text:u.unresolveThread,size:"small",colorway:"primary",onClick:function(){c(!1)}}):(0,$.tZ)(cF.hU,{alt:u.resolveThread,onClick:function(){c(!0)},children:(0,$.tZ)(ne.Z,{})})]})]}),o&&t.path?(0,$.tZ)(_P.F,{elevation:"root",path:t.path,initialDoc:o.lines.join("\n"),startLineNumber:o.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,s?(0,$.tZ)(K.G,{css:[Q.l0.p(8),Q.l0.py(12)],children:(0,$.tZ)(_B.Z,{thread:a,message:s},s.id)}):null,t.messages.length>1&&(0,$.BX)(K.G,{css:[Q.l0.pb(12),Q.l0.px(8),Q.l0.flex.row,Q.l0.align.center,Q.l0.rowWithGap(4),Q.l0.color.foregroundDimmer],children:[(0,$.tZ)(K.G,{css:[Q.l0.position.relative],children:(0,$.tZ)(_E.Z,{unreadDot:i>0})}),(0,$.tZ)(ew.xv,{variant:"small",multiline:!1,children:u.replyCount(t.messages.length,i)})]})]}):null},_M=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,$.tZ)(K.G,{css:[Q.l0.pb(8)],children:(0,$.tZ)(pe.Q,{css:[Q.TV.singleLine,Q.l0.px(8)],headerContent:(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.justify.spaceBetween,Q.l0.flex.growAndShrink(1),Q.l0.mr(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.rowWithGap(8),Q.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(lw.Z,{path:n,size:20}),(0,$.tZ)(ew.xv,{css:[Q.l0.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,$.tZ)("div",{css:[Q.l0.flex.shrink(0),Q.l0.width(8),Q.l0.height(8),Q.l0.backgroundColor.redStronger,Q.l0.borderRadius("full")]}):null]}),children:(0,$.tZ)("div",{css:[Q.l0.mt(8),Q.l0.colWithGap(8)],children:t.map(function(e){return(0,$.tZ)(_O,{thread:e,onClick:r},e.id)})})})})};(h=L||(L={})).CHRONOLOGICAL="chronological",h.CODE_ORDER="codeOrder",(v=X||(X={})).PARTICIPATING="participating",v.RESOLVED="resolved",v.UNREAD="unread",v.INBOX="inbox";var _L=function(e){var n,t,r,i=e.isChatOnly,o=e.openFile,a=(0,eb.Z)(),l=ZW(a,{onReceiveAnnotationUpdate:function(){}}),c=l.annotations,u=l.loading,s=l.generalThread,d=l.createAnnotationAnchorPlaceholder,p=l.createAnnotationMessage,f=l.updateThreadPreview,h=(n=(0,eE._)({},_w,void 0),eL.a(__,n)),v=h.data,g=h.loading,m=u||g,y=(0,j._)((0,q.useState)(!1),2),b=y[0],Z=y[1],x=(0,w4.a9)(),w=(0,j._)((0,q.useState)(""),2),_=w[0],C=w[1],k=(0,j._)((0,q.useState)("INBOX"),2),S=k[0],I=k[1],R=(0,j._)((0,q.useState)("CHRONOLOGICAL"),2),E=R[0],G=R[1],P=(0,q.useMemo)(function(){var e,n=null==v?void 0:null===(e=v.currentUser)||void 0===e?void 0:e.id;return c.filter(function(e){if("INBOX"===S)return!e.isResolved;if("RESOLVED"===S)return e.isResolved;if("PARTICIPATING"===S){var t;return!n||(null===(t=e.user)||void 0===t?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==S||e.messages.some(function(e){return!e.seen})})},[v,c,S]),D=(0,q.useMemo)(function(){return P.filter(function(e){var n,t;return 0===_.length||null!==(t=null===(n=e.path)||void 0===n?void 0:n.toLowerCase().includes(_.toLowerCase()))&&void 0!==t&&t})},[_,P]),T=(0,q.useMemo)(function(){return(0,en._)(D).sort(function(e,n){if("CHRONOLOGICAL"===E){var t,r,i=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),o=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===E?(0,ag.IV)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[D,E]),A=(0,q.useMemo)(function(){return Object.values((0,eE._)({},T)).map(function(e){return(0,en._)(e).sort(function(e,n){if("CHRONOLOGICAL"===E){var t,r,i,o,a,l,c=new Date(null===(a=e.messages[0])||void 0===a?void 0:a.timeCreated),u=new Date(null===(l=n.messages[0])||void 0===l?void 0:l.timeCreated);if(c&&u)return c<u?1:-1}else if("CODE_ORDER"===E)return(null!==(r=null!==(t=e.indexStart)&&void 0!==t?t:e.indexEnd)&&void 0!==r?r:0)<(null!==(o=null!==(i=n.indexStart)&&void 0!==i?i:n.indexEnd)&&void 0!==o?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(T)[t]]=n,e},{})},[T,E]),B=(0,w1.Z)().map(function(e){return e.username}),U=(t=(0,j._)((0,ZX.n)(),1)[0],function(){t({variables:{replId:a}})}),O=(r=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){return e.path&&(o(e.path),x(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),M=(0,te.gf)("editor.action.startThread");return i?(0,$.tZ)(_Z,{generalThreadsOpen:b,setGeneralThreadsOpen:Z,generalThread:s,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;f({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,w2.kW)(t,{users:(0,en._)(B).concat(["everyone"])});p({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:d}):(0,$.tZ)(nI.Tg,{className:"threads-inbox",css:[Q.l0.height("100%"),Q.l0.width("100%"),Q.l0.overflow("hidden"),Q.l0.position.relative],"aria-busy":m,children:m?(0,$.tZ)(K.G,{css:[Q.l0.display.flex,Q.l0.align.center,Q.l0.justify.center,Q.l0.height("100%")],children:(0,$.tZ)(no.Z,{size:24})}):(0,$.BX)($.HY,{children:[(0,$.tZ)(K.G,{className:"threads-inbox-header",css:[Q.l0.py(12),Q.l0.px(8),Q.l0.position.sticky,Q.l0.top(0),Q.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.align.center,Q.l0.flex.wrap,{gap:8}],children:[(0,$.tZ)(vZ.II,{placeholder:_R.search.placeholder,value:_,onChange:function(e){return C(e.target.value)},css:[Q.l0.flex.grow(1)]}),(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.maxWidth("100%"),{gap:8}],children:[(0,$.tZ)(K.G,{css:[Q.l0.flex.shrink(1)],children:(0,$.tZ)(wQ.ZE,{cssProps:[Q.l0.flex.shrink(1),{span:Q.l0.flex.shrink(1)}],icon:_R.filters[X[S]].icon,suffix:(0,$.tZ)(nn.Z,{}),label:_R.filters[X[S]].label,onAction:function(e){switch(e){case"toggle-inbox":I("INBOX");break;case"toggle-unread":I("UNREAD");break;case"toggle-participating":I("PARTICIPATING");break;case"toggle-resolved":I("RESOLVED")}},children:Object.entries(_R.filters).map(function(e){var n=(0,j._)(e,2),t=(n[0],n[1]);return(0,$.tZ)(w0.c,{"aria-label":t.label,children:(0,$.BX)(K.G,{css:Q.l0.rowWithGap(8),children:[t.icon,(0,$.tZ)(ew.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,$.tZ)(K.G,{css:[Q.l0.flex.shrink(1)],children:(0,$.tZ)(wQ.ZE,{cssProps:[Q.l0.flex.shrink(1),{span:Q.l0.flex.shrink(1)}],icon:_R.sorts[L[E]].icon,suffix:(0,$.tZ)(nn.Z,{}),label:_R.sorts[L[E]].label,onAction:function(e){switch(e){case _R.sorts.chronological.key:G("CHRONOLOGICAL");break;case _R.sorts.codeOrder.key:G("CODE_ORDER")}},children:Object.entries(_R.sorts).map(function(e){var n=(0,j._)(e,2),t=(n[0],n[1]);return(0,$.tZ)(w0.c,{"aria-label":t.label,children:(0,$.BX)(K.G,{css:Q.l0.rowWithGap(8),children:[t.icon,(0,$.tZ)(ew.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,$.tZ)(K.G,{css:[Q.l0.flex.shrink(1)],children:(0,$.tZ)(e6.zx,{iconLeft:(0,$.tZ)(ne.Z,{}),text:_R.markAsRead,onClick:U,css:{span:Q.l0.flex.shrink(1)}})})]})]})}),0===c.length?(0,$.tZ)(dB.Z,{pane:{type:"threadInbox"},maxWidth:450,bodyText:(0,$.BX)($.HY,{children:[_R.empty.noThreadsCreated.text.primary,M?(0,$.BX)($.HY,{children:[(0,$.tZ)("br",{}),_R.empty.noThreadsCreated.text.secondary(M)]}):void 0]})}):(0,$.tZ)($.HY,{children:Object.keys(A).length>0?(0,$.tZ)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.overflowY("auto"),Q.l0.scrollbar.thin],children:Object.keys(A).map(function(e,n){return(0,$.tZ)(_M,{path:e||"-",threads:Object.values(A)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&O(e)}},e)})}):(0,$.tZ)(dB.Z,{pane:{type:"threadInbox"},maxWidth:450,asciiArt:"Binoculars",headerText:_R.empty.noThreadsFound.text.primary,bodyText:_R.empty.noThreadsFound.text.secondary})})]})})},_X=ts.Dy.Object({type:ts.Dy.Literal("chat")}),_W=(0,et.iv)([Q.l0.flex.growAndShrink(1)]),_N={Content:function(e){var n=e.options;return(0,$.tZ)(nI.Tg,{background:"default",css:_W,children:(0,$.tZ)(_L,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Q.TV.blueStronger,size:n},children:(0,$.tZ)(wK.Z,{})})},getTitle:function(){return"Chat"},description:"Chat with collaborators in this Repl",category:rw.hc.Collaboration,decode:function(e){return uB.B4.Decode(_X,e)}},_z=t(25138),_F={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=oB(rk),a=(0,q.useRef)(null);(0,lT.Wk)(function(){return{focus:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.call(a)}}},[]);var l=(0,q.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),c=lF({currentPaneId:r,openPane:l});return(0,$.tZ)(n9.X,{autoFocus:i,command:c,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:rw.hc.Other,decode:_z.J},_V=t(61891),_H=t(47846),_j=t(70823),_$={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=lx(),a=(0,uZ.Z)(o.isOpen),l=(0,q.useCallback)(function(){a||o.toggle()},[a,o]);return(0,$.tZ)(_H.Z,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:_V.Z,openSidebar:l,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,$.tZ)(cZ.Z,{})},getTitle:function(){return"Configure Repl"},category:rw.hc.WorkspaceFeatures,decode:_j.J},_q=t(97763);function _Y(){return(0,$.tZ)(dB.Z,{pane:{type:"debugger"},headerText:"Debugger is unavailable for this Repl",bodyText:" We are working on making more features configurable and the debugger available for more languages. Please check back again in the future. Meanwhile, if you're working on a website, be sure to check out our Devtools in the Webview pane. ",asciiArt:"Computer"})}function _J(e){var n=e.client;return(0,$.tZ)(e6.zx,{size:"small",variant:"outlined",onClick:function(){return function(e){if("undefined"!=typeof Blob){var n=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download="debugger-logs.txt",t.href=URL.createObjectURL(n),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}}(n.getDebugLogs())},text:"Download Logs",iconLeft:(0,$.tZ)(hU.Z,{})})}var _K=(0,ek.X)({initialBreakpoint:[Q.l0.display.inlineBlock,Q.l0.backgroundColor.accentPrimaryDefault,Q.l0.borderRadius("full"),Q.l0.width(8),Q.l0.height(8)],breakpoint:[Q.l0.display.flex,Q.l0.maxWidth("100%"),Q.l0.align.center],frame:[Q.l0.display.flex,Q.l0.align.center,Q.l0.color.foregroundDimmer,Q.l0.borderRadius(4),Q.l0.fontSize("default"),{flex:"1 1 auto",height:Q.TV.space32,cursor:"pointer","&:hover":{backgroundColor:Q.TV.backgroundHigher,color:Q.TV.foregroundDefault},".frameButton":{opacity:0},"&:focus-within":{color:Q.TV.foregroundDefault},"&:hover .frameButton":{background:Q.TV.backgroundHigher,backgroundColor:Q.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:Q.TV.backgroundHighest}}],circle:[Q.l0.backgroundColor.accentPrimaryDefault,Q.l0.borderRadius("full"),Q.l0.width(11),Q.l0.height(11),Q.l0.mx(8),{flex:"0 0 auto",opacity:.5,'&[data-verified="true"]':{opacity:1}}],line:[Q.l0.font.code,Q.l0.backgroundColor.backgroundHigher,Q.l0.borderRadius(2),{padding:"1px 2px"}],location:[Q.l0.font.code,Q.l0.display.flex,Q.l0.minWidth(0),Q.l0.fontSize("default"),Q.l0.px(8),{flex:"1 1 auto"}],path:[Q.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function _Q(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e.breakpoints[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,j._)(o.value,2),c=l[0],u=l[1],s=!0,d=!1,p=void 0;try{for(var f,h=u[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var v=f.value;n.push((0,$.tZ)(_0,{breakpoint:v,file:c,line:v.line,verified:v.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(c,":").concat(v.line,":").concat(v.pid1Id,":").concat(v.dapId)))}}catch(e){d=!0,p=e}finally{try{s||null==h.return||h.return()}finally{if(d)throw p}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,$.BX)($.HY,{children:[(0,$.tZ)(nx.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,$.tZ)(w6.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,$.BX)(nw.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,$.tZ)("span",{css:_K.initialBreakpoint})," by clicking on a line number in the code editor."]})]})}function _0(e){var n=e.breakpoint,t=e.file,r=e.line,i=e.verified,o=e.onClick,a=e.onRemove,l=(0,bQ.om)(t);return(0,$.tZ)($.HY,{children:(0,$.tZ)(w6.gC,{spacing:1,align:"stretch",children:(0,$.tZ)("div",{css:_K.breakpoint,children:(0,$.BX)("div",{css:_K.frame,onClick:function(){o(t,r)},children:[(0,$.tZ)("div",{css:_K.circle,"data-verified":i}),(0,$.tZ)("div",{css:_K.line,children:r}),(0,$.tZ)("div",{css:_K.location,children:(0,$.tZ)("span",{css:_K.path,children:l||t})}),(0,$.tZ)(cF.hU,{className:"frameButton",alt:"Remove breakpoint",onClick:function(){a({breakpoint:n})},children:(0,$.tZ)(uI.Z,{})})]})})})})}var _1=t(57323),_2=t(36688),_4=t(3488),_5=t(33889),_3=t(81253),_7=t(45252);function _6(e){var n=e.client,t=e.debugConfig,r=(0,uZ.Z)(null==n?void 0:n.state),i=(0,uZ.Z)(null==n?void 0:n.supportsStepBack);return(0,$.BX)(K.G,{css:Q.l0.rowWithGap(2),children:[i?(0,$.BX)($.HY,{children:[(0,$.tZ)(cF.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null==n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,$.tZ)(_1.Z,{})}),(0,$.tZ)(cF.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"stepBack"}),null==n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,$.tZ)(_4.Z,{})})]}):null,(0,$.tZ)(_9,{stop:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"stop"}),null==n||n.stop()},start:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"start"}),null==n||n.start(t)},state:r}),(0,$.tZ)(cF.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"nextStep"}),null==n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,$.tZ)(dP.Z,{})}),(0,$.tZ)(cF.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"skipStep"}),null==n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,$.tZ)(_5.Z,{rotate:90})}),(0,$.tZ)(cF.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eZ.j)(eZ.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null==n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,$.tZ)(_2.Z,{})})]})}var _8=(0,et.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function _9(e){var n=e.state,t=e.start,r=e.stop;return"terminated"===n?(0,$.tZ)(cF.hU,{css:Q.l0.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,$.tZ)(_3.Z,{})}):"stopping"===n||null===n?(0,$.tZ)(cF.hU,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,$.tZ)(no.Z,{})}):(0,$.tZ)(cF.hU,{css:"initializing"===n||"preinitializing"===n?[Q.l0.color.foregroundDimmer,{animationName:_8.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:Q.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,$.tZ)(_7.Z,{})})}function Ce(e){return(0,$.BX)($.HY,{children:[(0,$.tZ)(nx.Z,{truncate:!0,level:5,children:"Call stack"}),(0,$.tZ)(w6.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map(function(n){return(0,$.tZ)(Ct,{frame:n,onClick:e.onFrameClick},n.id)})})]})}var Cn=(0,et.iv)({"&":{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"100%",height:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-small)",fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".name":{flex:"0 0 auto",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"},".path":{flex:"0 1 auto"},".line":{display:"inline-block",marginRight:"var(--space-8)",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"}});function Ct(e){var n,t,r=e.frame,i=e.onClick,o=null===(n=r.source)||void 0===n?void 0:n.name,a=null===(t=r.source)||void 0===t?void 0:t.path,l=o&&(0,bQ.om)(o),c=a&&(0,bQ.om)(a),u=a&&(0,bQ.IT)(a);return(0,$.tZ)($.HY,{children:(0,$.BX)("div",{className:"frame",onClick:function(){return u&&i(u,r.line)},css:Cn,children:[(0,$.tZ)("div",{className:"label name",children:r.name}),(0,$.BX)("div",{className:"label path",children:[(0,$.tZ)("span",{className:"line",children:r.line}),l||c||o||a]})]})})}var Cr=t(92678),Ci=t(13387),Co=(0,ek.X)({root:[Q.l0.height("100%"),Q.l0.width("100%"),Q.l0.p(8),Q.l0.overflow("auto"),Q.l0.colWithGap(8),{a:{fontSize:Q.TV.fontSizeDefault,color:Q.TV.accentPrimaryDefault,fontWeight:Q.TV.fontWeightMedium}}],mainContainer:[Q.l0.flex.grow(1),Q.l0.colWithGap(16)],downloadLogsContainer:[Q.l0.flex.grow(0),Q.l0.flex.row,Q.l0.justify.end]});function Ca(e){var n=(0,sP.U)(),t=(0,ev.Z)().debuggest,r=(0,uZ.Z)(t.mainClient),i=(0,uZ.Z)(r?r.state:null),o=(0,uZ.Z)(r?r.stackFrames:null),a=(0,uZ.Z)(r?r.variables:null),l=(0,uZ.Z)(r?r.breakpoints:null),c=(0,nE.R3)(),u=(0,eg.Vu)(),s=(0,_q.T)(),d=null!=s&&!!s.debuggers&&s.debuggers.length>0,p=(0,j._)((0,q.useState)(null),2),f=p[0],h=p[1],v=(0,q.useMemo)(function(){return function(e,n,t,r){if(!(null==e?void 0:e.debuggers))return[];var i=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var o=n.indexOf(t);-1!==o&&(n.splice(o,1),n.splice(0,0,t))}var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var v,g=e.debuggers[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var m=v.value;if(m.fileParam){var y=(0,Ci.rF)(m.fileTypeAttrs);null===y&&m.language&&(y=Ci.$R.from(m.language)),y&&(0,Ci.JW)(d,y)&&i.push({debuggerOption:m,filePath:d,title:"Debug ".concat(d," (").concat(m.name,")")})}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var b=!0,Z=!1,x=void 0;try{for(var w,_=e.debuggers[Symbol.iterator]();!(b=(w=_.next()).done);b=!0){var C=w.value;C.fileParam||i.push({debuggerOption:C,title:"Debug (".concat(C.name,")")})}}catch(e){Z=!0,x=e}finally{try{b||null==_.return||_.return()}finally{if(Z)throw x}}return i}(s||null,u,c,(null==s?void 0:s.entrypoint)||"")},[c,u,s]);(0,q.useEffect)(function(){(v.length>0&&!f||f&&!v.find(function(e){return e.debuggerOption.id===f.debuggerOption.id&&e.filePath===f.filePath}))&&h(v[0])},[v]);var g=function(n,t){var r=(0,bQ.om)(n);r&&e.onOpenFile({path:r,line:t})};return d?(0,$.BX)(K.G,{css:Co.root,children:[(0,$.BX)(K.G,{css:Co.mainContainer,children:[v.length>0&&(0,$.tZ)(yY.P,{id:n("debug-config"),items:v,selectedItem:f,onChange:function(e){h(e)},"aria-label":"Select a debugging configuration"}),(0,$.tZ)(_6,{client:r,debugConfig:null!=f?f:void 0}),null!=l?(0,$.tZ)(_Q,{breakpoints:l,onBreakpointClick:g,onRemove:function(e){var n=e.breakpoint;r&&n.pid1Id&&r.removeBreakpoint(n.pid1Id)}}):null,null!=a&&r&&"paused"===i?(0,$.tZ)(Cr.Z,{client:r,variables:a}):null,null!=o&&"paused"===i?(0,$.tZ)(Ce,{frames:o,onFrameClick:g}):null]}),null!=r?(0,$.tZ)(K.G,{css:Co.downloadLogsContainer,children:(0,$.tZ)(_J,{client:r})}):null]}):(0,$.tZ)(_Y,{})}var Cl=t(28850),Cc=ts.Dy.Object({type:ts.Dy.Literal("debugger")}),Cu=t(20963),Cs={Content:function(e){var n=e.options;return(0,$.tZ)(Ca,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Cu.TV.orangeStronger,size:n},children:(0,$.tZ)(Cl.Z,{})})},getTitle:function(){return"Debugger"},description:"Step through your code as it runs to inspect its execution, test its behavior, and fix bugs",category:rw.hc.WorkspaceFeatures,decode:function(e){return uB.B4.Decode(Cc,e)}},Cd=t(50544),Cp=(0,et.iv)([Q.l0.border({color:Q.TV.outlineDimmest,width:1,style:"solid"}),Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),Cf={Content:function(e){var n,t=e.pane;return(0,$.tZ)(nI.Tg,{css:Cp,children:(0,$.tZ)("iframe",{title:"Replit Docs",src:(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.url)||r3.TT.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Q.TV.yellowStrongest,size:n},children:(0,$.tZ)(xw.Z,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:rw.hc.Other,decode:Cd.J},Ch=t(44134),Cv=(0,et.iv)([Q.l0.backgroundColor.backgroundDefault,Q.l0.height("100%"),Q.l0.borderRadius(4),{overflow:"hidden"}]),Cg=(0,et.iv)([Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.justify.center,Q.l0.align.center,Q.l0.display.flex]);function Cm(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,fO.jx)(t.installationId),o=(0,fO.r9)(t.installationId),a=wR({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,hE.Vh)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,c=a.isValidExtensionPaneUrl,u=a.getIframeProps,s=a.reloadSandbox;return(0,lT.L5)(function(){return{actions:[{icon:(0,$.tZ)(l9.Z,{}),label:"Refresh",run:function(){s()},type:"action",description:"Refresh the extension pane",key:"refresh"}]}},[]),(0,$.tZ)(K.G,{className:"extension-pane",css:Cv,children:o&&l?(0,$.tZ)($.HY,{children:c()?(0,$.tZ)("iframe",(0,eE._)({},u({css:{width:"100%",height:"100%",border:"none"}}))):(0,$.tZ)(K.G,{css:[Q.l0.p(12)],children:(0,$.BX)(ew.xv,{children:["Invalid url:"," ",(0,$.tZ)(Ch.Z,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,$.tZ)(K.G,{css:Cg,children:(0,$.tZ)(no.Z,{})})})}var Cy=ts.Dy.Object({extensionId:ts.Dy.Unsafe(ts.Dy.String()),installationId:ts.Dy.Unsafe(ts.Dy.String()),baseUrl:ts.Dy.String(),path:ts.Dy.String(),name:ts.Dy.String(),filePath:ts.Dy.Optional(ts.Dy.Union([ts.Dy.String(),ts.Dy.Null(),ts.Dy.Undefined()])),icon:ts.Dy.Optional(ts.Dy.Union([ts.Dy.String(),ts.Dy.Null(),ts.Dy.Undefined()]))}),Cb=ts.Dy.Object({type:ts.Dy.Literal("extension"),data:Cy}),CZ={Content:function(e){var n=e.pane,t=e.options,r=xx();return(0,$.tZ)(Cm,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,$.tZ)(n$.Z,{src:(0,hE.Vh)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,$.tZ)(cX.Z,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" — "+e.data.name:e.data.name},category:rw.hc.WorkspaceExtensions,decode:function(e){return uB.B4.Decode(Cb,e)}},Cx=t(94622),Cw=t(96601),C_=t(20025),CC=t(83839),Ck=t(61435),CS=t(49549),CI=t(6696),CR=t(86689),CE=t(89882),CG=(0,ek.X)({codeBlock:[Q.l0.p(8),Q.l0.borderRadius(8),Q.l0.position.relative],codeBlockCopyButton:[Q.l0.position.absolute,Q.l0.top(4),Q.l0.right(4)],selectionContainer:[Q.l0.colWithGap(16),Q.l0.maxHeight(400),Q.l0.overflowY("scroll")],fsNode:[Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.px(4),Q.l0.py(2),Q.l0.borderRadius(8),Q.l0.cursor.pointer],fsNodeActive:[Q.l0.backgroundColor.backgroundHigher],noResultsContainer:[Q.l0.p(8),Q.l0.flex.row,Q.l0.center]});function CP(e){var n=e.content,t=(0,cT.Z)().showConfirm;return(0,$.BX)(nI.Tg,{tag:"code",elevated:!0,css:CG.codeBlock,children:[n,(0,$.tZ)(cF.hU,{alt:"Copy",tooltipBehavior:"hidden",css:CG.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,$.tZ)(cE.Z,{})})]})}function CD(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,j._)((0,q.useState)([]),2),a=o[0],l=o[1],c=(0,j._)((0,q.useState)(""),2),u=c[0],s=c[1],d=(0,sP.U)(),p=(0,ev.Z)().fs,f=(0,cz.gI)(),h=(0,q.useMemo)(function(){return(0,hZ.P)(t)},[t]);return((0,q.useEffect)(function(){h&&p.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(h)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[h,f]),h)?(0,$.BX)(K.G,{css:CG.selectionContainer,children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(12)],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Choose an image"}),f?(0,$.tZ)(e_.E,{icon:(0,$.tZ)(f3.Z,{}),colorway:"primary",text:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(2)],children:[(0,$.BX)(ew.xv,{children:["Images must be served from"," ",(0,$.tZ)("span",{css:[Q.l0.font.code,Q.l0.backgroundColor.accentPrimaryDimmer,Q.l0.borderRadius(4),Q.l0.px(4),Q.l0.py(2),Q.l0.mr(2),Q.l0.border({color:Q.TV.accentPrimaryDefault})],children:f.path}),"."]}),(0,$.tZ)(ew.xv,{css:[Q.l0.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,$.BX)(ew.xv,{css:[Q.l0.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,$.tZ)("span",{css:[Q.l0.font.code,Q.l0.fontSize("small"),Q.l0.backgroundColor.backgroundHigher,Q.l0.borderRadius(4),Q.l0.px(4),Q.l0.py(2),Q.l0.mr(2),Q.l0.border({color:Q.TV.outlineDefault})],children:null===(n=t.match(/\{(.*)\}/))||void 0===n?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,$.tZ)(_l.ZP,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},o({refKey:"innerRef"})),{css:[Q.l0.colWithGap(16)],children:[(0,$.tZ)(K.G,{css:[Q.l0.position.relative],children:(0,$.tZ)(vZ.II,(0,eE._)({id:d("file-search")},n({ref:null,value:u,onChange:function(e){return s(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,$.tZ)(K.G,{children:a&&a.length?(0,$.tZ)(K.G,(0,eG._)((0,eE._)({elevated:!0,tag:"ul",css:(Q.l0.pt(8),Q.l0.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(u)}).filter(function(e){return!f||e.path.startsWith(f.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,$.BX)(K.G,(0,eG._)((0,eE._)({tag:"li",css:[CG.fsNode,n===i&&CG.fsNodeActive]},r({item:e,index:n,disabled:!!f&&!e.path.startsWith(f.relativePath)})),{children:[(0,$.tZ)(lw.Z,{path:e.path,size:16}),(0,$.tZ)(ew.xv,{children:e.filename}),(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,$.tZ)(K.G,{css:[Q.l0.pt(8)],children:(0,$.tZ)(ew.xv,{color:"dimmer",children:(0,$.BX)("em",{children:["No files found matching ",(0,$.tZ)("code",{children:t})]})})})})]}))}})]}):(0,$.BX)(K.G,{css:[Q.l0.flex.column,Q.l0.colWithGap(16)],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,$.BX)(ew.xv,{children:["The glob pattern ",(0,$.tZ)("code",{children:t})," could not be parsed."]}),(0,$.tZ)(K.G,{css:Q.l0.border({direction:"bottom",color:Q.TV.backgroundHigher})}),(0,$.BX)(K.G,{css:Q.l0.colWithGap(8),children:[(0,$.tZ)(ew.xv,{children:(0,$.tZ)("strong",{children:"Match all Javascript Files"})}),(0,$.tZ)(CP,{content:"**/*.js"})]}),(0,$.BX)(K.G,{css:Q.l0.colWithGap(8),children:[(0,$.tZ)(ew.xv,{children:(0,$.tZ)("strong",{children:"Match JSON files at root level"})}),(0,$.tZ)(CP,{content:"*.json"})]}),(0,$.BX)(K.G,{css:Q.l0.colWithGap(8),children:[(0,$.tZ)(ew.xv,{children:(0,$.tZ)("strong",{children:"Match specified file extensions"})}),(0,$.tZ)(CP,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}(g=W||(W={})).Installing="Installing",g.Loading="Loading",g.Failed="Failed",g.Success="Success";var CT={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function CA(e){var n,t=e.isOpen,r=e.close,i=e.onSubmit,o=(0,wG.I1)(),a=(0,wG.zm)(),l=(0,j._)((0,q.useState)(null),2),c=l[0],u=l[1],s=(0,j._)((0,q.useState)(!0),2),d=s[0],p=s[1],f=(0,j._)((0,q.useState)(null),2),h=f[0],v=f[1],g=(0,j._)((0,q.useState)(null),2),m=g[0],y=g[1],b=(0,q.useRef)(null),Z=(0,j._)((0,q.useState)(null),2),x=Z[0],w=Z[1],_=(0,j._)((0,q.useState)(null),2),C=_[0],k=_[1],S=(m||C||"").startsWith("/")?m||C:"/"+(m||C),I=(0,j._)((0,q.useState)(null),2),R=I[0],E=I[1],G=function(){k(null),u(null),y(null),w(null),E(null),v(null)},P=function(){p(!0),u(null)};(0,q.useEffect)(function(){y(C)},[C]);var D=(0,q.useCallback)((n=(0,eR._)(function(e){var n,t,r,i;return(0,eP.Jh)(this,function(l){switch(l.label){case 0:var s;if(!S||!d||"Success"===c||"Failed"===c)return[2];if(s=(0,eR._)(function(e,n){var t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return u("Loading"),v(t=(0,hE.Vh)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return E(n),u("Success"),p(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return s.apply(this,arguments)},t=e||a)return[3,8];u("Installing"),l.label=1;case 1:return l.trys.push([1,5,,8]),[4,o()];case 2:if(!(r=l.sent()))return[3,4];return[4,D(r)];case 3:case 6:return l.sent(),[2];case 4:case 7:return[3,8];case 5:if(l.sent(),!a)return[3,7];return[4,D(a)];case 8:if(!t)return[3,11];return i=S.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))];case 9:if(l.sent())return[3,11];return[4,n(t,S)];case 10:l.sent(),l.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,S,o,c,d]);(0,q.useEffect)(function(){if(x){var e=x.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});k((-1!==t?"/".concat(x):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||x),p(!0),D()}},[D,x]);var T=x?x.split("/"):[],A=T[T.length-1];return(0,$.tZ)(nk.u,{isOpen:t,onRequestClose:r,children:x?(0,$.BX)(K.G,{css:[Q.l0.flex.column,Q.l0.colWithGap(16)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(e6.zx,{text:"Back",size:"small",iconLeft:(0,$.tZ)(_4.Z,{}),onClick:function(){w(null),G()}}),(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.rowWithGap(4),Q.l0.align.center],children:[(0,$.tZ)(CE.Z,{}),(0,$.tZ)(ew.xv,{color:"dimmer",children:A||""})]})]}),(0,$.tZ)(ew.xv,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4)],children:[(0,$.tZ)(vZ.II,{defaultValue:m||"",ref:b,placeholder:"/icon.png",onChange:function(e){return y(e.target.value)},autoFocus:!0,disabled:"Loading"===c||"Installing"===c||"Success"===c}),h&&("Loading"===c||"Success"===c||"Failed"===c)?(0,$.tZ)("a",{href:h,target:"_blank",children:(0,$.BX)(ew.xv,{color:"dimmer",variant:"small",css:[Q.l0.rowWithGap(4),Q.l0.display.flex,{fontStyle:"italic"}],children:[(0,$.BX)("span",{css:[Q.l0.truncate],children:["Loading"===c?"Checking ":null,"Success"===c?"Found at ":null,"Failed"===c?"Failed to load ":null,h]}),(0,$.tZ)(K.G,{css:[Q.l0.display.inlineBlock],children:(0,$.tZ)(nt.Z,{})})]})}):null]}),(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.justify.spaceBetween,Q.l0.align.center],children:[(0,$.tZ)(K.G,{css:[Q.l0.flex.row,Q.l0.rowWithGap(4),Q.l0.align.center],children:c?(0,$.tZ)($.HY,{children:"Loading"===c?(0,$.tZ)(no.Z,{}):(0,$.tZ)(e_.E,{text:CT[c],colorway:"Failed"===c?"negative":"positive",icon:"Failed"===c?(0,$.tZ)(na.Z,{}):(0,$.tZ)(ne.Z,{})})}):null}),"Failed"===c?(0,$.BX)(K.G,{css:Q.l0.rowWithGap(8),children:[(0,$.tZ)(e6.zx,{text:"Add Anyways",onClick:function(){var e=C||x;null!==e&&i(e),G(),r()},size:"small"}),(0,$.tZ)(e6.zx,{text:"Try Again",onClick:function(){P()},size:"small"})]}):null,R&&"Success"===c?(0,$.tZ)(e6.zx,{text:"Continue",iconLeft:(0,$.tZ)(ne.Z,{}),colorway:"primary",onClick:function(){i(R),G(),r()}}):null]})]}):(0,$.tZ)(CD,{openFile:w,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var CB=t(20260),CU=(0,ek.X)({centerRowGap8:[Q.l0.rowWithGap(8),Q.l0.align.center],featureContainer:[Q.l0.flex.column,Q.l0.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[Q.l0.border({style:"dashed"}),Q.l0.borderRadius(8),Q.l0.p(16),Q.l0.colWithGap(8),Q.l0.center],featureDetails:[Q.l0.flex.column,Q.l0.colWithGap(4),Q.l0.flex.growAndShrink(1)],featureOptionsRow:[Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.justify.spaceBetween],newFeatureFieldWrapper:[Q.l0.p(8),Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.justify.spaceBetween,Q.l0.border({direction:"bottom",color:Q.TV.backgroundHighest})],inputCounterFlex:[Q.l0.flex.row,Q.l0.justify.spaceBetween,Q.l0.align.center]});function CO(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,j._)((0,q.useState)([]),2),a=o[0],l=o[1],c=(0,j._)((0,q.useState)(!1),2),u=c[0],s=c[1];return(0,$.BX)(K.G,{children:[(0,$.BX)(K.G,{css:Q.l0.pb(12),children:[(0,$.BX)(K.G,{css:CU.centerRowGap8,children:[(0,$.BX)(K.G,{css:CU.centerRowGap8,children:[(0,$.tZ)(CB.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,$.tZ)(cF.hU,{onClick:function(){s(!u)},alt:"Add a new Feature",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,$.tZ)(lC.Z,{})})]}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,$.BX)(K.G,{css:Q.l0.colWithGap(8),children:[u?(0,$.tZ)(CL,{onSubmit:function(e){t(e),s(!1)},onCancel:function(){return s(!1)}}):null,(0,$.tZ)(K.G,{css:CU.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,$.tZ)(CL,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,$.tZ)(CM,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,en._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,$.tZ)($.HY,{children:u?null:(0,$.BX)(K.G,{css:CU.noFeaturesPlaceholder,children:[(0,$.tZ)(ew.xv,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,$.tZ)(e6.zx,{variant:"outlined",text:"New Feature",iconLeft:(0,$.tZ)(lC.Z,{}),onClick:function(){return s(!0)}})]})})})]})]})}function CM(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,$.BX)(nI.Tg,{elevated:!0,css:[Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.p(8),i?null:Q.l0.border({direction:"bottom",color:Q.TV.backgroundHighest})],children:[(0,$.tZ)(CX,{size:64,icon:n.image}),(0,$.BX)(K.G,{css:CU.featureDetails,children:[(0,$.BX)(K.G,{css:CU.featureOptionsRow,children:[(0,$.tZ)(ew.xv,{children:n.title}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(cF.hU,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,$.tZ)(sK.Z,{color:Q.TV.accentNegativeStronger})}),(0,$.tZ)(cF.hU,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,$.tZ)(uP.Z,{})})]})]}),(0,$.tZ)(ew.xv,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function CL(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,j._)((0,q.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],c=(0,j._)((0,q.useState)((null==r?void 0:r.body)||""),2),u=c[0],s=c[1],d=(0,j._)((0,q.useState)((null==r?void 0:r.image)||null),2),p=d[0],f=d[1],h=a.length>=3&&u.length>=16;return(0,$.BX)(nI.Tg,{css:[Q.l0.flex.column,i||r?null:Q.l0.borderRadius(8),r?Q.l0.border({color:Q.TV.outlineDefault}):[i?null:Q.l0.border({direction:"bottom",color:Q.TV.backgroundHighest})]],elevated:!0,children:[(0,$.BX)(K.G,{css:CU.newFeatureFieldWrapper,children:[(0,$.tZ)(ew.xv,{children:a||"New Feature"}),(0,$.BX)(K.G,{css:Q.l0.rowWithGap(8),children:[(0,$.tZ)(e6.zx,{text:"Cancel",onClick:t}),(0,$.tZ)(e6.zx,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:u,image:p})},disabled:!h})]})]}),(0,$.BX)(K.G,{css:[Q.l0.p(8),Q.l0.colWithGap(8)],children:[(0,$.BX)(K.G,{css:Q.l0.colWithGap(4),children:[(0,$.BX)(K.G,{css:CU.inputCounterFlex,children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:"Title"}),(0,$.tZ)(CW,{value:a.length,min:3})]}),(0,$.tZ)(vZ.II,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4)],children:[(0,$.BX)(K.G,{css:CU.inputCounterFlex,children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:"Body"}),(0,$.tZ)(CW,{value:u.length,min:16})]}),(0,$.tZ)(vZ.B,{value:u,onChange:function(e){return s(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,$.BX)(K.G,{css:Q.l0.rowWithGap(8),children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4),Q.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(ew.xv,{color:"dimmer",children:"Image (Recommended)"}),(0,$.tZ)(ew.xv,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your Repl. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,$.tZ)(CX,{size:100,icon:p,editable:!0,onSubmit:function(e){f(e)}})]})]})]})}function CX(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,ev.Z)().container,l=(0,cn.Z)(a),c=l&&t?(0,hE.Vh)(l,t):null,u=(0,j._)((0,q.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)($.HY,{children:[(0,$.tZ)(nI.Tg,{background:"default",css:[i?nq.gU.filledAndOutlined:null,Q.l0.flex.row,Q.l0.center,Q.l0.width(n),Q.l0.height(.75*n),Q.l0.maxWidth(n),Q.l0.maxHeight(.75*n),Q.l0.borderRadius(4),Q.l0.border({color:Q.TV.backgroundHighest}),Q.l0.flex.grow(1),{background:c?"".concat(Q.TV.backgroundDefault," url(").concat(c,") no-repeat center center / cover"):Q.TV.backgroundDefault}],onClick:function(){return d(!0)},children:c?null:(0,$.tZ)(CE.Z,{color:Q.TV.foregroundDimmest,size:24})}),i?(0,$.tZ)(CA,{isOpen:s,close:function(){return d(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function CW(e){var n=e.value,t=e.min;return(0,$.BX)(ew.xv,{css:{color:n>=t?Q.TV.accentPositiveStronger:Q.TV.foregroundDimmest},children:[n,"/",t]})}var CN=function(){return(0,$.tZ)(K.G,{css:[Q.l0.justify.center,Q.l0.align.center,Q.l0.display.flex,Q.l0.width("100%"),Q.l0.height("100%")],children:(0,$.tZ)(no.Z,{})})};function Cz(e){var n=e.children;return(0,$.tZ)(K.G,{css:[Q.l0.colWithGap(12),Q.l0.p(16)],children:(0,$.tZ)(nI.Tg,{elevated:!0,css:[Q.l0.p(16),Q.l0.borderRadius(8),Q.l0.colWithGap(8)],children:n})})}var CF=t(42121),CV=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,$.tZ)(Cz,{children:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(16),Q.l0.p(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.display.flex,Q.l0.align.center],children:[(0,$.tZ)(na.Z,{}),(0,$.tZ)(ew.xv,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Details:"}),(0,$.tZ)(K.G,{css:[Q.l0.colWithGap(8)],children:n instanceof CF.Jg?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,$.BX)(K.G,{css:[Q.l0.display.flex,Q.l0.flex.row,Q.l0.rowWithGap(4)],children:[(0,$.tZ)(ew.xv,{css:[Q.l0.font.code,Q.l0.color.orangeStrongest,Q.l0.backgroundColor.orangeDimmest],children:t}),(0,$.tZ)(ew.xv,{children:r})]},n)}):(0,$.tZ)(K.G,{tag:"pre",children:n.message})}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(e6.zx,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,hS.$E)(r)})}}),(0,$.tZ)(e6.zx,{iconLeft:(0,$.tZ)(vq.Z,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},CH=t(52744),Cj=t(24986),C$=(m=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})}),function(e){return m.apply(this,arguments)}),Cq={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},CY=function(){var e=(0,j._)((0,q.useState)(null),2),n=e[0],t=e[1],r=(0,q.useCallback)(function(e){t(function(n){if(!n)throw Error(Cq.stateUndefined);return(0,eG._)((0,eE._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},CJ=function(){var e=(0,ev.Z)(),n=e.fs,t=e.dotReplit,r=CY(),i=r.state,o=r.setState,a=r.updateString,l=(0,j._)((0,q.useState)(0),2),c=l[0],u=l[1],s=(0,j._)((0,q.useState)(!1),2),d=s[0],p=s[1],f=(0,q.useCallback)((0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,C$(n)];case 1:return e.sent(),[2]}})}),[n]);(0,q.useEffect)(function(){o(null);var e=!1,r=function(){};function i(){return(i=(0,eR._)(function(){var i,l,c,u,s,d,p;return(0,eP.Jh)(this,function(f){switch(f.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=j._.apply(void 0,[f.sent(),2]))[0],u=l[1],e)return[2];if(!c.files||u.error)return o({fileReadError:Cq.readFile}),[2];if(d=(0,wk.Oh)((0,CH.AH)(null!==(s=null===(i=u.config.extension)||void 0===i?void 0:i.outputDirectory)&&void 0!==s?s:"dist")),!(p=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value;if(!g.startsWith(r))return g}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return null!==(n=i[0])&&void 0!==n?n:null}({filePaths:c.files,outputDir:d})))return o({fileReadError:Cq.noManifest}),[2];return r=n.watchTextFile(p,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:p})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:Cq.removedManifest})},onError:function(){o({fileReadError:Cq.readFile})}}),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,c,o]);var h=(0,q.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=b2.ku(i.manifestStr);return(0,hE.U4)(e)}catch(e){return{error:e,manifest:null}}},[i]),v=(0,q.useCallback)(function(e){if(!i||(null==h?void 0:h.error)||null!==i.fileReadError)throw Error(Cq.parseManifest);var n=b2.r$(i.manifestStr,e);i.writeChange((0,Cj.F)(i.manifestStr,n)),a(n)},[i,h,a]),g={retry:function(){u(function(e){return e+1})},creatingExtensionJson:d,setCreatingExtensionJson:p,createExtensionJson:f,updateString:a,updateManifest:v};return i?"string"==typeof i.fileReadError?(0,eG._)((0,eE._)({},g),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):h?h.manifest?(0,eG._)((0,eE._)({},g),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:h}):(0,eG._)((0,eE._)({},g),{__status:"fileParseError",state:i,parsed:{manifest:null,error:h.error}}):(0,eG._)((0,eE._)({},g),{__status:"fileReadError",state:{fileReadError:Cq.noManifest},parsed:null}):(0,eG._)((0,eE._)({},g),{__status:"loading",state:null,parsed:null})};(y=N||(N={})).loading="loading",y.fileReadError="fileReadError",y.fileParseError="fileParseError",y.success="success";var CK=function(e){var n=e.message,t=CJ(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,$.BX)(Cz,{children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.display.flex,Q.l0.align.center],children:[(0,$.tZ)(na.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:n})]}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(e6.zx,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,$.tZ)(no.Z,{}):(0,$.tZ)(lC.Z,{}),onClick:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})}),(0,$.tZ)(e6.zx,{text:"Retry",iconLeft:(0,$.tZ)(l9.Z,{}),onClick:function(){o()}})]})]})};function CQ(){var e=(0,eB._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return CQ=function(){return e},e}function C0(){var e=(0,eB._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return C0=function(){return e},e}var C1={};CQ();var C2=(0,eU.Ps)(C0()),C4=(0,ek.X)({iconContainer:[Q.l0.position.relative,Q.l0.width(64),Q.l0.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[Q.l0.flex.column,Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0)],iconOverlay:[Q.l0.flex.column,Q.l0.colWithGap(4),Q.l0.center,Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.width("100%"),Q.l0.height("100%"),Q.l0.backgroundColor.backgroundOverlay,Q.l0.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}],metadataContainer:[Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.width("100%")],metadataWrapper:[Q.l0.flex.column,Q.l0.colWithGap(8),Q.l0.align.start,Q.l0.flex.grow(1)],listingLabel:[Q.l0.flex.row,Q.l0.align.center,Q.l0.rowWithGap(8)],metadataOptionsContainer:[Q.l0.rowWithGap(8),Q.l0.justify.spaceBetween,Q.l0.width("100%")]});function C5(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,wG.zm)(),i=(0,wG.I1)(),o=(0,wG.EO)(),a=(0,wG.bN)(),l=(0,cz.nP)(),c=(0,j._)((0,q.useState)(!1),2),u=c[0],s=c[1],d=(0,j._)((0,q.useState)(!1),2),p=d[0],f=d[1];return(0,$.tZ)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.flex.wrap,{rowGap:8}],children:(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[r||p?(0,$.BX)($.HY,{children:[(0,$.tZ)(e6.zx,{size:"small",text:"Reload",iconLeft:p?(0,$.tZ)(no.Z,{}):(0,$.tZ)(l9.Z,{}),disabled:p,onClick:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:if(!r)return[2];return f(!0),[4,o(r.installationId)];case 1:return e.sent(),f(!1),[2]}})})}),(0,$.tZ)(e6.zx,{size:"small",text:"Unload",iconLeft:(0,$.tZ)(CI.Z,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,$.tZ)(e6.zx,{size:"small",text:"Load locally",colorway:"primary",iconLeft:u?(0,$.tZ)(no.Z,{}):(0,$.tZ)(hU.Z,{}),loading:u,onClick:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return s(!0),[4,i()];case 1:return e.sent(),s(!1),[2]}})})}),l?(0,$.tZ)(e6.zx,{size:"small",text:"View on Store",iconLeft:(0,$.tZ)(CR.Z,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,$.tZ)(e6.zx,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,$.tZ)(uP.Z,{})})]})})}function C3(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,ev.Z)().container,i=(0,cn.Z)(r),o=CJ(),a=o.parsed,l=o.state,c=o.__status;if(c===N.loading)return(0,$.tZ)(CN,{});if(c===N.fileReadError)return(0,$.tZ)(CK,{message:l.fileReadError});var u=a.manifest,s=a.error;return s?(0,$.tZ)(CV,{performPaneOperation:n,manifestPath:l.manifestPath,error:s}):(0,$.tZ)(K.G,{css:[Q.l0.colWithGap(16),Q.l0.width("100%")],children:(0,$.BX)(nI.Tg,{elevated:!0,css:[Q.l0.p(12),Q.l0.borderRadius(8),Q.l0.colWithGap(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.row,Q.l0.rowWithGap(16),Q.l0.align.center],children:[(0,$.tZ)(K.G,{css:[Q.l0.flex.grow(0),Q.l0.display.flex,Q.l0.flex.row],children:(0,$.tZ)(Ck.I,{size:64,baseUrl:null!=i?i:null,icon:u.icon})}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(w6.Ug,{align:"center",justify:"space-between",children:(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:u.name})}),(0,$.tZ)(ew.xv,{variant:"text",color:"dimmest",children:u.description})]})]}),(0,$.tZ)(C5,{setSelectedTab:t,performPaneOperation:n})]})})}function C7(e){var n,t,r,i,o,a,l,c,u,s=e.manifest,d=e.onSubmit,p=e.updateManifest,f=(0,cz.nP)(),h=(0,eT.d)(),v=(0,sP.U)(),g=(0,j._)((0,q.useState)(null!==(a=s.name)&&void 0!==a?a:""),2),m=g[0],y=g[1],b=(0,j._)((0,q.useState)(null!==(l=s.description)&&void 0!==l?l:""),2),Z=b[0],x=b[1],w=(0,j._)((0,q.useState)(null!==(c=s.longDescription)&&void 0!==c?c:void 0),2),_=w[0],C=w[1],k=(0,j._)((0,q.useState)(!1),2),S=k[0],I=k[1],R=(0,ev.Z)().container,E=(0,cn.Z)(R),G=(n=(0,eE._)({},C1,{variables:{id:f||""},skip:!f}),eL.a(C2,n)),P=G.data,D=G.loading,T=G.refetch,A=(0,j._)((0,CC.Ne)(),2),B=A[0],U=A[1].loading,O=(null==P?void 0:null===(t=P.extension)||void 0===t?void 0:t.__typename)==="Extension"&&(null==P?void 0:null===(r=P.extension)||void 0===r?void 0:r.user.id)===h,M=(null==P?void 0:null===(i=P.extension)||void 0===i?void 0:i.__typename)==="Extension"&&(null==P?void 0:null===(o=P.extension)||void 0===o?void 0:o.isListed);return(0,$.BX)(K.G,{tag:"form",css:[Q.l0.colWithGap(16)],onSubmit:function(e){e.preventDefault(),d({name:m,description:Z,longDescription:_})},children:[(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(4)],children:[(0,$.tZ)(ew.xv,{css:[Q.l0.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),D||U?(0,$.tZ)(no.Z,{}):(0,$.BX)(sG.E,{css:Q.l0.colWithGap(8),name:"extensionListingStatus",value:M?"listed":"unlisted",disabled:!O,onChange:function(e){B({variables:{extensionId:f||"",isListed:"listed"===e.target.value}}).then(function(){return T()})},children:[O?null:(0,$.tZ)(K.G,{css:[Q.l0.width("fit-content")],children:(0,$.tZ)(e_.E,{text:"You need to release this extension before listing it.",icon:(0,$.tZ)(f3.Z,{}),colorway:"yellow"})}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(sG.Y,{id:v("listed"),value:"listed"}),(0,$.tZ)("label",{htmlFor:v("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(sG.Y,{id:v("unlisted"),value:"unlisted"}),(0,$.tZ)("label",{htmlFor:v("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,$.tZ)(nv.R,{}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(4)],tag:"label",htmlFor:v("name"),children:[(0,$.tZ)(ew.xv,{children:"Extension Name"}),(0,$.tZ)(vZ.II,{id:v("name"),placeholder:"Give your extension a name",value:m,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(4)],children:[(0,$.tZ)(ew.xv,{children:"Extension Icon"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.align.center],children:[(0,$.BX)(K.G,{css:C4.iconContainer,children:[(0,$.tZ)(K.G,{css:C4.iconWrapper,children:(0,$.tZ)(Ck.I,{size:64,baseUrl:null!=E?E:null,icon:s.icon})}),(0,$.BX)(K.G,{css:C4.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return I(!0)},children:[(0,$.tZ)(uP.Z,{}),(0,$.tZ)(ew.xv,{variant:"small",children:"Edit"})]})]}),(0,$.tZ)(e6.zx,{text:"Choose from file system",iconLeft:(0,$.tZ)(CS.Z,{}),onClick:function(){return I(!0)}})]})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(4)],tag:"label",htmlFor:v("tagline"),children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(0)],children:[(0,$.tZ)(ew.xv,{children:"Tagline"}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,$.tZ)(vZ.II,{id:v("tagline"),placeholder:"Give your extension a short tagline",value:Z,onChange:function(e){x(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(4)],tag:"label",htmlFor:v("longDescription"),children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(0)],children:[(0,$.tZ)(ew.xv,{children:"Description"}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,$.tZ)(vZ.B,{id:v("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=_?_:"",onChange:function(e){C(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,$.tZ)(nv.R,{}),(0,$.tZ)(CO,{features:null!==(u=s.features)&&void 0!==u?u:[],onDelete:function(e){if((null===(n=s.features)||void 0===n?void 0:n.length)===1&&0===e){var n,t,r=(0,eE._)({},s);delete r.features,p(r)}else p((0,eG._)((0,eE._)({},s),{features:null===(t=s.features)||void 0===t?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;p((0,eG._)((0,eE._)({},s),{features:(0,en._)(null!==(i=null===(t=s.features)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,en._)(null!==(o=null===(r=s.features)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;p((0,eG._)((0,eE._)({},s),{features:(0,en._)(null!==(n=s.features)&&void 0!==n?n:[]).concat([e])}))}}),(0,$.tZ)(K.G,{css:[Q.l0.rowWithGap(12),{alignSelf:"end"},Q.l0.pt(8)],children:(0,$.tZ)(e6.zx,{text:"Continue",iconRight:(0,$.tZ)(cx.Z,{}),colorway:"primary",type:"submit",disabled:!m||!Z||!_})}),(0,$.tZ)(CA,{isOpen:S,close:function(){return I(!1)},onSubmit:function(e){p((0,eG._)((0,eE._)({},s),{icon:e}))}})]})}function C6(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,j._)((0,q.useState)([]),2),l=a[0],c=a[1],u=(0,j._)((0,q.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)(K.G,{children:[(0,$.BX)(K.G,{css:[Q.l0.pb(12)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(mc.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,$.tZ)(cF.hU,{onClick:function(){return d(!s)},alt:"Add a new File Handler",tooltipBehavior:s?"hidden":"default",disabled:s,children:(0,$.tZ)(lC.Z,{})})]}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8)],children:[s?(0,$.tZ)(C8,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,$.tZ)(C8,{initialFileHandler:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,$.BX)(nI.Tg,{css:[Q.l0.flex.row,Q.l0.justify.spaceBetween,Q.l0.align.center,Q.l0.p(8),Q.l0.borderRadius(8),Q.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,$.tZ)(ew.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.align.center],children:[(0,$.tZ)(cF.hU,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,$.tZ)(sK.Z,{})}),(0,$.tZ)(cF.hU,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){c(function(e){return(0,en._)(e).concat([n])})},children:(0,$.tZ)(uP.Z,{})}),(0,$.tZ)(e6.zx,{iconLeft:(0,$.tZ)(CS.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,$.tZ)($.HY,{children:s?null:(0,$.BX)(K.G,{css:[Q.l0.border({style:"dashed"}),Q.l0.borderRadius(8),Q.l0.p(16),Q.l0.colWithGap(8),Q.l0.center],children:[(0,$.tZ)(ew.xv,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,$.tZ)(e6.zx,{variant:"outlined",text:"New File Handler",iconLeft:(0,$.tZ)(lC.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function C8(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,c=(0,j._)((0,q.useState)(null!==(n=null==l?void 0:l.name)&&void 0!==n?n:""),2),u=c[0],s=c[1],d=(0,j._)((0,q.useState)(null!==(t=null==l?void 0:l.icon)&&void 0!==t?t:""),2),p=d[0],f=d[1],h=(0,j._)((0,q.useState)(null!==(r=null==l?void 0:l.handler)&&void 0!==r?r:""),2),v=h[0],g=h[1],m=(0,j._)((0,q.useState)(null!==(i=null==l?void 0:l.glob)&&void 0!==i?i:""),2),y=m[0],b=m[1],Z=(0,sP.U)();return(0,$.BX)(nI.Tg,{css:[Q.l0.borderRadius(8),Q.l0.border({color:Q.TV.outlineDimmest}),Q.l0.p(8),Q.l0.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:u,icon:p,handler:v,glob:y})},elevated:!0,children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(2),Q.l0.justify.spaceBetween,Q.l0.border({color:Q.TV.outlineDimmest,direction:"bottom"}),Q.l0.align.center,Q.l0.flex.wrap,{rowGap:8}],children:[(0,$.tZ)(ew.xv,{multiline:!1,children:u||"New File Viewer"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(e6.zx,{text:"Cancel",onClick:function(){a()}}),(0,$.tZ)(e6.zx,{colorway:"primary",iconLeft:(0,$.tZ)(ne.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:Z("name"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,$.tZ)(vZ.II,{id:Z("name"),placeholder:"SVG Editor",value:u,onChange:function(e){s(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:Z("handler"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,$.tZ)(vZ.II,{id:Z("handler"),placeholder:"/svg-editor",value:v,onChange:function(e){g(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:Z("glob"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,$.tZ)(vZ.II,{id:Z("glob"),placeholder:"*.svg",value:y,onChange:function(e){b(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:Z("icon"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,$.tZ)(vZ.II,{id:Z("icon"),placeholder:"/svg-editor-logo.png",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]})]})]})}function C9(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,j._)((0,q.useState)([]),2),l=a[0],c=a[1],u=(0,j._)((0,q.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)(K.G,{children:[(0,$.BX)(K.G,{css:[Q.l0.pb(12)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(lk.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,$.tZ)(cF.hU,{onClick:function(){return d(!s)},alt:"Add a new tool",disabled:s,tooltipBehavior:s?"hidden":"default",children:(0,$.tZ)(lC.Z,{})})]}),(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8)],children:[s?(0,$.tZ)(ke,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,$.tZ)(ke,{initialTool:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,$.BX)(nI.Tg,{css:[Q.l0.flex.row,Q.l0.justify.spaceBetween,Q.l0.align.center,Q.l0.p(8),Q.l0.borderRadius(8),Q.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,$.tZ)(ew.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.align.center],children:[(0,$.tZ)(cF.hU,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,$.tZ)(sK.Z,{})}),(0,$.tZ)(cF.hU,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){c(function(e){return(0,en._)(e).concat([n])})},children:(0,$.tZ)(uP.Z,{})}),(0,$.tZ)(e6.zx,{iconLeft:(0,$.tZ)(mm.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,$.tZ)($.HY,{children:s?null:(0,$.BX)(K.G,{css:[Q.l0.border({style:"dashed"}),Q.l0.borderRadius(8),Q.l0.p(16),Q.l0.colWithGap(8),Q.l0.center],children:[(0,$.tZ)(ew.xv,{color:"dimmest",children:"You haven't added any tools"}),(0,$.tZ)(e6.zx,{variant:"outlined",text:"New Tool",iconLeft:(0,$.tZ)(lC.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function ke(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,j._)((0,q.useState)(null!==(n=null==a?void 0:a.name)&&void 0!==n?n:""),2),c=l[0],u=l[1],s=(0,j._)((0,q.useState)(null!==(t=null==a?void 0:a.icon)&&void 0!==t?t:null),2),d=s[0],p=s[1],f=(0,j._)((0,q.useState)(null!==(r=null==a?void 0:a.handler)&&void 0!==r?r:""),2),h=f[0],v=f[1],g=(0,sP.U)();return(0,$.BX)(nI.Tg,{tag:"form",css:[Q.l0.borderRadius(8),Q.l0.border({color:Q.TV.outlineDimmest}),Q.l0.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:c,icon:d,handler:h})},children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(2),Q.l0.justify.spaceBetween,Q.l0.border({color:Q.TV.outlineDimmest,direction:"bottom"}),Q.l0.align.center,Q.l0.flex.wrap,{rowGap:8}],children:[(0,$.tZ)(ew.xv,{multiline:!1,children:c||"New Tool"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8)],children:[(0,$.tZ)(e6.zx,{text:"Cancel",onClick:function(){o()}}),(0,$.tZ)(e6.zx,{colorway:"primary",iconLeft:(0,$.tZ)(ne.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:g("name"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,$.tZ)(vZ.II,{id:g("name"),placeholder:"SQL Viewer",value:c,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:g("handler"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,$.tZ)(vZ.II,{id:g("handler"),placeholder:"/sql",value:h,onChange:function(e){v(e.currentTarget.value)},required:!0})]}),(0,$.BX)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(2)],tag:"label",htmlFor:g("icon"),children:[(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,$.tZ)(vZ.II,{id:g("icon"),placeholder:"/sql-logo.png",value:null!=d?d:"",onChange:function(e){p(e.currentTarget.value||null)},required:!0})]})]})]})}function kn(e){var n,t,r,i,o,a=e.manifest,l=e.performPaneOperation,c=e.update,u=(0,wG.zm)(),s=(0,wG.I1)(),d=(0,j._)((0,q.useState)(null),2),p=d[0],f=d[1];return(0,$.BX)(K.G,{css:[Q.l0.colWithGap(24),Q.l0.width("100%")],children:[(0,$.tZ)(C6,{onOpen:(n=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){return f(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;c((0,eG._)((0,eE._)({},a),{fileHandlers:null===(n=a.fileHandlers)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,eG._)((0,eE._)({},a),{fileHandlers:(0,en._)(null!==(i=null===(t=a.fileHandlers)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,en._)(null!==(o=null===(r=a.fileHandlers)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,eG._)((0,eE._)({},a),{fileHandlers:(0,en._)(null!==(n=a.fileHandlers)&&void 0!==n?n:[]).concat([e])}))},fileHandlers:null!==(i=a.fileHandlers)&&void 0!==i?i:[]}),(0,$.tZ)(C9,{onOpen:(t=(0,eR._)(function(e){var n,t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=e.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;c((0,eG._)((0,eE._)({},a),{tools:null===(n=a.tools)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,eG._)((0,eE._)({},a),{tools:(0,en._)(null!==(i=null===(t=a.tools)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,en._)(null!==(o=null===(r=a.tools)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,eG._)((0,eE._)({},a),{tools:(0,en._)(null!==(n=a.tools)&&void 0!==n?n:[]).concat([e])}))},tools:null!==(o=a.tools)&&void 0!==o?o:[]}),(0,$.tZ)(nk.u,{isOpen:!!p,onRequestClose:function(){return f(null)},children:p?(0,$.tZ)(CD,{glob:p.glob,openFile:(r=(0,eR._)(function(e){var n,t;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:if(!p)throw Error("Expected pending file handler");if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=p.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,hE.Vh)(n.baseUrl,p.handler),filePath:e}}}),f(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var kt=t(35870),kr=t(16409),ki=(0,et.iv)(nq.gU.filled,Q.l0.position.relative,Q.l0.p(4),Q.l0.border({color:Q.TV.outlineDimmer}),Q.l0.backgroundColor.backgroundHigher,{"&[data-complete]":[Q.l0.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),ko=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,$.tZ)(K.G,{tag:"li",css:ki,"data-complete":n,children:(0,$.BX)(K.G,{css:[Q.l0.p(4)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(6),Q.l0.align.center],children:[n?(0,$.tZ)(ne.Z,{color:Q.TV.accentPositiveStrongest,size:16,css:[Q.l0.mr(4)]}):null!=o?o:null,(0,$.tZ)(ew.xv,{variant:"small",color:n?"dimmer":"default",css:[Q.l0.fontWeight.medium],children:i})]}),r?(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",children:r}):null,(0,$.tZ)(K.G,{children:(0,$.tZ)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})},ka=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,pM.o)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,pM.o)("extensions-onboarding-checklist-create"),l=a.isDone,c=a.setAsDone,u=(0,pM.o)("extensions-onboarding-checklist-concepts"),s=u.isDone,d=u.setAsDone,p=(0,pM.o)("extensions-onboarding-checklist-api"),f=p.isDone,h=p.setAsDone,v=(0,pM.o)("extensions-onboarding-checklist-publish").isDone;if((0,q.useEffect)(function(){c()},[]),void 0===i||!0===i)return null;var g=[l,s,f,v].filter(Boolean).length,m=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,$.tZ)(cX.Z,{})},{name:"concepts",title:"Learn key concepts",complete:!!s,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:r3.TT.EXTENSIONS}}}),(0,eZ.j)(eZ.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,$.tZ)(kt.Z,{})},{name:"learn",title:"Use the API",complete:!!f,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:r3.TT.EXTENSIONS}}}),(0,eZ.j)(eZ.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),h()},icon:(0,$.tZ)(_A.Z,{})},{name:"publish",title:"Publish your Extension",complete:!!v,onClick:function(){t(1)},icon:(0,$.tZ)(kr.Z,{})}];return(0,$.tZ)("section",{css:[Q.l0.width("100%")],children:(0,$.BX)(K.G,{css:[Q.l0.colWithGap(12)],children:[(0,$.tZ)(K.G,{css:[Q.l0.colWithGap(2)],children:(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.align.center,Q.l0.flex.wrap],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(12),Q.l0.align.center],children:[(0,$.tZ)(K.G,{css:[Q.l0.rowWithGap(2),Q.l0.align.center,Q.l0.justify.center],children:Array.from({length:m.length}).map(function(e,n){return(0,$.tZ)(K.G,{css:[Q.l0.borderRadius(8),Q.l0.width(12),Q.l0.height(4),n<g?Q.l0.backgroundColor.accentPositiveDefault:Q.l0.backgroundColor.backgroundHighest]},n)})}),(0,$.tZ)(ew.xv,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(g,"/").concat(m.length)}),(0,$.tZ)(cF.hU,{alt:"Hide section",onClick:o,children:(0,$.tZ)(uI.Z,{})})]})]})}),(0,$.tZ)(K.G,{tag:"ul",css:[Q.l0.flex.row,Q.l0.flex.wrap,{listStyleType:"none",gap:Q.TV.space8}],children:m.map(function(e,n){return(0,$.tZ)(ko,(0,eE._)({},e),n)})})]})})},kl=t(46623);function kc(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=CJ(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,$.tZ)(CN,{});if("fileReadError"===i)return(0,$.tZ)(CK,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var c=o.error;return(0,$.tZ)(CV,{performPaneOperation:n,manifestPath:a.manifestPath,error:c})}var u=o.manifest;return"success"===i&&u?(0,$.BX)(K.G,{css:[Q.l0.colWithGap(24),Q.l0.align.center,Q.l0.pt(12),Q.l0.width("100%")],children:[(0,$.tZ)(C3,{performPaneOperation:n,setSelectedTab:t}),(0,$.tZ)(ka,{performPaneOperation:n,setSelectedTab:t}),(0,$.tZ)(K.G,{css:[Q.l0.border({direction:"bottom",width:4,color:Q.TV.outlineDimmest}),Q.l0.width("100%")]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8),Q.l0.width("100%")],children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(2)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(uD.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,$.BX)(ew.xv,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,$.tZ)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:r3.TT.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,$.tZ)(K.G,{css:[Q.l0.borderRadius(4),Q.l0.border({color:Q.TV.outlineDimmest,width:1}),Q.l0.flex.row,Q.l0.align.center,Q.l0.p(8),Q.l0.flex.wrap,{gap:12},Q.l0.width("fit-content")],children:kl.k.map(function(e){var n;return(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(6),Q.l0.align.center],children:[(0,$.tZ)(bn.X,{id:e.key,checked:null===(n=u.scopes)||void 0===n?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null===(t=u.scopes)||void 0===t?void 0:t.some(function(n){return n.name===e.key}))&&!n?b2.r$(a.manifestStr,(0,eG._)((0,eE._)({},u),{scopes:null===(r=u.scopes)||void 0===r?void 0:r.filter(function(n){return n.name!==e.key})})):b2.r$(a.manifestStr,(0,eG._)((0,eE._)({},u),{scopes:(0,en._)(null!==(i=u.scopes)&&void 0!==i?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,Cj.F)(a.manifestStr,o)),l(o)}}),(0,$.tZ)("label",{htmlFor:e.key,css:[Q.l0.fontSize(12),Q.l0.cursor.pointer],children:(0,$.tZ)("abbr",{title:e.description,css:[{textDecorationColor:Q.TV.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,$.tZ)(kn,{performPaneOperation:n,manifest:u,update:function(e){var n=b2.r$(a.manifestStr,e);a.writeChange((0,Cj.F)(a.manifestStr,n)),l(n)}})]}):(0,$.tZ)("div",{children:"unknown state"})}var ku=t(86980),ks=t(91166),kd=t(11515),kp=t(43561),kf=t(68309),kh=(0,ek.X)({logViewerTopLevel:[Q.l0.height("100%")],logsContainer:[Q.l0.scrollbar.thin,Q.l0.backgroundColor.backgroundDefault,Q.l0.overflowY("scroll"),Q.l0.flex.growAndShrink(1)],logViewerHeader:[Q.l0.p(8),Q.l0.border({direction:"bottom",width:Q.TV.borderWidthDefault}),Q.l0.display.flex,Q.l0.flex.row,Q.l0.rowWithGap(8),Q.l0.align.center],logViewerHeaderControl:[Q.l0.flex.row,Q.l0.rowWithGap(4),Q.l0.align.center],logLine:[Q.l0.p(2),Q.l0.font.code,nq.gU.listItem,Q.l0.rowWithGap(2),Q.l0.align.center],logLineIcon:[Q.l0.p(4),{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function kv(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,j._)((0,q.useState)(!1),2),a=o[0],l=o[1],c=(0,kd.Z)().ref;return(0,$.BX)(K.G,{css:[Q.l0.flex.column,function(e){if(e===kf.i.warn)return{color:Q.TV.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===kf.i.error)return{color:Q.TV.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=Q.TV.backgroundHigher;return t===kf.i.warn?n="rgba(150, 125, 0, 0.5)":t===kf.i.error&&(n="rgba(229, 34, 34, 0.5)"),{color:Q.TV.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,$.BX)(K.G,{css:kh.logLine,onClick:function(){return l(function(e){return!e})},children:[(0,$.tZ)(K.G,{css:kh.logLineIcon,children:(0,$.tZ)(function(){return n.logLevel===kf.i.warn?(0,$.tZ)(na.Z,{size:16}):n.logLevel===kf.i.error?(0,$.tZ)(Cw.Z,{size:16}):(0,$.tZ)(f3.Z,{size:16,css:{opacity:0}})},{})}),(0,$.tZ)(ew.xv,{maxLines:10,css:kh.logMessage,variant:"small",children:n.message}),a?(0,$.tZ)(nn.Z,{size:16}):(0,$.tZ)(dP.Z,{size:16})]}),a?(0,$.tZ)(K.G,{children:(0,$.tZ)(ks.ZP,{ref:c,css:kp.Mp,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}var kg=function(){var e=(0,yN.ZC)(pq.ep),n=(0,yN.E4)(pq.UB),t=(0,j._)((0,yN.OA)(pq.UT),2),r=t[0],i=t[1],o=(0,q.useRef)(null);return(0,q.useEffect)(function(){var e,n=o.current;n&&(null===(e=n.children[n.children.length-1])||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,$.BX)(K.G,{css:kh.logViewerTopLevel,children:[(0,$.BX)(K.G,{className:"log-viewer-header",css:kh.logViewerHeader,children:[(0,$.tZ)(K.G,{css:kh.logViewerHeaderControl,style:{flexGrow:1},children:(0,$.tZ)(vZ.II,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,$.BX)(K.G,{css:kh.logViewerHeaderControl,children:[(0,$.tZ)(cF.hU,{alt:"Clear logs",onClick:function(){return n()},children:(0,$.tZ)(uI.Z,{id:"clear-logs"})}),(0,$.tZ)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,$.tZ)(K.G,{css:kh.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,$.tZ)(kv,{log:n,prevLevel:null===(r=e[t-1])||void 0===r?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})},km=t(91766),ky=t(84864),kb=t(62407),kZ=t(21460);function kx(){var e=(0,eB._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return kx=function(){return e},e}function kw(){var e=(0,eB._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return kw=function(){return e},e}function k_(){var e=(0,eB._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return k_=function(){return e},e}function kC(){var e=(0,eB._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return kC=function(){return e},e}function kk(){var e=(0,eB._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return kk=function(){return e},e}var kS={},kI=(0,eU.Ps)(kx()),kR=(0,eU.Ps)(kw(),wP.R9),kE=(0,eU.Ps)(k_()),kG=(0,eU.Ps)(kC()),kP=(0,eU.Ps)(kk()),kD=t(70694),kT=t(56738),kA=t(37633),kB=K.K.button;(b=z||(z={})).Pending="pending",b.Active="active",b.Complete="complete",b.Error="error";var kU=function(){return(0,$.tZ)(K.G,{css:[Q.l0.flex.row,Q.l0.flex.grow(1),Q.l0.border({color:Q.TV.outlineDimmest,direction:"top"})]})},kO=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,c=(0,e6.TS)(r),u=(0,e6.m2)(r);return(0,$.tZ)(kB,{type:"button",css:[Q.l0.reset.button,Q.l0.position.relative,o&&nq.gU.nofill,Q.l0.px(8),Q.l0.py(2),Q.l0.borderRadius(4),Q.l0.rowWithGap(4),Q.l0.align.center,{borderRadius:Q.TV.borderRadiusRound}].concat((0,en._)("error"===i?[Q.l0.color.accentNegativeStronger]:"active"===i?[Q.l0.backgroundColor.accentPrimaryDimmer,Q.l0.color.accentPrimaryStrongest]:"complete"===i?[Q.l0.color.accentPositiveStronger]:[Q.l0.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,$.tZ)(e6.BQ,{text:n,iconSize:u,textVariant:c,iconRight:function(){if("error"===i)return(0,$.tZ)(na.Z,{});if("active"===i){if(l)return;return(0,$.tZ)(no.Z,{})}return"complete"===i?(0,$.tZ)(ne.Z,{}):(0,$.tZ)(uD.Z,{})}()})})};(Z=F||(F={})).Details="Details",Z.Init="Init",Z.CreatingExtension="CreatingExtension",Z.CreatingExtensionError="CreatingExtensionError",Z.Queued="Queued",Z.Deploying="Deploying",Z.DeployError="DeployError",Z.Success="Success";var kM=["CreatingExtension","Deploying"];(x=V||(V={})).Details="Details",x.Init="Configure",x.Create="Create",x.Deploy="Deploy";var kL=["Details","Configure","Deploy"];function kX(e){var n,t,r,i,o,a,l,c,u=e.performPaneOperation,s=(0,ev.Z)(),d=s.container,p=s.fs,f=s.dotReplit,h=(0,j._)((n=(0,eE._)({},kS,void 0),pJ.t(kE,n)),1)[0],v=(0,pM.o)("extensions-onboarding-checklist-".concat("publish")).setAsDone,g=(0,j._)((0,q.useState)(null),2),m=g[0],y=g[1],b=(0,j._)((0,q.useState)("Details"),2),Z=b[0],x=b[1],w=(0,j._)((0,q.useState)(null),2),_=w[0],C=w[1],k=CJ(),S=k.__status,I=k.parsed,R=k.state,E=k.updateManifest,G=(0,ky.Y)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),P=G.value,D=G.setValue,T=G.error,A=G.validate,B=(0,j._)((0,q.useState)([]),2),U=B[0],O=B[1],M=(0,q.useCallback)(function(e){return u({operation:"open",secondary:!0,pane:{type:(0,rw.Dp)(e),data:e}})},[u]),L=(0,j._)((0,kT.Z)({openFile:M,listFiles:p.listFiles}),2),X=L[0],W=L[1],F=(0,kA.f)();t=(0,eE._)({},kS,{variables:{extensionId:null!=m?m:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&O(function(e){return(0,en._)(e).concat((0,en._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===nl.Fe.Success?x("Success"):t.status===nl.Fe.Failed&&x("DeployError"))}},skip:"Deploying"!==Z||!m}),bH.m(kI,t),(0,q.useEffect)(function(){X&&(X.clear(),U.forEach(function(e){X.write(e.replaceAll("\n","\r\n"))}))},[U,X]);var V=(0,q.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){y(null),C(null),D(null);return}n.buildCommand&&C(n.buildCommand),n.outputDirectory&&D(n.outputDirectory),n.extensionID&&y(n.extensionID)}},[D]);(0,q.useEffect)(function(){var e=!1;return(0,eR._)(function(){var n;return(0,eP.Jh)(this,function(t){switch(t.label){case 0:return[4,f.getConfig()];case 1:if(n=t.sent(),e)return[2];return V(n),[2]}})})(),function(){e=!0}},[f,V]);var H=(0,q.useCallback)((r=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return y(e),[4,f.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}),[f]),Y=(0,q.useCallback)((i=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return C(e),[4,f.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[f]),ee=(0,j._)((0,q.useState)(null),2),et=ee[0],er=ee[1],ei=(0,j._)((0,q.useState)(null),2),eo=ei[0],ea=ei[1],el=(0,j._)((0,q.useState)(null),2),ec=el[0],eu=el[1],es=(0,j._)((0,q.useState)(null),2),ep=es[0],ef=es[1],eh=(0,j._)((0,q.useState)(null),2),eg=eh[0],em=eh[1],ey=(0,j._)((o=(0,eE._)({},kS,void 0),eX.D(kR,o)),1)[0],ex=(0,eb.Z)(),eC=(0,j._)((a=(0,eE._)({},kS,void 0),eX.D(kG,a)),1)[0],ek=(0,j._)((0,q.useState)(null),2),eS=ek[0],eI=ek[1],eG=(0,J.P5)({controlName:"flag-draft-buffers"}),eD=(0,ZM.Qk)(),eT=(0,q.useCallback)((l=(0,eR._)(function(e){var n,t,r;return(0,eP.Jh)(this,function(i){switch(i.label){case 0:return[4,eC({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null===(n=t.data)||void 0===n?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return l.apply(this,arguments)}),[eC]),eA=(0,j._)((c=(0,eE._)({},kS,void 0),eX.D(kP,c)),1)[0],eB=(0,q.useCallback)((0,eR._)(function(){var e,n,t,r,i,o,a,l,c,u,s,f,g,y,b,Z,w,C;return(0,eP.Jh)(this,function(k){switch(k.label){case 0:return e=m,[4,A()];case 1:if(null==(n=k.sent())?void 0:n.message)return eu(null==n?void 0:n.message),[2];if(!P)throw Error("expected output folder");if(t=(0,wk.AH)(P),(r=function(){x("Init"),O([]),em(null),eu(null),ea(null),er(null)})(),!(eD||!eG))return[3,3];return[4,p.flush()];case 2:k.sent(),k.label=3;case 3:if(!e)return[3,12];return[4,h({variables:{extensionId:e}})];case 4:if((i=k.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,6];return[4,new Promise(function(n){eI({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eI(null),n(e)}})})];case 5:case 7:if(!k.sent())return r(),[2];return e=null,[3,12];case 6:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,8];return[4,new Promise(function(n){eI({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eI(null),n(e)}})})];case 8:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,11];if(c=null==I?void 0:null===(a=I.manifest)||void 0===a?void 0:a.name,u=null==I?void 0:null===(l=I.manifest)||void 0===l?void 0:l.description,!(c&&c!==o.name||u&&u!==o.description))return[3,10];return[4,eA({variables:{extensionId:e,description:null!=u?u:void 0,name:null!=c?c:void 0}})];case 9:k.sent(),k.label=10;case 10:return[3,12];case 11:throw Error("Encountered an unknown error. Please contact support.");case 12:if(e)return[3,14];return x("CreatingExtension"),[4,eT({name:null!==(g=null==I?void 0:null===(s=I.manifest)||void 0===s?void 0:s.name)&&void 0!==g?g:"My extension",description:null!==(y=null==I?void 0:null===(f=I.manifest)||void 0===f?void 0:f.description)&&void 0!==y?y:"My extension's description"})];case 13:if(null!==(b=k.sent()).error)return x("CreatingExtensionError"),ef(b.error),[2];H(e=b.result.id),k.label=14;case 14:if(!e)throw Error("expected extension id to be set");return[4,(0,kD.r)(d,t)];case 15:k.sent(),x("Queued"),k.label=16;case 16:return k.trys.push([16,18,,19]),[4,ey({variables:{extensionId:e,replId:ex,outputDirectory:t,buildCommand:null!=_?_:""}})];case 17:return Z=k.sent(),[3,19];case 18:if(w=k.sent(),x("DeployError"),w.message.includes("received message larger than max"))return em("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return em(w.message),[2];case 19:if(Z.errors)return x("DeployError"),em("Internal error. Please contact support: "+Z.errors.map(function(e){return e.message}).join(", ")),[2];if(!Z.data)return x("DeployError"),em("Encountered an unknown error. Please contact support."),[2];if("Extension"===(C=Z.data.deployExtension2).__typename)return x("Deploying"),v(),(0,eZ.j)(eZ.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),er(C),[2];if("message"in C)return x("DeployError"),em(C.message),[2];return x("DeployError"),em("Encountered an unknown error. Please contact support."),[2]}})}),[_,d,P,A,ex,p,x,ey,h,eA,m,eT,H,v,I,eD,eG]),eU=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(Z),eO=kL.indexOf(eU);function eM(){return eo?"Build error: ".concat(eo):ec?"Validation error: ".concat(ec):ec?"Create extension error: ".concat(ep):eg?"Deploy error: ".concat(eg):void 0}var eL=(0,fO.Mu)().find(function(e){return e.extensionId===m}),eW=(0,j._)((0,q.useState)(!1),2),eN=eW[0],ez=eW[1],eF=(0,fO.WF)(),eV=(0,q.useMemo)(function(){return eN?(0,$.tZ)(no.Z,{}):eL?(0,$.tZ)(ne.Z,{}):(0,$.tZ)(hU.Z,{})},[eN,eL]),eH=(0,c_.F)().values.global,ej=(0,vJ.$0)().fireBurst,e$=(0,j._)((0,q.useState)(!1),2),eq=e$[0],eY=e$[1],eJ=(0,q.useRef)(null);if((0,q.useEffect)(function(){eJ.current&&!eq&&"Success"===Z&&(ej({x:eJ.current.getBoundingClientRect().left,y:eJ.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,vJ.hd)(300,5e3)},size:function(){return{width:(0,vJ.hd)(8,16),height:(0,vJ.hd)(8,16)}},color:[eH.tealStronger,eH.blurpleStronger,eH.yellowStronger]}),ej({x:eJ.current.getBoundingClientRect().right,y:eJ.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,vJ.hd)(300,5e3)},size:function(){return{width:(0,vJ.hd)(8,16),height:(0,vJ.hd)(8,16)}},color:[eH.blueStronger,eH.greenStronger,eH.pinkStronger]}),eY(!0))},[Z,eH,ej,eq]),S===N.loading)return(0,$.tZ)(CN,{});if(S===N.fileReadError)return(0,$.tZ)(CK,{message:R.fileReadError});var eK=I.manifest,eQ=I.error;return eQ?(0,$.tZ)(CV,{performPaneOperation:u,manifestPath:R.manifestPath,error:eQ}):(0,$.BX)(K.G,{css:[Q.l0.flex.column,Q.l0.display.flex,Q.l0.height("100%"),Q.l0.justify.center,Q.l0.align.center,Q.l0.position.relative],children:[(0,$.tZ)(K.G,{css:[Q.l0.position.absolute,Q.l0.top(0),Q.l0.left(0),Q.l0.right(0)],className:"Confetti",innerRef:eJ}),(0,$.BX)(K.G,{css:[Q.l0.p(12),Q.l0.pt(16),Q.l0.colWithGap(24),Q.l0.flex.growAndShrink(1),Q.l0.width("100%"),Q.l0.maxWidth(ku.Y)],children:["Success"!==Z?(0,$.BX)($.HY,{children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(16)],children:[(0,$.tZ)(ew.xv,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,$.tZ)(K.G,{css:[Q.l0.rowWithGap(4),Q.l0.align.center],children:kL.map(function(e,n){return(0,$.BX)(q.Fragment,{children:[0!==n&&(0,$.tZ)(kU,{}),(0,$.tZ)(kO,{state:n<eO?z.Complete:n!==eO?z.Pending:["CreatingExtensionError","DeployError"].includes(Z)?z.Error:z.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===Z?(0,$.tZ)(K.G,{css:[Q.l0.flex.column,Q.l0.colWithGap(8),Q.l0.width("100%")],children:(0,$.tZ)(C7,{manifest:eK,updateManifest:E,onSubmit:function(e){E((0,eE._)({},eK,e)),x("Init")}})}):null,"Details"!==Z?(0,$.BX)($.HY,{children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(16)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(kZ.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Build settings"}),(0,$.tZ)(K.G,{css:[Q.l0.flex.grow(1),Q.l0.border({color:Q.TV.backgroundHighest,direction:"y"})]})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4)],children:[(0,$.BX)("label",{htmlFor:"buildCommand",css:[Q.l0.display.flex,Q.l0.rowWithGap(4),Q.l0.align.center],children:[(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,$.tZ)(ed.u,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,$.tZ)(f3.Z,{size:12})})]}),(0,$.tZ)(vZ.II,{value:null!=_?_:"",onChange:function(e){return Y(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==Z&&kM.includes(Z)})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4)],children:[(0,$.BX)("label",{htmlFor:"outputFolder",css:[Q.l0.display.flex,Q.l0.rowWithGap(4),Q.l0.align.center],children:[(0,$.tZ)(ew.xv,{color:"dimmer",variant:"small",children:"Output folder"}),(0,$.tZ)(ed.u,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,$.tZ)(f3.Z,{size:12})})]}),(0,$.tZ)(vZ.II,{id:"outputFolder",value:null!=P?P:"",disabled:"Init"!==Z&&kM.includes(Z),onChange:function(e){D(e.currentTarget.value),f.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),T?(0,$.tZ)(ew.xv,{css:[Q.l0.color.accentNegativeStronger],children:T.message}):null]}),(0,$.tZ)(e6.zx,{text:"Init"===Z||Z.endsWith("Error")?"Deploy and Release":"Deploying…",iconLeft:"Init"===Z||Z.endsWith("Error")?(0,$.tZ)(cJ.Z,{}):(0,$.tZ)(no.Z,{}),onClick:eB,disabled:"Init"!==Z&&kM.includes(Z),colorway:"primary"}),(0,$.BX)(ew.xv,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,$.tZ)("a",{href:r3.Gu.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),U.length>0?(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8)],children:[(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(kb.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Build logs"}),(0,$.tZ)(K.G,{css:[Q.l0.flex.grow(1),Q.l0.border({color:Q.TV.backgroundHighest,direction:"y"})]})]}),eM()?(0,$.tZ)(e_.E,{text:eM(),colorway:"red",icon:(0,$.tZ)(Cw.Z,{})}):null,(0,$.tZ)(K.G,{css:[Q.l0.display.flex,Q.l0.py(12),Q.l0.pl(16),Q.l0.borderRadius(8),Q.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null==F?void 0:F.background}],children:(0,$.tZ)(K.K.div,{css:[Q.l0.width("100%"),Q.l0.maxWidth("100%")],ref:W})})]}):null,eS?(0,$.BX)(nI.Tg,{elevated:!0,css:[Q.l0.colWithGap(8),Q.l0.p(8),Q.l0.borderRadius(8)],children:[(0,$.tZ)(ew.xv,{variant:"text",multiline:!0,maxLines:3,children:eS.message}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(4),Q.l0.align.center],children:[(0,$.tZ)(e6.zx,{text:"No",css:[Q.l0.flex.grow(1)],onClick:function(){return eS.callback(!1)}}),(0,$.tZ)(e6.zx,{text:"Yes",colorway:"primary",css:[Q.l0.flex.grow(1)],onClick:function(){return eS.callback(!0)}})]})]}):null]}):null]}):null,et&&"Success"===Z?(0,$.BX)(K.G,{css:[Q.l0.colWithGap(16)],children:[(0,$.BX)(K.G,{css:[Q.l0.colWithGap(4)],children:[(0,$.tZ)(ew.xv,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,$.tZ)(K.G,{css:[Q.l0.py(8)],children:(0,$.tZ)(km.m,{showMetadata:!1,extension:et,onClick:function(){u({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,wb.T8)(et.id)}}})}})}),(0,$.BX)(K.G,{css:[Q.l0.rowWithGap(8),Q.l0.align.center],children:[(0,$.tZ)(kt.Z,{}),(0,$.tZ)(ew.xv,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,$.tZ)(K.G,{css:[Q.l0.flex.grow(1),Q.l0.border({color:Q.TV.backgroundHighest,direction:"y"})]})]}),(0,$.BX)(K.G,{css:[Q.l0.colWithGap(8),Q.l0.p(12),Q.l0.border({color:Q.TV.outlineDimmest}),Q.l0.borderRadius(8)],children:[(0,$.tZ)(ew.xv,{variant:"subheadDefault",children:"Install your Extension"}),(0,$.tZ)(ew.xv,{color:"dimmer",children:"Once installed, you can use the extension in any of your Repls."}),(0,$.tZ)(e6.zx,{text:eL?"Already installed":"Install Extension",colorway:eL?"green":"primary",disabled:eN||!!eL,iconLeft:eV,loading:eN,onClick:(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return ez(!0),[4,eF({extensionId:(0,wb.T8)(et.id),replId:null})];case 1:return e.sent(),ez(!1),[2]}})})})]})]}):null]})]})}function kW(e){var n=e.performPaneOperation,t=(0,j._)((0,q.useState)(0),2),r=t[0],i=t[1];return(0,$.tZ)(K.G,{css:[Q.l0.flex.column,Q.l0.height("100%"),Q.l0.position.relative],children:(0,$.BX)(Cx.mQ,{css:[Q.l0.flex.grow(1),Q.l0.flex.column,Q.l0.align.center,Q.l0.display.flex,Q.l0.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,$.tZ)(nI.Tg,{css:[Q.l0.align.center,Q.l0.top(0),Q.l0.width("100%"),Q.l0.zIndex(1)],children:(0,$.BX)(Cx.td,{css:[Q.l0.align.center,Q.l0.width("100%"),Q.l0.pb(0),Q.l0.maxWidth(ku.Y)],children:[(0,$.tZ)(Cx.OK,{css:[Q.l0.p(12),Q.l0.height("100%"),Q.l0.borderRadius(0)],iconLeft:(0,$.tZ)(ni.Z,{}),children:"Home"}),(0,$.tZ)(Cx.OK,{css:[Q.l0.p(12),Q.l0.height("100%"),Q.l0.borderRadius(0)],iconLeft:(0,$.tZ)(C_.Z,{}),children:"Releases"}),(0,$.tZ)(Cx.OK,{css:[Q.l0.p(12),Q.l0.height("100%"),Q.l0.borderRadius(0)],iconLeft:(0,$.tZ)(Cw.Z,{}),children:"Logs"}),(0,$.tZ)(K.G,{css:Q.l0.flex.grow(1)}),(0,$.tZ)(nI.Tg,{css:[Q.l0.p(8),{boxShadow:"inset 0 -1px 0 var(--outline-dimmest)"}],children:(0,$.tZ)(e6.zx,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:r3.TT.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,$.tZ)(vq.Z,{}),css:[Q.l0.display.inlineFlex]})})]})}),(0,$.BX)(Cx.nP,{css:[Q.l0.flex.grow(1),Q.l0.align.center,Q.l0.justify.center,Q.l0.width("100%"),Q.l0.display.flex,Q.l0.overflow("hidden")],children:[(0,$.tZ)(Cx.x4,{css:[Q.l0.height("100%"),Q.l0.p(12),Q.l0.maxWidth(ku.Y),Q.l0.display.flex,Q.l0.width("100%"),Q.l0.justify.center,Q.l0.overflowY("scroll")],children:(0,$.tZ)(kc,{performPaneOperation:n,setSelectedTab:i})}),(0,$.tZ)(Cx.x4,{css:[Q.l0.height("100%"),Q.l0.width("100%"),Q.l0.overflowY("scroll")],children:(0,$.tZ)(kX,{performPaneOperation:n})}),(0,$.tZ)(Cx.x4,{css:[Q.l0.height("100%"),Q.l0.width("100%")],children:(0,$.tZ)(kg,{})})]})]})})}var kN=ts.Dy.Object({type:ts.Dy.Literal("extensionDevtools")}),kz={Content:function(e){var n=e.options.performPaneOperation;return(0,$.tZ)(kW,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,$.tZ)(cX.Z,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:rw.hc.WorkspaceExtensions,decode:function(e){return uB.B4.Decode(kN,e)}},kF=t(51049),kV=t(38771);function kH(e){var n=oB(of),t=(0,fO.WF)(),r=(0,fO.LM)(),i=(0,fO.Mu)(),o=(0,q.useCallback)(function(t,r){if("cover"===t){if(null===r){o("store",null);return}n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,c,u=null!==(c=null===(l=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))||void 0===l?void 0:l.installationId)&&void 0!==c?c:null;return(0,$.tZ)(kV.f,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:(0,eR._)(function(){var n;return(0,eP.Jh)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,wb.Ad)(n.id)]}})}),uninstallExtension:(a=(0,eR._)(function(e){return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,$.tZ)(kF.Z,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var kj=ts.Dy.Union([ts.Dy.Object({page:ts.Dy.Union([ts.Dy.Literal("store"),ts.Dy.Literal("manage")])}),ts.Dy.Object({page:ts.Dy.Literal("cover"),coverPageExtensionId:ts.Dy.Unsafe(ts.Dy.String())})]),k$=ts.Dy.Object({type:ts.Dy.Literal("extensionStore"),data:kj}),kq={Content:function(e){return(0,$.tZ)(kH,(0,eG._)((0,eE._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:nP.TV.yellowStronger,size:n},children:(0,$.tZ)(cX.Z,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:rw.hc.WorkspaceExtensions,decode:function(e){return uB.B4.Decode(k$,e)}},kY=t(1696),kJ=t(49821),kK=(0,ek.X)({container:[Q.l0.width("100%"),Q.l0.maxWidth(640),Q.l0.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],content:[{backgroundColor:"transparent"}]}),kQ={Content:function(){var e,n,t,r,i,o,a,l,c,u,s,d,p=(n=(e=(0,j._)((0,q.useState)(!1),2))[0],t=e[1],r=(0,eb.Z)(),o=(i=(0,ev.Z)()).dotReplit,a=i.fs,l=oB(aX),c=(0,xv.T)(),u=(0,tQ.Gn)("isLayoutStacked").preferences.isLayoutStacked,s=(0,cz.cR)(),d=oT(it),{reset:(0,q.useCallback)((0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,bM.W)({fs:a,dotReplit:o})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:u,isHTML:c,isExtension:s,isInPopup:d,entrypoint:e}),[2]}})}),[a,o,l,r,u,c,s,d]),resetting:n});return(0,$.tZ)(K.G,{css:kK.container,children:(0,$.tZ)(kY.Z,{resetLayout:p,css:kK.content})})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Q.TV.greyStrongest,size:n},children:(0,$.tZ)(cZ.Z,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Repls",category:rw.hc.Other,decode:kJ.J},k0=t(90767),k1=t(73344),k2=ts.Dy.Object({type:ts.Dy.Literal("replAuth")}),k4={Content:k1.Z,Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Q.TV.orangeStrongest,size:n},children:(0,$.tZ)(k0.Z,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your Repl using a prebuilt login page or customize your own button",category:rw.hc.CloudServices,decode:function(e){return uB.B4.Decode(k2,e)}},k5=ts.Dy.Object({type:ts.Dy.Literal("searchReplace"),data:ts.Dy.Optional(ts.Dy.Object({initialQuery:ts.Dy.Optional(ts.Dy.String()),initialReplacement:ts.Dy.Optional(ts.Dy.String()),initialIncludeGlob:ts.Dy.Optional(ts.Dy.String()),initialExcludeGlob:ts.Dy.Optional(ts.Dy.String())}))}),k3={Content:function(e){var n=e.pane,t=e.options;return(0,$.tZ)(k6,{paneData:(null==n?void 0:n.data)||{},paneId:t.paneId,isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,$.tZ)(lX.Z,{size:n})},getTitle:function(e){var n,t=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your Repl",category:rw.hc.WorkspaceFeatures,decode:function(e){return uB.B4.Decode(k5,e)}},k7=(0,ek.X)({wrapper:[Q.l0.pt(6),Q.l0.height("100%"),Q.l0.width("100%")]});function k6(e){var n=e.paneData,t=e.paneId,r=e.isActive,i=e.performPaneOperation,o=(0,q.useRef)(null),a=(0,q.useCallback)(function(){var e,n;null===(e=o.current)||void 0===e||e.select(),null===(n=o.current)||void 0===n||n.focus()},[]);(0,lT.L5)(function(){return{type:"searchReplace",focusSearchInput:a}},[a]),(0,lT.Wk)(function(){return{focus:a}},[a]);var l=(0,q.useCallback)(function(e){i({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[i]),c=(0,q.useCallback)(function(){i({operation:"commit"}),i({operation:"open",pane:{type:"searchReplace"}})},[i]),u=(0,q.useCallback)(function(e,n){i({operation:"replace",pane:{type:"searchReplace",data:(0,eE._)({},e,n)}})},[i]),s=lx().openCodeSearch,d=(0,q.useCallback)(function(e){s({initialQuery:e.query,initialReplacement:e.replacement,initialIncludeGlob:e.includeGlob,initialExcludeGlob:e.excludeGlob}),i({operation:"remove",pane:{id:t}})},[s,i,t]);return(0,$.tZ)(K.G,{css:k7.wrapper,children:(0,$.tZ)(pT,(0,eG._)((0,eE._)({},n),{isActive:r,searchInputRef:o,onFileLineClicked:l,onOpenSearchPane:c,onDataChanged:u,onMove:d,moveDestination:"sidebar",searchResultBackgroundColor:Q.TV.backgroundDefault}))})}var k8=ts.Dy.Object({type:ts.Dy.Literal("threadInbox")}),k9={Content:function(e){var n=e.options;return(0,$.tZ)(_L,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:Q.TV.blueStronger,size:n},children:(0,$.tZ)(_k.Z,{})})},getTitle:function(){return"Threads"},description:"Comment and discuss topics with collaborators directly inside code or text files",category:rw.hc.Collaboration,decode:function(e){return uB.B4.Decode(k8,e)}},Se=t(47851),Sn=t(27001),St=t(73220),Sr=t(12379);(w=H||(H={})).Ready="READY",w.Loading="LOADING",w.Error="ERROR";var Si=function(e){var n=e.progress;return(0,$.tZ)(ed.u,{tooltip:"Progress: ".concat(Math.round(1e3*n)/10,"%"),children:(0,$.tZ)(K.G,{css:[Q.l0.width("100%"),Q.l0.height(4),Q.l0.backgroundColor.backgroundHigher],children:(0,$.tZ)(K.G,{css:[Q.l0.width("".concat(100*n,"%")),Q.l0.height("100%"),Q.l0.backgroundColor.purpleDefault]})})})},So=ts.Dy.Object({type:ts.Dy.Literal("tutorial")}),Sa={Content:function(){var e,n,t,r,i=(0,ev.Z)().fs,o=(e=oT(a$),n=oT(aY),t=oB(aK),n||!e?null:t),a=(0,cN.Do)(cO.Q.id,cO.y.Sidepane),l=(0,j._)((0,q.useState)([]),2),c=l[0],u=l[1],s=(0,j._)((0,q.useState)("LOADING"),2),d=s[0],p=s[1],f=(0,eb.Z)(),h=(0,j._)((0,Sn.Z)("tutorialProgress--".concat(f),0),2),v=h[0],g=h[1],m=(0,j._)((0,q.useState)(!1),2),y=m[0],b=m[1],Z=(0,q.useRef)(null),x=(0,eT.d)(),w=x?x.toString():"",_=(0,nE.Qt)(),C=(0,nE.R3)(),k=(0,Sr.Z)(C),S=(0,tt.Z)(function(){return k?function(e){var n,t;return k({code:e,insertAt:null!==(t=null===(n=_())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:"end"})}:void 0},[k,_]),I=(0,Se.jJ)(w,f),R=I?(0,$.tZ)(Se.gC,{challenge:I}):null,E=(0,q.useCallback)(function(){Z.current&&(Z.current.scrollTop=0)},[Z]);return((0,q.useEffect)(function(){var e,n=!1;return(e=(0,eR._)(function(){var e,t,r,o,a,l,c,s,d,f,h,v,g,m;return(0,eP.Jh)(this,function(y){switch(y.label){case 0:return p("LOADING"),[4,i.readDir(pN.V)];case 1:if(e=y.sent(),n)return[2];if(e.error)return p("ERROR"),[2];return t=[],[4,Promise.all(e.children.filter(function(e){var n;return e.type===op.Tv.File&&(null===(n=Ci.$R.from(e.filename))||void 0===n?void 0:n.id)==="markdown"}).map(function(e){var n="".concat(pN.V,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=y.sent(),n)return[2];o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)f=(d=(0,j._)(s.value,2))[0],(h=d[1]).error?p("ERROR"):(g=h.content.toString(),m=RegExp("^#\\s(?<title>.*)").exec(g),t.push({title:null==m?void 0:null===(v=m.groups)||void 0===v?void 0:v.title,content:g,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return u(t),p("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){n=!0}},[i]),(0,q.useEffect)(function(){c[v]||g(0)},[v,g,c]),"LOADING"===d)?(0,$.tZ)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.center],children:(0,$.tZ)(no.Z,{})}):"ERROR"===d?(0,$.tZ)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.center],children:(0,$.BX)(K.G,{css:[Q.l0.center,Q.l0.colWithGap(4)],children:[(0,$.tZ)(uI.Z,{color:Q.TV.accentNegativeDefault}),(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===c.length?(0,$.tZ)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.center],children:(0,$.BX)(K.G,{css:[Q.l0.center,Q.l0.colWithGap(4)],children:[(0,$.tZ)(uI.Z,{color:Q.TV.accentNegativeDefault}),(0,$.tZ)(ew.xv,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):y?(0,$.BX)(K.G,{css:[Q.l0.overflowY("scroll"),Q.l0.flex.growAndShrink(1),Q.l0.p(8),Q.l0.colWithGap(16)],children:[(0,$.tZ)(ew.xv,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,$.tZ)(K.G,{css:[Q.l0.flex.growAndShrink(1),Q.l0.colWithGap(8)],children:c.map(function(e,n){return(0,$.BX)(K.G,{css:[Q.l0.p(8),v===n?Q.l0.backgroundColor.backgroundHighest:Q.l0.backgroundColor.backgroundHigher,Q.l0.borderRadius(4),Q.l0.rowWithGap(8),Q.l0.align.center,Q.l0.cursor.pointer,v===n?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){g(n),b(!1)},children:[(0,$.tZ)(K.G,{css:[Q.l0.backgroundColor.backgroundHighest,Q.l0.width(20),Q.l0.height(20),Q.l0.borderRadius("full"),Q.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,$.tZ)(ew.xv,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,$.tZ)(ew.xv,{css:[Q.l0.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,$.tZ)(K.G,{innerRef:a,css:[Q.l0.height("100%")],children:(0,$.BX)(K.G,{dataCy:"tutorial-viewer-content",innerRef:Z,css:[Q.l0.overflowY("scroll"),Q.l0.flex.growAndShrink(1),Q.l0.p(16),Q.l0.pb(48),Q.l0.colWithGap(16)],children:[o?(0,$.tZ)(e6.zx,{text:"Show tutorial video",iconLeft:(0,$.tZ)(lK.Z,{}),onClick:function(){return o()}}):null,R,c.length>1&&(0,$.tZ)(e6.zx,{text:"Table of Contents",iconLeft:(0,$.tZ)(kb.Z,{}),onClick:function(){return b(!0)}}),(0,$.tZ)(St.Z,{fs:i,path:c[v].path,source:c[v].content,sourcePos:!1,onCodeInsert:S}),c.length>1&&(0,$.BX)(K.G,{css:[Q.l0.position.absolute,Q.l0.width("100%"),Q.l0.left(0),Q.l0.bottom(0),Q.l0.overflow("hidden")],children:[(0,$.tZ)(Si,{progress:(v+1)/c.length}),(0,$.BX)(K.G,{css:[Q.l0.width("100%"),Q.l0.height(40),Q.l0.align.center,Q.l0.flex.row],children:[(0,$.tZ)(K.G,{tag:"button",css:[Q.l0.justify.center,Q.l0.p(8),Q.l0.backgroundColor.backgroundHigher,Q.l0.cursor.pointer,Q.l0.width(40),Q.l0.height("100%")],onClick:function(){v>0&&(g(function(e){return e-1}),E())},children:v>0&&(0,$.tZ)(_4.Z,{size:24})}),(0,$.tZ)(K.G,{tag:"button",css:[Q.l0.rowWithGap(8),Q.l0.flex.growAndShrink(1),Q.l0.height("100%"),Q.l0.justify.spaceBetween,Q.l0.backgroundColor.backgroundHighest,Q.l0.align.center,Q.l0.p(8),Q.l0.cursor.pointer,{userSelect:"none"}],onClick:function(){v<c.length-1&&(g(function(e){return e+1}),E())},children:v<c.length-1&&(0,$.BX)($.HY,{children:[(0,$.BX)(ew.xv,{multiline:!1,css:[Q.l0.flex.growAndShrink(1),Q.l0.textAlign.left,Q.l0.fontSize(Q.TV.fontSizeSubheadDefault)],children:[(0,$.BX)("span",{css:[Q.l0.color.foregroundDimmer],children:["Next",c[v+1].title?": ":" page"]}),(0,$.tZ)("b",{children:null!==(r=c[v+1].title)&&void 0!==r?r:""})]}),(0,$.tZ)(dP.Z,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,$.tZ)(vq.Z,{size:n})},getTitle:function(){return"Tutorial"},category:rw.hc.Other,decode:function(e){return uB.B4.Decode(So,e)}},Sl=["youtube.com","vimeo.com","wistia.com","sadanandpai.github.io"],Sc=function(e){try{var n=new URL(e).hostname;return Sl.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},Su=ts.Dy.Object({type:ts.Dy.Literal("videoPlayer"),data:ts.Dy.Object({embedUrl:ts.Dy.String(),title:ts.Dy.String()})}),Ss={Content:function(e){var n=e.pane.data;return(0,$.tZ)(Sd,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,$.tZ)(lK.Z,{size:n})},getTitle:function(e){return e.data.title},category:rw.hc.Other,decode:function(e){return uB.B4.Decode(Su,e)}};function Sd(e){return Sc(e.embedUrl)?(0,$.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[Q.l0.coverContainer,Q.l0.borderRadius(0,0,8,8)]}):(0,$.BX)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,$.tZ)("a",{href:r3.xz,target:"_blank",children:"Request more formats here."})]})}var Sp=t(94970),Sf=t(12666),Sh=t(73452),Sv=t(87061),Sg=t(38822),Sm=t(75834),Sy=t(237),Sb={Content:function(e){var n=e.pane.data,t=e.options,r=t.paneId,i=t.performPaneOperation,o=(0,ev.Z)(),a=o.container,l=o.runner,c=o.ports,u=oB(oh),s=(0,j._)((0,q.useState)(function(){return function(){}}),2),d=s[0],p=s[1],f=(0,Sf.bg)(c);(0,Sg.Z)({container:a,runner:l,refreshWebView:d}),(0,Sm.Z)({runner:l,refreshWebView:d}),(0,lT.L5)(function(){return{type:"webview",refresh:d}},[d]);var h=(0,te.gf)(cA.webviewRefresh.id);lq({match:lI.pl,data:{type:"action",label:"Refresh",icon:(0,$.tZ)(Sp.Z,{}),description:cA.webviewRefresh.name,keyboardShortcut:h,run:function(){u(r),d()}}});var v=(0,q.useCallback)(function(){return i({operation:"open",secondary:!0,pane:{type:"networking"}})},[i]),g=(0,cN.Do)(cO.Q.id,cO.y.Output),m=(0,xv.T)(),y=m?Sh.oB:(0,Sh.Cl)(n,f);return void 0===y?(0,$.tZ)(Sv.Z,{openNetworkingTool:v}):(0,$.tZ)(Sh.U8,{initialPort:y,initialPath:null==n?void 0:n.path,containerRef:m?g:void 0,openPane:function(e){i({operation:"open",pane:e})},openNetworkingTool:v,setRefreshCb:p,ports:c,container:a})},Icon:function(e){var n=e.size;return(0,$.tZ)(vI.Pd.Provider,{value:{color:nP.TV.foregroundDimmer,size:n},children:(0,$.tZ)(l6.Z,{})})},getTitle:function(){return"Webview"},description:"Preview your Repl as a web application",category:rw.hc.WorkspaceFeatures,decode:Sy.J},SZ=t(60615);function Sx(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,$.tZ)($.HY,{children:n});var i="workspace-desktop-new-user-tour"===t.id;function o(e){i&&t&&(0,eZ.yV)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,$.tZ)(cN.rk,{tour:t,onStep:function(e){t&&((0,eZ.j)(eZ.U3.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,eZ.j)(eZ.U3.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var Sw=t(49160),S_=t(57865),SC=t(58655),Sk=t(69829),SS=t(61932);function SI(){var e=(0,eB._)(["\n  query PublishedAs($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return SI=function(){return e},e}var SR={},SE=(0,eU.Ps)(SI()),SG=t(49500),SP=".replit-dynamic-template",SD=t(65736),ST=t(43166),SA=t(29406),SB=t(10702),SU=(0,ek.X)({wrapper:[Q.l0.colWithGap(8)]});function SO(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b=(0,j._)((0,q.useState)(!1),2),Z=b[0],x=b[1],w=(0,q.useCallback)(function(e){switch(e){case"starting":x(!0);return;case"none":x(!1);return;case"running":if(!Z)throw Error("expected repl not to need dynamic template initialization")}},[x,Z]),_=(0,j._)((0,q.useState)([]),2),C=_[0],k=_[1],S=(0,sP.U)();n=(e={handleRPC:(0,q.useCallback)(function(e){switch(e.type){case"progress":case"failed":return k(function(n){return(0,en._)(n).concat([(0,eE._)({key:S(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,SS.Z)();return k(function(t){return(0,en._)(t).concat([(0,eE._)({respond:n,key:S(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[S]),onConnStateChange:w}).handleRPC,t=e.onConnStateChange,r=(0,J.P5)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,eb.Z)()}},o=(0,eE._)({},SR,i),a=eL.a(SE,o)).loading,c=a.data,u=(0,tt.Z)(function(){if(l)return!1;var e=null==c?void 0:c.repl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===nl.O2.Template},[l,c]),d=(s=(0,ev.Z)()).container,p=s.fs,h=(f=(0,j._)((0,q.useState)(!1),2))[0],v=f[1],m=(g=(0,uM.Z)({container:d,service:"exec",skip:!h})).channel,y=g.isConnecting,(0,q.useEffect)(function(){!r||u||l||function(){e.apply(this,arguments)}();function e(){return(e=(0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,p.stat(SP)];case 1:return v(e.sent().exists),[2]}})})).apply(this,arguments)}},[p,r,u,l,v]),(0,q.useEffect)(function(){if(!y){if(!m)throw Error("exec channel is not open");var e=(0,SS.Z)();e.promise.then((0,eR._)(function(){var e;return(0,eP.Jh)(this,function(n){switch(n.label){case 0:return[4,m.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})}));var r=m.onCommand(function(r){switch(r.body){case"state":r.state===Sk.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null===(i=n(o))||void 0===i||i.then(function(e){return m.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":SG.warn("got dynamic template generator stderr:",r.stderr);return;case"error":SG.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return m.send({exec:{args:["sh",SP],lifecycle:Sk.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[m,n,y,t,h]);var I=C.map(function(e){switch(e.type){case"progress":return(0,$.tZ)(SM,(0,eE._)({},e));case"failed":return(0,$.tZ)(SL,(0,eE._)({},e));case"query":return(0,$.tZ)(SX,(0,eE._)({},e));case"prompt":return(0,$.tZ)(SW,(0,eE._)({},e));case"confirm":return(0,$.tZ)(SN,(0,eE._)({},e))}});return(0,$.tZ)(nk.u,{isOpen:Z,onRequestClose:function(){return x(!1)},children:(0,$.tZ)(K.G,{css:SU.wrapper,children:I})})}function SM(e){var n=e.progress,t=(0,ut._)(e,["progress"]);return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},t),{children:["progress: ",n]}))}function SL(e){var n=e.error,t=(0,ut._)(e,["error"]);return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},t),{children:["error: ",n]}))}function SX(e){var n=e.query,t=e.options,r=e.respond,i=(0,ut._)(e,["query","options","respond"]),o=(0,j._)((0,q.useState)(null),2),a=o[0],l=o[1],c=(0,j._)((0,q.useState)(!1),2),u=c[0],s=c[1],d=(0,sP.U)(),p=(0,q.useCallback)(function(){null!==a&&(s(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,$.BX)("label",{children:[(0,$.tZ)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){u||l(t)}}),e]},d(t))}),(0,$.tZ)(e6.zx,{text:"submit",onClick:p})]}))}function SW(e){var n=e.prompt,t=e.respond,r=(0,ut._)(e,["prompt","respond"]),i=(0,j._)((0,q.useState)(""),2),o=i[0],a=i[1],l=(0,j._)((0,q.useState)(!1),2),c=l[0],u=l[1],s=(0,q.useCallback)(function(){u(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},r),{children:["prompt: ",n,(0,$.tZ)(vZ.II,{disabled:c,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,$.tZ)(e6.zx,{text:"submit",onClick:s})]}))}function SN(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,ut._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,$.BX)(K.G,(0,eG._)((0,eE._)({},i),{children:["confirm: ",n,(0,$.BX)(SD.Z,{"aria-label":"the data to be used to generate your Repl",children:[(0,$.tZ)(ST.x,{children:o.map(function(e){return(0,$.tZ)(SA.sg,{isRowHeader:!0,children:e},e)})}),(0,$.tZ)(SB.Z,{children:(0,$.tZ)(SA.X2,{children:a.map(function(e,n){return(0,$.tZ)(SA.bL,{children:e},o[n])})})})]}),(0,$.tZ)(e6.zx,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,$.tZ)(e6.zx,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var Sz=t(13268),SF=t(10406),SV=t(52949),SH=(0,ek.X)({container:[Q.l0.colWithGap(8)],splitContainer:[Q.l0.rowWithGap(8),Q.l0.justify.spaceBetween,Q.l0.mt(8)],group:[Q.l0.rowWithGap(8)],path:[Q.l0.rowWithGap(8),Q.l0.flex.growAndShrink(1),Q.l0.align.center],text:[Q.l0.mt(8)]}),Sj=function(e){var n=e.path;return(0,$.BX)(K.G,{css:SH.path,children:[(0,$.tZ)(lw.Z,{path:n}),(0,$.tZ)(ew.xv,{multiline:!1,children:(0,$.tZ)(SV.yx,{path:n})})]})},S$=function(){var e,n=(0,ev.Z)().fs,t=ye();if(null===t)return null;var r=t.paths,i=t.onCallback;if(0===r.length)return null;var o=function(){i("cancel")},a=(e=(0,eR._)(function(){var e,t,o,a,l,c,u,s,d;return(0,eP.Jh)(this,function(p){switch(p.label){case 0:e=!0,t=!1,o=void 0,p.label=1;case 1:p.trys.push([1,7,8,9]),a=r[Symbol.iterator](),p.label=2;case 2:if(e=(l=a.next()).done)return[3,6];return c=l.value,[4,n.readFile(c,{fromDisk:!0})];case 3:if((u=p.sent()).error)throw u.error;if(!u.content)return[3,5];return[4,n.writeFile(c,u.content)];case 4:if((s=p.sent()).error)throw s.error;p.label=5;case 5:return e=!0,[3,2];case 6:return[3,9];case 7:return d=p.sent(),t=!0,o=d,[3,9];case 8:try{e||null==a.return||a.return()}finally{if(t)throw o}return[7];case 9:return i("discard"),[2]}})}),function(){return e.apply(this,arguments)});return(0,$.tZ)(nk.u,{isOpen:!0,onRequestClose:o,maxWidth:360,centered:!0,children:(0,$.BX)(K.G,{css:SH.container,children:[(0,$.tZ)(ew.h4,{level:2,variant:"subheadBig",children:"You have unsaved changes"}),r.map(function(e){return(0,$.tZ)(Sj,{path:e},e)}),(0,$.tZ)(ew.xv,{css:SH.text,children:"To close this tab, please save or discard your changes to the file."}),(0,$.BX)(K.G,{css:SH.splitContainer,children:[(0,$.tZ)(e6.zx,{text:"Cancel",onClick:o}),(0,$.BX)(K.G,{css:SH.group,children:[(0,$.tZ)(e6.zx,{text:"Discard changes",onClick:a}),(0,$.tZ)(e6.zx,{text:r.length>1?"Save files":"Save file",onClick:function(){n.flush(new Set((0,en._)(r)),op.WL.MANUAL_SAVE),i("confirm")},colorway:"blue"})]})]})]})})},Sq=t(66610),SY=t(43627),SJ=t(39121),SK=(0,ek.X)({root:[Q.l0.position.absolute,Q.l0.borderRadius(8),Q.l0.backgroundColor.backgroundRoot,Q.l0.pt(16),Q.l0.align.center,{border:"1px solid",borderColor:Q.TV.outlineDimmest}],content:[Q.l0.width("100%"),Q.l0.flex.growAndShrink(1)]});function SQ(){var e,n,t,r,i,o=oT(o6),a=oT(it),l=oB(ol),c=(t=(n=(0,j._)((0,gO.L)({accept:[op.Tv.File,fw.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,rw.ME)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===fw.z.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2))[0].isOver,r=n[1],i=(e=oB(oV),(0,q.useEffect)(function(){t||e(null)},[t,e]),{drag:oB(o3),drop:oB(o7)}),r),u=lF({openPane:(0,q.useCallback)(function(e){(0,eZ.j)(eZ.U3.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),l({pane:e.pane,edge:"left"})},[l])});return(0,$.tZ)(K.G,{style:{width:o.width,height:o.height,transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),zIndex:a?100:void 0},css:SK.root,innerRef:c,children:(0,$.tZ)(K.G,{css:SK.content,children:(0,$.tZ)(n9.X,{autoFocus:!0,command:u,showToolDescriptions:!0})})})}var S0=ts.Dy.Number({minimum:0,exclusiveMaximum:100}),S1=ts.Dy.Object({layout:tb,isActive:ts.Dy.Boolean()}),S2=ts.Dy.Object({sidebarPercent:ts.Dy.Optional(S0),layout:tb,agentMode:ts.Dy.Optional(S1),agentModeSidebarPercent:ts.Dy.Optional(S0),data:ts.Dy.Record(ts.Dy.String(),ts.Dy.Object({type:ts.Dy.String()}))});function S4(e,n){var t=null;try{t=uB.B4.Decode(S2,e)}catch(e){}if(null===t)return null;var r={layout:t.layout,agentMode:t.agentMode,agentModeSidebarPercent:t.agentModeSidebarPercent,data:{},type:"saved",sidebarPercent:null!==(s=t.sidebarPercent)&&void 0!==s?s:15},i=new Set,o=tV(r.layout),a=r.agentMode?tV(r.agentMode.layout):null,l=!0,c=!1,u=void 0;try{for(var s,d,p=Object.entries(t.data)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=(0,j._)(d.value,2),h=f[0],v=f[1];if(o.has(h)||null!==a&&a.has(h)){var g=n(v.type,v);if(!g){i.add(h);continue}r.data[h]=g}}}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}return(0,tJ.Uy)(r,function(e){var n=function(n){if(o.has(n)){tX(e.layout,n);return}e.agentMode&&(null==a?void 0:a.has(n))&&tX(e.agentMode.layout,n)},t=!0,r=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(t=(c=u.next()).done);t=!0){var s=c.value;n(s)}}catch(e){r=!0,l=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,v=Object.entries(e.data)[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=(0,j._)(h.value,2),m=g[0],y=g[1];"commands"!==y.type&&("codeEditor"!==y.type||y.data.path)||(delete e.data[m],n(m))}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}})}var S5=t(87865);function S3(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.repl,f=e.currentUser,h=(0,nG.useRouter)(),v=h.query,g=!!v.deploymentPane,m=!!v.projectPane,y=v.aiPaneSessionId,b=(0,l3.Wd)("enterInAgentMode","boolean"),Z=(0,l3.Wd)("initialAiPrompt","string"),x=(0,l3.Wd)("popupId","string"),w=(0,nb.Gv)(h),_=(0,j._)((0,q.useState)(function(){var e;return(0,rw.fK)({config:(e=(0,wJ.U)(),(0,eG._)((0,eE._)({},e),{webview:Sb,commands:_F,debugger:Cs,docs:Cf,chat:_N,threadInbox:k9,tutorial:Sa,videoPlayer:Ss,extension:CZ,extensionStore:kq,replAuth:k4,searchReplace:k3,deployments:wq.R,config:_$,preferences:kQ,integrations:SZ._,extensionDevtools:kz,multiplayer:wY.Z,submitEduRepl:wY.Z,agentDrawer:wY.Z}))})}),1)[0],C=(r=(n={repl:p,currentUser:f}).repl,i=n.currentUser,o=(0,J.P5)({controlName:"flag-projects-workspace-tour",default:!1}),r&&i&&null==r.lesson?i.hasSeenOldWorkspaceTour||i.hasSeenOldSidebarTour||i.hasSeenWorkspaceTour?!i.hasSeenProjectsTour&&(null===(t=r.project)||void 0===t?void 0:t.id)&&o?vE.V:null:cO.Q:null),k=(0,tQ.Gn)("isLayoutStacked").preferences,S=null,I=(0,l3.Wd)("gitImport","boolean"),R=(l=(a={repl:p}).repl,u=void 0===(c=a.entrypoint)?"":c,(0,q.useMemo)(function(){var e=l.language.startsWith("html"),n={config:{paneId:t2()(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:t2()(),pane:{type:"codeEditor",data:{path:u}}},output:{paneId:t2()(),pane:{type:e?"webview":"runnerOutput"}},shell:{paneId:t2()(),pane:{type:"shell"}}};return{sidebarPercent:0,type:"default",data:Object.values(n).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:t2()(),type:"paneGroup",percent:40,activeIndex:0,panes:[n.config.paneId]},{id:t2()(),type:"split",percent:60,stacked:!0,children:[{id:t2()(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.codeEditor.paneId]},{id:t2()(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.output.paneId,n.shell.paneId]}]}]}}}},[l,u]));x?S=S4(!(s=r8.Z.get(io(x)))||"string"==typeof s&&parseInt(s,10)<Date.now()?null:r8.Z.get(ii(x)),_.decode):p.layoutState?S=S4(p.layoutState,_.decode):I&&(S=R);var E=(0,tt.Z)(function(){return g?{type:"deployments"}:m?{type:"project"}:"string"==typeof y?{type:"ghostwriterChat"}:void 0},[g,m,y]),G=(0,J.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),P=(0,J.P5)({controlName:"flag-default-layout-ai-in-the-editor",logFlagToAnalytics:!1}),D=(0,J.P5)({controlName:"flag-default-layout-ai-pane"}),T=(P||D)&&null==S&&null==E,A=G&&b||!!(null==S?void 0:null===(d=S.agentMode)||void 0===d?void 0:d.isActive);return(0,$.BX)(uO.ip,{currentUsername:f.username,replId:p.id,flagPid2:p.flagPid2,flagPid2DarkLaunch:p.flagPid2DarkLaunch,flagPid2DarkLaunchWithHealthcheck:p.flagPid2DarkLaunchWithHealthcheck,flagPid2Shell:p.flagPid2Shell,flagPid2ShellMuxed:p.flagPid2ShellMuxed,children:[(0,$.tZ)(nE.eA,{init:{isAiChatHighlightedInLayout:T},children:(0,$.tZ)(oP,{initialPane:E,savedLayoutState:S,isHTML:p.language.startsWith("html"),isStacked:k.isLayoutStacked,isExtension:!!p.config.isExtension,isBlankRepl:(0,bL.p)(p),enterInAgentMode:A,popupId:x,children:(0,$.tZ)(Sx,{tour:C,userId:f.id,children:(0,$.tZ)(S7,{ui:_,repl:p,currentUser:f,isBonsaiWebview:w,agentModeEnabled:A,initialAiPrompt:Z},p.id)})})}),(0,$.tZ)(wX.Z,{})]})}function S7(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,g,m,y,b,Z,x,w,_,C=e.repl,k=e.currentUser,S=e.isBonsaiWebview,I=e.ui,R=e.agentModeEnabled,E=e.initialAiPrompt,G=(n=lh(),t=oB(aZ),r=oB(ax),i=(0,bT.uV)(),o=(0,J.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===C.language?"html":"outputs",c=(l=(0,j._)((0,q.useState)(!1),2))[0],u=l[1],d=(s=(0,j._)((0,q.useState)(!1),2))[0],p=s[1],h=(f=(0,j._)((0,q.useState)(!1),2))[0],v=f[1],g=(0,nj.e_)(),m=(0,nj.f)(),y=(0,J.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0}),b=(0,J.P5)({controlName:"flag-multi-lsp-connections"}),Z=(0,wL.e)({controlName:SY.r}),x=(0,m8.s)(),w=(0,tt.Z)(function(){return{runnerMode:a,onPresenceCommand:g,getColorForUser:m,onUnrecoverableError:(0,S_.Z)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===SJ.Gs.NotAllowed?p(!0):e===SJ.Gs.FirewallDenied?u(!0):e===SJ.Gs.RequiresRefresh&&v(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,onFirewallDenied:function(){return u(!0)},enableUserEvents:o,enableMultipleLSPClientsPerFile:b,openTelemetryTracing:y,enableReplspaceSshTokenPassthrough:Z,shouldAutoFlushRef:x}},[o,a,n,t,r,i,g,m,y,b,Z,x]),_=(0,Sw.H)(w),(0,tt.Z)(function(){return{services:_,isFirewallDenied:c,isPleaseRefresh:h,isNotAllowed:d}},[_,c,h,d])),P=G.services,D=G.isFirewallDenied,T=G.isPleaseRefresh,A=G.isNotAllowed,B=ld();(0,Sq.mK)(!!C.layoutState);var U=(0,tt.Z)(function(){return(0,yP._)(null==k?void 0:k.keybindings.keybindings)},[k]);if(!P)return null;var O=C.authorizations.useAdvancedChat.isAuthorized;return(0,$.tZ)(lU.k1,{replId:C.id,currentUserId:k.id,hasAccessToAdvancedModel:O,agentModeEnabled:R,initialAiPrompt:E,children:(0,$.tZ)(hd.du,{children:(0,$.BX)(yF,{services:P,ui:I,repl:C,userKeybindings:U,children:[(0,$.BX)(gM.Z,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,$.tZ)(mt,{}),(0,$.tZ)(cU,{isAdmin:k.isAdmin,isSubscribed:k.isSubscribed}),(0,$.tZ)(wO.Z,{repl:C}),S?null:(0,$.tZ)(gU,{}),S?(0,$.tZ)(w$,{}):null,(0,$.tZ)(S$,{}),(0,$.tZ)(lJ,{}),(0,$.tZ)(bW,{repl:C}),(0,$.tZ)(xb,{repl:C,currentUser:k}),(0,$.tZ)(It,{}),(0,$.tZ)(SF.f,{}),(0,$.tZ)(yj,{}),(0,$.tZ)(wN,{}),(0,$.tZ)(In,{isBonsaiWebview:S}),(0,$.tZ)(y0,{}),(0,$.tZ)(bP,{}),(0,$.tZ)(bA.Z,{}),(0,$.tZ)(SO,{}),(0,$.tZ)(S8,{isMultiplayerSession:C.multiplayers.length>0}),(0,$.tZ)(bB.Z,{isOpen:D&&!A&&!T}),(0,$.tZ)(bU.Z,{isOpen:A}),(0,$.tZ)(Sz.Z,{isOpen:T}),(0,$.tZ)(yq.E,{}),(0,$.tZ)(wM.X,{openDeploymentPane:function(){return B({pane:{type:"deployments"}})}}),(0,$.tZ)(wU,{}),(0,$.tZ)(y1,{}),(0,$.tZ)(SC.v,{}),(0,$.tZ)(S5.b,{repl:C})]}),(0,$.tZ)(S6,{replId:C.id})]})})})}function S6(e){var n,t=e.replId,r=(0,j._)((0,bT.qg)(),1)[0],i=(0,j._)((n=(0,eE._)({},il,void 0),eX.D(ic,n)),1)[0],o=(0,q.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,q.useEffect)(function(){r&&o()},[r,o]),(0,$.tZ)(bD.Z,{})}function S8(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,j._)((0,q.useState)(!1),2))[0],i=t[1],o=(0,cN.Sr)(),(0,q.useEffect)(function(){!o&&n&&"default"===Z4()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,q.useCallback)(function(){Z6(!0),i(!1)},[]),confirm:(0,q.useCallback)((0,eR._)(function(){return(0,eP.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return Z3.apply(this,arguments)}()];case 1:return e.sent(),i(!1),[2]}})}),[])}),l=a.shouldShowModal,c=a.hideModal,u=a.confirm;return l?(0,$.tZ)(bO,{onCancel:c,onConfirm:u}):null}var S9=(0,et.F4)({from:{opacity:0},to:{opacity:1}}),Ie=(0,ek.X)({containerRoot:[Q.l0.width("100%"),Q.l0.left(0),Q.l0.position.absolute],main:[{opacity:1,animation:"".concat(S9," 0.2s ease-in-out")}]});function In(e){var n,t,r,i,o,a,l,c=e.isBonsaiWebview,u=(n=oB(rJ),t=(0,ec.Z)(),r=(0,ex.NJ)(),i=(0,ex.Cl)(),o=(r||i)&&t?Y.Mz:0,a=(0,q.useRef)(null),l=(0,pU.Z)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,q.useCallback)(function(e){a.current=e,l(e)},[l])),s=oT(rL),d=oT(rn),p=oT(rt),f=oT((0,q.useMemo)(function(){return(0,tr.cn)(function(e){return e(rr)})},[])),h=(0,tQ.Gn)("fontSize").preferences;return(0,$.tZ)(K.G,{innerRef:u,css:Ie.containerRoot,style:c?{height:"calc(100% - 4px)",top:6,bottom:0}:{height:"calc(100% - ".concat(Y.Mz,"px)"),top:Y.Mz},children:s?(0,$.BX)($.HY,{children:[(0,$.tZ)(vl,{}),(0,$.BX)("main",{id:"main-content",css:Ie.main,children:[p.map(function(e){return(0,$.tZ)(dC,{handleId:e},e)}),f.map(function(e){return(0,$.tZ)(yR,{headerId:e},e)}),d.map(function(e){return(0,$.tZ)(g7,{paneId:e},e)}),0===d.length?(0,$.tZ)(SQ,{}):null]}),(0,$.tZ)(o5,{}),(0,$.tZ)(ll,{}),(0,$.tZ)(y$,{}),(0,$.tZ)(mL,{}),(0,$.tZ)(hd.xV,{fontSize:h.fontSize})]}):null})}var It=function(){var e=ld();return(0,cN.e$)(vE.V.id,vE.o.ProjectPane,{onEnter:function(){e({pane:{type:"project"},commit:!0,activate:!0})}}),null}},65736:function(e,n,t){"use strict";var r=t(41733),i=t(30509),o=t(3796),a=t(36809);t(75271);var l=t(29406),c=(0,a.X)({table:{maxWidth:"100%",minWidth:"100%",outline:"none",borderSpacing:1,alignSelf:"start"}});n.Z=function(e){return(0,o.tZ)(l.iA,(0,i._)((0,r._)({css:c.table},e),{children:e.children}))}},10702:function(e,n,t){"use strict";var r=t(41733),i=t(30509),o=t(3796),a=t(29406);n.Z=function(e){return(0,o.tZ)(a.RM,(0,i._)((0,r._)({},e),{children:e.children}))}},32722:function(e,n,t){"use strict";t.d(n,{D:function(){return f}});var r=t(41733),i=t(30509),o=t(3796),a=t(36809),l=t(29737),c=t(56763),u=t(63163),s=t(29406),d=t(99399),p=(0,a.X)({column:[u.l0.px(8),u.l0.py(6),u.l0.textAlign.left,u.l0.align.center,{whiteSpace:"nowrap",wordBreak:"break-word"}],columnSortIcon:[u.l0.px(2)]});function f(e){var n=(0,d.d)(e.style,{cursor:e.allowsSorting?"pointer":"default"});return(0,o.tZ)(s.sg,(0,i._)((0,r._)({},e),{css:p.column,style:n,children:function(n){var t=n.allowsSorting,r=n.sortDirection;return(0,o.BX)(o.HY,{children:[e.children,t&&(0,o.tZ)("span",{"aria-hidden":"true",css:p.columnSortIcon,children:"ascending"===r?(0,o.tZ)(c.Z,{}):(0,o.tZ)(l.Z,{})})]})}}))}},43166:function(e,n,t){"use strict";t.d(n,{x:function(){return v}});var r=t(41733),i=t(30509),o=t(98924),a=t(3796),l=t(31718),c=t(32722),u=t(14548),s=t(36809),d=t(63163),p=t(29406),f=t(42649),h=(0,s.X)({tableHeader:[d.l0.color.foregroundDimmer,d.l0.textAlign.left,{"[data-focused]":[d.l0.focusRing,{outlineColor:d.TV.accentPrimaryDefault}]}],checkboxColumn:[d.l0.width(16),d.l0.px(8)]});function v(e){var n=e.columns,t=e.children,s=(0,o._)(e,["columns","children"]),d=(0,p.ks)(),v=d.selectionBehavior,g=d.selectionMode;return(0,a.tZ)(u.rR,{children:function(e){return(0,a.BX)(p.xD,(0,i._)((0,r._)({},s),{css:[e,h.tableHeader],children:["toggle"===v&&(0,a.tZ)(c.D,{css:h.checkboxColumn,children:"multiple"===g&&(0,a.tZ)(l.X,{slot:"selection",name:"select-all"})}),(0,a.tZ)(f.FE,{items:n,children:t})]}))}})}},57323:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M5.47 12.53a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L7.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06l-5-5Zm12 5-5-5a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L14.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06Z",clipRule:"evenodd"})}))}},36688:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M18.53 12.53a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06L16.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06l5-5Zm-12 5 5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 0 0-1.06 1.06L9.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06Z",clipRule:"evenodd"})}))}},50261:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.BX)(a.ZP,(0,i._)((0,r._)({},e),{children:[(0,o.tZ)("path",{fillRule:"evenodd",d:"M2.25 3A2.75 2.75 0 0 1 5 .25h14A2.75 2.75 0 0 1 21.75 3v18A2.75 2.75 0 0 1 19 23.75H5A2.75 2.75 0 0 1 2.25 21V3ZM5 1.75c-.69 0-1.25.56-1.25 1.25v18c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25V3c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"}),(0,o.tZ)("path",{d:"M6.75 11a5.25 5.25 0 1 1 9.754 2.7l.898 1.347a6.75 6.75 0 1 0-3.743 2.497l-.9-1.349A5.25 5.25 0 0 1 6.75 11ZM19 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),(0,o.tZ)("path",{d:"M13 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7 20a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),(0,o.tZ)("path",{fillRule:"evenodd",d:"M13.296 12.944a.75.75 0 0 1 1.04.208l4.288 6.432a.75.75 0 1 1-1.248.832l-4.288-6.432a.75.75 0 0 1 .208-1.04Z",clipRule:"evenodd"})]}))}},19379:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H9.75v10.5H19c.69 0 1.25-.56 1.25-1.25V9.75Zm-12 10.5V9.75h-4.5V19c0 .69.56 1.25 1.25 1.25h3.25Z",clipRule:"evenodd"})}))}},34294:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M14.25 3a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0V4.81l-5.72 5.72a.75.75 0 1 1-1.06-1.06l5.72-5.72H15a.75.75 0 0 1-.75-.75Zm-3.72 10.47a.75.75 0 0 1 0 1.06l-5.72 5.72H9a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})}))}},10155:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}},29424:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}},42056:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.BX)(a.ZP,(0,i._)((0,r._)({},e),{children:[(0,o.tZ)("path",{fillRule:"evenodd",d:"M2 6.75A4.75 4.75 0 0 1 6.75 2h10a4.75 4.75 0 0 1 4.75 4.75v10a4.75 4.75 0 0 1-4.75 4.75h-10A4.75 4.75 0 0 1 2 16.75v-10ZM6.75 3.5A3.25 3.25 0 0 0 3.5 6.75v10A3.25 3.25 0 0 0 6.75 20h10A3.25 3.25 0 0 0 20 16.75v-10a3.25 3.25 0 0 0-3.25-3.25h-10Z",clipRule:"evenodd"}),(0,o.tZ)("path",{d:"M5.25 8.398a3.167 3.167 0 0 1 3.167-3.167h6.666a3.167 3.167 0 0 1 3.167 3.167v6.667a3.167 3.167 0 0 1-3.167 3.166H8.417a3.167 3.167 0 0 1-3.167-3.166V8.398Z"})]}))}},28850:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M21 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75ZM3.75 5.292v13.416L15.488 12 3.75 5.292Zm-1.5-.43a1.25 1.25 0 0 1 1.87-1.086l12.492 7.139c.84.48.84 1.69 0 2.17L4.12 20.224a1.25 1.25 0 0 1-1.87-1.086V4.862Z",clipRule:"evenodd"})}))}},66038:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}},49070:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.BX)(a.ZP,(0,i._)((0,r._)({},e),{children:[(0,o.tZ)("path",{fillRule:"evenodd",d:"M2 4.8A2.8 2.8 0 0 1 4.8 2h13.9a2.8 2.8 0 0 1 2.8 2.8v13.9a2.8 2.8 0 0 1-2.8 2.8H4.8A2.8 2.8 0 0 1 2 18.7V4.8Zm9.25-.3a1 1 0 0 1 1-1h6.45A1.3 1.3 0 0 1 20 4.8v13.9a1.3 1.3 0 0 1-1.3 1.3h-6.45a1 1 0 0 1-1-1V4.5Zm-1.5 0a1 1 0 0 0-1-1H4.8a1.3 1.3 0 0 0-1.3 1.3v13.9A1.3 1.3 0 0 0 4.8 20h3.95a1 1 0 0 0 1-1V4.5Z",clipRule:"evenodd"}),(0,o.tZ)("path",{d:"M4.125 4.85a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"})]}))}},128:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}},36273:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M17 21.75A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10ZM20.25 12H3.75V7A3.25 3.25 0 0 1 7 3.75h10A3.25 3.25 0 0 1 20.25 7v5Z",clipRule:"evenodd"})}))}},20494:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM12 3.75v16.5h5A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-5Z",clipRule:"evenodd"})}))}},78290:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M21.75 7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7ZM12 3.75v16.5H7A3.25 3.25 0 0 1 3.75 17V7A3.25 3.25 0 0 1 7 3.75h5Z",clipRule:"evenodd"})}))}},83888:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M7 2.25A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7ZM3.75 12h16.5v5A3.25 3.25 0 0 1 17 20.25H7A3.25 3.25 0 0 1 3.75 17v-5Z",clipRule:"evenodd"})}))}},86689:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M4.292 2.25h15.416c.34 0 .674.109.948.312.275.204.477.491.573.821l1.491 5.135c.02.068.03.139.03.21v1.636a3.993 3.993 0 0 1-1.667 3.242v6.576c0 .42-.17.82-.468 1.114a1.59 1.59 0 0 1-1.115.454h-15c-.416 0-.817-.162-1.115-.454a1.56 1.56 0 0 1-.468-1.114v-6.576a3.993 3.993 0 0 1-1.667-3.243V8.728c0-.07.01-.141.03-.21l1.494-5.133c.095-.33.297-.617.57-.82.274-.203.605-.313.945-.314h.003Zm-.16 10.347a.749.749 0 0 0-.197-.112 2.571 2.571 0 0 1-.433-.342 2.493 2.493 0 0 1-.752-1.78v-.886h5.167v.887c0 .664-.27 1.304-.752 1.779a2.633 2.633 0 0 1-3.033.454Zm.285 1.687v5.898c0 .013.005.03.02.043a.092.092 0 0 0 .063.025h15c.026 0 .05-.01.064-.025a.06.06 0 0 0 .02-.043v-5.898a4.115 4.115 0 0 1-4.25-1.596 4.115 4.115 0 0 1-3.333 1.7 4.115 4.115 0 0 1-3.334-1.7 4.115 4.115 0 0 1-4.25 1.596Zm5-3.92c0 .664.268 1.304.751 1.779a2.615 2.615 0 0 0 1.832.743c.69 0 1.348-.269 1.832-.743a2.493 2.493 0 0 0 .751-1.78v-.886H9.417v.887Zm-.75-2.387H21L19.79 3.803a.069.069 0 0 0-.025-.035.093.093 0 0 0-.056-.018m1.542 5.727h-5.167v.887c0 .664.27 1.304.752 1.779a2.633 2.633 0 0 0 3.034.454.749.749 0 0 1 .196-.112c.156-.098.301-.212.433-.342a2.493 2.493 0 0 0 .752-1.78v-.886Zm-12.583-1.5H2.999l1.215-4.174a.068.068 0 0 1 .025-.035.093.093 0 0 1 .055-.018h15.414",clipRule:"evenodd"})}))}},89829:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M19 9.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.675 1.5a3.751 3.751 0 0 1 7.425.75 3.75 3.75 0 0 1-7.425.75h-4.678a2.751 2.751 0 0 1-5.293 0H2a.75.75 0 0 1 0-1.5h3.354a2.751 2.751 0 0 1 5.292 0h4.679ZM8 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))}},55070:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,r._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M8.5 3.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5ZM3.75 7a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0Zm19.78 1.47a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06L19 11.94l3.47-3.47a.75.75 0 0 1 1.06 0ZM1.641 15.64A4.75 4.75 0 0 1 5 14.25h7A4.75 4.75 0 0 1 16.75 19v2a.75.75 0 0 1-1.5 0v-2A3.25 3.25 0 0 0 12 15.75H5A3.25 3.25 0 0 0 1.75 19v2a.75.75 0 0 1-1.5 0v-2c0-1.26.5-2.468 1.391-3.359Z",clipRule:"evenodd"})}))}},35458:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(41733),i=t(30509),o=t(3796),a=t(28065);function l(e){return(0,o.BX)(a.ZP,(0,i._)((0,r._)({},e),{children:[(0,o.BX)("g",{clipPath:"url(#clip0_6533_280)",children:[(0,o.tZ)("path",{d:"M15.721.681A2.137 2.137 0 0 1 18.146.28l4.638 2.233a2.142 2.142 0 0 1 1.213 1.93v.299h-.735v-.303c0-.54-.31-1.033-.797-1.267L17.828.942a1.403 1.403 0 0 0-1.6.272c.485-.486 1.294-.195 1.396.445l-.115-.055a.667.667 0 0 0-.762.13l-.016.015-8.786 8.01-1.19-.902L15.72.68Z"}),(0,o.tZ)("path",{d:"m17.634 5.968-7.343 5.571 1.215.922 6.128-4.649V5.968ZM6.798 14.189l1.104 1.006-3.975 3.016a1.673 1.673 0 0 1-2.136-.095l-1.24-1.128a1.673 1.673 0 0 1-.002-2.473l3.303-3.012 1.09.994-3.403 3.104a.203.203 0 0 0 0 .3l1.24 1.128c.073.066.182.07.26.011l3.759-2.851Z"}),(0,o.tZ)("path",{d:"M16.228 22.786c.42.421 1.063.53 1.6.272l4.637-2.23c.487-.234.797-.727.797-1.267v-.302H24v.298c0 .824-.472 1.575-1.214 1.933l-4.639 2.233a2.14 2.14 0 0 1-2.428-.402L.547 9.488a1.676 1.676 0 0 1 .002-2.479l1.24-1.127a1.676 1.676 0 0 1 2.14-.095l13.705 10.397v1.852L3.037 6.964a.2.2 0 0 0-.255.01l-1.24 1.128a.2.2 0 0 0 0 .296l15.2 13.86.007.007c.2.2.504.252.758.13l.117-.057c-.1.643-.91.936-1.396.45Z"}),(0,o.tZ)("path",{fillRule:"evenodd",d:"M16.576 1.562 15.88.865A1.896 1.896 0 0 1 18.04.497l4.637 2.23a1.9 1.9 0 0 1 1.077 1.712v15.122a1.9 1.9 0 0 1-1.076 1.712l-4.638 2.23a1.896 1.896 0 0 1-2.162-.368l.697-.698c.209.209.565.061.565-.234V1.797a.331.331 0 0 0-.565-.235Zm1.541 20.81 4.134-1.988a.914.914 0 0 0 .518-.823V4.439a.914.914 0 0 0-.518-.823l-4.134-1.988c.007.055.01.111.01.169v20.406c0 .058-.003.114-.01.169Z",clipRule:"evenodd"}),(0,o.tZ)("path",{fillRule:"evenodd",d:"M15.706.692a2.141 2.141 0 0 1 2.441-.416l4.638 2.23A2.145 2.145 0 0 1 24 4.44v15.122c0 .824-.473 1.575-1.215 1.933l-4.637 2.229a2.14 2.14 0 0 1-2.442-.415l-.173-.173 1.043-1.044.173.173a.086.086 0 0 0 .147-.06V1.796a.086.086 0 0 0-.147-.061l-.173-.174-.173.174-.87-.87.173-.174Zm.908.562a.577.577 0 0 1 .772.543v20.406a.577.577 0 0 1-.773.544l-.375.375a1.65 1.65 0 0 0 1.697.16l4.637-2.23c.574-.276.938-.855.938-1.491V4.439c0-.636-.364-1.215-.938-1.491L17.935.718a1.651 1.651 0 0 0-1.697.16l.376.376Zm1.207-.04 4.316 2.075.107-.224.442.213-.12.247c.28.217.448.553.448.914v15.122c0 .445-.255.85-.657 1.044l-4.536 2.181.053-.444c.006-.044.009-.09.009-.139V1.797c0-.048-.003-.095-.009-.14l-.053-.443Zm.551.808v19.956l3.773-1.815a.669.669 0 0 0 .379-.602V4.439a.669.669 0 0 0-.379-.602l-3.773-1.815Z",clipRule:"evenodd"})]}),(0,o.tZ)("defs",{children:(0,o.tZ)("clipPath",{id:"clip0_6533_280",children:(0,o.tZ)("path",{d:"M0 0h24v24H0z"})})})]}))}},94410:function(e,n,t){"use strict";t.d(n,{G:function(){return o},K:function(){return a}});var r=t(3796),i=t(62279);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},68295:function(e,n,t){"use strict";t.d(n,{$f:function(){return h},GD:function(){return f},_9:function(){return p},t0:function(){return s}});var r=t(21262),i=t(71440);function o(){var e=(0,r._)(["\n  fragment UsageBreakdownCurrentUser on CurrentUser {\n    id\n    username\n    isCore: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment UsageOverviewReplBreakdown on Repl {\n    id\n    title\n    url\n    nextPagePathname\n    iconUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment UnitPriceReplUsageConnection on UnitPriceReplUsageTypeConnection {\n    items {\n      id\n      usageRepl {\n        ... on Repl {\n          ...UsageOverviewReplBreakdown\n        }\n        ... on DeletedRepl {\n          id\n        }\n      }\n      usage\n      percentage\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment MatrixPriceReplUsageConnection on MatrixPriceReplUsageTypeConnection {\n    items {\n      id\n      usageRepl {\n        ... on Repl {\n          ...UsageOverviewReplBreakdown\n        }\n        ... on DeletedRepl {\n          id\n        }\n      }\n      usage\n      percentage\n      configName\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,r._)(["\n  fragment StaticDeploymentReplUsageConnection on StaticDeploymentReplUsageTypeConnection {\n    items {\n      id\n      usage\n      percentage\n      usageRepl {\n        ... on Repl {\n          ...UsageOverviewReplBreakdown\n          hostingDeployment {\n            ... on HostingDeployment {\n              currentBuild {\n                timeCreated\n              }\n            }\n          }\n        }\n        ... on DeletedRepl {\n          id\n        }\n      }\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var s=(0,i.Ps)(o()),d=(0,i.Ps)(a()),p=(0,i.Ps)(l(),d),f=(0,i.Ps)(c(),d),h=(0,i.Ps)(u(),d)},44873:function(e,n,t){"use strict";t.d(n,{L:function(){return i}});var r=t(46134),i=function(e,n){var t=n.resourceUsageType,i=n.precision,o=n.truncateToMillions;return 0===e||void 0===e?"-":(0,r.fZ)(e,{resourceUsageType:t,precision:i,skipUnits:!0,truncateToMillions:o})}},48987:function(e,n,t){"use strict";t.d(n,{Is:function(){return f}});var r=t(41733),i=t(21262),o=t(71440),a=t(46849),l=t(17878),c=t(62740),u=t(9122);function s(){var e=(0,i._)(["\n  query ReplEnvironmentDesktop(\n    $url: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(url: $url) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.Ps)(s(),a.od,l.z,c.PZ,c.fF,c.FH,a.UQ);function f(e){var n=(0,r._)({},d,e);return u.a(p,n)}},85920:function(e,n,t){"use strict";t.a(e,async function(e,r){try{t.r(n);var i=t(66626),o=t(3796),a=t(62279),l=t(4251),c=t(59574),u=t(69792),s=t(36082),d=t(39125),p=t(48088),f=t(14548),h=t(24766),v=t(93245),g=t(63163),m=t(54698),y=t(94410),b=t(62128),Z=t(9816),x=t(56262),w=t(7391),_=t(48987),C=t(75271),k=e([c]);c=(k.then?(await k)():k)[0];var S=(0,a.iv)([g.l0.position.fixed,g.l0.top(0),g.l0.left(0),g.l0.height("100%"),g.l0.width("100%")]),I=(0,a.iv)([g.l0.center,g.l0.flex.growAndShrink(1),g.l0.dragRegion]);n.default=function(){var e,n=null,t=(0,w.useRouter)().query;if(!t.replUrl)throw Error("Expected replUrl to be set");var r=(0,i._)((0,u.R)(),2),a=(r[0],r[1]),k=t.replUrl.toString(),R=(0,Z.O)(),E=(0,x.F)(),G=(0,_.Is)({variables:{url:k,environment:R,platform:E},ssr:!!t.ssr}),P=G.data,D=G.loading,T=G.error,A=(null==P?void 0:P.currentUser)||void 0,B=(null==P?void 0:P.getRepl)&&("Repl"===P.getRepl.__typename||"ReplRedirect"===P.getRepl.__typename||"ReplSubscriptionExpired"===P.getRepl.__typename)?P.getRepl:null,U=(null==P?void 0:P.getRepl)&&"Repl"!==P.getRepl.__typename&&"ReplRedirect"!==P.getRepl.__typename&&"ReplSubscriptionExpired"!==P.getRepl.__typename?P.getRepl.message:null,O=(null==B?void 0:B.__typename)==="Repl"?B:null,M="https://replit.com".concat(k),L=null!==(e=null==O?void 0:O.description)&&void 0!==e?e:void 0,X=null!=U?U:null==T?void 0:T.message,W=(0,i._)((0,C.useState)(!1),2),N=W[0],z=W[1];return(0,C.useEffect)(function(){return z(!0)},[]),n=X?(0,o.tZ)(v.G,{css:[g.l0.center,g.l0.flex.growAndShrink(1)],children:(0,o.tZ)(h.xv,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):D||!N||a?(0,o.tZ)(v.G,{css:I,children:(0,o.tZ)(p.Z,{height:100})}):O&&A?(0,o.tZ)(d.j,{repl:O,currentUser:A},O.id):(0,o.tZ)(v.G,{css:I,children:(0,o.tZ)(p.Z,{height:100})}),(0,o.tZ)(l.Z,{children:(0,o.BX)(c.Z,{dataCy:"workspace-page",title:"".concat((null==O?void 0:O.title)||""),oembedUrl:M,description:L,noHeader:!0,noFooter:!0,noMain:!0,noSidebar:!0,hideEmailVerify:!0,children:[(0,o.tZ)(s.Y,{}),(0,o.tZ)(b.Z,{replResponse:B,replUrl:k,children:(0,o.BX)(f.Tg,{css:S,children:[(0,o.tZ)(m.g,{}),(0,o.tZ)(y.G,{}),n]})})]})})},r()}catch(e){r(e)}})}},function(e){e.O(0,[1604,8714,7854,3709,6645,2100,4265,2355,7111,7229,9834,2616,1798,8087,668,9045,6936,2552,5162,5494,6209,7351,126,715,8109,9406,6679,2898,1267,6332,9763,2149,5508,9549,2832,6963,1985,9574,4204,8935,2957,8330,5680,9810,1772,720,2227,414,49,6777,1893,4823,1049,3372,7395,1964,8771,9774,2888,179],function(){return e(e.s=27463)}),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-450e8e35f337914a.js.map